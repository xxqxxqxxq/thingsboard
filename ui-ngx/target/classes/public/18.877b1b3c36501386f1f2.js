(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{"/KqI":function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n("mrSG"),i=n("gaqQ"),a=n("RLvv"),o=n("Lm6k"),l=Object(r.a)(Object(r.a)({self:{description:"Built-in variable <b>self</b> that is a reference to the widget instance",type:'<a href="https://github.com/thingsboard/thingsboard/blob/13e6b10b7ab830e64d31b99614a9d95a1a25928a/ui-ngx/src/app/modules/home/models/widget-component.models.ts#L350">WidgetTypeInstance</a>',meta:"object",children:Object(r.a)({onInit:{description:"The first function which is called when widget is ready for initialization.<br>Should be used to prepare widget DOM, process widget settings and initial subscription information.",meta:"function"},onDataUpdated:{description:'Called when the new data is available from the widget subscription.<br>Latest data can be accessed from the <code>defaultSubscription</code> property of <a href="https://github.com/thingsboard/thingsboard/blob/13e6b10b7ab830e64d31b99614a9d95a1a25928a/ui-ngx/src/app/modules/home/models/widget-component.models.ts#L83">widget context (<code>ctx</code>)</a>.',meta:"function"},onResize:{description:'Called when widget container is resized. Latest <code>width</code> and <code>height</code> can be obtained from <a href="https://github.com/thingsboard/thingsboard/blob/13e6b10b7ab830e64d31b99614a9d95a1a25928a/ui-ngx/src/app/modules/home/models/widget-component.models.ts#L83">widget context (<code>ctx</code>)</a>.',meta:"function"},onEditModeChanged:{description:'Called when dashboard editing mode is changed. Latest mode is handled by <code>isEdit</code> property of <a href="https://github.com/thingsboard/thingsboard/blob/13e6b10b7ab830e64d31b99614a9d95a1a25928a/ui-ngx/src/app/modules/home/models/widget-component.models.ts#L83">widget context (<code>ctx</code>)</a>.',meta:"function"},onMobileModeChanged:{description:'Called when dashboard view width crosses mobile breakpoint. Latest state is handled by <code>isMobile</code> property of <a href="https://github.com/thingsboard/thingsboard/blob/13e6b10b7ab830e64d31b99614a9d95a1a25928a/ui-ngx/src/app/modules/home/models/widget-component.models.ts#L83">widget context (<code>ctx</code>)</a>.',meta:"function"},onDestroy:{description:"Called when widget element is destroyed. Should be used to cleanup all resources if necessary.",meta:"function"},getSettingsSchema:{description:'Optional function returning widget settings schema json as alternative to <b>Settings tab</b> of <a href="https://thingsboard.io/docs/user-guide/contribution/widgets-development/#settings-schema-section">Settings schema section</a>.',meta:"function",return:{description:"An widget settings schema json",type:"object"}},getDataKeySettingsSchema:{description:'Optional function returning particular data key settings schema json as alternative to <b>Data key settings schema</b> of <a href="https://thingsboard.io/docs/user-guide/contribution/widgets-development/#settings-schema-section">Settings schema section</a>.',meta:"function",return:{description:"A particular data key settings schema json",type:"object"}},typeParameters:{description:"Returns object describing widget datasource parameters.",meta:"function",return:{description:"An object describing widget datasource parameters.",type:'<a href="https://github.com/thingsboard/thingsboard/blob/13e6b10b7ab830e64d31b99614a9d95a1a25928a/ui-ngx/src/app/shared/models/widget.models.ts#L146">WidgetTypeParameters</a>'}},actionSources:{description:"Returns map describing available widget action sources used to define user actions.",meta:"function",return:{description:"A map of action sources by action source id.",type:'{[actionSourceId: string]: <a href="https://github.com/thingsboard/thingsboard/blob/13e6b10b7ab830e64d31b99614a9d95a1a25928a/ui-ngx/src/app/shared/models/widget.models.ts#L118">WidgetActionSource</a>}'}}},a.a)}},a.a),o.c),s=new i.a(l)},"4t2C":function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n("fXoL"),i=n("3Pt+"),a=n("8LU1"),o=n("T4sd"),l=n("sYmb"),s=n("XiUz"),d=n("j22J"),c=function(){function e(e,t,n){var r=this;this.fb=e,this.truncate=t,this.translate=n,this.propagateChange=function(e){},this.ruleNodeLinkFormGroup=this.fb.group({labels:[[],i.Validators.required]}),this.ruleNodeLinkFormGroup.get("labels").valueChanges.subscribe((function(e){return r.updateModel(e)}))}return Object.defineProperty(e.prototype,"required",{get:function(){return this.requiredValue},set:function(e){this.requiredValue=Object(a.coerceBooleanProperty)(e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"allowCustom",{get:function(){return this.allowCustomValue},set:function(e){this.allowCustomValue=Object(a.coerceBooleanProperty)(e)},enumerable:!1,configurable:!0}),e.prototype.registerOnChange=function(e){this.propagateChange=e},e.prototype.registerOnTouched=function(e){},e.prototype.ngOnInit=function(){},e.prototype.setDisabledState=function(e){this.disabled=e,this.disabled?this.ruleNodeLinkFormGroup.disable({emitEvent:!1}):this.ruleNodeLinkFormGroup.enable({emitEvent:!1})},e.prototype.writeValue=function(e){this.modelValue=e;var t=this.modelValue&&this.modelValue.labels?this.modelValue.labels:[];this.ruleNodeLinkFormGroup.get("labels").patchValue(t,{emitEvent:!1})},e.prototype.updateModel=function(e){e&&e.length?(this.modelValue.labels=e,this.modelValue.label=e.join(" / "),this.propagateChange(this.modelValue)):this.propagateChange(this.required?null:this.modelValue)},e.\u0275fac=function(t){return new(t||e)(r["\u0275\u0275directiveInject"](i.FormBuilder),r["\u0275\u0275directiveInject"](o.a),r["\u0275\u0275directiveInject"](l.TranslateService))},e.\u0275cmp=r["\u0275\u0275defineComponent"]({type:e,selectors:[["tb-rule-node-link"]],inputs:{required:"required",disabled:"disabled",allowCustom:"allowCustom",allowedLabels:"allowedLabels"},features:[r["\u0275\u0275ProvidersFeature"]([{provide:i.NG_VALUE_ACCESSOR,useExisting:Object(r.forwardRef)((function(){return e})),multi:!0}])],decls:3,vars:3,consts:[["fxLayout","column",1,"mat-padding"],[3,"formGroup"],["required","","formControlName","labels",3,"allowedLabels","allowCustom"]],template:function(e,t){1&e&&(r["\u0275\u0275elementStart"](0,"div",0),r["\u0275\u0275elementStart"](1,"form",1),r["\u0275\u0275element"](2,"tb-link-labels",2),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()),2&e&&(r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("formGroup",t.ruleNodeLinkFormGroup),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("allowedLabels",t.allowedLabels)("allowCustom",t.allowCustom))},directives:[s.f,i["\u0275angular_packages_forms_forms_y"],i.NgControlStatusGroup,i.FormGroupDirective,d.a,i.RequiredValidator,i.NgControlStatus,i.FormControlName],encapsulation:2}),e}();!function(){r["\u0275setClassMetadata"](c,[{type:r.Component,args:[{selector:"tb-rule-node-link",templateUrl:"./rule-node-link.component.html",styleUrls:[],providers:[{provide:i.NG_VALUE_ACCESSOR,useExisting:Object(r.forwardRef)((function(){return c})),multi:!0}]}]}],(function(){return[{type:i.FormBuilder},{type:o.a},{type:l.TranslateService}]}),{required:[{type:r.Input}],disabled:[{type:r.Input}],allowCustom:[{type:r.Input}],allowedLabels:[{type:r.Input}]})}()},Jka9:function(e,t,n){"use strict";n.r(t),n.d(t,"HomePagesModule",(function(){return kl}));var r=n("fXoL"),i=n("ofXK"),a=n("tyNb"),o=n("mrSG"),l=n("RxGS"),s=n("3Pt+"),d=n("c1Lj"),c=n("jKtI"),u=n("xKAQ"),p=n("//Q6"),m=n("l7P3"),f=n("sYmb"),g=n("Wp6s"),h=n("XiUz"),b=n("kRCp"),y=n("kmnG"),v=n("qFsG"),x=n("d3UM"),S=n("Ww7o"),w=n("bTqV"),C=n("bv9b"),I=n("FKr1");function E(e,t){1&e&&r["\u0275\u0275element"](0,"mat-progress-bar",33)}function T(e,t){1&e&&r["\u0275\u0275element"](0,"div",34)}function M(e,t){1&e&&(r["\u0275\u0275elementStart"](0,"mat-error"),r["\u0275\u0275text"](1),r["\u0275\u0275pipe"](2,"translate"),r["\u0275\u0275elementEnd"]()),2&e&&(r["\u0275\u0275advance"](1),r["\u0275\u0275textInterpolate1"](" ",r["\u0275\u0275pipeBind1"](2,1,"admin.mail-from-required")," "))}function F(e,t){if(1&e&&(r["\u0275\u0275elementStart"](0,"mat-option",35),r["\u0275\u0275text"](1),r["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;r["\u0275\u0275property"]("value",n),r["\u0275\u0275advance"](1),r["\u0275\u0275textInterpolate1"](" ",n.toUpperCase()," ")}}function D(e,t){1&e&&(r["\u0275\u0275elementStart"](0,"mat-error"),r["\u0275\u0275text"](1),r["\u0275\u0275pipe"](2,"translate"),r["\u0275\u0275elementEnd"]()),2&e&&(r["\u0275\u0275advance"](1),r["\u0275\u0275textInterpolate1"](" ",r["\u0275\u0275pipeBind1"](2,1,"admin.smtp-host-required")," "))}function A(e,t){1&e&&(r["\u0275\u0275elementStart"](0,"mat-error"),r["\u0275\u0275text"](1),r["\u0275\u0275pipe"](2,"translate"),r["\u0275\u0275elementEnd"]()),2&e&&(r["\u0275\u0275advance"](1),r["\u0275\u0275textInterpolate1"](" ",r["\u0275\u0275pipeBind1"](2,1,"admin.smtp-port-required")," "))}function P(e,t){1&e&&(r["\u0275\u0275elementStart"](0,"mat-error"),r["\u0275\u0275text"](1),r["\u0275\u0275pipe"](2,"translate"),r["\u0275\u0275elementEnd"]()),2&e&&(r["\u0275\u0275advance"](1),r["\u0275\u0275textInterpolate1"](" ",r["\u0275\u0275pipeBind1"](2,1,"admin.smtp-port-invalid")," "))}function N(e,t){1&e&&(r["\u0275\u0275elementStart"](0,"mat-error"),r["\u0275\u0275text"](1),r["\u0275\u0275pipe"](2,"translate"),r["\u0275\u0275elementEnd"]()),2&e&&(r["\u0275\u0275advance"](1),r["\u0275\u0275textInterpolate1"](" ",r["\u0275\u0275pipeBind1"](2,1,"admin.timeout-required")," "))}function k(e,t){1&e&&(r["\u0275\u0275elementStart"](0,"mat-error"),r["\u0275\u0275text"](1),r["\u0275\u0275pipe"](2,"translate"),r["\u0275\u0275elementEnd"]()),2&e&&(r["\u0275\u0275advance"](1),r["\u0275\u0275textInterpolate1"](" ",r["\u0275\u0275pipeBind1"](2,1,"admin.timeout-invalid")," "))}function L(e,t){if(1&e&&(r["\u0275\u0275elementStart"](0,"mat-option",35),r["\u0275\u0275text"](1),r["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;r["\u0275\u0275property"]("value",n),r["\u0275\u0275advance"](1),r["\u0275\u0275textInterpolate1"](" ",n," ")}}function O(e,t){if(1&e&&(r["\u0275\u0275elementStart"](0,"mat-form-field",10),r["\u0275\u0275elementStart"](1,"mat-label",11),r["\u0275\u0275text"](2,"admin.tls-version"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](3,"mat-select",36),r["\u0275\u0275template"](4,L,2,2,"mat-option",15),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()),2&e){var n=r["\u0275\u0275nextContext"]();r["\u0275\u0275advance"](4),r["\u0275\u0275property"]("ngForOf",n.tlsVersions)}}function _(e,t){1&e&&(r["\u0275\u0275elementStart"](0,"mat-error"),r["\u0275\u0275text"](1),r["\u0275\u0275pipe"](2,"translate"),r["\u0275\u0275elementEnd"]()),2&e&&(r["\u0275\u0275advance"](1),r["\u0275\u0275textInterpolate1"](" ",r["\u0275\u0275pipeBind1"](2,1,"admin.proxy-host-required")," "))}function B(e,t){1&e&&(r["\u0275\u0275elementStart"](0,"mat-error"),r["\u0275\u0275text"](1),r["\u0275\u0275pipe"](2,"translate"),r["\u0275\u0275elementEnd"]()),2&e&&(r["\u0275\u0275advance"](1),r["\u0275\u0275textInterpolate1"](" ",r["\u0275\u0275pipeBind1"](2,1,"admin.proxy-port-required")," "))}function j(e,t){1&e&&(r["\u0275\u0275elementStart"](0,"mat-error"),r["\u0275\u0275text"](1),r["\u0275\u0275pipe"](2,"translate"),r["\u0275\u0275elementEnd"]()),2&e&&(r["\u0275\u0275advance"](1),r["\u0275\u0275textInterpolate1"](" ",r["\u0275\u0275pipeBind1"](2,1,"admin.proxy-port-range")," "))}function R(e,t){if(1&e&&(r["\u0275\u0275elementStart"](0,"div"),r["\u0275\u0275elementStart"](1,"div",37),r["\u0275\u0275elementStart"](2,"mat-form-field",17),r["\u0275\u0275elementStart"](3,"mat-label",11),r["\u0275\u0275text"](4,"admin.proxy-host"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275element"](5,"input",38),r["\u0275\u0275template"](6,_,3,3,"mat-error",13),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](7,"mat-form-field",19),r["\u0275\u0275elementStart"](8,"mat-label",11),r["\u0275\u0275text"](9,"admin.proxy-port"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275element"](10,"input",39),r["\u0275\u0275template"](11,B,3,3,"mat-error",13),r["\u0275\u0275template"](12,j,3,3,"mat-error",13),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](13,"mat-form-field",10),r["\u0275\u0275elementStart"](14,"mat-label",11),r["\u0275\u0275text"](15,"admin.proxy-user"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275element"](16,"input",40),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](17,"mat-form-field",10),r["\u0275\u0275elementStart"](18,"mat-label",11),r["\u0275\u0275text"](19,"admin.proxy-password"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275element"](20,"input",41),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()),2&e){var n=r["\u0275\u0275nextContext"]();r["\u0275\u0275advance"](6),r["\u0275\u0275property"]("ngIf",n.mailSettings.get("proxyHost").hasError("required")),r["\u0275\u0275advance"](5),r["\u0275\u0275property"]("ngIf",n.mailSettings.get("proxyPort").hasError("required")),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",n.mailSettings.get("proxyPort").hasError("pattern")||n.mailSettings.get("proxyPort").hasError("min")||n.mailSettings.get("proxyPort").hasError("max"))}}var V=function(e){function t(t,n,r,i,a){var o=e.call(this,t)||this;return o.store=t,o.router=n,o.adminService=r,o.translate=i,o.fb=a,o.smtpProtocols=["smtp","smtps"],o.tlsVersions=["TLSv1","TLSv1.1","TLSv1.2","TLSv1.3"],o}return Object(o.d)(t,e),t.prototype.ngOnInit=function(){var e=this;this.buildMailServerSettingsForm(),this.adminService.getAdminSettings("mail").subscribe((function(t){e.adminSettings=t,e.adminSettings.jsonValue&&Object(p.y)(e.adminSettings.jsonValue.enableTls)&&(e.adminSettings.jsonValue.enableTls="true"===e.adminSettings.jsonValue.enableTls),e.mailSettings.reset(e.adminSettings.jsonValue),e.enableProxyChanged()}))},t.prototype.buildMailServerSettingsForm=function(){var e=this;this.mailSettings=this.fb.group({mailFrom:["",[s.Validators.required]],smtpProtocol:["smtp"],smtpHost:["localhost",[s.Validators.required]],smtpPort:["25",[s.Validators.required,s.Validators.pattern(d.g),s.Validators.maxLength(5)]],timeout:["10000",[s.Validators.required,s.Validators.pattern(/^[0-9]{1,6}$/),s.Validators.maxLength(6)]],enableTls:[!1],tlsVersion:[],enableProxy:[!1,[]],proxyHost:["",[s.Validators.required]],proxyPort:["",[s.Validators.required,s.Validators.min(1),s.Validators.max(65535)]],proxyUser:[""],proxyPassword:[""],username:[""],password:[""]}),this.registerDisableOnLoadFormControl(this.mailSettings.get("smtpProtocol")),this.registerDisableOnLoadFormControl(this.mailSettings.get("enableTls")),this.registerDisableOnLoadFormControl(this.mailSettings.get("enableProxy")),this.mailSettings.get("enableProxy").valueChanges.subscribe((function(){e.enableProxyChanged()}))},t.prototype.enableProxyChanged=function(){this.mailSettings.get("enableProxy").value?(this.mailSettings.get("proxyHost").enable(),this.mailSettings.get("proxyPort").enable()):(this.mailSettings.get("proxyHost").disable(),this.mailSettings.get("proxyPort").disable())},t.prototype.sendTestMail=function(){var e=this;this.adminSettings.jsonValue=Object(o.a)(Object(o.a)({},this.adminSettings.jsonValue),this.mailSettings.value),this.adminService.sendTestMail(this.adminSettings).subscribe((function(){e.store.dispatch(new u.b({message:e.translate.instant("admin.test-mail-sent"),type:"success"}))}))},t.prototype.save=function(){var e=this;this.adminSettings.jsonValue=Object(o.a)(Object(o.a)({},this.adminSettings.jsonValue),this.mailSettings.value),this.adminService.saveAdminSettings(this.adminSettings).subscribe((function(t){e.adminSettings=t,e.mailSettings.reset(e.adminSettings.jsonValue)}))},t.prototype.confirmForm=function(){return this.mailSettings},t.\u0275fac=function(e){return new(e||t)(r["\u0275\u0275directiveInject"](m.Store),r["\u0275\u0275directiveInject"](a.Router),r["\u0275\u0275directiveInject"](c.a),r["\u0275\u0275directiveInject"](f.TranslateService),r["\u0275\u0275directiveInject"](s.FormBuilder))},t.\u0275cmp=r["\u0275\u0275defineComponent"]({type:t,selectors:[["tb-mail-server"]],features:[r["\u0275\u0275InheritDefinitionFeature"]],decls:77,vars:45,consts:[[1,"settings-card"],["fxLayout","row"],["translate","",1,"mat-headline"],["fxFlex",""],["tb-help","outgoingMailSettings"],["color","warn","mode","indeterminate",4,"ngIf"],["style","height: 4px;",4,"ngIf"],[2,"padding-top","16px"],[3,"formGroup","ngSubmit"],[3,"disabled"],[1,"mat-block"],["translate",""],["matInput","","formControlName","mailFrom","required",""],[4,"ngIf"],["matInput","","formControlName","smtpProtocol"],[3,"value",4,"ngFor","ngForOf"],["fxLayout.gt-sm","row","fxLayoutGap.gt-sm","10px"],["fxFlex","100","fxFlex.gt-sm","60",1,"mat-block"],["matInput","","formControlName","smtpHost","placeholder","localhost","required",""],["fxFlex","100","fxFlex.gt-sm","40",1,"mat-block"],["matInput","","formControlName","smtpPort","placeholder","25","maxlength","5","required",""],["smtpPortInput",""],["align","end"],["matInput","","formControlName","timeout","placeholder","10000","maxlength","6","required",""],["timeoutInput",""],["formControlName","enableTls",2,"display","block","padding-bottom","16px"],["class","mat-block",4,"ngIf"],["formControlName","enableProxy",2,"display","block","padding-bottom","16px"],["matInput","","formControlName","username","autocomplete","new-username",3,"placeholder"],["matInput","","formControlName","password","type","password","autocomplete","new-password",3,"placeholder"],["fxLayout","row","fxLayoutAlign","end center","fxLayout.xs","column","fxLayoutAlign.xs","end","fxLayoutGap","16px"],["mat-raised-button","","type","button",3,"disabled","click"],["mat-raised-button","","color","primary","type","submit",3,"disabled"],["color","warn","mode","indeterminate"],[2,"height","4px"],[3,"value"],["formControlName","tlsVersion"],["fxLayout.gt-sm","row","fxLayoutGap.gt-sm","8px"],["matInput","","required","","formControlName","proxyHost"],["matInput","","required","","formControlName","proxyPort","type","number","step","1","min","1","max","65535"],["matInput","","formControlName","proxyUser"],["matInput","","type","password","formControlName","proxyPassword","autocomplete","new-proxy-password"]],template:function(e,t){if(1&e&&(r["\u0275\u0275elementStart"](0,"div"),r["\u0275\u0275elementStart"](1,"mat-card",0),r["\u0275\u0275elementStart"](2,"mat-card-title"),r["\u0275\u0275elementStart"](3,"div",1),r["\u0275\u0275elementStart"](4,"span",2),r["\u0275\u0275text"](5,"admin.outgoing-mail-settings"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275element"](6,"span",3),r["\u0275\u0275element"](7,"div",4),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275template"](8,E,1,0,"mat-progress-bar",5),r["\u0275\u0275pipe"](9,"async"),r["\u0275\u0275template"](10,T,1,0,"div",6),r["\u0275\u0275pipe"](11,"async"),r["\u0275\u0275elementStart"](12,"mat-card-content",7),r["\u0275\u0275elementStart"](13,"form",8),r["\u0275\u0275listener"]("ngSubmit",(function(){return t.save()})),r["\u0275\u0275elementStart"](14,"fieldset",9),r["\u0275\u0275pipe"](15,"async"),r["\u0275\u0275elementStart"](16,"mat-form-field",10),r["\u0275\u0275elementStart"](17,"mat-label",11),r["\u0275\u0275text"](18,"admin.mail-from"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275element"](19,"input",12),r["\u0275\u0275template"](20,M,3,3,"mat-error",13),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](21,"mat-form-field",10),r["\u0275\u0275elementStart"](22,"mat-label",11),r["\u0275\u0275text"](23,"admin.smtp-protocol"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](24,"mat-select",14),r["\u0275\u0275template"](25,F,2,2,"mat-option",15),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](26,"div",16),r["\u0275\u0275elementStart"](27,"mat-form-field",17),r["\u0275\u0275elementStart"](28,"mat-label",11),r["\u0275\u0275text"](29,"admin.smtp-host"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275element"](30,"input",18),r["\u0275\u0275template"](31,D,3,3,"mat-error",13),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](32,"mat-form-field",19),r["\u0275\u0275elementStart"](33,"mat-label",11),r["\u0275\u0275text"](34,"admin.smtp-port"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275element"](35,"input",20,21),r["\u0275\u0275elementStart"](37,"mat-hint",22),r["\u0275\u0275text"](38),r["\u0275\u0275elementEnd"](),r["\u0275\u0275template"](39,A,3,3,"mat-error",13),r["\u0275\u0275template"](40,P,3,3,"mat-error",13),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](41,"mat-form-field",10),r["\u0275\u0275elementStart"](42,"mat-label",11),r["\u0275\u0275text"](43,"admin.timeout-msec"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275element"](44,"input",23,24),r["\u0275\u0275elementStart"](46,"mat-hint",22),r["\u0275\u0275text"](47),r["\u0275\u0275elementEnd"](),r["\u0275\u0275template"](48,N,3,3,"mat-error",13),r["\u0275\u0275template"](49,k,3,3,"mat-error",13),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](50,"tb-checkbox",25),r["\u0275\u0275text"](51),r["\u0275\u0275pipe"](52,"translate"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275template"](53,O,5,1,"mat-form-field",26),r["\u0275\u0275elementStart"](54,"tb-checkbox",27),r["\u0275\u0275text"](55),r["\u0275\u0275pipe"](56,"translate"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275template"](57,R,21,3,"div",13),r["\u0275\u0275elementStart"](58,"mat-form-field",10),r["\u0275\u0275elementStart"](59,"mat-label",11),r["\u0275\u0275text"](60,"common.username"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275element"](61,"input",28),r["\u0275\u0275pipe"](62,"translate"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](63,"mat-form-field",10),r["\u0275\u0275elementStart"](64,"mat-label",11),r["\u0275\u0275text"](65,"common.password"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275element"](66,"input",29),r["\u0275\u0275pipe"](67,"translate"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](68,"div",30),r["\u0275\u0275elementStart"](69,"button",31),r["\u0275\u0275listener"]("click",(function(){return t.sendTestMail()})),r["\u0275\u0275pipe"](70,"async"),r["\u0275\u0275text"](71),r["\u0275\u0275pipe"](72,"translate"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](73,"button",32),r["\u0275\u0275pipe"](74,"async"),r["\u0275\u0275text"](75),r["\u0275\u0275pipe"](76,"translate"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()),2&e){var n=r["\u0275\u0275reference"](36),i=r["\u0275\u0275reference"](45);r["\u0275\u0275advance"](8),r["\u0275\u0275property"]("ngIf",r["\u0275\u0275pipeBind1"](9,23,t.isLoading$)),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("ngIf",!r["\u0275\u0275pipeBind1"](11,25,t.isLoading$)),r["\u0275\u0275advance"](3),r["\u0275\u0275property"]("formGroup",t.mailSettings),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("disabled",r["\u0275\u0275pipeBind1"](15,27,t.isLoading$)),r["\u0275\u0275advance"](6),r["\u0275\u0275property"]("ngIf",t.mailSettings.get("mailFrom").hasError("required")),r["\u0275\u0275advance"](5),r["\u0275\u0275property"]("ngForOf",t.smtpProtocols),r["\u0275\u0275advance"](6),r["\u0275\u0275property"]("ngIf",t.mailSettings.get("smtpHost").hasError("required")),r["\u0275\u0275advance"](7),r["\u0275\u0275textInterpolate1"]("",(null==n.value?null:n.value.length)||0,"/5"),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",t.mailSettings.get("smtpPort").hasError("required")),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",t.mailSettings.get("smtpPort").hasError("pattern")||t.mailSettings.get("smtpPort").hasError("maxlength")),r["\u0275\u0275advance"](7),r["\u0275\u0275textInterpolate1"]("",(null==i.value?null:i.value.length)||0,"/6"),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",t.mailSettings.get("timeout").hasError("required")),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",t.mailSettings.get("timeout").hasError("pattern")||t.mailSettings.get("timeout").hasError("maxlength")),r["\u0275\u0275advance"](2),r["\u0275\u0275textInterpolate1"](" ",r["\u0275\u0275pipeBind1"](52,29,"admin.enable-tls")," "),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("ngIf",t.mailSettings.get("enableTls").value),r["\u0275\u0275advance"](2),r["\u0275\u0275textInterpolate1"](" ",r["\u0275\u0275pipeBind1"](56,31,"admin.enable-proxy")," "),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("ngIf",t.mailSettings.get("enableProxy").value),r["\u0275\u0275advance"](4),r["\u0275\u0275propertyInterpolate"]("placeholder",r["\u0275\u0275pipeBind1"](62,33,"common.enter-username")),r["\u0275\u0275advance"](5),r["\u0275\u0275propertyInterpolate"]("placeholder",r["\u0275\u0275pipeBind1"](67,35,"common.enter-password")),r["\u0275\u0275advance"](3),r["\u0275\u0275property"]("disabled",r["\u0275\u0275pipeBind1"](70,37,t.isLoading$)||t.mailSettings.invalid),r["\u0275\u0275advance"](2),r["\u0275\u0275textInterpolate1"](" ",r["\u0275\u0275pipeBind1"](72,39,"admin.send-test-mail")," "),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("disabled",r["\u0275\u0275pipeBind1"](74,41,t.isLoading$)||t.mailSettings.invalid||!t.mailSettings.dirty),r["\u0275\u0275advance"](2),r["\u0275\u0275textInterpolate1"]("",r["\u0275\u0275pipeBind1"](76,43,"action.save")," ")}},directives:[g.MatCard,g.MatCardTitle,h.f,f.TranslateDirective,h.b,b.a,i.NgIf,g.MatCardContent,s["\u0275angular_packages_forms_forms_y"],s.NgControlStatusGroup,s.FormGroupDirective,y.MatFormField,y.MatLabel,v.MatInput,s.DefaultValueAccessor,s.NgControlStatus,s.FormControlName,s.RequiredValidator,x.MatSelect,i.NgForOf,h.g,s.MaxLengthValidator,y.MatHint,S.a,h.e,w.MatButton,C.MatProgressBar,y.MatError,I.MatOption,s.NumberValueAccessor],pipes:[i.AsyncPipe,f.TranslatePipe],styles:["","[_nghost-%COMP%]   mat-card.settings-card[_ngcontent-%COMP%]{margin:8px}@media screen and (min-width:960px) and (max-width:1279px){[_nghost-%COMP%]   mat-card.settings-card[_ngcontent-%COMP%]{width:80%}}@media screen and (min-width:1280px){[_nghost-%COMP%]   mat-card.settings-card[_ngcontent-%COMP%]{width:60%}}"]}),t}(l.a);!function(){r["\u0275setClassMetadata"](V,[{type:r.Component,args:[{selector:"tb-mail-server",templateUrl:"./mail-server.component.html",styleUrls:["./mail-server.component.scss","./settings-card.scss"]}]}],(function(){return[{type:m.Store},{type:a.Router},{type:c.a},{type:f.TranslateService},{type:s.FormBuilder}]}),null)}();var z=n("C/rb"),G=n("IzEk"),U=n("S+vS"),q=function(){function e(e,t,n){this.store=e,this.dialogService=t,this.translate=n}return e.prototype.canDeactivate=function(e,t,n){var r=null;if(this.store.pipe(Object(m.select)(z.c),Object(G.a)(1)).subscribe((function(e){r=e})),r&&r.isAuthenticated){var i=!1;if(e.confirmForm){var a=e.confirmForm();a&&(i=a.dirty)}else Object(p.n)(e.isDirty)&&(i=e.isDirty);if(i)return this.dialogService.confirm(this.translate.instant("confirm-on-exit.title"),this.translate.instant("confirm-on-exit.html-message"))}return!0},e.\u0275fac=function(t){return new(t||e)(r["\u0275\u0275inject"](m.Store),r["\u0275\u0275inject"](U.a),r["\u0275\u0275inject"](f.TranslateService))},e.\u0275prov=r["\u0275\u0275defineInjectable"]({token:e,factory:e.\u0275fac,providedIn:"root"}),e}();!function(){r["\u0275setClassMetadata"](q,[{type:r.Injectable,args:[{providedIn:"root"}]}],(function(){return[{type:m.Store},{type:U.a},{type:f.TranslateService}]}),null)}();var $=n("zp9Z");function W(e,t){1&e&&r["\u0275\u0275element"](0,"mat-progress-bar",16)}function H(e,t){1&e&&r["\u0275\u0275element"](0,"div",17)}function K(e,t){1&e&&(r["\u0275\u0275elementStart"](0,"mat-error"),r["\u0275\u0275text"](1),r["\u0275\u0275pipe"](2,"translate"),r["\u0275\u0275elementEnd"]()),2&e&&(r["\u0275\u0275advance"](1),r["\u0275\u0275textInterpolate1"](" ",r["\u0275\u0275pipeBind1"](2,1,"admin.base-url-required")," "))}var J=function(e){function t(t,n,r,i){var a=e.call(this,t)||this;return a.store=t,a.router=n,a.adminService=r,a.fb=i,a}return Object(o.d)(t,e),t.prototype.ngOnInit=function(){var e=this;this.buildGeneralServerSettingsForm(),this.adminService.getAdminSettings("general").subscribe((function(t){e.adminSettings=t,e.generalSettings.reset(e.adminSettings.jsonValue)}))},t.prototype.buildGeneralServerSettingsForm=function(){this.generalSettings=this.fb.group({baseUrl:["",[s.Validators.required]],prohibitDifferentUrl:["",[]]})},t.prototype.save=function(){var e=this;this.adminSettings.jsonValue=Object(o.a)(Object(o.a)({},this.adminSettings.jsonValue),this.generalSettings.value),this.adminService.saveAdminSettings(this.adminSettings).subscribe((function(t){e.adminSettings=t,e.generalSettings.reset(e.adminSettings.jsonValue)}))},t.prototype.confirmForm=function(){return this.generalSettings},t.\u0275fac=function(e){return new(e||t)(r["\u0275\u0275directiveInject"](m.Store),r["\u0275\u0275directiveInject"](a.Router),r["\u0275\u0275directiveInject"](c.a),r["\u0275\u0275directiveInject"](s.FormBuilder))},t.\u0275cmp=r["\u0275\u0275defineComponent"]({type:t,selectors:[["tb-general-settings"]],features:[r["\u0275\u0275InheritDefinitionFeature"]],decls:29,vars:20,consts:[[1,"settings-card"],["fxLayout","row"],["translate","",1,"mat-headline"],["color","warn","mode","indeterminate",4,"ngIf"],["style","height: 4px;",4,"ngIf"],[2,"padding-top","16px"],[3,"formGroup","ngSubmit"],[3,"disabled"],[1,"mat-block"],["translate",""],["matInput","","formControlName","baseUrl","required",""],[4,"ngIf"],["formControlName","prohibitDifferentUrl",2,"display","block","padding-bottom","16px"],["translate","",1,"tb-hint"],["fxLayout","row","fxLayoutAlign","end center",1,"layout-wrap",2,"width","100%"],["mat-button","","mat-raised-button","","color","primary","type","submit",3,"disabled"],["color","warn","mode","indeterminate"],[2,"height","4px"]],template:function(e,t){1&e&&(r["\u0275\u0275elementStart"](0,"div"),r["\u0275\u0275elementStart"](1,"mat-card",0),r["\u0275\u0275elementStart"](2,"mat-card-title"),r["\u0275\u0275elementStart"](3,"div",1),r["\u0275\u0275elementStart"](4,"span",2),r["\u0275\u0275text"](5,"admin.general-settings"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275template"](6,W,1,0,"mat-progress-bar",3),r["\u0275\u0275pipe"](7,"async"),r["\u0275\u0275template"](8,H,1,0,"div",4),r["\u0275\u0275pipe"](9,"async"),r["\u0275\u0275elementStart"](10,"mat-card-content",5),r["\u0275\u0275elementStart"](11,"form",6),r["\u0275\u0275listener"]("ngSubmit",(function(){return t.save()})),r["\u0275\u0275elementStart"](12,"fieldset",7),r["\u0275\u0275pipe"](13,"async"),r["\u0275\u0275elementStart"](14,"mat-form-field",8),r["\u0275\u0275elementStart"](15,"mat-label",9),r["\u0275\u0275text"](16,"admin.base-url"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275element"](17,"input",10),r["\u0275\u0275template"](18,K,3,3,"mat-error",11),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](19,"tb-checkbox",12),r["\u0275\u0275text"](20),r["\u0275\u0275pipe"](21,"translate"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](22,"div",13),r["\u0275\u0275text"](23,"admin.prohibit-different-url-hint"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](24,"div",14),r["\u0275\u0275elementStart"](25,"button",15),r["\u0275\u0275pipe"](26,"async"),r["\u0275\u0275text"](27),r["\u0275\u0275pipe"](28,"translate"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()),2&e&&(r["\u0275\u0275advance"](6),r["\u0275\u0275property"]("ngIf",r["\u0275\u0275pipeBind1"](7,8,t.isLoading$)),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("ngIf",!r["\u0275\u0275pipeBind1"](9,10,t.isLoading$)),r["\u0275\u0275advance"](3),r["\u0275\u0275property"]("formGroup",t.generalSettings),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("disabled",r["\u0275\u0275pipeBind1"](13,12,t.isLoading$)),r["\u0275\u0275advance"](6),r["\u0275\u0275property"]("ngIf",t.generalSettings.get("baseUrl").hasError("required")),r["\u0275\u0275advance"](2),r["\u0275\u0275textInterpolate1"](" ",r["\u0275\u0275pipeBind1"](21,14,"admin.prohibit-different-url")," "),r["\u0275\u0275advance"](5),r["\u0275\u0275property"]("disabled",r["\u0275\u0275pipeBind1"](26,16,t.isLoading$)||t.generalSettings.invalid||!t.generalSettings.dirty),r["\u0275\u0275advance"](2),r["\u0275\u0275textInterpolate1"]("",r["\u0275\u0275pipeBind1"](28,18,"action.save")," "))},directives:[g.MatCard,g.MatCardTitle,h.f,f.TranslateDirective,i.NgIf,g.MatCardContent,s["\u0275angular_packages_forms_forms_y"],s.NgControlStatusGroup,s.FormGroupDirective,y.MatFormField,y.MatLabel,v.MatInput,s.DefaultValueAccessor,s.NgControlStatus,s.FormControlName,s.RequiredValidator,S.a,h.e,w.MatButton,C.MatProgressBar,y.MatError],pipes:[i.AsyncPipe,f.TranslatePipe],styles:["","[_nghost-%COMP%]   mat-card.settings-card[_ngcontent-%COMP%]{margin:8px}@media screen and (min-width:960px) and (max-width:1279px){[_nghost-%COMP%]   mat-card.settings-card[_ngcontent-%COMP%]{width:80%}}@media screen and (min-width:1280px){[_nghost-%COMP%]   mat-card.settings-card[_ngcontent-%COMP%]{width:60%}}"]}),t}(l.a);!function(){r["\u0275setClassMetadata"](J,[{type:r.Component,args:[{selector:"tb-general-settings",templateUrl:"./general-settings.component.html",styleUrls:["./general-settings.component.scss","./settings-card.scss"]}]}],(function(){return[{type:m.Store},{type:a.Router},{type:c.a},{type:s.FormBuilder}]}),null)}();var Y=n("7EHt");function X(e,t){1&e&&r["\u0275\u0275element"](0,"mat-progress-bar",29)}function Q(e,t){1&e&&r["\u0275\u0275element"](0,"div",30)}function Z(e,t){1&e&&(r["\u0275\u0275elementStart"](0,"mat-error"),r["\u0275\u0275text"](1),r["\u0275\u0275pipe"](2,"translate"),r["\u0275\u0275elementEnd"]()),2&e&&(r["\u0275\u0275advance"](1),r["\u0275\u0275textInterpolate1"](" ",r["\u0275\u0275pipeBind1"](2,1,"admin.minimum-max-failed-login-attempts-range")," "))}function ee(e,t){1&e&&(r["\u0275\u0275elementStart"](0,"mat-error"),r["\u0275\u0275text"](1),r["\u0275\u0275pipe"](2,"translate"),r["\u0275\u0275elementEnd"]()),2&e&&(r["\u0275\u0275advance"](1),r["\u0275\u0275textInterpolate1"](" ",r["\u0275\u0275pipeBind1"](2,1,"admin.minimum-password-length-required")," "))}function te(e,t){1&e&&(r["\u0275\u0275elementStart"](0,"mat-error"),r["\u0275\u0275text"](1),r["\u0275\u0275pipe"](2,"translate"),r["\u0275\u0275elementEnd"]()),2&e&&(r["\u0275\u0275advance"](1),r["\u0275\u0275textInterpolate1"](" ",r["\u0275\u0275pipeBind1"](2,1,"admin.minimum-password-length-range")," "))}function ne(e,t){1&e&&(r["\u0275\u0275elementStart"](0,"mat-error"),r["\u0275\u0275text"](1),r["\u0275\u0275pipe"](2,"translate"),r["\u0275\u0275elementEnd"]()),2&e&&(r["\u0275\u0275advance"](1),r["\u0275\u0275textInterpolate1"](" ",r["\u0275\u0275pipeBind1"](2,1,"admin.minimum-password-length-range")," "))}function re(e,t){1&e&&(r["\u0275\u0275elementStart"](0,"mat-error"),r["\u0275\u0275text"](1),r["\u0275\u0275pipe"](2,"translate"),r["\u0275\u0275elementEnd"]()),2&e&&(r["\u0275\u0275advance"](1),r["\u0275\u0275textInterpolate1"](" ",r["\u0275\u0275pipeBind1"](2,1,"admin.minimum-uppercase-letters-range")," "))}function ie(e,t){1&e&&(r["\u0275\u0275elementStart"](0,"mat-error"),r["\u0275\u0275text"](1),r["\u0275\u0275pipe"](2,"translate"),r["\u0275\u0275elementEnd"]()),2&e&&(r["\u0275\u0275advance"](1),r["\u0275\u0275textInterpolate1"](" ",r["\u0275\u0275pipeBind1"](2,1,"admin.minimum-lowercase-letters-range")," "))}function ae(e,t){1&e&&(r["\u0275\u0275elementStart"](0,"mat-error"),r["\u0275\u0275text"](1),r["\u0275\u0275pipe"](2,"translate"),r["\u0275\u0275elementEnd"]()),2&e&&(r["\u0275\u0275advance"](1),r["\u0275\u0275textInterpolate1"](" ",r["\u0275\u0275pipeBind1"](2,1,"admin.minimum-digits-range")," "))}function oe(e,t){1&e&&(r["\u0275\u0275elementStart"](0,"mat-error"),r["\u0275\u0275text"](1),r["\u0275\u0275pipe"](2,"translate"),r["\u0275\u0275elementEnd"]()),2&e&&(r["\u0275\u0275advance"](1),r["\u0275\u0275textInterpolate1"](" ",r["\u0275\u0275pipeBind1"](2,1,"admin.minimum-special-characters-range")," "))}function le(e,t){1&e&&(r["\u0275\u0275elementStart"](0,"mat-error"),r["\u0275\u0275text"](1),r["\u0275\u0275pipe"](2,"translate"),r["\u0275\u0275elementEnd"]()),2&e&&(r["\u0275\u0275advance"](1),r["\u0275\u0275textInterpolate1"](" ",r["\u0275\u0275pipeBind1"](2,1,"admin.password-expiration-period-days-range")," "))}function se(e,t){1&e&&(r["\u0275\u0275elementStart"](0,"mat-error"),r["\u0275\u0275text"](1),r["\u0275\u0275pipe"](2,"translate"),r["\u0275\u0275elementEnd"]()),2&e&&(r["\u0275\u0275advance"](1),r["\u0275\u0275textInterpolate1"](" ",r["\u0275\u0275pipeBind1"](2,1,"admin.password-reuse-frequency-days-range")," "))}var de=function(e){function t(t,n,r,i){var a=e.call(this,t)||this;return a.store=t,a.router=n,a.adminService=r,a.fb=i,a}return Object(o.d)(t,e),t.prototype.ngOnInit=function(){var e=this;this.buildSecuritySettingsForm(),this.adminService.getSecuritySettings().subscribe((function(t){e.securitySettings=t,e.securitySettingsFormGroup.reset(e.securitySettings)}))},t.prototype.buildSecuritySettingsForm=function(){this.securitySettingsFormGroup=this.fb.group({maxFailedLoginAttempts:[null,[s.Validators.min(0)]],userLockoutNotificationEmail:["",[]],passwordPolicy:this.fb.group({minimumLength:[null,[s.Validators.required,s.Validators.min(5),s.Validators.max(50)]],minimumUppercaseLetters:[null,s.Validators.min(0)],minimumLowercaseLetters:[null,s.Validators.min(0)],minimumDigits:[null,s.Validators.min(0)],minimumSpecialCharacters:[null,s.Validators.min(0)],passwordExpirationPeriodDays:[null,s.Validators.min(0)],passwordReuseFrequencyDays:[null,s.Validators.min(0)]})})},t.prototype.save=function(){var e=this;this.securitySettings=Object(o.a)(Object(o.a)({},this.securitySettings),this.securitySettingsFormGroup.value),this.adminService.saveSecuritySettings(this.securitySettings).subscribe((function(t){e.securitySettings=t,e.securitySettingsFormGroup.reset(e.securitySettings)}))},t.prototype.confirmForm=function(){return this.securitySettingsFormGroup},t.\u0275fac=function(e){return new(e||t)(r["\u0275\u0275directiveInject"](m.Store),r["\u0275\u0275directiveInject"](a.Router),r["\u0275\u0275directiveInject"](c.a),r["\u0275\u0275directiveInject"](s.FormBuilder))},t.\u0275cmp=r["\u0275\u0275defineComponent"]({type:t,selectors:[["tb-security-settings"]],features:[r["\u0275\u0275InheritDefinitionFeature"]],decls:80,vars:28,consts:[[1,"settings-card"],["fxLayout","row"],["translate","",1,"mat-headline"],["fxFlex",""],["tb-help","securitySettings"],["color","warn","mode","indeterminate",4,"ngIf"],["style","height: 4px;",4,"ngIf"],[2,"padding-top","16px"],["autocomplete","off",3,"formGroup","ngSubmit"],[3,"disabled"],[1,"mat-accordion-container"],["multi","true"],[3,"expanded"],["translate","",1,"tb-panel-title"],[1,"mat-block"],["translate",""],["matInput","","type","number","formControlName","maxFailedLoginAttempts","step","1","min","0"],[4,"ngIf"],["matInput","","type","email","formControlName","userLockoutNotificationEmail"],["formGroupName","passwordPolicy"],["matInput","","type","number","formControlName","minimumLength","step","1","min","5","max","50","required",""],["matInput","","type","number","formControlName","minimumUppercaseLetters","step","1","min","0"],["matInput","","type","number","formControlName","minimumLowercaseLetters","step","1","min","0"],["matInput","","type","number","formControlName","minimumDigits","step","1","min","0"],["matInput","","type","number","formControlName","minimumSpecialCharacters","step","1","min","0"],["matInput","","type","number","formControlName","passwordExpirationPeriodDays","step","1","min","0"],["matInput","","type","number","formControlName","passwordReuseFrequencyDays","step","1","min","0"],["fxLayout","row","fxLayoutAlign","end center",1,"layout-wrap",2,"width","100%"],["mat-button","","mat-raised-button","","color","primary","type","submit",3,"disabled"],["color","warn","mode","indeterminate"],[2,"height","4px"]],template:function(e,t){1&e&&(r["\u0275\u0275elementStart"](0,"div"),r["\u0275\u0275elementStart"](1,"mat-card",0),r["\u0275\u0275elementStart"](2,"mat-card-title"),r["\u0275\u0275elementStart"](3,"div",1),r["\u0275\u0275elementStart"](4,"span",2),r["\u0275\u0275text"](5,"admin.security-settings"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275element"](6,"span",3),r["\u0275\u0275element"](7,"div",4),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275template"](8,X,1,0,"mat-progress-bar",5),r["\u0275\u0275pipe"](9,"async"),r["\u0275\u0275template"](10,Q,1,0,"div",6),r["\u0275\u0275pipe"](11,"async"),r["\u0275\u0275elementStart"](12,"mat-card-content",7),r["\u0275\u0275elementStart"](13,"form",8),r["\u0275\u0275listener"]("ngSubmit",(function(){return t.save()})),r["\u0275\u0275elementStart"](14,"fieldset",9),r["\u0275\u0275pipe"](15,"async"),r["\u0275\u0275elementStart"](16,"div",10),r["\u0275\u0275elementStart"](17,"mat-accordion",11),r["\u0275\u0275elementStart"](18,"mat-expansion-panel",12),r["\u0275\u0275elementStart"](19,"mat-expansion-panel-header"),r["\u0275\u0275elementStart"](20,"mat-panel-title"),r["\u0275\u0275elementStart"](21,"div",13),r["\u0275\u0275text"](22,"admin.general-policy"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](23,"mat-form-field",14),r["\u0275\u0275elementStart"](24,"mat-label",15),r["\u0275\u0275text"](25,"admin.max-failed-login-attempts"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275element"](26,"input",16),r["\u0275\u0275template"](27,Z,3,3,"mat-error",17),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](28,"mat-form-field",14),r["\u0275\u0275elementStart"](29,"mat-label",15),r["\u0275\u0275text"](30,"admin.user-lockout-notification-email"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275element"](31,"input",18),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](32,"mat-expansion-panel",12),r["\u0275\u0275elementStart"](33,"mat-expansion-panel-header"),r["\u0275\u0275elementStart"](34,"mat-panel-title"),r["\u0275\u0275elementStart"](35,"div",13),r["\u0275\u0275text"](36,"admin.password-policy"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](37,"section",19),r["\u0275\u0275elementStart"](38,"mat-form-field",14),r["\u0275\u0275elementStart"](39,"mat-label",15),r["\u0275\u0275text"](40,"admin.minimum-password-length"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275element"](41,"input",20),r["\u0275\u0275template"](42,ee,3,3,"mat-error",17),r["\u0275\u0275template"](43,te,3,3,"mat-error",17),r["\u0275\u0275template"](44,ne,3,3,"mat-error",17),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](45,"mat-form-field",14),r["\u0275\u0275elementStart"](46,"mat-label",15),r["\u0275\u0275text"](47,"admin.minimum-uppercase-letters"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275element"](48,"input",21),r["\u0275\u0275template"](49,re,3,3,"mat-error",17),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](50,"mat-form-field",14),r["\u0275\u0275elementStart"](51,"mat-label",15),r["\u0275\u0275text"](52,"admin.minimum-lowercase-letters"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275element"](53,"input",22),r["\u0275\u0275template"](54,ie,3,3,"mat-error",17),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](55,"mat-form-field",14),r["\u0275\u0275elementStart"](56,"mat-label",15),r["\u0275\u0275text"](57,"admin.minimum-digits"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275element"](58,"input",23),r["\u0275\u0275template"](59,ae,3,3,"mat-error",17),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](60,"mat-form-field",14),r["\u0275\u0275elementStart"](61,"mat-label",15),r["\u0275\u0275text"](62,"admin.minimum-special-characters"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275element"](63,"input",24),r["\u0275\u0275template"](64,oe,3,3,"mat-error",17),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](65,"mat-form-field",14),r["\u0275\u0275elementStart"](66,"mat-label",15),r["\u0275\u0275text"](67,"admin.password-expiration-period-days"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275element"](68,"input",25),r["\u0275\u0275template"](69,le,3,3,"mat-error",17),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](70,"mat-form-field",14),r["\u0275\u0275elementStart"](71,"mat-label",15),r["\u0275\u0275text"](72,"admin.password-reuse-frequency-days"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275element"](73,"input",26),r["\u0275\u0275template"](74,se,3,3,"mat-error",17),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](75,"div",27),r["\u0275\u0275elementStart"](76,"button",28),r["\u0275\u0275pipe"](77,"async"),r["\u0275\u0275text"](78),r["\u0275\u0275pipe"](79,"translate"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()),2&e&&(r["\u0275\u0275advance"](8),r["\u0275\u0275property"]("ngIf",r["\u0275\u0275pipeBind1"](9,18,t.isLoading$)),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("ngIf",!r["\u0275\u0275pipeBind1"](11,20,t.isLoading$)),r["\u0275\u0275advance"](3),r["\u0275\u0275property"]("formGroup",t.securitySettingsFormGroup),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("disabled",r["\u0275\u0275pipeBind1"](15,22,t.isLoading$)),r["\u0275\u0275advance"](4),r["\u0275\u0275property"]("expanded",!0),r["\u0275\u0275advance"](9),r["\u0275\u0275property"]("ngIf",t.securitySettingsFormGroup.get("maxFailedLoginAttempts").hasError("min")),r["\u0275\u0275advance"](5),r["\u0275\u0275property"]("expanded",!0),r["\u0275\u0275advance"](10),r["\u0275\u0275property"]("ngIf",t.securitySettingsFormGroup.get("passwordPolicy.minimumLength").hasError("required")),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",t.securitySettingsFormGroup.get("passwordPolicy.minimumLength").hasError("min")),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",t.securitySettingsFormGroup.get("passwordPolicy.minimumLength").hasError("max")),r["\u0275\u0275advance"](5),r["\u0275\u0275property"]("ngIf",t.securitySettingsFormGroup.get("passwordPolicy.minimumUppercaseLetters").hasError("min")),r["\u0275\u0275advance"](5),r["\u0275\u0275property"]("ngIf",t.securitySettingsFormGroup.get("passwordPolicy.minimumLowercaseLetters").hasError("min")),r["\u0275\u0275advance"](5),r["\u0275\u0275property"]("ngIf",t.securitySettingsFormGroup.get("passwordPolicy.minimumDigits").hasError("min")),r["\u0275\u0275advance"](5),r["\u0275\u0275property"]("ngIf",t.securitySettingsFormGroup.get("passwordPolicy.minimumSpecialCharacters").hasError("min")),r["\u0275\u0275advance"](5),r["\u0275\u0275property"]("ngIf",t.securitySettingsFormGroup.get("passwordPolicy.passwordExpirationPeriodDays").hasError("min")),r["\u0275\u0275advance"](5),r["\u0275\u0275property"]("ngIf",t.securitySettingsFormGroup.get("passwordPolicy.passwordReuseFrequencyDays").hasError("min")),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("disabled",r["\u0275\u0275pipeBind1"](77,24,t.isLoading$)||t.securitySettingsFormGroup.invalid||!t.securitySettingsFormGroup.dirty),r["\u0275\u0275advance"](2),r["\u0275\u0275textInterpolate1"]("",r["\u0275\u0275pipeBind1"](79,26,"action.save")," "))},directives:[g.MatCard,g.MatCardTitle,h.f,f.TranslateDirective,h.b,b.a,i.NgIf,g.MatCardContent,s["\u0275angular_packages_forms_forms_y"],s.NgControlStatusGroup,s.FormGroupDirective,Y.MatAccordion,Y.MatExpansionPanel,Y.MatExpansionPanelHeader,Y.MatExpansionPanelTitle,y.MatFormField,y.MatLabel,v.MatInput,s.NumberValueAccessor,s.DefaultValueAccessor,s.NgControlStatus,s.FormControlName,s.FormGroupName,s.RequiredValidator,h.e,w.MatButton,C.MatProgressBar,y.MatError],pipes:[i.AsyncPipe,f.TranslatePipe],styles:["[_nghost-%COMP%]   .mat-accordion-container[_ngcontent-%COMP%]{margin-bottom:16px}","[_nghost-%COMP%]   mat-card.settings-card[_ngcontent-%COMP%]{margin:8px}@media screen and (min-width:960px) and (max-width:1279px){[_nghost-%COMP%]   mat-card.settings-card[_ngcontent-%COMP%]{width:80%}}@media screen and (min-width:1280px){[_nghost-%COMP%]   mat-card.settings-card[_ngcontent-%COMP%]{width:60%}}"]}),t}(l.a);!function(){r["\u0275setClassMetadata"](de,[{type:r.Component,args:[{selector:"tb-security-settings",templateUrl:"./security-settings.component.html",styleUrls:["./security-settings.component.scss","./settings-card.scss"]}]}],(function(){return[{type:m.Store},{type:a.Router},{type:c.a},{type:s.FormBuilder}]}),null)}();var ce=n("PGJw"),ue=n("FtGj"),pe=n("wtyh"),me=n("cp0P"),fe=n("wSoN"),ge=n("bSwM"),he=n("Qu3c"),be=n("NFeN"),ye=n("Dvla"),ve=n("znSr"),xe=n("wZkO"),Se=n("A5z7"),we=n("0Miz");function Ce(e,t){1&e&&r["\u0275\u0275element"](0,"mat-progress-bar",15)}function Ie(e,t){1&e&&r["\u0275\u0275element"](0,"div",16)}function Ee(e,t){if(1&e&&(r["\u0275\u0275elementStart"](0,"mat-option",52),r["\u0275\u0275text"](1),r["\u0275\u0275pipe"](2,"uppercase"),r["\u0275\u0275pipe"](3,"translate"),r["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit,i=r["\u0275\u0275nextContext"](5);r["\u0275\u0275property"]("value",n),r["\u0275\u0275advance"](1),r["\u0275\u0275textInterpolate1"](" ",r["\u0275\u0275pipeBind1"](2,2,r["\u0275\u0275pipeBind1"](3,4,i.domainSchemaTranslations.get(n)))," ")}}function Te(e,t){1&e&&(r["\u0275\u0275elementStart"](0,"mat-error"),r["\u0275\u0275text"](1),r["\u0275\u0275pipe"](2,"translate"),r["\u0275\u0275elementEnd"]()),2&e&&(r["\u0275\u0275advance"](1),r["\u0275\u0275textInterpolate1"](" ",r["\u0275\u0275pipeBind1"](2,1,"admin.error-verification-url")," "))}function Me(e,t){1&e&&(r["\u0275\u0275elementStart"](0,"mat-error"),r["\u0275\u0275text"](1),r["\u0275\u0275pipe"](2,"translate"),r["\u0275\u0275elementEnd"]()),2&e&&(r["\u0275\u0275advance"](1),r["\u0275\u0275textInterpolate1"](" ",r["\u0275\u0275pipeBind1"](2,1,"admin.domain-name-unique")," "))}function Fe(e,t){if(1&e&&(r["\u0275\u0275elementStart"](0,"mat-form-field",42),r["\u0275\u0275element"](1,"mat-label"),r["\u0275\u0275element"](2,"input",46),r["\u0275\u0275elementStart"](3,"button",47),r["\u0275\u0275pipe"](4,"translate"),r["\u0275\u0275element"](5,"mat-icon",48),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()),2&e){var n=r["\u0275\u0275nextContext"]().$implicit,i=r["\u0275\u0275nextContext"](4);r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("value",i.redirectURIMixed(n)),r["\u0275\u0275advance"](1),r["\u0275\u0275propertyInterpolate"]("cbContent",i.redirectURIMixed(n)),r["\u0275\u0275propertyInterpolate"]("matTooltip",r["\u0275\u0275pipeBind1"](4,3,"admin.oauth2.copy-redirect-uri"))}}function De(e,t){if(1&e){var n=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"section",33),r["\u0275\u0275elementStart"](1,"div",34),r["\u0275\u0275elementStart"](2,"div",35),r["\u0275\u0275elementStart"](3,"div",36),r["\u0275\u0275elementStart"](4,"div",37),r["\u0275\u0275elementStart"](5,"mat-form-field",38),r["\u0275\u0275elementStart"](6,"mat-label",39),r["\u0275\u0275text"](7,"admin.oauth2.protocol"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](8,"mat-select",40),r["\u0275\u0275template"](9,Ee,4,6,"mat-option",41),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](10,"mat-form-field",42),r["\u0275\u0275elementStart"](11,"mat-label",39),r["\u0275\u0275text"](12,"admin.domain-name"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275element"](13,"input",43),r["\u0275\u0275template"](14,Te,3,3,"mat-error",44),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275template"](15,Me,3,3,"mat-error",44),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](16,"div",45),r["\u0275\u0275elementStart"](17,"mat-form-field",42),r["\u0275\u0275elementStart"](18,"mat-label",39),r["\u0275\u0275text"](19,"admin.oauth2.redirect-uri-template"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275element"](20,"input",46),r["\u0275\u0275elementStart"](21,"button",47),r["\u0275\u0275pipe"](22,"translate"),r["\u0275\u0275element"](23,"mat-icon",48),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275template"](24,Fe,6,5,"mat-form-field",49),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](25,"div",50),r["\u0275\u0275elementStart"](26,"button",51),r["\u0275\u0275listener"]("click",(function(e){r["\u0275\u0275restoreView"](n);var i=t.index,a=r["\u0275\u0275nextContext"](2).$implicit;return r["\u0275\u0275nextContext"](2).removeDomain(e,a,i)})),r["\u0275\u0275pipe"](27,"translate"),r["\u0275\u0275elementStart"](28,"mat-icon"),r["\u0275\u0275text"](29,"close"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()}if(2&e){var i=t.$implicit,a=t.index,o=r["\u0275\u0275nextContext"](2).$implicit,l=r["\u0275\u0275nextContext"](2);r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("formGroupName",a),r["\u0275\u0275advance"](8),r["\u0275\u0275property"]("ngForOf",l.protocols),r["\u0275\u0275advance"](5),r["\u0275\u0275property"]("ngIf",i.get("name").hasError("pattern")),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",i.hasError("unique")),r["\u0275\u0275advance"](5),r["\u0275\u0275property"]("value",l.redirectURI(i)),r["\u0275\u0275advance"](1),r["\u0275\u0275propertyInterpolate"]("cbContent",l.redirectURI(i)),r["\u0275\u0275propertyInterpolate"]("matTooltip",r["\u0275\u0275pipeBind1"](22,10,"admin.oauth2.copy-redirect-uri")),r["\u0275\u0275advance"](3),r["\u0275\u0275property"]("ngIf","MIXED"===i.get("scheme").value),r["\u0275\u0275advance"](2),r["\u0275\u0275propertyInterpolate"]("matTooltip",r["\u0275\u0275pipeBind1"](27,12,"admin.oauth2.delete-domain")),r["\u0275\u0275property"]("disabled",l.clientDomainInfos(o).controls.length<2)}}function Ae(e,t){if(1&e&&(r["\u0275\u0275elementStart"](0,"mat-option",52),r["\u0275\u0275text"](1),r["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;r["\u0275\u0275property"]("value",n),r["\u0275\u0275advance"](1),r["\u0275\u0275textInterpolate1"](" ",n," ")}}function Pe(e,t){if(1&e&&r["\u0275\u0275element"](0,"div",63),2&e){var n=r["\u0275\u0275nextContext"](2).$implicit,i=r["\u0275\u0275nextContext"](4);r["\u0275\u0275property"]("tb-help",i.getHelpLink(n))}}function Ne(e,t){1&e&&(r["\u0275\u0275elementStart"](0,"mat-error"),r["\u0275\u0275text"](1),r["\u0275\u0275pipe"](2,"translate"),r["\u0275\u0275elementEnd"]()),2&e&&(r["\u0275\u0275advance"](1),r["\u0275\u0275textInterpolate1"](" ",r["\u0275\u0275pipeBind1"](2,1,"admin.oauth2.client-id-required")," "))}function ke(e,t){1&e&&(r["\u0275\u0275elementStart"](0,"mat-error"),r["\u0275\u0275text"](1),r["\u0275\u0275pipe"](2,"translate"),r["\u0275\u0275elementEnd"]()),2&e&&(r["\u0275\u0275advance"](1),r["\u0275\u0275textInterpolate1"](" ",r["\u0275\u0275pipeBind1"](2,1,"admin.oauth2.client-secret-required")," "))}function Le(e,t){if(1&e){var n=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"button",89),r["\u0275\u0275listener"]("click",(function(){r["\u0275\u0275restoreView"](n);var e=r["\u0275\u0275nextContext"](3).$implicit;return r["\u0275\u0275nextContext"](4).toggleEditMode(e,"accessTokenUri")})),r["\u0275\u0275elementStart"](1,"mat-icon",90),r["\u0275\u0275text"](2,"create"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()}}function Oe(e,t){1&e&&(r["\u0275\u0275elementStart"](0,"mat-error"),r["\u0275\u0275text"](1),r["\u0275\u0275pipe"](2,"translate"),r["\u0275\u0275elementEnd"]()),2&e&&(r["\u0275\u0275advance"](1),r["\u0275\u0275textInterpolate1"](" ",r["\u0275\u0275pipeBind1"](2,1,"admin.oauth2.access-token-uri-required")," "))}function _e(e,t){1&e&&(r["\u0275\u0275elementStart"](0,"mat-error"),r["\u0275\u0275text"](1),r["\u0275\u0275pipe"](2,"translate"),r["\u0275\u0275elementEnd"]()),2&e&&(r["\u0275\u0275advance"](1),r["\u0275\u0275textInterpolate1"](" ",r["\u0275\u0275pipeBind1"](2,1,"admin.oauth2.uri-pattern-error")," "))}function Be(e,t){if(1&e){var n=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"button",89),r["\u0275\u0275listener"]("click",(function(){r["\u0275\u0275restoreView"](n);var e=r["\u0275\u0275nextContext"](3).$implicit;return r["\u0275\u0275nextContext"](4).toggleEditMode(e,"authorizationUri")})),r["\u0275\u0275elementStart"](1,"mat-icon",90),r["\u0275\u0275text"](2,"create"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()}}function je(e,t){1&e&&(r["\u0275\u0275elementStart"](0,"mat-error"),r["\u0275\u0275text"](1),r["\u0275\u0275pipe"](2,"translate"),r["\u0275\u0275elementEnd"]()),2&e&&(r["\u0275\u0275advance"](1),r["\u0275\u0275textInterpolate1"](" ",r["\u0275\u0275pipeBind1"](2,1,"admin.oauth2.authorization-uri-required")," "))}function Re(e,t){1&e&&(r["\u0275\u0275elementStart"](0,"mat-error"),r["\u0275\u0275text"](1),r["\u0275\u0275pipe"](2,"translate"),r["\u0275\u0275elementEnd"]()),2&e&&(r["\u0275\u0275advance"](1),r["\u0275\u0275textInterpolate1"](" ",r["\u0275\u0275pipeBind1"](2,1,"admin.oauth2.uri-pattern-error")," "))}function Ve(e,t){if(1&e){var n=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"button",91),r["\u0275\u0275listener"]("click",(function(){r["\u0275\u0275restoreView"](n);var e=r["\u0275\u0275nextContext"](3).$implicit;return r["\u0275\u0275nextContext"](4).toggleEditMode(e,"jwkSetUri")})),r["\u0275\u0275elementStart"](1,"mat-icon",90),r["\u0275\u0275text"](2,"create"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()}}function ze(e,t){1&e&&(r["\u0275\u0275elementStart"](0,"mat-error"),r["\u0275\u0275text"](1),r["\u0275\u0275pipe"](2,"translate"),r["\u0275\u0275elementEnd"]()),2&e&&(r["\u0275\u0275advance"](1),r["\u0275\u0275textInterpolate1"](" ",r["\u0275\u0275pipeBind1"](2,1,"admin.oauth2.uri-pattern-error")," "))}function Ge(e,t){if(1&e){var n=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"button",89),r["\u0275\u0275listener"]("click",(function(){r["\u0275\u0275restoreView"](n);var e=r["\u0275\u0275nextContext"](3).$implicit;return r["\u0275\u0275nextContext"](4).toggleEditMode(e,"userInfoUri")})),r["\u0275\u0275elementStart"](1,"mat-icon",90),r["\u0275\u0275text"](2,"create"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()}}function Ue(e,t){1&e&&(r["\u0275\u0275elementStart"](0,"mat-error"),r["\u0275\u0275text"](1),r["\u0275\u0275pipe"](2,"translate"),r["\u0275\u0275elementEnd"]()),2&e&&(r["\u0275\u0275advance"](1),r["\u0275\u0275textInterpolate1"](" ",r["\u0275\u0275pipeBind1"](2,1,"admin.oauth2.user-info-uri-required")," "))}function qe(e,t){1&e&&(r["\u0275\u0275elementStart"](0,"mat-error"),r["\u0275\u0275text"](1),r["\u0275\u0275pipe"](2,"translate"),r["\u0275\u0275elementEnd"]()),2&e&&(r["\u0275\u0275advance"](1),r["\u0275\u0275textInterpolate1"](" ",r["\u0275\u0275pipeBind1"](2,1,"admin.oauth2.uri-pattern-error")," "))}function $e(e,t){if(1&e&&(r["\u0275\u0275elementStart"](0,"mat-option",52),r["\u0275\u0275text"](1),r["\u0275\u0275pipe"](2,"uppercase"),r["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;r["\u0275\u0275property"]("value",n),r["\u0275\u0275advance"](1),r["\u0275\u0275textInterpolate1"](" ",r["\u0275\u0275pipeBind1"](2,2,n)," ")}}function We(e,t){1&e&&(r["\u0275\u0275elementStart"](0,"mat-error"),r["\u0275\u0275text"](1),r["\u0275\u0275pipe"](2,"translate"),r["\u0275\u0275elementEnd"]()),2&e&&(r["\u0275\u0275advance"](1),r["\u0275\u0275textInterpolate1"](" ",r["\u0275\u0275pipeBind1"](2,1,"admin.oauth2.login-button-label-required")," "))}function He(e,t){if(1&e&&(r["\u0275\u0275elementStart"](0,"div",58),r["\u0275\u0275elementStart"](1,"mat-form-field",92),r["\u0275\u0275elementStart"](2,"mat-label",39),r["\u0275\u0275text"](3,"admin.oauth2.login-button-label"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275element"](4,"input",93),r["\u0275\u0275pipe"](5,"translate"),r["\u0275\u0275template"](6,We,3,3,"mat-error",44),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](7,"mat-form-field",42),r["\u0275\u0275elementStart"](8,"mat-label",39),r["\u0275\u0275text"](9,"admin.oauth2.login-button-icon"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275element"](10,"input",94),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()),2&e){var n=r["\u0275\u0275nextContext"](3).$implicit;r["\u0275\u0275advance"](4),r["\u0275\u0275propertyInterpolate"]("placeholder",r["\u0275\u0275pipeBind1"](5,2,"admin.oauth2.login-button-label-placeholder")),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("ngIf",n.get("loginButtonLabel").hasError("required"))}}function Ke(e,t){if(1&e){var n=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"mat-chip",95),r["\u0275\u0275listener"]("removed",(function(){r["\u0275\u0275restoreView"](n);var e=t.index,i=r["\u0275\u0275nextContext"](3).$implicit;return r["\u0275\u0275nextContext"](4).removeScope(e,i)})),r["\u0275\u0275text"](1),r["\u0275\u0275elementStart"](2,"mat-icon",96),r["\u0275\u0275text"](3,"cancel"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()}if(2&e){var i=t.$implicit;r["\u0275\u0275advance"](1),r["\u0275\u0275textInterpolate1"](" ",i," ")}}function Je(e,t){1&e&&(r["\u0275\u0275elementStart"](0,"mat-error"),r["\u0275\u0275text"](1),r["\u0275\u0275pipe"](2,"translate"),r["\u0275\u0275elementEnd"]()),2&e&&(r["\u0275\u0275advance"](1),r["\u0275\u0275textInterpolate1"](" ",r["\u0275\u0275pipeBind1"](2,1,"admin.oauth2.scope-required")," "))}function Ye(e,t){1&e&&(r["\u0275\u0275elementStart"](0,"mat-error"),r["\u0275\u0275text"](1),r["\u0275\u0275pipe"](2,"translate"),r["\u0275\u0275elementEnd"]()),2&e&&(r["\u0275\u0275advance"](1),r["\u0275\u0275textInterpolate1"](" ",r["\u0275\u0275pipeBind1"](2,1,"admin.oauth2.user-name-attribute-name-required")," "))}function Xe(e,t){if(1&e&&(r["\u0275\u0275elementStart"](0,"mat-option",52),r["\u0275\u0275text"](1),r["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;r["\u0275\u0275property"]("value",n),r["\u0275\u0275advance"](1),r["\u0275\u0275textInterpolate1"](" ",n," ")}}function Qe(e,t){1&e&&(r["\u0275\u0275elementStart"](0,"mat-error"),r["\u0275\u0275text"](1),r["\u0275\u0275pipe"](2,"translate"),r["\u0275\u0275elementEnd"]()),2&e&&(r["\u0275\u0275advance"](1),r["\u0275\u0275textInterpolate1"](" ",r["\u0275\u0275pipeBind1"](2,1,"admin.oauth2.email-attribute-key-required")," "))}function Ze(e,t){if(1&e&&(r["\u0275\u0275elementStart"](0,"mat-form-field",107),r["\u0275\u0275elementStart"](1,"mat-label",39),r["\u0275\u0275text"](2,"admin.oauth2.email-attribute-key"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275element"](3,"input",108),r["\u0275\u0275template"](4,Qe,3,3,"mat-error",44),r["\u0275\u0275elementEnd"]()),2&e){var n=r["\u0275\u0275nextContext"](4).$implicit;r["\u0275\u0275advance"](4),r["\u0275\u0275property"]("ngIf",n.get("mapperConfig.basic.emailAttributeKey").hasError("required"))}}function et(e,t){if(1&e&&(r["\u0275\u0275elementStart"](0,"mat-option",52),r["\u0275\u0275text"](1),r["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;r["\u0275\u0275property"]("value",n),r["\u0275\u0275advance"](1),r["\u0275\u0275textInterpolate1"](" ",n," ")}}function tt(e,t){1&e&&(r["\u0275\u0275elementStart"](0,"mat-error"),r["\u0275\u0275text"](1),r["\u0275\u0275pipe"](2,"translate"),r["\u0275\u0275elementEnd"]()),2&e&&(r["\u0275\u0275advance"](1),r["\u0275\u0275textInterpolate1"](" ",r["\u0275\u0275pipeBind1"](2,1,"admin.oauth2.tenant-name-pattern-required")," "))}function nt(e,t){if(1&e&&(r["\u0275\u0275elementStart"](0,"section",97),r["\u0275\u0275template"](1,Ze,5,1,"mat-form-field",98),r["\u0275\u0275elementStart"](2,"div",58),r["\u0275\u0275elementStart"](3,"mat-form-field",42),r["\u0275\u0275elementStart"](4,"mat-label",39),r["\u0275\u0275text"](5,"admin.oauth2.first-name-attribute-key"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275element"](6,"input",99),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](7,"mat-form-field",42),r["\u0275\u0275elementStart"](8,"mat-label",39),r["\u0275\u0275text"](9,"admin.oauth2.last-name-attribute-key"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275element"](10,"input",100),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](11,"div",58),r["\u0275\u0275elementStart"](12,"mat-form-field",42),r["\u0275\u0275elementStart"](13,"mat-label",39),r["\u0275\u0275text"](14,"admin.oauth2.tenant-name-strategy"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](15,"mat-select",101),r["\u0275\u0275template"](16,et,2,2,"mat-option",41),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](17,"mat-form-field",102),r["\u0275\u0275elementStart"](18,"mat-label",39),r["\u0275\u0275text"](19,"admin.oauth2.tenant-name-pattern"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275element"](20,"input",103),r["\u0275\u0275template"](21,tt,3,3,"mat-error",44),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](22,"mat-form-field",42),r["\u0275\u0275elementStart"](23,"mat-label",39),r["\u0275\u0275text"](24,"admin.oauth2.customer-name-pattern"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275element"](25,"input",104),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](26,"div",58),r["\u0275\u0275elementStart"](27,"mat-form-field",42),r["\u0275\u0275elementStart"](28,"mat-label",39),r["\u0275\u0275text"](29,"admin.oauth2.default-dashboard-name"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275element"](30,"input",105),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](31,"mat-checkbox",106),r["\u0275\u0275text"](32),r["\u0275\u0275pipe"](33,"translate"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()),2&e){var n=r["\u0275\u0275nextContext"](3).$implicit,i=r["\u0275\u0275nextContext"](4);r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",n.get("mapperConfig.type").value!==i.mapperConfigType.GITHUB),r["\u0275\u0275advance"](15),r["\u0275\u0275property"]("ngForOf",i.tenantNameStrategies),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("fxShow","CUSTOM"===n.get("mapperConfig.basic.tenantNameStrategy").value),r["\u0275\u0275advance"](3),r["\u0275\u0275property"]("required","CUSTOM"===n.get("mapperConfig.basic.tenantNameStrategy").value),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",n.get("mapperConfig.basic.tenantNamePattern").hasError("required")),r["\u0275\u0275advance"](11),r["\u0275\u0275textInterpolate1"](" ",r["\u0275\u0275pipeBind1"](33,6,"admin.oauth2.always-fullscreen")," ")}}function rt(e,t){1&e&&(r["\u0275\u0275elementStart"](0,"mat-error"),r["\u0275\u0275text"](1),r["\u0275\u0275pipe"](2,"translate"),r["\u0275\u0275elementEnd"]()),2&e&&(r["\u0275\u0275advance"](1),r["\u0275\u0275textInterpolate1"](" ",r["\u0275\u0275pipeBind1"](2,1,"admin.oauth2.url-required")," "))}function it(e,t){1&e&&(r["\u0275\u0275elementStart"](0,"mat-error"),r["\u0275\u0275text"](1),r["\u0275\u0275pipe"](2,"translate"),r["\u0275\u0275elementEnd"]()),2&e&&(r["\u0275\u0275advance"](1),r["\u0275\u0275textInterpolate1"](" ",r["\u0275\u0275pipeBind1"](2,1,"admin.oauth2.url-pattern")," "))}function at(e,t){if(1&e&&(r["\u0275\u0275elementStart"](0,"section",109),r["\u0275\u0275elementStart"](1,"mat-form-field",107),r["\u0275\u0275elementStart"](2,"mat-label",39),r["\u0275\u0275text"](3,"admin.oauth2.url"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275element"](4,"input",110),r["\u0275\u0275template"](5,rt,3,3,"mat-error",44),r["\u0275\u0275template"](6,it,3,3,"mat-error",44),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](7,"div",58),r["\u0275\u0275elementStart"](8,"mat-form-field",42),r["\u0275\u0275elementStart"](9,"mat-label",39),r["\u0275\u0275text"](10,"common.username"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275element"](11,"input",111),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](12,"mat-form-field",42),r["\u0275\u0275elementStart"](13,"mat-label",39),r["\u0275\u0275text"](14,"common.password"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275element"](15,"input",112),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()),2&e){var n=r["\u0275\u0275nextContext"](3).$implicit;r["\u0275\u0275advance"](5),r["\u0275\u0275property"]("ngIf",n.get("mapperConfig.custom.url").hasError("required")),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",n.get("mapperConfig.custom.url").hasError("pattern"))}}function ot(e,t){if(1&e){var n=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"mat-tab-group",64),r["\u0275\u0275elementStart"](1,"mat-tab",65),r["\u0275\u0275pipe"](2,"translate"),r["\u0275\u0275elementStart"](3,"div",66),r["\u0275\u0275elementStart"](4,"mat-form-field",42),r["\u0275\u0275elementStart"](5,"mat-label",39),r["\u0275\u0275text"](6,"admin.oauth2.access-token-uri"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275element"](7,"input",67),r["\u0275\u0275template"](8,Le,3,0,"button",68),r["\u0275\u0275template"](9,Oe,3,3,"mat-error",44),r["\u0275\u0275template"](10,_e,3,3,"mat-error",44),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](11,"mat-form-field",42),r["\u0275\u0275elementStart"](12,"mat-label",39),r["\u0275\u0275text"](13,"admin.oauth2.authorization-uri"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275element"](14,"input",69),r["\u0275\u0275template"](15,Be,3,0,"button",68),r["\u0275\u0275template"](16,je,3,3,"mat-error",44),r["\u0275\u0275template"](17,Re,3,3,"mat-error",44),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](18,"div",58),r["\u0275\u0275elementStart"](19,"mat-form-field",70),r["\u0275\u0275elementStart"](20,"mat-label",39),r["\u0275\u0275text"](21,"admin.oauth2.jwk-set-uri"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275element"](22,"input",71),r["\u0275\u0275template"](23,Ve,3,0,"button",72),r["\u0275\u0275template"](24,ze,3,3,"mat-error",44),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](25,"mat-form-field",42),r["\u0275\u0275elementStart"](26,"mat-label",39),r["\u0275\u0275text"](27,"admin.oauth2.user-info-uri"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275element"](28,"input",73),r["\u0275\u0275template"](29,Ge,3,0,"button",68),r["\u0275\u0275template"](30,Ue,3,3,"mat-error",44),r["\u0275\u0275template"](31,qe,3,3,"mat-error",44),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](32,"mat-form-field",42),r["\u0275\u0275elementStart"](33,"mat-label",39),r["\u0275\u0275text"](34,"admin.oauth2.client-authentication-method"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](35,"mat-select",74),r["\u0275\u0275template"](36,$e,3,4,"mat-option",41),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275template"](37,He,11,4,"div",75),r["\u0275\u0275elementStart"](38,"section",76),r["\u0275\u0275elementStart"](39,"div",77),r["\u0275\u0275elementStart"](40,"mat-checkbox",78),r["\u0275\u0275text"](41),r["\u0275\u0275pipe"](42,"translate"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](43,"mat-checkbox",79),r["\u0275\u0275text"](44),r["\u0275\u0275pipe"](45,"translate"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](46,"mat-form-field",42),r["\u0275\u0275elementStart"](47,"mat-label",39),r["\u0275\u0275text"](48,"admin.oauth2.scope"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](49,"mat-chip-list",null,80),r["\u0275\u0275template"](51,Ke,4,1,"mat-chip",81),r["\u0275\u0275elementStart"](52,"input",82),r["\u0275\u0275listener"]("matChipInputTokenEnd",(function(e){r["\u0275\u0275restoreView"](n);var t=r["\u0275\u0275nextContext"](2).$implicit;return r["\u0275\u0275nextContext"](4).addScope(e,t)})),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275template"](53,Je,3,3,"mat-error",44),r["\u0275\u0275elementEnd"](),r["\u0275\u0275element"](54,"tb-error",83),r["\u0275\u0275pipe"](55,"translate"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](56,"mat-tab",65),r["\u0275\u0275pipe"](57,"translate"),r["\u0275\u0275elementStart"](58,"mat-form-field",84),r["\u0275\u0275elementStart"](59,"mat-label",39),r["\u0275\u0275text"](60,"admin.oauth2.user-name-attribute-name"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275element"](61,"input",85),r["\u0275\u0275template"](62,Ye,3,3,"mat-error",44),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](63,"section",76),r["\u0275\u0275elementStart"](64,"mat-form-field",42),r["\u0275\u0275elementStart"](65,"mat-label",39),r["\u0275\u0275text"](66,"admin.oauth2.type"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](67,"mat-select",86),r["\u0275\u0275template"](68,Xe,2,2,"mat-option",41),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275template"](69,nt,34,8,"section",87),r["\u0275\u0275template"](70,at,16,2,"section",88),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()}if(2&e){var i=r["\u0275\u0275reference"](50),a=r["\u0275\u0275nextContext"](2).$implicit,o=r["\u0275\u0275nextContext"](4);r["\u0275\u0275advance"](1),r["\u0275\u0275propertyInterpolate"]("label",r["\u0275\u0275pipeBind1"](2,27,"admin.oauth2.general")),r["\u0275\u0275advance"](7),r["\u0275\u0275property"]("ngIf",!o.isCustomProvider(a)),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",a.get("accessTokenUri").hasError("required")),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",a.get("accessTokenUri").hasError("pattern")),r["\u0275\u0275advance"](5),r["\u0275\u0275property"]("ngIf",!o.isCustomProvider(a)),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",a.get("authorizationUri").hasError("required")),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",a.get("authorizationUri").hasError("pattern")),r["\u0275\u0275advance"](6),r["\u0275\u0275property"]("ngIf",!o.isCustomProvider(a)),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",a.get("jwkSetUri").hasError("pattern")),r["\u0275\u0275advance"](5),r["\u0275\u0275property"]("ngIf",!o.isCustomProvider(a)),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",a.get("userInfoUri").hasError("required")),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",a.get("userInfoUri").hasError("pattern")),r["\u0275\u0275advance"](5),r["\u0275\u0275property"]("ngForOf",o.clientAuthenticationMethods),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",o.isCustomProvider(a)),r["\u0275\u0275advance"](4),r["\u0275\u0275textInterpolate1"](" ",r["\u0275\u0275pipeBind1"](42,29,"admin.oauth2.allow-user-creation")," "),r["\u0275\u0275advance"](3),r["\u0275\u0275textInterpolate1"](" ",r["\u0275\u0275pipeBind1"](45,31,"admin.oauth2.activate-user")," "),r["\u0275\u0275advance"](7),r["\u0275\u0275property"]("ngForOf",a.get("scope").value)("ngForTrackBy",o.trackByParams),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("matChipInputFor",i)("matChipInputSeparatorKeyCodes",o.separatorKeysCodes),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",a.get("scope").hasError("required")),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("error",a.get("scope").hasError("required")?r["\u0275\u0275pipeBind1"](55,33,"admin.oauth2.scope-required"):""),r["\u0275\u0275advance"](2),r["\u0275\u0275propertyInterpolate"]("label",r["\u0275\u0275pipeBind1"](57,35,"admin.oauth2.mapper")),r["\u0275\u0275advance"](6),r["\u0275\u0275property"]("ngIf",a.get("userNameAttributeName").hasError("required")),r["\u0275\u0275advance"](6),r["\u0275\u0275property"]("ngForOf",o.mapperConfigTypes),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",a.get("mapperConfig.type").value!==o.mapperConfigType.CUSTOM),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",a.get("mapperConfig.type").value===o.mapperConfigType.CUSTOM)}}function lt(e,t){if(1&e&&(r["\u0275\u0275elementStart"](0,"section",22),r["\u0275\u0275elementStart"](1,"section",55),r["\u0275\u0275elementStart"](2,"mat-form-field",42),r["\u0275\u0275elementStart"](3,"mat-label",39),r["\u0275\u0275text"](4,"admin.oauth2.login-provider"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](5,"mat-select",56),r["\u0275\u0275template"](6,Ae,2,2,"mat-option",41),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275template"](7,Pe,1,1,"div",57),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](8,"div",58),r["\u0275\u0275elementStart"](9,"mat-form-field",42),r["\u0275\u0275elementStart"](10,"mat-label",39),r["\u0275\u0275text"](11,"admin.oauth2.client-id"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275element"](12,"input",59),r["\u0275\u0275template"](13,Ne,3,3,"mat-error",44),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](14,"mat-form-field",42),r["\u0275\u0275elementStart"](15,"mat-label",39),r["\u0275\u0275text"](16,"admin.oauth2.client-secret"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275element"](17,"input",60),r["\u0275\u0275template"](18,ke,3,3,"mat-error",44),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](19,"mat-expansion-panel",61),r["\u0275\u0275elementStart"](20,"mat-expansion-panel-header",62),r["\u0275\u0275elementStart"](21,"mat-panel-description",24),r["\u0275\u0275text"](22),r["\u0275\u0275pipe"](23,"translate"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275template"](24,ot,71,37,"ng-template",26),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()),2&e){var n=r["\u0275\u0275nextContext"](),i=n.index,a=n.$implicit,o=r["\u0275\u0275nextContext"](4);r["\u0275\u0275property"]("formGroupName",i),r["\u0275\u0275advance"](6),r["\u0275\u0275property"]("ngForOf",o.templateProvider),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",!o.isCustomProvider(a)),r["\u0275\u0275advance"](6),r["\u0275\u0275property"]("ngIf",a.get("clientId").hasError("required")),r["\u0275\u0275advance"](5),r["\u0275\u0275property"]("ngIf",a.get("clientSecret").hasError("required")),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("disabled",o.isCustomProvider(a))("expanded",o.isCustomProvider(a)),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("fxHide",o.isCustomProvider(a)),r["\u0275\u0275advance"](2),r["\u0275\u0275textInterpolate1"](" ",r["\u0275\u0275pipeBind1"](23,9,"admin.oauth2.custom-setting")," ")}}function st(e,t){if(1&e){var n=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"mat-expansion-panel",53),r["\u0275\u0275elementStart"](1,"mat-expansion-panel-header"),r["\u0275\u0275elementStart"](2,"mat-panel-title",23),r["\u0275\u0275text"](3),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](4,"mat-panel-description",24),r["\u0275\u0275elementStart"](5,"button",54),r["\u0275\u0275listener"]("click",(function(e){r["\u0275\u0275restoreView"](n);var i=t.index,a=r["\u0275\u0275nextContext"](2).$implicit;return r["\u0275\u0275nextContext"](2).deleteProvider(e,a,i)})),r["\u0275\u0275pipe"](6,"translate"),r["\u0275\u0275elementStart"](7,"mat-icon"),r["\u0275\u0275text"](8,"delete"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275template"](9,lt,25,11,"ng-template",26),r["\u0275\u0275elementEnd"]()}if(2&e){var i=t.$implicit,a=r["\u0275\u0275nextContext"](2).$implicit,o=r["\u0275\u0275nextContext"](2);r["\u0275\u0275advance"](3),r["\u0275\u0275textInterpolate1"](" ",o.getProviderName(i)," "),r["\u0275\u0275advance"](2),r["\u0275\u0275propertyInterpolate"]("matTooltip",r["\u0275\u0275pipeBind1"](6,3,"admin.oauth2.delete-provider")),r["\u0275\u0275property"]("disabled",o.clientDomainProviders(a).controls.length<2)}}function dt(e,t){if(1&e){var n=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementContainerStart"](0,27),r["\u0275\u0275template"](1,De,30,14,"section",28),r["\u0275\u0275elementStart"](2,"div",29),r["\u0275\u0275elementStart"](3,"button",30),r["\u0275\u0275listener"]("click",(function(){r["\u0275\u0275restoreView"](n);var e=r["\u0275\u0275nextContext"]().$implicit;return r["\u0275\u0275nextContext"](2).addDomainInfo(e)})),r["\u0275\u0275pipe"](4,"async"),r["\u0275\u0275text"](5),r["\u0275\u0275pipe"](6,"translate"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementContainerEnd"](),r["\u0275\u0275elementContainerStart"](7,31),r["\u0275\u0275elementStart"](8,"div",19),r["\u0275\u0275template"](9,st,10,5,"mat-expansion-panel",32),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementContainerEnd"](),r["\u0275\u0275elementStart"](10,"div",12),r["\u0275\u0275elementStart"](11,"button",30),r["\u0275\u0275listener"]("click",(function(){r["\u0275\u0275restoreView"](n);var e=r["\u0275\u0275nextContext"]().$implicit;return r["\u0275\u0275nextContext"](2).addProvider(e)})),r["\u0275\u0275pipe"](12,"async"),r["\u0275\u0275text"](13),r["\u0275\u0275pipe"](14,"translate"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()}if(2&e){var i=r["\u0275\u0275nextContext"]().$implicit,a=r["\u0275\u0275nextContext"](2);r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngForOf",a.clientDomainInfos(i).controls)("ngForTrackBy",a.trackByParams),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("disabled",r["\u0275\u0275pipeBind1"](4,8,a.isLoading$)),r["\u0275\u0275advance"](2),r["\u0275\u0275textInterpolate1"](" ",r["\u0275\u0275pipeBind1"](6,10,"admin.oauth2.add-domain")," "),r["\u0275\u0275advance"](4),r["\u0275\u0275property"]("ngForOf",a.clientDomainProviders(i).controls)("ngForTrackBy",a.trackByParams),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("disabled",r["\u0275\u0275pipeBind1"](12,12,a.isLoading$)),r["\u0275\u0275advance"](2),r["\u0275\u0275textInterpolate1"](" ",r["\u0275\u0275pipeBind1"](14,14,"admin.oauth2.add-provider")," ")}}function ct(e,t){if(1&e){var n=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementContainerStart"](0),r["\u0275\u0275elementStart"](1,"mat-expansion-panel",22),r["\u0275\u0275elementStart"](2,"mat-expansion-panel-header"),r["\u0275\u0275elementStart"](3,"mat-panel-title",23),r["\u0275\u0275text"](4),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](5,"mat-panel-description",24),r["\u0275\u0275elementStart"](6,"button",25),r["\u0275\u0275listener"]("click",(function(e){r["\u0275\u0275restoreView"](n);var i=t.index;return r["\u0275\u0275nextContext"](2).deleteDomain(e,i)})),r["\u0275\u0275pipe"](7,"translate"),r["\u0275\u0275elementStart"](8,"mat-icon"),r["\u0275\u0275text"](9,"delete"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275template"](10,dt,15,16,"ng-template",26),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementContainerEnd"]()}if(2&e){var i=t.$implicit,a=t.index,o=r["\u0275\u0275nextContext"](2);r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("formGroupName",a),r["\u0275\u0275advance"](3),r["\u0275\u0275textInterpolate1"](" ",o.domainListTittle(i)," "),r["\u0275\u0275advance"](2),r["\u0275\u0275propertyInterpolate"]("matTooltip",r["\u0275\u0275pipeBind1"](7,3,"action.delete"))}}function ut(e,t){if(1&e&&(r["\u0275\u0275elementStart"](0,"section",17),r["\u0275\u0275elementContainerStart"](1,18),r["\u0275\u0275elementStart"](2,"div",19),r["\u0275\u0275elementStart"](3,"mat-accordion",20),r["\u0275\u0275template"](4,ct,11,5,"ng-container",21),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementContainerEnd"](),r["\u0275\u0275elementEnd"]()),2&e){var n=r["\u0275\u0275nextContext"]();r["\u0275\u0275advance"](4),r["\u0275\u0275property"]("ngForOf",n.domainsParams.controls)("ngForTrackBy",n.trackByParams)}}function pt(e,t){if(1&e){var n=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"button",113),r["\u0275\u0275listener"]("click",(function(){return r["\u0275\u0275restoreView"](n),r["\u0275\u0275nextContext"]().addDomain()})),r["\u0275\u0275pipe"](1,"async"),r["\u0275\u0275elementStart"](2,"mat-icon"),r["\u0275\u0275text"](3,"add"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](4,"span",39),r["\u0275\u0275text"](5,"action.add"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()}if(2&e){var i=r["\u0275\u0275nextContext"]();r["\u0275\u0275property"]("disabled",r["\u0275\u0275pipeBind1"](1,1,i.isLoading$))}}var mt=function(e){function t(t,n,r,i,a,o,l){var s=e.call(this,t)||this;return s.store=t,s.route=n,s.oauth2Service=r,s.fb=i,s.dialogService=a,s.translate=o,s.window=l,s.URL_REGEXP=/^[A-Za-z][A-Za-z\d.+-]*:\/*(?:\w+(?::\w+)?@)?[^\s/]+(?::\d+)?(?:\/[\w#!:.,?+=&%@\-/]*)?$/,s.DOMAIN_AND_PORT_REGEXP=/^(?:\w+(?::\w+)?@)?[^\s/]+(?::\d+)?$/,s.subscriptions=[],s.templates=new Map,s.defaultProvider={additionalInfo:{providerName:"Custom"},clientAuthenticationMethod:ce.a.POST,userNameAttributeName:"email",mapperConfig:{allowUserCreation:!0,activateUser:!1,type:ce.c.BASIC,basic:{emailAttributeKey:"email",tenantNameStrategy:ce.d.DOMAIN,alwaysFullScreen:!1}}},s.separatorKeysCodes=[ue.ENTER,ue.COMMA],s.clientAuthenticationMethods=Object.keys(ce.a),s.mapperConfigType=ce.c,s.mapperConfigTypes=Object.keys(ce.c),s.tenantNameStrategies=Object.keys(ce.d),s.protocols=Object.keys(ce.b),s.domainSchemaTranslations=ce.e,s.templateProvider=["Custom"],s.loginProcessingUrl=s.route.snapshot.data.loginProcessingUrl,s}return Object(o.d)(t,e),t.prototype.ngOnInit=function(){var e=this;this.buildOAuth2SettingsForm(),Object(me.a)([this.oauth2Service.getOAuth2Template(),this.oauth2Service.getOAuth2Settings()]).subscribe((function(t){var n=t[0],r=t[1];e.initTemplates(n),e.auth2ClientsParams=r,e.initOAuth2Settings(e.auth2ClientsParams)}))},t.prototype.ngOnDestroy=function(){e.prototype.ngOnDestroy.call(this),this.subscriptions.forEach((function(e){e.unsubscribe()}))},t.prototype.initTemplates=function(e){var t,n=this;e.map((function(e){delete e.additionalInfo,n.templates.set(e.name,e)})),(t=this.templateProvider).push.apply(t,Array.from(this.templates.keys())),this.templateProvider.sort()},Object.defineProperty(t.prototype,"domainsParams",{get:function(){return this.oauth2SettingsForm.get("domainsParams")},enumerable:!1,configurable:!0}),t.prototype.formBasicGroup=function(e,t){var n;n=(null==t?void 0:t.tenantNamePattern)?t.tenantNamePattern:{value:null,disabled:!0};var r=this.fb.group({emailAttributeKey:[(null==t?void 0:t.emailAttributeKey)?t.emailAttributeKey:"email",s.Validators.required],firstNameAttributeKey:[(null==t?void 0:t.firstNameAttributeKey)?t.firstNameAttributeKey:""],lastNameAttributeKey:[(null==t?void 0:t.lastNameAttributeKey)?t.lastNameAttributeKey:""],tenantNameStrategy:[(null==t?void 0:t.tenantNameStrategy)?t.tenantNameStrategy:ce.d.DOMAIN],tenantNamePattern:[n,s.Validators.required],customerNamePattern:[(null==t?void 0:t.customerNamePattern)?t.customerNamePattern:null],defaultDashboardName:[(null==t?void 0:t.defaultDashboardName)?t.defaultDashboardName:null],alwaysFullScreen:[!!Object(p.o)(null==t?void 0:t.alwaysFullScreen)&&t.alwaysFullScreen]});return this.subscriptions.push(r.get("tenantNameStrategy").valueChanges.subscribe((function(e){"CUSTOM"===e?r.get("tenantNamePattern").enable():r.get("tenantNamePattern").disable()}))),r},t.prototype.formCustomGroup=function(e){return this.fb.group({url:[(null==e?void 0:e.url)?e.url:null,[s.Validators.required,s.Validators.pattern(this.URL_REGEXP)]],username:[(null==e?void 0:e.username)?e.username:null],password:[(null==e?void 0:e.password)?e.password:null]})},t.prototype.buildOAuth2SettingsForm=function(){this.oauth2SettingsForm=this.fb.group({domainsParams:this.fb.array([]),enabled:[!1]})},t.prototype.initOAuth2Settings=function(e){var t=this;e&&(this.oauth2SettingsForm.patchValue({enabled:e.enabled},{emitEvent:!1}),e.domainsParams.forEach((function(e){t.domainsParams.push(t.buildDomainsForm(e))})))},t.prototype.uniqueDomainValidator=function(e){var t;if(null===(t=e.parent)||void 0===t?void 0:t.value){var n=e.value.name,r=e.parent.getRawValue().filter((function(e){return e.name===n})).map((function(e){return e.scheme}));if(r.length>1&&r.indexOf(ce.b.MIXED)>-1||new Set(r).size!==r.length)return{unique:!0}}return null},t.prototype.domainListTittle=function(e){var t=e.get("domainInfos").value;if(t.length){var n=new Set;return t.forEach((function(e){n.add(e.name)})),Array.from(n).join(", ")}return this.translate.instant("admin.oauth2.new-domain")},t.prototype.buildDomainsForm=function(e){var t=this,n=this.fb.group({domainInfos:this.fb.array([],s.Validators.required),clientRegistrations:this.fb.array([],s.Validators.required)});return e?(e.domainInfos.forEach((function(e){t.clientDomainInfos(n).push(t.buildDomainForm(e))})),e.clientRegistrations.forEach((function(e){t.clientDomainProviders(n).push(t.buildProviderForm(e))}))):(this.clientDomainProviders(n).push(this.buildProviderForm()),this.clientDomainInfos(n).push(this.buildDomainForm())),n},t.prototype.buildDomainForm=function(e){return this.fb.group({name:[e?e.name:this.window.location.hostname,[s.Validators.required,s.Validators.pattern(this.DOMAIN_AND_PORT_REGEXP)]],scheme:[(null==e?void 0:e.scheme)?e.scheme:ce.b.HTTPS,s.Validators.required]},{validators:this.uniqueDomainValidator})},t.prototype.buildProviderForm=function(e){var t,n,r,i=this,a=null;Object(p.o)(null==e?void 0:e.additionalInfo)&&(a=e.additionalInfo,-1===this.templateProvider.indexOf(a.providerName)&&(a.providerName="Custom"));var o="Custom";this.templateProvider.indexOf("Google")&&(o="Google");var l=this.fb.group({additionalInfo:this.fb.group({providerName:[(null==a?void 0:a.providerName)?null==a?void 0:a.providerName:o,s.Validators.required]}),loginButtonLabel:[(null==e?void 0:e.loginButtonLabel)?e.loginButtonLabel:null,s.Validators.required],loginButtonIcon:[(null==e?void 0:e.loginButtonIcon)?e.loginButtonIcon:null],clientId:[(null==e?void 0:e.clientId)?e.clientId:"",s.Validators.required],clientSecret:[(null==e?void 0:e.clientSecret)?e.clientSecret:"",s.Validators.required],accessTokenUri:[(null==e?void 0:e.accessTokenUri)?e.accessTokenUri:"",[s.Validators.required,s.Validators.pattern(this.URL_REGEXP)]],authorizationUri:[(null==e?void 0:e.authorizationUri)?e.authorizationUri:"",[s.Validators.required,s.Validators.pattern(this.URL_REGEXP)]],scope:this.fb.array((null==e?void 0:e.scope)?e.scope:[],this.validateScope),jwkSetUri:[(null==e?void 0:e.jwkSetUri)?e.jwkSetUri:"",s.Validators.pattern(this.URL_REGEXP)],userInfoUri:[(null==e?void 0:e.userInfoUri)?e.userInfoUri:"",[s.Validators.required,s.Validators.pattern(this.URL_REGEXP)]],clientAuthenticationMethod:[(null==e?void 0:e.clientAuthenticationMethod)?e.clientAuthenticationMethod:ce.a.POST,s.Validators.required],userNameAttributeName:[(null==e?void 0:e.userNameAttributeName)?e.userNameAttributeName:"email",s.Validators.required],mapperConfig:this.fb.group({allowUserCreation:[!Object(p.o)(null===(t=null==e?void 0:e.mapperConfig)||void 0===t?void 0:t.allowUserCreation)||e.mapperConfig.allowUserCreation],activateUser:[!!Object(p.o)(null===(n=null==e?void 0:e.mapperConfig)||void 0===n?void 0:n.activateUser)&&e.mapperConfig.activateUser],type:[(null===(r=null==e?void 0:e.mapperConfig)||void 0===r?void 0:r.type)?e.mapperConfig.type:ce.c.BASIC,s.Validators.required]})});return e?this.changeMapperConfigType(l,e.mapperConfig.type,e.mapperConfig):(this.changeMapperConfigType(l,ce.c.BASIC),this.setProviderDefaultValue(o,l)),this.subscriptions.push(l.get("mapperConfig.type").valueChanges.subscribe((function(e){i.changeMapperConfigType(l,e)}))),this.subscriptions.push(l.get("additionalInfo.providerName").valueChanges.subscribe((function(e){l.get("scope").clear(),i.setProviderDefaultValue(e,l)}))),l},t.prototype.validateScope=function(e){var t=e.value;return t&&t.length?null:{required:!0}},t.prototype.setProviderDefaultValue=function(e,t){var n=this;if("Custom"===e)t.reset(this.defaultProvider,{emitEvent:!1}),t.get("accessTokenUri").enable(),t.get("authorizationUri").enable(),t.get("jwkSetUri").enable(),t.get("userInfoUri").enable();else{var r=this.templates.get(e);r.clientId="",r.clientSecret="",r.scope.forEach((function(){t.get("scope").push(n.fb.control(""))})),t.get("accessTokenUri").disable(),t.get("authorizationUri").disable(),t.get("jwkSetUri").disable(),t.get("userInfoUri").disable(),t.patchValue(r)}},t.prototype.changeMapperConfigType=function(e,t,n){var r=e.get("mapperConfig");t===ce.c.CUSTOM?(r.removeControl("basic"),r.addControl("custom",this.formCustomGroup(null==n?void 0:n.custom))):(r.removeControl("custom"),r.get("basic")||r.addControl("basic",this.formBasicGroup(t,null==n?void 0:n.basic)),t===ce.c.GITHUB?(r.get("basic.emailAttributeKey").disable(),r.get("basic.emailAttributeKey").patchValue(null,{emitEvent:!1})):r.get("basic.emailAttributeKey").enable())},t.prototype.save=function(){var e=this,t=this.oauth2SettingsForm.getRawValue();this.oauth2Service.saveOAuth2Settings(t).subscribe((function(t){e.auth2ClientsParams=t,e.oauth2SettingsForm.patchValue(e.oauth2SettingsForm,{emitEvent:!1}),e.oauth2SettingsForm.markAsUntouched(),e.oauth2SettingsForm.markAsPristine()}))},t.prototype.confirmForm=function(){return this.oauth2SettingsForm},t.prototype.addScope=function(e,t){var n=e.input,r=e.value,i=t.get("scope");""!==r.trim()&&(i.push(this.fb.control(r.trim())),i.markAsDirty()),n&&(n.value="")},t.prototype.removeScope=function(e,t){var n=t.get("scope");n.removeAt(e),n.markAsTouched(),n.markAsDirty()},t.prototype.addDomain=function(){this.domainsParams.push(this.buildDomainsForm())},t.prototype.deleteDomain=function(e,t){var n=this;e&&(e.stopPropagation(),e.preventDefault());var r=this.domainListTittle(this.domainsParams.at(t));this.dialogService.confirm(this.translate.instant("admin.oauth2.delete-domain-title",{domainName:r||""}),this.translate.instant("admin.oauth2.delete-domain-text"),null,this.translate.instant("action.delete")).subscribe((function(e){e&&(n.domainsParams.removeAt(t),n.domainsParams.markAsTouched(),n.domainsParams.markAsDirty())}))},t.prototype.clientDomainProviders=function(e){return e.get("clientRegistrations")},t.prototype.clientDomainInfos=function(e){return e.get("domainInfos")},t.prototype.addProvider=function(e){this.clientDomainProviders(e).push(this.buildProviderForm())},t.prototype.deleteProvider=function(e,t,n){var r=this;e&&(e.stopPropagation(),e.preventDefault());var i=this.clientDomainProviders(t).at(n).get("additionalInfo.providerName").value;this.dialogService.confirm(this.translate.instant("admin.oauth2.delete-registration-title",{name:i||""}),this.translate.instant("admin.oauth2.delete-registration-text"),null,this.translate.instant("action.delete")).subscribe((function(e){e&&(r.clientDomainProviders(t).removeAt(n),r.clientDomainProviders(t).markAsTouched(),r.clientDomainProviders(t).markAsDirty())}))},t.prototype.toggleEditMode=function(e,t){e.get(t).disabled?e.get(t).enable():e.get(t).disable()},t.prototype.getProviderName=function(e){return e.get("additionalInfo.providerName").value},t.prototype.isCustomProvider=function(e){return"Custom"===this.getProviderName(e)},t.prototype.getHelpLink=function(e){var t=e.get("additionalInfo.providerName").value;return null===t||"Custom"===t?"":this.templates.get(t).helpLink},t.prototype.addDomainInfo=function(e){this.clientDomainInfos(e).push(this.buildDomainForm({name:"",scheme:ce.b.HTTPS}))},t.prototype.removeDomain=function(e,t,n){e&&(e.stopPropagation(),e.preventDefault()),this.clientDomainInfos(t).removeAt(n),this.clientDomainInfos(t).markAsTouched(),this.clientDomainInfos(t).markAsDirty()},t.prototype.redirectURI=function(e,t){var n=e.value;if(""!==n.name){return(Object(p.n)(t)?t.toLowerCase():n.scheme===ce.b.MIXED?ce.b.HTTPS.toLowerCase():n.scheme.toLowerCase())+"://"+n.name+this.loginProcessingUrl}return""},t.prototype.redirectURIMixed=function(e){return this.redirectURI(e,ce.b.HTTP)},t.prototype.trackByParams=function(e){return e},t.\u0275fac=function(e){return new(e||t)(r["\u0275\u0275directiveInject"](m.Store),r["\u0275\u0275directiveInject"](a.ActivatedRoute),r["\u0275\u0275directiveInject"](fe.a),r["\u0275\u0275directiveInject"](s.FormBuilder),r["\u0275\u0275directiveInject"](U.a),r["\u0275\u0275directiveInject"](f.TranslateService),r["\u0275\u0275directiveInject"](pe.b))},t.\u0275cmp=r["\u0275\u0275defineComponent"]({type:t,selectors:[["tb-oauth2-settings"]],features:[r["\u0275\u0275InheritDefinitionFeature"]],decls:26,vars:21,consts:[[1,"settings-card"],["fxLayout","row"],["translate","",1,"mat-headline"],["fxFlex",""],["tb-help","oauth2Settings"],["color","warn","mode","indeterminate",4,"ngIf"],["style","height: 4px;",4,"ngIf"],[2,"padding-top","16px"],[3,"formGroup","ngSubmit"],[3,"disabled"],["formControlName","enabled"],["style","margin-top: 1em;",4,"ngIf"],["fxLayout","row","fxLayoutAlign","end center","fxLayoutGap","8px"],["type","button","mat-raised-button","","color","primary",3,"disabled","click",4,"ngIf"],["mat-button","","mat-raised-button","","color","primary","type","submit",3,"disabled"],["color","warn","mode","indeterminate"],[2,"height","4px"],[2,"margin-top","1em"],["formArrayName","domainsParams"],[1,"container"],["multi",""],[4,"ngFor","ngForOf","ngForTrackBy"],[3,"formGroupName"],["fxLayoutAlign","start center"],["fxLayoutAlign","end center"],["mat-icon-button","","type","button","matTooltipPosition","above",3,"matTooltip","click"],["matExpansionPanelContent",""],["formArrayName","domainInfos"],["class","domains-list",4,"ngFor","ngForOf","ngForTrackBy"],["fxLayout","row","fxLayoutAlign","end center",2,"margin-bottom","1.25em"],["mat-button","","mat-raised-button","","color","primary","type","button",3,"disabled","click"],["formArrayName","clientRegistrations"],["class","registration-card mat-elevation-z0",4,"ngFor","ngForOf","ngForTrackBy"],[1,"domains-list"],["fxLayout","row","fxLayoutGap","8px",3,"formGroupName"],["fxFlex","","fxLayout","row","fxLayout.xs","column","fxLayoutGap","8px"],["fxLayout","column","fxFlex.sm","60","fxFlex.gt-sm","50"],["fxLayout","row","fxLayout.xs","column","fxLayout.md","column","fxLayoutGap","8px","fxLayoutGap.md","0px"],["fxFlex","30","fxFlex.md","","fxFlex.xs","",1,"mat-block"],["translate",""],["formControlName","scheme"],[3,"value",4,"ngFor","ngForOf"],["fxFlex","",1,"mat-block"],["matInput","","formControlName","name","required",""],[4,"ngIf"],["fxFlex","","fxLayout","column"],["matInput","","readonly","",3,"value"],["mat-icon-button","","color","primary","matSuffix","","type","button","ngxClipboard","","matTooltipPosition","above",3,"cbContent","matTooltip"],["svgIcon","mdi:clipboard-arrow-left",1,"material-icons"],["fxFlex","","class","mat-block",4,"ngIf"],["fxLayout","column","fxLayoutAlign","center start"],["type","button","mat-icon-button","","color","primary","matTooltipPosition","above",3,"disabled","matTooltip","click"],[3,"value"],[1,"registration-card","mat-elevation-z0"],["mat-icon-button","","type","button","matTooltipPosition","above",3,"disabled","matTooltip","click"],["formGroupName","additionalInfo","fxLayout","row"],["formControlName","providerName"],[3,"tb-help",4,"ngIf"],["fxLayout","row","fxLayout.xs","column","fxLayoutGap.gt-xs","8px"],["matInput","","formControlName","clientId","required",""],["matInput","","formControlName","clientSecret","required",""],[1,"mat-elevation-z0","custom-settings",3,"disabled","expanded"],[3,"fxHide"],[3,"tb-help"],["dynamicHeight",""],[3,"label"],["fxLayout","row","fxLayout.xs","column","fxLayoutGap.gt-xs","8px",2,"margin-top","16px"],["matInput","","formControlName","accessTokenUri","required",""],["mat-icon-button","","matSuffix","","type","button",3,"click",4,"ngIf"],["matInput","","formControlName","authorizationUri","required",""],["fxFlex","","appearance","legacy",1,"mat-block"],["matInput","","formControlName","jwkSetUri"],["mat-icon-button","","matSuffix","","type","button","aria-label","Clear",3,"click",4,"ngIf"],["matInput","","formControlName","userInfoUri","required",""],["formControlName","clientAuthenticationMethod"],["fxLayout","row","fxLayout.xs","column","fxLayoutGap.gt-xs","8px",4,"ngIf"],["formGroupName","mapperConfig"],["fxLayout","column","fxLayoutGap","8px",2,"margin-bottom","8px"],["formControlName","allowUserCreation"],["formControlName","activateUser"],["scopeList",""],["removable","",3,"removed",4,"ngFor","ngForOf","ngForTrackBy"],["matChipInputAddOnBlur","",3,"matChipInputFor","matChipInputSeparatorKeyCodes","matChipInputTokenEnd"],[2,"display","block","margin-top","-24px",3,"error"],[1,"mat-block",2,"margin-top","16px"],["matInput","","formControlName","userNameAttributeName","required",""],["formControlName","type"],["formGroupName","basic",4,"ngIf"],["formGroupName","custom",4,"ngIf"],["mat-icon-button","","matSuffix","","type","button",3,"click"],[1,"material-icons"],["mat-icon-button","","matSuffix","","type","button","aria-label","Clear",3,"click"],["fxFlex","","floatLabel","always",1,"mat-block"],["matInput","","formControlName","loginButtonLabel","required","",3,"placeholder"],["matInput","","formControlName","loginButtonIcon"],["removable","",3,"removed"],["matChipRemove",""],["formGroupName","basic"],["class","mat-block",4,"ngIf"],["matInput","","formControlName","firstNameAttributeKey"],["matInput","","formControlName","lastNameAttributeKey"],["formControlName","tenantNameStrategy"],["fxFlex","",1,"mat-block",3,"fxShow"],["matInput","","formControlName","tenantNamePattern",3,"required"],["matInput","","formControlName","customerNamePattern"],["matInput","","formControlName","defaultDashboardName"],["fxFlex","","formControlName","alwaysFullScreen",1,"checkbox-row"],[1,"mat-block"],["matInput","","formControlName","emailAttributeKey","required",""],["formGroupName","custom"],["matInput","","formControlName","url","required",""],["matInput","","formControlName","username","autocomplete","new-username"],["matInput","","type","password","formControlName","password","autocomplete","new-password"],["type","button","mat-raised-button","","color","primary",3,"disabled","click"]],template:function(e,t){1&e&&(r["\u0275\u0275elementStart"](0,"div"),r["\u0275\u0275elementStart"](1,"mat-card",0),r["\u0275\u0275elementStart"](2,"mat-card-title"),r["\u0275\u0275elementStart"](3,"div",1),r["\u0275\u0275elementStart"](4,"span",2),r["\u0275\u0275text"](5,"admin.oauth2.oauth2"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275element"](6,"span",3),r["\u0275\u0275element"](7,"div",4),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275template"](8,Ce,1,0,"mat-progress-bar",5),r["\u0275\u0275pipe"](9,"async"),r["\u0275\u0275template"](10,Ie,1,0,"div",6),r["\u0275\u0275pipe"](11,"async"),r["\u0275\u0275elementStart"](12,"mat-card-content",7),r["\u0275\u0275elementStart"](13,"form",8),r["\u0275\u0275listener"]("ngSubmit",(function(){return t.save()})),r["\u0275\u0275elementStart"](14,"fieldset",9),r["\u0275\u0275pipe"](15,"async"),r["\u0275\u0275elementStart"](16,"mat-checkbox",10),r["\u0275\u0275text"](17),r["\u0275\u0275pipe"](18,"translate"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275template"](19,ut,5,2,"section",11),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](20,"div",12),r["\u0275\u0275template"](21,pt,6,3,"button",13),r["\u0275\u0275elementStart"](22,"button",14),r["\u0275\u0275pipe"](23,"async"),r["\u0275\u0275text"](24),r["\u0275\u0275pipe"](25,"translate"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()),2&e&&(r["\u0275\u0275advance"](8),r["\u0275\u0275property"]("ngIf",r["\u0275\u0275pipeBind1"](9,9,t.isLoading$)),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("ngIf",!r["\u0275\u0275pipeBind1"](11,11,t.isLoading$)),r["\u0275\u0275advance"](3),r["\u0275\u0275property"]("formGroup",t.oauth2SettingsForm),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("disabled",r["\u0275\u0275pipeBind1"](15,13,t.isLoading$)),r["\u0275\u0275advance"](3),r["\u0275\u0275textInterpolate1"](" ",r["\u0275\u0275pipeBind1"](18,15,"admin.oauth2.enable")," "),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("ngIf",t.oauth2SettingsForm.get("enabled").value),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("ngIf",t.oauth2SettingsForm.get("enabled").value),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("disabled",r["\u0275\u0275pipeBind1"](23,17,t.isLoading$)||t.oauth2SettingsForm.invalid||!t.oauth2SettingsForm.dirty),r["\u0275\u0275advance"](2),r["\u0275\u0275textInterpolate1"](" ",r["\u0275\u0275pipeBind1"](25,19,"action.save")," "))},directives:[g.MatCard,g.MatCardTitle,h.f,f.TranslateDirective,h.b,b.a,i.NgIf,g.MatCardContent,s["\u0275angular_packages_forms_forms_y"],s.NgControlStatusGroup,s.FormGroupDirective,ge.MatCheckbox,s.NgControlStatus,s.FormControlName,h.e,h.g,w.MatButton,C.MatProgressBar,s.FormArrayName,Y.MatAccordion,i.NgForOf,Y.MatExpansionPanel,s.FormGroupName,Y.MatExpansionPanelHeader,Y.MatExpansionPanelTitle,Y.MatExpansionPanelDescription,he.MatTooltip,be.MatIcon,Y.MatExpansionPanelContent,y.MatFormField,y.MatLabel,x.MatSelect,v.MatInput,s.DefaultValueAccessor,s.RequiredValidator,y.MatSuffix,ye.a,I.MatOption,y.MatError,ve.d,xe.MatTabGroup,xe.MatTab,Se.MatChipList,Se.MatChipInput,we.a,Se.MatChip,Se.MatChipRemove],pipes:[i.AsyncPipe,f.TranslatePipe,i.UpperCasePipe],styles:["[_nghost-%COMP%]   .checkbox-row[_ngcontent-%COMP%]{margin-top:1em}[_nghost-%COMP%]   .registration-card[_ngcontent-%COMP%]{margin-bottom:.5em;border:1px solid rgba(0,0,0,.2)}[_nghost-%COMP%]   .registration-card[_ngcontent-%COMP%]   .custom-settings[_ngcontent-%COMP%]{font-size:16px}[_nghost-%COMP%]   .registration-card[_ngcontent-%COMP%]   .custom-settings[_ngcontent-%COMP%]   .mat-expansion-panel-header[_ngcontent-%COMP%]{padding:0 2px}[_nghost-%COMP%]   .container[_ngcontent-%COMP%]{margin-bottom:1em}[_nghost-%COMP%]   .container[_ngcontent-%COMP%]   .tb-highlight[_ngcontent-%COMP%]{margin:0}[_nghost-%COMP%]   .container[_ngcontent-%COMP%]   .tb-hint[_ngcontent-%COMP%]{padding-bottom:0}[_nghost-%COMP%]   .mat-expansion-panel[_ngcontent-%COMP%]   .mat-expansion-panel-header.mat-expanded[_ngcontent-%COMP%]{height:48px}[_nghost-%COMP%]     .registration-card .custom-settings .mat-expansion-panel-body{padding:0 2px 1em}[_nghost-%COMP%]     .registration-card .custom-settings .mat-form-field-suffix .mat-icon-button .mat-icon{font-size:18px}[_nghost-%COMP%]     .domains-list{margin-bottom:1.5em}[_nghost-%COMP%]     .domains-list .mat-form-field-suffix .mat-icon-button .mat-icon{font-size:24px}","[_nghost-%COMP%]   mat-card.settings-card[_ngcontent-%COMP%]{margin:8px}@media screen and (min-width:960px) and (max-width:1279px){[_nghost-%COMP%]   mat-card.settings-card[_ngcontent-%COMP%]{width:80%}}@media screen and (min-width:1280px){[_nghost-%COMP%]   mat-card.settings-card[_ngcontent-%COMP%]{width:60%}}"]}),t}(l.a);!function(){r["\u0275setClassMetadata"](mt,[{type:r.Component,args:[{selector:"tb-oauth2-settings",templateUrl:"./oauth2-settings.component.html",styleUrls:["./oauth2-settings.component.scss","./settings-card.scss"]}]}],(function(){return[{type:m.Store},{type:a.ActivatedRoute},{type:fe.a},{type:s.FormBuilder},{type:U.a},{type:f.TranslateService},{type:Window,decorators:[{type:r.Inject,args:[pe.b]}]}]}),null)}();var ft=n("0IaG"),gt=n("gmuX"),ht=n("/t3+"),bt=n("rezs");function yt(e,t){1&e&&r["\u0275\u0275element"](0,"mat-progress-bar",18)}function vt(e,t){1&e&&r["\u0275\u0275element"](0,"div",19)}function xt(e,t){1&e&&(r["\u0275\u0275elementStart"](0,"mat-error"),r["\u0275\u0275text"](1),r["\u0275\u0275pipe"](2,"translate"),r["\u0275\u0275elementEnd"]()),2&e&&(r["\u0275\u0275advance"](1),r["\u0275\u0275textInterpolate1"](" ",r["\u0275\u0275pipeBind1"](2,1,"admin.number-to-required")," "))}function St(e,t){1&e&&(r["\u0275\u0275elementStart"](0,"mat-error"),r["\u0275\u0275text"](1),r["\u0275\u0275pipe"](2,"translate"),r["\u0275\u0275elementEnd"]()),2&e&&(r["\u0275\u0275advance"](1),r["\u0275\u0275textInterpolate1"](" ",r["\u0275\u0275pipeBind1"](2,1,"admin.phone-number-pattern")," "))}function wt(e,t){1&e&&(r["\u0275\u0275elementStart"](0,"mat-error"),r["\u0275\u0275text"](1),r["\u0275\u0275pipe"](2,"translate"),r["\u0275\u0275elementEnd"]()),2&e&&(r["\u0275\u0275advance"](1),r["\u0275\u0275textInterpolate1"](" ",r["\u0275\u0275pipeBind1"](2,1,"admin.sms-message-required")," "))}function Ct(e,t){1&e&&(r["\u0275\u0275elementStart"](0,"mat-error"),r["\u0275\u0275text"](1),r["\u0275\u0275pipe"](2,"translate"),r["\u0275\u0275elementEnd"]()),2&e&&(r["\u0275\u0275advance"](1),r["\u0275\u0275textInterpolate1"](" ",r["\u0275\u0275pipeBind1"](2,1,"admin.sms-message-max-length")," "))}var It=function(e){function t(t,n,r,i,a,o,l){var s=e.call(this,t,n,o)||this;return s.store=t,s.router=n,s.data=r,s.adminService=i,s.translate=a,s.dialogRef=o,s.fb=l,s.phoneNumberPattern=d.c,s.smsProviderConfiguration=s.data.smsProviderConfiguration,s}return Object(o.d)(t,e),t.prototype.ngOnInit=function(){this.sendTestSmsFormGroup=this.fb.group({numberTo:[null,[s.Validators.required,s.Validators.pattern(d.c)]],message:[null,[s.Validators.required,s.Validators.maxLength(1600)]]})},t.prototype.close=function(){this.dialogRef.close()},t.prototype.sendTestSms=function(){var e=this,t={providerConfiguration:this.smsProviderConfiguration,numberTo:this.sendTestSmsFormGroup.value.numberTo,message:this.sendTestSmsFormGroup.value.message};this.adminService.sendTestSms(t).subscribe((function(){e.store.dispatch(new u.b({message:e.translate.instant("admin.test-sms-sent"),target:"sendTestSmsDialogContent",verticalPosition:"bottom",horizontalPosition:"left",type:"success"}))}))},t.\u0275fac=function(e){return new(e||t)(r["\u0275\u0275directiveInject"](m.Store),r["\u0275\u0275directiveInject"](a.Router),r["\u0275\u0275directiveInject"](ft.MAT_DIALOG_DATA),r["\u0275\u0275directiveInject"](c.a),r["\u0275\u0275directiveInject"](f.TranslateService),r["\u0275\u0275directiveInject"](ft.MatDialogRef),r["\u0275\u0275directiveInject"](s.FormBuilder))},t.\u0275cmp=r["\u0275\u0275defineComponent"]({type:t,selectors:[["tb-send-test-sms-dialog"]],features:[r["\u0275\u0275InheritDefinitionFeature"]],decls:38,vars:31,consts:[[2,"min-width","500px","position","relative",3,"formGroup"],["color","primary"],["translate",""],["fxFlex",""],["mat-icon-button","","type","button",3,"click"],[1,"material-icons"],["color","warn","mode","indeterminate",4,"ngIf"],["style","height: 4px;",4,"ngIf"],["mat-dialog-content","","tb-toast","","toastTarget","sendTestSmsDialogContent"],[3,"disabled"],[1,"mat-block"],["type","tel","required","","matInput","","formControlName","numberTo",3,"pattern"],[4,"ngIf"],[3,"innerHTML"],["required","","matInput","","rows","3","formControlName","message",3,"maxLength"],["mat-dialog-actions","","fxLayoutAlign","end center"],["mat-button","","color","primary","type","button","cdkFocusInitial","",3,"disabled","click"],["mat-raised-button","","color","primary","type","button",3,"disabled","click"],["color","warn","mode","indeterminate"],[2,"height","4px"]],template:function(e,t){1&e&&(r["\u0275\u0275elementStart"](0,"form",0),r["\u0275\u0275elementStart"](1,"mat-toolbar",1),r["\u0275\u0275elementStart"](2,"h2",2),r["\u0275\u0275text"](3,"admin.send-test-sms"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275element"](4,"span",3),r["\u0275\u0275elementStart"](5,"button",4),r["\u0275\u0275listener"]("click",(function(){return t.close()})),r["\u0275\u0275elementStart"](6,"mat-icon",5),r["\u0275\u0275text"](7,"close"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275template"](8,yt,1,0,"mat-progress-bar",6),r["\u0275\u0275pipe"](9,"async"),r["\u0275\u0275template"](10,vt,1,0,"div",7),r["\u0275\u0275pipe"](11,"async"),r["\u0275\u0275elementStart"](12,"div",8),r["\u0275\u0275elementStart"](13,"fieldset",9),r["\u0275\u0275pipe"](14,"async"),r["\u0275\u0275elementStart"](15,"mat-form-field",10),r["\u0275\u0275elementStart"](16,"mat-label",2),r["\u0275\u0275text"](17,"admin.number-to"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275element"](18,"input",11),r["\u0275\u0275template"](19,xt,3,3,"mat-error",12),r["\u0275\u0275template"](20,St,3,3,"mat-error",12),r["\u0275\u0275element"](21,"mat-hint",13),r["\u0275\u0275pipe"](22,"translate"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](23,"mat-form-field",10),r["\u0275\u0275elementStart"](24,"mat-label",2),r["\u0275\u0275text"](25,"admin.sms-message"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275element"](26,"textarea",14),r["\u0275\u0275template"](27,wt,3,3,"mat-error",12),r["\u0275\u0275template"](28,Ct,3,3,"mat-error",12),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](29,"div",15),r["\u0275\u0275elementStart"](30,"button",16),r["\u0275\u0275listener"]("click",(function(){return t.close()})),r["\u0275\u0275pipe"](31,"async"),r["\u0275\u0275text"](32),r["\u0275\u0275pipe"](33,"translate"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](34,"button",17),r["\u0275\u0275listener"]("click",(function(){return t.sendTestSms()})),r["\u0275\u0275pipe"](35,"async"),r["\u0275\u0275text"](36),r["\u0275\u0275pipe"](37,"translate"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()),2&e&&(r["\u0275\u0275property"]("formGroup",t.sendTestSmsFormGroup),r["\u0275\u0275advance"](8),r["\u0275\u0275property"]("ngIf",r["\u0275\u0275pipeBind1"](9,15,t.isLoading$)),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("ngIf",!r["\u0275\u0275pipeBind1"](11,17,t.isLoading$)),r["\u0275\u0275advance"](3),r["\u0275\u0275property"]("disabled",r["\u0275\u0275pipeBind1"](14,19,t.isLoading$)),r["\u0275\u0275advance"](5),r["\u0275\u0275property"]("pattern",t.phoneNumberPattern),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",t.sendTestSmsFormGroup.get("numberTo").hasError("required")),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",t.sendTestSmsFormGroup.get("numberTo").hasError("pattern")),r["\u0275\u0275advance"](1),r["\u0275\u0275propertyInterpolate"]("innerHTML",r["\u0275\u0275pipeBind1"](22,21,"admin.phone-number-hint"),r["\u0275\u0275sanitizeHtml"]),r["\u0275\u0275advance"](5),r["\u0275\u0275property"]("maxLength",1600),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",t.sendTestSmsFormGroup.get("message").hasError("required")),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",t.sendTestSmsFormGroup.get("message").hasError("maxLength")),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("disabled",r["\u0275\u0275pipeBind1"](31,23,t.isLoading$)),r["\u0275\u0275advance"](2),r["\u0275\u0275textInterpolate1"](" ",r["\u0275\u0275pipeBind1"](33,25,"action.close")," "),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("disabled",r["\u0275\u0275pipeBind1"](35,27,t.isLoading$)||t.sendTestSmsFormGroup.invalid),r["\u0275\u0275advance"](2),r["\u0275\u0275textInterpolate1"](" ",r["\u0275\u0275pipeBind1"](37,29,"admin.send-test-sms")," "))},directives:[s["\u0275angular_packages_forms_forms_y"],s.NgControlStatusGroup,s.FormGroupDirective,ht.MatToolbar,f.TranslateDirective,h.b,w.MatButton,be.MatIcon,i.NgIf,ft.MatDialogContent,bt.b,y.MatFormField,y.MatLabel,v.MatInput,s.DefaultValueAccessor,s.RequiredValidator,s.NgControlStatus,s.FormControlName,s.PatternValidator,y.MatHint,ft.MatDialogActions,h.e,C.MatProgressBar,y.MatError],pipes:[i.AsyncPipe,f.TranslatePipe],encapsulation:2}),t}(gt.a);!function(){r["\u0275setClassMetadata"](It,[{type:r.Component,args:[{selector:"tb-send-test-sms-dialog",templateUrl:"./send-test-sms-dialog.component.html",styleUrls:[]}]}],(function(){return[{type:m.Store},{type:a.Router},{type:void 0,decorators:[{type:r.Inject,args:[ft.MAT_DIALOG_DATA]}]},{type:c.a},{type:f.TranslateService},{type:ft.MatDialogRef},{type:s.FormBuilder}]}),null)}();var Et=n("PWf0");function Tt(e,t){1&e&&r["\u0275\u0275element"](0,"mat-progress-bar",14)}function Mt(e,t){1&e&&r["\u0275\u0275element"](0,"div",15)}var Ft=function(e){function t(t,n,r,i,a){var o=e.call(this,t)||this;return o.store=t,o.router=n,o.adminService=r,o.dialog=i,o.fb=a,o}return Object(o.d)(t,e),t.prototype.ngOnInit=function(){var e=this;this.buildSmsProviderForm(),this.adminService.getAdminSettings("sms",{ignoreErrors:!0}).subscribe((function(t){e.adminSettings=t,e.smsProvider.reset({configuration:e.adminSettings.jsonValue})}),(function(){e.adminSettings={key:"sms",jsonValue:null},e.smsProvider.reset({configuration:e.adminSettings.jsonValue})}))},t.prototype.buildSmsProviderForm=function(){this.smsProvider=this.fb.group({configuration:[null,[s.Validators.required]]}),this.registerDisableOnLoadFormControl(this.smsProvider.get("configuration"))},t.prototype.sendTestSms=function(){this.dialog.open(It,{disableClose:!0,panelClass:["tb-dialog","tb-fullscreen-dialog"],data:{smsProviderConfiguration:this.smsProvider.value.configuration}})},t.prototype.save=function(){var e=this;this.adminSettings.jsonValue=this.smsProvider.value.configuration,this.adminService.saveAdminSettings(this.adminSettings).subscribe((function(t){e.adminSettings=t,e.smsProvider.reset({configuration:e.adminSettings.jsonValue})}))},t.prototype.confirmForm=function(){return this.smsProvider},t.\u0275fac=function(e){return new(e||t)(r["\u0275\u0275directiveInject"](m.Store),r["\u0275\u0275directiveInject"](a.Router),r["\u0275\u0275directiveInject"](c.a),r["\u0275\u0275directiveInject"](ft.MatDialog),r["\u0275\u0275directiveInject"](s.FormBuilder))},t.\u0275cmp=r["\u0275\u0275defineComponent"]({type:t,selectors:[["tb-sms-provider"]],features:[r["\u0275\u0275InheritDefinitionFeature"]],decls:26,vars:22,consts:[[1,"settings-card"],["fxLayout","row"],["translate","",1,"mat-headline"],["fxFlex",""],["tb-help","smsProviderSettings"],["color","warn","mode","indeterminate",4,"ngIf"],["style","height: 4px;",4,"ngIf"],[2,"padding-top","16px"],[3,"formGroup","ngSubmit"],[3,"disabled"],["required","","formControlName","configuration"],["fxLayout","row","fxLayoutAlign","end center","fxLayout.xs","column","fxLayoutAlign.xs","end","fxLayoutGap","16px"],["mat-raised-button","","type","button",3,"disabled","click"],["mat-raised-button","","color","primary","type","submit",3,"disabled"],["color","warn","mode","indeterminate"],[2,"height","4px"]],template:function(e,t){1&e&&(r["\u0275\u0275elementStart"](0,"div"),r["\u0275\u0275elementStart"](1,"mat-card",0),r["\u0275\u0275elementStart"](2,"mat-card-title"),r["\u0275\u0275elementStart"](3,"div",1),r["\u0275\u0275elementStart"](4,"span",2),r["\u0275\u0275text"](5,"admin.sms-provider-settings"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275element"](6,"span",3),r["\u0275\u0275element"](7,"div",4),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275template"](8,Tt,1,0,"mat-progress-bar",5),r["\u0275\u0275pipe"](9,"async"),r["\u0275\u0275template"](10,Mt,1,0,"div",6),r["\u0275\u0275pipe"](11,"async"),r["\u0275\u0275elementStart"](12,"mat-card-content",7),r["\u0275\u0275elementStart"](13,"form",8),r["\u0275\u0275listener"]("ngSubmit",(function(){return t.save()})),r["\u0275\u0275elementStart"](14,"fieldset",9),r["\u0275\u0275pipe"](15,"async"),r["\u0275\u0275element"](16,"tb-sms-provider-configuration",10),r["\u0275\u0275elementStart"](17,"div",11),r["\u0275\u0275elementStart"](18,"button",12),r["\u0275\u0275listener"]("click",(function(){return t.sendTestSms()})),r["\u0275\u0275pipe"](19,"async"),r["\u0275\u0275text"](20),r["\u0275\u0275pipe"](21,"translate"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](22,"button",13),r["\u0275\u0275pipe"](23,"async"),r["\u0275\u0275text"](24),r["\u0275\u0275pipe"](25,"translate"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()),2&e&&(r["\u0275\u0275advance"](8),r["\u0275\u0275property"]("ngIf",r["\u0275\u0275pipeBind1"](9,8,t.isLoading$)),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("ngIf",!r["\u0275\u0275pipeBind1"](11,10,t.isLoading$)),r["\u0275\u0275advance"](3),r["\u0275\u0275property"]("formGroup",t.smsProvider),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("disabled",r["\u0275\u0275pipeBind1"](15,12,t.isLoading$)),r["\u0275\u0275advance"](4),r["\u0275\u0275property"]("disabled",r["\u0275\u0275pipeBind1"](19,14,t.isLoading$)||t.smsProvider.invalid),r["\u0275\u0275advance"](2),r["\u0275\u0275textInterpolate1"](" ",r["\u0275\u0275pipeBind1"](21,16,"admin.send-test-sms")," "),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("disabled",r["\u0275\u0275pipeBind1"](23,18,t.isLoading$)||t.smsProvider.invalid||!t.smsProvider.dirty),r["\u0275\u0275advance"](2),r["\u0275\u0275textInterpolate1"]("",r["\u0275\u0275pipeBind1"](25,20,"action.save")," "))},directives:[g.MatCard,g.MatCardTitle,h.f,f.TranslateDirective,h.b,b.a,i.NgIf,g.MatCardContent,s["\u0275angular_packages_forms_forms_y"],s.NgControlStatusGroup,s.FormGroupDirective,Et.a,s.RequiredValidator,s.NgControlStatus,s.FormControlName,h.e,h.g,w.MatButton,C.MatProgressBar],pipes:[i.AsyncPipe,f.TranslatePipe],styles:["","[_nghost-%COMP%]   mat-card.settings-card[_ngcontent-%COMP%]{margin:8px}@media screen and (min-width:960px) and (max-width:1279px){[_nghost-%COMP%]   mat-card.settings-card[_ngcontent-%COMP%]{width:80%}}@media screen and (min-width:1280px){[_nghost-%COMP%]   mat-card.settings-card[_ngcontent-%COMP%]{width:60%}}"]}),t}(l.a);!function(){r["\u0275setClassMetadata"](Ft,[{type:r.Component,args:[{selector:"tb-sms-provider",templateUrl:"./sms-provider.component.html",styleUrls:["./sms-provider.component.scss","./settings-card.scss"]}]}],(function(){return[{type:m.Store},{type:a.Router},{type:c.a},{type:ft.MatDialog},{type:s.FormBuilder}]}),null)}();var Dt=n("YnEf"),At=n("YjEJ"),Pt=n("XMqU");function Nt(e,t){1&e&&r["\u0275\u0275element"](0,"mat-progress-bar",14)}function kt(e,t){1&e&&r["\u0275\u0275element"](0,"div",15)}var Lt=function(e){function t(t,n,r,i){var a=e.call(this,t)||this;return a.store=t,a.router=n,a.dashboardService=r,a.fb=i,a}return Object(o.d)(t,e),t.prototype.ngOnInit=function(){var e=this;this.homeSettings=this.fb.group({dashboardId:[null],hideDashboardToolbar:[!0]}),this.dashboardService.getTenantHomeDashboardInfo().subscribe((function(t){e.setHomeDashboardInfo(t)}))},t.prototype.save=function(){var e=this,t=this.homeSettings.get("dashboardId").value,n={dashboardId:t?new At.a(t):null,hideDashboardToolbar:this.homeSettings.get("hideDashboardToolbar").value};this.dashboardService.setTenantHomeDashboardInfo(n).subscribe((function(){e.setHomeDashboardInfo(n)}))},t.prototype.confirmForm=function(){return this.homeSettings},t.prototype.setHomeDashboardInfo=function(e){var t;this.homeSettings.reset({dashboardId:null===(t=null==e?void 0:e.dashboardId)||void 0===t?void 0:t.id,hideDashboardToolbar:!Object(p.o)(null==e?void 0:e.hideDashboardToolbar)||(null==e?void 0:e.hideDashboardToolbar)})},t.\u0275fac=function(e){return new(e||t)(r["\u0275\u0275directiveInject"](m.Store),r["\u0275\u0275directiveInject"](a.Router),r["\u0275\u0275directiveInject"](Dt.a),r["\u0275\u0275directiveInject"](s.FormBuilder))},t.\u0275cmp=r["\u0275\u0275defineComponent"]({type:t,selectors:[["tb-home-settings"]],features:[r["\u0275\u0275InheritDefinitionFeature"]],decls:26,vars:24,consts:[[1,"settings-card"],["fxLayout","row"],["translate","",1,"mat-headline"],["color","warn","mode","indeterminate",4,"ngIf"],["style","height: 4px;",4,"ngIf"],[2,"padding-top","16px"],[3,"formGroup","ngSubmit"],[3,"disabled"],["fxFlex","","fxLayout","column",1,"tb-default-dashboard"],["fxFlex","","fxLayout","column","fxLayout.gt-sm","row"],["fxFlex","","formControlName","dashboardId",3,"placeholder","dashboardsScope","selectFirstDashboard"],["fxFlex","","formControlName","hideDashboardToolbar"],["fxLayout","row","fxLayoutAlign","end center",1,"layout-wrap",2,"width","100%"],["mat-button","","mat-raised-button","","color","primary","type","submit",3,"disabled"],["color","warn","mode","indeterminate"],[2,"height","4px"]],template:function(e,t){1&e&&(r["\u0275\u0275elementStart"](0,"div"),r["\u0275\u0275elementStart"](1,"mat-card",0),r["\u0275\u0275elementStart"](2,"mat-card-title"),r["\u0275\u0275elementStart"](3,"div",1),r["\u0275\u0275elementStart"](4,"span",2),r["\u0275\u0275text"](5,"admin.home-settings"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275template"](6,Nt,1,0,"mat-progress-bar",3),r["\u0275\u0275pipe"](7,"async"),r["\u0275\u0275template"](8,kt,1,0,"div",4),r["\u0275\u0275pipe"](9,"async"),r["\u0275\u0275elementStart"](10,"mat-card-content",5),r["\u0275\u0275elementStart"](11,"form",6),r["\u0275\u0275listener"]("ngSubmit",(function(){return t.save()})),r["\u0275\u0275elementStart"](12,"fieldset",7),r["\u0275\u0275pipe"](13,"async"),r["\u0275\u0275elementStart"](14,"section",8),r["\u0275\u0275elementStart"](15,"section",9),r["\u0275\u0275element"](16,"tb-dashboard-autocomplete",10),r["\u0275\u0275pipe"](17,"translate"),r["\u0275\u0275elementStart"](18,"mat-checkbox",11),r["\u0275\u0275text"](19),r["\u0275\u0275pipe"](20,"translate"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](21,"div",12),r["\u0275\u0275elementStart"](22,"button",13),r["\u0275\u0275pipe"](23,"async"),r["\u0275\u0275text"](24),r["\u0275\u0275pipe"](25,"translate"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()),2&e&&(r["\u0275\u0275advance"](6),r["\u0275\u0275property"]("ngIf",r["\u0275\u0275pipeBind1"](7,10,t.isLoading$)),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("ngIf",!r["\u0275\u0275pipeBind1"](9,12,t.isLoading$)),r["\u0275\u0275advance"](3),r["\u0275\u0275property"]("formGroup",t.homeSettings),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("disabled",r["\u0275\u0275pipeBind1"](13,14,t.isLoading$)),r["\u0275\u0275advance"](4),r["\u0275\u0275propertyInterpolate"]("placeholder",r["\u0275\u0275pipeBind1"](17,16,"dashboard.home-dashboard")),r["\u0275\u0275property"]("dashboardsScope","tenant")("selectFirstDashboard",!1),r["\u0275\u0275advance"](3),r["\u0275\u0275textInterpolate1"](" ",r["\u0275\u0275pipeBind1"](20,18,"dashboard.home-dashboard-hide-toolbar")," "),r["\u0275\u0275advance"](3),r["\u0275\u0275property"]("disabled",r["\u0275\u0275pipeBind1"](23,20,t.isLoading$)||t.homeSettings.invalid||!t.homeSettings.dirty),r["\u0275\u0275advance"](2),r["\u0275\u0275textInterpolate1"]("",r["\u0275\u0275pipeBind1"](25,22,"action.save")," "))},directives:[g.MatCard,g.MatCardTitle,h.f,f.TranslateDirective,i.NgIf,g.MatCardContent,s["\u0275angular_packages_forms_forms_y"],s.NgControlStatusGroup,s.FormGroupDirective,h.b,Pt.a,s.NgControlStatus,s.FormControlName,ge.MatCheckbox,h.e,w.MatButton,C.MatProgressBar],pipes:[i.AsyncPipe,f.TranslatePipe],styles:["@media screen and (min-width:960px){[_nghost-%COMP%]   .tb-default-dashboard[_ngcontent-%COMP%]   tb-dashboard-autocomplete[_ngcontent-%COMP%]{padding-right:12px}}@media screen and (max-width:959px){[_nghost-%COMP%]   .tb-default-dashboard[_ngcontent-%COMP%]   tb-dashboard-autocomplete[_ngcontent-%COMP%]{padding-bottom:12px}}@media screen and (min-width:960px){[_nghost-%COMP%]   .tb-default-dashboard[_ngcontent-%COMP%]   mat-checkbox[_ngcontent-%COMP%]{margin-top:16px}}","[_nghost-%COMP%]   mat-card.settings-card[_ngcontent-%COMP%]{margin:8px}@media screen and (min-width:960px) and (max-width:1279px){[_nghost-%COMP%]   mat-card.settings-card[_ngcontent-%COMP%]{width:80%}}@media screen and (min-width:1280px){[_nghost-%COMP%]   mat-card.settings-card[_ngcontent-%COMP%]{width:60%}}"]}),t}(l.a);!function(){r["\u0275setClassMetadata"](Lt,[{type:r.Component,args:[{selector:"tb-home-settings",templateUrl:"./home-settings.component.html",styleUrls:["./home-settings.component.scss","./settings-card.scss"]}]}],(function(){return[{type:m.Store},{type:a.Router},{type:Dt.a},{type:s.FormBuilder}]}),null)}();var Ot=function(){function e(e){this.oauth2Service=e}return e.prototype.resolve=function(){return this.oauth2Service.getLoginProcessingUrl()},e.\u0275fac=function(t){return new(t||e)(r["\u0275\u0275inject"](fe.a))},e.\u0275prov=r["\u0275\u0275defineInjectable"]({token:e,factory:e.\u0275fac}),e}();!function(){r["\u0275setClassMetadata"](Ot,[{type:r.Injectable}],(function(){return[{type:fe.a}]}),null)}();var _t=[{path:"settings",data:{auth:[$.a.SYS_ADMIN,$.a.TENANT_ADMIN],breadcrumb:{label:"admin.system-settings",icon:"settings"}},children:[{path:"",data:{auth:[$.a.SYS_ADMIN,$.a.TENANT_ADMIN],redirectTo:{SYS_ADMIN:"/settings/general",TENANT_ADMIN:"/settings/home"}}},{path:"general",component:J,canDeactivate:[q],data:{auth:[$.a.SYS_ADMIN],title:"admin.general-settings",breadcrumb:{label:"admin.general",icon:"settings_applications"}}},{path:"outgoing-mail",component:V,canDeactivate:[q],data:{auth:[$.a.SYS_ADMIN],title:"admin.outgoing-mail-settings",breadcrumb:{label:"admin.outgoing-mail",icon:"mail"}}},{path:"sms-provider",component:Ft,canDeactivate:[q],data:{auth:[$.a.SYS_ADMIN],title:"admin.sms-provider-settings",breadcrumb:{label:"admin.sms-provider",icon:"sms"}}},{path:"security-settings",component:de,canDeactivate:[q],data:{auth:[$.a.SYS_ADMIN],title:"admin.security-settings",breadcrumb:{label:"admin.security-settings",icon:"security"}}},{path:"oauth2",component:mt,canDeactivate:[q],data:{auth:[$.a.SYS_ADMIN],title:"admin.oauth2.oauth2",breadcrumb:{label:"admin.oauth2.oauth2",icon:"security"}},resolve:{loginProcessingUrl:Ot}},{path:"home",component:Lt,canDeactivate:[q],data:{auth:[$.a.TENANT_ADMIN],title:"admin.home-settings",breadcrumb:{label:"admin.home-settings",icon:"settings_applications"}}}]}],Bt=function(){function e(){}return e.\u0275mod=r["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=r["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},providers:[Ot],imports:[[a.RouterModule.forChild(_t)],a.RouterModule]}),e}();void(("undefined"==typeof ngJitMode||ngJitMode)&&r["\u0275\u0275setNgModuleScope"](Bt,{imports:[a.RouterModule],exports:[a.RouterModule]}));var jt=n("PCNd"),Rt=n("G4cQ"),Vt=function(){function e(){}return e.\u0275mod=r["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=r["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[i.CommonModule,jt.a,Rt.a,Bt]]}),e}();void(("undefined"==typeof ngJitMode||ngJitMode)&&r["\u0275\u0275setNgModuleScope"](Vt,{declarations:[J,V,Ft,It,de,mt,Lt],imports:[i.CommonModule,jt.a,Rt.a,Bt]}));var zt=n("/crD"),Gt=n("he9t"),Ut=n("0MNC"),qt=n("Xbih"),$t=n("zkoq");function Wt(e,t){if(1&e&&r["\u0275\u0275element"](0,"tb-dashboard-page",2),2&e){var n=r["\u0275\u0275nextContext"]();r["\u0275\u0275property"]("embedded",!0)("dashboard",n.homeDashboard)("hideToolbar",n.homeDashboard.hideDashboardToolbar)}}function Ht(e,t){if(1&e&&(r["\u0275\u0275elementStart"](0,"mat-icon",14),r["\u0275\u0275text"](1),r["\u0275\u0275elementEnd"]()),2&e){var n=r["\u0275\u0275nextContext"]().$implicit;r["\u0275\u0275advance"](1),r["\u0275\u0275textInterpolate"](n.icon)}}function Kt(e,t){if(1&e&&r["\u0275\u0275element"](0,"mat-icon",15),2&e){var n=r["\u0275\u0275nextContext"]().$implicit;r["\u0275\u0275property"]("svgIcon",n.icon)}}function Jt(e,t){if(1&e&&(r["\u0275\u0275elementStart"](0,"mat-grid-tile"),r["\u0275\u0275elementStart"](1,"a",10),r["\u0275\u0275template"](2,Ht,2,1,"mat-icon",11),r["\u0275\u0275template"](3,Kt,1,1,"mat-icon",12),r["\u0275\u0275elementStart"](4,"span",13),r["\u0275\u0275text"](5),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;r["\u0275\u0275advance"](1),r["\u0275\u0275propertyInterpolate"]("routerLink",n.path),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",!n.isMdiIcon),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",n.isMdiIcon),r["\u0275\u0275advance"](2),r["\u0275\u0275textInterpolate"](n.name)}}function Yt(e,t){if(1&e&&(r["\u0275\u0275elementStart"](0,"mat-grid-tile",5),r["\u0275\u0275elementStart"](1,"mat-card",6),r["\u0275\u0275elementStart"](2,"mat-card-title"),r["\u0275\u0275elementStart"](3,"span",7),r["\u0275\u0275text"](4),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](5,"mat-card-content"),r["\u0275\u0275elementStart"](6,"mat-grid-list",8),r["\u0275\u0275template"](7,Jt,6,4,"mat-grid-tile",9),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit,i=r["\u0275\u0275nextContext"](2);r["\u0275\u0275property"]("colspan",i.sectionColspan(n)),r["\u0275\u0275advance"](4),r["\u0275\u0275textInterpolate"](n.name),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("cols",n.places.length),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngForOf",n.places)}}function Xt(e,t){if(1&e&&(r["\u0275\u0275elementStart"](0,"mat-grid-list",3),r["\u0275\u0275template"](1,Yt,8,4,"mat-grid-tile",4),r["\u0275\u0275pipe"](2,"async"),r["\u0275\u0275elementEnd"]()),2&e){var n=r["\u0275\u0275nextContext"]();r["\u0275\u0275property"]("cols",n.cols),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngForOf",r["\u0275\u0275pipeBind1"](2,2,n.homeSections$))}}var Qt=function(){function e(e,t,n){this.menuService=e,this.breakpointObserver=t,this.route=n,this.homeSections$=this.menuService.homeSections(),this.cols=2,this.homeDashboard=this.route.snapshot.data.homeDashboard}return e.prototype.ngOnInit=function(){var e=this;this.homeDashboard||(this.updateColumnCount(),this.breakpointObserver.observe([Gt.e.lg,Gt.e["gt-lg"]]).subscribe((function(t){return e.updateColumnCount()})))},e.prototype.updateColumnCount=function(){this.cols=2,this.breakpointObserver.isMatched(Gt.e.lg)&&(this.cols=3),this.breakpointObserver.isMatched(Gt.e["gt-lg"])&&(this.cols=4)},e.prototype.sectionColspan=function(e){if(this.breakpointObserver.isMatched(Gt.e["gt-sm"])){var t=this.cols;return e&&e.places&&e.places.length<=t&&(t=e.places.length),t}return 2},e.\u0275fac=function(t){return new(t||e)(r["\u0275\u0275directiveInject"](zt.a),r["\u0275\u0275directiveInject"](Ut.BreakpointObserver),r["\u0275\u0275directiveInject"](a.ActivatedRoute))},e.\u0275cmp=r["\u0275\u0275defineComponent"]({type:e,selectors:[["tb-home-links"]],decls:3,vars:2,consts:[[3,"embedded","dashboard","hideToolbar",4,"ngIf","ngIfElse"],["homeLinks",""],[3,"embedded","dashboard","hideToolbar"],["rowHeight","280px",1,"tb-home-links",3,"cols"],[3,"colspan",4,"ngFor","ngForOf"],[3,"colspan"],[2,"width","100%"],["translate","",1,"mat-headline"],["rowHeight","170px",3,"cols"],[4,"ngFor","ngForOf"],["mat-raised-button","","color","primary",1,"tb-card-button",3,"routerLink"],["class","material-icons tb-mat-96",4,"ngIf"],["class","tb-mat-96",3,"svgIcon",4,"ngIf"],["translate",""],[1,"material-icons","tb-mat-96"],[1,"tb-mat-96",3,"svgIcon"]],template:function(e,t){if(1&e&&(r["\u0275\u0275template"](0,Wt,1,3,"tb-dashboard-page",0),r["\u0275\u0275template"](1,Xt,3,4,"ng-template",null,1,r["\u0275\u0275templateRefExtractor"])),2&e){var n=r["\u0275\u0275reference"](2);r["\u0275\u0275property"]("ngIf",t.homeDashboard)("ngIfElse",n)}},directives:[i.NgIf,qt.a,$t.MatGridList,i.NgForOf,$t.MatGridTile,g.MatCard,g.MatCardTitle,f.TranslateDirective,g.MatCardContent,w.MatAnchor,a.RouterLinkWithHref,be.MatIcon],pipes:[i.AsyncPipe],styles:["[_nghost-%COMP%]{width:100%;height:100%}[_nghost-%COMP%]     .tb-home-links .mat-headline{font-size:20px}@media screen and (min-width:1600px){[_nghost-%COMP%]     .tb-home-links .mat-headline{font-size:24px}}[_nghost-%COMP%]     .tb-home-links mat-card{padding:0;margin:8px}[_nghost-%COMP%]     .tb-home-links mat-card mat-card-title{margin:0;padding:24px 16px 16px}[_nghost-%COMP%]     .tb-home-links mat-card mat-card-title+mat-card-content{padding-top:0}[_nghost-%COMP%]     .tb-home-links mat-card mat-card-content{padding:16px}[_nghost-%COMP%]     .tb-home-links .tb-card-button{width:100%;height:100%;max-width:240px}[_nghost-%COMP%]     .tb-home-links .tb-card-button:focus, [_nghost-%COMP%]     .tb-home-links .tb-card-button:hover{border-bottom:none}[_nghost-%COMP%]     .tb-home-links .tb-card-button .mat-button-wrapper{width:100%;height:100%;display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;-ms-flex-align:center;align-items:center}[_nghost-%COMP%]     .tb-home-links .tb-card-button .mat-button-wrapper mat-icon{margin:auto}[_nghost-%COMP%]     .tb-home-links .tb-card-button .mat-button-wrapper span{height:18px;min-height:36px;max-height:36px;padding:0 0 20px;margin:auto;font-size:18px;font-weight:400;line-height:18px;white-space:normal}[_nghost-%COMP%]     .tb-home-links .tb-card-button.mat-raised-button.mat-primary .mat-ripple-element{opacity:.3;background-color:hsla(0,0%,100%,.3)}"]}),e}();!function(){r["\u0275setClassMetadata"](Qt,[{type:r.Component,args:[{selector:"tb-home-links",templateUrl:"./home-links.component.html",styleUrls:["./home-links.component.scss"]}]}],(function(){return[{type:zt.a},{type:Ut.BreakpointObserver},{type:a.ActivatedRoute}]}),null)}();var Zt=function(){function e(e){this.dashboardService=e}return e.prototype.resolve=function(){return this.dashboardService.getHomeDashboard()},e.\u0275fac=function(t){return new(t||e)(r["\u0275\u0275inject"](Dt.a))},e.\u0275prov=r["\u0275\u0275defineInjectable"]({token:e,factory:e.\u0275fac}),e}();!function(){r["\u0275setClassMetadata"](Zt,[{type:r.Injectable}],(function(){return[{type:Dt.a}]}),null)}();var en=[{path:"home",component:Qt,data:{auth:[$.a.SYS_ADMIN,$.a.TENANT_ADMIN,$.a.CUSTOMER_USER],title:"home.home",breadcrumb:{label:"home.home",icon:"home"}},resolve:{homeDashboard:Zt}}],tn=function(){function e(){}return e.\u0275mod=r["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=r["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},providers:[Zt],imports:[[a.RouterModule.forChild(en)],a.RouterModule]}),e}();void(("undefined"==typeof ngJitMode||ngJitMode)&&r["\u0275\u0275setNgModuleScope"](tn,{imports:[a.RouterModule],exports:[a.RouterModule]}));var nn=function(){function e(){}return e.\u0275mod=r["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=r["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[i.CommonModule,jt.a,Rt.a,tn]]}),e}();void(("undefined"==typeof ngJitMode||ngJitMode)&&r["\u0275\u0275setNgModuleScope"](nn,{declarations:[Qt],imports:[i.CommonModule,jt.a,Rt.a,tn]}));var rn=n("9D3k"),an=n("sIb/"),on=n("AytR"),ln=n("BnVf"),sn=n("Vurf");function dn(e,t){1&e&&r["\u0275\u0275element"](0,"mat-progress-bar",17)}function cn(e,t){1&e&&r["\u0275\u0275element"](0,"div",18)}var un=function(e){function t(t,n,r,i,a,o){var l=e.call(this,t,n,a)||this;return l.store=t,l.router=n,l.translate=r,l.authService=i,l.dialogRef=a,l.fb=o,l}return Object(o.d)(t,e),t.prototype.ngOnInit=function(){this.buildChangePasswordForm()},t.prototype.buildChangePasswordForm=function(){this.changePassword=this.fb.group({currentPassword:[""],newPassword:[""],newPassword2:[""]})},t.prototype.onChangePassword=function(){var e=this;this.changePassword.get("newPassword").value!==this.changePassword.get("newPassword2").value?this.store.dispatch(new u.b({message:this.translate.instant("login.passwords-mismatch-error"),type:"error"})):this.authService.changePassword(this.changePassword.get("currentPassword").value,this.changePassword.get("newPassword").value).subscribe((function(){e.dialogRef.close(!0)}))},t.\u0275fac=function(e){return new(e||t)(r["\u0275\u0275directiveInject"](m.Store),r["\u0275\u0275directiveInject"](a.Router),r["\u0275\u0275directiveInject"](f.TranslateService),r["\u0275\u0275directiveInject"](sn.a),r["\u0275\u0275directiveInject"](ft.MatDialogRef),r["\u0275\u0275directiveInject"](s.FormBuilder))},t.\u0275cmp=r["\u0275\u0275defineComponent"]({type:t,selectors:[["tb-change-password-dialog"]],features:[r["\u0275\u0275InheritDefinitionFeature"]],decls:40,vars:21,consts:[[3,"formGroup","ngSubmit"],["fxLayout","row","color","primary"],["translate",""],["fxFlex",""],["mat-icon-button","","type","button",3,"mat-dialog-close"],[1,"material-icons"],["color","warn","mode","indeterminate",4,"ngIf"],["style","height: 4px;",4,"ngIf"],["mat-dialog-content",""],[1,"mat-block"],["matInput","","type","password","formControlName","currentPassword"],["matPrefix","",1,"material-icons"],["matInput","","type","password","formControlName","newPassword"],["matInput","","type","password","formControlName","newPassword2"],["mat-dialog-actions","","fxLayout","row","fxLayoutAlign","end center"],["mat-button","","color","primary","type","button","cdkFocusInitial","",3,"disabled","mat-dialog-close"],["mat-raised-button","","color","primary","type","submit",3,"disabled"],["color","warn","mode","indeterminate"],[2,"height","4px"]],template:function(e,t){1&e&&(r["\u0275\u0275elementStart"](0,"form",0),r["\u0275\u0275listener"]("ngSubmit",(function(){return t.onChangePassword()})),r["\u0275\u0275elementStart"](1,"mat-toolbar",1),r["\u0275\u0275elementStart"](2,"h2",2),r["\u0275\u0275text"](3,"profile.change-password"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275element"](4,"span",3),r["\u0275\u0275elementStart"](5,"button",4),r["\u0275\u0275elementStart"](6,"mat-icon",5),r["\u0275\u0275text"](7,"close"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275template"](8,dn,1,0,"mat-progress-bar",6),r["\u0275\u0275pipe"](9,"async"),r["\u0275\u0275template"](10,cn,1,0,"div",7),r["\u0275\u0275pipe"](11,"async"),r["\u0275\u0275elementStart"](12,"div",8),r["\u0275\u0275elementStart"](13,"mat-form-field",9),r["\u0275\u0275elementStart"](14,"mat-label",2),r["\u0275\u0275text"](15,"profile.current-password"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275element"](16,"input",10),r["\u0275\u0275elementStart"](17,"mat-icon",11),r["\u0275\u0275text"](18,"lock"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](19,"mat-form-field",9),r["\u0275\u0275elementStart"](20,"mat-label",2),r["\u0275\u0275text"](21,"login.new-password"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275element"](22,"input",12),r["\u0275\u0275elementStart"](23,"mat-icon",11),r["\u0275\u0275text"](24,"lock"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](25,"mat-form-field",9),r["\u0275\u0275elementStart"](26,"mat-label",2),r["\u0275\u0275text"](27,"login.new-password-again"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275element"](28,"input",13),r["\u0275\u0275elementStart"](29,"mat-icon",11),r["\u0275\u0275text"](30,"lock"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](31,"div",14),r["\u0275\u0275elementStart"](32,"button",15),r["\u0275\u0275pipe"](33,"async"),r["\u0275\u0275text"](34),r["\u0275\u0275pipe"](35,"translate"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](36,"button",16),r["\u0275\u0275pipe"](37,"async"),r["\u0275\u0275text"](38),r["\u0275\u0275pipe"](39,"translate"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()),2&e&&(r["\u0275\u0275property"]("formGroup",t.changePassword),r["\u0275\u0275advance"](5),r["\u0275\u0275property"]("mat-dialog-close",!1),r["\u0275\u0275advance"](3),r["\u0275\u0275property"]("ngIf",r["\u0275\u0275pipeBind1"](9,9,t.isLoading$)),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("ngIf",!r["\u0275\u0275pipeBind1"](11,11,t.isLoading$)),r["\u0275\u0275advance"](22),r["\u0275\u0275property"]("disabled",r["\u0275\u0275pipeBind1"](33,13,t.isLoading$))("mat-dialog-close",!1),r["\u0275\u0275advance"](2),r["\u0275\u0275textInterpolate1"](" ",r["\u0275\u0275pipeBind1"](35,15,"action.cancel")," "),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("disabled",r["\u0275\u0275pipeBind1"](37,17,t.isLoading$)||t.changePassword.invalid),r["\u0275\u0275advance"](2),r["\u0275\u0275textInterpolate1"](" ",r["\u0275\u0275pipeBind1"](39,19,"profile.change-password")," "))},directives:[s["\u0275angular_packages_forms_forms_y"],s.NgControlStatusGroup,s.FormGroupDirective,ht.MatToolbar,h.f,f.TranslateDirective,h.b,w.MatButton,ft.MatDialogClose,be.MatIcon,i.NgIf,ft.MatDialogContent,y.MatFormField,y.MatLabel,v.MatInput,s.DefaultValueAccessor,s.NgControlStatus,s.FormControlName,y.MatPrefix,ft.MatDialogActions,h.e,C.MatProgressBar],pipes:[i.AsyncPipe,f.TranslatePipe],styles:[""]}),t}(gt.a);function pn(e,t){1&e&&r["\u0275\u0275element"](0,"mat-progress-bar",28)}function mn(e,t){1&e&&r["\u0275\u0275element"](0,"div",29)}function fn(e,t){1&e&&(r["\u0275\u0275elementStart"](0,"mat-error"),r["\u0275\u0275text"](1),r["\u0275\u0275pipe"](2,"translate"),r["\u0275\u0275elementEnd"]()),2&e&&(r["\u0275\u0275advance"](1),r["\u0275\u0275textInterpolate1"](" ",r["\u0275\u0275pipeBind1"](2,1,"user.email-required")," "))}function gn(e,t){1&e&&(r["\u0275\u0275elementStart"](0,"mat-error"),r["\u0275\u0275text"](1),r["\u0275\u0275pipe"](2,"translate"),r["\u0275\u0275elementEnd"]()),2&e&&(r["\u0275\u0275advance"](1),r["\u0275\u0275textInterpolate1"](" ",r["\u0275\u0275pipeBind1"](2,1,"user.invalid-email-format")," "))}function hn(e,t){if(1&e&&(r["\u0275\u0275elementStart"](0,"mat-option",30),r["\u0275\u0275text"](1),r["\u0275\u0275pipe"](2,"translate"),r["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;r["\u0275\u0275property"]("value",n),r["\u0275\u0275advance"](1),r["\u0275\u0275textInterpolate1"](" ",n?r["\u0275\u0275pipeBind1"](2,2,"language.locales."+n):""," ")}}!function(){r["\u0275setClassMetadata"](un,[{type:r.Component,args:[{selector:"tb-change-password-dialog",templateUrl:"./change-password-dialog.component.html",styleUrls:["./change-password-dialog.component.scss"]}]}],(function(){return[{type:m.Store},{type:a.Router},{type:f.TranslateService},{type:sn.a},{type:ft.MatDialogRef},{type:s.FormBuilder}]}),null)}();var bn=function(e){function t(t,n,r,i,a,o,l,s){var d=e.call(this,t)||this;return d.store=t,d.route=n,d.userService=r,d.authService=i,d.translate=a,d.dialog=o,d.dialogService=l,d.fb=s,d.authorities=$.a,d.languageList=on.a.supportedLangs,d}return Object(o.d)(t,e),t.prototype.ngOnInit=function(){this.buildProfileForm(),this.userLoaded(this.route.snapshot.data.user)},t.prototype.buildProfileForm=function(){this.profile=this.fb.group({email:["",[s.Validators.required,s.Validators.email]],firstName:[""],lastName:[""],language:[""],homeDashboardId:[null],homeDashboardHideToolbar:[!0]})},t.prototype.save=function(){var e=this;this.user=Object(o.a)(Object(o.a)({},this.user),this.profile.value),this.user.additionalInfo||(this.user.additionalInfo={}),this.user.additionalInfo.lang=this.profile.get("language").value,this.user.additionalInfo.homeDashboardId=this.profile.get("homeDashboardId").value,this.user.additionalInfo.homeDashboardHideToolbar=this.profile.get("homeDashboardHideToolbar").value,this.userService.saveUser(this.user).subscribe((function(t){e.userLoaded(t),e.store.dispatch(new an.e({userDetails:{additionalInfo:Object(o.a)({},t.additionalInfo),authority:t.authority,createdTime:t.createdTime,tenantId:t.tenantId,customerId:t.customerId,email:t.email,firstName:t.firstName,id:t.id,lastName:t.lastName}})),e.store.dispatch(new ln.a({userLang:t.additionalInfo.lang}))}))},t.prototype.changePassword=function(){this.dialog.open(un,{disableClose:!0,panelClass:["tb-dialog","tb-fullscreen-dialog"]})},t.prototype.userLoaded=function(e){var t,n;this.user=e,this.profile.reset(e);var r=!0;e.additionalInfo&&(e.additionalInfo.lang&&(t=e.additionalInfo.lang),n=e.additionalInfo.homeDashboardId,Object(p.o)(e.additionalInfo.homeDashboardHideToolbar)&&(r=e.additionalInfo.homeDashboardHideToolbar)),t||(t=this.translate.currentLang),this.profile.get("language").setValue(t),this.profile.get("homeDashboardId").setValue(n),this.profile.get("homeDashboardHideToolbar").setValue(r)},t.prototype.confirmForm=function(){return this.profile},t.\u0275fac=function(e){return new(e||t)(r["\u0275\u0275directiveInject"](m.Store),r["\u0275\u0275directiveInject"](a.ActivatedRoute),r["\u0275\u0275directiveInject"](rn.a),r["\u0275\u0275directiveInject"](sn.a),r["\u0275\u0275directiveInject"](f.TranslateService),r["\u0275\u0275directiveInject"](ft.MatDialog),r["\u0275\u0275directiveInject"](U.a),r["\u0275\u0275directiveInject"](s.FormBuilder))},t.\u0275cmp=r["\u0275\u0275defineComponent"]({type:t,selectors:[["tb-profile"]],features:[r["\u0275\u0275InheritDefinitionFeature"]],decls:60,vars:40,consts:[[1,"profile-card"],["fxLayout","row","fxLayout.xs","column","fxLayoutGap.xs","8px"],["fxFlex","","fxLayout","column"],["translate","",1,"mat-headline"],[1,"profile-email",2,"opacity","0.7"],["translate","",1,"mat-subheader"],[1,"profile-last-login-ts",2,"opacity","0.7"],["color","warn","mode","indeterminate",4,"ngIf"],["style","height: 4px;",4,"ngIf"],[2,"padding-top","16px"],[3,"formGroup","ngSubmit"],[3,"disabled"],[1,"mat-block"],["translate",""],["matInput","","formControlName","email","required",""],[4,"ngIf"],["matInput","","formControlName","firstName"],["matInput","","formControlName","lastName"],["matInput","","formControlName","language"],[3,"value",4,"ngFor","ngForOf"],["fxFlex","","fxLayout","column","fxLayout.gt-sm","row",1,"tb-home-dashboard"],["fxFlex","","formControlName","homeDashboardId",3,"placeholder","dashboardsScope","tenantId","customerId","selectFirstDashboard"],["fxFlex","","formControlName","homeDashboardHideToolbar"],["fxLayout","row",2,"padding-bottom","16px"],["mat-button","","mat-raised-button","","color","primary","type","button",3,"disabled","click"],["fxLayout","row",1,"layout-wrap"],["fxFlex",""],["mat-button","","mat-raised-button","","color","primary","type","submit",3,"disabled"],["color","warn","mode","indeterminate"],[2,"height","4px"],[3,"value"]],template:function(e,t){1&e&&(r["\u0275\u0275elementStart"](0,"div"),r["\u0275\u0275elementStart"](1,"mat-card",0),r["\u0275\u0275elementStart"](2,"mat-card-title"),r["\u0275\u0275elementStart"](3,"div",1),r["\u0275\u0275elementStart"](4,"div",2),r["\u0275\u0275elementStart"](5,"span",3),r["\u0275\u0275text"](6,"profile.profile"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](7,"span",4),r["\u0275\u0275text"](8),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](9,"div",2),r["\u0275\u0275elementStart"](10,"span",5),r["\u0275\u0275text"](11,"profile.last-login-time"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](12,"span",6),r["\u0275\u0275text"](13),r["\u0275\u0275pipe"](14,"date"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275element"](15,"mat-card-title"),r["\u0275\u0275template"](16,pn,1,0,"mat-progress-bar",7),r["\u0275\u0275pipe"](17,"async"),r["\u0275\u0275template"](18,mn,1,0,"div",8),r["\u0275\u0275pipe"](19,"async"),r["\u0275\u0275elementStart"](20,"mat-card-content",9),r["\u0275\u0275elementStart"](21,"form",10),r["\u0275\u0275listener"]("ngSubmit",(function(){return t.save()})),r["\u0275\u0275elementStart"](22,"fieldset",11),r["\u0275\u0275pipe"](23,"async"),r["\u0275\u0275elementStart"](24,"mat-form-field",12),r["\u0275\u0275elementStart"](25,"mat-label",13),r["\u0275\u0275text"](26,"user.email"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275element"](27,"input",14),r["\u0275\u0275template"](28,fn,3,3,"mat-error",15),r["\u0275\u0275template"](29,gn,3,3,"mat-error",15),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](30,"mat-form-field",12),r["\u0275\u0275elementStart"](31,"mat-label",13),r["\u0275\u0275text"](32,"user.first-name"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275element"](33,"input",16),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](34,"mat-form-field",12),r["\u0275\u0275elementStart"](35,"mat-label",13),r["\u0275\u0275text"](36,"user.last-name"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275element"](37,"input",17),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](38,"mat-form-field",12),r["\u0275\u0275elementStart"](39,"mat-label",13),r["\u0275\u0275text"](40,"language.language"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](41,"mat-select",18),r["\u0275\u0275template"](42,hn,3,4,"mat-option",19),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](43,"section",20),r["\u0275\u0275element"](44,"tb-dashboard-autocomplete",21),r["\u0275\u0275pipe"](45,"translate"),r["\u0275\u0275elementStart"](46,"mat-checkbox",22),r["\u0275\u0275text"](47),r["\u0275\u0275pipe"](48,"translate"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](49,"div",23),r["\u0275\u0275elementStart"](50,"button",24),r["\u0275\u0275listener"]("click",(function(){return t.changePassword()})),r["\u0275\u0275pipe"](51,"async"),r["\u0275\u0275text"](52),r["\u0275\u0275pipe"](53,"translate"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](54,"div",25),r["\u0275\u0275element"](55,"span",26),r["\u0275\u0275elementStart"](56,"button",27),r["\u0275\u0275pipe"](57,"async"),r["\u0275\u0275text"](58),r["\u0275\u0275pipe"](59,"translate"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()),2&e&&(r["\u0275\u0275advance"](8),r["\u0275\u0275textInterpolate"](t.profile?t.profile.get("email").value:""),r["\u0275\u0275advance"](5),r["\u0275\u0275textInterpolate"](r["\u0275\u0275pipeBind2"](14,19,null==t.user||null==t.user.additionalInfo?null:t.user.additionalInfo.lastLoginTs,"yyyy-MM-dd HH:mm:ss")),r["\u0275\u0275advance"](3),r["\u0275\u0275property"]("ngIf",r["\u0275\u0275pipeBind1"](17,22,t.isLoading$)),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("ngIf",!r["\u0275\u0275pipeBind1"](19,24,t.isLoading$)),r["\u0275\u0275advance"](3),r["\u0275\u0275property"]("formGroup",t.profile),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("disabled",r["\u0275\u0275pipeBind1"](23,26,t.isLoading$)),r["\u0275\u0275advance"](6),r["\u0275\u0275property"]("ngIf",t.profile.get("email").hasError("required")),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",t.profile.get("email").hasError("email")),r["\u0275\u0275advance"](13),r["\u0275\u0275property"]("ngForOf",t.languageList),r["\u0275\u0275advance"](2),r["\u0275\u0275propertyInterpolate"]("placeholder",r["\u0275\u0275pipeBind1"](45,28,"dashboard.home-dashboard")),r["\u0275\u0275property"]("dashboardsScope",(null==t.user?null:t.user.authority)===t.authorities.TENANT_ADMIN?"tenant":"customer")("tenantId",null==t.user||null==t.user.tenantId?null:t.user.tenantId.id)("customerId",null==t.user||null==t.user.customerId?null:t.user.customerId.id)("selectFirstDashboard",!1),r["\u0275\u0275advance"](3),r["\u0275\u0275textInterpolate1"](" ",r["\u0275\u0275pipeBind1"](48,30,"dashboard.home-dashboard-hide-toolbar")," "),r["\u0275\u0275advance"](3),r["\u0275\u0275property"]("disabled",r["\u0275\u0275pipeBind1"](51,32,t.isLoading$)),r["\u0275\u0275advance"](2),r["\u0275\u0275textInterpolate1"](" ",r["\u0275\u0275pipeBind1"](53,34,"profile.change-password")," "),r["\u0275\u0275advance"](4),r["\u0275\u0275property"]("disabled",r["\u0275\u0275pipeBind1"](57,36,t.isLoading$)||t.profile.invalid||!t.profile.dirty),r["\u0275\u0275advance"](2),r["\u0275\u0275textInterpolate1"](" ",r["\u0275\u0275pipeBind1"](59,38,"action.save")," "))},directives:[g.MatCard,g.MatCardTitle,h.f,h.g,h.b,f.TranslateDirective,i.NgIf,g.MatCardContent,s["\u0275angular_packages_forms_forms_y"],s.NgControlStatusGroup,s.FormGroupDirective,y.MatFormField,y.MatLabel,v.MatInput,s.DefaultValueAccessor,s.NgControlStatus,s.FormControlName,s.RequiredValidator,x.MatSelect,i.NgForOf,Pt.a,ge.MatCheckbox,w.MatButton,C.MatProgressBar,y.MatError,I.MatOption],pipes:[i.DatePipe,i.AsyncPipe,f.TranslatePipe],styles:["[_nghost-%COMP%]   mat-card.profile-card[_ngcontent-%COMP%]{margin:8px}@media screen and (min-width:960px){[_nghost-%COMP%]   mat-card.profile-card[_ngcontent-%COMP%]{width:60%}}[_nghost-%COMP%]   mat-card.profile-card[_ngcontent-%COMP%]   .mat-headline[_ngcontent-%COMP%]{margin:0}[_nghost-%COMP%]   mat-card.profile-card[_ngcontent-%COMP%]   .profile-email[_ngcontent-%COMP%]{font-size:16px;font-weight:400}[_nghost-%COMP%]   mat-card.profile-card[_ngcontent-%COMP%]   .mat-subheader[_ngcontent-%COMP%]{line-height:24px;color:rgba(0,0,0,.54);font-size:14px;font-weight:400}[_nghost-%COMP%]   mat-card.profile-card[_ngcontent-%COMP%]   .profile-last-login-ts[_ngcontent-%COMP%]{font-size:16px;font-weight:400}@media screen and (min-width:960px){[_nghost-%COMP%]   mat-card.profile-card[_ngcontent-%COMP%]   .tb-home-dashboard[_ngcontent-%COMP%]   tb-dashboard-autocomplete[_ngcontent-%COMP%]{padding-right:12px}}@media screen and (max-width:959px){[_nghost-%COMP%]   mat-card.profile-card[_ngcontent-%COMP%]   .tb-home-dashboard[_ngcontent-%COMP%]   tb-dashboard-autocomplete[_ngcontent-%COMP%]{padding-bottom:12px}}@media screen and (min-width:960px){[_nghost-%COMP%]   mat-card.profile-card[_ngcontent-%COMP%]   .tb-home-dashboard[_ngcontent-%COMP%]   mat-checkbox[_ngcontent-%COMP%]{margin-top:16px}}"]}),t}(l.a);!function(){r["\u0275setClassMetadata"](bn,[{type:r.Component,args:[{selector:"tb-profile",templateUrl:"./profile.component.html",styleUrls:["./profile.component.scss"]}]}],(function(){return[{type:m.Store},{type:a.ActivatedRoute},{type:rn.a},{type:sn.a},{type:f.TranslateService},{type:ft.MatDialog},{type:U.a},{type:s.FormBuilder}]}),null)}();var yn=function(){function e(e,t){this.store=e,this.userService=t}return e.prototype.resolve=function(){var e=Object(z.b)(this.store).userId;return this.userService.getUser(e)},e.\u0275fac=function(t){return new(t||e)(r["\u0275\u0275inject"](m.Store),r["\u0275\u0275inject"](rn.a))},e.\u0275prov=r["\u0275\u0275defineInjectable"]({token:e,factory:e.\u0275fac}),e}();!function(){r["\u0275setClassMetadata"](yn,[{type:r.Injectable}],(function(){return[{type:m.Store},{type:rn.a}]}),null)}();var vn=[{path:"profile",component:bn,canDeactivate:[q],data:{auth:[$.a.SYS_ADMIN,$.a.TENANT_ADMIN,$.a.CUSTOMER_USER],title:"profile.profile",breadcrumb:{label:"profile.profile",icon:"account_circle"}},resolve:{user:yn}}],xn=function(){function e(){}return e.\u0275mod=r["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=r["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},providers:[yn],imports:[[a.RouterModule.forChild(vn)],a.RouterModule]}),e}();void(("undefined"==typeof ngJitMode||ngJitMode)&&r["\u0275\u0275setNgModuleScope"](xn,{imports:[a.RouterModule],exports:[a.RouterModule]}));var Sn=function(){function e(){}return e.\u0275mod=r["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=r["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[i.CommonModule,jt.a,xn]]}),e}();void(("undefined"==typeof ngJitMode||ngJitMode)&&r["\u0275\u0275setNgModuleScope"](Sn,{declarations:[bn,un],imports:[i.CommonModule,jt.a,xn]}));var wn=n("kIhZ"),Cn=n("G8Aa"),In=n("qxrw"),En=function(e){function t(t,n,r,i){var a=e.call(this,t,n,r,i)||this;return a.store=t,a.fb=n,a.entityValue=r,a.entitiesTableConfigValue=i,a}return Object(o.d)(t,e),t.prototype.buildForm=function(e){var t=this.buildEntityForm(e);return t.addControl("country",this.fb.control(e?e.country:"",[])),t.addControl("city",this.fb.control(e?e.city:"",[])),t.addControl("state",this.fb.control(e?e.state:"",[])),t.addControl("zip",this.fb.control(e?e.zip:"",this.zipValidators(e?e.country:""))),t.addControl("address",this.fb.control(e?e.address:"",[])),t.addControl("address2",this.fb.control(e?e.address2:"",[])),t.addControl("phone",this.fb.control(e?e.phone:"",[])),t.addControl("email",this.fb.control(e?e.email:"",[s.Validators.email])),t},t.prototype.updateForm=function(e){this.updateEntityForm(e),this.entityForm.patchValue({country:e.country}),this.entityForm.patchValue({city:e.city}),this.entityForm.patchValue({state:e.state}),this.entityForm.get("zip").setValidators(this.zipValidators(e.country)),this.entityForm.patchValue({zip:e.zip}),this.entityForm.patchValue({address:e.address}),this.entityForm.patchValue({address2:e.address2}),this.entityForm.patchValue({phone:e.phone}),this.entityForm.patchValue({email:e.email})},t.prototype.ngAfterViewInit=function(){var e=this;this.entityForm.get("country").valueChanges.subscribe((function(t){e.entityForm.get("zip").setValidators(e.zipValidators(t)),e.entityForm.get("zip").updateValueAndValidity({onlySelf:!0}),e.entityForm.get("zip").markAsTouched({onlySelf:!0})}))},t.prototype.zipValidators=function(e){var t=[];if(e&&wn.b[e]){var n=wn.b[e];t.push(s.Validators.pattern(n))}return t},t.\u0275fac=function(e){r["\u0275\u0275invalidFactory"]()},t.\u0275dir=r["\u0275\u0275defineDirective"]({type:t,features:[r["\u0275\u0275InheritDefinitionFeature"]]}),t}(Cn.a);!function(){r["\u0275setClassMetadata"](En,[{type:r.Directive}],(function(){return[{type:m.Store},{type:s.FormBuilder},{type:void 0},{type:In.d}]}),null)}();var Tn=n("Vbuf"),Mn=n("hwpn");function Fn(e,t){1&e&&(r["\u0275\u0275elementStart"](0,"mat-error"),r["\u0275\u0275text"](1),r["\u0275\u0275pipe"](2,"translate"),r["\u0275\u0275elementEnd"]()),2&e&&(r["\u0275\u0275advance"](1),r["\u0275\u0275textInterpolate1"](" ",r["\u0275\u0275pipeBind1"](2,1,"tenant.title-required")," "))}function Dn(e,t){if(1&e&&(r["\u0275\u0275elementStart"](0,"section",17),r["\u0275\u0275elementStart"](1,"section",18),r["\u0275\u0275element"](2,"tb-dashboard-autocomplete",19),r["\u0275\u0275pipe"](3,"translate"),r["\u0275\u0275elementStart"](4,"mat-checkbox",20),r["\u0275\u0275text"](5),r["\u0275\u0275pipe"](6,"translate"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()),2&e){var n=r["\u0275\u0275nextContext"]();r["\u0275\u0275advance"](2),r["\u0275\u0275propertyInterpolate"]("placeholder",r["\u0275\u0275pipeBind1"](3,5,"dashboard.home-dashboard")),r["\u0275\u0275property"]("dashboardsScope","tenant")("tenantId",null==n.entity?null:n.entity.id.id)("selectFirstDashboard",!1),r["\u0275\u0275advance"](3),r["\u0275\u0275textInterpolate1"](" ",r["\u0275\u0275pipeBind1"](6,7,"dashboard.home-dashboard-hide-toolbar")," ")}}var An=function(e){function t(t,n,r,i,a){var o=e.call(this,t,a,r,i)||this;return o.store=t,o.translate=n,o.entityValue=r,o.entitiesTableConfigValue=i,o.fb=a,o}return Object(o.d)(t,e),t.prototype.hideDelete=function(){return!!this.entitiesTableConfig&&!this.entitiesTableConfig.deleteEnabled(this.entity)},t.prototype.buildEntityForm=function(e){return this.fb.group({title:[e?e.title:"",[s.Validators.required]],tenantProfileId:[e?e.tenantProfileId:null,[s.Validators.required]],additionalInfo:this.fb.group({description:[e&&e.additionalInfo?e.additionalInfo.description:""],homeDashboardId:[e&&e.additionalInfo?e.additionalInfo.homeDashboardId:null],homeDashboardHideToolbar:[!(e&&e.additionalInfo&&Object(p.o)(e.additionalInfo.homeDashboardHideToolbar))||e.additionalInfo.homeDashboardHideToolbar]})})},t.prototype.updateEntityForm=function(e){this.entityForm.patchValue({title:e.title}),this.entityForm.patchValue({tenantProfileId:e.tenantProfileId}),this.entityForm.patchValue({additionalInfo:{description:e.additionalInfo?e.additionalInfo.description:""}}),this.entityForm.patchValue({additionalInfo:{homeDashboardId:e.additionalInfo?e.additionalInfo.homeDashboardId:null}}),this.entityForm.patchValue({additionalInfo:{homeDashboardHideToolbar:!e.additionalInfo||!Object(p.o)(e.additionalInfo.homeDashboardHideToolbar)||e.additionalInfo.homeDashboardHideToolbar}})},t.prototype.updateFormState=function(){this.entityForm&&(this.isEditValue?this.entityForm.enable({emitEvent:!1}):this.entityForm.disable({emitEvent:!1}))},t.prototype.onTenantIdCopied=function(e){this.store.dispatch(new u.b({message:this.translate.instant("tenant.idCopiedMessage"),type:"success",duration:750,verticalPosition:"bottom",horizontalPosition:"right"}))},t.prototype.onTenantProfileUpdated=function(){this.entitiesTableConfig.table.updateData(!1)},t.\u0275fac=function(e){return new(e||t)(r["\u0275\u0275directiveInject"](m.Store),r["\u0275\u0275directiveInject"](f.TranslateService),r["\u0275\u0275directiveInject"]("entity"),r["\u0275\u0275directiveInject"]("entitiesTableConfig"),r["\u0275\u0275directiveInject"](s.FormBuilder))},t.\u0275cmp=r["\u0275\u0275defineComponent"]({type:t,selectors:[["tb-tenant"]],features:[r["\u0275\u0275InheritDefinitionFeature"]],decls:31,vars:25,consts:[["fxLayout.xs","column",1,"tb-details-buttons"],["mat-raised-button","","color","primary",3,"disabled","fxShow","click"],["fxLayout","row","fxLayout.xs","column"],["mat-raised-button","","ngxClipboard","",3,"cbContent","fxShow","cbOnSuccess"],["svgIcon","mdi:clipboard-arrow-left"],["translate",""],["fxLayout","column",1,"mat-padding"],[3,"formGroup"],[3,"disabled"],[1,"mat-block"],["matInput","","formControlName","title","required",""],[4,"ngIf"],["required","","formControlName","tenantProfileId",3,"selectDefaultProfile","tenantProfileUpdated"],["formGroupName","additionalInfo","fxLayout","column"],["matInput","","formControlName","description","rows","2"],["class","tb-default-dashboard","fxFlex","","fxLayout","column",4,"ngIf"],[3,"parentForm","isEdit"],["fxFlex","","fxLayout","column",1,"tb-default-dashboard"],["fxFlex","","fxLayout","column","fxLayout.gt-sm","row"],["fxFlex","","formControlName","homeDashboardId",3,"placeholder","dashboardsScope","tenantId","selectFirstDashboard"],["fxFlex","","formControlName","homeDashboardHideToolbar"]],template:function(e,t){1&e&&(r["\u0275\u0275elementStart"](0,"div",0),r["\u0275\u0275elementStart"](1,"button",1),r["\u0275\u0275listener"]("click",(function(e){return t.onEntityAction(e,"manageTenantAdmins")})),r["\u0275\u0275pipe"](2,"async"),r["\u0275\u0275text"](3),r["\u0275\u0275pipe"](4,"translate"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](5,"button",1),r["\u0275\u0275listener"]("click",(function(e){return t.onEntityAction(e,"delete")})),r["\u0275\u0275pipe"](6,"async"),r["\u0275\u0275text"](7),r["\u0275\u0275pipe"](8,"translate"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](9,"div",2),r["\u0275\u0275elementStart"](10,"button",3),r["\u0275\u0275listener"]("cbOnSuccess",(function(e){return t.onTenantIdCopied(e)})),r["\u0275\u0275element"](11,"mat-icon",4),r["\u0275\u0275elementStart"](12,"span",5),r["\u0275\u0275text"](13,"tenant.copyId"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](14,"div",6),r["\u0275\u0275elementStart"](15,"form",7),r["\u0275\u0275elementStart"](16,"fieldset",8),r["\u0275\u0275pipe"](17,"async"),r["\u0275\u0275elementStart"](18,"mat-form-field",9),r["\u0275\u0275elementStart"](19,"mat-label",5),r["\u0275\u0275text"](20,"tenant.title"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275element"](21,"input",10),r["\u0275\u0275template"](22,Fn,3,3,"mat-error",11),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](23,"tb-tenant-profile-autocomplete",12),r["\u0275\u0275listener"]("tenantProfileUpdated",(function(){return t.onTenantProfileUpdated()})),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](24,"div",13),r["\u0275\u0275elementStart"](25,"mat-form-field",9),r["\u0275\u0275elementStart"](26,"mat-label",5),r["\u0275\u0275text"](27,"tenant.description"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275element"](28,"textarea",14),r["\u0275\u0275elementEnd"](),r["\u0275\u0275template"](29,Dn,7,9,"section",15),r["\u0275\u0275elementEnd"](),r["\u0275\u0275element"](30,"tb-contact",16),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()),2&e&&(r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("disabled",r["\u0275\u0275pipeBind1"](2,15,t.isLoading$))("fxShow",!t.isEdit),r["\u0275\u0275advance"](2),r["\u0275\u0275textInterpolate1"](" ",r["\u0275\u0275pipeBind1"](4,17,"tenant.manage-tenant-admins")," "),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("disabled",r["\u0275\u0275pipeBind1"](6,19,t.isLoading$))("fxShow",!t.hideDelete()&&!t.isEdit),r["\u0275\u0275advance"](2),r["\u0275\u0275textInterpolate1"](" ",r["\u0275\u0275pipeBind1"](8,21,"tenant.delete")," "),r["\u0275\u0275advance"](3),r["\u0275\u0275property"]("cbContent",null==t.entity||null==t.entity.id?null:t.entity.id.id)("fxShow",!t.isEdit),r["\u0275\u0275advance"](5),r["\u0275\u0275property"]("formGroup",t.entityForm),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("disabled",r["\u0275\u0275pipeBind1"](17,23,t.isLoading$)||!t.isEdit),r["\u0275\u0275advance"](6),r["\u0275\u0275property"]("ngIf",t.entityForm.get("title").hasError("required")),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("selectDefaultProfile",t.isAdd),r["\u0275\u0275advance"](6),r["\u0275\u0275property"]("ngIf",null==t.entity?null:t.entity.id),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("parentForm",t.entityForm)("isEdit",t.isEdit))},directives:[h.f,w.MatButton,ve.d,ye.a,be.MatIcon,f.TranslateDirective,s["\u0275angular_packages_forms_forms_y"],s.NgControlStatusGroup,s.FormGroupDirective,y.MatFormField,y.MatLabel,v.MatInput,s.DefaultValueAccessor,s.NgControlStatus,s.FormControlName,s.RequiredValidator,i.NgIf,Tn.a,s.FormGroupName,Mn.a,y.MatError,h.b,Pt.a,ge.MatCheckbox],pipes:[i.AsyncPipe,f.TranslatePipe],styles:["@media screen and (min-width:960px){[_nghost-%COMP%]   .tb-default-dashboard[_ngcontent-%COMP%]   tb-dashboard-autocomplete[_ngcontent-%COMP%]{padding-right:12px}}@media screen and (max-width:959px){[_nghost-%COMP%]   .tb-default-dashboard[_ngcontent-%COMP%]   tb-dashboard-autocomplete[_ngcontent-%COMP%]{padding-bottom:12px}}@media screen and (min-width:960px){[_nghost-%COMP%]   .tb-default-dashboard[_ngcontent-%COMP%]   mat-checkbox[_ngcontent-%COMP%]{margin-top:16px}}"]}),t}(En);!function(){r["\u0275setClassMetadata"](An,[{type:r.Component,args:[{selector:"tb-tenant",templateUrl:"./tenant.component.html",styleUrls:["./tenant.component.scss"]}]}],(function(){return[{type:m.Store},{type:f.TranslateService},{type:void 0,decorators:[{type:r.Inject,args:["entity"]}]},{type:In.d,decorators:[{type:r.Inject,args:["entitiesTableConfig"]}]},{type:s.FormBuilder}]}),null)}();var Pn=n("UaJx"),Nn=n("WNjs"),kn=n("U3y+"),Ln=n("AUWA"),On=n("AAbs"),_n=n("eOYM"),Bn=n("mXAo"),jn=n("enJx");function Rn(e,t){if(1&e&&(r["\u0275\u0275elementStart"](0,"mat-tab",1,2),r["\u0275\u0275pipe"](2,"translate"),r["\u0275\u0275element"](3,"tb-attribute-table",3),r["\u0275\u0275elementEnd"]()),2&e){var n=r["\u0275\u0275reference"](1),i=r["\u0275\u0275nextContext"]();r["\u0275\u0275propertyInterpolate"]("label",r["\u0275\u0275pipeBind1"](2,5,"attribute.attributes")),r["\u0275\u0275advance"](3),r["\u0275\u0275property"]("defaultAttributeScope",i.attributeScopes.SERVER_SCOPE)("active",n.isActive)("entityId",i.entity.id)("entityName",i.entity.name)}}function Vn(e,t){if(1&e&&(r["\u0275\u0275elementStart"](0,"mat-tab",1,4),r["\u0275\u0275pipe"](2,"translate"),r["\u0275\u0275element"](3,"tb-attribute-table",5),r["\u0275\u0275elementEnd"]()),2&e){var n=r["\u0275\u0275reference"](1),i=r["\u0275\u0275nextContext"]();r["\u0275\u0275propertyInterpolate"]("label",r["\u0275\u0275pipeBind1"](2,5,"attribute.latest-telemetry")),r["\u0275\u0275advance"](3),r["\u0275\u0275property"]("defaultAttributeScope",i.latestTelemetryTypes.LATEST_TELEMETRY)("active",n.isActive)("entityId",i.entity.id)("entityName",i.entity.name)}}function zn(e,t){if(1&e&&(r["\u0275\u0275elementStart"](0,"mat-tab",1,6),r["\u0275\u0275pipe"](2,"translate"),r["\u0275\u0275element"](3,"tb-alarm-table",7),r["\u0275\u0275elementEnd"]()),2&e){var n=r["\u0275\u0275reference"](1),i=r["\u0275\u0275nextContext"]();r["\u0275\u0275propertyInterpolate"]("label",r["\u0275\u0275pipeBind1"](2,3,"alarm.alarms")),r["\u0275\u0275advance"](3),r["\u0275\u0275property"]("active",n.isActive)("entityId",i.entity.id)}}function Gn(e,t){if(1&e&&(r["\u0275\u0275elementStart"](0,"mat-tab",1,8),r["\u0275\u0275pipe"](2,"translate"),r["\u0275\u0275element"](3,"tb-event-table",9),r["\u0275\u0275elementEnd"]()),2&e){var n=r["\u0275\u0275reference"](1),i=r["\u0275\u0275nextContext"]();r["\u0275\u0275propertyInterpolate"]("label",r["\u0275\u0275pipeBind1"](2,5,"tenant.events")),r["\u0275\u0275advance"](3),r["\u0275\u0275property"]("defaultEventType",i.eventTypes.ERROR)("active",n.isActive)("tenantId",i.nullUid)("entityId",i.entity.id)}}function Un(e,t){if(1&e&&(r["\u0275\u0275elementStart"](0,"mat-tab",1,10),r["\u0275\u0275pipe"](2,"translate"),r["\u0275\u0275element"](3,"tb-relation-table",7),r["\u0275\u0275elementEnd"]()),2&e){var n=r["\u0275\u0275reference"](1),i=r["\u0275\u0275nextContext"]();r["\u0275\u0275propertyInterpolate"]("label",r["\u0275\u0275pipeBind1"](2,3,"relation.relations")),r["\u0275\u0275advance"](3),r["\u0275\u0275property"]("active",n.isActive)("entityId",i.entity.id)}}var qn=function(e){function t(t){var n=e.call(this,t)||this;return n.store=t,n}return Object(o.d)(t,e),t.prototype.ngOnInit=function(){e.prototype.ngOnInit.call(this)},t.\u0275fac=function(e){return new(e||t)(r["\u0275\u0275directiveInject"](m.Store))},t.\u0275cmp=r["\u0275\u0275defineComponent"]({type:t,selectors:[["tb-tenant-tabs"]],features:[r["\u0275\u0275InheritDefinitionFeature"]],decls:5,vars:5,consts:[[3,"label",4,"ngIf"],[3,"label"],["attributesTab","matTab"],[3,"defaultAttributeScope","active","entityId","entityName"],["telemetryTab","matTab"],["disableAttributeScopeSelection","",3,"defaultAttributeScope","active","entityId","entityName"],["alarmsTab","matTab"],[3,"active","entityId"],["eventsTab","matTab"],[3,"defaultEventType","active","tenantId","entityId"],["relationsTab","matTab"]],template:function(e,t){1&e&&(r["\u0275\u0275template"](0,Rn,4,7,"mat-tab",0),r["\u0275\u0275template"](1,Vn,4,7,"mat-tab",0),r["\u0275\u0275template"](2,zn,4,5,"mat-tab",0),r["\u0275\u0275template"](3,Gn,4,7,"mat-tab",0),r["\u0275\u0275template"](4,Un,4,5,"mat-tab",0)),2&e&&(r["\u0275\u0275property"]("ngIf",t.entity),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",t.entity),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",t.entity),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",t.entity),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",t.entity))},directives:[i.NgIf,xe.MatTab,On.a,_n.a,Bn.a,jn.a],pipes:[f.TranslatePipe],encapsulation:2}),t}(Ln.a);!function(){r["\u0275setClassMetadata"](qn,[{type:r.Component,args:[{selector:"tb-tenant-tabs",templateUrl:"./tenant-tabs.component.html",styleUrls:[]}]}],(function(){return[{type:m.Store}]}),null)}();var $n=n("5+tZ"),Wn=function(){function e(e,t,n,r){var i=this;this.tenantService=e,this.translate=t,this.datePipe=n,this.router=r,this.config=new In.d,this.config.entityType=kn.b.TENANT,this.config.entityComponent=An,this.config.entityTabsComponent=qn,this.config.entityTranslations=kn.d.get(kn.b.TENANT),this.config.entityResources=kn.c.get(kn.b.TENANT),this.config.columns.push(new In.a("createdTime","common.created-time",this.datePipe,"150px"),new In.c("title","tenant.title","20%"),new In.c("tenantProfileName","tenant-profile.tenant-profile","20%"),new In.c("email","contact.email","20%"),new In.c("country","contact.country","20%"),new In.c("city","contact.city","20%")),this.config.cellActionDescriptors.push({name:this.translate.instant("tenant.manage-tenant-admins"),icon:"account_circle",isEnabled:function(){return!0},onAction:function(e,t){return i.manageTenantAdmins(e,t)}}),this.config.deleteEntityTitle=function(e){return i.translate.instant("tenant.delete-tenant-title",{tenantTitle:e.title})},this.config.deleteEntityContent=function(){return i.translate.instant("tenant.delete-tenant-text")},this.config.deleteEntitiesTitle=function(e){return i.translate.instant("tenant.delete-tenants-title",{count:e})},this.config.deleteEntitiesContent=function(){return i.translate.instant("tenant.delete-tenants-text")},this.config.entitiesFetchFunction=function(e){return i.tenantService.getTenantInfos(e)},this.config.loadEntity=function(e){return i.tenantService.getTenantInfo(e.id)},this.config.saveEntity=function(e){return i.tenantService.saveTenant(e).pipe(Object($n.b)((function(e){return i.tenantService.getTenantInfo(e.id.id)})))},this.config.deleteEntity=function(e){return i.tenantService.deleteTenant(e.id)},this.config.onEntityAction=function(e){return i.onTenantAction(e)}}return e.prototype.resolve=function(){return this.config.tableTitle=this.translate.instant("tenant.tenants"),this.config},e.prototype.manageTenantAdmins=function(e,t){e&&e.stopPropagation(),this.router.navigateByUrl("tenants/"+t.id.id+"/users")},e.prototype.onTenantAction=function(e){switch(e.action){case"manageTenantAdmins":return this.manageTenantAdmins(e.event,e.entity),!0}return!1},e.\u0275fac=function(t){return new(t||e)(r["\u0275\u0275inject"](Nn.a),r["\u0275\u0275inject"](f.TranslateService),r["\u0275\u0275inject"](i.DatePipe),r["\u0275\u0275inject"](a.Router))},e.\u0275prov=r["\u0275\u0275defineInjectable"]({token:e,factory:e.\u0275fac}),e}();!function(){r["\u0275setClassMetadata"](Wn,[{type:r.Injectable}],(function(){return[{type:Nn.a},{type:f.TranslateService},{type:i.DatePipe},{type:a.Router}]}),null)}();var Hn=n("lJxs");function Kn(e,t){if(1&e){var n=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"button",1),r["\u0275\u0275listener"]("click",(function(e){return r["\u0275\u0275restoreView"](n),r["\u0275\u0275nextContext"]().onEntityAction(e,"loginAsUser")})),r["\u0275\u0275pipe"](1,"async"),r["\u0275\u0275text"](2),r["\u0275\u0275pipe"](3,"translate"),r["\u0275\u0275elementEnd"]()}if(2&e){var i=r["\u0275\u0275nextContext"]();r["\u0275\u0275property"]("disabled",r["\u0275\u0275pipeBind1"](1,3,i.isLoading$))("fxShow",!i.isEdit),r["\u0275\u0275advance"](2),r["\u0275\u0275textInterpolate1"](" ",r["\u0275\u0275pipeBind1"](3,5,(null==i.entity?null:i.entity.authority)===i.authority.TENANT_ADMIN?"user.login-as-tenant-admin":"user.login-as-customer-user")," ")}}function Jn(e,t){1&e&&(r["\u0275\u0275elementStart"](0,"mat-error"),r["\u0275\u0275text"](1),r["\u0275\u0275pipe"](2,"translate"),r["\u0275\u0275elementEnd"]()),2&e&&(r["\u0275\u0275advance"](1),r["\u0275\u0275textInterpolate1"](" ",r["\u0275\u0275pipeBind1"](2,1,"user.invalid-email-format")," "))}function Yn(e,t){1&e&&(r["\u0275\u0275elementStart"](0,"mat-error"),r["\u0275\u0275text"](1),r["\u0275\u0275pipe"](2,"translate"),r["\u0275\u0275elementEnd"]()),2&e&&(r["\u0275\u0275advance"](1),r["\u0275\u0275textInterpolate1"](" ",r["\u0275\u0275pipeBind1"](2,1,"user.email-required")," "))}function Xn(e,t){if(1&e&&(r["\u0275\u0275elementStart"](0,"section",15),r["\u0275\u0275elementStart"](1,"section",16),r["\u0275\u0275element"](2,"tb-dashboard-autocomplete",17),r["\u0275\u0275pipe"](3,"translate"),r["\u0275\u0275elementStart"](4,"mat-checkbox",18),r["\u0275\u0275text"](5),r["\u0275\u0275pipe"](6,"translate"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](7,"section",16),r["\u0275\u0275element"](8,"tb-dashboard-autocomplete",19),r["\u0275\u0275pipe"](9,"translate"),r["\u0275\u0275elementStart"](10,"mat-checkbox",20),r["\u0275\u0275text"](11),r["\u0275\u0275pipe"](12,"translate"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()),2&e){var n=r["\u0275\u0275nextContext"]();r["\u0275\u0275advance"](2),r["\u0275\u0275propertyInterpolate"]("placeholder",r["\u0275\u0275pipeBind1"](3,12,"user.default-dashboard")),r["\u0275\u0275property"]("dashboardsScope",(null==n.entity?null:n.entity.authority)===n.authority.TENANT_ADMIN?"tenant":"customer")("tenantId",null==n.entity||null==n.entity.tenantId?null:n.entity.tenantId.id)("customerId",null==n.entity||null==n.entity.customerId?null:n.entity.customerId.id)("selectFirstDashboard",!1),r["\u0275\u0275advance"](3),r["\u0275\u0275textInterpolate1"](" ",r["\u0275\u0275pipeBind1"](6,14,"user.always-fullscreen")," "),r["\u0275\u0275advance"](3),r["\u0275\u0275propertyInterpolate"]("placeholder",r["\u0275\u0275pipeBind1"](9,16,"dashboard.home-dashboard")),r["\u0275\u0275property"]("dashboardsScope",(null==n.entity?null:n.entity.authority)===n.authority.TENANT_ADMIN?"tenant":"customer")("tenantId",null==n.entity||null==n.entity.tenantId?null:n.entity.tenantId.id)("customerId",null==n.entity||null==n.entity.customerId?null:n.entity.customerId.id)("selectFirstDashboard",!1),r["\u0275\u0275advance"](3),r["\u0275\u0275textInterpolate1"](" ",r["\u0275\u0275pipeBind1"](12,18,"dashboard.home-dashboard-hide-toolbar")," ")}}var Qn=function(e){function t(t,n,r,i){var a=e.call(this,t,i,n,r)||this;return a.store=t,a.entityValue=n,a.entitiesTableConfigValue=r,a.fb=i,a.authority=$.a,a.loginAsUserEnabled$=a.store.pipe(Object(m.select)(z.c),Object(Hn.a)((function(e){return e.userTokenAccessEnabled}))),a}return Object(o.d)(t,e),t.prototype.hideDelete=function(){return!!this.entitiesTableConfig&&!this.entitiesTableConfig.deleteEnabled(this.entity)},t.prototype.isUserCredentialsEnabled=function(){return!0===this.entity.additionalInfo.userCredentialsEnabled},t.prototype.isUserCredentialPresent=function(){return this.entity&&this.entity.additionalInfo&&Object(p.o)(this.entity.additionalInfo.userCredentialsEnabled)},t.prototype.buildForm=function(e){return this.fb.group({email:[e?e.email:"",[s.Validators.required,s.Validators.email]],firstName:[e?e.firstName:""],lastName:[e?e.lastName:""],additionalInfo:this.fb.group({description:[e&&e.additionalInfo?e.additionalInfo.description:""],defaultDashboardId:[e&&e.additionalInfo?e.additionalInfo.defaultDashboardId:null],defaultDashboardFullscreen:[!(!e||!e.additionalInfo)&&e.additionalInfo.defaultDashboardFullscreen],homeDashboardId:[e&&e.additionalInfo?e.additionalInfo.homeDashboardId:null],homeDashboardHideToolbar:[!(e&&e.additionalInfo&&Object(p.o)(e.additionalInfo.homeDashboardHideToolbar))||e.additionalInfo.homeDashboardHideToolbar]})})},t.prototype.updateForm=function(e){this.entityForm.patchValue({email:e.email}),this.entityForm.patchValue({firstName:e.firstName}),this.entityForm.patchValue({lastName:e.lastName}),this.entityForm.patchValue({additionalInfo:{description:e.additionalInfo?e.additionalInfo.description:""}}),this.entityForm.patchValue({additionalInfo:{defaultDashboardId:e.additionalInfo?e.additionalInfo.defaultDashboardId:null}}),this.entityForm.patchValue({additionalInfo:{defaultDashboardFullscreen:!!e.additionalInfo&&e.additionalInfo.defaultDashboardFullscreen}}),this.entityForm.patchValue({additionalInfo:{homeDashboardId:e.additionalInfo?e.additionalInfo.homeDashboardId:null}}),this.entityForm.patchValue({additionalInfo:{homeDashboardHideToolbar:!e.additionalInfo||!Object(p.o)(e.additionalInfo.homeDashboardHideToolbar)||e.additionalInfo.homeDashboardHideToolbar}})},t.\u0275fac=function(e){return new(e||t)(r["\u0275\u0275directiveInject"](m.Store),r["\u0275\u0275directiveInject"]("entity",8),r["\u0275\u0275directiveInject"]("entitiesTableConfig",8),r["\u0275\u0275directiveInject"](s.FormBuilder))},t.\u0275cmp=r["\u0275\u0275defineComponent"]({type:t,selectors:[["tb-user"]],features:[r["\u0275\u0275InheritDefinitionFeature"]],decls:47,vars:45,consts:[["fxLayout.xs","column",1,"tb-details-buttons"],["mat-raised-button","","color","primary",3,"disabled","fxShow","click"],["mat-raised-button","","color","primary",3,"disabled","fxShow","click",4,"ngIf"],["fxLayout","column",1,"mat-padding"],[3,"formGroup"],[3,"disabled"],[1,"mat-block"],["translate",""],["matInput","","formControlName","email","required",""],[4,"ngIf"],["matInput","","formControlName","firstName"],["matInput","","formControlName","lastName"],["formGroupName","additionalInfo","fxLayout","column"],["matInput","","formControlName","description","rows","2"],["class","tb-default-dashboard","fxFlex","","fxLayout","column",4,"ngIf"],["fxFlex","","fxLayout","column",1,"tb-default-dashboard"],["fxFlex","","fxLayout","column","fxLayout.gt-sm","row"],["fxFlex","","formControlName","defaultDashboardId",3,"placeholder","dashboardsScope","tenantId","customerId","selectFirstDashboard"],["fxFlex","","formControlName","defaultDashboardFullscreen"],["fxFlex","","formControlName","homeDashboardId",3,"placeholder","dashboardsScope","tenantId","customerId","selectFirstDashboard"],["fxFlex","","formControlName","homeDashboardHideToolbar"]],template:function(e,t){1&e&&(r["\u0275\u0275elementStart"](0,"div",0),r["\u0275\u0275elementStart"](1,"button",1),r["\u0275\u0275listener"]("click",(function(e){return t.onEntityAction(e,"disableAccount")})),r["\u0275\u0275pipe"](2,"async"),r["\u0275\u0275text"](3),r["\u0275\u0275pipe"](4,"translate"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](5,"button",1),r["\u0275\u0275listener"]("click",(function(e){return t.onEntityAction(e,"enableAccount")})),r["\u0275\u0275pipe"](6,"async"),r["\u0275\u0275text"](7),r["\u0275\u0275pipe"](8,"translate"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](9,"button",1),r["\u0275\u0275listener"]("click",(function(e){return t.onEntityAction(e,"displayActivationLink")})),r["\u0275\u0275pipe"](10,"async"),r["\u0275\u0275text"](11),r["\u0275\u0275pipe"](12,"translate"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](13,"button",1),r["\u0275\u0275listener"]("click",(function(e){return t.onEntityAction(e,"resendActivation")})),r["\u0275\u0275pipe"](14,"async"),r["\u0275\u0275text"](15),r["\u0275\u0275pipe"](16,"translate"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275template"](17,Kn,4,7,"button",2),r["\u0275\u0275pipe"](18,"async"),r["\u0275\u0275elementStart"](19,"button",1),r["\u0275\u0275listener"]("click",(function(e){return t.onEntityAction(e,"delete")})),r["\u0275\u0275pipe"](20,"async"),r["\u0275\u0275text"](21),r["\u0275\u0275pipe"](22,"translate"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](23,"div",3),r["\u0275\u0275elementStart"](24,"form",4),r["\u0275\u0275elementStart"](25,"fieldset",5),r["\u0275\u0275pipe"](26,"async"),r["\u0275\u0275elementStart"](27,"mat-form-field",6),r["\u0275\u0275elementStart"](28,"mat-label",7),r["\u0275\u0275text"](29,"user.email"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275element"](30,"input",8),r["\u0275\u0275template"](31,Jn,3,3,"mat-error",9),r["\u0275\u0275template"](32,Yn,3,3,"mat-error",9),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](33,"mat-form-field",6),r["\u0275\u0275elementStart"](34,"mat-label",7),r["\u0275\u0275text"](35,"user.first-name"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275element"](36,"input",10),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](37,"mat-form-field",6),r["\u0275\u0275elementStart"](38,"mat-label",7),r["\u0275\u0275text"](39,"user.last-name"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275element"](40,"input",11),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](41,"div",12),r["\u0275\u0275elementStart"](42,"mat-form-field",6),r["\u0275\u0275elementStart"](43,"mat-label",7),r["\u0275\u0275text"](44,"user.description"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275element"](45,"textarea",13),r["\u0275\u0275elementEnd"](),r["\u0275\u0275template"](46,Xn,13,20,"section",14),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()),2&e&&(r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("disabled",r["\u0275\u0275pipeBind1"](2,21,t.isLoading$))("fxShow",!t.isEdit&&t.isUserCredentialPresent()&&t.isUserCredentialsEnabled()),r["\u0275\u0275advance"](2),r["\u0275\u0275textInterpolate1"](" ",r["\u0275\u0275pipeBind1"](4,23,"user.disable-account")," "),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("disabled",r["\u0275\u0275pipeBind1"](6,25,t.isLoading$))("fxShow",!t.isEdit&&t.isUserCredentialPresent()&&!t.isUserCredentialsEnabled()),r["\u0275\u0275advance"](2),r["\u0275\u0275textInterpolate1"](" ",r["\u0275\u0275pipeBind1"](8,27,"user.enable-account")," "),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("disabled",r["\u0275\u0275pipeBind1"](10,29,t.isLoading$))("fxShow",!t.isEdit),r["\u0275\u0275advance"](2),r["\u0275\u0275textInterpolate1"](" ",r["\u0275\u0275pipeBind1"](12,31,"user.display-activation-link")," "),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("disabled",r["\u0275\u0275pipeBind1"](14,33,t.isLoading$))("fxShow",!t.isEdit),r["\u0275\u0275advance"](2),r["\u0275\u0275textInterpolate1"](" ",r["\u0275\u0275pipeBind1"](16,35,"user.resend-activation")," "),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("ngIf",r["\u0275\u0275pipeBind1"](18,37,t.loginAsUserEnabled$)),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("disabled",r["\u0275\u0275pipeBind1"](20,39,t.isLoading$))("fxShow",!t.hideDelete()&&!t.isEdit),r["\u0275\u0275advance"](2),r["\u0275\u0275textInterpolate1"](" ",r["\u0275\u0275pipeBind1"](22,41,"user.delete")," "),r["\u0275\u0275advance"](3),r["\u0275\u0275property"]("formGroup",t.entityForm),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("disabled",r["\u0275\u0275pipeBind1"](26,43,t.isLoading$)||!t.isEdit),r["\u0275\u0275advance"](6),r["\u0275\u0275property"]("ngIf",t.entityForm.get("email").hasError("email")),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",t.entityForm.get("email").hasError("required")),r["\u0275\u0275advance"](14),r["\u0275\u0275property"]("ngIf",null==t.entity?null:t.entity.id))},directives:[h.f,w.MatButton,ve.d,i.NgIf,s["\u0275angular_packages_forms_forms_y"],s.NgControlStatusGroup,s.FormGroupDirective,y.MatFormField,y.MatLabel,f.TranslateDirective,v.MatInput,s.DefaultValueAccessor,s.NgControlStatus,s.FormControlName,s.RequiredValidator,s.FormGroupName,y.MatError,h.b,Pt.a,ge.MatCheckbox],pipes:[i.AsyncPipe,f.TranslatePipe],styles:["@media screen and (min-width:960px){[_nghost-%COMP%]   .tb-default-dashboard[_ngcontent-%COMP%]   tb-dashboard-autocomplete[_ngcontent-%COMP%]{padding-right:12px}}@media screen and (max-width:959px){[_nghost-%COMP%]   .tb-default-dashboard[_ngcontent-%COMP%]   tb-dashboard-autocomplete[_ngcontent-%COMP%]{padding-bottom:12px}}@media screen and (min-width:960px){[_nghost-%COMP%]   .tb-default-dashboard[_ngcontent-%COMP%]   mat-checkbox[_ngcontent-%COMP%]{margin-top:16px}}"]}),t}(Cn.a);!function(){r["\u0275setClassMetadata"](Qn,[{type:r.Component,args:[{selector:"tb-user",templateUrl:"./user.component.html",styleUrls:["./user.component.scss"]}]}],(function(){return[{type:m.Store},{type:void 0,decorators:[{type:r.Optional},{type:r.Inject,args:["entity"]}]},{type:In.d,decorators:[{type:r.Optional},{type:r.Inject,args:["entitiesTableConfig"]}]},{type:s.FormBuilder}]}),null)}();var Zn=n("ktVl"),er=n("vkgz"),tr=n("8Mhd"),nr=n("KJJU");function rr(e,t){1&e&&r["\u0275\u0275element"](0,"mat-progress-bar",17)}function ir(e,t){1&e&&r["\u0275\u0275element"](0,"div",18)}var ar=function(e){return{activationLink:e}},or=function(e){function t(t,n,r,i,a){var o=e.call(this,t,n,i)||this;return o.store=t,o.router=n,o.data=r,o.dialogRef=i,o.translate=a,o.activationLink=o.data.activationLink,o}return Object(o.d)(t,e),t.prototype.ngOnInit=function(){},t.prototype.close=function(){this.dialogRef.close()},t.prototype.onActivationLinkCopied=function(){this.store.dispatch(new u.b({message:this.translate.instant("user.activation-link-copied-message"),type:"success",target:"activationLinkDialogContent",duration:1200,verticalPosition:"bottom",horizontalPosition:"left"}))},t.\u0275fac=function(e){return new(e||t)(r["\u0275\u0275directiveInject"](m.Store),r["\u0275\u0275directiveInject"](a.Router),r["\u0275\u0275directiveInject"](ft.MAT_DIALOG_DATA),r["\u0275\u0275directiveInject"](ft.MatDialogRef),r["\u0275\u0275directiveInject"](f.TranslateService))},t.\u0275cmp=r["\u0275\u0275defineComponent"]({type:t,selectors:[["tb-activation-link-dialog"]],features:[r["\u0275\u0275InheritDefinitionFeature"]],decls:28,vars:23,consts:[[2,"min-width","400px","position","relative"],["color","primary"],["translate",""],["fxFlex",""],["mat-button","","mat-icon-button","","type","button",3,"click"],[1,"material-icons"],["color","warn","mode","indeterminate",4,"ngIf"],["style","height: 4px;",4,"ngIf"],["mat-dialog-content","","tb-toast","","toastTarget","activationLinkDialogContent"],["fxLayout","column",1,"mat-content"],[3,"innerHTML"],["fxLayout","row","fxLayoutAlign","start center"],["fxFlex","",1,"tb-highlight"],["mat-icon-button","","color","primary","ngxClipboard","","matTooltipPosition","above",3,"cbContent","matTooltip","cbOnSuccess"],["svgIcon","mdi:clipboard-arrow-left"],["mat-dialog-actions","","fxLayoutAlign","end center"],["mat-button","","color","primary","type","button","cdkFocusInitial","",3,"disabled","click"],["color","warn","mode","indeterminate"],[2,"height","4px"]],template:function(e,t){1&e&&(r["\u0275\u0275elementStart"](0,"form",0),r["\u0275\u0275elementStart"](1,"mat-toolbar",1),r["\u0275\u0275elementStart"](2,"h2",2),r["\u0275\u0275text"](3,"user.activation-link"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275element"](4,"span",3),r["\u0275\u0275elementStart"](5,"button",4),r["\u0275\u0275listener"]("click",(function(){return t.close()})),r["\u0275\u0275elementStart"](6,"mat-icon",5),r["\u0275\u0275text"](7,"close"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275template"](8,rr,1,0,"mat-progress-bar",6),r["\u0275\u0275pipe"](9,"async"),r["\u0275\u0275template"](10,ir,1,0,"div",7),r["\u0275\u0275pipe"](11,"async"),r["\u0275\u0275elementStart"](12,"div",8),r["\u0275\u0275elementStart"](13,"div",9),r["\u0275\u0275element"](14,"span",10),r["\u0275\u0275pipe"](15,"translate"),r["\u0275\u0275elementStart"](16,"div",11),r["\u0275\u0275elementStart"](17,"pre",12),r["\u0275\u0275elementStart"](18,"code"),r["\u0275\u0275text"](19),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](20,"button",13),r["\u0275\u0275listener"]("cbOnSuccess",(function(){return t.onActivationLinkCopied()})),r["\u0275\u0275pipe"](21,"translate"),r["\u0275\u0275element"](22,"mat-icon",14),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](23,"div",15),r["\u0275\u0275elementStart"](24,"button",16),r["\u0275\u0275listener"]("click",(function(){return t.close()})),r["\u0275\u0275pipe"](25,"async"),r["\u0275\u0275text"](26),r["\u0275\u0275pipe"](27,"translate"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()),2&e&&(r["\u0275\u0275advance"](8),r["\u0275\u0275property"]("ngIf",r["\u0275\u0275pipeBind1"](9,8,t.isLoading$)),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("ngIf",!r["\u0275\u0275pipeBind1"](11,10,t.isLoading$)),r["\u0275\u0275advance"](4),r["\u0275\u0275property"]("innerHTML",r["\u0275\u0275pipeBind2"](15,12,"user.activation-link-text",r["\u0275\u0275pureFunction1"](21,ar,t.activationLink)),r["\u0275\u0275sanitizeHtml"]),r["\u0275\u0275advance"](5),r["\u0275\u0275textInterpolate"](t.activationLink),r["\u0275\u0275advance"](1),r["\u0275\u0275propertyInterpolate"]("cbContent",t.activationLink),r["\u0275\u0275propertyInterpolate"]("matTooltip",r["\u0275\u0275pipeBind1"](21,15,"user.copy-activation-link")),r["\u0275\u0275advance"](4),r["\u0275\u0275property"]("disabled",r["\u0275\u0275pipeBind1"](25,17,t.isLoading$)),r["\u0275\u0275advance"](2),r["\u0275\u0275textInterpolate1"](" ",r["\u0275\u0275pipeBind1"](27,19,"action.ok")," "))},directives:[s["\u0275angular_packages_forms_forms_y"],s.NgControlStatusGroup,s.NgForm,ht.MatToolbar,f.TranslateDirective,h.b,w.MatButton,be.MatIcon,i.NgIf,ft.MatDialogContent,bt.b,h.f,h.e,ye.a,he.MatTooltip,ft.MatDialogActions,C.MatProgressBar],pipes:[i.AsyncPipe,f.TranslatePipe],encapsulation:2}),t}(gt.a);!function(){r["\u0275setClassMetadata"](or,[{type:r.Component,args:[{selector:"tb-activation-link-dialog",templateUrl:"./activation-link-dialog.component.html"}]}],(function(){return[{type:m.Store},{type:a.Router},{type:void 0,decorators:[{type:r.Inject,args:[ft.MAT_DIALOG_DATA]}]},{type:ft.MatDialogRef},{type:f.TranslateService}]}),null)}();var lr=n("KMMH");function sr(e,t){1&e&&r["\u0275\u0275element"](0,"mat-progress-bar",16)}function dr(e,t){1&e&&r["\u0275\u0275element"](0,"div",17)}function cr(e,t){if(1&e&&(r["\u0275\u0275elementStart"](0,"mat-option",18),r["\u0275\u0275text"](1),r["\u0275\u0275pipe"](2,"translate"),r["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit,i=r["\u0275\u0275nextContext"]();r["\u0275\u0275property"]("value",n),r["\u0275\u0275advance"](1),r["\u0275\u0275textInterpolate1"](" ",r["\u0275\u0275pipeBind1"](2,2,i.activationMethodTranslations.get(i.activationMethodEnum[n]))," ")}}var ur=function(){return{standalone:!0}},pr=function(e){function t(t,n,r,i,a,o){var l=e.call(this,t,n,i)||this;return l.store=t,l.router=n,l.data=r,l.dialogRef=i,l.userService=a,l.dialog=o,l.activationMethods=Object.keys(nr.a),l.activationMethodEnum=nr.a,l.activationMethodTranslations=nr.b,l.activationMethod=nr.a.DISPLAY_ACTIVATION_LINK,l}return Object(o.d)(t,e),t.prototype.ngOnInit=function(){this.user={},this.userComponent.isEdit=!0,this.userComponent.entity=this.user,this.detailsForm=this.userComponent.entityForm},t.prototype.cancel=function(){this.dialogRef.close(null)},t.prototype.add=function(){var e=this;if(this.detailsForm.valid){this.user=Object(o.a)(Object(o.a)({},this.user),this.userComponent.entityForm.value),this.user.authority=this.data.authority,this.user.tenantId=new lr.a(this.data.tenantId),this.user.customerId=new tr.a(this.data.customerId);var t=this.activationMethod===nr.a.SEND_ACTIVATION_MAIL;this.userService.saveUser(this.user,t).subscribe((function(t){e.activationMethod===nr.a.DISPLAY_ACTIVATION_LINK?e.userService.getActivationLink(t.id.id).subscribe((function(n){e.displayActivationLink(n).subscribe((function(){e.dialogRef.close(t)}))})):e.dialogRef.close(t)}))}},t.prototype.displayActivationLink=function(e){return this.dialog.open(or,{disableClose:!0,panelClass:["tb-dialog","tb-fullscreen-dialog"],data:{activationLink:e}}).afterClosed()},t.\u0275fac=function(e){return new(e||t)(r["\u0275\u0275directiveInject"](m.Store),r["\u0275\u0275directiveInject"](a.Router),r["\u0275\u0275directiveInject"](ft.MAT_DIALOG_DATA),r["\u0275\u0275directiveInject"](ft.MatDialogRef),r["\u0275\u0275directiveInject"](rn.a),r["\u0275\u0275directiveInject"](ft.MatDialog))},t.\u0275cmp=r["\u0275\u0275defineComponent"]({type:t,selectors:[["tb-add-user-dialog"]],viewQuery:function(e,t){var n;(1&e&&r["\u0275\u0275staticViewQuery"](Qn,!0),2&e)&&(r["\u0275\u0275queryRefresh"](n=r["\u0275\u0275loadQuery"]())&&(t.userComponent=n.first))},features:[r["\u0275\u0275InheritDefinitionFeature"]],decls:29,vars:23,consts:[[2,"min-width","450px",3,"ngSubmit"],["color","primary"],["translate",""],["fxFlex",""],[3,"tb-help"],["mat-icon-button","","type","button",3,"click"],[1,"material-icons"],["color","warn","mode","indeterminate",4,"ngIf"],["style","height: 4px;",4,"ngIf"],["mat-dialog-content",""],[1,"mat-block"],[3,"ngModelOptions","ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["mat-dialog-actions","","fxLayoutAlign","end center"],["mat-button","","color","primary","type","button","cdkFocusInitial","",3,"disabled","click"],["mat-raised-button","","color","primary","type","submit",3,"disabled"],["color","warn","mode","indeterminate"],[2,"height","4px"],[3,"value"]],template:function(e,t){1&e&&(r["\u0275\u0275elementStart"](0,"form",0),r["\u0275\u0275listener"]("ngSubmit",(function(){return t.add()})),r["\u0275\u0275elementStart"](1,"mat-toolbar",1),r["\u0275\u0275elementStart"](2,"h2",2),r["\u0275\u0275text"](3,"user.add"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275element"](4,"span",3),r["\u0275\u0275element"](5,"div",4),r["\u0275\u0275elementStart"](6,"button",5),r["\u0275\u0275listener"]("click",(function(){return t.cancel()})),r["\u0275\u0275elementStart"](7,"mat-icon",6),r["\u0275\u0275text"](8,"close"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275template"](9,sr,1,0,"mat-progress-bar",7),r["\u0275\u0275pipe"](10,"async"),r["\u0275\u0275template"](11,dr,1,0,"div",8),r["\u0275\u0275pipe"](12,"async"),r["\u0275\u0275elementStart"](13,"div",9),r["\u0275\u0275element"](14,"tb-user"),r["\u0275\u0275elementStart"](15,"mat-form-field",10),r["\u0275\u0275elementStart"](16,"mat-label",2),r["\u0275\u0275text"](17,"user.activation-method"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](18,"mat-select",11),r["\u0275\u0275listener"]("ngModelChange",(function(e){return t.activationMethod=e})),r["\u0275\u0275template"](19,cr,3,4,"mat-option",12),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](20,"div",13),r["\u0275\u0275elementStart"](21,"button",14),r["\u0275\u0275listener"]("click",(function(){return t.cancel()})),r["\u0275\u0275pipe"](22,"async"),r["\u0275\u0275text"](23),r["\u0275\u0275pipe"](24,"translate"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](25,"button",15),r["\u0275\u0275pipe"](26,"async"),r["\u0275\u0275text"](27),r["\u0275\u0275pipe"](28,"translate"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()),2&e&&(r["\u0275\u0275advance"](5),r["\u0275\u0275property"]("tb-help","user"),r["\u0275\u0275advance"](4),r["\u0275\u0275property"]("ngIf",r["\u0275\u0275pipeBind1"](10,10,t.isLoading$)),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("ngIf",!r["\u0275\u0275pipeBind1"](12,12,t.isLoading$)),r["\u0275\u0275advance"](7),r["\u0275\u0275property"]("ngModelOptions",r["\u0275\u0275pureFunction0"](22,ur))("ngModel",t.activationMethod),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngForOf",t.activationMethods),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("disabled",r["\u0275\u0275pipeBind1"](22,14,t.isLoading$)),r["\u0275\u0275advance"](2),r["\u0275\u0275textInterpolate1"](" ",r["\u0275\u0275pipeBind1"](24,16,"action.cancel")," "),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("disabled",r["\u0275\u0275pipeBind1"](26,18,t.isLoading$)||t.detailsForm.invalid||!t.detailsForm.dirty),r["\u0275\u0275advance"](2),r["\u0275\u0275textInterpolate1"](" ",r["\u0275\u0275pipeBind1"](28,20,"action.add")," "))},directives:[s["\u0275angular_packages_forms_forms_y"],s.NgControlStatusGroup,s.NgForm,ht.MatToolbar,f.TranslateDirective,h.b,b.a,w.MatButton,be.MatIcon,i.NgIf,ft.MatDialogContent,Qn,y.MatFormField,y.MatLabel,x.MatSelect,s.NgControlStatus,s.NgModel,i.NgForOf,ft.MatDialogActions,h.e,C.MatProgressBar,I.MatOption],pipes:[i.AsyncPipe,f.TranslatePipe],styles:["[_nghost-%COMP%]     .mat-padding{padding:0}"]}),t}(gt.a);!function(){r["\u0275setClassMetadata"](pr,[{type:r.Component,args:[{selector:"tb-add-user-dialog",templateUrl:"./add-user-dialog.component.html",styleUrls:["./add-user-dialog.component.scss"]}]}],(function(){return[{type:m.Store},{type:a.Router},{type:void 0,decorators:[{type:r.Inject,args:[ft.MAT_DIALOG_DATA]}]},{type:ft.MatDialogRef},{type:rn.a},{type:ft.MatDialog}]}),{userComponent:[{type:r.ViewChild,args:[Qn,{static:!0}]}]})}();var mr=n("oKkZ"),fr=n("igfJ");function gr(e,t){if(1&e&&(r["\u0275\u0275elementStart"](0,"mat-tab",1,2),r["\u0275\u0275pipe"](2,"translate"),r["\u0275\u0275element"](3,"tb-attribute-table",3),r["\u0275\u0275elementEnd"]()),2&e){var n=r["\u0275\u0275reference"](1),i=r["\u0275\u0275nextContext"]();r["\u0275\u0275propertyInterpolate"]("label",r["\u0275\u0275pipeBind1"](2,5,"attribute.attributes")),r["\u0275\u0275advance"](3),r["\u0275\u0275property"]("defaultAttributeScope",i.attributeScopes.SERVER_SCOPE)("active",n.isActive)("entityId",i.entity.id)("entityName",i.entity.name)}}function hr(e,t){if(1&e&&(r["\u0275\u0275elementStart"](0,"mat-tab",1,4),r["\u0275\u0275pipe"](2,"translate"),r["\u0275\u0275element"](3,"tb-attribute-table",5),r["\u0275\u0275elementEnd"]()),2&e){var n=r["\u0275\u0275reference"](1),i=r["\u0275\u0275nextContext"]();r["\u0275\u0275propertyInterpolate"]("label",r["\u0275\u0275pipeBind1"](2,5,"attribute.latest-telemetry")),r["\u0275\u0275advance"](3),r["\u0275\u0275property"]("defaultAttributeScope",i.latestTelemetryTypes.LATEST_TELEMETRY)("active",n.isActive)("entityId",i.entity.id)("entityName",i.entity.name)}}function br(e,t){if(1&e&&(r["\u0275\u0275elementStart"](0,"mat-tab",1,6),r["\u0275\u0275pipe"](2,"translate"),r["\u0275\u0275element"](3,"tb-audit-log-table",7),r["\u0275\u0275elementEnd"]()),2&e){var n=r["\u0275\u0275reference"](1),i=r["\u0275\u0275nextContext"]();r["\u0275\u0275propertyInterpolate"]("label",r["\u0275\u0275pipeBind1"](2,4,"audit-log.audit-logs")),r["\u0275\u0275advance"](3),r["\u0275\u0275property"]("active",n.isActive)("auditLogMode",i.auditLogModes.USER)("userId",i.entity.id)}}var yr=function(e){function t(t){var n=e.call(this,t)||this;return n.store=t,n}return Object(o.d)(t,e),t.prototype.ngOnInit=function(){e.prototype.ngOnInit.call(this)},t.\u0275fac=function(e){return new(e||t)(r["\u0275\u0275directiveInject"](m.Store))},t.\u0275cmp=r["\u0275\u0275defineComponent"]({type:t,selectors:[["tb-user-tabs"]],features:[r["\u0275\u0275InheritDefinitionFeature"]],decls:3,vars:3,consts:[[3,"label",4,"ngIf"],[3,"label"],["attributesTab","matTab"],[3,"defaultAttributeScope","active","entityId","entityName"],["telemetryTab","matTab"],["disableAttributeScopeSelection","",3,"defaultAttributeScope","active","entityId","entityName"],["auditLogsTab","matTab"],["detailsMode","true",3,"active","auditLogMode","userId"]],template:function(e,t){1&e&&(r["\u0275\u0275template"](0,gr,4,7,"mat-tab",0),r["\u0275\u0275template"](1,hr,4,7,"mat-tab",0),r["\u0275\u0275template"](2,br,4,6,"mat-tab",0)),2&e&&(r["\u0275\u0275property"]("ngIf",t.entity),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",t.entity),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",t.entity&&t.authUser.authority===t.authorities.TENANT_ADMIN))},directives:[i.NgIf,xe.MatTab,On.a,fr.a],pipes:[f.TranslatePipe],encapsulation:2}),t}(Ln.a);!function(){r["\u0275setClassMetadata"](yr,[{type:r.Component,args:[{selector:"tb-user-tabs",templateUrl:"./user-tabs.component.html",styleUrls:[]}]}],(function(){return[{type:m.Store}]}),null)}();var vr=function(){function e(e,t,n,r,i,a,o,l){var s=this;this.store=e,this.userService=t,this.authService=n,this.tenantService=r,this.customerService=i,this.translate=a,this.datePipe=o,this.dialog=l,this.config=new In.d,this.config.entityType=kn.b.USER,this.config.entityComponent=Qn,this.config.entityTabsComponent=yr,this.config.entityTranslations=kn.d.get(kn.b.USER),this.config.entityResources=kn.c.get(kn.b.USER),this.config.columns.push(new In.a("createdTime","common.created-time",this.datePipe,"150px"),new In.c("firstName","user.first-name","33%"),new In.c("lastName","user.last-name","33%"),new In.c("email","user.email","33%")),this.config.deleteEnabled=function(e){return e&&e.id&&e.id.id!==s.authUser.id.id},this.config.deleteEntityTitle=function(e){return s.translate.instant("user.delete-user-title",{userEmail:e.email})},this.config.deleteEntityContent=function(){return s.translate.instant("user.delete-user-text")},this.config.deleteEntitiesTitle=function(e){return s.translate.instant("user.delete-users-title",{count:e})},this.config.deleteEntitiesContent=function(){return s.translate.instant("user.delete-users-text")},this.config.loadEntity=function(e){return s.userService.getUser(e.id)},this.config.saveEntity=function(e){return s.saveUser(e)},this.config.deleteEntity=function(e){return s.userService.deleteUser(e.id)},this.config.onEntityAction=function(e){return s.onUserAction(e)},this.config.addEntity=function(){return s.addUser()}}return e.prototype.resolve=function(e){var t=this,n=e.params;return this.store.pipe(Object(m.select)(z.c),Object(G.a)(1)).pipe(Object(er.a)((function(e){t.authUser=e.userDetails,t.authority=n.tenantId?$.a.TENANT_ADMIN:$.a.CUSTOMER_USER,t.authority===$.a.TENANT_ADMIN?(t.tenantId=n.tenantId,t.customerId=mr.a,t.config.entitiesFetchFunction=function(e){return t.userService.getTenantAdmins(t.tenantId,e)}):(t.tenantId=t.authUser.tenantId.id,t.customerId=n.customerId,t.config.entitiesFetchFunction=function(e){return t.userService.getCustomerUsers(t.customerId,e)}),t.updateActionCellDescriptors(e)})),Object($n.b)((function(){return t.authority===$.a.TENANT_ADMIN?t.tenantService.getTenant(t.tenantId):t.customerService.getCustomer(t.customerId)})),Object(Hn.a)((function(e){return t.authority===$.a.TENANT_ADMIN?t.config.tableTitle=e.title+": "+t.translate.instant("user.tenant-admins"):t.config.tableTitle=e.title+": "+t.translate.instant("user.customer-users"),t.config})))},e.prototype.updateActionCellDescriptors=function(e){var t=this;this.config.cellActionDescriptors.splice(0),e.userTokenAccessEnabled&&this.config.cellActionDescriptors.push({name:this.authority===$.a.TENANT_ADMIN?this.translate.instant("user.login-as-tenant-admin"):this.translate.instant("user.login-as-customer-user"),mdiIcon:"mdi:login",isEnabled:function(){return!0},onAction:function(e,n){return t.loginAsUser(e,n)}})},e.prototype.saveUser=function(e){return e.tenantId=new lr.a(this.tenantId),e.customerId=new tr.a(this.customerId),e.authority=this.authority,this.userService.saveUser(e)},e.prototype.addUser=function(){return this.dialog.open(pr,{disableClose:!0,panelClass:["tb-dialog","tb-fullscreen-dialog"],data:{tenantId:this.tenantId,customerId:this.customerId,authority:this.authority}}).afterClosed()},e.prototype.loginAsUser=function(e,t){e&&e.stopPropagation(),this.authService.loginAsUser(t.id.id).subscribe()},e.prototype.displayActivationLink=function(e,t){var n=this;e&&e.stopPropagation(),this.userService.getActivationLink(t.id.id).subscribe((function(e){n.dialog.open(or,{disableClose:!0,panelClass:["tb-dialog","tb-fullscreen-dialog"],data:{activationLink:e}})}))},e.prototype.resendActivation=function(e,t){var n=this;e&&e.stopPropagation(),this.userService.sendActivationEmail(t.email).subscribe((function(){n.store.dispatch(new u.b({message:n.translate.instant("user.activation-email-sent-message"),type:"success"}))}))},e.prototype.setUserCredentialsEnabled=function(e,t,n){var r=this;e&&e.stopPropagation(),this.userService.setUserCredentialsEnabled(t.id.id,n).subscribe((function(){t.additionalInfo||(t.additionalInfo={}),t.additionalInfo.userCredentialsEnabled=n,r.store.dispatch(new u.b({message:r.translate.instant(n?"user.enable-account-message":"user.disable-account-message"),type:"success"}))}))},e.prototype.onUserAction=function(e){switch(e.action){case"loginAsUser":return this.loginAsUser(e.event,e.entity),!0;case"displayActivationLink":return this.displayActivationLink(e.event,e.entity),!0;case"resendActivation":return this.resendActivation(e.event,e.entity),!0;case"disableAccount":return this.setUserCredentialsEnabled(e.event,e.entity,!1),!0;case"enableAccount":return this.setUserCredentialsEnabled(e.event,e.entity,!0),!0}return!1},e.\u0275fac=function(t){return new(t||e)(r["\u0275\u0275inject"](m.Store),r["\u0275\u0275inject"](rn.a),r["\u0275\u0275inject"](sn.a),r["\u0275\u0275inject"](Nn.a),r["\u0275\u0275inject"](Zn.a),r["\u0275\u0275inject"](f.TranslateService),r["\u0275\u0275inject"](i.DatePipe),r["\u0275\u0275inject"](ft.MatDialog))},e.\u0275prov=r["\u0275\u0275defineInjectable"]({token:e,factory:e.\u0275fac}),e}();!function(){r["\u0275setClassMetadata"](vr,[{type:r.Injectable}],(function(){return[{type:m.Store},{type:rn.a},{type:sn.a},{type:Nn.a},{type:Zn.a},{type:f.TranslateService},{type:i.DatePipe},{type:ft.MatDialog}]}),null)}();var xr=[{path:"tenants",data:{breadcrumb:{label:"tenant.tenants",icon:"supervisor_account"}},children:[{path:"",component:Pn.a,data:{auth:[$.a.SYS_ADMIN],title:"tenant.tenants"},resolve:{entitiesTableConfig:Wn}},{path:":tenantId/users",component:Pn.a,data:{auth:[$.a.SYS_ADMIN],title:"user.tenant-admins",breadcrumb:{label:"user.tenant-admins",icon:"account_circle"}},resolve:{entitiesTableConfig:vr}}]}],Sr=function(){function e(){}return e.\u0275mod=r["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=r["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},providers:[Wn],imports:[[a.RouterModule.forChild(xr)],a.RouterModule]}),e}();void(("undefined"==typeof ngJitMode||ngJitMode)&&r["\u0275\u0275setNgModuleScope"](Sr,{imports:[a.RouterModule],exports:[a.RouterModule]}));var wr=function(){function e(){}return e.\u0275mod=r["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=r["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[i.CommonModule,jt.a,Rt.a,Sr]]}),e}();function Cr(e,t){1&e&&(r["\u0275\u0275elementStart"](0,"mat-error"),r["\u0275\u0275text"](1),r["\u0275\u0275pipe"](2,"translate"),r["\u0275\u0275elementEnd"]()),2&e&&(r["\u0275\u0275advance"](1),r["\u0275\u0275textInterpolate1"](" ",r["\u0275\u0275pipeBind1"](2,1,"customer.title-required")," "))}function Ir(e,t){if(1&e&&(r["\u0275\u0275elementStart"](0,"section",16),r["\u0275\u0275elementStart"](1,"section",17),r["\u0275\u0275element"](2,"tb-dashboard-autocomplete",18),r["\u0275\u0275pipe"](3,"translate"),r["\u0275\u0275elementStart"](4,"mat-checkbox",19),r["\u0275\u0275text"](5),r["\u0275\u0275pipe"](6,"translate"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()),2&e){var n=r["\u0275\u0275nextContext"]();r["\u0275\u0275advance"](2),r["\u0275\u0275propertyInterpolate"]("placeholder",r["\u0275\u0275pipeBind1"](3,5,"dashboard.home-dashboard")),r["\u0275\u0275property"]("dashboardsScope","customer")("customerId",null==n.entity?null:n.entity.id.id)("selectFirstDashboard",!1),r["\u0275\u0275advance"](3),r["\u0275\u0275textInterpolate1"](" ",r["\u0275\u0275pipeBind1"](6,7,"dashboard.home-dashboard-hide-toolbar")," ")}}void(("undefined"==typeof ngJitMode||ngJitMode)&&r["\u0275\u0275setNgModuleScope"](wr,{declarations:[An,qn],imports:[i.CommonModule,jt.a,Rt.a,Sr]}));var Er=function(e){function t(t,n,r,i,a){var o=e.call(this,t,a,r,i)||this;return o.store=t,o.translate=n,o.entityValue=r,o.entitiesTableConfigValue=i,o.fb=a,o.isPublic=!1,o}return Object(o.d)(t,e),t.prototype.hideDelete=function(){return!!this.entitiesTableConfig&&!this.entitiesTableConfig.deleteEnabled(this.entity)},t.prototype.buildEntityForm=function(e){return this.fb.group({title:[e?e.title:"",[s.Validators.required]],additionalInfo:this.fb.group({description:[e&&e.additionalInfo?e.additionalInfo.description:""],homeDashboardId:[e&&e.additionalInfo?e.additionalInfo.homeDashboardId:null],homeDashboardHideToolbar:[!(e&&e.additionalInfo&&Object(p.o)(e.additionalInfo.homeDashboardHideToolbar))||e.additionalInfo.homeDashboardHideToolbar]})})},t.prototype.updateEntityForm=function(e){this.isPublic=e.additionalInfo&&e.additionalInfo.isPublic,this.entityForm.patchValue({title:e.title}),this.entityForm.patchValue({additionalInfo:{description:e.additionalInfo?e.additionalInfo.description:""}}),this.entityForm.patchValue({additionalInfo:{homeDashboardId:e.additionalInfo?e.additionalInfo.homeDashboardId:null}}),this.entityForm.patchValue({additionalInfo:{homeDashboardHideToolbar:!e.additionalInfo||!Object(p.o)(e.additionalInfo.homeDashboardHideToolbar)||e.additionalInfo.homeDashboardHideToolbar}})},t.prototype.onCustomerIdCopied=function(e){this.store.dispatch(new u.b({message:this.translate.instant("customer.idCopiedMessage"),type:"success",duration:750,verticalPosition:"bottom",horizontalPosition:"right"}))},t.\u0275fac=function(e){return new(e||t)(r["\u0275\u0275directiveInject"](m.Store),r["\u0275\u0275directiveInject"](f.TranslateService),r["\u0275\u0275directiveInject"]("entity"),r["\u0275\u0275directiveInject"]("entitiesTableConfig"),r["\u0275\u0275directiveInject"](s.FormBuilder))},t.\u0275cmp=r["\u0275\u0275defineComponent"]({type:t,selectors:[["tb-customer"]],features:[r["\u0275\u0275InheritDefinitionFeature"]],decls:42,vars:46,consts:[["fxLayout.xs","column",1,"tb-details-buttons"],["mat-raised-button","","color","primary",3,"disabled","fxShow","click"],["fxLayout","row","fxLayout.xs","column"],["mat-raised-button","","ngxClipboard","",3,"cbContent","fxShow","cbOnSuccess"],["svgIcon","mdi:clipboard-arrow-left"],["translate",""],["fxLayout","column",1,"mat-padding"],[3,"formGroup"],[3,"fxShow","disabled"],[1,"mat-block"],["matInput","","formControlName","title","required",""],[4,"ngIf"],["formGroupName","additionalInfo","fxLayout","column"],["matInput","","formControlName","description","rows","2"],["class","tb-default-dashboard","fxFlex","","fxLayout","column",4,"ngIf"],[3,"parentForm","isEdit"],["fxFlex","","fxLayout","column",1,"tb-default-dashboard"],["fxFlex","","fxLayout","column","fxLayout.gt-sm","row"],["fxFlex","","formControlName","homeDashboardId",3,"placeholder","dashboardsScope","customerId","selectFirstDashboard"],["fxFlex","","formControlName","homeDashboardHideToolbar"]],template:function(e,t){1&e&&(r["\u0275\u0275elementStart"](0,"div",0),r["\u0275\u0275elementStart"](1,"button",1),r["\u0275\u0275listener"]("click",(function(e){return t.onEntityAction(e,"manageUsers")})),r["\u0275\u0275pipe"](2,"async"),r["\u0275\u0275text"](3),r["\u0275\u0275pipe"](4,"translate"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](5,"button",1),r["\u0275\u0275listener"]("click",(function(e){return t.onEntityAction(e,"manageAssets")})),r["\u0275\u0275pipe"](6,"async"),r["\u0275\u0275text"](7),r["\u0275\u0275pipe"](8,"translate"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](9,"button",1),r["\u0275\u0275listener"]("click",(function(e){return t.onEntityAction(e,"manageDevices")})),r["\u0275\u0275pipe"](10,"async"),r["\u0275\u0275text"](11),r["\u0275\u0275pipe"](12,"translate"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](13,"button",1),r["\u0275\u0275listener"]("click",(function(e){return t.onEntityAction(e,"manageDashboards")})),r["\u0275\u0275pipe"](14,"async"),r["\u0275\u0275text"](15),r["\u0275\u0275pipe"](16,"translate"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](17,"button",1),r["\u0275\u0275listener"]("click",(function(e){return t.onEntityAction(e,"delete")})),r["\u0275\u0275pipe"](18,"async"),r["\u0275\u0275text"](19),r["\u0275\u0275pipe"](20,"translate"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](21,"div",2),r["\u0275\u0275elementStart"](22,"button",3),r["\u0275\u0275listener"]("cbOnSuccess",(function(e){return t.onCustomerIdCopied(e)})),r["\u0275\u0275element"](23,"mat-icon",4),r["\u0275\u0275elementStart"](24,"span",5),r["\u0275\u0275text"](25,"customer.copyId"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](26,"div",6),r["\u0275\u0275elementStart"](27,"form",7),r["\u0275\u0275elementStart"](28,"fieldset",8),r["\u0275\u0275pipe"](29,"async"),r["\u0275\u0275elementStart"](30,"mat-form-field",9),r["\u0275\u0275elementStart"](31,"mat-label",5),r["\u0275\u0275text"](32,"customer.title"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275element"](33,"input",10),r["\u0275\u0275template"](34,Cr,3,3,"mat-error",11),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](35,"div",12),r["\u0275\u0275elementStart"](36,"mat-form-field",9),r["\u0275\u0275elementStart"](37,"mat-label",5),r["\u0275\u0275text"](38,"customer.description"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275element"](39,"textarea",13),r["\u0275\u0275elementEnd"](),r["\u0275\u0275template"](40,Ir,7,9,"section",14),r["\u0275\u0275elementEnd"](),r["\u0275\u0275element"](41,"tb-contact",15),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()),2&e&&(r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("disabled",r["\u0275\u0275pipeBind1"](2,24,t.isLoading$))("fxShow",!t.isEdit&&!t.isPublic),r["\u0275\u0275advance"](2),r["\u0275\u0275textInterpolate1"](" ",r["\u0275\u0275pipeBind1"](4,26,"customer.manage-users")," "),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("disabled",r["\u0275\u0275pipeBind1"](6,28,t.isLoading$))("fxShow",!t.isEdit),r["\u0275\u0275advance"](2),r["\u0275\u0275textInterpolate1"](" ",r["\u0275\u0275pipeBind1"](8,30,"customer.manage-assets")," "),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("disabled",r["\u0275\u0275pipeBind1"](10,32,t.isLoading$))("fxShow",!t.isEdit),r["\u0275\u0275advance"](2),r["\u0275\u0275textInterpolate1"](" ",r["\u0275\u0275pipeBind1"](12,34,"customer.manage-devices")," "),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("disabled",r["\u0275\u0275pipeBind1"](14,36,t.isLoading$))("fxShow",!t.isEdit),r["\u0275\u0275advance"](2),r["\u0275\u0275textInterpolate1"](" ",r["\u0275\u0275pipeBind1"](16,38,"customer.manage-dashboards")," "),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("disabled",r["\u0275\u0275pipeBind1"](18,40,t.isLoading$))("fxShow",!t.hideDelete()&&!t.isEdit&&!t.isPublic),r["\u0275\u0275advance"](2),r["\u0275\u0275textInterpolate1"](" ",r["\u0275\u0275pipeBind1"](20,42,"customer.delete")," "),r["\u0275\u0275advance"](3),r["\u0275\u0275property"]("cbContent",null==t.entity||null==t.entity.id?null:t.entity.id.id)("fxShow",!t.isEdit),r["\u0275\u0275advance"](5),r["\u0275\u0275property"]("formGroup",t.entityForm),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("fxShow",!t.isPublic)("disabled",r["\u0275\u0275pipeBind1"](29,44,t.isLoading$)||!t.isEdit),r["\u0275\u0275advance"](6),r["\u0275\u0275property"]("ngIf",t.entityForm.get("title").hasError("required")),r["\u0275\u0275advance"](6),r["\u0275\u0275property"]("ngIf",null==t.entity?null:t.entity.id),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("parentForm",t.entityForm)("isEdit",t.isEdit))},directives:[h.f,w.MatButton,ve.d,ye.a,be.MatIcon,f.TranslateDirective,s["\u0275angular_packages_forms_forms_y"],s.NgControlStatusGroup,s.FormGroupDirective,y.MatFormField,y.MatLabel,v.MatInput,s.DefaultValueAccessor,s.NgControlStatus,s.FormControlName,s.RequiredValidator,i.NgIf,s.FormGroupName,Mn.a,y.MatError,h.b,Pt.a,ge.MatCheckbox],pipes:[i.AsyncPipe,f.TranslatePipe],styles:["@media screen and (min-width:960px){[_nghost-%COMP%]   .tb-default-dashboard[_ngcontent-%COMP%]   tb-dashboard-autocomplete[_ngcontent-%COMP%]{padding-right:12px}}@media screen and (max-width:959px){[_nghost-%COMP%]   .tb-default-dashboard[_ngcontent-%COMP%]   tb-dashboard-autocomplete[_ngcontent-%COMP%]{padding-bottom:12px}}@media screen and (min-width:960px){[_nghost-%COMP%]   .tb-default-dashboard[_ngcontent-%COMP%]   mat-checkbox[_ngcontent-%COMP%]{margin-top:16px}}"]}),t}(En);function Tr(e,t){if(1&e&&(r["\u0275\u0275elementStart"](0,"mat-tab",1,2),r["\u0275\u0275pipe"](2,"translate"),r["\u0275\u0275element"](3,"tb-attribute-table",3),r["\u0275\u0275elementEnd"]()),2&e){var n=r["\u0275\u0275reference"](1),i=r["\u0275\u0275nextContext"]();r["\u0275\u0275propertyInterpolate"]("label",r["\u0275\u0275pipeBind1"](2,5,"attribute.attributes")),r["\u0275\u0275advance"](3),r["\u0275\u0275property"]("defaultAttributeScope",i.attributeScopes.SERVER_SCOPE)("active",n.isActive)("entityId",i.entity.id)("entityName",i.entity.name)}}function Mr(e,t){if(1&e&&(r["\u0275\u0275elementStart"](0,"mat-tab",1,4),r["\u0275\u0275pipe"](2,"translate"),r["\u0275\u0275element"](3,"tb-attribute-table",5),r["\u0275\u0275elementEnd"]()),2&e){var n=r["\u0275\u0275reference"](1),i=r["\u0275\u0275nextContext"]();r["\u0275\u0275propertyInterpolate"]("label",r["\u0275\u0275pipeBind1"](2,5,"attribute.latest-telemetry")),r["\u0275\u0275advance"](3),r["\u0275\u0275property"]("defaultAttributeScope",i.latestTelemetryTypes.LATEST_TELEMETRY)("active",n.isActive)("entityId",i.entity.id)("entityName",i.entity.name)}}function Fr(e,t){if(1&e&&(r["\u0275\u0275elementStart"](0,"mat-tab",1,6),r["\u0275\u0275pipe"](2,"translate"),r["\u0275\u0275element"](3,"tb-alarm-table",7),r["\u0275\u0275elementEnd"]()),2&e){var n=r["\u0275\u0275reference"](1),i=r["\u0275\u0275nextContext"]();r["\u0275\u0275propertyInterpolate"]("label",r["\u0275\u0275pipeBind1"](2,3,"alarm.alarms")),r["\u0275\u0275advance"](3),r["\u0275\u0275property"]("active",n.isActive)("entityId",i.entity.id)}}function Dr(e,t){if(1&e&&(r["\u0275\u0275elementStart"](0,"mat-tab",1,8),r["\u0275\u0275pipe"](2,"translate"),r["\u0275\u0275element"](3,"tb-event-table",9),r["\u0275\u0275elementEnd"]()),2&e){var n=r["\u0275\u0275reference"](1),i=r["\u0275\u0275nextContext"]();r["\u0275\u0275propertyInterpolate"]("label",r["\u0275\u0275pipeBind1"](2,5,"customer.events")),r["\u0275\u0275advance"](3),r["\u0275\u0275property"]("defaultEventType",i.eventTypes.ERROR)("active",n.isActive)("tenantId",i.entity.tenantId.id)("entityId",i.entity.id)}}function Ar(e,t){if(1&e&&(r["\u0275\u0275elementStart"](0,"mat-tab",1,10),r["\u0275\u0275pipe"](2,"translate"),r["\u0275\u0275element"](3,"tb-relation-table",7),r["\u0275\u0275elementEnd"]()),2&e){var n=r["\u0275\u0275reference"](1),i=r["\u0275\u0275nextContext"]();r["\u0275\u0275propertyInterpolate"]("label",r["\u0275\u0275pipeBind1"](2,3,"relation.relations")),r["\u0275\u0275advance"](3),r["\u0275\u0275property"]("active",n.isActive)("entityId",i.entity.id)}}function Pr(e,t){if(1&e&&(r["\u0275\u0275elementStart"](0,"mat-tab",1,11),r["\u0275\u0275pipe"](2,"translate"),r["\u0275\u0275element"](3,"tb-audit-log-table",12),r["\u0275\u0275elementEnd"]()),2&e){var n=r["\u0275\u0275reference"](1),i=r["\u0275\u0275nextContext"]();r["\u0275\u0275propertyInterpolate"]("label",r["\u0275\u0275pipeBind1"](2,4,"audit-log.audit-logs")),r["\u0275\u0275advance"](3),r["\u0275\u0275property"]("active",n.isActive)("auditLogMode",i.auditLogModes.CUSTOMER)("customerId",i.entity.id)}}!function(){r["\u0275setClassMetadata"](Er,[{type:r.Component,args:[{selector:"tb-customer",templateUrl:"./customer.component.html",styleUrls:["./customer.component.scss"]}]}],(function(){return[{type:m.Store},{type:f.TranslateService},{type:void 0,decorators:[{type:r.Inject,args:["entity"]}]},{type:In.d,decorators:[{type:r.Inject,args:["entitiesTableConfig"]}]},{type:s.FormBuilder}]}),null)}();var Nr=function(e){function t(t){var n=e.call(this,t)||this;return n.store=t,n}return Object(o.d)(t,e),t.prototype.ngOnInit=function(){e.prototype.ngOnInit.call(this)},t.\u0275fac=function(e){return new(e||t)(r["\u0275\u0275directiveInject"](m.Store))},t.\u0275cmp=r["\u0275\u0275defineComponent"]({type:t,selectors:[["tb-customer-tabs"]],features:[r["\u0275\u0275InheritDefinitionFeature"]],decls:6,vars:6,consts:[[3,"label",4,"ngIf"],[3,"label"],["attributesTab","matTab"],[3,"defaultAttributeScope","active","entityId","entityName"],["telemetryTab","matTab"],["disableAttributeScopeSelection","",3,"defaultAttributeScope","active","entityId","entityName"],["alarmsTab","matTab"],[3,"active","entityId"],["eventsTab","matTab"],[3,"defaultEventType","active","tenantId","entityId"],["relationsTab","matTab"],["auditLogsTab","matTab"],["detailsMode","true",3,"active","auditLogMode","customerId"]],template:function(e,t){1&e&&(r["\u0275\u0275template"](0,Tr,4,7,"mat-tab",0),r["\u0275\u0275template"](1,Mr,4,7,"mat-tab",0),r["\u0275\u0275template"](2,Fr,4,5,"mat-tab",0),r["\u0275\u0275template"](3,Dr,4,7,"mat-tab",0),r["\u0275\u0275template"](4,Ar,4,5,"mat-tab",0),r["\u0275\u0275template"](5,Pr,4,6,"mat-tab",0)),2&e&&(r["\u0275\u0275property"]("ngIf",t.entity),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",t.entity),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",t.entity),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",t.entity),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",t.entity),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",t.entity&&t.authUser.authority===t.authorities.TENANT_ADMIN))},directives:[i.NgIf,xe.MatTab,On.a,_n.a,Bn.a,jn.a,fr.a],pipes:[f.TranslatePipe],encapsulation:2}),t}(Ln.a);!function(){r["\u0275setClassMetadata"](Nr,[{type:r.Component,args:[{selector:"tb-customer-tabs",templateUrl:"./customer-tabs.component.html",styleUrls:[]}]}],(function(){return[{type:m.Store}]}),null)}();var kr=function(){function e(e,t,n,r){var i=this;this.customerService=e,this.translate=t,this.datePipe=n,this.router=r,this.config=new In.d,this.config.entityType=kn.b.CUSTOMER,this.config.entityComponent=Er,this.config.entityTabsComponent=Nr,this.config.entityTranslations=kn.d.get(kn.b.CUSTOMER),this.config.entityResources=kn.c.get(kn.b.CUSTOMER),this.config.columns.push(new In.a("createdTime","common.created-time",this.datePipe,"150px"),new In.c("title","customer.title","25%"),new In.c("email","contact.email","25%"),new In.c("country","contact.country","25%"),new In.c("city","contact.city","25%")),this.config.cellActionDescriptors.push({name:this.translate.instant("customer.manage-customer-users"),icon:"account_circle",isEnabled:function(e){return!e.additionalInfo||!e.additionalInfo.isPublic},onAction:function(e,t){return i.manageCustomerUsers(e,t)}},{name:this.translate.instant("customer.manage-customer-assets"),nameFunction:function(e){return e.additionalInfo&&e.additionalInfo.isPublic?i.translate.instant("customer.manage-public-assets"):i.translate.instant("customer.manage-customer-assets")},icon:"domain",isEnabled:function(e){return!0},onAction:function(e,t){return i.manageCustomerAssets(e,t)}},{name:this.translate.instant("customer.manage-customer-devices"),nameFunction:function(e){return e.additionalInfo&&e.additionalInfo.isPublic?i.translate.instant("customer.manage-public-devices"):i.translate.instant("customer.manage-customer-devices")},icon:"devices_other",isEnabled:function(e){return!0},onAction:function(e,t){return i.manageCustomerDevices(e,t)}},{name:this.translate.instant("customer.manage-customer-dashboards"),nameFunction:function(e){return e.additionalInfo&&e.additionalInfo.isPublic?i.translate.instant("customer.manage-public-dashboards"):i.translate.instant("customer.manage-customer-dashboards")},icon:"dashboard",isEnabled:function(e){return!0},onAction:function(e,t){return i.manageCustomerDashboards(e,t)}}),this.config.deleteEntityTitle=function(e){return i.translate.instant("customer.delete-customer-title",{customerTitle:e.title})},this.config.deleteEntityContent=function(){return i.translate.instant("customer.delete-customer-text")},this.config.deleteEntitiesTitle=function(e){return i.translate.instant("customer.delete-customers-title",{count:e})},this.config.deleteEntitiesContent=function(){return i.translate.instant("customer.delete-customers-text")},this.config.entitiesFetchFunction=function(e){return i.customerService.getCustomers(e)},this.config.loadEntity=function(e){return i.customerService.getCustomer(e.id)},this.config.saveEntity=function(e){return i.customerService.saveCustomer(e)},this.config.deleteEntity=function(e){return i.customerService.deleteCustomer(e.id)},this.config.onEntityAction=function(e){return i.onCustomerAction(e)},this.config.deleteEnabled=function(e){return e&&(!e.additionalInfo||!e.additionalInfo.isPublic)},this.config.entitySelectionEnabled=function(e){return e&&(!e.additionalInfo||!e.additionalInfo.isPublic)},this.config.detailsReadonly=function(e){return e&&e.additionalInfo&&e.additionalInfo.isPublic}}return e.prototype.resolve=function(){return this.config.tableTitle=this.translate.instant("customer.customers"),this.config},e.prototype.manageCustomerUsers=function(e,t){e&&e.stopPropagation(),this.router.navigateByUrl("customers/"+t.id.id+"/users")},e.prototype.manageCustomerAssets=function(e,t){e&&e.stopPropagation(),this.router.navigateByUrl("customers/"+t.id.id+"/assets")},e.prototype.manageCustomerDevices=function(e,t){e&&e.stopPropagation(),this.router.navigateByUrl("customers/"+t.id.id+"/devices")},e.prototype.manageCustomerDashboards=function(e,t){e&&e.stopPropagation(),this.router.navigateByUrl("customers/"+t.id.id+"/dashboards")},e.prototype.onCustomerAction=function(e){switch(e.action){case"manageUsers":return this.manageCustomerUsers(e.event,e.entity),!0;case"manageAssets":return this.manageCustomerAssets(e.event,e.entity),!0;case"manageDevices":return this.manageCustomerDevices(e.event,e.entity),!0;case"manageDashboards":return this.manageCustomerDashboards(e.event,e.entity),!0}return!1},e.\u0275fac=function(t){return new(t||e)(r["\u0275\u0275inject"](Zn.a),r["\u0275\u0275inject"](f.TranslateService),r["\u0275\u0275inject"](i.DatePipe),r["\u0275\u0275inject"](a.Router))},e.\u0275prov=r["\u0275\u0275defineInjectable"]({token:e,factory:e.\u0275fac}),e}();!function(){r["\u0275setClassMetadata"](kr,[{type:r.Injectable}],(function(){return[{type:Zn.a},{type:f.TranslateService},{type:i.DatePipe},{type:a.Router}]}),null)}();var Lr=n("JIJk"),Or=n("9Q2s"),_r=n("p4Q/"),Br=n("8LU1"),jr=function(){function e(e,t){this.store=e,this.fb=t,this.propagateChange=function(e){}}return Object.defineProperty(e.prototype,"required",{get:function(){return this.requiredValue},set:function(e){this.requiredValue=Object(Br.coerceBooleanProperty)(e)},enumerable:!1,configurable:!0}),e.prototype.registerOnChange=function(e){this.propagateChange=e},e.prototype.registerOnTouched=function(e){},e.prototype.ngOnInit=function(){var e=this;this.defaultDeviceConfigurationFormGroup=this.fb.group({configuration:[null,s.Validators.required]}),this.defaultDeviceConfigurationFormGroup.valueChanges.subscribe((function(){e.updateModel()}))},e.prototype.setDisabledState=function(e){this.disabled=e,this.disabled?this.defaultDeviceConfigurationFormGroup.disable({emitEvent:!1}):this.defaultDeviceConfigurationFormGroup.enable({emitEvent:!1})},e.prototype.writeValue=function(e){this.defaultDeviceConfigurationFormGroup.patchValue({configuration:e},{emitEvent:!1})},e.prototype.updateModel=function(){var e=null;this.defaultDeviceConfigurationFormGroup.valid&&((e=this.defaultDeviceConfigurationFormGroup.getRawValue().configuration).type=Lr.h.DEFAULT),this.propagateChange(e)},e.\u0275fac=function(t){return new(t||e)(r["\u0275\u0275directiveInject"](m.Store),r["\u0275\u0275directiveInject"](s.FormBuilder))},e.\u0275cmp=r["\u0275\u0275defineComponent"]({type:e,selectors:[["tb-default-device-configuration"]],inputs:{required:"required",disabled:"disabled"},features:[r["\u0275\u0275ProvidersFeature"]([{provide:s.NG_VALUE_ACCESSOR,useExisting:Object(r.forwardRef)((function(){return e})),multi:!0}])],decls:1,vars:1,consts:[[2,"padding-bottom","16px",3,"formGroup"]],template:function(e,t){1&e&&r["\u0275\u0275element"](0,"form",0),2&e&&r["\u0275\u0275property"]("formGroup",t.defaultDeviceConfigurationFormGroup)},directives:[s["\u0275angular_packages_forms_forms_y"],s.NgControlStatusGroup,s.FormGroupDirective],encapsulation:2}),e}();function Rr(e,t){if(1&e&&r["\u0275\u0275element"](0,"tb-default-device-configuration",3),2&e){var n=r["\u0275\u0275nextContext"]();r["\u0275\u0275property"]("required",n.required)}}!function(){r["\u0275setClassMetadata"](jr,[{type:r.Component,args:[{selector:"tb-default-device-configuration",templateUrl:"./default-device-configuration.component.html",styleUrls:[],providers:[{provide:s.NG_VALUE_ACCESSOR,useExisting:Object(r.forwardRef)((function(){return jr})),multi:!0}]}]}],(function(){return[{type:m.Store},{type:s.FormBuilder}]}),{required:[{type:r.Input}],disabled:[{type:r.Input}]})}();var Vr=function(){function e(e,t){this.store=e,this.fb=t,this.deviceProfileType=Lr.h,this.propagateChange=function(e){}}return Object.defineProperty(e.prototype,"required",{get:function(){return this.requiredValue},set:function(e){this.requiredValue=Object(Br.coerceBooleanProperty)(e)},enumerable:!1,configurable:!0}),e.prototype.registerOnChange=function(e){this.propagateChange=e},e.prototype.registerOnTouched=function(e){},e.prototype.ngOnInit=function(){var e=this;this.deviceConfigurationFormGroup=this.fb.group({configuration:[null,s.Validators.required]}),this.deviceConfigurationFormGroup.valueChanges.subscribe((function(){e.updateModel()}))},e.prototype.setDisabledState=function(e){this.disabled=e,this.disabled?this.deviceConfigurationFormGroup.disable({emitEvent:!1}):this.deviceConfigurationFormGroup.enable({emitEvent:!1})},e.prototype.writeValue=function(e){this.type=null==e?void 0:e.type;var t=Object(p.e)(e);t&&delete t.type,this.deviceConfigurationFormGroup.patchValue({configuration:t},{emitEvent:!1})},e.prototype.updateModel=function(){var e=null;this.deviceConfigurationFormGroup.valid&&((e=this.deviceConfigurationFormGroup.getRawValue().configuration).type=this.type),this.propagateChange(e)},e.\u0275fac=function(t){return new(t||e)(r["\u0275\u0275directiveInject"](m.Store),r["\u0275\u0275directiveInject"](s.FormBuilder))},e.\u0275cmp=r["\u0275\u0275defineComponent"]({type:e,selectors:[["tb-device-configuration"]],inputs:{required:"required",disabled:"disabled"},features:[r["\u0275\u0275ProvidersFeature"]([{provide:s.NG_VALUE_ACCESSOR,useExisting:Object(r.forwardRef)((function(){return e})),multi:!0}])],decls:3,vars:3,consts:[[3,"formGroup"],[3,"ngSwitch"],[3,"ngSwitchCase"],["formControlName","configuration",3,"required"]],template:function(e,t){1&e&&(r["\u0275\u0275elementStart"](0,"div",0),r["\u0275\u0275elementStart"](1,"div",1),r["\u0275\u0275template"](2,Rr,1,1,"ng-template",2),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()),2&e&&(r["\u0275\u0275property"]("formGroup",t.deviceConfigurationFormGroup),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngSwitch",t.type),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngSwitchCase",t.deviceProfileType.DEFAULT))},directives:[s.NgControlStatusGroup,s.FormGroupDirective,i.NgSwitch,i.NgSwitchCase,jr,s.NgControlStatus,s.FormControlName,s.RequiredValidator],encapsulation:2}),e}();!function(){r["\u0275setClassMetadata"](Vr,[{type:r.Component,args:[{selector:"tb-device-configuration",templateUrl:"./device-configuration.component.html",styleUrls:[],providers:[{provide:s.NG_VALUE_ACCESSOR,useExisting:Object(r.forwardRef)((function(){return Vr})),multi:!0}]}]}],(function(){return[{type:m.Store},{type:s.FormBuilder}]}),{required:[{type:r.Input}],disabled:[{type:r.Input}]})}();var zr=function(){function e(e,t){this.store=e,this.fb=t,this.propagateChange=function(e){}}return Object.defineProperty(e.prototype,"required",{get:function(){return this.requiredValue},set:function(e){this.requiredValue=Object(Br.coerceBooleanProperty)(e)},enumerable:!1,configurable:!0}),e.prototype.registerOnChange=function(e){this.propagateChange=e},e.prototype.registerOnTouched=function(e){},e.prototype.ngOnInit=function(){var e=this;this.defaultDeviceTransportConfigurationFormGroup=this.fb.group({configuration:[null,s.Validators.required]}),this.defaultDeviceTransportConfigurationFormGroup.valueChanges.subscribe((function(){e.updateModel()}))},e.prototype.setDisabledState=function(e){this.disabled=e,this.disabled?this.defaultDeviceTransportConfigurationFormGroup.disable({emitEvent:!1}):this.defaultDeviceTransportConfigurationFormGroup.enable({emitEvent:!1})},e.prototype.writeValue=function(e){this.defaultDeviceTransportConfigurationFormGroup.patchValue({configuration:e},{emitEvent:!1})},e.prototype.updateModel=function(){var e=null;this.defaultDeviceTransportConfigurationFormGroup.valid&&((e=this.defaultDeviceTransportConfigurationFormGroup.getRawValue().configuration).type=Lr.j.DEFAULT),this.propagateChange(e)},e.\u0275fac=function(t){return new(t||e)(r["\u0275\u0275directiveInject"](m.Store),r["\u0275\u0275directiveInject"](s.FormBuilder))},e.\u0275cmp=r["\u0275\u0275defineComponent"]({type:e,selectors:[["tb-default-device-transport-configuration"]],inputs:{required:"required",disabled:"disabled"},features:[r["\u0275\u0275ProvidersFeature"]([{provide:s.NG_VALUE_ACCESSOR,useExisting:Object(r.forwardRef)((function(){return e})),multi:!0}])],decls:1,vars:1,consts:[[2,"padding-bottom","16px",3,"formGroup"]],template:function(e,t){1&e&&r["\u0275\u0275element"](0,"form",0),2&e&&r["\u0275\u0275property"]("formGroup",t.defaultDeviceTransportConfigurationFormGroup)},directives:[s["\u0275angular_packages_forms_forms_y"],s.NgControlStatusGroup,s.FormGroupDirective],encapsulation:2}),e}();!function(){r["\u0275setClassMetadata"](zr,[{type:r.Component,args:[{selector:"tb-default-device-transport-configuration",templateUrl:"./default-device-transport-configuration.component.html",styleUrls:[],providers:[{provide:s.NG_VALUE_ACCESSOR,useExisting:Object(r.forwardRef)((function(){return zr})),multi:!0}]}]}],(function(){return[{type:m.Store},{type:s.FormBuilder}]}),{required:[{type:r.Input}],disabled:[{type:r.Input}]})}();var Gr=function(){function e(e,t){this.store=e,this.fb=t,this.propagateChange=function(e){}}return Object.defineProperty(e.prototype,"required",{get:function(){return this.requiredValue},set:function(e){this.requiredValue=Object(Br.coerceBooleanProperty)(e)},enumerable:!1,configurable:!0}),e.prototype.registerOnChange=function(e){this.propagateChange=e},e.prototype.registerOnTouched=function(e){},e.prototype.ngOnInit=function(){var e=this;this.mqttDeviceTransportConfigurationFormGroup=this.fb.group({configuration:[null,s.Validators.required]}),this.mqttDeviceTransportConfigurationFormGroup.valueChanges.subscribe((function(){e.updateModel()}))},e.prototype.setDisabledState=function(e){this.disabled=e,this.disabled?this.mqttDeviceTransportConfigurationFormGroup.disable({emitEvent:!1}):this.mqttDeviceTransportConfigurationFormGroup.enable({emitEvent:!1})},e.prototype.writeValue=function(e){this.mqttDeviceTransportConfigurationFormGroup.patchValue({configuration:e},{emitEvent:!1})},e.prototype.updateModel=function(){var e=null;this.mqttDeviceTransportConfigurationFormGroup.valid&&((e=this.mqttDeviceTransportConfigurationFormGroup.getRawValue().configuration).type=Lr.j.MQTT),this.propagateChange(e)},e.\u0275fac=function(t){return new(t||e)(r["\u0275\u0275directiveInject"](m.Store),r["\u0275\u0275directiveInject"](s.FormBuilder))},e.\u0275cmp=r["\u0275\u0275defineComponent"]({type:e,selectors:[["tb-mqtt-device-transport-configuration"]],inputs:{required:"required",disabled:"disabled"},features:[r["\u0275\u0275ProvidersFeature"]([{provide:s.NG_VALUE_ACCESSOR,useExisting:Object(r.forwardRef)((function(){return e})),multi:!0}])],decls:1,vars:1,consts:[[2,"padding-bottom","16px",3,"formGroup"]],template:function(e,t){1&e&&r["\u0275\u0275element"](0,"form",0),2&e&&r["\u0275\u0275property"]("formGroup",t.mqttDeviceTransportConfigurationFormGroup)},directives:[s["\u0275angular_packages_forms_forms_y"],s.NgControlStatusGroup,s.FormGroupDirective],encapsulation:2}),e}();!function(){r["\u0275setClassMetadata"](Gr,[{type:r.Component,args:[{selector:"tb-mqtt-device-transport-configuration",templateUrl:"./mqtt-device-transport-configuration.component.html",styleUrls:[],providers:[{provide:s.NG_VALUE_ACCESSOR,useExisting:Object(r.forwardRef)((function(){return Gr})),multi:!0}]}]}],(function(){return[{type:m.Store},{type:s.FormBuilder}]}),{required:[{type:r.Input}],disabled:[{type:r.Input}]})}();var Ur=function(){function e(e,t){this.store=e,this.fb=t,this.propagateChange=function(e){}}return Object.defineProperty(e.prototype,"required",{get:function(){return this.requiredValue},set:function(e){this.requiredValue=Object(Br.coerceBooleanProperty)(e)},enumerable:!1,configurable:!0}),e.prototype.registerOnChange=function(e){this.propagateChange=e},e.prototype.registerOnTouched=function(e){},e.prototype.ngOnInit=function(){var e=this;this.coapDeviceTransportConfigurationFormGroup=this.fb.group({configuration:[null,s.Validators.required]}),this.coapDeviceTransportConfigurationFormGroup.valueChanges.subscribe((function(){e.updateModel()}))},e.prototype.setDisabledState=function(e){this.disabled=e,this.disabled?this.coapDeviceTransportConfigurationFormGroup.disable({emitEvent:!1}):this.coapDeviceTransportConfigurationFormGroup.enable({emitEvent:!1})},e.prototype.writeValue=function(e){this.coapDeviceTransportConfigurationFormGroup.patchValue({configuration:e},{emitEvent:!1})},e.prototype.updateModel=function(){var e=null;this.coapDeviceTransportConfigurationFormGroup.valid&&((e=this.coapDeviceTransportConfigurationFormGroup.getRawValue().configuration).type=Lr.j.COAP),this.propagateChange(e)},e.\u0275fac=function(t){return new(t||e)(r["\u0275\u0275directiveInject"](m.Store),r["\u0275\u0275directiveInject"](s.FormBuilder))},e.\u0275cmp=r["\u0275\u0275defineComponent"]({type:e,selectors:[["tb-coap-device-transport-configuration"]],inputs:{required:"required",disabled:"disabled"},features:[r["\u0275\u0275ProvidersFeature"]([{provide:s.NG_VALUE_ACCESSOR,useExisting:Object(r.forwardRef)((function(){return e})),multi:!0}])],decls:1,vars:1,consts:[[2,"padding-bottom","16px",3,"formGroup"]],template:function(e,t){1&e&&r["\u0275\u0275element"](0,"form",0),2&e&&r["\u0275\u0275property"]("formGroup",t.coapDeviceTransportConfigurationFormGroup)},directives:[s["\u0275angular_packages_forms_forms_y"],s.NgControlStatusGroup,s.FormGroupDirective],encapsulation:2}),e}();function qr(e,t){if(1&e&&r["\u0275\u0275element"](0,"tb-default-device-transport-configuration",3),2&e){var n=r["\u0275\u0275nextContext"]();r["\u0275\u0275property"]("required",n.required)}}function $r(e,t){if(1&e&&r["\u0275\u0275element"](0,"tb-mqtt-device-transport-configuration",3),2&e){var n=r["\u0275\u0275nextContext"]();r["\u0275\u0275property"]("required",n.required)}}function Wr(e,t){if(1&e&&r["\u0275\u0275element"](0,"tb-coap-device-transport-configuration",3),2&e){var n=r["\u0275\u0275nextContext"]();r["\u0275\u0275property"]("required",n.required)}}!function(){r["\u0275setClassMetadata"](Ur,[{type:r.Component,args:[{selector:"tb-coap-device-transport-configuration",templateUrl:"./coap-device-transport-configuration.component.html",styleUrls:[],providers:[{provide:s.NG_VALUE_ACCESSOR,useExisting:Object(r.forwardRef)((function(){return Ur})),multi:!0}]}]}],(function(){return[{type:m.Store},{type:s.FormBuilder}]}),{required:[{type:r.Input}],disabled:[{type:r.Input}]})}();var Hr=function(){function e(e,t){this.store=e,this.fb=t,this.deviceTransportType=Lr.j,this.propagateChange=function(e){}}return Object.defineProperty(e.prototype,"required",{get:function(){return this.requiredValue},set:function(e){this.requiredValue=Object(Br.coerceBooleanProperty)(e)},enumerable:!1,configurable:!0}),e.prototype.registerOnChange=function(e){this.propagateChange=e},e.prototype.registerOnTouched=function(e){},e.prototype.ngOnInit=function(){var e=this;this.deviceTransportConfigurationFormGroup=this.fb.group({configuration:[null,s.Validators.required]}),this.deviceTransportConfigurationFormGroup.valueChanges.subscribe((function(){e.updateModel()}))},e.prototype.setDisabledState=function(e){this.disabled=e,this.disabled?this.deviceTransportConfigurationFormGroup.disable({emitEvent:!1}):this.deviceTransportConfigurationFormGroup.enable({emitEvent:!1})},e.prototype.writeValue=function(e){this.transportType=null==e?void 0:e.type;var t=Object(p.e)(e);t&&delete t.type,this.deviceTransportConfigurationFormGroup.patchValue({configuration:t},{emitEvent:!1})},e.prototype.updateModel=function(){var e=null;this.deviceTransportConfigurationFormGroup.valid&&((e=this.deviceTransportConfigurationFormGroup.getRawValue().configuration).type=this.transportType),this.propagateChange(e)},e.\u0275fac=function(t){return new(t||e)(r["\u0275\u0275directiveInject"](m.Store),r["\u0275\u0275directiveInject"](s.FormBuilder))},e.\u0275cmp=r["\u0275\u0275defineComponent"]({type:e,selectors:[["tb-device-transport-configuration"]],inputs:{required:"required",disabled:"disabled"},features:[r["\u0275\u0275ProvidersFeature"]([{provide:s.NG_VALUE_ACCESSOR,useExisting:Object(r.forwardRef)((function(){return e})),multi:!0}])],decls:5,vars:5,consts:[[3,"formGroup"],[3,"ngSwitch"],[3,"ngSwitchCase"],["formControlName","configuration",3,"required"]],template:function(e,t){1&e&&(r["\u0275\u0275elementStart"](0,"div",0),r["\u0275\u0275elementStart"](1,"div",1),r["\u0275\u0275template"](2,qr,1,1,"ng-template",2),r["\u0275\u0275template"](3,$r,1,1,"ng-template",2),r["\u0275\u0275template"](4,Wr,1,1,"ng-template",2),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()),2&e&&(r["\u0275\u0275property"]("formGroup",t.deviceTransportConfigurationFormGroup),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngSwitch",t.transportType),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngSwitchCase",t.deviceTransportType.DEFAULT),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngSwitchCase",t.deviceTransportType.MQTT),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngSwitchCase",t.deviceTransportType.COAP))},directives:[s.NgControlStatusGroup,s.FormGroupDirective,i.NgSwitch,i.NgSwitchCase,zr,s.NgControlStatus,s.FormControlName,s.RequiredValidator,Gr,Ur],encapsulation:2}),e}();function Kr(e,t){1&e&&(r["\u0275\u0275elementStart"](0,"mat-expansion-panel",3),r["\u0275\u0275elementStart"](1,"mat-expansion-panel-header"),r["\u0275\u0275elementStart"](2,"mat-panel-title"),r["\u0275\u0275elementStart"](3,"div",4),r["\u0275\u0275text"](4,"device.device-configuration"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275element"](5,"tb-device-configuration",5),r["\u0275\u0275elementEnd"]()),2&e&&r["\u0275\u0275property"]("expanded",!0)}function Jr(e,t){1&e&&(r["\u0275\u0275elementStart"](0,"mat-expansion-panel",3),r["\u0275\u0275elementStart"](1,"mat-expansion-panel-header"),r["\u0275\u0275elementStart"](2,"mat-panel-title"),r["\u0275\u0275elementStart"](3,"div",4),r["\u0275\u0275text"](4,"device.transport-configuration"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275element"](5,"tb-device-transport-configuration",6),r["\u0275\u0275elementEnd"]()),2&e&&r["\u0275\u0275property"]("expanded",!0)}!function(){r["\u0275setClassMetadata"](Hr,[{type:r.Component,args:[{selector:"tb-device-transport-configuration",templateUrl:"./device-transport-configuration.component.html",styleUrls:[],providers:[{provide:s.NG_VALUE_ACCESSOR,useExisting:Object(r.forwardRef)((function(){return Hr})),multi:!0}]}]}],(function(){return[{type:m.Store},{type:s.FormBuilder}]}),{required:[{type:r.Input}],disabled:[{type:r.Input}]})}();var Yr=function(){function e(e,t){this.store=e,this.fb=t,this.propagateChange=function(e){}}return Object.defineProperty(e.prototype,"required",{get:function(){return this.requiredValue},set:function(e){this.requiredValue=Object(Br.coerceBooleanProperty)(e)},enumerable:!1,configurable:!0}),e.prototype.registerOnChange=function(e){this.propagateChange=e},e.prototype.registerOnTouched=function(e){},e.prototype.ngOnInit=function(){var e=this;this.deviceDataFormGroup=this.fb.group({configuration:[null,s.Validators.required],transportConfiguration:[null,s.Validators.required]}),this.deviceDataFormGroup.valueChanges.subscribe((function(){e.updateModel()}))},e.prototype.setDisabledState=function(e){this.disabled=e,this.disabled?this.deviceDataFormGroup.disable({emitEvent:!1}):this.deviceDataFormGroup.enable({emitEvent:!1})},e.prototype.writeValue=function(e){var t,n,r=null===(t=null==e?void 0:e.configuration)||void 0===t?void 0:t.type;this.displayDeviceConfiguration=r&&Lr.w.get(r).hasDeviceConfiguration;var i=null===(n=null==e?void 0:e.transportConfiguration)||void 0===n?void 0:n.type;this.displayTransportConfiguration=i&&Lr.z.get(i).hasDeviceConfiguration,this.deviceDataFormGroup.patchValue({configuration:null==e?void 0:e.configuration},{emitEvent:!1}),this.deviceDataFormGroup.patchValue({transportConfiguration:null==e?void 0:e.transportConfiguration},{emitEvent:!1})},e.prototype.updateModel=function(){var e=null;this.deviceDataFormGroup.valid&&(e=this.deviceDataFormGroup.getRawValue()),this.propagateChange(e)},e.\u0275fac=function(t){return new(t||e)(r["\u0275\u0275directiveInject"](m.Store),r["\u0275\u0275directiveInject"](s.FormBuilder))},e.\u0275cmp=r["\u0275\u0275defineComponent"]({type:e,selectors:[["tb-device-data"]],inputs:{required:"required",disabled:"disabled"},features:[r["\u0275\u0275ProvidersFeature"]([{provide:s.NG_VALUE_ACCESSOR,useExisting:Object(r.forwardRef)((function(){return e})),multi:!0}])],decls:4,vars:3,consts:[[2,"padding-bottom","16px",3,"formGroup"],["multi","true"],[3,"expanded",4,"ngIf"],[3,"expanded"],["translate",""],["formControlName","configuration","required",""],["formControlName","transportConfiguration","required",""]],template:function(e,t){1&e&&(r["\u0275\u0275elementStart"](0,"div",0),r["\u0275\u0275elementStart"](1,"mat-accordion",1),r["\u0275\u0275template"](2,Kr,6,1,"mat-expansion-panel",2),r["\u0275\u0275template"](3,Jr,6,1,"mat-expansion-panel",2),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()),2&e&&(r["\u0275\u0275property"]("formGroup",t.deviceDataFormGroup),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("ngIf",t.displayDeviceConfiguration),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",t.displayTransportConfiguration))},directives:[s.NgControlStatusGroup,s.FormGroupDirective,Y.MatAccordion,i.NgIf,Y.MatExpansionPanel,Y.MatExpansionPanelHeader,Y.MatExpansionPanelTitle,f.TranslateDirective,Vr,s.NgControlStatus,s.FormControlName,s.RequiredValidator,Hr],encapsulation:2}),e}();function Xr(e,t){1&e&&(r["\u0275\u0275elementStart"](0,"mat-error"),r["\u0275\u0275text"](1),r["\u0275\u0275pipe"](2,"translate"),r["\u0275\u0275elementEnd"]()),2&e&&(r["\u0275\u0275advance"](1),r["\u0275\u0275textInterpolate1"](" ",r["\u0275\u0275pipeBind1"](2,1,"device.name-required")," "))}function Qr(e,t){1&e&&(r["\u0275\u0275elementStart"](0,"mat-checkbox",25),r["\u0275\u0275text"](1),r["\u0275\u0275pipe"](2,"translate"),r["\u0275\u0275elementEnd"]()),2&e&&(r["\u0275\u0275advance"](1),r["\u0275\u0275textInterpolate1"](" ",r["\u0275\u0275pipeBind1"](2,1,"device.overwrite-activity-time")," "))}!function(){r["\u0275setClassMetadata"](Yr,[{type:r.Component,args:[{selector:"tb-device-data",templateUrl:"./device-data.component.html",styleUrls:[],providers:[{provide:s.NG_VALUE_ACCESSOR,useExisting:Object(r.forwardRef)((function(){return Yr})),multi:!0}]}]}],(function(){return[{type:m.Store},{type:s.FormBuilder}]}),{required:[{type:r.Input}],disabled:[{type:r.Input}]})}();var Zr=function(e){function t(t,n,r,i,a){var o=e.call(this,t,a,r,i)||this;return o.store=t,o.translate=n,o.entityValue=r,o.entitiesTableConfigValue=i,o.fb=a,o.entityType=kn.b,o}return Object(o.d)(t,e),t.prototype.ngOnInit=function(){this.deviceScope=this.entitiesTableConfig.componentsData.deviceScope,this.deviceCredentials$=this.entitiesTableConfigValue.componentsData.deviceCredentials$,e.prototype.ngOnInit.call(this)},t.prototype.hideDelete=function(){return!!this.entitiesTableConfig&&!this.entitiesTableConfig.deleteEnabled(this.entity)},t.prototype.isAssignedToCustomer=function(e){return e&&e.customerId&&e.customerId.id!==mr.a},t.prototype.buildForm=function(e){return this.fb.group({name:[e?e.name:"",[s.Validators.required]],deviceProfileId:[e?e.deviceProfileId:null,[s.Validators.required]],label:[e?e.label:""],deviceData:[e?e.deviceData:null,[s.Validators.required]],additionalInfo:this.fb.group({gateway:[!(!e||!e.additionalInfo)&&e.additionalInfo.gateway],overwriteActivityTime:[!(!e||!e.additionalInfo)&&e.additionalInfo.overwriteActivityTime],description:[e&&e.additionalInfo?e.additionalInfo.description:""]})})},t.prototype.updateForm=function(e){this.entityForm.patchValue({name:e.name}),this.entityForm.patchValue({deviceProfileId:e.deviceProfileId}),this.entityForm.patchValue({label:e.label}),this.entityForm.patchValue({deviceData:e.deviceData}),this.entityForm.patchValue({additionalInfo:{gateway:!!e.additionalInfo&&e.additionalInfo.gateway,overwriteActivityTime:!!e.additionalInfo&&e.additionalInfo.overwriteActivityTime}}),this.entityForm.patchValue({additionalInfo:{description:e.additionalInfo?e.additionalInfo.description:""}})},t.prototype.onDeviceIdCopied=function(e){this.store.dispatch(new u.b({message:this.translate.instant("device.idCopiedMessage"),type:"success",duration:750,verticalPosition:"bottom",horizontalPosition:"right"}))},t.prototype.onDeviceProfileUpdated=function(){this.entitiesTableConfig.table.updateData(!1)},t.prototype.onDeviceProfileChanged=function(e){if(e&&this.isEdit){var t=e.type,n=e.transportType,r=this.entityForm.getRawValue().deviceData;if(r){var i=!1;r.configuration.type!==t&&(r.configuration=Object(Lr.n)(t),i=!0),r.transportConfiguration.type!==n&&(r.transportConfiguration=Object(Lr.q)(n),i=!0),i&&(this.entityForm.patchValue({deviceData:r}),this.entityForm.markAsDirty())}else r={configuration:Object(Lr.n)(t),transportConfiguration:Object(Lr.q)(n)},this.entityForm.patchValue({deviceData:r}),this.entityForm.markAsDirty()}},t.\u0275fac=function(e){return new(e||t)(r["\u0275\u0275directiveInject"](m.Store),r["\u0275\u0275directiveInject"](f.TranslateService),r["\u0275\u0275directiveInject"]("entity"),r["\u0275\u0275directiveInject"]("entitiesTableConfig"),r["\u0275\u0275directiveInject"](s.FormBuilder))},t.\u0275cmp=r["\u0275\u0275defineComponent"]({type:t,selectors:[["tb-device"]],features:[r["\u0275\u0275InheritDefinitionFeature"]],decls:61,vars:62,consts:[["fxLayout.xs","column",1,"tb-details-buttons"],["mat-raised-button","","color","primary",3,"disabled","fxShow","click"],["mat-raised-button","","color","primary","fxFlex.xs","",3,"disabled","fxShow","click"],["fxLayout","row","fxLayout.xs","column"],["mat-raised-button","","ngxClipboard","",3,"cbContent","disabled","fxShow","cbOnSuccess"],["svgIcon","mdi:clipboard-arrow-left"],["translate",""],[3,"fxShow","disabled","credentials$","deviceId"],["fxLayout","column",1,"mat-padding"],[1,"mat-block",3,"fxShow"],["matInput","","disabled","",3,"ngModel"],[1,"tb-small",2,"padding-bottom","10px","padding-left","2px",3,"fxShow"],[3,"formGroup"],[3,"disabled"],[1,"mat-block"],["matInput","","formControlName","name","required",""],[4,"ngIf"],["required","","formControlName","deviceProfileId",3,"selectDefaultProfile","deviceProfileUpdated","deviceProfileChanged"],["matInput","","formControlName","label"],["formControlName","deviceData","required",""],["formGroupName","additionalInfo","fxLayout","column"],["fxLayout","row","fxLayout.xs","column",2,"padding-bottom","16px"],["fxFlex.gt-sm","30","fxFlex","","formControlName","gateway"],["fxFlex","","formControlName","overwriteActivityTime",4,"ngIf"],["matInput","","formControlName","description","rows","2"],["fxFlex","","formControlName","overwriteActivityTime"]],template:function(e,t){1&e&&(r["\u0275\u0275elementStart"](0,"div",0),r["\u0275\u0275elementStart"](1,"button",1),r["\u0275\u0275listener"]("click",(function(e){return t.onEntityAction(e,"makePublic")})),r["\u0275\u0275pipe"](2,"async"),r["\u0275\u0275text"](3),r["\u0275\u0275pipe"](4,"translate"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](5,"button",1),r["\u0275\u0275listener"]("click",(function(e){return t.onEntityAction(e,"assignToCustomer")})),r["\u0275\u0275pipe"](6,"async"),r["\u0275\u0275text"](7),r["\u0275\u0275pipe"](8,"translate"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](9,"button",1),r["\u0275\u0275listener"]("click",(function(e){return t.onEntityAction(e,"unassignFromCustomer")})),r["\u0275\u0275pipe"](10,"async"),r["\u0275\u0275text"](11),r["\u0275\u0275pipe"](12,"translate"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](13,"button",1),r["\u0275\u0275listener"]("click",(function(e){return t.onEntityAction(e,"manageCredentials")})),r["\u0275\u0275pipe"](14,"async"),r["\u0275\u0275text"](15),r["\u0275\u0275pipe"](16,"translate"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](17,"button",2),r["\u0275\u0275listener"]("click",(function(e){return t.onEntityAction(e,"delete")})),r["\u0275\u0275pipe"](18,"async"),r["\u0275\u0275text"](19),r["\u0275\u0275pipe"](20,"translate"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](21,"div",3),r["\u0275\u0275elementStart"](22,"button",4),r["\u0275\u0275listener"]("cbOnSuccess",(function(e){return t.onDeviceIdCopied(e)})),r["\u0275\u0275pipe"](23,"async"),r["\u0275\u0275element"](24,"mat-icon",5),r["\u0275\u0275elementStart"](25,"span",6),r["\u0275\u0275text"](26,"device.copyId"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275element"](27,"tb-copy-device-credentials",7),r["\u0275\u0275pipe"](28,"async"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](29,"div",8),r["\u0275\u0275elementStart"](30,"mat-form-field",9),r["\u0275\u0275elementStart"](31,"mat-label",6),r["\u0275\u0275text"](32,"device.assignedToCustomer"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275element"](33,"input",10),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](34,"div",11),r["\u0275\u0275text"](35),r["\u0275\u0275pipe"](36,"translate"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](37,"form",12),r["\u0275\u0275elementStart"](38,"fieldset",13),r["\u0275\u0275pipe"](39,"async"),r["\u0275\u0275elementStart"](40,"mat-form-field",14),r["\u0275\u0275elementStart"](41,"mat-label",6),r["\u0275\u0275text"](42,"device.name"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275element"](43,"input",15),r["\u0275\u0275template"](44,Xr,3,3,"mat-error",16),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](45,"tb-device-profile-autocomplete",17),r["\u0275\u0275listener"]("deviceProfileUpdated",(function(){return t.onDeviceProfileUpdated()}))("deviceProfileChanged",(function(e){return t.onDeviceProfileChanged(e)})),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](46,"mat-form-field",14),r["\u0275\u0275elementStart"](47,"mat-label",6),r["\u0275\u0275text"](48,"device.label"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275element"](49,"input",18),r["\u0275\u0275elementEnd"](),r["\u0275\u0275element"](50,"tb-device-data",19),r["\u0275\u0275elementStart"](51,"div",20),r["\u0275\u0275elementStart"](52,"div",21),r["\u0275\u0275elementStart"](53,"mat-checkbox",22),r["\u0275\u0275text"](54),r["\u0275\u0275pipe"](55,"translate"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275template"](56,Qr,3,3,"mat-checkbox",23),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](57,"mat-form-field",14),r["\u0275\u0275elementStart"](58,"mat-label",6),r["\u0275\u0275text"](59,"device.description"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275element"](60,"textarea",24),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()),2&e&&(r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("disabled",r["\u0275\u0275pipeBind1"](2,32,t.isLoading$))("fxShow",!(t.isEdit||"tenant"!==t.deviceScope||t.isAssignedToCustomer(t.entity)||null!=t.entity&&t.entity.customerIsPublic)),r["\u0275\u0275advance"](2),r["\u0275\u0275textInterpolate1"](" ",r["\u0275\u0275pipeBind1"](4,34,"device.make-public")," "),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("disabled",r["\u0275\u0275pipeBind1"](6,36,t.isLoading$))("fxShow",!t.isEdit&&"tenant"===t.deviceScope&&!t.isAssignedToCustomer(t.entity)),r["\u0275\u0275advance"](2),r["\u0275\u0275textInterpolate1"](" ",r["\u0275\u0275pipeBind1"](8,38,"device.assign-to-customer")," "),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("disabled",r["\u0275\u0275pipeBind1"](10,40,t.isLoading$))("fxShow",!t.isEdit&&("customer"===t.deviceScope||"tenant"===t.deviceScope)&&t.isAssignedToCustomer(t.entity)),r["\u0275\u0275advance"](2),r["\u0275\u0275textInterpolate1"](" ",r["\u0275\u0275pipeBind1"](12,42,null!=t.entity&&t.entity.customerIsPublic?"device.make-private":"device.unassign-from-customer")," "),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("disabled",r["\u0275\u0275pipeBind1"](14,44,t.isLoading$))("fxShow",!t.isEdit),r["\u0275\u0275advance"](2),r["\u0275\u0275textInterpolate1"](" ",r["\u0275\u0275pipeBind1"](16,46,"customer_user"===t.deviceScope?"device.view-credentials":"device.manage-credentials")," "),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("disabled",r["\u0275\u0275pipeBind1"](18,48,t.isLoading$))("fxShow",!t.hideDelete()&&!t.isEdit),r["\u0275\u0275advance"](2),r["\u0275\u0275textInterpolate1"](" ",r["\u0275\u0275pipeBind1"](20,50,"device.delete")," "),r["\u0275\u0275advance"](3),r["\u0275\u0275property"]("cbContent",null==t.entity||null==t.entity.id?null:t.entity.id.id)("disabled",r["\u0275\u0275pipeBind1"](23,52,t.isLoading$))("fxShow",!t.isEdit),r["\u0275\u0275advance"](5),r["\u0275\u0275property"]("fxShow",!t.isEdit)("disabled",r["\u0275\u0275pipeBind1"](28,54,t.isLoading$))("credentials$",t.deviceCredentials$)("deviceId",null==t.entity?null:t.entity.id),r["\u0275\u0275advance"](3),r["\u0275\u0275property"]("fxShow",!t.isEdit&&t.isAssignedToCustomer(t.entity)&&!(null!=t.entity&&t.entity.customerIsPublic)&&"tenant"===t.deviceScope),r["\u0275\u0275advance"](3),r["\u0275\u0275property"]("ngModel",null==t.entity?null:t.entity.customerTitle),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("fxShow",!t.isEdit&&(null==t.entity?null:t.entity.customerIsPublic)&&("customer"===t.deviceScope||"tenant"===t.deviceScope)),r["\u0275\u0275advance"](1),r["\u0275\u0275textInterpolate1"](" ",r["\u0275\u0275pipeBind1"](36,56,"device.device-public")," "),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("formGroup",t.entityForm),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("disabled",r["\u0275\u0275pipeBind1"](39,58,t.isLoading$)||!t.isEdit),r["\u0275\u0275advance"](6),r["\u0275\u0275property"]("ngIf",t.entityForm.get("name").hasError("required")),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("selectDefaultProfile",t.isAdd),r["\u0275\u0275advance"](9),r["\u0275\u0275textInterpolate1"](" ",r["\u0275\u0275pipeBind1"](55,60,"device.is-gateway")," "),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("ngIf",t.entityForm.get("additionalInfo.gateway").value))},directives:[h.f,w.MatButton,ve.d,h.b,ye.a,be.MatIcon,f.TranslateDirective,Or.a,y.MatFormField,y.MatLabel,v.MatInput,s.DefaultValueAccessor,s.NgControlStatus,s.NgModel,s["\u0275angular_packages_forms_forms_y"],s.NgControlStatusGroup,s.FormGroupDirective,s.FormControlName,s.RequiredValidator,i.NgIf,_r.a,Yr,s.FormGroupName,ge.MatCheckbox,y.MatError],pipes:[i.AsyncPipe,f.TranslatePipe],styles:[""]}),t}(Cn.a);!function(){r["\u0275setClassMetadata"](Zr,[{type:r.Component,args:[{selector:"tb-device",templateUrl:"./device.component.html",styleUrls:["./device.component.scss"]}]}],(function(){return[{type:m.Store},{type:f.TranslateService},{type:void 0,decorators:[{type:r.Inject,args:["entity"]}]},{type:In.d,decorators:[{type:r.Inject,args:["entitiesTableConfig"]}]},{type:s.FormBuilder}]}),null)}();var ei=n("XNiG"),ti=n("LRne"),ni=n("DaoB"),ri=n("gM18"),ii=n("JTB5"),ai=function(e){function t(t){var n=e.call(this,t)||this;return n.store=t,n.entityType=kn.b,n}return Object(o.d)(t,e),t.prototype.deviceProfileChanged=function(e){this.entitiesTableConfig.componentsData.deviceProfileId=e,this.entitiesTableConfig.table.resetSortAndFilter(!0)},t.\u0275fac=function(e){return new(e||t)(r["\u0275\u0275directiveInject"](m.Store))},t.\u0275cmp=r["\u0275\u0275defineComponent"]({type:t,selectors:[["tb-device-table-header"]],features:[r["\u0275\u0275InheritDefinitionFeature"]],decls:1,vars:3,consts:[[3,"ngModel","displayAllOnEmpty","editProfileEnabled","ngModelChange"]],template:function(e,t){1&e&&(r["\u0275\u0275elementStart"](0,"tb-device-profile-autocomplete",0),r["\u0275\u0275listener"]("ngModelChange",(function(e){return t.deviceProfileChanged(e)})),r["\u0275\u0275elementEnd"]()),2&e&&r["\u0275\u0275property"]("ngModel",t.entitiesTableConfig.componentsData.deviceProfileId)("displayAllOnEmpty",!0)("editProfileEnabled",!1)},directives:[_r.a,s.NgControlStatus,s.NgModel],styles:["[_nghost-%COMP%]{-ms-flex:1;flex:1;display:-ms-flexbox;display:flex;-ms-flex-pack:start;justify-content:flex-start;min-width:150px}[_nghost-%COMP%]     tb-device-profile-autocomplete{width:100%}[_nghost-%COMP%]     tb-device-profile-autocomplete mat-form-field{font-size:16px}[_nghost-%COMP%]     tb-device-profile-autocomplete mat-form-field .mat-form-field-wrapper{padding-bottom:0}[_nghost-%COMP%]     tb-device-profile-autocomplete mat-form-field .mat-form-field-underline{bottom:0}@media screen and (max-width:599px){[_nghost-%COMP%]     tb-device-profile-autocomplete mat-form-field{width:100%}[_nghost-%COMP%]     tb-device-profile-autocomplete mat-form-field .mat-form-field-infix{width:auto!important}}"]}),t}(ii.a);!function(){r["\u0275setClassMetadata"](ai,[{type:r.Component,args:[{selector:"tb-device-table-header",templateUrl:"./device-table-header.component.html",styleUrls:["./device-table-header.component.scss"]}]}],(function(){return[{type:m.Store}]}),null)}();var oi=n("10n/");function li(e,t){1&e&&r["\u0275\u0275element"](0,"mat-progress-bar",14)}function si(e,t){1&e&&r["\u0275\u0275element"](0,"div",15)}function di(e,t){if(1&e&&(r["\u0275\u0275elementStart"](0,"button",16),r["\u0275\u0275pipe"](1,"async"),r["\u0275\u0275text"](2),r["\u0275\u0275pipe"](3,"translate"),r["\u0275\u0275elementEnd"]()),2&e){var n=r["\u0275\u0275nextContext"]();r["\u0275\u0275property"]("disabled",r["\u0275\u0275pipeBind1"](1,2,n.isLoading$)||n.deviceCredentialsFormGroup.invalid||!n.deviceCredentialsFormGroup.dirty),r["\u0275\u0275advance"](2),r["\u0275\u0275textInterpolate1"](" ",r["\u0275\u0275pipeBind1"](3,4,"action.save")," ")}}var ci=function(e){function t(t,n,r,i,a,o,l){var s=e.call(this,t,n,o)||this;return s.store=t,s.router=n,s.data=r,s.deviceService=i,s.errorStateMatcher=a,s.dialogRef=o,s.fb=l,s.submitted=!1,s.deviceCredentialsType=Lr.g,s.credentialsTypes=Object.keys(Lr.g),s.credentialTypeNamesMap=Lr.r,s.hidePassword=!0,s.isReadOnly=r.isReadOnly,s}return Object(o.d)(t,e),t.prototype.ngOnInit=function(){this.deviceCredentialsFormGroup=this.fb.group({credential:[null]}),this.isReadOnly&&this.deviceCredentialsFormGroup.disable({emitEvent:!1}),this.loadDeviceCredentials()},t.prototype.isErrorState=function(e,t){var n=this.errorStateMatcher.isErrorState(e,t),r=!!(e&&e.invalid&&this.submitted);return n||r},t.prototype.loadDeviceCredentials=function(){var e=this;this.deviceService.getDeviceCredentials(this.data.deviceId).subscribe((function(t){e.deviceCredentials=t,e.deviceCredentialsFormGroup.patchValue({credential:t},{emitEvent:!1})}))},t.prototype.cancel=function(){this.dialogRef.close(null)},t.prototype.save=function(){var e=this;this.submitted=!0;var t=this.deviceCredentialsFormGroup.value.credential;this.deviceCredentials=Object(o.a)(Object(o.a)({},this.deviceCredentials),t),this.deviceService.saveDeviceCredentials(this.deviceCredentials).subscribe((function(t){e.dialogRef.close(t)}))},t.\u0275fac=function(e){return new(e||t)(r["\u0275\u0275directiveInject"](m.Store),r["\u0275\u0275directiveInject"](a.Router),r["\u0275\u0275directiveInject"](ft.MAT_DIALOG_DATA),r["\u0275\u0275directiveInject"](ni.a),r["\u0275\u0275directiveInject"](I.ErrorStateMatcher,4),r["\u0275\u0275directiveInject"](ft.MatDialogRef),r["\u0275\u0275directiveInject"](s.FormBuilder))},t.\u0275cmp=r["\u0275\u0275defineComponent"]({type:t,selectors:[["tb-device-credentials-dialog"]],features:[r["\u0275\u0275ProvidersFeature"]([{provide:I.ErrorStateMatcher,useExisting:t}]),r["\u0275\u0275InheritDefinitionFeature"]],decls:22,vars:17,consts:[[2,"min-width","350px",3,"formGroup","ngSubmit"],["color","primary"],["translate",""],["fxFlex",""],["mat-icon-button","","type","button",3,"click"],[1,"material-icons"],["color","warn","mode","indeterminate",4,"ngIf"],["style","height: 4px;",4,"ngIf"],["mat-dialog-content",""],[3,"disabled"],["formControlName","credential"],["mat-dialog-actions","","fxLayoutAlign","end center"],["mat-button","","color","primary","type","button","cdkFocusInitial","",3,"disabled","click"],["mat-raised-button","","color","primary","type","submit",3,"disabled",4,"ngIf"],["color","warn","mode","indeterminate"],[2,"height","4px"],["mat-raised-button","","color","primary","type","submit",3,"disabled"]],template:function(e,t){1&e&&(r["\u0275\u0275elementStart"](0,"form",0),r["\u0275\u0275listener"]("ngSubmit",(function(){return t.save()})),r["\u0275\u0275elementStart"](1,"mat-toolbar",1),r["\u0275\u0275elementStart"](2,"h2",2),r["\u0275\u0275text"](3,"device.device-credentials"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275element"](4,"span",3),r["\u0275\u0275elementStart"](5,"button",4),r["\u0275\u0275listener"]("click",(function(){return t.cancel()})),r["\u0275\u0275elementStart"](6,"mat-icon",5),r["\u0275\u0275text"](7,"close"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275template"](8,li,1,0,"mat-progress-bar",6),r["\u0275\u0275pipe"](9,"async"),r["\u0275\u0275template"](10,si,1,0,"div",7),r["\u0275\u0275pipe"](11,"async"),r["\u0275\u0275elementStart"](12,"div",8),r["\u0275\u0275elementStart"](13,"fieldset",9),r["\u0275\u0275pipe"](14,"async"),r["\u0275\u0275element"](15,"tb-device-credentials",10),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](16,"div",11),r["\u0275\u0275elementStart"](17,"button",12),r["\u0275\u0275listener"]("click",(function(){return t.cancel()})),r["\u0275\u0275pipe"](18,"async"),r["\u0275\u0275text"](19),r["\u0275\u0275pipe"](20,"translate"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275template"](21,di,4,6,"button",13),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()),2&e&&(r["\u0275\u0275property"]("formGroup",t.deviceCredentialsFormGroup),r["\u0275\u0275advance"](8),r["\u0275\u0275property"]("ngIf",r["\u0275\u0275pipeBind1"](9,7,t.isLoading$)),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("ngIf",!r["\u0275\u0275pipeBind1"](11,9,t.isLoading$)),r["\u0275\u0275advance"](3),r["\u0275\u0275property"]("disabled",r["\u0275\u0275pipeBind1"](14,11,t.isLoading$)||t.isReadOnly),r["\u0275\u0275advance"](4),r["\u0275\u0275property"]("disabled",r["\u0275\u0275pipeBind1"](18,13,t.isLoading$)),r["\u0275\u0275advance"](2),r["\u0275\u0275textInterpolate1"](" ",r["\u0275\u0275pipeBind1"](20,15,t.isReadOnly?"action.close":"action.cancel")," "),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("ngIf",!t.isReadOnly))},directives:[s["\u0275angular_packages_forms_forms_y"],s.NgControlStatusGroup,s.FormGroupDirective,ht.MatToolbar,f.TranslateDirective,h.b,w.MatButton,be.MatIcon,i.NgIf,ft.MatDialogContent,oi.a,s.NgControlStatus,s.FormControlName,ft.MatDialogActions,h.e,C.MatProgressBar],pipes:[i.AsyncPipe,f.TranslatePipe],encapsulation:2}),t}(gt.a);!function(){r["\u0275setClassMetadata"](ci,[{type:r.Component,args:[{selector:"tb-device-credentials-dialog",templateUrl:"./device-credentials-dialog.component.html",providers:[{provide:I.ErrorStateMatcher,useExisting:ci}],styleUrls:[]}]}],(function(){return[{type:m.Store},{type:a.Router},{type:void 0,decorators:[{type:r.Inject,args:[ft.MAT_DIALOG_DATA]}]},{type:ni.a},{type:I.ErrorStateMatcher,decorators:[{type:r.SkipSelf}]},{type:ft.MatDialogRef},{type:s.FormBuilder}]}),null)}();var ui=n("uPsX"),pi=n("tM37");function mi(e,t){if(1&e&&(r["\u0275\u0275elementStart"](0,"mat-tab",1,2),r["\u0275\u0275pipe"](2,"translate"),r["\u0275\u0275element"](3,"tb-attribute-table",3),r["\u0275\u0275elementEnd"]()),2&e){var n=r["\u0275\u0275reference"](1),i=r["\u0275\u0275nextContext"]();r["\u0275\u0275propertyInterpolate"]("label",r["\u0275\u0275pipeBind1"](2,5,"attribute.attributes")),r["\u0275\u0275advance"](3),r["\u0275\u0275property"]("defaultAttributeScope",i.attributeScopes.CLIENT_SCOPE)("active",n.isActive)("entityId",i.entity.id)("entityName",i.entity.name)}}function fi(e,t){if(1&e&&(r["\u0275\u0275elementStart"](0,"mat-tab",1,4),r["\u0275\u0275pipe"](2,"translate"),r["\u0275\u0275element"](3,"tb-attribute-table",5),r["\u0275\u0275elementEnd"]()),2&e){var n=r["\u0275\u0275reference"](1),i=r["\u0275\u0275nextContext"]();r["\u0275\u0275propertyInterpolate"]("label",r["\u0275\u0275pipeBind1"](2,5,"attribute.latest-telemetry")),r["\u0275\u0275advance"](3),r["\u0275\u0275property"]("defaultAttributeScope",i.latestTelemetryTypes.LATEST_TELEMETRY)("active",n.isActive)("entityId",i.entity.id)("entityName",i.entity.name)}}function gi(e,t){if(1&e&&(r["\u0275\u0275elementStart"](0,"mat-tab",1,6),r["\u0275\u0275pipe"](2,"translate"),r["\u0275\u0275element"](3,"tb-alarm-table",7),r["\u0275\u0275elementEnd"]()),2&e){var n=r["\u0275\u0275reference"](1),i=r["\u0275\u0275nextContext"]();r["\u0275\u0275propertyInterpolate"]("label",r["\u0275\u0275pipeBind1"](2,3,"alarm.alarms")),r["\u0275\u0275advance"](3),r["\u0275\u0275property"]("active",n.isActive)("entityId",i.entity.id)}}function hi(e,t){if(1&e&&(r["\u0275\u0275elementStart"](0,"mat-tab",1,8),r["\u0275\u0275pipe"](2,"translate"),r["\u0275\u0275element"](3,"tb-event-table",9),r["\u0275\u0275elementEnd"]()),2&e){var n=r["\u0275\u0275reference"](1),i=r["\u0275\u0275nextContext"]();r["\u0275\u0275propertyInterpolate"]("label",r["\u0275\u0275pipeBind1"](2,5,"device.events")),r["\u0275\u0275advance"](3),r["\u0275\u0275property"]("defaultEventType",i.eventTypes.ERROR)("active",n.isActive)("tenantId",i.entity.tenantId.id)("entityId",i.entity.id)}}function bi(e,t){if(1&e&&(r["\u0275\u0275elementStart"](0,"mat-tab",1,10),r["\u0275\u0275pipe"](2,"translate"),r["\u0275\u0275element"](3,"tb-relation-table",7),r["\u0275\u0275elementEnd"]()),2&e){var n=r["\u0275\u0275reference"](1),i=r["\u0275\u0275nextContext"]();r["\u0275\u0275propertyInterpolate"]("label",r["\u0275\u0275pipeBind1"](2,3,"relation.relations")),r["\u0275\u0275advance"](3),r["\u0275\u0275property"]("active",n.isActive)("entityId",i.entity.id)}}function yi(e,t){if(1&e&&(r["\u0275\u0275elementStart"](0,"mat-tab",1,11),r["\u0275\u0275pipe"](2,"translate"),r["\u0275\u0275element"](3,"tb-audit-log-table",12),r["\u0275\u0275elementEnd"]()),2&e){var n=r["\u0275\u0275reference"](1),i=r["\u0275\u0275nextContext"]();r["\u0275\u0275propertyInterpolate"]("label",r["\u0275\u0275pipeBind1"](2,4,"audit-log.audit-logs")),r["\u0275\u0275advance"](3),r["\u0275\u0275property"]("active",n.isActive)("auditLogMode",i.auditLogModes.ENTITY)("entityId",i.entity.id)}}var vi=function(e){function t(t){var n=e.call(this,t)||this;return n.store=t,n}return Object(o.d)(t,e),t.prototype.ngOnInit=function(){e.prototype.ngOnInit.call(this)},t.\u0275fac=function(e){return new(e||t)(r["\u0275\u0275directiveInject"](m.Store))},t.\u0275cmp=r["\u0275\u0275defineComponent"]({type:t,selectors:[["tb-device-tabs"]],features:[r["\u0275\u0275InheritDefinitionFeature"]],decls:6,vars:6,consts:[[3,"label",4,"ngIf"],[3,"label"],["attributesTab","matTab"],[3,"defaultAttributeScope","active","entityId","entityName"],["telemetryTab","matTab"],["disableAttributeScopeSelection","",3,"defaultAttributeScope","active","entityId","entityName"],["alarmsTab","matTab"],[3,"active","entityId"],["eventsTab","matTab"],[3,"defaultEventType","active","tenantId","entityId"],["relationsTab","matTab"],["auditLogsTab","matTab"],["detailsMode","true",3,"active","auditLogMode","entityId"]],template:function(e,t){1&e&&(r["\u0275\u0275template"](0,mi,4,7,"mat-tab",0),r["\u0275\u0275template"](1,fi,4,7,"mat-tab",0),r["\u0275\u0275template"](2,gi,4,5,"mat-tab",0),r["\u0275\u0275template"](3,hi,4,7,"mat-tab",0),r["\u0275\u0275template"](4,bi,4,5,"mat-tab",0),r["\u0275\u0275template"](5,yi,4,6,"mat-tab",0)),2&e&&(r["\u0275\u0275property"]("ngIf",t.entity),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",t.entity),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",t.entity),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",t.entity),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",t.entity),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",t.entity&&t.authUser.authority===t.authorities.TENANT_ADMIN))},directives:[i.NgIf,xe.MatTab,On.a,_n.a,Bn.a,jn.a,fr.a],pipes:[f.TranslatePipe],encapsulation:2}),t}(Ln.a);!function(){r["\u0275setClassMetadata"](vi,[{type:r.Component,args:[{selector:"tb-device-tabs",templateUrl:"./device-tabs.component.html",styleUrls:[]}]}],(function(){return[{type:m.Store}]}),null)}();var xi=n("SZX/"),Si=n("TRkj"),wi=function(){function e(e,t,n,r,i,a,o,l,s,d){var c=this;this.store=e,this.broadcast=t,this.deviceService=n,this.customerService=r,this.dialogService=i,this.homeDialogs=a,this.translate=o,this.datePipe=l,this.router=s,this.dialog=d,this.config=new In.d,this.config.entityType=kn.b.DEVICE,this.config.entityComponent=Zr,this.config.entityTabsComponent=vi,this.config.entityTranslations=kn.d.get(kn.b.DEVICE),this.config.entityResources=kn.c.get(kn.b.DEVICE),this.config.addDialogStyle={width:"600px"},this.config.deleteEntityTitle=function(e){return c.translate.instant("device.delete-device-title",{deviceName:e.name})},this.config.deleteEntityContent=function(){return c.translate.instant("device.delete-device-text")},this.config.deleteEntitiesTitle=function(e){return c.translate.instant("device.delete-devices-title",{count:e})},this.config.deleteEntitiesContent=function(){return c.translate.instant("device.delete-devices-text")},this.config.loadEntity=function(e){return c.deviceService.getDeviceInfo(e.id)},this.config.saveEntity=function(e){return c.deviceService.saveDevice(e).pipe(Object(er.a)((function(){c.broadcast.broadcast("deviceSaved")})),Object($n.b)((function(e){return c.deviceService.getDeviceInfo(e.id.id)})))},this.config.onEntityAction=function(e){return c.onDeviceAction(e)},this.config.detailsReadonly=function(){return"customer_user"===c.config.componentsData.deviceScope},this.config.headerComponent=ai}return e.prototype.resolve=function(e){var t=this,n=e.params;return this.config.componentsData={deviceScope:e.data.devicesType,deviceProfileId:null,deviceCredentials$:new ei.b},this.customerId=n.customerId,this.store.pipe(Object(m.select)(z.d),Object(G.a)(1)).pipe(Object(er.a)((function(e){e.authority===$.a.CUSTOMER_USER&&(t.config.componentsData.deviceScope="customer_user",t.customerId=e.customerId)})),Object($n.b)((function(){return t.customerId?t.customerService.getCustomer(t.customerId):Object(ti.a)(null)})),Object(Hn.a)((function(e){return e?e.additionalInfo&&e.additionalInfo.isPublic?t.config.tableTitle=t.translate.instant("customer.public-devices"):t.config.tableTitle=e.title+": "+t.translate.instant("device.devices"):t.config.tableTitle=t.translate.instant("device.devices"),t.config.columns=t.configureColumns(t.config.componentsData.deviceScope),t.configureEntityFunctions(t.config.componentsData.deviceScope),t.config.cellActionDescriptors=t.configureCellActions(t.config.componentsData.deviceScope),t.config.groupActionDescriptors=t.configureGroupActions(t.config.componentsData.deviceScope),t.config.addActionDescriptors=t.configureAddActions(t.config.componentsData.deviceScope),t.config.addEnabled="customer_user"!==t.config.componentsData.deviceScope,t.config.entitiesDeleteEnabled="tenant"===t.config.componentsData.deviceScope,t.config.deleteEnabled=function(){return"tenant"===t.config.componentsData.deviceScope},t.config})))},e.prototype.configureColumns=function(e){var t=[new In.a("createdTime","common.created-time",this.datePipe,"150px"),new In.c("name","device.name","25%"),new In.c("deviceProfileName","device-profile.device-profile","25%"),new In.c("label","device.label","25%")];return"tenant"===e&&t.push(new In.c("customerTitle","customer.customer","25%"),new In.c("customerIsPublic","device.public","60px",(function(e){return Object(In.e)(e.customerIsPublic)}),(function(){return{}}),!1)),t.push(new In.c("gateway","device.is-gateway","60px",(function(e){return Object(In.e)(e.additionalInfo&&e.additionalInfo.gateway)}),(function(){return{}}),!1)),t},e.prototype.configureEntityFunctions=function(e){var t=this;"tenant"===e?(this.config.entitiesFetchFunction=function(e){return t.deviceService.getTenantDeviceInfosByDeviceProfileId(e,null!==t.config.componentsData.deviceProfileId?t.config.componentsData.deviceProfileId.id:"")},this.config.deleteEntity=function(e){return t.deviceService.deleteDevice(e.id)}):(this.config.entitiesFetchFunction=function(e){return t.deviceService.getCustomerDeviceInfosByDeviceProfileId(t.customerId,e,null!==t.config.componentsData.deviceProfileId?t.config.componentsData.deviceProfileId.id:"")},this.config.deleteEntity=function(e){return t.deviceService.unassignDeviceFromCustomer(e.id)})},e.prototype.configureCellActions=function(e){var t=this,n=[];return"tenant"===e&&n.push({name:this.translate.instant("device.make-public"),icon:"share",isEnabled:function(e){return!e.customerId||e.customerId.id===mr.a},onAction:function(e,n){return t.makePublic(e,n)}},{name:this.translate.instant("device.assign-to-customer"),icon:"assignment_ind",isEnabled:function(e){return!e.customerId||e.customerId.id===mr.a},onAction:function(e,n){return t.assignToCustomer(e,[n.id])}},{name:this.translate.instant("device.unassign-from-customer"),icon:"assignment_return",isEnabled:function(e){return e.customerId&&e.customerId.id!==mr.a&&!e.customerIsPublic},onAction:function(e,n){return t.unassignFromCustomer(e,n)}},{name:this.translate.instant("device.make-private"),icon:"reply",isEnabled:function(e){return e.customerId&&e.customerId.id!==mr.a&&e.customerIsPublic},onAction:function(e,n){return t.unassignFromCustomer(e,n)}},{name:this.translate.instant("device.manage-credentials"),icon:"security",isEnabled:function(){return!0},onAction:function(e,n){return t.manageCredentials(e,n)}}),"customer"===e&&n.push({name:this.translate.instant("device.unassign-from-customer"),icon:"assignment_return",isEnabled:function(e){return e.customerId&&e.customerId.id!==mr.a&&!e.customerIsPublic},onAction:function(e,n){return t.unassignFromCustomer(e,n)}},{name:this.translate.instant("device.make-private"),icon:"reply",isEnabled:function(e){return e.customerId&&e.customerId.id!==mr.a&&e.customerIsPublic},onAction:function(e,n){return t.unassignFromCustomer(e,n)}},{name:this.translate.instant("device.manage-credentials"),icon:"security",isEnabled:function(){return!0},onAction:function(e,n){return t.manageCredentials(e,n)}}),"customer_user"===e&&n.push({name:this.translate.instant("device.view-credentials"),icon:"security",isEnabled:function(){return!0},onAction:function(e,n){return t.manageCredentials(e,n)}}),n},e.prototype.configureGroupActions=function(e){var t=this,n=[];return"tenant"===e&&n.push({name:this.translate.instant("device.assign-devices"),icon:"assignment_ind",isEnabled:!0,onAction:function(e,n){return t.assignToCustomer(e,n.map((function(e){return e.id})))}}),"customer"===e&&n.push({name:this.translate.instant("device.unassign-devices"),icon:"assignment_return",isEnabled:!0,onAction:function(e,n){return t.unassignDevicesFromCustomer(e,n)}}),n},e.prototype.configureAddActions=function(e){var t=this,n=[];return"tenant"===e&&n.push({name:this.translate.instant("device.add-device-text"),icon:"insert_drive_file",isEnabled:function(){return!0},onAction:function(e){return t.deviceWizard(e)}},{name:this.translate.instant("device.import"),icon:"file_upload",isEnabled:function(){return!0},onAction:function(e){return t.importDevices(e)}}),"customer"===e&&n.push({name:this.translate.instant("device.assign-new-device"),icon:"add",isEnabled:function(){return!0},onAction:function(e){return t.addDevicesToCustomer(e)}}),n},e.prototype.importDevices=function(e){var t=this;this.homeDialogs.importEntities(kn.b.DEVICE).subscribe((function(e){e&&(t.broadcast.broadcast("deviceSaved"),t.config.table.updateData())}))},e.prototype.deviceWizard=function(e){var t=this;this.dialog.open(Si.a,{disableClose:!0,panelClass:["tb-dialog","tb-fullscreen-dialog"],data:{entitiesTableConfig:this.config.table.entitiesTableConfig}}).afterClosed().subscribe((function(e){e&&t.config.table.updateData()}))},e.prototype.addDevicesToCustomer=function(e){var t=this;e&&e.stopPropagation(),this.dialog.open(pi.a,{disableClose:!0,panelClass:["tb-dialog","tb-fullscreen-dialog"],data:{customerId:this.customerId,entityType:kn.b.DEVICE}}).afterClosed().subscribe((function(e){e&&t.config.table.updateData()}))},e.prototype.makePublic=function(e,t){var n=this;e&&e.stopPropagation(),this.dialogService.confirm(this.translate.instant("device.make-public-device-title",{deviceName:t.name}),this.translate.instant("device.make-public-device-text"),this.translate.instant("action.no"),this.translate.instant("action.yes"),!0).subscribe((function(e){e&&n.deviceService.makeDevicePublic(t.id.id).subscribe((function(){n.config.table.updateData()}))}))},e.prototype.assignToCustomer=function(e,t){var n=this;e&&e.stopPropagation(),this.dialog.open(ui.a,{disableClose:!0,panelClass:["tb-dialog","tb-fullscreen-dialog"],data:{entityIds:t,entityType:kn.b.DEVICE}}).afterClosed().subscribe((function(e){e&&n.config.table.updateData()}))},e.prototype.unassignFromCustomer=function(e,t){var n,r,i=this;e&&e.stopPropagation(),t.customerIsPublic?(n=this.translate.instant("device.make-private-device-title",{deviceName:t.name}),r=this.translate.instant("device.make-private-device-text")):(n=this.translate.instant("device.unassign-device-title",{deviceName:t.name}),r=this.translate.instant("device.unassign-device-text")),this.dialogService.confirm(n,r,this.translate.instant("action.no"),this.translate.instant("action.yes"),!0).subscribe((function(e){e&&i.deviceService.unassignDeviceFromCustomer(t.id.id).subscribe((function(){i.config.table.updateData()}))}))},e.prototype.unassignDevicesFromCustomer=function(e,t){var n=this;e&&e.stopPropagation(),this.dialogService.confirm(this.translate.instant("device.unassign-devices-title",{count:t.length}),this.translate.instant("device.unassign-devices-text"),this.translate.instant("action.no"),this.translate.instant("action.yes"),!0).subscribe((function(e){if(e){var r=[];t.forEach((function(e){r.push(n.deviceService.unassignDeviceFromCustomer(e.id.id))})),Object(me.a)(r).subscribe((function(){n.config.table.updateData()}))}}))},e.prototype.manageCredentials=function(e,t){var n=this;e&&e.stopPropagation(),this.dialog.open(ci,{disableClose:!0,panelClass:["tb-dialog","tb-fullscreen-dialog"],data:{deviceId:t.id.id,isReadOnly:"customer_user"===this.config.componentsData.deviceScope}}).afterClosed().subscribe((function(e){Object(p.o)(e)&&n.config.componentsData.deviceCredentials$.next(e)}))},e.prototype.onDeviceAction=function(e){switch(e.action){case"makePublic":return this.makePublic(e.event,e.entity),!0;case"assignToCustomer":return this.assignToCustomer(e.event,[e.entity.id]),!0;case"unassignFromCustomer":return this.unassignFromCustomer(e.event,e.entity),!0;case"manageCredentials":return this.manageCredentials(e.event,e.entity),!0}return!1},e.\u0275fac=function(t){return new(t||e)(r["\u0275\u0275inject"](m.Store),r["\u0275\u0275inject"](ri.a),r["\u0275\u0275inject"](ni.a),r["\u0275\u0275inject"](Zn.a),r["\u0275\u0275inject"](U.a),r["\u0275\u0275inject"](xi.a),r["\u0275\u0275inject"](f.TranslateService),r["\u0275\u0275inject"](i.DatePipe),r["\u0275\u0275inject"](a.Router),r["\u0275\u0275inject"](ft.MatDialog))},e.\u0275prov=r["\u0275\u0275defineInjectable"]({token:e,factory:e.\u0275fac}),e}();!function(){r["\u0275setClassMetadata"](wi,[{type:r.Injectable}],(function(){return[{type:m.Store},{type:ri.a},{type:ni.a},{type:Zn.a},{type:U.a},{type:xi.a},{type:f.TranslateService},{type:i.DatePipe},{type:a.Router},{type:ft.MatDialog}]}),null)}();var Ci=n("1y+p"),Ii=n("6XAR");function Ei(e,t){1&e&&(r["\u0275\u0275elementStart"](0,"mat-error"),r["\u0275\u0275text"](1),r["\u0275\u0275pipe"](2,"translate"),r["\u0275\u0275elementEnd"]()),2&e&&(r["\u0275\u0275advance"](1),r["\u0275\u0275textInterpolate1"](" ",r["\u0275\u0275pipeBind1"](2,1,"asset.name-required")," "))}var Ti=function(e){function t(t,n,r,i,a){var o=e.call(this,t,a,r,i)||this;return o.store=t,o.translate=n,o.entityValue=r,o.entitiesTableConfigValue=i,o.fb=a,o.entityType=kn.b,o}return Object(o.d)(t,e),t.prototype.ngOnInit=function(){this.assetScope=this.entitiesTableConfig.componentsData.assetScope,e.prototype.ngOnInit.call(this)},t.prototype.hideDelete=function(){return!!this.entitiesTableConfig&&!this.entitiesTableConfig.deleteEnabled(this.entity)},t.prototype.isAssignedToCustomer=function(e){return e&&e.customerId&&e.customerId.id!==mr.a},t.prototype.buildForm=function(e){return this.fb.group({name:[e?e.name:"",[s.Validators.required]],type:[e?e.type:null,[s.Validators.required]],label:[e?e.label:""],additionalInfo:this.fb.group({description:[e&&e.additionalInfo?e.additionalInfo.description:""]})})},t.prototype.updateForm=function(e){this.entityForm.patchValue({name:e.name}),this.entityForm.patchValue({type:e.type}),this.entityForm.patchValue({label:e.label}),this.entityForm.patchValue({additionalInfo:{description:e.additionalInfo?e.additionalInfo.description:""}})},t.prototype.onAssetIdCopied=function(e){this.store.dispatch(new u.b({message:this.translate.instant("asset.idCopiedMessage"),type:"success",duration:750,verticalPosition:"bottom",horizontalPosition:"right"}))},t.\u0275fac=function(e){return new(e||t)(r["\u0275\u0275directiveInject"](m.Store),r["\u0275\u0275directiveInject"](f.TranslateService),r["\u0275\u0275directiveInject"]("entity"),r["\u0275\u0275directiveInject"]("entitiesTableConfig"),r["\u0275\u0275directiveInject"](s.FormBuilder))},t.\u0275cmp=r["\u0275\u0275defineComponent"]({type:t,selectors:[["tb-asset"]],features:[r["\u0275\u0275InheritDefinitionFeature"]],decls:48,vars:43,consts:[["fxLayout.xs","column",1,"tb-details-buttons"],["mat-raised-button","","color","primary",3,"disabled","fxShow","click"],["fxLayout","row","fxLayout.xs","column"],["mat-raised-button","","ngxClipboard","",3,"cbContent","fxShow","cbOnSuccess"],["svgIcon","mdi:clipboard-arrow-left"],["translate",""],["fxLayout","column",1,"mat-padding"],[1,"mat-block",3,"fxShow"],["matInput","","disabled","",3,"ngModel"],[1,"tb-small",2,"padding-bottom","10px","padding-left","2px",3,"fxShow"],[3,"formGroup"],[3,"disabled"],[1,"mat-block"],["matInput","","formControlName","name","required",""],[4,"ngIf"],["formControlName","type",3,"required","entityType"],["matInput","","formControlName","label"],["formGroupName","additionalInfo"],["matInput","","formControlName","description","rows","2"]],template:function(e,t){1&e&&(r["\u0275\u0275elementStart"](0,"div",0),r["\u0275\u0275elementStart"](1,"button",1),r["\u0275\u0275listener"]("click",(function(e){return t.onEntityAction(e,"makePublic")})),r["\u0275\u0275pipe"](2,"async"),r["\u0275\u0275text"](3),r["\u0275\u0275pipe"](4,"translate"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](5,"button",1),r["\u0275\u0275listener"]("click",(function(e){return t.onEntityAction(e,"assignToCustomer")})),r["\u0275\u0275pipe"](6,"async"),r["\u0275\u0275text"](7),r["\u0275\u0275pipe"](8,"translate"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](9,"button",1),r["\u0275\u0275listener"]("click",(function(e){return t.onEntityAction(e,"unassignFromCustomer")})),r["\u0275\u0275pipe"](10,"async"),r["\u0275\u0275text"](11),r["\u0275\u0275pipe"](12,"translate"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](13,"button",1),r["\u0275\u0275listener"]("click",(function(e){return t.onEntityAction(e,"delete")})),r["\u0275\u0275pipe"](14,"async"),r["\u0275\u0275text"](15),r["\u0275\u0275pipe"](16,"translate"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](17,"div",2),r["\u0275\u0275elementStart"](18,"button",3),r["\u0275\u0275listener"]("cbOnSuccess",(function(e){return t.onAssetIdCopied(e)})),r["\u0275\u0275element"](19,"mat-icon",4),r["\u0275\u0275elementStart"](20,"span",5),r["\u0275\u0275text"](21,"asset.copyId"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](22,"div",6),r["\u0275\u0275elementStart"](23,"mat-form-field",7),r["\u0275\u0275elementStart"](24,"mat-label",5),r["\u0275\u0275text"](25,"asset.assignedToCustomer"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275element"](26,"input",8),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](27,"div",9),r["\u0275\u0275text"](28),r["\u0275\u0275pipe"](29,"translate"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](30,"form",10),r["\u0275\u0275elementStart"](31,"fieldset",11),r["\u0275\u0275pipe"](32,"async"),r["\u0275\u0275elementStart"](33,"mat-form-field",12),r["\u0275\u0275elementStart"](34,"mat-label",5),r["\u0275\u0275text"](35,"asset.name"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275element"](36,"input",13),r["\u0275\u0275template"](37,Ei,3,3,"mat-error",14),r["\u0275\u0275elementEnd"](),r["\u0275\u0275element"](38,"tb-entity-subtype-autocomplete",15),r["\u0275\u0275elementStart"](39,"mat-form-field",12),r["\u0275\u0275elementStart"](40,"mat-label",5),r["\u0275\u0275text"](41,"asset.label"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275element"](42,"input",16),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](43,"div",17),r["\u0275\u0275elementStart"](44,"mat-form-field",12),r["\u0275\u0275elementStart"](45,"mat-label",5),r["\u0275\u0275text"](46,"asset.description"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275element"](47,"textarea",18),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()),2&e&&(r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("disabled",r["\u0275\u0275pipeBind1"](2,23,t.isLoading$))("fxShow",!(t.isEdit||"tenant"!==t.assetScope||t.isAssignedToCustomer(t.entity)||null!=t.entity&&t.entity.customerIsPublic)),r["\u0275\u0275advance"](2),r["\u0275\u0275textInterpolate1"](" ",r["\u0275\u0275pipeBind1"](4,25,"asset.make-public")," "),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("disabled",r["\u0275\u0275pipeBind1"](6,27,t.isLoading$))("fxShow",!t.isEdit&&"tenant"===t.assetScope&&!t.isAssignedToCustomer(t.entity)),r["\u0275\u0275advance"](2),r["\u0275\u0275textInterpolate1"](" ",r["\u0275\u0275pipeBind1"](8,29,"asset.assign-to-customer")," "),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("disabled",r["\u0275\u0275pipeBind1"](10,31,t.isLoading$))("fxShow",!t.isEdit&&("customer"===t.assetScope||"tenant"===t.assetScope)&&t.isAssignedToCustomer(t.entity)),r["\u0275\u0275advance"](2),r["\u0275\u0275textInterpolate1"](" ",r["\u0275\u0275pipeBind1"](12,33,null!=t.entity&&t.entity.customerIsPublic?"asset.make-private":"asset.unassign-from-customer")," "),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("disabled",r["\u0275\u0275pipeBind1"](14,35,t.isLoading$))("fxShow",!t.hideDelete()&&!t.isEdit),r["\u0275\u0275advance"](2),r["\u0275\u0275textInterpolate1"](" ",r["\u0275\u0275pipeBind1"](16,37,"asset.delete")," "),r["\u0275\u0275advance"](3),r["\u0275\u0275property"]("cbContent",null==t.entity||null==t.entity.id?null:t.entity.id.id)("fxShow",!t.isEdit),r["\u0275\u0275advance"](5),r["\u0275\u0275property"]("fxShow",!t.isEdit&&t.isAssignedToCustomer(t.entity)&&!(null!=t.entity&&t.entity.customerIsPublic)&&"tenant"===t.assetScope),r["\u0275\u0275advance"](3),r["\u0275\u0275property"]("ngModel",null==t.entity?null:t.entity.customerTitle),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("fxShow",!t.isEdit&&(null==t.entity?null:t.entity.customerIsPublic)&&("customer"===t.assetScope||"tenant"===t.assetScope)),r["\u0275\u0275advance"](1),r["\u0275\u0275textInterpolate1"](" ",r["\u0275\u0275pipeBind1"](29,39,"asset.asset-public")," "),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("formGroup",t.entityForm),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("disabled",r["\u0275\u0275pipeBind1"](32,41,t.isLoading$)||!t.isEdit),r["\u0275\u0275advance"](6),r["\u0275\u0275property"]("ngIf",t.entityForm.get("name").hasError("required")),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("required",!0)("entityType",t.entityType.ASSET))},directives:[h.f,w.MatButton,ve.d,ye.a,be.MatIcon,f.TranslateDirective,y.MatFormField,y.MatLabel,v.MatInput,s.DefaultValueAccessor,s.NgControlStatus,s.NgModel,s["\u0275angular_packages_forms_forms_y"],s.NgControlStatusGroup,s.FormGroupDirective,s.FormControlName,s.RequiredValidator,i.NgIf,Ii.a,s.FormGroupName,y.MatError],pipes:[i.AsyncPipe,f.TranslatePipe],styles:[""]}),t}(Cn.a);!function(){r["\u0275setClassMetadata"](Ti,[{type:r.Component,args:[{selector:"tb-asset",templateUrl:"./asset.component.html",styleUrls:["./asset.component.scss"]}]}],(function(){return[{type:m.Store},{type:f.TranslateService},{type:void 0,decorators:[{type:r.Inject,args:["entity"]}]},{type:In.d,decorators:[{type:r.Inject,args:["entitiesTableConfig"]}]},{type:s.FormBuilder}]}),null)}();var Mi=n("4bh6"),Fi=function(e){function t(t){var n=e.call(this,t)||this;return n.store=t,n.entityType=kn.b,n}return Object(o.d)(t,e),t.prototype.assetTypeChanged=function(e){this.entitiesTableConfig.componentsData.assetType=e,this.entitiesTableConfig.table.resetSortAndFilter(!0)},t.\u0275fac=function(e){return new(e||t)(r["\u0275\u0275directiveInject"](m.Store))},t.\u0275cmp=r["\u0275\u0275defineComponent"]({type:t,selectors:[["tb-asset-table-header"]],features:[r["\u0275\u0275InheritDefinitionFeature"]],decls:1,vars:3,consts:[[3,"showLabel","entityType","ngModel","ngModelChange"]],template:function(e,t){1&e&&(r["\u0275\u0275elementStart"](0,"tb-entity-subtype-select",0),r["\u0275\u0275listener"]("ngModelChange",(function(e){return t.assetTypeChanged(e)})),r["\u0275\u0275elementEnd"]()),2&e&&r["\u0275\u0275property"]("showLabel",!0)("entityType",t.entityType.ASSET)("ngModel",t.entitiesTableConfig.componentsData.assetType)},directives:[Mi.a,s.NgControlStatus,s.NgModel],styles:["[_nghost-%COMP%]{-ms-flex:1;flex:1;display:-ms-flexbox;display:flex;-ms-flex-pack:start;justify-content:flex-start;min-width:150px}[_nghost-%COMP%]     tb-entity-subtype-select{width:100%}[_nghost-%COMP%]     tb-entity-subtype-select mat-form-field{font-size:16px}[_nghost-%COMP%]     tb-entity-subtype-select mat-form-field .mat-form-field-wrapper{padding-bottom:0}[_nghost-%COMP%]     tb-entity-subtype-select mat-form-field .mat-form-field-underline{bottom:0}@media screen and (max-width:599px){[_nghost-%COMP%]     tb-entity-subtype-select mat-form-field{width:100%}[_nghost-%COMP%]     tb-entity-subtype-select mat-form-field .mat-form-field-infix{width:auto!important}}"]}),t}(ii.a);function Di(e,t){if(1&e&&(r["\u0275\u0275elementStart"](0,"mat-tab",1,2),r["\u0275\u0275pipe"](2,"translate"),r["\u0275\u0275element"](3,"tb-attribute-table",3),r["\u0275\u0275elementEnd"]()),2&e){var n=r["\u0275\u0275reference"](1),i=r["\u0275\u0275nextContext"]();r["\u0275\u0275propertyInterpolate"]("label",r["\u0275\u0275pipeBind1"](2,5,"attribute.attributes")),r["\u0275\u0275advance"](3),r["\u0275\u0275property"]("defaultAttributeScope",i.attributeScopes.SERVER_SCOPE)("active",n.isActive)("entityId",i.entity.id)("entityName",i.entity.name)}}function Ai(e,t){if(1&e&&(r["\u0275\u0275elementStart"](0,"mat-tab",1,4),r["\u0275\u0275pipe"](2,"translate"),r["\u0275\u0275element"](3,"tb-attribute-table",5),r["\u0275\u0275elementEnd"]()),2&e){var n=r["\u0275\u0275reference"](1),i=r["\u0275\u0275nextContext"]();r["\u0275\u0275propertyInterpolate"]("label",r["\u0275\u0275pipeBind1"](2,5,"attribute.latest-telemetry")),r["\u0275\u0275advance"](3),r["\u0275\u0275property"]("defaultAttributeScope",i.latestTelemetryTypes.LATEST_TELEMETRY)("active",n.isActive)("entityId",i.entity.id)("entityName",i.entity.name)}}function Pi(e,t){if(1&e&&(r["\u0275\u0275elementStart"](0,"mat-tab",1,6),r["\u0275\u0275pipe"](2,"translate"),r["\u0275\u0275element"](3,"tb-alarm-table",7),r["\u0275\u0275elementEnd"]()),2&e){var n=r["\u0275\u0275reference"](1),i=r["\u0275\u0275nextContext"]();r["\u0275\u0275propertyInterpolate"]("label",r["\u0275\u0275pipeBind1"](2,3,"alarm.alarms")),r["\u0275\u0275advance"](3),r["\u0275\u0275property"]("active",n.isActive)("entityId",i.entity.id)}}function Ni(e,t){if(1&e&&(r["\u0275\u0275elementStart"](0,"mat-tab",1,8),r["\u0275\u0275pipe"](2,"translate"),r["\u0275\u0275element"](3,"tb-event-table",9),r["\u0275\u0275elementEnd"]()),2&e){var n=r["\u0275\u0275reference"](1),i=r["\u0275\u0275nextContext"]();r["\u0275\u0275propertyInterpolate"]("label",r["\u0275\u0275pipeBind1"](2,5,"asset.events")),r["\u0275\u0275advance"](3),r["\u0275\u0275property"]("defaultEventType",i.eventTypes.ERROR)("active",n.isActive)("tenantId",i.entity.tenantId.id)("entityId",i.entity.id)}}function ki(e,t){if(1&e&&(r["\u0275\u0275elementStart"](0,"mat-tab",1,10),r["\u0275\u0275pipe"](2,"translate"),r["\u0275\u0275element"](3,"tb-relation-table",7),r["\u0275\u0275elementEnd"]()),2&e){var n=r["\u0275\u0275reference"](1),i=r["\u0275\u0275nextContext"]();r["\u0275\u0275propertyInterpolate"]("label",r["\u0275\u0275pipeBind1"](2,3,"relation.relations")),r["\u0275\u0275advance"](3),r["\u0275\u0275property"]("active",n.isActive)("entityId",i.entity.id)}}function Li(e,t){if(1&e&&(r["\u0275\u0275elementStart"](0,"mat-tab",1,11),r["\u0275\u0275pipe"](2,"translate"),r["\u0275\u0275element"](3,"tb-audit-log-table",12),r["\u0275\u0275elementEnd"]()),2&e){var n=r["\u0275\u0275reference"](1),i=r["\u0275\u0275nextContext"]();r["\u0275\u0275propertyInterpolate"]("label",r["\u0275\u0275pipeBind1"](2,4,"audit-log.audit-logs")),r["\u0275\u0275advance"](3),r["\u0275\u0275property"]("active",n.isActive)("auditLogMode",i.auditLogModes.ENTITY)("entityId",i.entity.id)}}!function(){r["\u0275setClassMetadata"](Fi,[{type:r.Component,args:[{selector:"tb-asset-table-header",templateUrl:"./asset-table-header.component.html",styleUrls:["./asset-table-header.component.scss"]}]}],(function(){return[{type:m.Store}]}),null)}();var Oi=function(e){function t(t){var n=e.call(this,t)||this;return n.store=t,n}return Object(o.d)(t,e),t.prototype.ngOnInit=function(){e.prototype.ngOnInit.call(this)},t.\u0275fac=function(e){return new(e||t)(r["\u0275\u0275directiveInject"](m.Store))},t.\u0275cmp=r["\u0275\u0275defineComponent"]({type:t,selectors:[["tb-asset-tabs"]],features:[r["\u0275\u0275InheritDefinitionFeature"]],decls:6,vars:6,consts:[[3,"label",4,"ngIf"],[3,"label"],["attributesTab","matTab"],[3,"defaultAttributeScope","active","entityId","entityName"],["telemetryTab","matTab"],["disableAttributeScopeSelection","",3,"defaultAttributeScope","active","entityId","entityName"],["alarmsTab","matTab"],[3,"active","entityId"],["eventsTab","matTab"],[3,"defaultEventType","active","tenantId","entityId"],["relationsTab","matTab"],["auditLogsTab","matTab"],["detailsMode","true",3,"active","auditLogMode","entityId"]],template:function(e,t){1&e&&(r["\u0275\u0275template"](0,Di,4,7,"mat-tab",0),r["\u0275\u0275template"](1,Ai,4,7,"mat-tab",0),r["\u0275\u0275template"](2,Pi,4,5,"mat-tab",0),r["\u0275\u0275template"](3,Ni,4,7,"mat-tab",0),r["\u0275\u0275template"](4,ki,4,5,"mat-tab",0),r["\u0275\u0275template"](5,Li,4,6,"mat-tab",0)),2&e&&(r["\u0275\u0275property"]("ngIf",t.entity),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",t.entity),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",t.entity),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",t.entity),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",t.entity),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",t.entity&&t.authUser.authority===t.authorities.TENANT_ADMIN))},directives:[i.NgIf,xe.MatTab,On.a,_n.a,Bn.a,jn.a,fr.a],pipes:[f.TranslatePipe],encapsulation:2}),t}(Ln.a);!function(){r["\u0275setClassMetadata"](Oi,[{type:r.Component,args:[{selector:"tb-asset-tabs",templateUrl:"./asset-tabs.component.html",styleUrls:[]}]}],(function(){return[{type:m.Store}]}),null)}();var _i=function(){function e(e,t,n,r,i,a,o,l,s,d){var c=this;this.store=e,this.broadcast=t,this.assetService=n,this.customerService=r,this.dialogService=i,this.homeDialogs=a,this.translate=o,this.datePipe=l,this.router=s,this.dialog=d,this.config=new In.d,this.config.entityType=kn.b.ASSET,this.config.entityComponent=Ti,this.config.entityTabsComponent=Oi,this.config.entityTranslations=kn.d.get(kn.b.ASSET),this.config.entityResources=kn.c.get(kn.b.ASSET),this.config.deleteEntityTitle=function(e){return c.translate.instant("asset.delete-asset-title",{assetName:e.name})},this.config.deleteEntityContent=function(){return c.translate.instant("asset.delete-asset-text")},this.config.deleteEntitiesTitle=function(e){return c.translate.instant("asset.delete-assets-title",{count:e})},this.config.deleteEntitiesContent=function(){return c.translate.instant("asset.delete-assets-text")},this.config.loadEntity=function(e){return c.assetService.getAssetInfo(e.id)},this.config.saveEntity=function(e){return c.assetService.saveAsset(e).pipe(Object(er.a)((function(){c.broadcast.broadcast("assetSaved")})),Object($n.b)((function(e){return c.assetService.getAssetInfo(e.id.id)})))},this.config.onEntityAction=function(e){return c.onAssetAction(e)},this.config.detailsReadonly=function(){return"customer_user"===c.config.componentsData.assetScope},this.config.headerComponent=Fi}return e.prototype.resolve=function(e){var t=this,n=e.params;return this.config.componentsData={assetScope:e.data.assetsType,assetType:""},this.customerId=n.customerId,this.store.pipe(Object(m.select)(z.d),Object(G.a)(1)).pipe(Object(er.a)((function(e){e.authority===$.a.CUSTOMER_USER&&(t.config.componentsData.assetScope="customer_user",t.customerId=e.customerId)})),Object($n.b)((function(){return t.customerId?t.customerService.getCustomer(t.customerId):Object(ti.a)(null)})),Object(Hn.a)((function(e){return e?e.additionalInfo&&e.additionalInfo.isPublic?t.config.tableTitle=t.translate.instant("customer.public-assets"):t.config.tableTitle=e.title+": "+t.translate.instant("asset.assets"):t.config.tableTitle=t.translate.instant("asset.assets"),t.config.columns=t.configureColumns(t.config.componentsData.assetScope),t.configureEntityFunctions(t.config.componentsData.assetScope),t.config.cellActionDescriptors=t.configureCellActions(t.config.componentsData.assetScope),t.config.groupActionDescriptors=t.configureGroupActions(t.config.componentsData.assetScope),t.config.addActionDescriptors=t.configureAddActions(t.config.componentsData.assetScope),t.config.addEnabled="customer_user"!==t.config.componentsData.assetScope,t.config.entitiesDeleteEnabled="tenant"===t.config.componentsData.assetScope,t.config.deleteEnabled=function(){return"tenant"===t.config.componentsData.assetScope},t.config})))},e.prototype.configureColumns=function(e){var t=[new In.a("createdTime","common.created-time",this.datePipe,"150px"),new In.c("name","asset.name","25%"),new In.c("type","asset.asset-type","25%"),new In.c("label","asset.label","25%")];return"tenant"===e&&t.push(new In.c("customerTitle","customer.customer","25%"),new In.c("customerIsPublic","asset.public","60px",(function(e){return Object(In.e)(e.customerIsPublic)}),(function(){return{}}),!1)),t},e.prototype.configureEntityFunctions=function(e){var t=this;"tenant"===e?(this.config.entitiesFetchFunction=function(e){return t.assetService.getTenantAssetInfos(e,t.config.componentsData.assetType)},this.config.deleteEntity=function(e){return t.assetService.deleteAsset(e.id)}):(this.config.entitiesFetchFunction=function(e){return t.assetService.getCustomerAssetInfos(t.customerId,e,t.config.componentsData.assetType)},this.config.deleteEntity=function(e){return t.assetService.unassignAssetFromCustomer(e.id)})},e.prototype.configureCellActions=function(e){var t=this,n=[];return"tenant"===e&&n.push({name:this.translate.instant("asset.make-public"),icon:"share",isEnabled:function(e){return!e.customerId||e.customerId.id===mr.a},onAction:function(e,n){return t.makePublic(e,n)}},{name:this.translate.instant("asset.assign-to-customer"),icon:"assignment_ind",isEnabled:function(e){return!e.customerId||e.customerId.id===mr.a},onAction:function(e,n){return t.assignToCustomer(e,[n.id])}},{name:this.translate.instant("asset.unassign-from-customer"),icon:"assignment_return",isEnabled:function(e){return e.customerId&&e.customerId.id!==mr.a&&!e.customerIsPublic},onAction:function(e,n){return t.unassignFromCustomer(e,n)}},{name:this.translate.instant("asset.make-private"),icon:"reply",isEnabled:function(e){return e.customerId&&e.customerId.id!==mr.a&&e.customerIsPublic},onAction:function(e,n){return t.unassignFromCustomer(e,n)}}),"customer"===e&&n.push({name:this.translate.instant("asset.unassign-from-customer"),icon:"assignment_return",isEnabled:function(e){return e.customerId&&e.customerId.id!==mr.a&&!e.customerIsPublic},onAction:function(e,n){return t.unassignFromCustomer(e,n)}},{name:this.translate.instant("asset.make-private"),icon:"reply",isEnabled:function(e){return e.customerId&&e.customerId.id!==mr.a&&e.customerIsPublic},onAction:function(e,n){return t.unassignFromCustomer(e,n)}}),n},e.prototype.configureGroupActions=function(e){var t=this,n=[];return"tenant"===e&&n.push({name:this.translate.instant("asset.assign-assets"),icon:"assignment_ind",isEnabled:!0,onAction:function(e,n){return t.assignToCustomer(e,n.map((function(e){return e.id})))}}),"customer"===e&&n.push({name:this.translate.instant("asset.unassign-assets"),icon:"assignment_return",isEnabled:!0,onAction:function(e,n){return t.unassignAssetsFromCustomer(e,n)}}),n},e.prototype.configureAddActions=function(e){var t=this,n=[];return"tenant"===e&&n.push({name:this.translate.instant("asset.add-asset-text"),icon:"insert_drive_file",isEnabled:function(){return!0},onAction:function(e){return t.config.table.addEntity(e)}},{name:this.translate.instant("asset.import"),icon:"file_upload",isEnabled:function(){return!0},onAction:function(e){return t.importAssets(e)}}),"customer"===e&&n.push({name:this.translate.instant("asset.assign-new-asset"),icon:"add",isEnabled:function(){return!0},onAction:function(e){return t.addAssetsToCustomer(e)}}),n},e.prototype.importAssets=function(e){var t=this;this.homeDialogs.importEntities(kn.b.ASSET).subscribe((function(e){e&&(t.broadcast.broadcast("assetSaved"),t.config.table.updateData())}))},e.prototype.addAssetsToCustomer=function(e){var t=this;e&&e.stopPropagation(),this.dialog.open(pi.a,{disableClose:!0,panelClass:["tb-dialog","tb-fullscreen-dialog"],data:{customerId:this.customerId,entityType:kn.b.ASSET}}).afterClosed().subscribe((function(e){e&&t.config.table.updateData()}))},e.prototype.makePublic=function(e,t){var n=this;e&&e.stopPropagation(),this.dialogService.confirm(this.translate.instant("asset.make-public-asset-title",{assetName:t.name}),this.translate.instant("asset.make-public-asset-text"),this.translate.instant("action.no"),this.translate.instant("action.yes"),!0).subscribe((function(e){e&&n.assetService.makeAssetPublic(t.id.id).subscribe((function(){n.config.table.updateData()}))}))},e.prototype.assignToCustomer=function(e,t){var n=this;e&&e.stopPropagation(),this.dialog.open(ui.a,{disableClose:!0,panelClass:["tb-dialog","tb-fullscreen-dialog"],data:{entityIds:t,entityType:kn.b.ASSET}}).afterClosed().subscribe((function(e){e&&n.config.table.updateData()}))},e.prototype.unassignFromCustomer=function(e,t){var n,r,i=this;e&&e.stopPropagation(),t.customerIsPublic?(n=this.translate.instant("asset.make-private-asset-title",{assetName:t.name}),r=this.translate.instant("asset.make-private-asset-text")):(n=this.translate.instant("asset.unassign-asset-title",{assetName:t.name}),r=this.translate.instant("asset.unassign-asset-text")),this.dialogService.confirm(n,r,this.translate.instant("action.no"),this.translate.instant("action.yes"),!0).subscribe((function(e){e&&i.assetService.unassignAssetFromCustomer(t.id.id).subscribe((function(){i.config.table.updateData()}))}))},e.prototype.unassignAssetsFromCustomer=function(e,t){var n=this;e&&e.stopPropagation(),this.dialogService.confirm(this.translate.instant("asset.unassign-assets-title",{count:t.length}),this.translate.instant("asset.unassign-assets-text"),this.translate.instant("action.no"),this.translate.instant("action.yes"),!0).subscribe((function(e){if(e){var r=[];t.forEach((function(e){r.push(n.assetService.unassignAssetFromCustomer(e.id.id))})),Object(me.a)(r).subscribe((function(){n.config.table.updateData()}))}}))},e.prototype.onAssetAction=function(e){switch(e.action){case"makePublic":return this.makePublic(e.event,e.entity),!0;case"assignToCustomer":return this.assignToCustomer(e.event,[e.entity.id]),!0;case"unassignFromCustomer":return this.unassignFromCustomer(e.event,e.entity),!0}return!1},e.\u0275fac=function(t){return new(t||e)(r["\u0275\u0275inject"](m.Store),r["\u0275\u0275inject"](ri.a),r["\u0275\u0275inject"](Ci.a),r["\u0275\u0275inject"](Zn.a),r["\u0275\u0275inject"](U.a),r["\u0275\u0275inject"](xi.a),r["\u0275\u0275inject"](f.TranslateService),r["\u0275\u0275inject"](i.DatePipe),r["\u0275\u0275inject"](a.Router),r["\u0275\u0275inject"](ft.MatDialog))},e.\u0275prov=r["\u0275\u0275defineInjectable"]({token:e,factory:e.\u0275fac}),e}();!function(){r["\u0275setClassMetadata"](_i,[{type:r.Injectable}],(function(){return[{type:m.Store},{type:ri.a},{type:Ci.a},{type:Zn.a},{type:U.a},{type:xi.a},{type:f.TranslateService},{type:i.DatePipe},{type:a.Router},{type:ft.MatDialog}]}),null)}();var Bi=n("cX0b"),ji=n("ekQc"),Ri=[{path:"customers",data:{breadcrumb:{label:"customer.customers",icon:"supervisor_account"}},children:[{path:"",component:Pn.a,data:{auth:[$.a.TENANT_ADMIN],title:"customer.customers"},resolve:{entitiesTableConfig:kr}},{path:":customerId/users",component:Pn.a,data:{auth:[$.a.TENANT_ADMIN],title:"user.customer-users",breadcrumb:{label:"user.customer-users",icon:"account_circle"}},resolve:{entitiesTableConfig:vr}},{path:":customerId/devices",component:Pn.a,data:{auth:[$.a.TENANT_ADMIN],title:"customer.devices",devicesType:"customer",breadcrumb:{label:"customer.devices",icon:"devices_other"}},resolve:{entitiesTableConfig:wi}},{path:":customerId/assets",component:Pn.a,data:{auth:[$.a.TENANT_ADMIN],title:"customer.assets",assetsType:"customer",breadcrumb:{label:"customer.assets",icon:"domain"}},resolve:{entitiesTableConfig:_i}},{path:":customerId/dashboards",data:{breadcrumb:{label:"customer.dashboards",icon:"dashboard"}},children:[{path:"",component:Pn.a,data:{auth:[$.a.TENANT_ADMIN],title:"customer.dashboards",dashboardsType:"customer"},resolve:{entitiesTableConfig:Bi.a}},{path:":dashboardId",component:qt.a,data:{breadcrumb:{labelFunction:ji.c,icon:"dashboard"},auth:[$.a.TENANT_ADMIN,$.a.CUSTOMER_USER],title:"customer.dashboard",widgetEditMode:!1},resolve:{dashboard:ji.a}}]}]}],Vi=function(){function e(){}return e.\u0275mod=r["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=r["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},providers:[kr],imports:[[a.RouterModule.forChild(Ri)],a.RouterModule]}),e}();void(("undefined"==typeof ngJitMode||ngJitMode)&&r["\u0275\u0275setNgModuleScope"](Vi,{imports:[a.RouterModule],exports:[a.RouterModule]}));var zi=function(){function e(){}return e.\u0275mod=r["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=r["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[i.CommonModule,jt.a,Rt.a,Vi]]}),e}();void(("undefined"==typeof ngJitMode||ngJitMode)&&r["\u0275\u0275setNgModuleScope"](zi,{declarations:[Er,Nr],imports:[i.CommonModule,jt.a,Rt.a,Vi]}));var Gi=[{path:"auditLogs",component:fr.a,data:{auth:[$.a.TENANT_ADMIN],title:"audit-log.audit-logs",breadcrumb:{label:"audit-log.audit-logs",icon:"track_changes"}}}],Ui=function(){function e(){}return e.\u0275mod=r["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=r["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[a.RouterModule.forChild(Gi)],a.RouterModule]}),e}();void(("undefined"==typeof ngJitMode||ngJitMode)&&r["\u0275\u0275setNgModuleScope"](Ui,{imports:[a.RouterModule],exports:[a.RouterModule]}));var qi=function(){function e(){}return e.\u0275mod=r["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=r["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[i.CommonModule,jt.a,Ui]]}),e}();void(("undefined"==typeof ngJitMode||ngJitMode)&&r["\u0275\u0275setNgModuleScope"](qi,{imports:[i.CommonModule,jt.a,Ui]}));var $i=function(){function e(){}return e.\u0275mod=r["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=r["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},providers:[vr],imports:[[],a.RouterModule]}),e}();void(("undefined"==typeof ngJitMode||ngJitMode)&&r["\u0275\u0275setNgModuleScope"]($i,{exports:[a.RouterModule]}));var Wi=function(){function e(){}return e.\u0275mod=r["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=r["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[i.CommonModule,jt.a,Rt.a,$i]]}),e}();void(("undefined"==typeof ngJitMode||ngJitMode)&&r["\u0275\u0275setNgModuleScope"](Wi,{declarations:[Qn,yr,pr,or],imports:[i.CommonModule,jt.a,Rt.a,$i]}));var Hi=[{path:"devices",component:Pn.a,data:{auth:[$.a.TENANT_ADMIN,$.a.CUSTOMER_USER],title:"device.devices",devicesType:"tenant",breadcrumb:{label:"device.devices",icon:"devices_other"}},resolve:{entitiesTableConfig:wi}}],Ki=function(){function e(){}return e.\u0275mod=r["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=r["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},providers:[wi],imports:[[a.RouterModule.forChild(Hi)],a.RouterModule]}),e}();void(("undefined"==typeof ngJitMode||ngJitMode)&&r["\u0275\u0275setNgModuleScope"](Ki,{imports:[a.RouterModule],exports:[a.RouterModule]}));var Ji=n("M0Qk"),Yi=function(){function e(e,t){this.store=e,this.fb=t,this.propagateChange=function(e){}}return Object.defineProperty(e.prototype,"required",{get:function(){return this.requiredValue},set:function(e){this.requiredValue=Object(Br.coerceBooleanProperty)(e)},enumerable:!1,configurable:!0}),e.prototype.registerOnChange=function(e){this.propagateChange=e},e.prototype.registerOnTouched=function(e){},e.prototype.ngOnInit=function(){var e=this;this.lwm2mDeviceTransportConfigurationFormGroup=this.fb.group({configuration:[null,s.Validators.required]}),this.lwm2mDeviceTransportConfigurationFormGroup.valueChanges.subscribe((function(){e.updateModel()}))},e.prototype.setDisabledState=function(e){this.disabled=e,this.disabled?this.lwm2mDeviceTransportConfigurationFormGroup.disable({emitEvent:!1}):this.lwm2mDeviceTransportConfigurationFormGroup.enable({emitEvent:!1})},e.prototype.writeValue=function(e){this.lwm2mDeviceTransportConfigurationFormGroup.patchValue({configuration:e},{emitEvent:!1})},e.prototype.updateModel=function(){var e=null;this.lwm2mDeviceTransportConfigurationFormGroup.valid&&(e=this.lwm2mDeviceTransportConfigurationFormGroup.getRawValue().configuration),this.propagateChange(e)},e.\u0275fac=function(t){return new(t||e)(r["\u0275\u0275directiveInject"](m.Store),r["\u0275\u0275directiveInject"](s.FormBuilder))},e.\u0275cmp=r["\u0275\u0275defineComponent"]({type:e,selectors:[["tb-lwm2m-device-transport-configuration"]],inputs:{required:"required",disabled:"disabled"},features:[r["\u0275\u0275ProvidersFeature"]([{provide:s.NG_VALUE_ACCESSOR,useExisting:Object(r.forwardRef)((function(){return e})),multi:!0}])],decls:1,vars:1,consts:[[2,"padding-bottom","16px",3,"formGroup"]],template:function(e,t){1&e&&r["\u0275\u0275element"](0,"form",0),2&e&&r["\u0275\u0275property"]("formGroup",t.lwm2mDeviceTransportConfigurationFormGroup)},directives:[s["\u0275angular_packages_forms_forms_y"],s.NgControlStatusGroup,s.FormGroupDirective],encapsulation:2}),e}();!function(){r["\u0275setClassMetadata"](Yi,[{type:r.Component,args:[{selector:"tb-lwm2m-device-transport-configuration",templateUrl:"./lwm2m-device-transport-configuration.component.html",styleUrls:[],providers:[{provide:s.NG_VALUE_ACCESSOR,useExisting:Object(r.forwardRef)((function(){return Yi})),multi:!0}]}]}],(function(){return[{type:m.Store},{type:s.FormBuilder}]}),{required:[{type:r.Input}],disabled:[{type:r.Input}]})}();var Xi=function(){function e(){}return e.\u0275mod=r["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=r["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[i.CommonModule,jt.a,Rt.a,Ji.a,Ki]]}),e}();void(("undefined"==typeof ngJitMode||ngJitMode)&&r["\u0275\u0275setNgModuleScope"](Xi,{declarations:[jr,Vr,zr,Gr,Yi,Ur,Hr,Yr,Zr,vi,ai,ci],imports:[i.CommonModule,jt.a,Rt.a,Ji.a,Ki]}));var Qi=[{path:"assets",component:Pn.a,data:{auth:[$.a.TENANT_ADMIN,$.a.CUSTOMER_USER],title:"asset.assets",assetsType:"tenant",breadcrumb:{label:"asset.assets",icon:"domain"}},resolve:{entitiesTableConfig:_i}}],Zi=function(){function e(){}return e.\u0275mod=r["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=r["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},providers:[_i],imports:[[a.RouterModule.forChild(Qi)],a.RouterModule]}),e}();void(("undefined"==typeof ngJitMode||ngJitMode)&&r["\u0275\u0275setNgModuleScope"](Zi,{imports:[a.RouterModule],exports:[a.RouterModule]}));var ea=function(){function e(){}return e.\u0275mod=r["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=r["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[i.CommonModule,jt.a,Rt.a,Ji.a,Zi]]}),e}();void(("undefined"==typeof ngJitMode||ngJitMode)&&r["\u0275\u0275setNgModuleScope"](ea,{declarations:[Ti,Oi,Fi],imports:[i.CommonModule,jt.a,Rt.a,Ji.a,Zi]}));var ta=n("3Tyt"),na=n("89S7"),ra=n("rhBB"),ia=n("gl+N");function aa(e,t){1&e&&(r["\u0275\u0275elementStart"](0,"mat-error"),r["\u0275\u0275text"](1),r["\u0275\u0275pipe"](2,"translate"),r["\u0275\u0275elementEnd"]()),2&e&&(r["\u0275\u0275advance"](1),r["\u0275\u0275textInterpolate1"](" ",r["\u0275\u0275pipeBind1"](2,1,"entity-view.name-required")," "))}var oa=function(e){function t(t,n,r,i,a){var o=e.call(this,t,a,r,i)||this;return o.store=t,o.translate=n,o.entityValue=r,o.entitiesTableConfigValue=i,o.fb=a,o.entityType=kn.b,o.dataKeyType=ta.h,o.allowedEntityTypes=[kn.b.DEVICE,kn.b.ASSET],o}return Object(o.d)(t,e),t.prototype.ngOnInit=function(){this.entityViewScope=this.entitiesTableConfig.componentsData.entityViewScope,e.prototype.ngOnInit.call(this),this.maxStartTimeMs=this.entityForm.get("endTimeMs").valueChanges,this.minEndTimeMs=this.entityForm.get("startTimeMs").valueChanges,this.selectedEntityId=this.entityForm.get("entityId").valueChanges},t.prototype.hideDelete=function(){return!!this.entitiesTableConfig&&!this.entitiesTableConfig.deleteEnabled(this.entity)},t.prototype.isAssignedToCustomer=function(e){return e&&e.customerId&&e.customerId.id!==mr.a},t.prototype.buildForm=function(e){return this.fb.group({name:[e?e.name:"",[s.Validators.required]],type:[e?e.type:null,[s.Validators.required]],entityId:[e?e.entityId:null,[s.Validators.required]],startTimeMs:[e?e.startTimeMs:null],endTimeMs:[e?e.endTimeMs:null],keys:this.fb.group({attributes:this.fb.group({cs:[e&&e.keys&&e.keys.attributes?e.keys.attributes.cs:null],sh:[e&&e.keys&&e.keys.attributes?e.keys.attributes.sh:null],ss:[e&&e.keys&&e.keys.attributes?e.keys.attributes.ss:null]}),timeseries:[e&&e.keys&&e.keys.timeseries?e.keys.timeseries:null]}),additionalInfo:this.fb.group({description:[e&&e.additionalInfo?e.additionalInfo.description:""]})})},t.prototype.updateForm=function(e){this.entityForm.patchValue({name:e.name}),this.entityForm.patchValue({type:e.type}),this.entityForm.patchValue({entityId:e.entityId}),this.entityForm.patchValue({startTimeMs:e.startTimeMs}),this.entityForm.patchValue({endTimeMs:e.endTimeMs}),this.entityForm.patchValue({keys:{attributes:{cs:e.keys&&e.keys.attributes?e.keys.attributes.cs:null,sh:e.keys&&e.keys.attributes?e.keys.attributes.sh:null,ss:e.keys&&e.keys.attributes?e.keys.attributes.ss:null},timeseries:e.keys&&e.keys.timeseries?e.keys.timeseries:null}}),this.entityForm.patchValue({additionalInfo:{description:e.additionalInfo?e.additionalInfo.description:""}})},t.prototype.onEntityViewIdCopied=function(e){this.store.dispatch(new u.b({message:this.translate.instant("entity-view.idCopiedMessage"),type:"success",duration:750,verticalPosition:"bottom",horizontalPosition:"right"}))},t.\u0275fac=function(e){return new(e||t)(r["\u0275\u0275directiveInject"](m.Store),r["\u0275\u0275directiveInject"](f.TranslateService),r["\u0275\u0275directiveInject"]("entity"),r["\u0275\u0275directiveInject"]("entitiesTableConfig"),r["\u0275\u0275directiveInject"](s.FormBuilder))},t.\u0275cmp=r["\u0275\u0275defineComponent"]({type:t,selectors:[["tb-entity-view"]],features:[r["\u0275\u0275InheritDefinitionFeature"]],decls:84,vars:70,consts:[["fxLayout.xs","column",1,"tb-details-buttons"],["mat-raised-button","","color","primary",3,"disabled","fxShow","click"],["fxLayout","row","fxLayout.xs","column"],["mat-raised-button","","ngxClipboard","",3,"cbContent","fxShow","cbOnSuccess"],["svgIcon","mdi:clipboard-arrow-left"],["translate",""],["fxLayout","column",1,"mat-padding"],[1,"mat-block",3,"fxShow"],["matInput","","disabled","",3,"ngModel"],[1,"tb-small",2,"padding-bottom","10px","padding-left","2px",3,"fxShow"],[3,"formGroup"],[3,"disabled"],[1,"mat-block"],["matInput","","formControlName","name","required",""],[4,"ngIf"],["formControlName","type",3,"required","entityType"],["fxLayout","column"],["translate","",1,"tb-title","no-padding"],["fxFlex","","formControlName","entityId",3,"required","allowedEntityTypes"],["formGroupName","keys",1,"mat-accordion-container"],[3,"multi"],["formGroupName","attributes",3,"expanded"],["translate","",1,"tb-panel-title"],["translate","",1,"tb-hint"],["formControlName","cs","keysText","entity-view.client-attributes-placeholder",3,"entityId","dataKeyType"],["formControlName","sh","keysText","entity-view.shared-attributes-placeholder",3,"entityId","dataKeyType"],["formControlName","ss","keysText","entity-view.server-attributes-placeholder",3,"entityId","dataKeyType"],[3,"expanded"],["formControlName","timeseries","keysText","entity-view.timeseries-placeholder",3,"entityId","dataKeyType"],["dateText","entity-view.start-date","timeText","entity-view.start-ts","formControlName","startTimeMs",3,"maxDate"],["dateText","entity-view.end-date","timeText","entity-view.end-ts","formControlName","endTimeMs",3,"minDate"],["formGroupName","additionalInfo"],["matInput","","formControlName","description","rows","2"]],template:function(e,t){1&e&&(r["\u0275\u0275elementStart"](0,"div",0),r["\u0275\u0275elementStart"](1,"button",1),r["\u0275\u0275listener"]("click",(function(e){return t.onEntityAction(e,"makePublic")})),r["\u0275\u0275pipe"](2,"async"),r["\u0275\u0275text"](3),r["\u0275\u0275pipe"](4,"translate"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](5,"button",1),r["\u0275\u0275listener"]("click",(function(e){return t.onEntityAction(e,"assignToCustomer")})),r["\u0275\u0275pipe"](6,"async"),r["\u0275\u0275text"](7),r["\u0275\u0275pipe"](8,"translate"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](9,"button",1),r["\u0275\u0275listener"]("click",(function(e){return t.onEntityAction(e,"unassignFromCustomer")})),r["\u0275\u0275pipe"](10,"async"),r["\u0275\u0275text"](11),r["\u0275\u0275pipe"](12,"translate"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](13,"button",1),r["\u0275\u0275listener"]("click",(function(e){return t.onEntityAction(e,"delete")})),r["\u0275\u0275pipe"](14,"async"),r["\u0275\u0275text"](15),r["\u0275\u0275pipe"](16,"translate"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](17,"div",2),r["\u0275\u0275elementStart"](18,"button",3),r["\u0275\u0275listener"]("cbOnSuccess",(function(e){return t.onEntityViewIdCopied(e)})),r["\u0275\u0275element"](19,"mat-icon",4),r["\u0275\u0275elementStart"](20,"span",5),r["\u0275\u0275text"](21,"entity-view.copyId"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](22,"div",6),r["\u0275\u0275elementStart"](23,"mat-form-field",7),r["\u0275\u0275elementStart"](24,"mat-label",5),r["\u0275\u0275text"](25,"entity-view.assignedToCustomer"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275element"](26,"input",8),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](27,"div",9),r["\u0275\u0275text"](28),r["\u0275\u0275pipe"](29,"translate"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](30,"form",10),r["\u0275\u0275elementStart"](31,"fieldset",11),r["\u0275\u0275pipe"](32,"async"),r["\u0275\u0275elementStart"](33,"mat-form-field",12),r["\u0275\u0275elementStart"](34,"mat-label",5),r["\u0275\u0275text"](35,"entity-view.name"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275element"](36,"input",13),r["\u0275\u0275template"](37,aa,3,3,"mat-error",14),r["\u0275\u0275elementEnd"](),r["\u0275\u0275element"](38,"tb-entity-subtype-autocomplete",15),r["\u0275\u0275elementStart"](39,"section",16),r["\u0275\u0275elementStart"](40,"label",17),r["\u0275\u0275text"](41,"entity-view.target-entity"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275element"](42,"tb-entity-select",18),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](43,"div",19),r["\u0275\u0275elementStart"](44,"mat-accordion",20),r["\u0275\u0275elementStart"](45,"mat-expansion-panel",21),r["\u0275\u0275elementStart"](46,"mat-expansion-panel-header"),r["\u0275\u0275elementStart"](47,"mat-panel-title"),r["\u0275\u0275elementStart"](48,"div",22),r["\u0275\u0275text"](49,"entity-view.attributes-propagation"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](50,"div",23),r["\u0275\u0275text"](51,"entity-view.attributes-propagation-hint"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](52,"label",17),r["\u0275\u0275text"](53,"entity-view.client-attributes"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275element"](54,"tb-entity-keys-list",24),r["\u0275\u0275pipe"](55,"async"),r["\u0275\u0275elementStart"](56,"label",17),r["\u0275\u0275text"](57,"entity-view.shared-attributes"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275element"](58,"tb-entity-keys-list",25),r["\u0275\u0275pipe"](59,"async"),r["\u0275\u0275elementStart"](60,"label",17),r["\u0275\u0275text"](61,"entity-view.server-attributes"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275element"](62,"tb-entity-keys-list",26),r["\u0275\u0275pipe"](63,"async"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](64,"mat-expansion-panel",27),r["\u0275\u0275elementStart"](65,"mat-expansion-panel-header"),r["\u0275\u0275elementStart"](66,"mat-panel-title"),r["\u0275\u0275elementStart"](67,"div",22),r["\u0275\u0275text"](68,"entity-view.timeseries-data"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](69,"div",23),r["\u0275\u0275text"](70,"entity-view.timeseries-data-hint"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](71,"label",17),r["\u0275\u0275text"](72,"entity-view.timeseries"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275element"](73,"tb-entity-keys-list",28),r["\u0275\u0275pipe"](74,"async"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275element"](75,"tb-datetime",29),r["\u0275\u0275pipe"](76,"async"),r["\u0275\u0275element"](77,"tb-datetime",30),r["\u0275\u0275pipe"](78,"async"),r["\u0275\u0275elementStart"](79,"div",31),r["\u0275\u0275elementStart"](80,"mat-form-field",12),r["\u0275\u0275elementStart"](81,"mat-label",5),r["\u0275\u0275text"](82,"entity-view.description"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275element"](83,"textarea",32),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()),2&e&&(r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("disabled",r["\u0275\u0275pipeBind1"](2,38,t.isLoading$))("fxShow",!(t.isEdit||"tenant"!==t.entityViewScope||t.isAssignedToCustomer(t.entity)||null!=t.entity&&t.entity.customerIsPublic)),r["\u0275\u0275advance"](2),r["\u0275\u0275textInterpolate1"](" ",r["\u0275\u0275pipeBind1"](4,40,"entity-view.make-public")," "),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("disabled",r["\u0275\u0275pipeBind1"](6,42,t.isLoading$))("fxShow",!t.isEdit&&"tenant"===t.entityViewScope&&!t.isAssignedToCustomer(t.entity)),r["\u0275\u0275advance"](2),r["\u0275\u0275textInterpolate1"](" ",r["\u0275\u0275pipeBind1"](8,44,"entity-view.assign-to-customer")," "),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("disabled",r["\u0275\u0275pipeBind1"](10,46,t.isLoading$))("fxShow",!t.isEdit&&("customer"===t.entityViewScope||"tenant"===t.entityViewScope)&&t.isAssignedToCustomer(t.entity)),r["\u0275\u0275advance"](2),r["\u0275\u0275textInterpolate1"](" ",r["\u0275\u0275pipeBind1"](12,48,null!=t.entity&&t.entity.customerIsPublic?"entity-view.make-private":"entity-view.unassign-from-customer")," "),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("disabled",r["\u0275\u0275pipeBind1"](14,50,t.isLoading$))("fxShow",!t.hideDelete()&&!t.isEdit),r["\u0275\u0275advance"](2),r["\u0275\u0275textInterpolate1"](" ",r["\u0275\u0275pipeBind1"](16,52,"entity-view.delete")," "),r["\u0275\u0275advance"](3),r["\u0275\u0275property"]("cbContent",null==t.entity||null==t.entity.id?null:t.entity.id.id)("fxShow",!t.isEdit),r["\u0275\u0275advance"](5),r["\u0275\u0275property"]("fxShow",!t.isEdit&&t.isAssignedToCustomer(t.entity)&&!(null!=t.entity&&t.entity.customerIsPublic)&&"tenant"===t.entityViewScope),r["\u0275\u0275advance"](3),r["\u0275\u0275property"]("ngModel",null==t.entity?null:t.entity.customerTitle),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("fxShow",!t.isEdit&&(null==t.entity?null:t.entity.customerIsPublic)&&("customer"===t.entityViewScope||"tenant"===t.entityViewScope)),r["\u0275\u0275advance"](1),r["\u0275\u0275textInterpolate1"](" ",r["\u0275\u0275pipeBind1"](29,54,"entity-view.entity-view-public")," "),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("formGroup",t.entityForm),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("disabled",r["\u0275\u0275pipeBind1"](32,56,t.isLoading$)||!t.isEdit),r["\u0275\u0275advance"](6),r["\u0275\u0275property"]("ngIf",t.entityForm.get("name").hasError("required")),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("required",!0)("entityType",t.entityType.ENTITY_VIEW),r["\u0275\u0275advance"](4),r["\u0275\u0275property"]("required",!0)("allowedEntityTypes",t.allowedEntityTypes),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("multi",!0),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("expanded",!0),r["\u0275\u0275advance"](9),r["\u0275\u0275property"]("entityId",r["\u0275\u0275pipeBind1"](55,58,t.selectedEntityId))("dataKeyType",t.dataKeyType.attribute),r["\u0275\u0275advance"](4),r["\u0275\u0275property"]("entityId",r["\u0275\u0275pipeBind1"](59,60,t.selectedEntityId))("dataKeyType",t.dataKeyType.attribute),r["\u0275\u0275advance"](4),r["\u0275\u0275property"]("entityId",r["\u0275\u0275pipeBind1"](63,62,t.selectedEntityId))("dataKeyType",t.dataKeyType.attribute),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("expanded",!0),r["\u0275\u0275advance"](9),r["\u0275\u0275property"]("entityId",r["\u0275\u0275pipeBind1"](74,64,t.selectedEntityId))("dataKeyType",t.dataKeyType.timeseries),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("maxDate",r["\u0275\u0275pipeBind1"](76,66,t.maxStartTimeMs)),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("minDate",r["\u0275\u0275pipeBind1"](78,68,t.minEndTimeMs)))},directives:[h.f,w.MatButton,ve.d,ye.a,be.MatIcon,f.TranslateDirective,y.MatFormField,y.MatLabel,v.MatInput,s.DefaultValueAccessor,s.NgControlStatus,s.NgModel,s["\u0275angular_packages_forms_forms_y"],s.NgControlStatusGroup,s.FormGroupDirective,s.FormControlName,s.RequiredValidator,i.NgIf,Ii.a,na.a,h.b,s.FormGroupName,Y.MatAccordion,Y.MatExpansionPanel,Y.MatExpansionPanelHeader,Y.MatExpansionPanelTitle,ra.a,ia.a,y.MatError],pipes:[i.AsyncPipe,f.TranslatePipe],styles:["[_nghost-%COMP%]   .mat-accordion-container[_ngcontent-%COMP%]{margin-bottom:16px}"]}),t}(Cn.a);!function(){r["\u0275setClassMetadata"](oa,[{type:r.Component,args:[{selector:"tb-entity-view",templateUrl:"./entity-view.component.html",styleUrls:["./entity-view.component.scss"]}]}],(function(){return[{type:m.Store},{type:f.TranslateService},{type:void 0,decorators:[{type:r.Inject,args:["entity"]}]},{type:In.d,decorators:[{type:r.Inject,args:["entitiesTableConfig"]}]},{type:s.FormBuilder}]}),null)}();var la=function(e){function t(t){var n=e.call(this,t)||this;return n.store=t,n.entityType=kn.b,n}return Object(o.d)(t,e),t.prototype.entityViewTypeChanged=function(e){this.entitiesTableConfig.componentsData.entityViewType=e,this.entitiesTableConfig.table.resetSortAndFilter(!0)},t.\u0275fac=function(e){return new(e||t)(r["\u0275\u0275directiveInject"](m.Store))},t.\u0275cmp=r["\u0275\u0275defineComponent"]({type:t,selectors:[["tb-entity-view-table-header"]],features:[r["\u0275\u0275InheritDefinitionFeature"]],decls:1,vars:3,consts:[[3,"showLabel","entityType","ngModel","ngModelChange"]],template:function(e,t){1&e&&(r["\u0275\u0275elementStart"](0,"tb-entity-subtype-select",0),r["\u0275\u0275listener"]("ngModelChange",(function(e){return t.entityViewTypeChanged(e)})),r["\u0275\u0275elementEnd"]()),2&e&&r["\u0275\u0275property"]("showLabel",!0)("entityType",t.entityType.ENTITY_VIEW)("ngModel",t.entitiesTableConfig.componentsData.entityViewType)},directives:[Mi.a,s.NgControlStatus,s.NgModel],styles:["[_nghost-%COMP%]{-ms-flex:1;flex:1;display:-ms-flexbox;display:flex;-ms-flex-pack:start;justify-content:flex-start;min-width:150px}[_nghost-%COMP%]     tb-entity-subtype-select{width:100%}[_nghost-%COMP%]     tb-entity-subtype-select mat-form-field{font-size:16px}[_nghost-%COMP%]     tb-entity-subtype-select mat-form-field .mat-form-field-wrapper{padding-bottom:0}[_nghost-%COMP%]     tb-entity-subtype-select mat-form-field .mat-form-field-underline{bottom:0}@media screen and (max-width:599px){[_nghost-%COMP%]     tb-entity-subtype-select mat-form-field{width:100%}[_nghost-%COMP%]     tb-entity-subtype-select mat-form-field .mat-form-field-infix{width:auto!important}}"]}),t}(ii.a);!function(){r["\u0275setClassMetadata"](la,[{type:r.Component,args:[{selector:"tb-entity-view-table-header",templateUrl:"./entity-view-table-header.component.html",styleUrls:["./entity-view-table-header.component.scss"]}]}],(function(){return[{type:m.Store}]}),null)}();var sa=n("j37L");function da(e,t){if(1&e&&(r["\u0275\u0275elementStart"](0,"mat-tab",1,2),r["\u0275\u0275pipe"](2,"translate"),r["\u0275\u0275element"](3,"tb-attribute-table",3),r["\u0275\u0275elementEnd"]()),2&e){var n=r["\u0275\u0275reference"](1),i=r["\u0275\u0275nextContext"]();r["\u0275\u0275propertyInterpolate"]("label",r["\u0275\u0275pipeBind1"](2,5,"attribute.attributes")),r["\u0275\u0275advance"](3),r["\u0275\u0275property"]("defaultAttributeScope",i.attributeScopes.CLIENT_SCOPE)("active",n.isActive)("entityId",i.entity.id)("entityName",i.entity.name)}}function ca(e,t){if(1&e&&(r["\u0275\u0275elementStart"](0,"mat-tab",1,4),r["\u0275\u0275pipe"](2,"translate"),r["\u0275\u0275element"](3,"tb-attribute-table",5),r["\u0275\u0275elementEnd"]()),2&e){var n=r["\u0275\u0275reference"](1),i=r["\u0275\u0275nextContext"]();r["\u0275\u0275propertyInterpolate"]("label",r["\u0275\u0275pipeBind1"](2,5,"attribute.latest-telemetry")),r["\u0275\u0275advance"](3),r["\u0275\u0275property"]("defaultAttributeScope",i.latestTelemetryTypes.LATEST_TELEMETRY)("active",n.isActive)("entityId",i.entity.id)("entityName",i.entity.name)}}function ua(e,t){if(1&e&&(r["\u0275\u0275elementStart"](0,"mat-tab",1,6),r["\u0275\u0275pipe"](2,"translate"),r["\u0275\u0275element"](3,"tb-alarm-table",7),r["\u0275\u0275elementEnd"]()),2&e){var n=r["\u0275\u0275reference"](1),i=r["\u0275\u0275nextContext"]();r["\u0275\u0275propertyInterpolate"]("label",r["\u0275\u0275pipeBind1"](2,3,"alarm.alarms")),r["\u0275\u0275advance"](3),r["\u0275\u0275property"]("active",n.isActive)("entityId",i.entity.id)}}function pa(e,t){if(1&e&&(r["\u0275\u0275elementStart"](0,"mat-tab",1,8),r["\u0275\u0275pipe"](2,"translate"),r["\u0275\u0275element"](3,"tb-event-table",9),r["\u0275\u0275elementEnd"]()),2&e){var n=r["\u0275\u0275reference"](1),i=r["\u0275\u0275nextContext"]();r["\u0275\u0275propertyInterpolate"]("label",r["\u0275\u0275pipeBind1"](2,5,"entity-view.events")),r["\u0275\u0275advance"](3),r["\u0275\u0275property"]("defaultEventType",i.eventTypes.ERROR)("active",n.isActive)("tenantId",i.entity.tenantId.id)("entityId",i.entity.id)}}function ma(e,t){if(1&e&&(r["\u0275\u0275elementStart"](0,"mat-tab",1,10),r["\u0275\u0275pipe"](2,"translate"),r["\u0275\u0275element"](3,"tb-relation-table",7),r["\u0275\u0275elementEnd"]()),2&e){var n=r["\u0275\u0275reference"](1),i=r["\u0275\u0275nextContext"]();r["\u0275\u0275propertyInterpolate"]("label",r["\u0275\u0275pipeBind1"](2,3,"relation.relations")),r["\u0275\u0275advance"](3),r["\u0275\u0275property"]("active",n.isActive)("entityId",i.entity.id)}}function fa(e,t){if(1&e&&(r["\u0275\u0275elementStart"](0,"mat-tab",1,11),r["\u0275\u0275pipe"](2,"translate"),r["\u0275\u0275element"](3,"tb-audit-log-table",12),r["\u0275\u0275elementEnd"]()),2&e){var n=r["\u0275\u0275reference"](1),i=r["\u0275\u0275nextContext"]();r["\u0275\u0275propertyInterpolate"]("label",r["\u0275\u0275pipeBind1"](2,4,"audit-log.audit-logs")),r["\u0275\u0275advance"](3),r["\u0275\u0275property"]("active",n.isActive)("auditLogMode",i.auditLogModes.ENTITY)("entityId",i.entity.id)}}var ga=function(e){function t(t){var n=e.call(this,t)||this;return n.store=t,n}return Object(o.d)(t,e),t.prototype.ngOnInit=function(){e.prototype.ngOnInit.call(this)},t.\u0275fac=function(e){return new(e||t)(r["\u0275\u0275directiveInject"](m.Store))},t.\u0275cmp=r["\u0275\u0275defineComponent"]({type:t,selectors:[["tb-entity-view-tabs"]],features:[r["\u0275\u0275InheritDefinitionFeature"]],decls:6,vars:6,consts:[[3,"label",4,"ngIf"],[3,"label"],["attributesTab","matTab"],[3,"defaultAttributeScope","active","entityId","entityName"],["telemetryTab","matTab"],["disableAttributeScopeSelection","",3,"defaultAttributeScope","active","entityId","entityName"],["alarmsTab","matTab"],[3,"active","entityId"],["eventsTab","matTab"],[3,"defaultEventType","active","tenantId","entityId"],["relationsTab","matTab"],["auditLogsTab","matTab"],["detailsMode","true",3,"active","auditLogMode","entityId"]],template:function(e,t){1&e&&(r["\u0275\u0275template"](0,da,4,7,"mat-tab",0),r["\u0275\u0275template"](1,ca,4,7,"mat-tab",0),r["\u0275\u0275template"](2,ua,4,5,"mat-tab",0),r["\u0275\u0275template"](3,pa,4,7,"mat-tab",0),r["\u0275\u0275template"](4,ma,4,5,"mat-tab",0),r["\u0275\u0275template"](5,fa,4,6,"mat-tab",0)),2&e&&(r["\u0275\u0275property"]("ngIf",t.entity),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",t.entity),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",t.entity),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",t.entity),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",t.entity),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",t.entity&&t.authUser.authority===t.authorities.TENANT_ADMIN))},directives:[i.NgIf,xe.MatTab,On.a,_n.a,Bn.a,jn.a,fr.a],pipes:[f.TranslatePipe],encapsulation:2}),t}(Ln.a);!function(){r["\u0275setClassMetadata"](ga,[{type:r.Component,args:[{selector:"tb-entity-view-tabs",templateUrl:"./entity-view-tabs.component.html",styleUrls:[]}]}],(function(){return[{type:m.Store}]}),null)}();var ha=function(){function e(e,t,n,r,i,a,o,l,s){var d=this;this.store=e,this.broadcast=t,this.entityViewService=n,this.customerService=r,this.dialogService=i,this.translate=a,this.datePipe=o,this.router=l,this.dialog=s,this.config=new In.d,this.config.entityType=kn.b.ENTITY_VIEW,this.config.entityComponent=oa,this.config.entityTabsComponent=ga,this.config.entityTranslations=kn.d.get(kn.b.ENTITY_VIEW),this.config.entityResources=kn.c.get(kn.b.ENTITY_VIEW),this.config.addDialogStyle={maxWidth:"800px"},this.config.deleteEntityTitle=function(e){return d.translate.instant("entity-view.delete-entity-view-title",{entityViewName:e.name})},this.config.deleteEntityContent=function(){return d.translate.instant("entity-view.delete-entity-view-text")},this.config.deleteEntitiesTitle=function(e){return d.translate.instant("entity-view.delete-entity-views-title",{count:e})},this.config.deleteEntitiesContent=function(){return d.translate.instant("entity-view.delete-entity-views-text")},this.config.loadEntity=function(e){return d.entityViewService.getEntityViewInfo(e.id)},this.config.saveEntity=function(e){return d.entityViewService.saveEntityView(e).pipe(Object(er.a)((function(){d.broadcast.broadcast("entityViewSaved")})),Object($n.b)((function(e){return d.entityViewService.getEntityViewInfo(e.id.id)})))},this.config.onEntityAction=function(e){return d.onEntityViewAction(e)},this.config.detailsReadonly=function(){return"customer_user"===d.config.componentsData.entityViewScope},this.config.headerComponent=la}return e.prototype.resolve=function(e){var t=this,n=e.params;return this.config.componentsData={entityViewScope:e.data.entityViewsType,entityViewType:""},this.customerId=n.customerId,this.store.pipe(Object(m.select)(z.d),Object(G.a)(1)).pipe(Object(er.a)((function(e){e.authority===$.a.CUSTOMER_USER&&(t.config.componentsData.entityViewScope="customer_user",t.customerId=e.customerId)})),Object($n.b)((function(){return t.customerId?t.customerService.getCustomer(t.customerId):Object(ti.a)(null)})),Object(Hn.a)((function(e){return e?e.additionalInfo&&e.additionalInfo.isPublic?t.config.tableTitle=t.translate.instant("customer.public-entity-views"):t.config.tableTitle=e.title+": "+t.translate.instant("entity-view.entity-views"):t.config.tableTitle=t.translate.instant("entity-view.entity-views"),t.config.columns=t.configureColumns(t.config.componentsData.entityViewScope),t.configureEntityFunctions(t.config.componentsData.entityViewScope),t.config.cellActionDescriptors=t.configureCellActions(t.config.componentsData.entityViewScope),t.config.groupActionDescriptors=t.configureGroupActions(t.config.componentsData.entityViewScope),t.config.addActionDescriptors=t.configureAddActions(t.config.componentsData.entityViewScope),t.config.addEnabled="customer_user"!==t.config.componentsData.entityViewScope,t.config.entitiesDeleteEnabled="tenant"===t.config.componentsData.entityViewScope,t.config.deleteEnabled=function(){return"tenant"===t.config.componentsData.entityViewScope},t.config})))},e.prototype.configureColumns=function(e){var t=[new In.a("createdTime","common.created-time",this.datePipe,"150px"),new In.c("name","entity-view.name","33%"),new In.c("type","entity-view.entity-view-type","33%")];return"tenant"===e&&t.push(new In.c("customerTitle","customer.customer","33%"),new In.c("customerIsPublic","entity-view.public","60px",(function(e){return Object(In.e)(e.customerIsPublic)}),(function(){return{}}),!1)),t},e.prototype.configureEntityFunctions=function(e){var t=this;"tenant"===e?(this.config.entitiesFetchFunction=function(e){return t.entityViewService.getTenantEntityViewInfos(e,t.config.componentsData.entityViewType)},this.config.deleteEntity=function(e){return t.entityViewService.deleteEntityView(e.id)}):(this.config.entitiesFetchFunction=function(e){return t.entityViewService.getCustomerEntityViewInfos(t.customerId,e,t.config.componentsData.entityViewType)},this.config.deleteEntity=function(e){return t.entityViewService.unassignEntityViewFromCustomer(e.id)})},e.prototype.configureCellActions=function(e){var t=this,n=[];return"tenant"===e&&n.push({name:this.translate.instant("entity-view.make-public"),icon:"share",isEnabled:function(e){return!e.customerId||e.customerId.id===mr.a},onAction:function(e,n){return t.makePublic(e,n)}},{name:this.translate.instant("entity-view.assign-to-customer"),icon:"assignment_ind",isEnabled:function(e){return!e.customerId||e.customerId.id===mr.a},onAction:function(e,n){return t.assignToCustomer(e,[n.id])}},{name:this.translate.instant("entity-view.unassign-from-customer"),icon:"assignment_return",isEnabled:function(e){return e.customerId&&e.customerId.id!==mr.a&&!e.customerIsPublic},onAction:function(e,n){return t.unassignFromCustomer(e,n)}},{name:this.translate.instant("entity-view.make-private"),icon:"reply",isEnabled:function(e){return e.customerId&&e.customerId.id!==mr.a&&e.customerIsPublic},onAction:function(e,n){return t.unassignFromCustomer(e,n)}}),"customer"===e&&n.push({name:this.translate.instant("entity-view.unassign-from-customer"),icon:"assignment_return",isEnabled:function(e){return e.customerId&&e.customerId.id!==mr.a&&!e.customerIsPublic},onAction:function(e,n){return t.unassignFromCustomer(e,n)}},{name:this.translate.instant("entity-view.make-private"),icon:"reply",isEnabled:function(e){return e.customerId&&e.customerId.id!==mr.a&&e.customerIsPublic},onAction:function(e,n){return t.unassignFromCustomer(e,n)}}),n},e.prototype.configureGroupActions=function(e){var t=this,n=[];return"tenant"===e&&n.push({name:this.translate.instant("entity-view.assign-entity-views"),icon:"assignment_ind",isEnabled:!0,onAction:function(e,n){return t.assignToCustomer(e,n.map((function(e){return e.id})))}}),"customer"===e&&n.push({name:this.translate.instant("entity-view.unassign-entity-views"),icon:"assignment_return",isEnabled:!0,onAction:function(e,n){return t.unassignEntityViewsFromCustomer(e,n)}}),n},e.prototype.configureAddActions=function(e){var t=this,n=[];return"customer"===e&&n.push({name:this.translate.instant("entity-view.assign-new-entity-view"),icon:"add",isEnabled:function(){return!0},onAction:function(e){return t.addEntityViewsToCustomer(e)}}),n},e.prototype.addEntityViewsToCustomer=function(e){var t=this;e&&e.stopPropagation(),this.dialog.open(pi.a,{disableClose:!0,panelClass:["tb-dialog","tb-fullscreen-dialog"],data:{customerId:this.customerId,entityType:kn.b.ENTITY_VIEW}}).afterClosed().subscribe((function(e){e&&t.config.table.updateData()}))},e.prototype.makePublic=function(e,t){var n=this;e&&e.stopPropagation(),this.dialogService.confirm(this.translate.instant("entity-view.make-public-entity-view-title",{entityViewName:t.name}),this.translate.instant("entity-view.make-public-entity-view-text"),this.translate.instant("action.no"),this.translate.instant("action.yes"),!0).subscribe((function(e){e&&n.entityViewService.makeEntityViewPublic(t.id.id).subscribe((function(){n.config.table.updateData()}))}))},e.prototype.assignToCustomer=function(e,t){var n=this;e&&e.stopPropagation(),this.dialog.open(ui.a,{disableClose:!0,panelClass:["tb-dialog","tb-fullscreen-dialog"],data:{entityIds:t,entityType:kn.b.ENTITY_VIEW}}).afterClosed().subscribe((function(e){e&&n.config.table.updateData()}))},e.prototype.unassignFromCustomer=function(e,t){var n,r,i=this;e&&e.stopPropagation(),t.customerIsPublic?(n=this.translate.instant("entity-view.make-private-entity-view-title",{entityViewName:t.name}),r=this.translate.instant("entity-view.make-private-entity-view-text")):(n=this.translate.instant("entity-view.unassign-entity-view-title",{entityViewName:t.name}),r=this.translate.instant("entity-view.unassign-entity-view-text")),this.dialogService.confirm(n,r,this.translate.instant("action.no"),this.translate.instant("action.yes"),!0).subscribe((function(e){e&&i.entityViewService.unassignEntityViewFromCustomer(t.id.id).subscribe((function(){i.config.table.updateData()}))}))},e.prototype.unassignEntityViewsFromCustomer=function(e,t){var n=this;e&&e.stopPropagation(),this.dialogService.confirm(this.translate.instant("entity-view.unassign-entity-views-title",{count:t.length}),this.translate.instant("entity-view.unassign-entity-views-text"),this.translate.instant("action.no"),this.translate.instant("action.yes"),!0).subscribe((function(e){if(e){var r=[];t.forEach((function(e){r.push(n.entityViewService.unassignEntityViewFromCustomer(e.id.id))})),Object(me.a)(r).subscribe((function(){n.config.table.updateData()}))}}))},e.prototype.onEntityViewAction=function(e){switch(e.action){case"makePublic":return this.makePublic(e.event,e.entity),!0;case"assignToCustomer":return this.assignToCustomer(e.event,[e.entity.id]),!0;case"unassignFromCustomer":return this.unassignFromCustomer(e.event,e.entity),!0}return!1},e.\u0275fac=function(t){return new(t||e)(r["\u0275\u0275inject"](m.Store),r["\u0275\u0275inject"](ri.a),r["\u0275\u0275inject"](sa.a),r["\u0275\u0275inject"](Zn.a),r["\u0275\u0275inject"](U.a),r["\u0275\u0275inject"](f.TranslateService),r["\u0275\u0275inject"](i.DatePipe),r["\u0275\u0275inject"](a.Router),r["\u0275\u0275inject"](ft.MatDialog))},e.\u0275prov=r["\u0275\u0275defineInjectable"]({token:e,factory:e.\u0275fac}),e}();!function(){r["\u0275setClassMetadata"](ha,[{type:r.Injectable}],(function(){return[{type:m.Store},{type:ri.a},{type:sa.a},{type:Zn.a},{type:U.a},{type:f.TranslateService},{type:i.DatePipe},{type:a.Router},{type:ft.MatDialog}]}),null)}();var ba=[{path:"entityViews",component:Pn.a,data:{auth:[$.a.TENANT_ADMIN,$.a.CUSTOMER_USER],title:"entity-view.entity-views",entityViewsType:"tenant",breadcrumb:{label:"entity-view.entity-views",icon:"view_quilt"}},resolve:{entitiesTableConfig:ha}}],ya=function(){function e(){}return e.\u0275mod=r["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=r["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},providers:[ha],imports:[[a.RouterModule.forChild(ba)],a.RouterModule]}),e}();void(("undefined"==typeof ngJitMode||ngJitMode)&&r["\u0275\u0275setNgModuleScope"](ya,{imports:[a.RouterModule],exports:[a.RouterModule]}));var va=function(){function e(){}return e.\u0275mod=r["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=r["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[i.CommonModule,jt.a,Rt.a,Ji.a,ya]]}),e}();function xa(e,t){1&e&&(r["\u0275\u0275elementStart"](0,"mat-error"),r["\u0275\u0275text"](1),r["\u0275\u0275pipe"](2,"translate"),r["\u0275\u0275elementEnd"]()),2&e&&(r["\u0275\u0275advance"](1),r["\u0275\u0275textInterpolate1"](" ",r["\u0275\u0275pipeBind1"](2,1,"rulechain.name-required")," "))}void(("undefined"==typeof ngJitMode||ngJitMode)&&r["\u0275\u0275setNgModuleScope"](va,{declarations:[oa,ga,la],imports:[i.CommonModule,jt.a,Rt.a,Ji.a,ya]}));var Sa=function(e){function t(t,n,r,i,a){var o=e.call(this,t,a,r,i)||this;return o.store=t,o.translate=n,o.entityValue=r,o.entitiesTableConfigValue=i,o.fb=a,o}return Object(o.d)(t,e),t.prototype.hideDelete=function(){return!!this.entitiesTableConfig&&!this.entitiesTableConfig.deleteEnabled(this.entity)},t.prototype.buildForm=function(e){return this.fb.group({name:[e?e.name:"",[s.Validators.required]],debugMode:[!!e&&e.debugMode],additionalInfo:this.fb.group({description:[e&&e.additionalInfo?e.additionalInfo.description:""]})})},t.prototype.updateForm=function(e){this.entityForm.patchValue({name:e.name}),this.entityForm.patchValue({debugMode:e.debugMode}),this.entityForm.patchValue({additionalInfo:{description:e.additionalInfo?e.additionalInfo.description:""}})},t.prototype.onRuleChainIdCopied=function(e){this.store.dispatch(new u.b({message:this.translate.instant("rulechain.idCopiedMessage"),type:"success",duration:750,verticalPosition:"bottom",horizontalPosition:"right"}))},t.\u0275fac=function(e){return new(e||t)(r["\u0275\u0275directiveInject"](m.Store),r["\u0275\u0275directiveInject"](f.TranslateService),r["\u0275\u0275directiveInject"]("entity"),r["\u0275\u0275directiveInject"]("entitiesTableConfig"),r["\u0275\u0275directiveInject"](s.FormBuilder))},t.\u0275cmp=r["\u0275\u0275defineComponent"]({type:t,selectors:[["tb-rulechain"]],features:[r["\u0275\u0275InheritDefinitionFeature"]],decls:39,vars:38,consts:[[1,"tb-details-buttons"],["mat-raised-button","","color","primary",3,"disabled","fxShow","click"],["fxLayout","row"],["mat-raised-button","","ngxClipboard","",3,"cbContent","fxShow","cbOnSuccess"],["svgIcon","mdi:clipboard-arrow-left"],["translate",""],["fxLayout","column",1,"mat-padding"],[3,"formGroup"],[3,"disabled"],[1,"mat-block"],["matInput","","formControlName","name","required",""],[4,"ngIf"],["fxFlex","","formControlName","debugMode",2,"padding-bottom","16px"],["formGroupName","additionalInfo"],["matInput","","formControlName","description","rows","2"]],template:function(e,t){1&e&&(r["\u0275\u0275elementStart"](0,"div",0),r["\u0275\u0275elementStart"](1,"button",1),r["\u0275\u0275listener"]("click",(function(e){return t.onEntityAction(e,"open")})),r["\u0275\u0275pipe"](2,"async"),r["\u0275\u0275text"](3),r["\u0275\u0275pipe"](4,"translate"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](5,"button",1),r["\u0275\u0275listener"]("click",(function(e){return t.onEntityAction(e,"export")})),r["\u0275\u0275pipe"](6,"async"),r["\u0275\u0275text"](7),r["\u0275\u0275pipe"](8,"translate"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](9,"button",1),r["\u0275\u0275listener"]("click",(function(e){return t.onEntityAction(e,"setRoot")})),r["\u0275\u0275pipe"](10,"async"),r["\u0275\u0275text"](11),r["\u0275\u0275pipe"](12,"translate"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](13,"button",1),r["\u0275\u0275listener"]("click",(function(e){return t.onEntityAction(e,"delete")})),r["\u0275\u0275pipe"](14,"async"),r["\u0275\u0275text"](15),r["\u0275\u0275pipe"](16,"translate"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](17,"div",2),r["\u0275\u0275elementStart"](18,"button",3),r["\u0275\u0275listener"]("cbOnSuccess",(function(e){return t.onRuleChainIdCopied(e)})),r["\u0275\u0275element"](19,"mat-icon",4),r["\u0275\u0275elementStart"](20,"span",5),r["\u0275\u0275text"](21,"rulechain.copyId"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](22,"div",6),r["\u0275\u0275elementStart"](23,"form",7),r["\u0275\u0275elementStart"](24,"fieldset",8),r["\u0275\u0275pipe"](25,"async"),r["\u0275\u0275elementStart"](26,"mat-form-field",9),r["\u0275\u0275elementStart"](27,"mat-label",5),r["\u0275\u0275text"](28,"rulechain.name"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275element"](29,"input",10),r["\u0275\u0275template"](30,xa,3,3,"mat-error",11),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](31,"mat-checkbox",12),r["\u0275\u0275text"](32),r["\u0275\u0275pipe"](33,"translate"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](34,"div",13),r["\u0275\u0275elementStart"](35,"mat-form-field",9),r["\u0275\u0275elementStart"](36,"mat-label",5),r["\u0275\u0275text"](37,"rulechain.description"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275element"](38,"textarea",14),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()),2&e&&(r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("disabled",r["\u0275\u0275pipeBind1"](2,18,t.isLoading$))("fxShow",!t.isEdit),r["\u0275\u0275advance"](2),r["\u0275\u0275textInterpolate1"](" ",r["\u0275\u0275pipeBind1"](4,20,"rulechain.open-rulechain")," "),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("disabled",r["\u0275\u0275pipeBind1"](6,22,t.isLoading$))("fxShow",!t.isEdit),r["\u0275\u0275advance"](2),r["\u0275\u0275textInterpolate1"](" ",r["\u0275\u0275pipeBind1"](8,24,"rulechain.export")," "),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("disabled",r["\u0275\u0275pipeBind1"](10,26,t.isLoading$))("fxShow",!(t.isEdit||null!=t.entity&&t.entity.root)),r["\u0275\u0275advance"](2),r["\u0275\u0275textInterpolate1"](" ",r["\u0275\u0275pipeBind1"](12,28,"rulechain.set-root")," "),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("disabled",r["\u0275\u0275pipeBind1"](14,30,t.isLoading$))("fxShow",!t.hideDelete()&&!t.isEdit),r["\u0275\u0275advance"](2),r["\u0275\u0275textInterpolate1"](" ",r["\u0275\u0275pipeBind1"](16,32,"rulechain.delete")," "),r["\u0275\u0275advance"](3),r["\u0275\u0275property"]("cbContent",null==t.entity||null==t.entity.id?null:t.entity.id.id)("fxShow",!t.isEdit),r["\u0275\u0275advance"](5),r["\u0275\u0275property"]("formGroup",t.entityForm),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("disabled",r["\u0275\u0275pipeBind1"](25,34,t.isLoading$)||!t.isEdit),r["\u0275\u0275advance"](6),r["\u0275\u0275property"]("ngIf",t.entityForm.get("name").hasError("required")),r["\u0275\u0275advance"](2),r["\u0275\u0275textInterpolate1"](" ",r["\u0275\u0275pipeBind1"](33,36,"rulechain.debug-mode")," "))},directives:[w.MatButton,ve.d,h.f,ye.a,be.MatIcon,f.TranslateDirective,s["\u0275angular_packages_forms_forms_y"],s.NgControlStatusGroup,s.FormGroupDirective,y.MatFormField,y.MatLabel,v.MatInput,s.DefaultValueAccessor,s.NgControlStatus,s.FormControlName,s.RequiredValidator,i.NgIf,ge.MatCheckbox,h.b,s.FormGroupName,y.MatError],pipes:[i.AsyncPipe,f.TranslatePipe],styles:[""]}),t}(Cn.a);!function(){r["\u0275setClassMetadata"](Sa,[{type:r.Component,args:[{selector:"tb-rulechain",templateUrl:"./rulechain.component.html",styleUrls:["./rulechain.component.scss"]}]}],(function(){return[{type:m.Store},{type:f.TranslateService},{type:void 0,decorators:[{type:r.Inject,args:["entity"]}]},{type:In.d,decorators:[{type:r.Inject,args:["entitiesTableConfig"]}]},{type:s.FormBuilder}]}),null)}();var wa=n("C4fA");function Ca(e,t){if(1&e&&(r["\u0275\u0275elementStart"](0,"mat-tab",1,2),r["\u0275\u0275pipe"](2,"translate"),r["\u0275\u0275element"](3,"tb-attribute-table",3),r["\u0275\u0275elementEnd"]()),2&e){var n=r["\u0275\u0275reference"](1),i=r["\u0275\u0275nextContext"]();r["\u0275\u0275propertyInterpolate"]("label",r["\u0275\u0275pipeBind1"](2,5,"attribute.attributes")),r["\u0275\u0275advance"](3),r["\u0275\u0275property"]("defaultAttributeScope",i.attributeScopes.SERVER_SCOPE)("active",n.isActive)("entityId",i.entity.id)("entityName",i.entity.name)}}function Ia(e,t){if(1&e&&(r["\u0275\u0275elementStart"](0,"mat-tab",1,4),r["\u0275\u0275pipe"](2,"translate"),r["\u0275\u0275element"](3,"tb-attribute-table",5),r["\u0275\u0275elementEnd"]()),2&e){var n=r["\u0275\u0275reference"](1),i=r["\u0275\u0275nextContext"]();r["\u0275\u0275propertyInterpolate"]("label",r["\u0275\u0275pipeBind1"](2,5,"attribute.latest-telemetry")),r["\u0275\u0275advance"](3),r["\u0275\u0275property"]("defaultAttributeScope",i.latestTelemetryTypes.LATEST_TELEMETRY)("active",n.isActive)("entityId",i.entity.id)("entityName",i.entity.name)}}function Ea(e,t){if(1&e&&(r["\u0275\u0275elementStart"](0,"mat-tab",1,6),r["\u0275\u0275pipe"](2,"translate"),r["\u0275\u0275element"](3,"tb-alarm-table",7),r["\u0275\u0275elementEnd"]()),2&e){var n=r["\u0275\u0275reference"](1),i=r["\u0275\u0275nextContext"]();r["\u0275\u0275propertyInterpolate"]("label",r["\u0275\u0275pipeBind1"](2,3,"alarm.alarms")),r["\u0275\u0275advance"](3),r["\u0275\u0275property"]("active",n.isActive)("entityId",i.entity.id)}}var Ta=function(e){return[e]};function Ma(e,t){if(1&e&&(r["\u0275\u0275elementStart"](0,"mat-tab",1,8),r["\u0275\u0275pipe"](2,"translate"),r["\u0275\u0275element"](3,"tb-event-table",9),r["\u0275\u0275elementEnd"]()),2&e){var n=r["\u0275\u0275reference"](1),i=r["\u0275\u0275nextContext"]();r["\u0275\u0275propertyInterpolate"]("label",r["\u0275\u0275pipeBind1"](2,6,"rulechain.events")),r["\u0275\u0275advance"](3),r["\u0275\u0275property"]("debugEventTypes",r["\u0275\u0275pureFunction1"](8,Ta,i.debugEventTypes.DEBUG_RULE_CHAIN))("defaultEventType",i.debugEventTypes.DEBUG_RULE_CHAIN)("active",n.isActive)("tenantId",i.entity.tenantId.id)("entityId",i.entity.id)}}function Fa(e,t){if(1&e&&(r["\u0275\u0275elementStart"](0,"mat-tab",1,10),r["\u0275\u0275pipe"](2,"translate"),r["\u0275\u0275element"](3,"tb-relation-table",7),r["\u0275\u0275elementEnd"]()),2&e){var n=r["\u0275\u0275reference"](1),i=r["\u0275\u0275nextContext"]();r["\u0275\u0275propertyInterpolate"]("label",r["\u0275\u0275pipeBind1"](2,3,"relation.relations")),r["\u0275\u0275advance"](3),r["\u0275\u0275property"]("active",n.isActive)("entityId",i.entity.id)}}function Da(e,t){if(1&e&&(r["\u0275\u0275elementStart"](0,"mat-tab",1,11),r["\u0275\u0275pipe"](2,"translate"),r["\u0275\u0275element"](3,"tb-audit-log-table",12),r["\u0275\u0275elementEnd"]()),2&e){var n=r["\u0275\u0275reference"](1),i=r["\u0275\u0275nextContext"]();r["\u0275\u0275propertyInterpolate"]("label",r["\u0275\u0275pipeBind1"](2,4,"audit-log.audit-logs")),r["\u0275\u0275advance"](3),r["\u0275\u0275property"]("active",n.isActive)("auditLogMode",i.auditLogModes.ENTITY)("entityId",i.entity.id)}}var Aa=function(e){function t(t){var n=e.call(this,t)||this;return n.store=t,n}return Object(o.d)(t,e),t.prototype.ngOnInit=function(){e.prototype.ngOnInit.call(this)},t.\u0275fac=function(e){return new(e||t)(r["\u0275\u0275directiveInject"](m.Store))},t.\u0275cmp=r["\u0275\u0275defineComponent"]({type:t,selectors:[["tb-rulechain-tabs"]],features:[r["\u0275\u0275InheritDefinitionFeature"]],decls:6,vars:6,consts:[[3,"label",4,"ngIf"],[3,"label"],["attributesTab","matTab"],[3,"defaultAttributeScope","active","entityId","entityName"],["telemetryTab","matTab"],["disableAttributeScopeSelection","",3,"defaultAttributeScope","active","entityId","entityName"],["alarmsTab","matTab"],[3,"active","entityId"],["eventsTab","matTab"],[3,"debugEventTypes","defaultEventType","active","tenantId","entityId"],["relationsTab","matTab"],["auditLogsTab","matTab"],["detailsMode","true",3,"active","auditLogMode","entityId"]],template:function(e,t){1&e&&(r["\u0275\u0275template"](0,Ca,4,7,"mat-tab",0),r["\u0275\u0275template"](1,Ia,4,7,"mat-tab",0),r["\u0275\u0275template"](2,Ea,4,5,"mat-tab",0),r["\u0275\u0275template"](3,Ma,4,10,"mat-tab",0),r["\u0275\u0275template"](4,Fa,4,5,"mat-tab",0),r["\u0275\u0275template"](5,Da,4,6,"mat-tab",0)),2&e&&(r["\u0275\u0275property"]("ngIf",t.entity),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",t.entity),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",t.entity),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",t.entity),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",t.entity),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",t.entity&&t.authUser.authority===t.authorities.TENANT_ADMIN))},directives:[i.NgIf,xe.MatTab,On.a,_n.a,Bn.a,jn.a,fr.a],pipes:[f.TranslatePipe],encapsulation:2}),t}(Ln.a);!function(){r["\u0275setClassMetadata"](Aa,[{type:r.Component,args:[{selector:"tb-rulechain-tabs",templateUrl:"./rulechain-tabs.component.html",styleUrls:[]}]}],(function(){return[{type:m.Store}]}),null)}();var Pa=n("9HAa"),Na=n("FBAY"),ka=function(){function e(e,t,n,r,i,a,o){var l=this;this.ruleChainService=e,this.dialogService=t,this.importExport=n,this.itembuffer=r,this.translate=i,this.datePipe=a,this.router=o,this.config=new In.d,this.config.entityType=kn.b.RULE_CHAIN,this.config.entityComponent=Sa,this.config.entityTabsComponent=Aa,this.config.entityTranslations=kn.d.get(kn.b.RULE_CHAIN),this.config.entityResources=kn.c.get(kn.b.RULE_CHAIN),this.config.columns.push(new In.a("createdTime","common.created-time",this.datePipe,"150px"),new In.c("name","rulechain.name","100%"),new In.c("root","rulechain.root","60px",(function(e){return Object(In.e)(e.root)}))),this.config.addActionDescriptors.push({name:this.translate.instant("rulechain.create-new-rulechain"),icon:"insert_drive_file",isEnabled:function(){return!0},onAction:function(e){return l.config.table.addEntity(e)}},{name:this.translate.instant("rulechain.import"),icon:"file_upload",isEnabled:function(){return!0},onAction:function(e){return l.importRuleChain(e)}}),this.config.cellActionDescriptors.push({name:this.translate.instant("rulechain.open-rulechain"),icon:"settings_ethernet",isEnabled:function(){return!0},onAction:function(e,t){return l.openRuleChain(e,t)}},{name:this.translate.instant("rulechain.export"),icon:"file_download",isEnabled:function(){return!0},onAction:function(e,t){return l.exportRuleChain(e,t)}},{name:this.translate.instant("rulechain.set-root"),icon:"flag",isEnabled:function(e){return!e.root},onAction:function(e,t){return l.setRootRuleChain(e,t)}}),this.config.deleteEntityTitle=function(e){return l.translate.instant("rulechain.delete-rulechain-title",{ruleChainName:e.name})},this.config.deleteEntityContent=function(){return l.translate.instant("rulechain.delete-rulechain-text")},this.config.deleteEntitiesTitle=function(e){return l.translate.instant("rulechain.delete-rulechains-title",{count:e})},this.config.deleteEntitiesContent=function(){return l.translate.instant("rulechain.delete-rulechains-text")},this.config.entitiesFetchFunction=function(e){return l.ruleChainService.getRuleChains(e)},this.config.loadEntity=function(e){return l.ruleChainService.getRuleChain(e.id)},this.config.saveEntity=function(e){return l.ruleChainService.saveRuleChain(e)},this.config.deleteEntity=function(e){return l.ruleChainService.deleteRuleChain(e.id)},this.config.onEntityAction=function(e){return l.onRuleChainAction(e)},this.config.deleteEnabled=function(e){return e&&!e.root},this.config.entitySelectionEnabled=function(e){return e&&!e.root}}return e.prototype.resolve=function(){return this.config.tableTitle=this.translate.instant("rulechain.rulechains"),this.config},e.prototype.importRuleChain=function(e){var t=this;e&&e.stopPropagation(),this.importExport.importRuleChain().subscribe((function(e){e&&(t.itembuffer.storeRuleChainImport(e),t.router.navigateByUrl("ruleChains/ruleChain/import"))}))},e.prototype.openRuleChain=function(e,t){e&&e.stopPropagation(),this.router.navigateByUrl("ruleChains/"+t.id.id)},e.prototype.exportRuleChain=function(e,t){e&&e.stopPropagation(),this.importExport.exportRuleChain(t.id.id)},e.prototype.setRootRuleChain=function(e,t){var n=this;e&&e.stopPropagation(),this.dialogService.confirm(this.translate.instant("rulechain.set-root-rulechain-title",{ruleChainName:t.name}),this.translate.instant("rulechain.set-root-rulechain-text"),this.translate.instant("action.no"),this.translate.instant("action.yes"),!0).subscribe((function(e){e&&n.ruleChainService.setRootRuleChain(t.id.id).subscribe((function(){n.config.table.updateData()}))}))},e.prototype.onRuleChainAction=function(e){switch(e.action){case"open":return this.openRuleChain(e.event,e.entity),!0;case"export":return this.exportRuleChain(e.event,e.entity),!0;case"setRoot":return this.setRootRuleChain(e.event,e.entity),!0}return!1},e.\u0275fac=function(t){return new(t||e)(r["\u0275\u0275inject"](wa.a),r["\u0275\u0275inject"](U.a),r["\u0275\u0275inject"](Pa.a),r["\u0275\u0275inject"](Na.a),r["\u0275\u0275inject"](f.TranslateService),r["\u0275\u0275inject"](i.DatePipe),r["\u0275\u0275inject"](a.Router))},e.\u0275prov=r["\u0275\u0275defineInjectable"]({token:e,factory:e.\u0275fac}),e}();!function(){r["\u0275setClassMetadata"](ka,[{type:r.Injectable}],(function(){return[{type:wa.a},{type:U.a},{type:Pa.a},{type:Na.a},{type:f.TranslateService},{type:i.DatePipe},{type:a.Router}]}),null)}();var La=n("Cfvw"),Oa=n("m3bB"),_a=n("GL+W"),Ba=n("6C3e"),ja=function(){function e(e){this.ruleChainService=e}return e.prototype.resolve=function(e){var t=e.params.ruleChainId;return this.ruleChainService.getRuleChain(t)},e.\u0275fac=function(t){return new(t||e)(r["\u0275\u0275inject"](wa.a))},e.\u0275prov=r["\u0275\u0275defineInjectable"]({token:e,factory:e.\u0275fac}),e}();!function(){r["\u0275setClassMetadata"](ja,[{type:r.Injectable}],(function(){return[{type:wa.a}]}),null)}();var Ra=function(){function e(e){this.ruleChainService=e}return e.prototype.resolve=function(e){var t=e.params.ruleChainId;return this.ruleChainService.getResolvedRuleChainMetadata(t)},e.\u0275fac=function(t){return new(t||e)(r["\u0275\u0275inject"](wa.a))},e.\u0275prov=r["\u0275\u0275defineInjectable"]({token:e,factory:e.\u0275fac}),e}();!function(){r["\u0275setClassMetadata"](Ra,[{type:r.Injectable}],(function(){return[{type:wa.a}]}),null)}();var Va=function(){function e(e,t){this.ruleChainService=e,this.modulesMap=t}return e.prototype.resolve=function(e){return this.ruleChainService.getRuleNodeComponents(this.modulesMap)},e.\u0275fac=function(t){return new(t||e)(r["\u0275\u0275inject"](wa.a),r["\u0275\u0275inject"](Ba.MODULES_MAP,8))},e.\u0275prov=r["\u0275\u0275defineInjectable"]({token:e,factory:e.\u0275fac}),e}();!function(){r["\u0275setClassMetadata"](Va,[{type:r.Injectable}],(function(){return[{type:wa.a},{type:void 0,decorators:[{type:r.Optional},{type:r.Inject,args:[Ba.MODULES_MAP]}]}]}),null)}();var za=function(){function e(){}return e.prototype.resolve=function(e){return Object(La.a)(n.e(53).then(n.t.bind(null,"N1Jl",7)))},e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=r["\u0275\u0275defineInjectable"]({token:e,factory:e.\u0275fac}),e}();!function(){r["\u0275setClassMetadata"](za,[{type:r.Injectable}],(function(){return[]}),null)}();var Ga=function(){function e(e,t){this.itembuffer=e,this.router=t}return e.prototype.canActivate=function(e,t){return!!this.itembuffer.hasRuleChainImport()||this.router.parseUrl("ruleChains")},e.\u0275fac=function(t){return new(t||e)(r["\u0275\u0275inject"](_a.ItemBufferService),r["\u0275\u0275inject"](a.Router))},e.\u0275prov=r["\u0275\u0275defineInjectable"]({token:e,factory:e.\u0275fac}),e}();!function(){r["\u0275setClassMetadata"](Ga,[{type:r.Injectable}],(function(){return[{type:_a.ItemBufferService},{type:a.Router}]}),null)}();var Ua=[{path:"ruleChains",data:{breadcrumb:{label:"rulechain.rulechains",icon:"settings_ethernet"}},children:[{path:"",component:Pn.a,data:{auth:[$.a.TENANT_ADMIN],title:"rulechain.rulechains"},resolve:{entitiesTableConfig:ka}},{path:":ruleChainId",component:Oa.c,canDeactivate:[q],data:{breadcrumb:{labelFunction:function(e,t,n){var r=n.ruleChain.name;return n.ruleChain.root&&(r+=" ("+t.instant("rulechain.root")+")"),r},icon:"settings_ethernet"},auth:[$.a.TENANT_ADMIN],title:"rulechain.rulechain",import:!1},resolve:{ruleChain:ja,ruleChainMetaData:Ra,ruleNodeComponents:Va,tooltipster:za}},{path:"ruleChain/import",component:Oa.c,canActivate:[Ga],canDeactivate:[q],data:{breadcrumb:{labelFunction:function(e,t,n){return t.instant("rulechain.import")+": "+n.ruleChain.name},icon:"settings_ethernet"},auth:[$.a.TENANT_ADMIN],title:"rulechain.rulechain",import:!0},resolve:{ruleNodeComponents:Va,tooltipster:za}}]}],qa=function(){function e(){}return e.\u0275mod=r["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=r["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},providers:[ka,ja,Ra,Va,za,Ga],imports:[[a.RouterModule.forChild(Ua)],a.RouterModule]}),e}();void(("undefined"==typeof ngJitMode||ngJitMode)&&r["\u0275\u0275setNgModuleScope"](qa,{imports:[a.RouterModule],exports:[a.RouterModule]}));var $a=n("/Vd+"),Wa=n("+5dr"),Ha=n("jhN1");function Ka(e,t){if(1&e&&(r["\u0275\u0275elementStart"](0,"mat-icon",10),r["\u0275\u0275text"](1),r["\u0275\u0275elementEnd"]()),2&e){var n=r["\u0275\u0275nextContext"]();r["\u0275\u0275advance"](1),r["\u0275\u0275textInterpolate"](n.node.icon)}}function Ja(e,t){if(1&e&&r["\u0275\u0275element"](0,"img",11),2&e){var n=r["\u0275\u0275nextContext"]();r["\u0275\u0275property"]("src",n.iconUrl,r["\u0275\u0275sanitizeUrl"])}}function Ya(e,t){if(1&e&&(r["\u0275\u0275elementStart"](0,"span",12),r["\u0275\u0275text"](1),r["\u0275\u0275elementEnd"]()),2&e){var n=r["\u0275\u0275nextContext"]();r["\u0275\u0275advance"](1),r["\u0275\u0275textInterpolate"](n.node.name)}}function Xa(e,t){if(1&e&&(r["\u0275\u0275elementStart"](0,"div",13),r["\u0275\u0275element"](1,"div",14),r["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit,i=r["\u0275\u0275nextContext"]();r["\u0275\u0275property"]("connector",n)("callbacks",i.callbacks),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("connector",n)("nodeRectInfo",i.nodeRectInfo)("mouseOverConnector",i.mouseOverConnector)("callbacks",i.callbacks)("modelservice",i.modelservice)}}function Qa(e,t){if(1&e&&(r["\u0275\u0275elementStart"](0,"div",13),r["\u0275\u0275element"](1,"div",14),r["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit,i=r["\u0275\u0275nextContext"]();r["\u0275\u0275property"]("connector",n)("callbacks",i.callbacks),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("connector",n)("nodeRectInfo",i.nodeRectInfo)("mouseOverConnector",i.mouseOverConnector)("callbacks",i.callbacks)("modelservice",i.modelservice)}}function Za(e,t){if(1&e){var n=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"section"),r["\u0275\u0275elementStart"](1,"div",15),r["\u0275\u0275listener"]("click",(function(e){r["\u0275\u0275restoreView"](n);var t=r["\u0275\u0275nextContext"]();return t.userNodeCallbacks.nodeEdit(e,t.node)})),r["\u0275\u0275element"](2,"i",16),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](3,"div",17),r["\u0275\u0275listener"]("click",(function(){r["\u0275\u0275restoreView"](n);var e=r["\u0275\u0275nextContext"]();return e.modelservice.nodes.delete(e.node)})),r["\u0275\u0275text"](4," \xd7 "),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()}}function eo(e,t){if(1&e){var n=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"section"),r["\u0275\u0275elementStart"](1,"div",18),r["\u0275\u0275listener"]("click",(function(e){r["\u0275\u0275restoreView"](n);var t=r["\u0275\u0275nextContext"]();return t.openRuleChain(e,t.node)})),r["\u0275\u0275element"](2,"mat-icon",19),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()}}var to=function(e,t){return{"tb-rule-node-highlighted":e,"tb-rule-node-invalid":t}},no=function(e){function t(t,n){var r=e.call(this)||this;return r.sanitizer=t,r.router=n,r.RuleNodeType=Wa.c,r}return Object(o.d)(t,e),t.prototype.ngOnInit=function(){e.prototype.ngOnInit.call(this),this.node.iconUrl&&(this.iconUrl=this.sanitizer.bypassSecurityTrustResourceUrl(this.node.iconUrl))},t.prototype.openRuleChain=function(e,t){e&&e.stopPropagation(),t.targetRuleChainId&&this.router.navigateByUrl("/ruleChains/"+t.targetRuleChainId)},t.\u0275fac=function(e){return new(e||t)(r["\u0275\u0275directiveInject"](Ha.DomSanitizer),r["\u0275\u0275directiveInject"](a.Router))},t.\u0275cmp=r["\u0275\u0275defineComponent"]({type:t,selectors:[["rule-node"]],features:[r["\u0275\u0275InheritDefinitionFeature"]],decls:15,vars:21,consts:[[3,"dblclick","mousedown","mouseenter","mouseleave"],[1,"fc-node-overlay"],[3,"ngClass"],["fxFlex","15",4,"ngIf"],["fxFlex","15",3,"src",4,"ngIf"],["fxLayout","column","fxFlex","85","fxLayoutAlign","center"],[1,"tb-node-type"],["class","tb-node-title",4,"ngIf"],["fc-magnet","",3,"connector","callbacks",4,"ngFor","ngForOf"],[4,"ngIf"],["fxFlex","15"],["fxFlex","15",3,"src"],[1,"tb-node-title"],["fc-magnet","",3,"connector","callbacks"],["fc-connector","",3,"connector","nodeRectInfo","mouseOverConnector","callbacks","modelservice"],[1,"fc-nodeedit",3,"click"],["aria-hidden","true",1,"fa","fa-pencil"],[1,"fc-nodedelete",3,"click"],[1,"fc-nodeopen",3,"click"],["svgIcon","mdi:login",1,"material-icons"]],template:function(e,t){1&e&&(r["\u0275\u0275elementStart"](0,"div",0),r["\u0275\u0275listener"]("dblclick",(function(e){return t.userNodeCallbacks.doubleClick(e,t.node)}))("mousedown",(function(e){return t.userNodeCallbacks.mouseDown(e,t.node)}))("mouseenter",(function(e){return t.userNodeCallbacks.mouseEnter(e,t.node)}))("mouseleave",(function(e){return t.userNodeCallbacks.mouseLeave(e,t.node)})),r["\u0275\u0275element"](1,"div",1),r["\u0275\u0275elementStart"](2,"div",2),r["\u0275\u0275template"](3,Ka,2,1,"mat-icon",3),r["\u0275\u0275template"](4,Ja,1,1,"img",4),r["\u0275\u0275elementStart"](5,"div",5),r["\u0275\u0275elementStart"](6,"span",6),r["\u0275\u0275text"](7),r["\u0275\u0275elementEnd"](),r["\u0275\u0275template"](8,Ya,2,1,"span",7),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](9,"div"),r["\u0275\u0275template"](10,Xa,2,7,"div",8),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](11,"div"),r["\u0275\u0275template"](12,Qa,2,7,"div",8),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275template"](13,Za,5,0,"section",9),r["\u0275\u0275template"](14,eo,3,0,"section",9),r["\u0275\u0275elementEnd"]()),2&e&&(r["\u0275\u0275advance"](2),r["\u0275\u0275classMapInterpolate1"]("tb-rule-node ",t.node.nodeClass,""),r["\u0275\u0275property"]("ngClass",r["\u0275\u0275pureFunction2"](18,to,t.node.highlighted,t.node.error)),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",!t.iconUrl),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",t.iconUrl),r["\u0275\u0275advance"](3),r["\u0275\u0275textInterpolate"](t.node.component.name),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",t.node.name),r["\u0275\u0275advance"](1),r["\u0275\u0275classMap"](t.flowchartConstants.leftConnectorClass),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngForOf",t.modelservice.nodes.getConnectorsByType(t.node,t.flowchartConstants.leftConnectorType)),r["\u0275\u0275advance"](1),r["\u0275\u0275classMap"](t.flowchartConstants.rightConnectorClass),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngForOf",t.modelservice.nodes.getConnectorsByType(t.node,t.flowchartConstants.rightConnectorType)),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",t.modelservice.isEditable()&&!t.node.readonly),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",t.node.component.type===t.RuleNodeType.RULE_CHAIN&&t.modelservice.isEditable()))},directives:[i.NgClass,ve.b,i.NgIf,h.f,h.b,h.e,i.NgForOf,be.MatIcon,$a.d,$a.c],styles:["[_nghost-%COMP%]   .fc-node-overlay[_ngcontent-%COMP%]{position:absolute;pointer-events:none;left:0;top:0;right:0;bottom:0;background-color:#000;border-radius:5px;opacity:0}[_nghost-%COMP%]   .fc-hover[_nghost-%COMP%]   .fc-node-overlay[_ngcontent-%COMP%], .fc-hover   [_nghost-%COMP%]   .fc-node-overlay[_ngcontent-%COMP%]{opacity:.25;transition:opacity .2s}[_nghost-%COMP%]   .fc-selected[_nghost-%COMP%]   .fc-node-overlay[_ngcontent-%COMP%], .fc-selected   [_nghost-%COMP%]   .fc-node-overlay[_ngcontent-%COMP%]{opacity:.25}[_nghost-%COMP%]   .fc-edit[_nghost-%COMP%]   .fc-nodedelete[_ngcontent-%COMP%], .fc-edit   [_nghost-%COMP%]   .fc-nodedelete[_ngcontent-%COMP%], [_nghost-%COMP%]   .fc-edit[_nghost-%COMP%]   .fc-nodeedit[_ngcontent-%COMP%], .fc-edit   [_nghost-%COMP%]   .fc-nodeedit[_ngcontent-%COMP%]{box-sizing:content-box;border:2px solid #fff;background:#f83e05;outline:none}[_nghost-%COMP%]   .tb-rule-node[_ngcontent-%COMP%]{box-sizing:content-box;display:-ms-flexbox;display:flex;-ms-flex-direction:row;flex-direction:row;min-width:150px;max-width:150px;height:32px;min-height:32px;max-height:32px;padding:5px 10px;font-size:12px;line-height:16px;color:#333;pointer-events:none;background-color:#f15b26;border:1px solid #777;border-radius:5px}[_nghost-%COMP%]   .tb-rule-node.tb-filter-type[_ngcontent-%COMP%]{background-color:#f1e861}[_nghost-%COMP%]   .tb-rule-node.tb-enrichment-type[_ngcontent-%COMP%]{background-color:#cdf14e}[_nghost-%COMP%]   .tb-rule-node.tb-transformation-type[_ngcontent-%COMP%]{background-color:#79cef1}[_nghost-%COMP%]   .tb-rule-node.tb-action-type[_ngcontent-%COMP%]{background-color:#f1928f}[_nghost-%COMP%]   .tb-rule-node.tb-external-type[_ngcontent-%COMP%]{background-color:#fbc766}[_nghost-%COMP%]   .tb-rule-node.tb-rule-chain-type[_ngcontent-%COMP%]{background-color:#d6c4f1}[_nghost-%COMP%]   .tb-rule-node.tb-unknown-type[_ngcontent-%COMP%]{background-color:#f16c29}[_nghost-%COMP%]   .tb-rule-node.tb-rule-node-highlighted[_ngcontent-%COMP%]:not(.tb-rule-node-invalid){box-shadow:0 0 10px 6px #51cbee}[_nghost-%COMP%]   .tb-rule-node.tb-rule-node-highlighted[_ngcontent-%COMP%]:not(.tb-rule-node-invalid)   .tb-node-title[_ngcontent-%COMP%]{font-weight:700;text-decoration:underline}[_nghost-%COMP%]   .tb-rule-node.tb-rule-node-invalid[_ngcontent-%COMP%]{box-shadow:0 0 10px 6px #ff5c50}[_nghost-%COMP%]   .tb-rule-node.tb-input-type[_ngcontent-%COMP%]{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;background-color:#a3eaa9}[_nghost-%COMP%]   .tb-rule-node[_ngcontent-%COMP%]   img[_ngcontent-%COMP%], [_nghost-%COMP%]   .tb-rule-node[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{margin:auto;width:20px;min-width:20px;height:20px;min-height:20px;padding-right:4px;font-size:20px}[_nghost-%COMP%]   .tb-rule-node[_ngcontent-%COMP%]   .tb-node-title[_ngcontent-%COMP%]{font-weight:500}[_nghost-%COMP%]   .tb-rule-node[_ngcontent-%COMP%]   .tb-node-title[_ngcontent-%COMP%], [_nghost-%COMP%]   .tb-rule-node[_ngcontent-%COMP%]   .tb-node-type[_ngcontent-%COMP%]{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}[_nghost-%COMP%]   .tb-rule-node[_ngcontent-%COMP%]   .fc-leftConnectors[_ngcontent-%COMP%], [_nghost-%COMP%]   .tb-rule-node[_ngcontent-%COMP%]   .fc-rightConnectors[_ngcontent-%COMP%]{position:absolute;top:0;z-index:0;display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;height:100%}[_nghost-%COMP%]   .tb-rule-node[_ngcontent-%COMP%]   .fc-leftConnectors[_ngcontent-%COMP%]   .fc-magnet[_ngcontent-%COMP%], [_nghost-%COMP%]   .tb-rule-node[_ngcontent-%COMP%]   .fc-rightConnectors[_ngcontent-%COMP%]   .fc-magnet[_ngcontent-%COMP%]{-ms-flex-align:center;align-items:center}[_nghost-%COMP%]   .tb-rule-node[_ngcontent-%COMP%]   .fc-leftConnectors[_ngcontent-%COMP%]{left:-20px}[_nghost-%COMP%]   .tb-rule-node[_ngcontent-%COMP%]   .fc-rightConnectors[_ngcontent-%COMP%]{right:-20px}[_nghost-%COMP%]   .tb-rule-node[_ngcontent-%COMP%]   .fc-magnet[_ngcontent-%COMP%]{display:-ms-flexbox;display:flex;-ms-flex-positive:1;flex-grow:1;-ms-flex-pack:center;justify-content:center;height:60px}[_nghost-%COMP%]   .tb-rule-node[_ngcontent-%COMP%]   .fc-connector[_ngcontent-%COMP%]{width:14px;height:14px;margin:10px;pointer-events:all;background-color:#ccc;border:1px solid #333;border-radius:5px}[_nghost-%COMP%]   .tb-rule-node[_ngcontent-%COMP%]   .fc-connector.fc-hover[_ngcontent-%COMP%]{background-color:#000}"]}),t}($a.e);!function(){r["\u0275setClassMetadata"](no,[{type:r.Component,args:[{selector:"rule-node",templateUrl:"./rulenode.component.html",styleUrls:["./rulenode.component.scss"]}]}],(function(){return[{type:Ha.DomSanitizer},{type:a.Router}]}),null)}();var ro=n("YCWy"),io=n("4t2C"),ao=n("j22J"),oo=n("vpxU"),lo=function(){function e(){}return e.\u0275mod=r["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=r["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},providers:[{provide:$a.b,useValue:{nodeComponentType:no}}],imports:[[i.CommonModule,jt.a,Rt.a,qa]]}),e}();void(("undefined"==typeof ngJitMode||ngJitMode)&&r["\u0275\u0275setNgModuleScope"](lo,{declarations:[Sa,Aa,Oa.c,no,ro.a,oo.a,ao.a,io.a,Oa.b,Oa.a],imports:[i.CommonModule,jt.a,Rt.a,qa]}));var so=n("0HhY");function co(e,t){1&e&&(r["\u0275\u0275elementStart"](0,"mat-error"),r["\u0275\u0275text"](1),r["\u0275\u0275pipe"](2,"translate"),r["\u0275\u0275elementEnd"]()),2&e&&(r["\u0275\u0275advance"](1),r["\u0275\u0275textInterpolate1"](" ",r["\u0275\u0275pipeBind1"](2,1,"widgets-bundle.title-required")," "))}var uo=function(e){function t(t,n,r,i){var a=e.call(this,t,i,n,r)||this;return a.store=t,a.entityValue=n,a.entitiesTableConfigValue=r,a.fb=i,a}return Object(o.d)(t,e),t.prototype.hideDelete=function(){return!!this.entitiesTableConfig&&!this.entitiesTableConfig.deleteEnabled(this.entity)},t.prototype.buildForm=function(e){return this.fb.group({title:[e?e.title:"",[s.Validators.required]],image:[e?e.image:""],description:[e?e.description:"",s.Validators.maxLength(255)]})},t.prototype.updateForm=function(e){this.entityForm.patchValue({title:e.title,image:e.image,description:e.description})},t.\u0275fac=function(e){return new(e||t)(r["\u0275\u0275directiveInject"](m.Store),r["\u0275\u0275directiveInject"]("entity"),r["\u0275\u0275directiveInject"]("entitiesTableConfig"),r["\u0275\u0275directiveInject"](s.FormBuilder))},t.\u0275cmp=r["\u0275\u0275defineComponent"]({type:t,selectors:[["tb-widgets-bundle"]],features:[r["\u0275\u0275InheritDefinitionFeature"]],decls:31,vars:30,consts:[["fxLayout.xs","column",1,"tb-details-buttons"],["mat-raised-button","","color","primary",3,"disabled","fxShow","click"],["fxLayout","column",1,"mat-padding"],[3,"formGroup"],[3,"disabled"],[1,"mat-block"],["translate",""],["matInput","","formControlName","title","required",""],[4,"ngIf"],["fxFlex","","maxSizeByte","524288","formControlName","image",3,"label"],["matInput","","formControlName","description","rows","2","maxlength","255"],["descriptionInput",""],["align","end"]],template:function(e,t){if(1&e&&(r["\u0275\u0275elementStart"](0,"div",0),r["\u0275\u0275elementStart"](1,"button",1),r["\u0275\u0275listener"]("click",(function(e){return t.onEntityAction(e,"open")})),r["\u0275\u0275pipe"](2,"async"),r["\u0275\u0275text"](3),r["\u0275\u0275pipe"](4,"translate"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](5,"button",1),r["\u0275\u0275listener"]("click",(function(e){return t.onEntityAction(e,"export")})),r["\u0275\u0275pipe"](6,"async"),r["\u0275\u0275text"](7),r["\u0275\u0275pipe"](8,"translate"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](9,"button",1),r["\u0275\u0275listener"]("click",(function(e){return t.onEntityAction(e,"delete")})),r["\u0275\u0275pipe"](10,"async"),r["\u0275\u0275text"](11),r["\u0275\u0275pipe"](12,"translate"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](13,"div",2),r["\u0275\u0275elementStart"](14,"form",3),r["\u0275\u0275elementStart"](15,"fieldset",4),r["\u0275\u0275pipe"](16,"async"),r["\u0275\u0275elementStart"](17,"mat-form-field",5),r["\u0275\u0275elementStart"](18,"mat-label",6),r["\u0275\u0275text"](19,"widgets-bundle.title"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275element"](20,"input",7),r["\u0275\u0275template"](21,co,3,3,"mat-error",8),r["\u0275\u0275elementEnd"](),r["\u0275\u0275element"](22,"tb-image-input",9),r["\u0275\u0275pipe"](23,"translate"),r["\u0275\u0275elementStart"](24,"mat-form-field",5),r["\u0275\u0275elementStart"](25,"mat-label",6),r["\u0275\u0275text"](26,"widgets-bundle.description"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275element"](27,"textarea",10,11),r["\u0275\u0275elementStart"](29,"mat-hint",12),r["\u0275\u0275text"](30),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()),2&e){var n=r["\u0275\u0275reference"](28);r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("disabled",r["\u0275\u0275pipeBind1"](2,14,t.isLoading$))("fxShow",!t.isEdit),r["\u0275\u0275advance"](2),r["\u0275\u0275textInterpolate1"](" ",r["\u0275\u0275pipeBind1"](4,16,"widgets-bundle.open-widgets-bundle")," "),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("disabled",r["\u0275\u0275pipeBind1"](6,18,t.isLoading$))("fxShow",!t.isEdit),r["\u0275\u0275advance"](2),r["\u0275\u0275textInterpolate1"](" ",r["\u0275\u0275pipeBind1"](8,20,"widgets-bundle.export")," "),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("disabled",r["\u0275\u0275pipeBind1"](10,22,t.isLoading$))("fxShow",!t.hideDelete()&&!t.isEdit),r["\u0275\u0275advance"](2),r["\u0275\u0275textInterpolate1"](" ",r["\u0275\u0275pipeBind1"](12,24,"widgets-bundle.delete")," "),r["\u0275\u0275advance"](3),r["\u0275\u0275property"]("formGroup",t.entityForm),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("disabled",r["\u0275\u0275pipeBind1"](16,26,t.isLoading$)||!t.isEdit),r["\u0275\u0275advance"](6),r["\u0275\u0275property"]("ngIf",t.entityForm.get("title").hasError("required")),r["\u0275\u0275advance"](1),r["\u0275\u0275propertyInterpolate"]("label",r["\u0275\u0275pipeBind1"](23,28,"widgets-bundle.image-preview")),r["\u0275\u0275advance"](8),r["\u0275\u0275textInterpolate1"]("",(null==n.value?null:n.value.length)||0,"/255")}},directives:[h.f,w.MatButton,ve.d,s["\u0275angular_packages_forms_forms_y"],s.NgControlStatusGroup,s.FormGroupDirective,y.MatFormField,y.MatLabel,f.TranslateDirective,v.MatInput,s.DefaultValueAccessor,s.NgControlStatus,s.FormControlName,s.RequiredValidator,i.NgIf,so.a,h.b,s.MaxLengthValidator,y.MatHint,y.MatError],pipes:[i.AsyncPipe,f.TranslatePipe],styles:[""]}),t}(Cn.a);!function(){r["\u0275setClassMetadata"](uo,[{type:r.Component,args:[{selector:"tb-widgets-bundle",templateUrl:"./widgets-bundle.component.html",styleUrls:["./widgets-bundle.component.scss"]}]}],(function(){return[{type:m.Store},{type:void 0,decorators:[{type:r.Inject,args:["entity"]}]},{type:In.d,decorators:[{type:r.Inject,args:["entitiesTableConfig"]}]},{type:s.FormBuilder}]}),null)}();var po=n("5xOD"),mo=n("4r/P"),fo=function(){function e(e,t,n,r,i,a,o){var l=this;this.store=e,this.dialogService=t,this.widgetsService=n,this.translate=r,this.importExport=i,this.datePipe=a,this.router=o,this.config=new In.d,this.config.entityType=kn.b.WIDGETS_BUNDLE,this.config.entityComponent=uo,this.config.entityTranslations=kn.d.get(kn.b.WIDGETS_BUNDLE),this.config.entityResources=kn.c.get(kn.b.WIDGETS_BUNDLE),this.config.defaultSortOrder={property:"title",direction:mo.a.ASC},this.config.entityTitle=function(e){return e?e.title:""},this.config.columns.push(new In.a("createdTime","common.created-time",this.datePipe,"150px"),new In.c("title","widgets-bundle.title","100%"),new In.c("tenantId","widgets-bundle.system","60px",(function(e){return Object(In.e)(e.tenantId.id===mr.a)}))),this.config.addActionDescriptors.push({name:this.translate.instant("widgets-bundle.create-new-widgets-bundle"),icon:"insert_drive_file",isEnabled:function(){return!0},onAction:function(e){return l.config.table.addEntity(e)}},{name:this.translate.instant("widgets-bundle.import"),icon:"file_upload",isEnabled:function(){return!0},onAction:function(e){return l.importWidgetsBundle(e)}}),this.config.cellActionDescriptors.push({name:this.translate.instant("widgets-bundle.open-widgets-bundle"),icon:"now_widgets",isEnabled:function(){return!0},onAction:function(e,t){return l.openWidgetsBundle(e,t)}},{name:this.translate.instant("widgets-bundle.export"),icon:"file_download",isEnabled:function(){return!0},onAction:function(e,t){return l.exportWidgetsBundle(e,t)}}),this.config.deleteEntityTitle=function(e){return l.translate.instant("widgets-bundle.delete-widgets-bundle-title",{widgetsBundleTitle:e.title})},this.config.deleteEntityContent=function(){return l.translate.instant("widgets-bundle.delete-widgets-bundle-text")},this.config.deleteEntitiesTitle=function(e){return l.translate.instant("widgets-bundle.delete-widgets-bundles-title",{count:e})},this.config.deleteEntitiesContent=function(){return l.translate.instant("widgets-bundle.delete-widgets-bundles-text")},this.config.entitiesFetchFunction=function(e){return l.widgetsService.getWidgetBundles(e)},this.config.loadEntity=function(e){return l.widgetsService.getWidgetsBundle(e.id)},this.config.saveEntity=function(e){return l.widgetsService.saveWidgetsBundle(e)},this.config.deleteEntity=function(e){return l.widgetsService.deleteWidgetsBundle(e.id)},this.config.onEntityAction=function(e){return l.onWidgetsBundleAction(e)}}return e.prototype.resolve=function(){var e=this;this.config.tableTitle=this.translate.instant("widgets-bundle.widgets-bundles");var t=Object(z.b)(this.store);return this.config.deleteEnabled=function(n){return e.isWidgetsBundleEditable(n,t.authority)},this.config.entitySelectionEnabled=function(n){return e.isWidgetsBundleEditable(n,t.authority)},this.config.detailsReadonly=function(n){return!e.isWidgetsBundleEditable(n,t.authority)},this.config},e.prototype.isWidgetsBundleEditable=function(e,t){return t===$.a.TENANT_ADMIN?e&&e.tenantId&&e.tenantId.id!==mr.a:t===$.a.SYS_ADMIN},e.prototype.importWidgetsBundle=function(e){var t=this;this.importExport.importWidgetsBundle().subscribe((function(e){e&&t.config.table.updateData()}))},e.prototype.openWidgetsBundle=function(e,t){e&&e.stopPropagation(),this.router.navigateByUrl("widgets-bundles/"+t.id.id+"/widgetTypes")},e.prototype.exportWidgetsBundle=function(e,t){e&&e.stopPropagation(),this.importExport.exportWidgetsBundle(t.id.id)},e.prototype.onWidgetsBundleAction=function(e){switch(e.action){case"open":return this.openWidgetsBundle(e.event,e.entity),!0;case"export":return this.exportWidgetsBundle(e.event,e.entity),!0}return!1},e.\u0275fac=function(t){return new(t||e)(r["\u0275\u0275inject"](m.Store),r["\u0275\u0275inject"](U.a),r["\u0275\u0275inject"](po.a),r["\u0275\u0275inject"](f.TranslateService),r["\u0275\u0275inject"](Pa.a),r["\u0275\u0275inject"](i.DatePipe),r["\u0275\u0275inject"](a.Router))},e.\u0275prov=r["\u0275\u0275defineInjectable"]({token:e,factory:e.\u0275fac}),e}();!function(){r["\u0275setClassMetadata"](fo,[{type:r.Injectable}],(function(){return[{type:m.Store},{type:U.a},{type:po.a},{type:f.TranslateService},{type:Pa.a},{type:i.DatePipe},{type:a.Router}]}),null)}();var go=n("Xk9D"),ho=n("0lYY");function bo(e,t){1&e&&r["\u0275\u0275element"](0,"mat-progress-bar",14)}function yo(e,t){1&e&&r["\u0275\u0275element"](0,"div",15)}function vo(e,t){if(1&e&&(r["\u0275\u0275elementStart"](0,"mat-icon",19),r["\u0275\u0275text"](1),r["\u0275\u0275elementEnd"]()),2&e){var n=r["\u0275\u0275nextContext"]().$implicit,i=r["\u0275\u0275nextContext"]();r["\u0275\u0275advance"](1),r["\u0275\u0275textInterpolate1"](" ",i.widgetTypesDataMap.get(i.widgetTypes[n]).icon," ")}}function xo(e,t){if(1&e&&r["\u0275\u0275element"](0,"mat-icon",20),2&e){var n=r["\u0275\u0275nextContext"]().$implicit,i=r["\u0275\u0275nextContext"]();r["\u0275\u0275property"]("svgIcon",i.widgetTypesDataMap.get(i.widgetTypes[n]).icon)}}function So(e,t){if(1&e){var n=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"button",16),r["\u0275\u0275listener"]("click",(function(){r["\u0275\u0275restoreView"](n);var e=t.$implicit,i=r["\u0275\u0275nextContext"]();return i.typeSelected(i.widgetTypes[e])})),r["\u0275\u0275template"](1,vo,2,1,"mat-icon",17),r["\u0275\u0275template"](2,xo,1,1,"ng-template",null,18,r["\u0275\u0275templateRefExtractor"]),r["\u0275\u0275elementStart"](4,"span",2),r["\u0275\u0275text"](5),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()}if(2&e){var i=t.$implicit,a=r["\u0275\u0275reference"](3),o=r["\u0275\u0275nextContext"]();r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",!o.widgetTypesDataMap.get(o.widgetTypes[i]).isMdiIcon)("ngIfElse",a),r["\u0275\u0275advance"](4),r["\u0275\u0275textInterpolate"](o.widgetTypesDataMap.get(o.widgetTypes[i]).name)}}var wo=function(e){function t(t,n,r){var i=e.call(this,t,n,r)||this;return i.store=t,i.router=n,i.dialogRef=r,i.widgetTypes=ho.k,i.allWidgetTypes=Object.keys(ho.k),i.widgetTypesDataMap=ho.l,i}return Object(o.d)(t,e),t.prototype.cancel=function(){this.dialogRef.close(null)},t.prototype.typeSelected=function(e){this.dialogRef.close(e)},t.\u0275fac=function(e){return new(e||t)(r["\u0275\u0275directiveInject"](m.Store),r["\u0275\u0275directiveInject"](a.Router),r["\u0275\u0275directiveInject"](ft.MatDialogRef))},t.\u0275cmp=r["\u0275\u0275defineComponent"]({type:t,selectors:[["tb-select-widget-type-dialog"]],features:[r["\u0275\u0275InheritDefinitionFeature"]],decls:22,vars:16,consts:[[2,"width","800px"],["color","primary"],["translate",""],["fxFlex",""],["mat-icon-button","","type","button",3,"click"],[1,"material-icons"],["color","warn","mode","indeterminate",4,"ngIf"],["style","height: 4px;",4,"ngIf"],["mat-dialog-content",""],[3,"disabled"],["fxLayout","column","fxLayoutGap","16px","fxLayout.gt-sm","row","fxLayoutAlign","center center"],["class","tb-card-button","mat-raised-button","","color","primary","type","button",3,"click",4,"ngFor","ngForOf"],["mat-dialog-actions","","fxLayoutAlign","end center"],["mat-button","","color","primary","type","button","cdkFocusInitial","",3,"disabled","click"],["color","warn","mode","indeterminate"],[2,"height","4px"],["mat-raised-button","","color","primary","type","button",1,"tb-card-button",3,"click"],["class","tb-mat-96",4,"ngIf","ngIfElse"],["mdiIconBlock",""],[1,"tb-mat-96"],[1,"tb-mat-96",3,"svgIcon"]],template:function(e,t){1&e&&(r["\u0275\u0275elementStart"](0,"form",0),r["\u0275\u0275elementStart"](1,"mat-toolbar",1),r["\u0275\u0275elementStart"](2,"h2",2),r["\u0275\u0275text"](3,"widget.select-widget-type"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275element"](4,"span",3),r["\u0275\u0275elementStart"](5,"button",4),r["\u0275\u0275listener"]("click",(function(){return t.cancel()})),r["\u0275\u0275elementStart"](6,"mat-icon",5),r["\u0275\u0275text"](7,"close"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275template"](8,bo,1,0,"mat-progress-bar",6),r["\u0275\u0275pipe"](9,"async"),r["\u0275\u0275template"](10,yo,1,0,"div",7),r["\u0275\u0275pipe"](11,"async"),r["\u0275\u0275elementStart"](12,"div",8),r["\u0275\u0275elementStart"](13,"fieldset",9),r["\u0275\u0275pipe"](14,"async"),r["\u0275\u0275elementStart"](15,"div",10),r["\u0275\u0275template"](16,So,6,3,"button",11),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](17,"div",12),r["\u0275\u0275elementStart"](18,"button",13),r["\u0275\u0275listener"]("click",(function(){return t.cancel()})),r["\u0275\u0275pipe"](19,"async"),r["\u0275\u0275text"](20),r["\u0275\u0275pipe"](21,"translate"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()),2&e&&(r["\u0275\u0275advance"](8),r["\u0275\u0275property"]("ngIf",r["\u0275\u0275pipeBind1"](9,6,t.isLoading$)),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("ngIf",!r["\u0275\u0275pipeBind1"](11,8,t.isLoading$)),r["\u0275\u0275advance"](3),r["\u0275\u0275property"]("disabled",r["\u0275\u0275pipeBind1"](14,10,t.isLoading$)),r["\u0275\u0275advance"](3),r["\u0275\u0275property"]("ngForOf",t.allWidgetTypes),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("disabled",r["\u0275\u0275pipeBind1"](19,12,t.isLoading$)),r["\u0275\u0275advance"](2),r["\u0275\u0275textInterpolate1"](" ",r["\u0275\u0275pipeBind1"](21,14,"action.cancel")," "))},directives:[s["\u0275angular_packages_forms_forms_y"],s.NgControlStatusGroup,s.NgForm,ht.MatToolbar,f.TranslateDirective,h.b,w.MatButton,be.MatIcon,i.NgIf,ft.MatDialogContent,h.f,h.g,h.e,i.NgForOf,ft.MatDialogActions,C.MatProgressBar],pipes:[i.AsyncPipe,f.TranslatePipe],styles:["[_nghost-%COMP%]     button.tb-card-button{width:100%;height:100%;max-width:240px}[_nghost-%COMP%]     button.tb-card-button .mat-button-wrapper{width:100%;height:100%;display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;-ms-flex-align:center;align-items:center}[_nghost-%COMP%]     button.tb-card-button .mat-button-wrapper mat-icon{margin:auto}[_nghost-%COMP%]     button.tb-card-button .mat-button-wrapper span{height:18px;min-height:18px;max-height:18px;margin:0 0 20px;font-size:18px;font-weight:400;line-height:18px;white-space:normal}[_nghost-%COMP%]     button.tb-card-button.mat-raised-button.mat-primary .mat-ripple-element{opacity:.3;background-color:hsla(0,0%,100%,.3)}"]}),t}(gt.a);!function(){r["\u0275setClassMetadata"](wo,[{type:r.Component,args:[{selector:"tb-select-widget-type-dialog",templateUrl:"./select-widget-type-dialog.component.html",styleUrls:["./select-widget-type-dialog.component.scss"]}]}],(function(){return[{type:m.Store},{type:a.Router},{type:ft.MatDialogRef}]}),null)}();var Co=n("OiFK"),Io=n("21Fy"),Eo=n("eeD6"),To=n("8RXW"),Mo=["dashboard"];function Fo(e,t){if(1&e){var n=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"button",6),r["\u0275\u0275listener"]("click",(function(e){return r["\u0275\u0275restoreView"](n),r["\u0275\u0275nextContext"]().addWidgetType(e)})),r["\u0275\u0275elementStart"](1,"mat-icon",7),r["\u0275\u0275text"](2,"add"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275text"](3),r["\u0275\u0275pipe"](4,"translate"),r["\u0275\u0275elementEnd"]()}2&e&&(r["\u0275\u0275advance"](3),r["\u0275\u0275textInterpolate1"](" ",r["\u0275\u0275pipeBind1"](4,1,"widget.add-widget-type")," "))}function Do(e,t){1&e&&(r["\u0275\u0275elementStart"](0,"span",8),r["\u0275\u0275text"](1,"widgets-bundle.empty"),r["\u0275\u0275elementEnd"]())}var Ao=function(e){function t(t,n,r,i,a,o,l,s,d,c){var u=e.call(this,t)||this;return u.store=t,u.route=n,u.router=r,u.widgetService=i,u.dialogService=a,u.importExport=o,u.dialog=l,u.translate=s,u.utils=d,u.entityService=c,u.footerFabButtons={fabTogglerName:"widget.add-widget-type",fabTogglerIcon:"add",buttons:[{name:"widget-type.create-new-widget-type",icon:"insert_drive_file",onAction:function(e){u.addWidgetType(e)}},{name:"widget-type.import",icon:"file_upload",onAction:function(e){u.importWidgetType(e)}}]},u.dashboardCallbacks={onEditWidget:u.openWidgetType.bind(u),onExportWidget:u.exportWidgetType.bind(u),onRemoveWidget:u.removeWidgetType.bind(u)},u.aliasController=new go.a(u.utils,u.entityService,u.translate,(function(){return{getStateParams:function(){return{}}}}),{},{}),u.authUser=Object(z.b)(u.store),u.widgetsBundle=u.route.snapshot.data.widgetsBundle,u.widgetsData=u.route.snapshot.data.widgetsData,u.authUser.authority===$.a.TENANT_ADMIN?u.isReadOnly=!u.widgetsBundle||u.widgetsBundle.tenantId.id===mr.a:u.isReadOnly=u.authUser.authority!==$.a.SYS_ADMIN,u}return Object(o.d)(t,e),t.prototype.ngOnInit=function(){},t.prototype.addWidgetType=function(e){this.openWidgetType(e)},t.prototype.importWidgetType=function(e){var t=this;e&&e.stopPropagation(),this.importExport.importWidgetType(this.widgetsBundle.alias).subscribe((function(e){e&&t.reload()}))},t.prototype.reload=function(){var e=this,t=this.widgetsBundle.alias,n=this.widgetsBundle.tenantId.id===mr.a;this.widgetService.loadBundleLibraryWidgets(t,n).subscribe((function(t){e.widgetsData={widgets:t}}))},t.prototype.openWidgetType=function(e,t){var n=this;e&&e.stopPropagation(),t?this.router.navigate([t.typeId.id],{relativeTo:this.route}):this.dialog.open(wo,{disableClose:!0,panelClass:["tb-dialog","tb-fullscreen-dialog"]}).afterClosed().subscribe((function(e){e&&n.router.navigate(["add",e],{relativeTo:n.route})}))},t.prototype.exportWidgetType=function(e,t){e&&e.stopPropagation(),this.importExport.exportWidgetType(t.typeId.id)},t.prototype.removeWidgetType=function(e,t){var n=this;e&&e.stopPropagation(),this.dialogService.confirm(this.translate.instant("widget.remove-widget-type-title",{widgetName:t.config.title}),this.translate.instant("widget.remove-widget-type-text"),this.translate.instant("action.no"),this.translate.instant("action.yes")).pipe(Object($n.b)((function(e){return e?n.widgetService.deleteWidgetType(t.bundleAlias,t.typeAlias,t.isSystemType):Object(ti.a)(!1)})),Object(Hn.a)((function(e){return!1!==e&&(n.reload(),!0)}))).subscribe()},t.\u0275fac=function(e){return new(e||t)(r["\u0275\u0275directiveInject"](m.Store),r["\u0275\u0275directiveInject"](a.ActivatedRoute),r["\u0275\u0275directiveInject"](a.Router),r["\u0275\u0275directiveInject"](po.a),r["\u0275\u0275directiveInject"](U.a),r["\u0275\u0275directiveInject"](Pa.a),r["\u0275\u0275directiveInject"](ft.MatDialog),r["\u0275\u0275directiveInject"](f.TranslateService),r["\u0275\u0275directiveInject"](Co.a),r["\u0275\u0275directiveInject"](Io.a))},t.\u0275cmp=r["\u0275\u0275defineComponent"]({type:t,selectors:[["tb-widget-library"]],viewQuery:function(e,t){var n;(1&e&&r["\u0275\u0275staticViewQuery"](Mo,!0),2&e)&&(r["\u0275\u0275queryRefresh"](n=r["\u0275\u0275loadQuery"]())&&(t.dashboard=n.first))},features:[r["\u0275\u0275InheritDefinitionFeature"]],decls:7,vars:16,consts:[["fxLayoutAlign","center center",1,"tb-absolute-fill",2,"display","flex","z-index","1",3,"fxShow"],["mat-button","","class","tb-add-new-widget",3,"click",4,"ngIf"],["translate","","fxLayoutAlign","center center","style","display: flex;","class","mat-headline tb-absolute-fill",4,"ngIf"],[3,"aliasController","widgets","widgetLayouts","isEdit","isEditActionEnabled","isExportActionEnabled","isRemoveActionEnabled","disableWidgetInteraction","callbacks"],["dashboard",""],[3,"fxShow","footerFabButtons"],["mat-button","",1,"tb-add-new-widget",3,"click"],[1,"tb-mat-96"],["translate","","fxLayoutAlign","center center",1,"mat-headline","tb-absolute-fill",2,"display","flex"]],template:function(e,t){1&e&&(r["\u0275\u0275elementStart"](0,"section",0),r["\u0275\u0275pipe"](1,"async"),r["\u0275\u0275template"](2,Fo,5,3,"button",1),r["\u0275\u0275template"](3,Do,2,0,"span",2),r["\u0275\u0275elementEnd"](),r["\u0275\u0275element"](4,"tb-dashboard",3,4),r["\u0275\u0275element"](6,"tb-footer-fab-buttons",5)),2&e&&(r["\u0275\u0275property"]("fxShow",!r["\u0275\u0275pipeBind1"](1,14,t.isLoading$)&&0===t.widgetsData.widgets.length),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("ngIf",!t.isReadOnly),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",t.isReadOnly),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("aliasController",t.aliasController)("widgets",t.widgetsData.widgets)("widgetLayouts",t.widgetsData.widgetLayouts)("isEdit",!1)("isEditActionEnabled",!0)("isExportActionEnabled",!0)("isRemoveActionEnabled",!t.isReadOnly)("disableWidgetInteraction",!0)("callbacks",t.dashboardCallbacks),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("fxShow",!t.isReadOnly)("footerFabButtons",t.footerFabButtons))},directives:[h.e,ve.d,i.NgIf,Eo.a,To.a,w.MatButton,be.MatIcon,f.TranslateDirective],pipes:[i.AsyncPipe,f.TranslatePipe],styles:["[_nghost-%COMP%]   button.tb-add-new-widget[_ngcontent-%COMP%]{padding-right:12px;font-size:24px;border-style:dashed;border-width:2px}"]}),t}(l.a);!function(){r["\u0275setClassMetadata"](Ao,[{type:r.Component,args:[{selector:"tb-widget-library",templateUrl:"./widget-library.component.html",styleUrls:["./widget-library.component.scss"]}]}],(function(){return[{type:m.Store},{type:a.ActivatedRoute},{type:a.Router},{type:po.a},{type:U.a},{type:Pa.a},{type:ft.MatDialog},{type:f.TranslateService},{type:Co.a},{type:Io.a}]}),{dashboard:[{type:r.ViewChild,args:["dashboard",{static:!0}]}]})}();var Po=n("fhZi"),No=n("0G7Z"),ko=function(){function e(e){this.widgetsService=e}return e.prototype.resolve=function(e){var t=e.params.widgetsBundleId;return t||(t=e.parent.params.widgetsBundleId),this.widgetsService.getWidgetsBundle(t)},e.\u0275fac=function(t){return new(t||e)(r["\u0275\u0275inject"](po.a))},e.\u0275prov=r["\u0275\u0275defineInjectable"]({token:e,factory:e.\u0275fac}),e}();!function(){r["\u0275setClassMetadata"](ko,[{type:r.Injectable}],(function(){return[{type:po.a}]}),null)}();var Lo=function(){function e(e){this.widgetsService=e}return e.prototype.resolve=function(e){var t=e.parent.data.widgetsBundle,n=t.alias,r=t.tenantId.id===mr.a;return this.widgetsService.loadBundleLibraryWidgets(n,r).pipe(Object(Hn.a)((function(e){return{widgets:e}})))},e.\u0275fac=function(t){return new(t||e)(r["\u0275\u0275inject"](po.a))},e.\u0275prov=r["\u0275\u0275defineInjectable"]({token:e,factory:e.\u0275fac}),e}();!function(){r["\u0275setClassMetadata"](Lo,[{type:r.Injectable}],(function(){return[{type:po.a}]}),null)}();var Oo=function(){function e(e){this.widgetsService=e}return e.prototype.resolve=function(e){var t=e.params.widgetTypeId;return this.widgetsService.getWidgetTypeById(t).pipe(Object(Hn.a)((function(e){return{widgetTypeDetails:e,widget:Object(No.d)(e)}})))},e.\u0275fac=function(t){return new(t||e)(r["\u0275\u0275inject"](po.a))},e.\u0275prov=r["\u0275\u0275defineInjectable"]({token:e,factory:e.\u0275fac}),e}();!function(){r["\u0275setClassMetadata"](Oo,[{type:r.Injectable}],(function(){return[{type:po.a}]}),null)}();var _o=function(){function e(e){this.widgetsService=e}return e.prototype.resolve=function(e){var t=e.params.widgetType;return t||(t=ho.k.timeseries),this.widgetsService.getWidgetTemplate(t).pipe(Object(Hn.a)((function(e){return e.widgetName=null,{widgetTypeDetails:null,widget:e}})))},e.\u0275fac=function(t){return new(t||e)(r["\u0275\u0275inject"](po.a))},e.\u0275prov=r["\u0275\u0275defineInjectable"]({token:e,factory:e.\u0275fac}),e}();!function(){r["\u0275setClassMetadata"](_o,[{type:r.Injectable}],(function(){return[{type:po.a}]}),null)}();var Bo=function(e,t,n){return n?n.widget.widgetName:""},jo=[{path:"widgets-bundles",data:{breadcrumb:{label:"widgets-bundle.widgets-bundles",icon:"now_widgets"}},children:[{path:"",component:Pn.a,data:{auth:[$.a.SYS_ADMIN,$.a.TENANT_ADMIN],title:"widgets-bundle.widgets-bundles"},resolve:{entitiesTableConfig:fo}},{path:":widgetsBundleId/widgetTypes",data:{breadcrumb:{labelFunction:function(e,t){return e.data.widgetsBundle.title},icon:"now_widgets"}},resolve:{widgetsBundle:ko},children:[{path:"",component:Ao,data:{auth:[$.a.SYS_ADMIN,$.a.TENANT_ADMIN],title:"widget.widget-library"},resolve:{widgetsData:Lo}},{path:":widgetTypeId",component:Po.a,canDeactivate:[q],data:{auth:[$.a.SYS_ADMIN,$.a.TENANT_ADMIN],title:"widget.editor",breadcrumb:{labelFunction:Bo,icon:"insert_chart"}},resolve:{widgetEditorData:Oo}},{path:"add/:widgetType",component:Po.a,canDeactivate:[q],data:{auth:[$.a.SYS_ADMIN,$.a.TENANT_ADMIN],title:"widget.editor",breadcrumb:{labelFunction:Bo,icon:"insert_chart"}},resolve:{widgetEditorData:_o}}]}]}],Ro=function(){function e(){}return e.\u0275mod=r["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=r["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},providers:[fo,ko,Lo,Oo,_o],imports:[[a.RouterModule.forChild(jo)],a.RouterModule]}),e}();void(("undefined"==typeof ngJitMode||ngJitMode)&&r["\u0275\u0275setNgModuleScope"](Ro,{imports:[a.RouterModule],exports:[a.RouterModule]}));var Vo=n("iO13"),zo=function(){function e(){}return e.\u0275mod=r["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=r["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[i.CommonModule,jt.a,Rt.a,Ro]]}),e}();void(("undefined"==typeof ngJitMode||ngJitMode)&&r["\u0275\u0275setNgModuleScope"](zo,{declarations:[uo,Ao,Po.a,wo,Vo.a],imports:[i.CommonModule,jt.a,Rt.a,Ro]}));var Go=n("p0+G"),Uo=n("HUB6"),qo=n("p/3Z"),$o=n("yOwA"),Wo=function(){function e(){}return e.\u0275mod=r["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=r["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[i.CommonModule,jt.a,Rt.a,Ji.a,ji.b]]}),e}();void(("undefined"==typeof ngJitMode||ngJitMode)&&r["\u0275\u0275setNgModuleScope"](Wo,{declarations:[Go.a,$o.a,Uo.a,qo.a],imports:[i.CommonModule,jt.a,Rt.a,Ji.a,ji.b]}));var Ho=n("vnPf"),Ko=n("oook");function Jo(e,t){if(1&e&&(r["\u0275\u0275elementStart"](0,"mat-tab",1,2),r["\u0275\u0275pipe"](2,"translate"),r["\u0275\u0275element"](3,"tb-attribute-table",3),r["\u0275\u0275elementEnd"]()),2&e){var n=r["\u0275\u0275reference"](1),i=r["\u0275\u0275nextContext"]();r["\u0275\u0275propertyInterpolate"]("label",r["\u0275\u0275pipeBind1"](2,5,"attribute.attributes")),r["\u0275\u0275advance"](3),r["\u0275\u0275property"]("defaultAttributeScope",i.attributeScopes.SERVER_SCOPE)("active",n.isActive)("entityId",i.entity.id)("entityName",i.entity.name)}}function Yo(e,t){if(1&e&&(r["\u0275\u0275elementStart"](0,"mat-tab",1,4),r["\u0275\u0275pipe"](2,"translate"),r["\u0275\u0275element"](3,"tb-attribute-table",5),r["\u0275\u0275elementEnd"]()),2&e){var n=r["\u0275\u0275reference"](1),i=r["\u0275\u0275nextContext"]();r["\u0275\u0275propertyInterpolate"]("label",r["\u0275\u0275pipeBind1"](2,5,"attribute.latest-telemetry")),r["\u0275\u0275advance"](3),r["\u0275\u0275property"]("defaultAttributeScope",i.latestTelemetryTypes.LATEST_TELEMETRY)("active",n.isActive)("entityId",i.entity.id)("entityName",i.entity.name)}}function Xo(e,t){if(1&e&&(r["\u0275\u0275elementStart"](0,"mat-tab",1,6),r["\u0275\u0275pipe"](2,"translate"),r["\u0275\u0275element"](3,"tb-alarm-table",7),r["\u0275\u0275elementEnd"]()),2&e){var n=r["\u0275\u0275reference"](1),i=r["\u0275\u0275nextContext"]();r["\u0275\u0275propertyInterpolate"]("label",r["\u0275\u0275pipeBind1"](2,3,"alarm.alarms")),r["\u0275\u0275advance"](3),r["\u0275\u0275property"]("active",n.isActive)("entityId",i.entity.id)}}function Qo(e,t){if(1&e&&(r["\u0275\u0275elementStart"](0,"mat-tab",1,8),r["\u0275\u0275pipe"](2,"translate"),r["\u0275\u0275element"](3,"tb-event-table",9),r["\u0275\u0275elementEnd"]()),2&e){var n=r["\u0275\u0275reference"](1),i=r["\u0275\u0275nextContext"]();r["\u0275\u0275propertyInterpolate"]("label",r["\u0275\u0275pipeBind1"](2,5,"tenant.events")),r["\u0275\u0275advance"](3),r["\u0275\u0275property"]("defaultEventType",i.eventTypes.ERROR)("active",n.isActive)("tenantId",i.nullUid)("entityId",i.entity.id)}}var Zo=function(e){function t(t){var n=e.call(this,t)||this;return n.store=t,n}return Object(o.d)(t,e),t.prototype.ngOnInit=function(){e.prototype.ngOnInit.call(this)},t.\u0275fac=function(e){return new(e||t)(r["\u0275\u0275directiveInject"](m.Store))},t.\u0275cmp=r["\u0275\u0275defineComponent"]({type:t,selectors:[["tb-tenant-profile-tabs"]],features:[r["\u0275\u0275InheritDefinitionFeature"]],decls:4,vars:4,consts:[[3,"label",4,"ngIf"],[3,"label"],["attributesTab","matTab"],[3,"defaultAttributeScope","active","entityId","entityName"],["telemetryTab","matTab"],["disableAttributeScopeSelection","",3,"defaultAttributeScope","active","entityId","entityName"],["alarmsTab","matTab"],[3,"active","entityId"],["eventsTab","matTab"],[3,"defaultEventType","active","tenantId","entityId"]],template:function(e,t){1&e&&(r["\u0275\u0275template"](0,Jo,4,7,"mat-tab",0),r["\u0275\u0275template"](1,Yo,4,7,"mat-tab",0),r["\u0275\u0275template"](2,Xo,4,5,"mat-tab",0),r["\u0275\u0275template"](3,Qo,4,7,"mat-tab",0)),2&e&&(r["\u0275\u0275property"]("ngIf",t.entity),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",t.entity),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",t.entity),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",t.entity))},directives:[i.NgIf,xe.MatTab,On.a,_n.a,Bn.a],pipes:[f.TranslatePipe],encapsulation:2}),t}(Ln.a);!function(){r["\u0275setClassMetadata"](Zo,[{type:r.Component,args:[{selector:"tb-tenant-profile-tabs",templateUrl:"./tenant-profile-tabs.component.html",styleUrls:[]}]}],(function(){return[{type:m.Store}]}),null)}();var el=function(){function e(e,t,n,r){var i=this;this.tenantProfileService=e,this.translate=t,this.datePipe=n,this.dialogService=r,this.config=new In.d,this.config.entityType=kn.b.TENANT_PROFILE,this.config.entityComponent=Ko.a,this.config.entityTabsComponent=Zo,this.config.entityTranslations=kn.d.get(kn.b.TENANT_PROFILE),this.config.entityResources=kn.c.get(kn.b.TENANT_PROFILE),this.config.columns.push(new In.a("createdTime","common.created-time",this.datePipe,"150px"),new In.c("name","tenant-profile.name","40%"),new In.c("description","tenant-profile.description","60%"),new In.c("isDefault","tenant-profile.default","60px",(function(e){return Object(In.e)(e.default)}))),this.config.cellActionDescriptors.push({name:this.translate.instant("tenant-profile.set-default"),icon:"flag",isEnabled:function(e){return!e.default},onAction:function(e,t){return i.setDefaultTenantProfile(e,t)}}),this.config.deleteEntityTitle=function(e){return i.translate.instant("tenant-profile.delete-tenant-profile-title",{tenantProfileName:e.name})},this.config.deleteEntityContent=function(){return i.translate.instant("tenant-profile.delete-tenant-profile-text")},this.config.deleteEntitiesTitle=function(e){return i.translate.instant("tenant-profile.delete-tenant-profiles-title",{count:e})},this.config.deleteEntitiesContent=function(){return i.translate.instant("tenant-profile.delete-tenant-profiles-text")},this.config.entitiesFetchFunction=function(e){return i.tenantProfileService.getTenantProfiles(e)},this.config.loadEntity=function(e){return i.tenantProfileService.getTenantProfile(e.id)},this.config.saveEntity=function(e){return i.tenantProfileService.saveTenantProfile(e)},this.config.deleteEntity=function(e){return i.tenantProfileService.deleteTenantProfile(e.id)},this.config.onEntityAction=function(e){return i.onTenantProfileAction(e)},this.config.deleteEnabled=function(e){return e&&!e.default},this.config.entitySelectionEnabled=function(e){return e&&!e.default}}return e.prototype.resolve=function(){return this.config.tableTitle=this.translate.instant("tenant-profile.tenant-profiles"),this.config},e.prototype.setDefaultTenantProfile=function(e,t){var n=this;e&&e.stopPropagation(),this.dialogService.confirm(this.translate.instant("tenant-profile.set-default-tenant-profile-title",{tenantProfileName:t.name}),this.translate.instant("tenant-profile.set-default-tenant-profile-text"),this.translate.instant("action.no"),this.translate.instant("action.yes"),!0).subscribe((function(e){e&&n.tenantProfileService.setDefaultTenantProfile(t.id.id).subscribe((function(){n.config.table.updateData()}))}))},e.prototype.onTenantProfileAction=function(e){switch(e.action){case"setDefault":return this.setDefaultTenantProfile(e.event,e.entity),!0}return!1},e.\u0275fac=function(t){return new(t||e)(r["\u0275\u0275inject"](Ho.a),r["\u0275\u0275inject"](f.TranslateService),r["\u0275\u0275inject"](i.DatePipe),r["\u0275\u0275inject"](U.a))},e.\u0275prov=r["\u0275\u0275defineInjectable"]({token:e,factory:e.\u0275fac}),e}();!function(){r["\u0275setClassMetadata"](el,[{type:r.Injectable}],(function(){return[{type:Ho.a},{type:f.TranslateService},{type:i.DatePipe},{type:U.a}]}),null)}();var tl=[{path:"tenantProfiles",data:{breadcrumb:{label:"tenant-profile.tenant-profiles",icon:"mdi:alpha-t-box"}},children:[{path:"",component:Pn.a,data:{auth:[$.a.SYS_ADMIN],title:"tenant-profile.tenant-profiles"},resolve:{entitiesTableConfig:el}}]}],nl=function(){function e(){}return e.\u0275mod=r["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=r["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},providers:[el],imports:[[a.RouterModule.forChild(tl)],a.RouterModule]}),e}();void(("undefined"==typeof ngJitMode||ngJitMode)&&r["\u0275\u0275setNgModuleScope"](nl,{imports:[a.RouterModule],exports:[a.RouterModule]}));var rl=function(){function e(){}return e.\u0275mod=r["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=r["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[i.CommonModule,jt.a,Rt.a,nl]]}),e}();void(("undefined"==typeof ngJitMode||ngJitMode)&&r["\u0275\u0275setNgModuleScope"](rl,{declarations:[Zo],imports:[i.CommonModule,jt.a,Rt.a,nl]}));var il=n("F4h8"),al=n("8yrD"),ol=n("em8L"),ll=n("xkYi"),sl=n("TpGD");function dl(e,t){if(1&e&&(r["\u0275\u0275elementStart"](0,"mat-option",12),r["\u0275\u0275text"](1),r["\u0275\u0275pipe"](2,"translate"),r["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit,i=r["\u0275\u0275nextContext"](3);r["\u0275\u0275property"]("value",n),r["\u0275\u0275advance"](1),r["\u0275\u0275textInterpolate1"](" ",r["\u0275\u0275pipeBind1"](2,2,i.deviceTransportTypeTranslations.get(n))," ")}}function cl(e,t){if(1&e&&(r["\u0275\u0275elementStart"](0,"mat-hint"),r["\u0275\u0275text"](1),r["\u0275\u0275pipe"](2,"translate"),r["\u0275\u0275elementEnd"]()),2&e){var n=r["\u0275\u0275nextContext"](3);r["\u0275\u0275advance"](1),r["\u0275\u0275textInterpolate1"](" ",r["\u0275\u0275pipeBind1"](2,1,n.deviceTransportTypeHints.get(n.detailsForm.get("transportType").value))," ")}}function ul(e,t){1&e&&(r["\u0275\u0275elementStart"](0,"mat-error"),r["\u0275\u0275text"](1),r["\u0275\u0275pipe"](2,"translate"),r["\u0275\u0275elementEnd"]()),2&e&&(r["\u0275\u0275advance"](1),r["\u0275\u0275textInterpolate1"](" ",r["\u0275\u0275pipeBind1"](2,1,"device-profile.transport-type-required")," "))}function pl(e,t){if(1&e&&(r["\u0275\u0275elementStart"](0,"div",4),r["\u0275\u0275elementStart"](1,"mat-form-field",5),r["\u0275\u0275elementStart"](2,"mat-label",6),r["\u0275\u0275text"](3,"device-profile.transport-type"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](4,"mat-select",7),r["\u0275\u0275template"](5,dl,3,4,"mat-option",8),r["\u0275\u0275elementEnd"](),r["\u0275\u0275template"](6,cl,3,3,"mat-hint",9),r["\u0275\u0275template"](7,ul,3,3,"mat-error",9),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](8,"div",10),r["\u0275\u0275element"](9,"tb-device-profile-transport-configuration",11),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()),2&e){var n=r["\u0275\u0275nextContext"](2);r["\u0275\u0275property"]("formGroup",n.detailsForm),r["\u0275\u0275advance"](5),r["\u0275\u0275property"]("ngForOf",n.deviceTransportTypes),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",n.detailsForm.get("transportType").value),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",n.detailsForm.get("transportType").hasError("required"))}}function ml(e,t){if(1&e&&(r["\u0275\u0275elementStart"](0,"mat-tab",1,2),r["\u0275\u0275pipe"](2,"translate"),r["\u0275\u0275template"](3,pl,10,4,"div",3),r["\u0275\u0275elementEnd"]()),2&e){var n=r["\u0275\u0275reference"](1);r["\u0275\u0275propertyInterpolate"]("label",r["\u0275\u0275pipeBind1"](2,2,"device-profile.transport-configuration")),r["\u0275\u0275advance"](3),r["\u0275\u0275property"]("ngIf",n.isActive)}}function fl(e,t){if(1&e&&(r["\u0275\u0275elementStart"](0,"div",4),r["\u0275\u0275elementStart"](1,"div",10),r["\u0275\u0275element"](2,"tb-device-profile-alarms",14),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()),2&e){var n=r["\u0275\u0275nextContext"](2);r["\u0275\u0275property"]("formGroup",n.detailsForm),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("deviceProfileId",n.entity.id)}}var gl=function(e){return{count:e}};function hl(e,t){if(1&e&&(r["\u0275\u0275elementStart"](0,"mat-tab",1,13),r["\u0275\u0275pipe"](2,"translate"),r["\u0275\u0275template"](3,fl,3,2,"div",3),r["\u0275\u0275elementEnd"]()),2&e){var n=r["\u0275\u0275reference"](1),i=r["\u0275\u0275nextContext"]();r["\u0275\u0275propertyInterpolate"]("label",r["\u0275\u0275pipeBind2"](2,2,"device-profile.alarm-rules-with-count",r["\u0275\u0275pureFunction1"](5,gl,null!=i.detailsForm.get("profileData.alarms").value&&i.detailsForm.get("profileData.alarms").value.length?i.detailsForm.get("profileData.alarms").value.length:0))),r["\u0275\u0275advance"](3),r["\u0275\u0275property"]("ngIf",n.isActive)}}function bl(e,t){if(1&e&&(r["\u0275\u0275elementStart"](0,"div",4),r["\u0275\u0275elementStart"](1,"div",10),r["\u0275\u0275element"](2,"tb-device-profile-provision-configuration",16),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()),2&e){var n=r["\u0275\u0275nextContext"](2);r["\u0275\u0275property"]("formGroup",n.detailsForm)}}function yl(e,t){if(1&e&&(r["\u0275\u0275elementStart"](0,"mat-tab",1,15),r["\u0275\u0275pipe"](2,"translate"),r["\u0275\u0275template"](3,bl,3,1,"div",3),r["\u0275\u0275elementEnd"]()),2&e){var n=r["\u0275\u0275reference"](1);r["\u0275\u0275propertyInterpolate"]("label",r["\u0275\u0275pipeBind1"](2,2,"device-profile.device-provisioning")),r["\u0275\u0275advance"](3),r["\u0275\u0275property"]("ngIf",n.isActive)}}function vl(e,t){if(1&e&&(r["\u0275\u0275elementStart"](0,"mat-tab",1,17),r["\u0275\u0275pipe"](2,"translate"),r["\u0275\u0275elementStart"](3,"div",4),r["\u0275\u0275elementStart"](4,"div",10),r["\u0275\u0275element"](5,"tb-device-profile-configuration",18),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()),2&e){var n=r["\u0275\u0275nextContext"]();r["\u0275\u0275propertyInterpolate"]("label",r["\u0275\u0275pipeBind1"](2,2,"device-profile.profile-configuration")),r["\u0275\u0275advance"](3),r["\u0275\u0275property"]("formGroup",n.detailsForm)}}function xl(e,t){if(1&e&&(r["\u0275\u0275elementStart"](0,"mat-tab",1,19),r["\u0275\u0275pipe"](2,"translate"),r["\u0275\u0275element"](3,"tb-audit-log-table",20),r["\u0275\u0275elementEnd"]()),2&e){var n=r["\u0275\u0275reference"](1),i=r["\u0275\u0275nextContext"]();r["\u0275\u0275propertyInterpolate"]("label",r["\u0275\u0275pipeBind1"](2,4,"audit-log.audit-logs")),r["\u0275\u0275advance"](3),r["\u0275\u0275property"]("active",n.isActive)("auditLogMode",i.auditLogModes.ENTITY)("entityId",i.entity.id)}}var Sl=function(e){function t(t){var n=e.call(this,t)||this;return n.store=t,n.deviceTransportTypes=Object.keys(Lr.j),n.deviceTransportTypeTranslations=Lr.B,n.deviceTransportTypeHints=Lr.A,n}return Object(o.d)(t,e),t.prototype.ngOnInit=function(){e.prototype.ngOnInit.call(this)},t.\u0275fac=function(e){return new(e||t)(r["\u0275\u0275directiveInject"](m.Store))},t.\u0275cmp=r["\u0275\u0275defineComponent"]({type:t,selectors:[["tb-device-profile-tabs"]],features:[r["\u0275\u0275InheritDefinitionFeature"]],decls:5,vars:5,consts:[[3,"label",4,"ngIf"],[3,"label"],["transportType","matTab"],["class","mat-padding",3,"formGroup",4,"ngIf"],[1,"mat-padding",3,"formGroup"],[1,"mat-block"],["translate",""],["formControlName","transportType","required",""],[3,"value",4,"ngFor","ngForOf"],[4,"ngIf"],["formGroupName","profileData"],["formControlName","transportConfiguration","required",""],[3,"value"],["alarmRules","matTab"],["formControlName","alarms",3,"deviceProfileId"],["deviceProvisioning","matTab"],["formControlName","provisionConfiguration"],["deviceProfile","matTab"],["formControlName","configuration","required",""],["auditLogsTab","matTab"],["detailsMode","true",3,"active","auditLogMode","entityId"]],template:function(e,t){1&e&&(r["\u0275\u0275template"](0,ml,4,4,"mat-tab",0),r["\u0275\u0275template"](1,hl,4,7,"mat-tab",0),r["\u0275\u0275template"](2,yl,4,4,"mat-tab",0),r["\u0275\u0275template"](3,vl,6,4,"mat-tab",0),r["\u0275\u0275template"](4,xl,4,6,"mat-tab",0)),2&e&&(r["\u0275\u0275property"]("ngIf",t.entity),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",t.entity),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",t.entity),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",!1),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",t.entity&&!t.isEdit))},directives:[i.NgIf,xe.MatTab,s.NgControlStatusGroup,s.FormGroupDirective,y.MatFormField,y.MatLabel,f.TranslateDirective,x.MatSelect,s.NgControlStatus,s.FormControlName,s.RequiredValidator,i.NgForOf,s.FormGroupName,al.a,I.MatOption,y.MatHint,y.MatError,ol.a,ll.a,sl.a,fr.a],pipes:[f.TranslatePipe],encapsulation:2}),t}(Ln.a);!function(){r["\u0275setClassMetadata"](Sl,[{type:r.Component,args:[{selector:"tb-device-profile-tabs",templateUrl:"./device-profile-tabs.component.html",styleUrls:[]}]}],(function(){return[{type:m.Store}]}),null)}();var wl=n("g+M/"),Cl=n("ec17"),Il=n("eriv"),El=function(){function e(e,t,n,r,i,a){var o=this;this.deviceProfileService=e,this.importExport=t,this.translate=n,this.datePipe=r,this.dialogService=i,this.dialog=a,this.config=new In.d,this.config.entityType=kn.b.DEVICE_PROFILE,this.config.entityComponent=Cl.a,this.config.entityTabsComponent=Sl,this.config.entityTranslations=kn.d.get(kn.b.DEVICE_PROFILE),this.config.entityResources=kn.c.get(kn.b.DEVICE_PROFILE),this.config.hideDetailsTabsOnEdit=!1,this.config.addDialogStyle={width:"1000px"},this.config.columns.push(new In.a("createdTime","common.created-time",this.datePipe,"150px"),new In.c("name","device-profile.name","20%"),new In.c("type","device-profile.type","20%",(function(e){return o.translate.instant(Lr.x.get(e.type))})),new In.c("transportType","device-profile.transport-type","20%",(function(e){return o.translate.instant(Lr.B.get(e.transportType))})),new In.c("description","device-profile.description","40%"),new In.c("isDefault","device-profile.default","60px",(function(e){return Object(In.e)(e.default)}))),this.config.cellActionDescriptors.push({name:this.translate.instant("device-profile.export"),icon:"file_download",isEnabled:function(){return!0},onAction:function(e,t){return o.exportDeviceProfile(e,t)}},{name:this.translate.instant("device-profile.set-default"),icon:"flag",isEnabled:function(e){return!e.default},onAction:function(e,t){return o.setDefaultDeviceProfile(e,t)}}),this.config.deleteEntityTitle=function(e){return o.translate.instant("device-profile.delete-device-profile-title",{deviceProfileName:e.name})},this.config.deleteEntityContent=function(){return o.translate.instant("device-profile.delete-device-profile-text")},this.config.deleteEntitiesTitle=function(e){return o.translate.instant("device-profile.delete-device-profiles-title",{count:e})},this.config.deleteEntitiesContent=function(){return o.translate.instant("device-profile.delete-device-profiles-text")},this.config.entitiesFetchFunction=function(e){return o.deviceProfileService.getDeviceProfiles(e)},this.config.loadEntity=function(e){return o.deviceProfileService.getDeviceProfile(e.id)},this.config.saveEntity=function(e){return o.deviceProfileService.saveDeviceProfile(e)},this.config.deleteEntity=function(e){return o.deviceProfileService.deleteDeviceProfile(e.id)},this.config.onEntityAction=function(e){return o.onDeviceProfileAction(e)},this.config.deleteEnabled=function(e){return e&&!e.default},this.config.entitySelectionEnabled=function(e){return e&&!e.default},this.config.addActionDescriptors=this.configureAddActions()}return e.prototype.resolve=function(){return this.config.tableTitle=this.translate.instant("device-profile.device-profiles"),this.config},e.prototype.configureAddActions=function(){var e=this,t=[];return t.push({name:this.translate.instant("device-profile.create-device-profile"),icon:"insert_drive_file",isEnabled:function(){return!0},onAction:function(){return e.addDeviceProfile()}},{name:this.translate.instant("device-profile.import"),icon:"file_upload",isEnabled:function(){return!0},onAction:function(t){return e.importDeviceProfile(t)}}),t},e.prototype.addDeviceProfile=function(){return this.dialog.open(Il.a,{disableClose:!0,panelClass:["tb-dialog","tb-fullscreen-dialog"],data:{deviceProfileName:null,transportType:null}}).afterClosed()},e.prototype.setDefaultDeviceProfile=function(e,t){var n=this;e&&e.stopPropagation(),this.dialogService.confirm(this.translate.instant("device-profile.set-default-device-profile-title",{deviceProfileName:t.name}),this.translate.instant("device-profile.set-default-device-profile-text"),this.translate.instant("action.no"),this.translate.instant("action.yes"),!0).subscribe((function(e){e&&n.deviceProfileService.setDefaultDeviceProfile(t.id.id).subscribe((function(){n.config.table.updateData()}))}))},e.prototype.importDeviceProfile=function(e){var t=this;this.importExport.importDeviceProfile().subscribe((function(e){e&&t.config.table.updateData()}))},e.prototype.exportDeviceProfile=function(e,t){e&&e.stopPropagation(),this.importExport.exportDeviceProfile(t.id.id)},e.prototype.onDeviceProfileAction=function(e){switch(e.action){case"setDefault":return this.setDefaultDeviceProfile(e.event,e.entity),!0;case"export":return this.exportDeviceProfile(e.event,e.entity),!0}return!1},e.\u0275fac=function(t){return new(t||e)(r["\u0275\u0275inject"](wl.a),r["\u0275\u0275inject"](Pa.a),r["\u0275\u0275inject"](f.TranslateService),r["\u0275\u0275inject"](i.DatePipe),r["\u0275\u0275inject"](U.a),r["\u0275\u0275inject"](ft.MatDialog))},e.\u0275prov=r["\u0275\u0275defineInjectable"]({token:e,factory:e.\u0275fac}),e}();!function(){r["\u0275setClassMetadata"](El,[{type:r.Injectable}],(function(){return[{type:wl.a},{type:Pa.a},{type:f.TranslateService},{type:i.DatePipe},{type:U.a},{type:ft.MatDialog}]}),null)}();var Tl=[{path:"deviceProfiles",data:{breadcrumb:{label:"device-profile.device-profiles",icon:"mdi:alpha-d-box"}},children:[{path:"",component:Pn.a,data:{auth:[$.a.TENANT_ADMIN],title:"device-profile.device-profiles"},resolve:{entitiesTableConfig:El}}]}],Ml=function(){function e(){}return e.\u0275mod=r["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=r["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},providers:[El],imports:[[a.RouterModule.forChild(Tl)],a.RouterModule]}),e}();void(("undefined"==typeof ngJitMode||ngJitMode)&&r["\u0275\u0275setNgModuleScope"](Ml,{imports:[a.RouterModule],exports:[a.RouterModule]}));var Fl=function(){function e(){}return e.\u0275mod=r["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=r["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[i.CommonModule,jt.a,Rt.a,Ml]]}),e}();void(("undefined"==typeof ngJitMode||ngJitMode)&&r["\u0275\u0275setNgModuleScope"](Fl,{declarations:[Sl],imports:[i.CommonModule,jt.a,Rt.a,Ml]}));var Dl=function(e){function t(t){var n=e.call(this,t)||this;return n.store=t,n}return Object(o.d)(t,e),t.prototype.ngOnInit=function(){this.apiUsageDashboard=JSON.parse('{\r\n  "title": "Api Usage",\r\n  "configuration": {\r\n    "description": "",\r\n    "widgets": {\r\n      "fd6df872-2ddf-0921-3929-2e7f55062fad": {\r\n        "isSystemType": true,\r\n        "bundleAlias": "cards",\r\n        "typeAlias": "html_value_card",\r\n        "type": "latest",\r\n        "title": "New widget",\r\n        "sizeX": 7.5,\r\n        "sizeY": 3,\r\n        "config": {\r\n          "datasources": [\r\n            {\r\n              "type": "entity",\r\n              "name": null,\r\n              "entityAliasId": "40193437-33ac-3172-eefd-0b08eb849062",\r\n              "filterId": null,\r\n              "dataKeys": [\r\n                {\r\n                  "name": "jsExecutionApiState",\r\n                  "type": "timeseries",\r\n                  "label": "apiState",\r\n                  "color": "#2196f3",\r\n                  "settings": {},\r\n                  "_hash": 0.8830669138660703,\r\n                  "units": null,\r\n                  "decimals": null,\r\n                  "funcBody": null,\r\n                  "usePostProcessing": null,\r\n                  "postFuncBody": null\r\n                },\r\n                {\r\n                  "name": "jsExecutionLimit",\r\n                  "type": "timeseries",\r\n                  "label": "limit",\r\n                  "color": "#4caf50",\r\n                  "settings": {},\r\n                  "_hash": 0.5463603803546802,\r\n                  "units": null,\r\n                  "decimals": null,\r\n                  "funcBody": null,\r\n                  "usePostProcessing": null,\r\n                  "postFuncBody": null\r\n                },\r\n                {\r\n                  "name": "jsExecutionCount",\r\n                  "type": "timeseries",\r\n                  "label": "count",\r\n                  "color": "#f44336",\r\n                  "settings": {},\r\n                  "_hash": 0.5564241862015964,\r\n                  "units": null,\r\n                  "decimals": null,\r\n                  "funcBody": null,\r\n                  "usePostProcessing": null,\r\n                  "postFuncBody": null\r\n                },\r\n                {\r\n                  "name": "jsExecutionApiState",\r\n                  "type": "timeseries",\r\n                  "label": "apiStateClass",\r\n                  "color": "#ffc107",\r\n                  "settings": {},\r\n                  "_hash": 0.8737107059960671,\r\n                  "units": null,\r\n                  "decimals": null,\r\n                  "funcBody": null,\r\n                  "usePostProcessing": true,\r\n                  "postFuncBody": "return value ? value.toLowerCase() : \'\';"\r\n                },\r\n                {\r\n                  "name": "jsExecutionApiState",\r\n                  "type": "timeseries",\r\n                  "label": "cardId",\r\n                  "color": "#607d8b",\r\n                  "settings": {},\r\n                  "_hash": 0.051659774305067296,\r\n                  "units": null,\r\n                  "decimals": null,\r\n                  "funcBody": null,\r\n                  "usePostProcessing": true,\r\n                  "postFuncBody": "return (Math.random()*100000).toFixed(0);"\r\n                },\r\n                {\r\n                  "name": "jsExecutionApiState",\r\n                  "type": "timeseries",\r\n                  "label": "title",\r\n                  "color": "#9c27b0",\r\n                  "settings": {},\r\n                  "_hash": 0.7673280949238444,\r\n                  "units": null,\r\n                  "decimals": null,\r\n                  "funcBody": null,\r\n                  "usePostProcessing": true,\r\n                  "postFuncBody": "return \\"{i18n:api-usage.javascript}\\";"\r\n                },\r\n                {\r\n                  "name": "jsExecutionApiState",\r\n                  "type": "timeseries",\r\n                  "label": "unit",\r\n                  "color": "#8bc34a",\r\n                  "settings": {},\r\n                  "_hash": 0.7926918686567068,\r\n                  "units": null,\r\n                  "decimals": null,\r\n                  "funcBody": null,\r\n                  "usePostProcessing": true,\r\n                  "postFuncBody": "return \\"{i18n:api-usage.executions}\\";"\r\n                }\r\n              ]\r\n            }\r\n          ],\r\n          "timewindow": {\r\n            "realtime": {\r\n              "timewindowMs": 60000\r\n            }\r\n          },\r\n          "showTitle": false,\r\n          "backgroundColor": "#fff",\r\n          "color": "#666666",\r\n          "padding": "0",\r\n          "settings": {\r\n            "cardHtml": "<div class=\'card ${apiStateClass}\'>\\n    <img src=\\"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7\\" onload=\\"initializeCard_${cardId:0}(event);\\">\\n    <script type=\\"text/javascript\\">\\n        function initializeCard_${cardId:0}(e) {\\n            \\n            function toShortNumber(number) {\\n                var rounder = Math.pow(10, 1);\\n                var powers = [\\n                  {key: \'Q\', value: Math.pow(10, 15)},\\n                  {key: \'T\', value: Math.pow(10, 12)},\\n                  {key: \'B\', value: Math.pow(10, 9)},\\n                  {key: \'M\', value: Math.pow(10, 6)},\\n                  {key: \'K\', value: 1000}\\n                ];\\n                \\n                var key = \'\';\\n                \\n                for (var i = 0; i < powers.length; i++) {\\n                    var reduced = number / powers[i].value;\\n                    reduced = Math.round(reduced * rounder) / rounder;\\n                    if (reduced >= 1) {\\n                        number = reduced;\\n                        key = powers[i].key;\\n                        break;\\n                    }\\n                }\\n                return number + key;\\n            }\\n            \\n            var imgTag = e.target;\\n            var parentTag = imgTag.parentNode;\\n            var count = \\"${count:0}\\";\\n            var limit = \\"${limit:0}\\";\\n            count = count.length > 0 ? parseInt(count, 10) : 0;\\n            limit = limit.length > 0 ? parseInt(limit, 10) : 0;\\n            var percentElement = $(\'#api-usage-percent\', parentTag);\\n            var valueElement = $(\'#api-usage-value\', parentTag);\\n            var barElement = $(\'#api-usage-bar\', parentTag);\\n            if (Number.isFinite(limit) && limit > 0) {\\n                var percent = Math.min(100, ((count / limit) * 100));\\n                barElement.width(percent + \'%\');\\n                percent = percent.toFixed(2);\\n                percentElement.text(percent + \'%\');\\n                valueElement.text(toShortNumber(count) + \' / \' + toShortNumber(limit));\\n            } else {\\n                barElement.width(\'0%\');\\n                percentElement.text(\'\');\\n                valueElement.text(toShortNumber(count) + \' / \u221e\');\\n            }\\n        }\\n    <\/script>\\n    <div class=\'content\'>\\n        <div class=\'column\'>\\n            <div class=\'title-row\'>\\n                <div class=\'title\'>${title}</div>\\n                <div class=\'state\'>${apiState}</div>\\n            </div>    \\n            <div class=\'bar-container\'>\\n                <div class=\\"unit\\">${unit}</div>\\n                <div class=\'bar\'>\\n                    <div class=\\"bar-fill\\" id=\\"api-usage-bar\\"></div>\\n                </div>    \\n                <div class=\'bar-labels\'>\\n                    <div id=\\"api-usage-percent\\"></div>\\n                    <div style=\\"flex: 1;\\"></div>\\n                    <div id=\\"api-usage-value\\"></div>\\n                </div>\\n            </div>    \\n        </div>\\n    </div>\\n    <div role=\\"separator\\" class=\\"mat-divider mat-divider-horizontal\\" aria-orientation=\\"horizontal\\"></div>\\n    <div class=\'action-row\'>\\n        <button id=\\"javascript_functions_details\\" class=\\"mat-focus-indicator mat-button mat-button-base mat-primary\\">\\n            <span class=\\"mat-button-wrapper\\">{i18n:api-usage.view-details}</span>\\n            <span class=\\"mat-ripple mat-button-ripple\\"></span>\\n            <span class=\\"mat-button-focus-overlay\\"></span>\\n        </button>\\n    </div> \\n</div>",\r\n            "cardCss": ".card {\\n   width: 100%;\\n   height: 100%;\\n   box-sizing: border-box;\\n   display: flex;\\n   flex-direction: column;\\n}\\n\\n.card > img {\\n    height: 0;\\n}\\n\\n.card .content {\\n   flex: 1;    \\n   padding: 13px 13px 0;\\n   display: flex;\\n   box-sizing: border-box;\\n}\\n\\n.card .content .column {\\n   display: flex;\\n   flex-direction: column;    \\n   justify-content: space-around;\\n   flex: 1;\\n}\\n\\n.card .content .title-row {\\n    display: flex;\\n    flex-direction: row;\\n    padding-bottom: 10px;\\n}\\n\\n.card .title {\\n    flex: 1;\\n    font-size: 20px;\\n    font-weight: 400;\\n    color: #666666;\\n}\\n\\n.card .state {\\n    text-transform: uppercase;\\n    font-size: 20px;\\n    font-weight: bold;\\n}\\n\\n.card.enabled .state {\\n    color: #00B260;\\n}\\n\\n.card.warning .state {\\n    color: #FFAD6F;\\n}\\n\\n.card.disabled .state {\\n    color: #F73243;\\n}\\n\\n.card .bar-container {\\n    flex: 1;\\n    display: flex;\\n    flex-direction: column;\\n    justify-content: center;\\n}\\n\\n.card .bar {\\n    flex: 1;\\n    max-height: 30px;\\n    margin-top: 3.5px;\\n    margin-bottom: 4px;\\n    background-color: #F0F0F0;\\n    border: 1px solid #DADCDB;\\n    border-radius: 2px;\\n    box-shadow: inset 0 1px 3px rgba(0, 0, 0, .2);\\n}\\n\\n.card.enabled .bar {\\n    border-color: #00B260;\\n    background-color: #F0FBF7;\\n}\\n\\n.card.warning .bar {\\n    border-color: #FFAD6F;\\n    background-color: #FFFAF6;\\n}\\n\\n.card.disabled .bar {\\n    border-color: #F73243;\\n    background-color: #FFF0F0;\\n}\\n\\n.card .bar .bar-fill {\\n    background-color: #F0F0F0;\\n    border-radius: 2px;\\n    height: 100%;\\n    width: 0%;\\n}\\n\\n.card.enabled .bar-fill {\\n    background-color: #00C46C;\\n}\\n\\n.card.warning .bar-fill {\\n    background-color: #FFD099;\\n}\\n\\n.card.disabled .bar-fill {\\n    background-color: #FF9494;\\n}\\n\\n.card .bar-labels {\\n    height: 20px;\\n    font-size: 16px;\\n    color: #666;\\n    display: flex;\\n    flex-direction: row;\\n}\\n\\n\\n.card .mat-button {\\n    text-transform: uppercase;\\n}\\n\\n.card .mat-button-wrapper {\\n    pointer-events: none;\\n}\\n\\n.card .action-row {\\n    display: flex;\\n    flex-direction: row;\\n    justify-content: flex-end;\\n    padding: 8px 0;\\n}\\n\\n@media screen and (min-width: 960px) and (max-width: 1279px) {\\n  .card .title {\\n      font-size: 12px;\\n  }\\n  .card .state {\\n      font-size: 12px;\\n  }\\n  .card .unit {\\n      font-size: 8px;\\n  }\\n  .card .bar-labels {\\n      font-size: 8px;\\n  }\\n  .card .mat-button {\\n      font-size: 8px;\\n  }\\n  .card .action-row {\\n      padding: 0;\\n  }\\n}\\n\\n@media screen and (min-width: 1280px) and (max-width: 1599px) {\\n  .card .title {\\n      font-size: 14px;\\n  }\\n  .card .state {\\n      font-size: 14px;\\n  }\\n  .card .unit {\\n      font-size: 10px;\\n  }\\n  .card .bar-labels {\\n      font-size: 10px;\\n  }\\n  .card .mat-button {\\n      font-size: 10px;\\n  }\\n  .card .action-row {\\n      padding: 0;\\n  }\\n}\\n\\n@media screen and (min-width: 1600px) and (max-width: 1919px) {\\n  .card .title {\\n      font-size: 16px;\\n  }\\n  .card .state {\\n      font-size: 16px;\\n  }\\n  .card .unit {\\n      font-size: 12px;\\n  }\\n  .card .bar-labels {\\n      font-size: 12px;\\n  }\\n  .card .mat-button {\\n      font-size: 12px;\\n  }\\n  .card .action-row {\\n      padding: 0;\\n  }\\n}    \\n\\n\\n"\r\n          },\r\n          "title": "JavaScript functions",\r\n          "dropShadow": true,\r\n          "enableFullscreen": false,\r\n          "widgetStyle": {\r\n            "cursor": "default"\r\n          },\r\n          "titleStyle": {\r\n            "fontSize": "20px",\r\n            "fontWeight": 400\r\n          },\r\n          "useDashboardTimewindow": true,\r\n          "showLegend": false,\r\n          "actions": {\r\n            "elementClick": [\r\n              {\r\n                "name": "javascript_functions_details",\r\n                "icon": "insert_chart",\r\n                "type": "openDashboardState",\r\n                "targetDashboardStateId": "javascript_functions",\r\n                "setEntityId": false,\r\n                "stateEntityParamName": null,\r\n                "openRightLayout": false,\r\n                "id": "d4961bea-84de-e1af-e50f-666b98d34cd5"\r\n              }\r\n            ]\r\n          },\r\n          "showTitleIcon": false,\r\n          "iconColor": "rgba(0, 0, 0, 0.87)",\r\n          "iconSize": "24px",\r\n          "titleTooltip": ""\r\n        },\r\n        "row": 0,\r\n        "col": 0,\r\n        "id": "fd6df872-2ddf-0921-3929-2e7f55062fad"\r\n      },\r\n      "7e235874-461b-e7c2-2fdd-d8762a020773": {\r\n        "isSystemType": true,\r\n        "bundleAlias": "cards",\r\n        "typeAlias": "html_value_card",\r\n        "type": "latest",\r\n        "title": "New widget",\r\n        "sizeX": 7.5,\r\n        "sizeY": 3,\r\n        "config": {\r\n          "datasources": [\r\n            {\r\n              "type": "entity",\r\n              "name": null,\r\n              "entityAliasId": "40193437-33ac-3172-eefd-0b08eb849062",\r\n              "filterId": null,\r\n              "dataKeys": [\r\n                {\r\n                  "name": "dbApiState",\r\n                  "type": "timeseries",\r\n                  "label": "apiState",\r\n                  "color": "#2196f3",\r\n                  "settings": {},\r\n                  "_hash": 0.8830669138660703,\r\n                  "units": null,\r\n                  "decimals": null,\r\n                  "funcBody": null,\r\n                  "usePostProcessing": null,\r\n                  "postFuncBody": null\r\n                },\r\n                {\r\n                  "name": "storageDataPointsLimit",\r\n                  "type": "timeseries",\r\n                  "label": "limit",\r\n                  "color": "#4caf50",\r\n                  "settings": {},\r\n                  "_hash": 0.5463603803546802,\r\n                  "units": null,\r\n                  "decimals": null,\r\n                  "funcBody": null,\r\n                  "usePostProcessing": null,\r\n                  "postFuncBody": null\r\n                },\r\n                {\r\n                  "name": "storageDataPointsCount",\r\n                  "type": "timeseries",\r\n                  "label": "count",\r\n                  "color": "#f44336",\r\n                  "settings": {},\r\n                  "_hash": 0.5564241862015964,\r\n                  "units": null,\r\n                  "decimals": null,\r\n                  "funcBody": null,\r\n                  "usePostProcessing": null,\r\n                  "postFuncBody": null\r\n                },\r\n                {\r\n                  "name": "dbApiState",\r\n                  "type": "timeseries",\r\n                  "label": "apiStateClass",\r\n                  "color": "#ffc107",\r\n                  "settings": {},\r\n                  "_hash": 0.8737107059960671,\r\n                  "units": null,\r\n                  "decimals": null,\r\n                  "funcBody": null,\r\n                  "usePostProcessing": true,\r\n                  "postFuncBody": "return value ? value.toLowerCase() : \'\';"\r\n                },\r\n                {\r\n                  "name": "dbApiState",\r\n                  "type": "timeseries",\r\n                  "label": "cardId",\r\n                  "color": "#607d8b",\r\n                  "settings": {},\r\n                  "_hash": 0.051659774305067296,\r\n                  "units": null,\r\n                  "decimals": null,\r\n                  "funcBody": null,\r\n                  "usePostProcessing": true,\r\n                  "postFuncBody": "return (Math.random()*100000).toFixed(0);"\r\n                },\r\n                {\r\n                  "name": "dbApiState",\r\n                  "type": "timeseries",\r\n                  "label": "title",\r\n                  "color": "#9c27b0",\r\n                  "settings": {},\r\n                  "_hash": 0.6301889725474652,\r\n                  "units": null,\r\n                  "decimals": null,\r\n                  "funcBody": null,\r\n                  "usePostProcessing": true,\r\n                  "postFuncBody": "return \\"{i18n:api-usage.telemetry}\\";"\r\n                },\r\n                {\r\n                  "name": "dbApiState",\r\n                  "type": "timeseries",\r\n                  "label": "unit",\r\n                  "color": "#8bc34a",\r\n                  "settings": {},\r\n                  "_hash": 0.0027742924142306613,\r\n                  "units": null,\r\n                  "decimals": null,\r\n                  "funcBody": null,\r\n                  "usePostProcessing": true,\r\n                  "postFuncBody": "return \\"{i18n:api-usage.data-points-storage-days}\\";"\r\n                }\r\n              ]\r\n            }\r\n          ],\r\n          "timewindow": {\r\n            "realtime": {\r\n              "timewindowMs": 60000\r\n            }\r\n          },\r\n          "showTitle": false,\r\n          "backgroundColor": "#fff",\r\n          "color": "#666666",\r\n          "padding": "0",\r\n          "settings": {\r\n            "cardHtml": "<div class=\'card ${apiStateClass}\'>\\n    <img src=\\"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7\\" onload=\\"initializeCard_${cardId:0}(event);\\">\\n    <script type=\\"text/javascript\\">\\n        function initializeCard_${cardId:0}(e) {\\n            \\n            function toShortNumber(number) {\\n                var rounder = Math.pow(10, 1);\\n                var powers = [\\n                  {key: \'Q\', value: Math.pow(10, 15)},\\n                  {key: \'T\', value: Math.pow(10, 12)},\\n                  {key: \'B\', value: Math.pow(10, 9)},\\n                  {key: \'M\', value: Math.pow(10, 6)},\\n                  {key: \'K\', value: 1000}\\n                ];\\n                \\n                var key = \'\';\\n                \\n                for (var i = 0; i < powers.length; i++) {\\n                    var reduced = number / powers[i].value;\\n                    reduced = Math.round(reduced * rounder) / rounder;\\n                    if (reduced >= 1) {\\n                        number = reduced;\\n                        key = powers[i].key;\\n                        break;\\n                    }\\n                }\\n                return number + key;\\n            }\\n            \\n            var imgTag = e.target;\\n            var parentTag = imgTag.parentNode;\\n            var count = \\"${count:0}\\";\\n            var limit = \\"${limit:0}\\";\\n            count = count.length > 0 ? parseInt(count, 10) : 0;\\n            limit = limit.length > 0 ? parseInt(limit, 10) : 0;\\n            var percentElement = $(\'#api-usage-percent\', parentTag);\\n            var valueElement = $(\'#api-usage-value\', parentTag);\\n            var barElement = $(\'#api-usage-bar\', parentTag);\\n            if (Number.isFinite(limit) && limit > 0) {\\n                var percent = Math.min(100, ((count / limit) * 100));\\n                barElement.width(percent + \'%\');\\n                percent = percent.toFixed(2);\\n                percentElement.text(percent + \'%\');\\n                valueElement.text(toShortNumber(count) + \' / \' + toShortNumber(limit));\\n            } else {\\n                barElement.width(\'0%\');\\n                percentElement.text(\'\');\\n                valueElement.text(toShortNumber(count) + \' / \u221e\');\\n            }\\n        }\\n    <\/script>\\n    <div class=\'content\'>\\n        <div class=\'column\'>\\n            <div class=\'title-row\'>\\n                <div class=\'title\'>${title}</div>\\n                <div class=\'state\'>${apiState}</div>\\n            </div>    \\n            <div class=\'bar-container\'>\\n                <div class=\\"unit\\">${unit}</div>\\n                <div class=\'bar\'>\\n                    <div class=\\"bar-fill\\" id=\\"api-usage-bar\\"></div>\\n                </div>    \\n                <div class=\'bar-labels\'>\\n                    <div id=\\"api-usage-percent\\"></div>\\n                    <div style=\\"flex: 1;\\"></div>\\n                    <div id=\\"api-usage-value\\"></div>\\n                </div>\\n            </div>    \\n        </div>\\n    </div>\\n    <div role=\\"separator\\" class=\\"mat-divider mat-divider-horizontal\\" aria-orientation=\\"horizontal\\"></div>\\n    <div class=\'action-row\'>\\n        <button id=\\"telemetry_persistence_details\\" class=\\"mat-focus-indicator mat-button mat-button-base mat-primary\\">\\n            <span class=\\"mat-button-wrapper\\">{i18n:api-usage.view-details}</span>\\n            <span class=\\"mat-ripple mat-button-ripple\\"></span>\\n            <span class=\\"mat-button-focus-overlay\\"></span>\\n        </button>\\n    </div> \\n</div>",\r\n            "cardCss": ".card {\\n   width: 100%;\\n   height: 100%;\\n   box-sizing: border-box;\\n   display: flex;\\n   flex-direction: column;\\n}\\n\\n.card > img {\\n    height: 0;\\n}\\n\\n.card .content {\\n   flex: 1;    \\n   padding: 13px 13px 0;\\n   display: flex;\\n   box-sizing: border-box;\\n}\\n\\n.card .content .column {\\n   display: flex;\\n   flex-direction: column;    \\n   justify-content: space-around;\\n   flex: 1;\\n}\\n\\n.card .content .title-row {\\n    display: flex;\\n    flex-direction: row;\\n    padding-bottom: 10px;\\n}\\n\\n.card .title {\\n    flex: 1;\\n    font-size: 20px;\\n    font-weight: 400;\\n    color: #666666;\\n}\\n\\n.card .state {\\n    text-transform: uppercase;\\n    font-size: 20px;\\n    font-weight: bold;\\n}\\n\\n.card.enabled .state {\\n    color: #00B260;\\n}\\n\\n.card.warning .state {\\n    color: #FFAD6F;\\n}\\n\\n.card.disabled .state {\\n    color: #F73243;\\n}\\n\\n.card .bar-container {\\n    flex: 1;\\n    display: flex;\\n    flex-direction: column;\\n    justify-content: center;\\n}\\n\\n.card .bar {\\n    flex: 1;\\n    max-height: 30px;\\n    margin-top: 3.5px;\\n    margin-bottom: 4px;\\n    background-color: #F0F0F0;\\n    border: 1px solid #DADCDB;\\n    border-radius: 2px;\\n    box-shadow: inset 0 1px 3px rgba(0, 0, 0, .2);\\n}\\n\\n.card.enabled .bar {\\n    border-color: #00B260;\\n    background-color: #F0FBF7;\\n}\\n\\n.card.warning .bar {\\n    border-color: #FFAD6F;\\n    background-color: #FFFAF6;\\n}\\n\\n.card.disabled .bar {\\n    border-color: #F73243;\\n    background-color: #FFF0F0;\\n}\\n\\n.card .bar .bar-fill {\\n    background-color: #F0F0F0;\\n    border-radius: 2px;\\n    height: 100%;\\n    width: 0%;\\n}\\n\\n.card.enabled .bar-fill {\\n    background-color: #00C46C;\\n}\\n\\n.card.warning .bar-fill {\\n    background-color: #FFD099;\\n}\\n\\n.card.disabled .bar-fill {\\n    background-color: #FF9494;\\n}\\n\\n.card .bar-labels {\\n    height: 20px;\\n    font-size: 16px;\\n    color: #666;\\n    display: flex;\\n    flex-direction: row;\\n}\\n\\n\\n.card .mat-button {\\n    text-transform: uppercase;\\n}\\n\\n.card .mat-button-wrapper {\\n    pointer-events: none;\\n}\\n\\n.card .action-row {\\n    display: flex;\\n    flex-direction: row;\\n    justify-content: flex-end;\\n    padding: 8px 0;\\n}\\n\\n@media screen and (min-width: 960px) and (max-width: 1279px) {\\n  .card .title {\\n      font-size: 12px;\\n  }\\n  .card .state {\\n      font-size: 12px;\\n  }\\n  .card .unit {\\n      font-size: 8px;\\n  }\\n  .card .bar-labels {\\n      font-size: 8px;\\n  }\\n  .card .mat-button {\\n      font-size: 8px;\\n  }\\n  .card .action-row {\\n      padding: 0;\\n  }\\n}\\n\\n@media screen and (min-width: 1280px) and (max-width: 1599px) {\\n  .card .title {\\n      font-size: 14px;\\n  }\\n  .card .state {\\n      font-size: 14px;\\n  }\\n  .card .unit {\\n      font-size: 10px;\\n  }\\n  .card .bar-labels {\\n      font-size: 10px;\\n  }\\n  .card .mat-button {\\n      font-size: 10px;\\n  }\\n  .card .action-row {\\n      padding: 0;\\n  }\\n}\\n\\n@media screen and (min-width: 1600px) and (max-width: 1919px) {\\n  .card .title {\\n      font-size: 16px;\\n  }\\n  .card .state {\\n      font-size: 16px;\\n  }\\n  .card .unit {\\n      font-size: 12px;\\n  }\\n  .card .bar-labels {\\n      font-size: 12px;\\n  }\\n  .card .mat-button {\\n      font-size: 12px;\\n  }\\n  .card .action-row {\\n      padding: 0;\\n  }\\n}    \\n\\n\\n"\r\n          },\r\n          "title": "Telemetry persistence",\r\n          "dropShadow": true,\r\n          "enableFullscreen": false,\r\n          "widgetStyle": {\r\n            "cursor": "default"\r\n          },\r\n          "titleStyle": {\r\n            "fontSize": "20px",\r\n            "fontWeight": 400\r\n          },\r\n          "useDashboardTimewindow": true,\r\n          "showLegend": false,\r\n          "actions": {\r\n            "elementClick": [\r\n              {\r\n                "name": "telemetry_persistence_details",\r\n                "icon": "insert_chart",\r\n                "type": "openDashboardState",\r\n                "targetDashboardStateId": "telemetry_persistence",\r\n                "setEntityId": false,\r\n                "stateEntityParamName": null,\r\n                "openRightLayout": false,\r\n                "id": "6248831c-5b3f-8879-8548-afcf43f10610"\r\n              }\r\n            ]\r\n          },\r\n          "showTitleIcon": false,\r\n          "iconColor": "rgba(0, 0, 0, 0.87)",\r\n          "iconSize": "24px",\r\n          "titleTooltip": ""\r\n        },\r\n        "row": 0,\r\n        "col": 0,\r\n        "id": "7e235874-461b-e7c2-2fdd-d8762a020773"\r\n      },\r\n      "08545554-a0e8-05c7-66df-6000cfeff8a4": {\r\n        "isSystemType": true,\r\n        "bundleAlias": "cards",\r\n        "typeAlias": "html_value_card",\r\n        "type": "latest",\r\n        "title": "New widget",\r\n        "sizeX": 7.5,\r\n        "sizeY": 3,\r\n        "config": {\r\n          "datasources": [\r\n            {\r\n              "type": "entity",\r\n              "name": null,\r\n              "entityAliasId": "40193437-33ac-3172-eefd-0b08eb849062",\r\n              "filterId": null,\r\n              "dataKeys": [\r\n                {\r\n                  "name": "ruleEngineApiState",\r\n                  "type": "timeseries",\r\n                  "label": "apiState",\r\n                  "color": "#2196f3",\r\n                  "settings": {},\r\n                  "_hash": 0.8830669138660703,\r\n                  "units": null,\r\n                  "decimals": null,\r\n                  "funcBody": null,\r\n                  "usePostProcessing": null,\r\n                  "postFuncBody": null\r\n                },\r\n                {\r\n                  "name": "ruleEngineExecutionLimit",\r\n                  "type": "timeseries",\r\n                  "label": "limit",\r\n                  "color": "#4caf50",\r\n                  "settings": {},\r\n                  "_hash": 0.5463603803546802,\r\n                  "units": null,\r\n                  "decimals": null,\r\n                  "funcBody": null,\r\n                  "usePostProcessing": null,\r\n                  "postFuncBody": null\r\n                },\r\n                {\r\n                  "name": "ruleEngineExecutionCount",\r\n                  "type": "timeseries",\r\n                  "label": "count",\r\n                  "color": "#f44336",\r\n                  "settings": {},\r\n                  "_hash": 0.5564241862015964,\r\n                  "units": null,\r\n                  "decimals": null,\r\n                  "funcBody": null,\r\n                  "usePostProcessing": null,\r\n                  "postFuncBody": null\r\n                },\r\n                {\r\n                  "name": "ruleEngineApiState",\r\n                  "type": "timeseries",\r\n                  "label": "apiStateClass",\r\n                  "color": "#ffc107",\r\n                  "settings": {},\r\n                  "_hash": 0.8737107059960671,\r\n                  "units": null,\r\n                  "decimals": null,\r\n                  "funcBody": null,\r\n                  "usePostProcessing": true,\r\n                  "postFuncBody": "return value ? value.toLowerCase() : \'\';"\r\n                },\r\n                {\r\n                  "name": "ruleEngineApiState",\r\n                  "type": "timeseries",\r\n                  "label": "cardId",\r\n                  "color": "#607d8b",\r\n                  "settings": {},\r\n                  "_hash": 0.051659774305067296,\r\n                  "units": null,\r\n                  "decimals": null,\r\n                  "funcBody": null,\r\n                  "usePostProcessing": true,\r\n                  "postFuncBody": "return (Math.random()*100000).toFixed(0);"\r\n                },\r\n                {\r\n                  "name": "ruleEngineApiState",\r\n                  "type": "timeseries",\r\n                  "label": "title",\r\n                  "color": "#9c27b0",\r\n                  "settings": {},\r\n                  "_hash": 0.3551317421302518,\r\n                  "units": null,\r\n                  "decimals": null,\r\n                  "funcBody": null,\r\n                  "usePostProcessing": true,\r\n                  "postFuncBody": "return \\"{i18n:api-usage.rule-engine}\\";"\r\n                },\r\n                {\r\n                  "name": "ruleEngineApiState",\r\n                  "type": "timeseries",\r\n                  "label": "unit",\r\n                  "color": "#8bc34a",\r\n                  "settings": {},\r\n                  "_hash": 0.5100381746798048,\r\n                  "units": null,\r\n                  "decimals": null,\r\n                  "funcBody": null,\r\n                  "usePostProcessing": true,\r\n                  "postFuncBody": "return \\"{i18n:api-usage.executions}\\";"\r\n                }\r\n              ]\r\n            }\r\n          ],\r\n          "timewindow": {\r\n            "realtime": {\r\n              "timewindowMs": 60000\r\n            }\r\n          },\r\n          "showTitle": false,\r\n          "backgroundColor": "#fff",\r\n          "color": "#666666",\r\n          "padding": "0",\r\n          "settings": {\r\n            "cardCss": ".card {\\n   width: 100%;\\n   height: 100%;\\n   box-sizing: border-box;\\n   display: flex;\\n   flex-direction: column;\\n}\\n\\n.card > img {\\n    height: 0;\\n}\\n\\n.card .content {\\n   flex: 1;    \\n   padding: 13px 13px 0;\\n   display: flex;\\n   box-sizing: border-box;\\n}\\n\\n.card .content .column {\\n   display: flex;\\n   flex-direction: column;    \\n   justify-content: space-around;\\n   flex: 1;\\n}\\n\\n.card .content .title-row {\\n    display: flex;\\n    flex-direction: row;\\n    padding-bottom: 10px;\\n}\\n\\n.card .title {\\n    flex: 1;\\n    font-size: 20px;\\n    font-weight: 400;\\n    color: #666666;\\n}\\n\\n.card .state {\\n    text-transform: uppercase;\\n    font-size: 20px;\\n    font-weight: bold;\\n}\\n\\n.card.enabled .state {\\n    color: #00B260;\\n}\\n\\n.card.warning .state {\\n    color: #FFAD6F;\\n}\\n\\n.card.disabled .state {\\n    color: #F73243;\\n}\\n\\n.card .bar-container {\\n    flex: 1;\\n    display: flex;\\n    flex-direction: column;\\n    justify-content: center;\\n}\\n\\n.card .bar {\\n    flex: 1;\\n    max-height: 30px;\\n    margin-top: 3.5px;\\n    margin-bottom: 4px;\\n    background-color: #F0F0F0;\\n    border: 1px solid #DADCDB;\\n    border-radius: 2px;\\n    box-shadow: inset 0 1px 3px rgba(0, 0, 0, .2);\\n}\\n\\n.card.enabled .bar {\\n    border-color: #00B260;\\n    background-color: #F0FBF7;\\n}\\n\\n.card.warning .bar {\\n    border-color: #FFAD6F;\\n    background-color: #FFFAF6;\\n}\\n\\n.card.disabled .bar {\\n    border-color: #F73243;\\n    background-color: #FFF0F0;\\n}\\n\\n.card .bar .bar-fill {\\n    background-color: #F0F0F0;\\n    border-radius: 2px;\\n    height: 100%;\\n    width: 0%;\\n}\\n\\n.card.enabled .bar-fill {\\n    background-color: #00C46C;\\n}\\n\\n.card.warning .bar-fill {\\n    background-color: #FFD099;\\n}\\n\\n.card.disabled .bar-fill {\\n    background-color: #FF9494;\\n}\\n\\n.card .bar-labels {\\n    height: 20px;\\n    font-size: 16px;\\n    color: #666;\\n    display: flex;\\n    flex-direction: row;\\n}\\n\\n\\n.card .mat-button {\\n    text-transform: uppercase;\\n}\\n\\n.card .mat-button-wrapper {\\n    pointer-events: none;\\n}\\n\\n.card .action-row {\\n    display: flex;\\n    flex-direction: row;\\n    justify-content: flex-end;\\n    padding: 8px 0;\\n}\\n\\n@media screen and (min-width: 960px) and (max-width: 1279px) {\\n  .card .title {\\n      font-size: 12px;\\n  }\\n  .card .state {\\n      font-size: 12px;\\n  }\\n  .card .unit {\\n      font-size: 8px;\\n  }\\n  .card .bar-labels {\\n      font-size: 8px;\\n  }\\n  .card .mat-button {\\n      font-size: 8px;\\n  }\\n  .card .action-row {\\n      padding: 0;\\n  }\\n}\\n\\n@media screen and (min-width: 1280px) and (max-width: 1599px) {\\n  .card .title {\\n      font-size: 14px;\\n  }\\n  .card .state {\\n      font-size: 14px;\\n  }\\n  .card .unit {\\n      font-size: 10px;\\n  }\\n  .card .bar-labels {\\n      font-size: 10px;\\n  }\\n  .card .mat-button {\\n      font-size: 10px;\\n  }\\n  .card .action-row {\\n      padding: 0;\\n  }\\n}\\n\\n@media screen and (min-width: 1600px) and (max-width: 1919px) {\\n  .card .title {\\n      font-size: 16px;\\n  }\\n  .card .state {\\n      font-size: 16px;\\n  }\\n  .card .unit {\\n      font-size: 12px;\\n  }\\n  .card .bar-labels {\\n      font-size: 12px;\\n  }\\n  .card .mat-button {\\n      font-size: 12px;\\n  }\\n  .card .action-row {\\n      padding: 0;\\n  }\\n}    \\n\\n\\n",\r\n            "cardHtml": "<div class=\'card ${apiStateClass}\'>\\n    <img src=\\"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7\\" onload=\\"initializeCard_${cardId:0}(event);\\">\\n    <script type=\\"text/javascript\\">\\n        function initializeCard_${cardId:0}(e) {\\n            \\n            function toShortNumber(number) {\\n                var rounder = Math.pow(10, 1);\\n                var powers = [\\n                  {key: \'Q\', value: Math.pow(10, 15)},\\n                  {key: \'T\', value: Math.pow(10, 12)},\\n                  {key: \'B\', value: Math.pow(10, 9)},\\n                  {key: \'M\', value: Math.pow(10, 6)},\\n                  {key: \'K\', value: 1000}\\n                ];\\n                \\n                var key = \'\';\\n                \\n                for (var i = 0; i < powers.length; i++) {\\n                    var reduced = number / powers[i].value;\\n                    reduced = Math.round(reduced * rounder) / rounder;\\n                    if (reduced >= 1) {\\n                        number = reduced;\\n                        key = powers[i].key;\\n                        break;\\n                    }\\n                }\\n                return number + key;\\n            }\\n            \\n            var imgTag = e.target;\\n            var parentTag = imgTag.parentNode;\\n            var count = \\"${count:0}\\";\\n            var limit = \\"${limit:0}\\";\\n            count = count.length > 0 ? parseInt(count, 10) : 0;\\n            limit = limit.length > 0 ? parseInt(limit, 10) : 0;\\n            var percentElement = $(\'#api-usage-percent\', parentTag);\\n            var valueElement = $(\'#api-usage-value\', parentTag);\\n            var barElement = $(\'#api-usage-bar\', parentTag);\\n            if (Number.isFinite(limit) && limit > 0) {\\n                var percent = Math.min(100, ((count / limit) * 100));\\n                barElement.width(percent + \'%\');\\n                percent = percent.toFixed(2);\\n                percentElement.text(percent + \'%\');\\n                valueElement.text(toShortNumber(count) + \' / \' + toShortNumber(limit));\\n            } else {\\n                barElement.width(\'0%\');\\n                percentElement.text(\'\');\\n                valueElement.text(toShortNumber(count) + \' / \u221e\');\\n            }\\n        }\\n    <\/script>\\n    <div class=\'content\'>\\n        <div class=\'column\'>\\n            <div class=\'title-row\'>\\n                <div class=\'title\'>${title}</div>\\n                <div class=\'state\'>${apiState}</div>\\n            </div>    \\n            <div class=\'bar-container\'>\\n                <div class=\\"unit\\">${unit}</div>\\n                <div class=\'bar\'>\\n                    <div class=\\"bar-fill\\" id=\\"api-usage-bar\\"></div>\\n                </div>    \\n                <div class=\'bar-labels\'>\\n                    <div id=\\"api-usage-percent\\"></div>\\n                    <div style=\\"flex: 1;\\"></div>\\n                    <div id=\\"api-usage-value\\"></div>\\n                </div>\\n            </div>    \\n        </div>\\n    </div>\\n    <div role=\\"separator\\" class=\\"mat-divider mat-divider-horizontal\\" aria-orientation=\\"horizontal\\"></div>\\n    <div class=\'action-row\'>\\n        <button id=\\"rule_engine_statistics_details\\" class=\\"mat-focus-indicator mat-button mat-button-base mat-primary\\">\\n            <span class=\\"mat-button-wrapper\\">{i18n:api-usage.view-statistics}</span>\\n            <span class=\\"mat-ripple mat-button-ripple\\"></span>\\n            <span class=\\"mat-button-focus-overlay\\"></span>\\n        </button>\\n        <button id=\\"rule_engine_execution_details\\" class=\\"mat-focus-indicator mat-button mat-button-base mat-primary\\">\\n            <span class=\\"mat-button-wrapper\\">{i18n:api-usage.view-details}</span>\\n            <span class=\\"mat-ripple mat-button-ripple\\"></span>\\n            <span class=\\"mat-button-focus-overlay\\"></span>\\n        </button>\\n    </div> \\n</div>"\r\n          },\r\n          "title": "Rule Engine execution",\r\n          "dropShadow": true,\r\n          "enableFullscreen": false,\r\n          "widgetStyle": {\r\n            "cursor": "default"\r\n          },\r\n          "titleStyle": {\r\n            "fontSize": "20px",\r\n            "fontWeight": 400\r\n          },\r\n          "useDashboardTimewindow": true,\r\n          "showLegend": false,\r\n          "actions": {\r\n            "elementClick": [\r\n              {\r\n                "name": "rule_engine_execution_details",\r\n                "icon": "insert_chart",\r\n                "type": "openDashboardState",\r\n                "targetDashboardStateId": "rule_engine_execution",\r\n                "setEntityId": false,\r\n                "stateEntityParamName": null,\r\n                "openRightLayout": false,\r\n                "id": "3c30248f-0cd8-fb97-a917-bc1e09984a79"\r\n              },\r\n              {\r\n                "name": "rule_engine_statistics_details",\r\n                "icon": "show_chart",\r\n                "type": "openDashboardState",\r\n                "targetDashboardStateId": "rule_engine_statistics",\r\n                "setEntityId": false,\r\n                "stateEntityParamName": null,\r\n                "openRightLayout": false,\r\n                "id": "04e4565a-9e24-23df-f376-f2ec70a8165f"\r\n              }\r\n            ]\r\n          },\r\n          "showTitleIcon": false,\r\n          "iconColor": "rgba(0, 0, 0, 0.87)",\r\n          "iconSize": "24px",\r\n          "titleTooltip": ""\r\n        },\r\n        "row": 0,\r\n        "col": 0,\r\n        "id": "08545554-a0e8-05c7-66df-6000cfeff8a4"\r\n      },\r\n      "a245c67e-53ec-d299-fa89-69fe2062ccb2": {\r\n        "isSystemType": true,\r\n        "bundleAlias": "cards",\r\n        "typeAlias": "html_value_card",\r\n        "type": "latest",\r\n        "title": "New widget",\r\n        "sizeX": 7.5,\r\n        "sizeY": 3,\r\n        "config": {\r\n          "datasources": [\r\n            {\r\n              "type": "entity",\r\n              "name": null,\r\n              "entityAliasId": "40193437-33ac-3172-eefd-0b08eb849062",\r\n              "filterId": null,\r\n              "dataKeys": [\r\n                {\r\n                  "name": "transportApiState",\r\n                  "type": "timeseries",\r\n                  "label": "apiState",\r\n                  "color": "#2196f3",\r\n                  "settings": {},\r\n                  "_hash": 0.8830669138660703,\r\n                  "units": null,\r\n                  "decimals": null,\r\n                  "funcBody": null,\r\n                  "usePostProcessing": null,\r\n                  "postFuncBody": null\r\n                },\r\n                {\r\n                  "name": "transportMsgLimit",\r\n                  "type": "timeseries",\r\n                  "label": "limit",\r\n                  "color": "#4caf50",\r\n                  "settings": {},\r\n                  "_hash": 0.5463603803546802,\r\n                  "units": null,\r\n                  "decimals": null,\r\n                  "funcBody": null,\r\n                  "usePostProcessing": null,\r\n                  "postFuncBody": null\r\n                },\r\n                {\r\n                  "name": "transportMsgCount",\r\n                  "type": "timeseries",\r\n                  "label": "count",\r\n                  "color": "#f44336",\r\n                  "settings": {},\r\n                  "_hash": 0.5564241862015964,\r\n                  "units": null,\r\n                  "decimals": null,\r\n                  "funcBody": null,\r\n                  "usePostProcessing": null,\r\n                  "postFuncBody": null\r\n                },\r\n                {\r\n                  "name": "transportApiState",\r\n                  "type": "timeseries",\r\n                  "label": "apiStateClass",\r\n                  "color": "#ffc107",\r\n                  "settings": {},\r\n                  "_hash": 0.8737107059960671,\r\n                  "units": null,\r\n                  "decimals": null,\r\n                  "funcBody": null,\r\n                  "usePostProcessing": true,\r\n                  "postFuncBody": "return value ? value.toLowerCase() : \'\';"\r\n                },\r\n                {\r\n                  "name": "transportApiState",\r\n                  "type": "timeseries",\r\n                  "label": "cardId",\r\n                  "color": "#607d8b",\r\n                  "settings": {},\r\n                  "_hash": 0.051659774305067296,\r\n                  "units": null,\r\n                  "decimals": null,\r\n                  "funcBody": null,\r\n                  "usePostProcessing": true,\r\n                  "postFuncBody": "return (Math.random()*100000).toFixed(0);"\r\n                },\r\n                {\r\n                  "name": "transportDataPointsLimit",\r\n                  "type": "timeseries",\r\n                  "label": "pointsLimit",\r\n                  "color": "#9c27b0",\r\n                  "settings": {},\r\n                  "_hash": 0.22082255831864894,\r\n                  "units": null,\r\n                  "decimals": null,\r\n                  "funcBody": null,\r\n                  "usePostProcessing": null,\r\n                  "postFuncBody": null\r\n                },\r\n                {\r\n                  "name": "transportDataPointsCount",\r\n                  "type": "timeseries",\r\n                  "label": "pointsCount",\r\n                  "color": "#8bc34a",\r\n                  "settings": {},\r\n                  "_hash": 0.6340356364819146,\r\n                  "units": null,\r\n                  "decimals": null,\r\n                  "funcBody": null,\r\n                  "usePostProcessing": null,\r\n                  "postFuncBody": null\r\n                },\r\n                {\r\n                  "name": "transportApiState",\r\n                  "type": "timeseries",\r\n                  "label": "title",\r\n                  "color": "#3f51b5",\r\n                  "settings": {},\r\n                  "_hash": 0.6894070537030252,\r\n                  "units": null,\r\n                  "decimals": null,\r\n                  "funcBody": null,\r\n                  "usePostProcessing": true,\r\n                  "postFuncBody": "return \\"{i18n:api-usage.transport}\\";"\r\n                }\r\n              ]\r\n            }\r\n          ],\r\n          "timewindow": {\r\n            "realtime": {\r\n              "timewindowMs": 60000\r\n            }\r\n          },\r\n          "showTitle": false,\r\n          "backgroundColor": "#fff",\r\n          "color": "#666666",\r\n          "padding": "0",\r\n          "settings": {\r\n            "cardHtml": "<div class=\'card ${apiStateClass}\'>\\n    <img src=\\"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7\\" onload=\\"initializeCard_${cardId:0}(event);\\">\\n    <script type=\\"text/javascript\\">\\n        function initializeCard_${cardId:0}(e) {\\n            \\n            function toShortNumber(number) {\\n                var rounder = Math.pow(10, 1);\\n                var powers = [\\n                  {key: \'Q\', value: Math.pow(10, 15)},\\n                  {key: \'T\', value: Math.pow(10, 12)},\\n                  {key: \'B\', value: Math.pow(10, 9)},\\n                  {key: \'M\', value: Math.pow(10, 6)},\\n                  {key: \'K\', value: 1000}\\n                ];\\n                \\n                var key = \'\';\\n                \\n                for (var i = 0; i < powers.length; i++) {\\n                    var reduced = number / powers[i].value;\\n                    reduced = Math.round(reduced * rounder) / rounder;\\n                    if (reduced >= 1) {\\n                        number = reduced;\\n                        key = powers[i].key;\\n                        break;\\n                    }\\n                }\\n                return number + key;\\n            }\\n            \\n            var imgTag = e.target;\\n            var parentTag = imgTag.parentNode;\\n            var count = \\"${count:0}\\";\\n            var limit = \\"${limit:0}\\";\\n            count = count.length > 0 ? parseInt(count, 10) : 0;\\n            limit = limit.length > 0 ? parseInt(limit, 10) : 0;\\n            var percentElement = $(\'#api-usage-percent\', parentTag);\\n            var valueElement = $(\'#api-usage-value\', parentTag);\\n            var barElement = $(\'#api-usage-bar\', parentTag);\\n            if (Number.isFinite(limit) && limit > 0) {\\n                var percent = Math.min(100, ((count / limit) * 100));\\n                barElement.width(percent + \'%\');\\n                percent = percent.toFixed(2);\\n                percentElement.text(percent + \'%\');\\n                valueElement.text(toShortNumber(count) + \' / \' + toShortNumber(limit));\\n            } else {\\n                barElement.width(\'0%\');\\n                percentElement.text(\'\');\\n                valueElement.text(toShortNumber(count) + \' / \u221e\');\\n            }\\n            var pointsCount = \\"${pointsCount:0}\\";\\n            var pointsLimit = \\"${pointsLimit:0}\\";\\n            pointsCount = pointsCount.length > 0 ? parseInt(pointsCount, 10) : 0;\\n            pointsLimit = pointsLimit.length > 0 ? parseInt(pointsLimit, 10) : 0;\\n            var pointsPercentElement = $(\'#api-usage-percent2\', parentTag);\\n            var pointsValueElement = $(\'#api-usage-value2\', parentTag);\\n            var pointsBarElement = $(\'#api-usage-bar2\', parentTag);\\n            if (Number.isFinite(pointsLimit) && pointsLimit > 0) {\\n                var percent = Math.min(100, ((pointsCount / pointsLimit) * 100));\\n                pointsBarElement.width(percent + \'%\');\\n                percent = percent.toFixed(2);\\n                pointsPercentElement.text(percent + \'%\');\\n                pointsValueElement.text(toShortNumber(pointsCount) + \' / \' + toShortNumber(pointsLimit));\\n            } else {\\n                pointsBarElement.width(\'0%\');\\n                pointsPercentElement.text(\'\');\\n                pointsValueElement.text(toShortNumber(pointsCount) + \' / \u221e\');\\n            }\\n        }\\n    <\/script>\\n    <div class=\'content\'>\\n        <div class=\'column\'>\\n            <div class=\'title-row\'>\\n                <div class=\'title\'>\\n                    <span>${title}</span>\\n                </div>\\n                <div class=\'state\'>${apiState}</div>\\n            </div>\\n            <div class=\\"bars-row\\">\\n                <div class=\\"bar-column\\" style=\\"margin-right: 10px;\\">\\n                    <div class=\'bar-container\'>\\n                        <div class=\\"unit\\">{i18n:api-usage.messages}</div>\\n                        <div class=\'bar\'>\\n                            <div class=\\"bar-fill\\" id=\\"api-usage-bar\\"></div>\\n                        </div>\\n                        <div class=\'bar-labels\'>\\n                            <div id=\\"api-usage-percent\\"></div>\\n                            <div style=\\"flex: 1;\\"></div>\\n                            <div id=\\"api-usage-value\\"></div>\\n                        </div>\\n                    </div>    \\n                </div>\\n                <div class=\\"bar-column\\" style=\\"margin-left: 10px;\\">\\n                    <div class=\'bar-container\'>\\n                        <div class=\\"unit\\">{i18n:api-usage.data-points}</div>\\n                        <div class=\'bar\'>\\n                            <div class=\\"bar-fill\\" id=\\"api-usage-bar2\\"></div>\\n                        </div>    \\n                        <div class=\'bar-labels\'>\\n                            <div id=\\"api-usage-percent2\\"></div>\\n                            <div style=\\"flex: 1;\\"></div>\\n                            <div id=\\"api-usage-value2\\"></div>\\n                        </div>\\n                    </div>    \\n                </div>\\n            </div>\\n        </div>\\n    </div>\\n    <div role=\\"separator\\" class=\\"mat-divider mat-divider-horizontal\\" aria-orientation=\\"horizontal\\"></div>\\n    <div class=\'action-row\'>\\n        <button id=\\"transport_details\\" class=\\"mat-focus-indicator mat-button mat-button-base mat-primary\\">\\n            <span class=\\"mat-button-wrapper\\">{i18n:api-usage.view-details}</span>\\n            <span class=\\"mat-ripple mat-button-ripple\\"></span>\\n            <span class=\\"mat-button-focus-overlay\\"></span>\\n        </button>\\n    </div>    \\n</div>",\r\n            "cardCss": ".card {\\n   width: 100%;\\n   height: 100%;\\n   box-sizing: border-box;\\n   display: flex;\\n   flex-direction: column;\\n}\\n\\n.card > img {\\n    height: 0;\\n}\\n\\n.card .content {\\n   flex: 1;    \\n   padding: 13px 13px 0;\\n   display: flex;\\n   box-sizing: border-box;\\n}\\n\\n.card .content .column {\\n   display: flex;\\n   flex-direction: column;    \\n   justify-content: space-around;\\n   flex: 1;\\n}\\n\\n.card .content .title-row {\\n    display: flex;\\n    flex-direction: row;\\n    padding-bottom: 10px;\\n}\\n\\n.card .title {\\n    flex: 1;\\n    font-size: 20px;\\n    font-weight: 400;\\n    color: #666666;\\n}\\n\\n.card .state {\\n    text-transform: uppercase;\\n    font-size: 20px;\\n    font-weight: bold;\\n}\\n\\n.card.enabled .state {\\n    color: #00B260;\\n}\\n\\n.card.warning .state {\\n    color: #FFAD6F;\\n}\\n\\n.card.disabled .state {\\n    color: #F73243;\\n}\\n\\n.card .bars-row {\\n    flex: 1;\\n    display: flex;\\n    flex-direction: row;\\n}\\n\\n.card .bar-column {\\n    flex: 1;\\n    display: flex;\\n    flex-direction: column;\\n}\\n\\n.card .bar-container {\\n    flex: 1;\\n    display: flex;\\n    flex-direction: column;\\n    justify-content: center;\\n}\\n\\n.card .bar {\\n    flex: 1;\\n    max-height: 30px;\\n    margin-top: 3.5px;\\n    margin-bottom: 4px;\\n    background-color: #F0F0F0;\\n    border: 1px solid #DADCDB;\\n    border-radius: 2px;\\n    box-shadow: inset 0 1px 3px rgba(0, 0, 0, .2);\\n}\\n\\n.card.enabled .bar {\\n    border-color: #00B260;\\n    background-color: #F0FBF7;\\n}\\n\\n.card.warning .bar {\\n    border-color: #FFAD6F;\\n    background-color: #FFFAF6;\\n}\\n\\n.card.disabled .bar {\\n    border-color: #F73243;\\n    background-color: #FFF0F0;\\n}\\n\\n.card .bar .bar-fill {\\n    background-color: #F0F0F0;\\n    border-radius: 2px;\\n    height: 100%;\\n    width: 0%;\\n}\\n\\n.card.enabled .bar-fill {\\n    background-color: #00C46C;\\n}\\n\\n.card.warning .bar-fill {\\n    background-color: #FFD099;\\n}\\n\\n.card.disabled .bar-fill {\\n    background-color: #FF9494;\\n}\\n\\n.card .bar-labels {\\n    height: 20px;\\n    font-size: 16px;\\n    color: #666;\\n    display: flex;\\n    flex-direction: row;\\n}\\n\\n.card .mat-button {\\n    text-transform: uppercase;\\n}\\n\\n.card .mat-button-wrapper {\\n    pointer-events: none;\\n}\\n\\n.card .action-row {\\n    display: flex;\\n    flex-direction: row;\\n    justify-content: flex-end;\\n    padding: 8px 0;\\n}\\n\\n\\n@media screen and (min-width: 960px) and (max-width: 1279px) {\\n  .card .title {\\n      font-size: 12px;\\n  }\\n  .card .state {\\n      font-size: 12px;\\n  }\\n  .card .unit {\\n      font-size: 8px;\\n  }\\n  .card .bar-labels {\\n      font-size: 6px;\\n  }\\n  .card .mat-button {\\n      font-size: 8px;\\n  }\\n  .card .action-row {\\n      padding: 0;\\n  }\\n}\\n\\n@media screen and (min-width: 1280px) and (max-width: 1599px) {\\n  .card .title {\\n      font-size: 14px;\\n  }\\n  .card .state {\\n      font-size: 14px;\\n  }\\n  .card .unit {\\n      font-size: 10px;\\n  }\\n  .card .bar-labels {\\n      font-size: 8px;\\n  }\\n  .card .mat-button {\\n      font-size: 10px;\\n  }\\n  .card .action-row {\\n      padding: 0;\\n  }\\n}\\n\\n@media screen and (min-width: 1600px) and (max-width: 1919px) {\\n  .card .title {\\n      font-size: 16px;\\n  }\\n  .card .state {\\n      font-size: 16px;\\n  }\\n  .card .unit {\\n      font-size: 12px;\\n  }\\n  .card .bar-labels {\\n      font-size: 12px;\\n  }\\n  .card .mat-button {\\n      font-size: 12px;\\n  }\\n  .card .action-row {\\n      padding: 0;\\n  }\\n}    \\n\\n"\r\n          },\r\n          "title": "Transport",\r\n          "dropShadow": true,\r\n          "enableFullscreen": false,\r\n          "widgetStyle": {\r\n            "cursor": "default"\r\n          },\r\n          "titleStyle": {\r\n            "fontSize": "20px",\r\n            "fontWeight": 400\r\n          },\r\n          "useDashboardTimewindow": true,\r\n          "showLegend": false,\r\n          "actions": {\r\n            "elementClick": [\r\n              {\r\n                "name": "transport_details",\r\n                "icon": "insert_chart",\r\n                "type": "openDashboardState",\r\n                "targetDashboardStateId": "transport",\r\n                "setEntityId": false,\r\n                "stateEntityParamName": null,\r\n                "openRightLayout": false,\r\n                "id": "46b7cefe-e1f2-67c1-4055-3a214520f869"\r\n              }\r\n            ]\r\n          },\r\n          "showTitleIcon": false,\r\n          "iconColor": "rgba(0, 0, 0, 0.87)",\r\n          "iconSize": "24px",\r\n          "titleTooltip": ""\r\n        },\r\n        "row": 0,\r\n        "col": 0,\r\n        "id": "a245c67e-53ec-d299-fa89-69fe2062ccb2"\r\n      },\r\n      "a151ae60-0326-6116-d818-9070dda8e9c7": {\r\n        "isSystemType": true,\r\n        "bundleAlias": "cards",\r\n        "typeAlias": "html_value_card",\r\n        "type": "latest",\r\n        "title": "New widget",\r\n        "sizeX": 7.5,\r\n        "sizeY": 3,\r\n        "config": {\r\n          "datasources": [\r\n            {\r\n              "type": "entity",\r\n              "name": null,\r\n              "entityAliasId": "40193437-33ac-3172-eefd-0b08eb849062",\r\n              "filterId": null,\r\n              "dataKeys": [\r\n                {\r\n                  "name": "emailApiState",\r\n                  "type": "timeseries",\r\n                  "label": "apiState",\r\n                  "color": "#2196f3",\r\n                  "settings": {},\r\n                  "_hash": 0.8830669138660703,\r\n                  "units": null,\r\n                  "decimals": null,\r\n                  "funcBody": null,\r\n                  "usePostProcessing": null,\r\n                  "postFuncBody": null\r\n                },\r\n                {\r\n                  "name": "emailLimit",\r\n                  "type": "timeseries",\r\n                  "label": "limit",\r\n                  "color": "#4caf50",\r\n                  "settings": {},\r\n                  "_hash": 0.5463603803546802,\r\n                  "units": null,\r\n                  "decimals": null,\r\n                  "funcBody": null,\r\n                  "usePostProcessing": null,\r\n                  "postFuncBody": null\r\n                },\r\n                {\r\n                  "name": "emailCount",\r\n                  "type": "timeseries",\r\n                  "label": "count",\r\n                  "color": "#f44336",\r\n                  "settings": {},\r\n                  "_hash": 0.5564241862015964,\r\n                  "units": null,\r\n                  "decimals": null,\r\n                  "funcBody": null,\r\n                  "usePostProcessing": null,\r\n                  "postFuncBody": null\r\n                },\r\n                {\r\n                  "name": "emailApiState",\r\n                  "type": "timeseries",\r\n                  "label": "apiStateClass",\r\n                  "color": "#ffc107",\r\n                  "settings": {},\r\n                  "_hash": 0.8737107059960671,\r\n                  "units": null,\r\n                  "decimals": null,\r\n                  "funcBody": null,\r\n                  "usePostProcessing": true,\r\n                  "postFuncBody": "return value ? value.toLowerCase() : \'\';"\r\n                },\r\n                {\r\n                  "name": "emailApiState",\r\n                  "type": "timeseries",\r\n                  "label": "cardId",\r\n                  "color": "#607d8b",\r\n                  "settings": {},\r\n                  "_hash": 0.051659774305067296,\r\n                  "units": null,\r\n                  "decimals": null,\r\n                  "funcBody": null,\r\n                  "usePostProcessing": true,\r\n                  "postFuncBody": "return (Math.random()*100000).toFixed(0);"\r\n                },\r\n                {\r\n                  "name": "emailApiState",\r\n                  "type": "timeseries",\r\n                  "label": "title",\r\n                  "color": "#9c27b0",\r\n                  "settings": {},\r\n                  "_hash": 0.43439375716502227,\r\n                  "units": null,\r\n                  "decimals": null,\r\n                  "funcBody": null,\r\n                  "usePostProcessing": true,\r\n                  "postFuncBody": "return \\"{i18n:api-usage.email}\\";"\r\n                },\r\n                {\r\n                  "name": "emailApiState",\r\n                  "type": "timeseries",\r\n                  "label": "unit",\r\n                  "color": "#8bc34a",\r\n                  "settings": {},\r\n                  "_hash": 0.9964061963495883,\r\n                  "units": null,\r\n                  "decimals": null,\r\n                  "funcBody": null,\r\n                  "usePostProcessing": true,\r\n                  "postFuncBody": "return \\"{i18n:api-usage.messages}\\";"\r\n                }\r\n              ]\r\n            }\r\n          ],\r\n          "timewindow": {\r\n            "realtime": {\r\n              "timewindowMs": 60000\r\n            }\r\n          },\r\n          "showTitle": false,\r\n          "backgroundColor": "#fff",\r\n          "color": "#666666",\r\n          "padding": "0",\r\n          "settings": {\r\n            "cardHtml": "<div class=\'card ${apiStateClass}\'>\\n    <img src=\\"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7\\" onload=\\"initializeCard_${cardId:0}(event);\\">\\n    <script type=\\"text/javascript\\">\\n        function initializeCard_${cardId:0}(e) {\\n            \\n            function toShortNumber(number) {\\n                var rounder = Math.pow(10, 1);\\n                var powers = [\\n                  {key: \'Q\', value: Math.pow(10, 15)},\\n                  {key: \'T\', value: Math.pow(10, 12)},\\n                  {key: \'B\', value: Math.pow(10, 9)},\\n                  {key: \'M\', value: Math.pow(10, 6)},\\n                  {key: \'K\', value: 1000}\\n                ];\\n                \\n                var key = \'\';\\n                \\n                for (var i = 0; i < powers.length; i++) {\\n                    var reduced = number / powers[i].value;\\n                    reduced = Math.round(reduced * rounder) / rounder;\\n                    if (reduced >= 1) {\\n                        number = reduced;\\n                        key = powers[i].key;\\n                        break;\\n                    }\\n                }\\n                return number + key;\\n            }\\n            \\n            var imgTag = e.target;\\n            var parentTag = imgTag.parentNode;\\n            var count = \\"${count:0}\\";\\n            var limit = \\"${limit:0}\\";\\n            count = count.length > 0 ? parseInt(count, 10) : 0;\\n            limit = limit.length > 0 ? parseInt(limit, 10) : 0;\\n            var percentElement = $(\'#api-usage-percent\', parentTag);\\n            var valueElement = $(\'#api-usage-value\', parentTag);\\n            var barElement = $(\'#api-usage-bar\', parentTag);\\n            if (Number.isFinite(limit) && limit > 0) {\\n                var percent = Math.min(100, ((count / limit) * 100));\\n                barElement.width(percent + \'%\');\\n                percent = percent.toFixed(2);\\n                percentElement.text(percent + \'%\');\\n                valueElement.text(toShortNumber(count) + \' / \' + toShortNumber(limit));\\n            } else {\\n                barElement.width(\'0%\');\\n                percentElement.text(\'\');\\n                valueElement.text(toShortNumber(count) + \' / \u221e\');\\n            }\\n        }\\n    <\/script>\\n    <div class=\'content\'>\\n        <div class=\'column\'>\\n            <div class=\'title-row\'>\\n                <div class=\'title\'>${title}</div>\\n                <div class=\'state\'>${apiState}</div>\\n            </div>    \\n            <div class=\'bar-container\'>\\n                <div class=\\"unit\\">${unit}</div>\\n                <div class=\'bar\'>\\n                    <div class=\\"bar-fill\\" id=\\"api-usage-bar\\"></div>\\n                </div>    \\n                <div class=\'bar-labels\'>\\n                    <div id=\\"api-usage-percent\\"></div>\\n                    <div style=\\"flex: 1;\\"></div>\\n                    <div id=\\"api-usage-value\\"></div>\\n                </div>\\n            </div>    \\n        </div>\\n    </div>\\n    <div role=\\"separator\\" class=\\"mat-divider mat-divider-horizontal\\" aria-orientation=\\"horizontal\\"></div>\\n    <div class=\'action-row\'>\\n        <button id=\\"email_messages_details\\" class=\\"mat-focus-indicator mat-button mat-button-base mat-primary\\">\\n            <span class=\\"mat-button-wrapper\\">{i18n:api-usage.view-details}</span>\\n            <span class=\\"mat-ripple mat-button-ripple\\"></span>\\n            <span class=\\"mat-button-focus-overlay\\"></span>\\n        </button>\\n    </div> \\n</div>",\r\n            "cardCss": ".card {\\n   width: 100%;\\n   height: 100%;\\n   box-sizing: border-box;\\n   display: flex;\\n   flex-direction: column;\\n}\\n\\n.card > img {\\n    height: 0;\\n}\\n\\n.card .content {\\n   flex: 1;    \\n   padding: 13px 13px 0;\\n   display: flex;\\n   box-sizing: border-box;\\n}\\n\\n.card .content .column {\\n   display: flex;\\n   flex-direction: column;    \\n   justify-content: space-around;\\n   flex: 1;\\n}\\n\\n.card .content .title-row {\\n    display: flex;\\n    flex-direction: row;\\n    padding-bottom: 10px;\\n}\\n\\n.card .title {\\n    flex: 1;\\n    font-size: 20px;\\n    font-weight: 400;\\n    color: #666666;\\n}\\n\\n.card .state {\\n    text-transform: uppercase;\\n    font-size: 20px;\\n    font-weight: bold;\\n}\\n\\n.card.enabled .state {\\n    color: #00B260;\\n}\\n\\n.card.warning .state {\\n    color: #FFAD6F;\\n}\\n\\n.card.disabled .state {\\n    color: #F73243;\\n}\\n\\n.card .bar-container {\\n    flex: 1;\\n    display: flex;\\n    flex-direction: column;\\n    justify-content: center;\\n}\\n\\n.card .bar {\\n    flex: 1;\\n    max-height: 30px;\\n    margin-top: 3.5px;\\n    margin-bottom: 4px;\\n    background-color: #F0F0F0;\\n    border: 1px solid #DADCDB;\\n    border-radius: 2px;\\n    box-shadow: inset 0 1px 3px rgba(0, 0, 0, .2);\\n}\\n\\n.card.enabled .bar {\\n    border-color: #00B260;\\n    background-color: #F0FBF7;\\n}\\n\\n.card.warning .bar {\\n    border-color: #FFAD6F;\\n    background-color: #FFFAF6;\\n}\\n\\n.card.disabled .bar {\\n    border-color: #F73243;\\n    background-color: #FFF0F0;\\n}\\n\\n.card .bar .bar-fill {\\n    background-color: #F0F0F0;\\n    border-radius: 2px;\\n    height: 100%;\\n    width: 0%;\\n}\\n\\n.card.enabled .bar-fill {\\n    background-color: #00C46C;\\n}\\n\\n.card.warning .bar-fill {\\n    background-color: #FFD099;\\n}\\n\\n.card.disabled .bar-fill {\\n    background-color: #FF9494;\\n}\\n\\n.card .bar-labels {\\n    height: 20px;\\n    font-size: 16px;\\n    color: #666;\\n    display: flex;\\n    flex-direction: row;\\n}\\n\\n\\n.card .mat-button {\\n    text-transform: uppercase;\\n}\\n\\n.card .mat-button-wrapper {\\n    pointer-events: none;\\n}\\n\\n.card .action-row {\\n    display: flex;\\n    flex-direction: row;\\n    justify-content: flex-end;\\n    padding: 8px 0;\\n}\\n\\n@media screen and (min-width: 960px) and (max-width: 1279px) {\\n  .card .title {\\n      font-size: 12px;\\n  }\\n  .card .state {\\n      font-size: 12px;\\n  }\\n  .card .unit {\\n      font-size: 8px;\\n  }\\n  .card .bar-labels {\\n      font-size: 8px;\\n  }\\n  .card .mat-button {\\n      font-size: 8px;\\n  }\\n  .card .action-row {\\n      padding: 0;\\n  }\\n}\\n\\n@media screen and (min-width: 1280px) and (max-width: 1599px) {\\n  .card .title {\\n      font-size: 14px;\\n  }\\n  .card .state {\\n      font-size: 14px;\\n  }\\n  .card .unit {\\n      font-size: 10px;\\n  }\\n  .card .bar-labels {\\n      font-size: 10px;\\n  }\\n  .card .mat-button {\\n      font-size: 10px;\\n  }\\n  .card .action-row {\\n      padding: 0;\\n  }\\n}\\n\\n@media screen and (min-width: 1600px) and (max-width: 1919px) {\\n  .card .title {\\n      font-size: 16px;\\n  }\\n  .card .state {\\n      font-size: 16px;\\n  }\\n  .card .unit {\\n      font-size: 12px;\\n  }\\n  .card .bar-labels {\\n      font-size: 12px;\\n  }\\n  .card .mat-button {\\n      font-size: 12px;\\n  }\\n  .card .action-row {\\n      padding: 0;\\n  }\\n}    \\n\\n\\n"\r\n          },\r\n          "title": "Email messages",\r\n          "dropShadow": true,\r\n          "enableFullscreen": false,\r\n          "widgetStyle": {\r\n            "cursor": "default"\r\n          },\r\n          "titleStyle": {\r\n            "fontSize": "20px",\r\n            "fontWeight": 400\r\n          },\r\n          "useDashboardTimewindow": true,\r\n          "showLegend": false,\r\n          "actions": {\r\n            "elementClick": [\r\n              {\r\n                "name": "email_messages_details",\r\n                "icon": "insert_chart",\r\n                "type": "openDashboardState",\r\n                "targetDashboardStateId": "email_messages",\r\n                "setEntityId": false,\r\n                "stateEntityParamName": null,\r\n                "openRightLayout": false,\r\n                "id": "946ba769-84ac-1507-6baa-94701de8967b"\r\n              }\r\n            ]\r\n          },\r\n          "showTitleIcon": false,\r\n          "iconColor": "rgba(0, 0, 0, 0.87)",\r\n          "iconSize": "24px",\r\n          "titleTooltip": ""\r\n        },\r\n        "row": 0,\r\n        "col": 0,\r\n        "id": "a151ae60-0326-6116-d818-9070dda8e9c7"\r\n      },\r\n      "2503a391-5692-0614-85e6-f179c5ee0dc9": {\r\n        "isSystemType": true,\r\n        "bundleAlias": "cards",\r\n        "typeAlias": "html_value_card",\r\n        "type": "latest",\r\n        "title": "New widget",\r\n        "sizeX": 7.5,\r\n        "sizeY": 3,\r\n        "config": {\r\n          "datasources": [\r\n            {\r\n              "type": "entity",\r\n              "name": null,\r\n              "entityAliasId": "40193437-33ac-3172-eefd-0b08eb849062",\r\n              "filterId": null,\r\n              "dataKeys": [\r\n                {\r\n                  "name": "smsApiState",\r\n                  "type": "timeseries",\r\n                  "label": "apiState",\r\n                  "color": "#2196f3",\r\n                  "settings": {},\r\n                  "_hash": 0.8830669138660703,\r\n                  "units": null,\r\n                  "decimals": null,\r\n                  "funcBody": null,\r\n                  "usePostProcessing": null,\r\n                  "postFuncBody": null\r\n                },\r\n                {\r\n                  "name": "smsLimit",\r\n                  "type": "timeseries",\r\n                  "label": "limit",\r\n                  "color": "#4caf50",\r\n                  "settings": {},\r\n                  "_hash": 0.5463603803546802,\r\n                  "units": null,\r\n                  "decimals": null,\r\n                  "funcBody": null,\r\n                  "usePostProcessing": null,\r\n                  "postFuncBody": null\r\n                },\r\n                {\r\n                  "name": "smsCount",\r\n                  "type": "timeseries",\r\n                  "label": "count",\r\n                  "color": "#f44336",\r\n                  "settings": {},\r\n                  "_hash": 0.5564241862015964,\r\n                  "units": null,\r\n                  "decimals": null,\r\n                  "funcBody": null,\r\n                  "usePostProcessing": null,\r\n                  "postFuncBody": null\r\n                },\r\n                {\r\n                  "name": "smsApiState",\r\n                  "type": "timeseries",\r\n                  "label": "apiStateClass",\r\n                  "color": "#ffc107",\r\n                  "settings": {},\r\n                  "_hash": 0.8737107059960671,\r\n                  "units": null,\r\n                  "decimals": null,\r\n                  "funcBody": null,\r\n                  "usePostProcessing": true,\r\n                  "postFuncBody": "return value ? value.toLowerCase() : \'\';"\r\n                },\r\n                {\r\n                  "name": "smsApiState",\r\n                  "type": "timeseries",\r\n                  "label": "cardId",\r\n                  "color": "#607d8b",\r\n                  "settings": {},\r\n                  "_hash": 0.051659774305067296,\r\n                  "units": null,\r\n                  "decimals": null,\r\n                  "funcBody": null,\r\n                  "usePostProcessing": true,\r\n                  "postFuncBody": "return (Math.random()*100000).toFixed(0);"\r\n                },\r\n                {\r\n                  "name": "smsApiState",\r\n                  "type": "timeseries",\r\n                  "label": "title",\r\n                  "color": "#9c27b0",\r\n                  "settings": {},\r\n                  "_hash": 0.286155312985084,\r\n                  "units": null,\r\n                  "decimals": null,\r\n                  "funcBody": null,\r\n                  "usePostProcessing": true,\r\n                  "postFuncBody": "return \\"{i18n:api-usage.sms}\\";"\r\n                },\r\n                {\r\n                  "name": "smsApiState",\r\n                  "type": "timeseries",\r\n                  "label": "unit",\r\n                  "color": "#8bc34a",\r\n                  "settings": {},\r\n                  "_hash": 0.39363366156190605,\r\n                  "units": null,\r\n                  "decimals": null,\r\n                  "funcBody": null,\r\n                  "usePostProcessing": true,\r\n                  "postFuncBody": "return \\"{i18n:api-usage.messages}\\";"\r\n                }\r\n              ]\r\n            }\r\n          ],\r\n          "timewindow": {\r\n            "realtime": {\r\n              "timewindowMs": 60000\r\n            }\r\n          },\r\n          "showTitle": false,\r\n          "backgroundColor": "#fff",\r\n          "color": "#666666",\r\n          "padding": "0",\r\n          "settings": {\r\n            "cardHtml": "<div class=\'card ${apiStateClass}\'>\\n    <img src=\\"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7\\" onload=\\"initializeCard_${cardId:0}(event);\\">\\n    <script type=\\"text/javascript\\">\\n        function initializeCard_${cardId:0}(e) {\\n            \\n            function toShortNumber(number) {\\n                var rounder = Math.pow(10, 1);\\n                var powers = [\\n                  {key: \'Q\', value: Math.pow(10, 15)},\\n                  {key: \'T\', value: Math.pow(10, 12)},\\n                  {key: \'B\', value: Math.pow(10, 9)},\\n                  {key: \'M\', value: Math.pow(10, 6)},\\n                  {key: \'K\', value: 1000}\\n                ];\\n                \\n                var key = \'\';\\n                \\n                for (var i = 0; i < powers.length; i++) {\\n                    var reduced = number / powers[i].value;\\n                    reduced = Math.round(reduced * rounder) / rounder;\\n                    if (reduced >= 1) {\\n                        number = reduced;\\n                        key = powers[i].key;\\n                        break;\\n                    }\\n                }\\n                return number + key;\\n            }\\n            \\n            var imgTag = e.target;\\n            var parentTag = imgTag.parentNode;\\n            var count = \\"${count:0}\\";\\n            var limit = \\"${limit:0}\\";\\n            count = count.length > 0 ? parseInt(count, 10) : 0;\\n            limit = limit.length > 0 ? parseInt(limit, 10) : 0;\\n            var percentElement = $(\'#api-usage-percent\', parentTag);\\n            var valueElement = $(\'#api-usage-value\', parentTag);\\n            var barElement = $(\'#api-usage-bar\', parentTag);\\n            if (Number.isFinite(limit) && limit > 0) {\\n                var percent = Math.min(100, ((count / limit) * 100));\\n                barElement.width(percent + \'%\');\\n                percent = percent.toFixed(2);\\n                percentElement.text(percent + \'%\');\\n                valueElement.text(toShortNumber(count) + \' / \' + toShortNumber(limit));\\n            } else {\\n                barElement.width(\'0%\');\\n                percentElement.text(\'\');\\n                valueElement.text(toShortNumber(count) + \' / \u221e\');\\n            }\\n        }\\n    <\/script>\\n    <div class=\'content\'>\\n        <div class=\'column\'>\\n            <div class=\'title-row\'>\\n                <div class=\'title\'>${title}</div>\\n                <div class=\'state\'>${apiState}</div>\\n            </div>    \\n            <div class=\'bar-container\'>\\n                <div class=\\"unit\\">${unit}</div>\\n                <div class=\'bar\'>\\n                    <div class=\\"bar-fill\\" id=\\"api-usage-bar\\"></div>\\n                </div>    \\n                <div class=\'bar-labels\'>\\n                    <div id=\\"api-usage-percent\\"></div>\\n                    <div style=\\"flex: 1;\\"></div>\\n                    <div id=\\"api-usage-value\\"></div>\\n                </div>\\n            </div>    \\n        </div>\\n    </div>\\n    <div role=\\"separator\\" class=\\"mat-divider mat-divider-horizontal\\" aria-orientation=\\"horizontal\\"></div>\\n    <div class=\'action-row\'>\\n        <button id=\\"sms_messages_details\\" class=\\"mat-focus-indicator mat-button mat-button-base mat-primary\\">\\n            <span class=\\"mat-button-wrapper\\">{i18n:api-usage.view-details}</span>\\n            <span class=\\"mat-ripple mat-button-ripple\\"></span>\\n            <span class=\\"mat-button-focus-overlay\\"></span>\\n        </button>\\n    </div> \\n</div>",\r\n            "cardCss": ".card {\\n   width: 100%;\\n   height: 100%;\\n   box-sizing: border-box;\\n   display: flex;\\n   flex-direction: column;\\n}\\n\\n.card > img {\\n    height: 0;\\n}\\n\\n.card .content {\\n   flex: 1;    \\n   padding: 13px 13px 0;\\n   display: flex;\\n   box-sizing: border-box;\\n}\\n\\n.card .content .column {\\n   display: flex;\\n   flex-direction: column;    \\n   justify-content: space-around;\\n   flex: 1;\\n}\\n\\n.card .content .title-row {\\n    display: flex;\\n    flex-direction: row;\\n    padding-bottom: 10px;\\n}\\n\\n.card .title {\\n    flex: 1;\\n    font-size: 20px;\\n    font-weight: 400;\\n    color: #666666;\\n}\\n\\n.card .state {\\n    text-transform: uppercase;\\n    font-size: 20px;\\n    font-weight: bold;\\n}\\n\\n.card.enabled .state {\\n    color: #00B260;\\n}\\n\\n.card.warning .state {\\n    color: #FFAD6F;\\n}\\n\\n.card.disabled .state {\\n    color: #F73243;\\n}\\n\\n.card .bar-container {\\n    flex: 1;\\n    display: flex;\\n    flex-direction: column;\\n    justify-content: center;\\n}\\n\\n.card .bar {\\n    flex: 1;\\n    max-height: 30px;\\n    margin-top: 3.5px;\\n    margin-bottom: 4px;\\n    background-color: #F0F0F0;\\n    border: 1px solid #DADCDB;\\n    border-radius: 2px;\\n    box-shadow: inset 0 1px 3px rgba(0, 0, 0, .2);\\n}\\n\\n.card.enabled .bar {\\n    border-color: #00B260;\\n    background-color: #F0FBF7;\\n}\\n\\n.card.warning .bar {\\n    border-color: #FFAD6F;\\n    background-color: #FFFAF6;\\n}\\n\\n.card.disabled .bar {\\n    border-color: #F73243;\\n    background-color: #FFF0F0;\\n}\\n\\n.card .bar .bar-fill {\\n    background-color: #F0F0F0;\\n    border-radius: 2px;\\n    height: 100%;\\n    width: 0%;\\n}\\n\\n.card.enabled .bar-fill {\\n    background-color: #00C46C;\\n}\\n\\n.card.warning .bar-fill {\\n    background-color: #FFD099;\\n}\\n\\n.card.disabled .bar-fill {\\n    background-color: #FF9494;\\n}\\n\\n.card .bar-labels {\\n    height: 20px;\\n    font-size: 16px;\\n    color: #666;\\n    display: flex;\\n    flex-direction: row;\\n}\\n\\n\\n.card .mat-button {\\n    text-transform: uppercase;\\n}\\n\\n.card .mat-button-wrapper {\\n    pointer-events: none;\\n}\\n\\n.card .action-row {\\n    display: flex;\\n    flex-direction: row;\\n    justify-content: flex-end;\\n    padding: 8px 0;\\n}\\n\\n@media screen and (min-width: 960px) and (max-width: 1279px) {\\n  .card .title {\\n      font-size: 12px;\\n  }\\n  .card .state {\\n      font-size: 12px;\\n  }\\n  .card .unit {\\n      font-size: 8px;\\n  }\\n  .card .bar-labels {\\n      font-size: 8px;\\n  }\\n  .card .mat-button {\\n      font-size: 8px;\\n  }\\n  .card .action-row {\\n      padding: 0;\\n  }\\n}\\n\\n@media screen and (min-width: 1280px) and (max-width: 1599px) {\\n  .card .title {\\n      font-size: 14px;\\n  }\\n  .card .state {\\n      font-size: 14px;\\n  }\\n  .card .unit {\\n      font-size: 10px;\\n  }\\n  .card .bar-labels {\\n      font-size: 10px;\\n  }\\n  .card .mat-button {\\n      font-size: 10px;\\n  }\\n  .card .action-row {\\n      padding: 0;\\n  }\\n}\\n\\n@media screen and (min-width: 1600px) and (max-width: 1919px) {\\n  .card .title {\\n      font-size: 16px;\\n  }\\n  .card .state {\\n      font-size: 16px;\\n  }\\n  .card .unit {\\n      font-size: 12px;\\n  }\\n  .card .bar-labels {\\n      font-size: 12px;\\n  }\\n  .card .mat-button {\\n      font-size: 12px;\\n  }\\n  .card .action-row {\\n      padding: 0;\\n  }\\n}    \\n\\n\\n"\r\n          },\r\n          "title": "SMS messages",\r\n          "dropShadow": true,\r\n          "enableFullscreen": false,\r\n          "widgetStyle": {\r\n            "cursor": "default"\r\n          },\r\n          "titleStyle": {\r\n            "fontSize": "20px",\r\n            "fontWeight": 400\r\n          },\r\n          "useDashboardTimewindow": true,\r\n          "showLegend": false,\r\n          "actions": {\r\n            "elementClick": [\r\n              {\r\n                "name": "sms_messages_details",\r\n                "icon": "insert_chart",\r\n                "type": "openDashboardState",\r\n                "targetDashboardStateId": "sms_messages",\r\n                "setEntityId": false,\r\n                "stateEntityParamName": null,\r\n                "openRightLayout": false,\r\n                "id": "73a35536-96a3-47dd-95bb-b1d9119d0ea2"\r\n              }\r\n            ]\r\n          },\r\n          "showTitleIcon": false,\r\n          "iconColor": "rgba(0, 0, 0, 0.87)",\r\n          "iconSize": "24px",\r\n          "titleTooltip": ""\r\n        },\r\n        "row": 0,\r\n        "col": 0,\r\n        "id": "2503a391-5692-0614-85e6-f179c5ee0dc9"\r\n      },\r\n      "68e16e98-0420-f72c-4848-41dedffd3904": {\r\n        "isSystemType": true,\r\n        "bundleAlias": "charts",\r\n        "typeAlias": "timeseries_bars_flot",\r\n        "type": "timeseries",\r\n        "title": "New widget",\r\n        "sizeX": 8,\r\n        "sizeY": 5,\r\n        "config": {\r\n          "datasources": [\r\n            {\r\n              "type": "entity",\r\n              "name": null,\r\n              "entityAliasId": "40193437-33ac-3172-eefd-0b08eb849062",\r\n              "filterId": null,\r\n              "dataKeys": [\r\n                {\r\n                  "name": "ruleEngineExecutionCountHourly",\r\n                  "type": "timeseries",\r\n                  "label": "{i18n:api-usage.rule-engine-executions}",\r\n                  "color": "#ab00ff",\r\n                  "settings": {\r\n                    "excludeFromStacking": false,\r\n                    "hideDataByDefault": false,\r\n                    "disableDataHiding": false,\r\n                    "removeFromLegend": false,\r\n                    "showLines": false,\r\n                    "fillLines": false,\r\n                    "showPoints": false,\r\n                    "showPointShape": "circle",\r\n                    "pointShapeFormatter": "",\r\n                    "showPointsLineWidth": 5,\r\n                    "showPointsRadius": 3,\r\n                    "showSeparateAxis": false,\r\n                    "axisPosition": "left",\r\n                    "thresholds": [\r\n                      {\r\n                        "thresholdValueSource": "predefinedValue"\r\n                      }\r\n                    ],\r\n                    "comparisonSettings": {\r\n                      "showValuesForComparison": true\r\n                    }\r\n                  },\r\n                  "_hash": 0.0661644137210089,\r\n                  "units": null,\r\n                  "decimals": null,\r\n                  "funcBody": null,\r\n                  "usePostProcessing": null,\r\n                  "postFuncBody": null\r\n                }\r\n              ]\r\n            }\r\n          ],\r\n          "timewindow": {\r\n            "hideInterval": false,\r\n            "hideAggregation": false,\r\n            "hideAggInterval": false,\r\n            "selectedTab": 0,\r\n            "realtime": {\r\n              "timewindowMs": 86400000,\r\n              "interval": 3600000\r\n            },\r\n            "aggregation": {\r\n              "type": "NONE",\r\n              "limit": 1000\r\n            }\r\n          },\r\n          "showTitle": true,\r\n          "backgroundColor": "#fff",\r\n          "color": "rgba(0, 0, 0, 0.87)",\r\n          "padding": "8px",\r\n          "settings": {\r\n            "shadowSize": 4,\r\n            "fontColor": "#545454",\r\n            "fontSize": 10,\r\n            "xaxis": {\r\n              "showLabels": true,\r\n              "color": "#545454"\r\n            },\r\n            "yaxis": {\r\n              "showLabels": true,\r\n              "color": "#545454",\r\n              "ticksFormatter": "var rounder = Math.pow(10, 1);\\nvar powers = [\\n  {key: \'Q\', value: Math.pow(10, 15)},\\n  {key: \'T\', value: Math.pow(10, 12)},\\n  {key: \'B\', value: Math.pow(10, 9)},\\n  {key: \'M\', value: Math.pow(10, 6)},\\n  {key: \'K\', value: 1000}\\n];\\n\\nvar key = \'\';\\n\\nfor (var i = 0; i < powers.length; i++) {\\n    var reduced = value / powers[i].value;\\n    reduced = Math.round(reduced * rounder) / rounder;\\n    if (reduced >= 1) {\\n        value = reduced;\\n        key = powers[i].key;\\n        break;\\n    }\\n}\\nreturn value + key;",\r\n              "min": 0,\r\n              "tickDecimals": 0\r\n            },\r\n            "grid": {\r\n              "color": "#545454",\r\n              "tickColor": "#DDDDDD",\r\n              "verticalLines": true,\r\n              "horizontalLines": true,\r\n              "outlineWidth": 1\r\n            },\r\n            "stack": false,\r\n            "tooltipIndividual": false,\r\n            "defaultBarWidth": 2400000,\r\n            "barAlignment": "left",\r\n            "timeForComparison": "months",\r\n            "xaxisSecond": {\r\n              "axisPosition": "top",\r\n              "showLabels": true\r\n            }\r\n          },\r\n          "title": "{i18n:api-usage.rule-engine-hourly-activity}",\r\n          "dropShadow": true,\r\n          "enableFullscreen": true,\r\n          "titleStyle": {\r\n            "fontSize": "16px",\r\n            "fontWeight": 400\r\n          },\r\n          "widgetStyle": {},\r\n          "useDashboardTimewindow": false,\r\n          "showLegend": true,\r\n          "actions": {\r\n            "headerButton": [\r\n              {\r\n                "name": "{i18n:api-usage.view-statistics}",\r\n                "icon": "show_chart",\r\n                "type": "openDashboardState",\r\n                "targetDashboardStateId": "rule_engine_statistics",\r\n                "setEntityId": false,\r\n                "stateEntityParamName": null,\r\n                "openRightLayout": false,\r\n                "id": "f9f08190-9ed9-d802-5b7a-c57ff84b5648"\r\n              },\r\n              {\r\n                "name": "{i18n:api-usage.view-details}",\r\n                "icon": "insert_chart",\r\n                "type": "openDashboardState",\r\n                "targetDashboardStateId": "rule_engine_execution",\r\n                "setEntityId": false,\r\n                "stateEntityParamName": null,\r\n                "openRightLayout": false,\r\n                "id": "1aec196b-44ba-ddf4-c4dc-c3f60c1eb6fc"\r\n              }\r\n            ]\r\n          },\r\n          "displayTimewindow": true,\r\n          "showTitleIcon": false,\r\n          "iconColor": "rgba(0, 0, 0, 0.87)",\r\n          "iconSize": "24px",\r\n          "titleTooltip": "",\r\n          "legendConfig": {\r\n            "direction": "column",\r\n            "position": "bottom",\r\n            "sortDataKeys": false,\r\n            "showMin": false,\r\n            "showMax": false,\r\n            "showAvg": false,\r\n            "showTotal": true\r\n          }\r\n        },\r\n        "row": 0,\r\n        "col": 0,\r\n        "id": "68e16e98-0420-f72c-4848-41dedffd3904"\r\n      },\r\n      "2aa6b499-6e27-b315-6833-89c4d58485ce": {\r\n        "isSystemType": true,\r\n        "bundleAlias": "charts",\r\n        "typeAlias": "timeseries_bars_flot",\r\n        "type": "timeseries",\r\n        "title": "New widget",\r\n        "sizeX": 8,\r\n        "sizeY": 5,\r\n        "config": {\r\n          "datasources": [\r\n            {\r\n              "type": "entity",\r\n              "name": null,\r\n              "entityAliasId": "40193437-33ac-3172-eefd-0b08eb849062",\r\n              "filterId": null,\r\n              "dataKeys": [\r\n                {\r\n                  "name": "transportMsgCountHourly",\r\n                  "type": "timeseries",\r\n                  "label": "{i18n:api-usage.transport-messages}",\r\n                  "color": "#2196f3",\r\n                  "settings": {\r\n                    "excludeFromStacking": false,\r\n                    "hideDataByDefault": false,\r\n                    "disableDataHiding": false,\r\n                    "removeFromLegend": false,\r\n                    "showLines": false,\r\n                    "fillLines": false,\r\n                    "showPoints": false,\r\n                    "showPointShape": "circle",\r\n                    "pointShapeFormatter": "",\r\n                    "showPointsLineWidth": 5,\r\n                    "showPointsRadius": 3,\r\n                    "showSeparateAxis": false,\r\n                    "axisPosition": "left",\r\n                    "thresholds": [\r\n                      {\r\n                        "thresholdValueSource": "predefinedValue"\r\n                      }\r\n                    ],\r\n                    "comparisonSettings": {\r\n                      "showValuesForComparison": true\r\n                    }\r\n                  },\r\n                  "_hash": 0.0661644137210089,\r\n                  "units": null,\r\n                  "decimals": null,\r\n                  "funcBody": null,\r\n                  "usePostProcessing": null,\r\n                  "postFuncBody": null\r\n                },\r\n                {\r\n                  "name": "transportDataPointsCountHourly",\r\n                  "type": "timeseries",\r\n                  "label": "{i18n:api-usage.transport-data-points}",\r\n                  "color": "#4caf50",\r\n                  "settings": {\r\n                    "excludeFromStacking": false,\r\n                    "hideDataByDefault": false,\r\n                    "disableDataHiding": false,\r\n                    "removeFromLegend": false,\r\n                    "showLines": false,\r\n                    "fillLines": false,\r\n                    "showPoints": false,\r\n                    "showPointShape": "circle",\r\n                    "pointShapeFormatter": "",\r\n                    "showPointsLineWidth": 5,\r\n                    "showPointsRadius": 3,\r\n                    "showSeparateAxis": false,\r\n                    "axisPosition": "left",\r\n                    "thresholds": [\r\n                      {\r\n                        "thresholdValueSource": "predefinedValue"\r\n                      }\r\n                    ],\r\n                    "comparisonSettings": {\r\n                      "showValuesForComparison": true\r\n                    }\r\n                  },\r\n                  "_hash": 0.46849996721308895,\r\n                  "units": null,\r\n                  "decimals": null,\r\n                  "funcBody": null,\r\n                  "usePostProcessing": null,\r\n                  "postFuncBody": null\r\n                }\r\n              ]\r\n            }\r\n          ],\r\n          "timewindow": {\r\n            "hideInterval": false,\r\n            "hideAggregation": false,\r\n            "hideAggInterval": false,\r\n            "selectedTab": 0,\r\n            "realtime": {\r\n              "timewindowMs": 86400000,\r\n              "interval": 3600000\r\n            },\r\n            "aggregation": {\r\n              "type": "NONE",\r\n              "limit": 1000\r\n            }\r\n          },\r\n          "showTitle": true,\r\n          "backgroundColor": "#fff",\r\n          "color": "rgba(0, 0, 0, 0.87)",\r\n          "padding": "8px",\r\n          "settings": {\r\n            "shadowSize": 4,\r\n            "fontColor": "#545454",\r\n            "fontSize": 10,\r\n            "xaxis": {\r\n              "showLabels": true,\r\n              "color": "#545454"\r\n            },\r\n            "yaxis": {\r\n              "showLabels": true,\r\n              "color": "#545454",\r\n              "ticksFormatter": "var rounder = Math.pow(10, 1);\\nvar powers = [\\n  {key: \'Q\', value: Math.pow(10, 15)},\\n  {key: \'T\', value: Math.pow(10, 12)},\\n  {key: \'B\', value: Math.pow(10, 9)},\\n  {key: \'M\', value: Math.pow(10, 6)},\\n  {key: \'K\', value: 1000}\\n];\\n\\nvar key = \'\';\\n\\nfor (var i = 0; i < powers.length; i++) {\\n    var reduced = value / powers[i].value;\\n    reduced = Math.round(reduced * rounder) / rounder;\\n    if (reduced >= 1) {\\n        value = reduced;\\n        key = powers[i].key;\\n        break;\\n    }\\n}\\nreturn value + key;",\r\n              "min": 0,\r\n              "tickDecimals": 0\r\n            },\r\n            "grid": {\r\n              "color": "#545454",\r\n              "tickColor": "#DDDDDD",\r\n              "verticalLines": true,\r\n              "horizontalLines": true,\r\n              "outlineWidth": 1\r\n            },\r\n            "stack": true,\r\n            "tooltipIndividual": false,\r\n            "defaultBarWidth": 2400000,\r\n            "barAlignment": "left",\r\n            "timeForComparison": "months",\r\n            "xaxisSecond": {\r\n              "axisPosition": "top",\r\n              "showLabels": true\r\n            },\r\n            "tooltipCumulative": false\r\n          },\r\n          "title": "{i18n:api-usage.transport-hourly-activity}",\r\n          "dropShadow": true,\r\n          "enableFullscreen": true,\r\n          "titleStyle": {\r\n            "fontSize": "16px",\r\n            "fontWeight": 400\r\n          },\r\n          "widgetStyle": {},\r\n          "useDashboardTimewindow": false,\r\n          "showLegend": true,\r\n          "actions": {\r\n            "headerButton": [\r\n              {\r\n                "name": "{i18n:api-usage.view-details}",\r\n                "icon": "insert_chart",\r\n                "type": "openDashboardState",\r\n                "targetDashboardStateId": "transport",\r\n                "setEntityId": false,\r\n                "stateEntityParamName": null,\r\n                "openRightLayout": false,\r\n                "id": "6ef12f6a-0266-25cf-6ca5-5dcb772252c6"\r\n              }\r\n            ]\r\n          },\r\n          "displayTimewindow": true,\r\n          "showTitleIcon": false,\r\n          "iconColor": "rgba(0, 0, 0, 0.87)",\r\n          "iconSize": "24px",\r\n          "titleTooltip": "",\r\n          "legendConfig": {\r\n            "direction": "column",\r\n            "position": "bottom",\r\n            "sortDataKeys": false,\r\n            "showMin": false,\r\n            "showMax": false,\r\n            "showAvg": false,\r\n            "showTotal": true\r\n          }\r\n        },\r\n        "row": 0,\r\n        "col": 0,\r\n        "id": "2aa6b499-6e27-b315-6833-89c4d58485ce"\r\n      },\r\n      "d890cea3-fba0-6474-9a21-fa780230dc62": {\r\n        "isSystemType": true,\r\n        "bundleAlias": "charts",\r\n        "typeAlias": "timeseries_bars_flot",\r\n        "type": "timeseries",\r\n        "title": "New widget",\r\n        "sizeX": 8,\r\n        "sizeY": 5,\r\n        "config": {\r\n          "datasources": [\r\n            {\r\n              "type": "entity",\r\n              "name": null,\r\n              "entityAliasId": "40193437-33ac-3172-eefd-0b08eb849062",\r\n              "filterId": null,\r\n              "dataKeys": [\r\n                {\r\n                  "name": "jsExecutionCountHourly",\r\n                  "type": "timeseries",\r\n                  "label": "{i18n:api-usage.javascript-executions}",\r\n                  "color": "#ff9900",\r\n                  "settings": {\r\n                    "excludeFromStacking": false,\r\n                    "hideDataByDefault": false,\r\n                    "disableDataHiding": false,\r\n                    "removeFromLegend": false,\r\n                    "showLines": false,\r\n                    "fillLines": false,\r\n                    "showPoints": false,\r\n                    "showPointShape": "circle",\r\n                    "pointShapeFormatter": "",\r\n                    "showPointsLineWidth": 5,\r\n                    "showPointsRadius": 3,\r\n                    "showSeparateAxis": false,\r\n                    "axisPosition": "left",\r\n                    "thresholds": [\r\n                      {\r\n                        "thresholdValueSource": "predefinedValue"\r\n                      }\r\n                    ],\r\n                    "comparisonSettings": {\r\n                      "showValuesForComparison": true\r\n                    }\r\n                  },\r\n                  "_hash": 0.0661644137210089,\r\n                  "units": null,\r\n                  "decimals": null,\r\n                  "funcBody": null,\r\n                  "usePostProcessing": null,\r\n                  "postFuncBody": null\r\n                }\r\n              ]\r\n            }\r\n          ],\r\n          "timewindow": {\r\n            "hideInterval": false,\r\n            "hideAggregation": false,\r\n            "hideAggInterval": false,\r\n            "selectedTab": 0,\r\n            "realtime": {\r\n              "timewindowMs": 86400000,\r\n              "interval": 3600000\r\n            },\r\n            "aggregation": {\r\n              "type": "NONE",\r\n              "limit": 1000\r\n            }\r\n          },\r\n          "showTitle": true,\r\n          "backgroundColor": "#fff",\r\n          "color": "rgba(0, 0, 0, 0.87)",\r\n          "padding": "8px",\r\n          "settings": {\r\n            "shadowSize": 4,\r\n            "fontColor": "#545454",\r\n            "fontSize": 10,\r\n            "xaxis": {\r\n              "showLabels": true,\r\n              "color": "#545454"\r\n            },\r\n            "yaxis": {\r\n              "showLabels": true,\r\n              "color": "#545454",\r\n              "ticksFormatter": "var rounder = Math.pow(10, 1);\\nvar powers = [\\n  {key: \'Q\', value: Math.pow(10, 15)},\\n  {key: \'T\', value: Math.pow(10, 12)},\\n  {key: \'B\', value: Math.pow(10, 9)},\\n  {key: \'M\', value: Math.pow(10, 6)},\\n  {key: \'K\', value: 1000}\\n];\\n\\nvar key = \'\';\\n\\nfor (var i = 0; i < powers.length; i++) {\\n    var reduced = value / powers[i].value;\\n    reduced = Math.round(reduced * rounder) / rounder;\\n    if (reduced >= 1) {\\n        value = reduced;\\n        key = powers[i].key;\\n        break;\\n    }\\n}\\nreturn value + key;",\r\n              "min": 0,\r\n              "tickDecimals": 0\r\n            },\r\n            "grid": {\r\n              "color": "#545454",\r\n              "tickColor": "#DDDDDD",\r\n              "verticalLines": true,\r\n              "horizontalLines": true,\r\n              "outlineWidth": 1\r\n            },\r\n            "stack": false,\r\n            "tooltipIndividual": false,\r\n            "defaultBarWidth": 2400000,\r\n            "barAlignment": "left",\r\n            "timeForComparison": "months",\r\n            "xaxisSecond": {\r\n              "axisPosition": "top",\r\n              "showLabels": true\r\n            }\r\n          },\r\n          "title": "{i18n:api-usage.javascript-functions-hourly-activity}",\r\n          "dropShadow": true,\r\n          "enableFullscreen": true,\r\n          "titleStyle": {\r\n            "fontSize": "16px",\r\n            "fontWeight": 400\r\n          },\r\n          "widgetStyle": {},\r\n          "useDashboardTimewindow": false,\r\n          "showLegend": true,\r\n          "actions": {\r\n            "headerButton": [\r\n              {\r\n                "name": "{i18n:api-usage.view-details}",\r\n                "icon": "insert_chart",\r\n                "type": "openDashboardState",\r\n                "targetDashboardStateId": "javascript_functions",\r\n                "setEntityId": false,\r\n                "stateEntityParamName": null,\r\n                "openRightLayout": false,\r\n                "id": "4687d3f6-8800-a3b6-26e5-0d33f3b828a9"\r\n              }\r\n            ]\r\n          },\r\n          "displayTimewindow": true,\r\n          "showTitleIcon": false,\r\n          "iconColor": "rgba(0, 0, 0, 0.87)",\r\n          "iconSize": "24px",\r\n          "titleTooltip": "",\r\n          "legendConfig": {\r\n            "direction": "column",\r\n            "position": "bottom",\r\n            "sortDataKeys": false,\r\n            "showMin": false,\r\n            "showMax": false,\r\n            "showAvg": false,\r\n            "showTotal": true\r\n          }\r\n        },\r\n        "row": 0,\r\n        "col": 0,\r\n        "id": "d890cea3-fba0-6474-9a21-fa780230dc62"\r\n      },\r\n      "84b6cfa5-1449-e0f2-3560-f810d2dd7ead": {\r\n        "isSystemType": true,\r\n        "bundleAlias": "charts",\r\n        "typeAlias": "timeseries_bars_flot",\r\n        "type": "timeseries",\r\n        "title": "New widget",\r\n        "sizeX": 8,\r\n        "sizeY": 5,\r\n        "config": {\r\n          "datasources": [\r\n            {\r\n              "type": "entity",\r\n              "name": null,\r\n              "entityAliasId": "40193437-33ac-3172-eefd-0b08eb849062",\r\n              "filterId": null,\r\n              "dataKeys": [\r\n                {\r\n                  "name": "storageDataPointsCountHourly",\r\n                  "type": "timeseries",\r\n                  "label": "{i18n:api-usage.data-points-storage-days}",\r\n                  "color": "#1039ee",\r\n                  "settings": {\r\n                    "excludeFromStacking": false,\r\n                    "hideDataByDefault": false,\r\n                    "disableDataHiding": false,\r\n                    "removeFromLegend": false,\r\n                    "showLines": false,\r\n                    "fillLines": false,\r\n                    "showPoints": false,\r\n                    "showPointShape": "circle",\r\n                    "pointShapeFormatter": "",\r\n                    "showPointsLineWidth": 5,\r\n                    "showPointsRadius": 3,\r\n                    "showSeparateAxis": false,\r\n                    "axisPosition": "left",\r\n                    "thresholds": [\r\n                      {\r\n                        "thresholdValueSource": "predefinedValue"\r\n                      }\r\n                    ],\r\n                    "comparisonSettings": {\r\n                      "showValuesForComparison": true\r\n                    }\r\n                  },\r\n                  "_hash": 0.0661644137210089,\r\n                  "units": null,\r\n                  "decimals": null,\r\n                  "funcBody": null,\r\n                  "usePostProcessing": null,\r\n                  "postFuncBody": null\r\n                }\r\n              ]\r\n            }\r\n          ],\r\n          "timewindow": {\r\n            "hideInterval": false,\r\n            "hideAggregation": false,\r\n            "hideAggInterval": false,\r\n            "selectedTab": 0,\r\n            "realtime": {\r\n              "timewindowMs": 86400000,\r\n              "interval": 3600000\r\n            },\r\n            "aggregation": {\r\n              "type": "NONE",\r\n              "limit": 1000\r\n            }\r\n          },\r\n          "showTitle": true,\r\n          "backgroundColor": "#fff",\r\n          "color": "rgba(0, 0, 0, 0.87)",\r\n          "padding": "8px",\r\n          "settings": {\r\n            "shadowSize": 4,\r\n            "fontColor": "#545454",\r\n            "fontSize": 10,\r\n            "xaxis": {\r\n              "showLabels": true,\r\n              "color": "#545454"\r\n            },\r\n            "yaxis": {\r\n              "showLabels": true,\r\n              "color": "#545454",\r\n              "ticksFormatter": "var rounder = Math.pow(10, 1);\\nvar powers = [\\n  {key: \'Q\', value: Math.pow(10, 15)},\\n  {key: \'T\', value: Math.pow(10, 12)},\\n  {key: \'B\', value: Math.pow(10, 9)},\\n  {key: \'M\', value: Math.pow(10, 6)},\\n  {key: \'K\', value: 1000}\\n];\\n\\nvar key = \'\';\\n\\nfor (var i = 0; i < powers.length; i++) {\\n    var reduced = value / powers[i].value;\\n    reduced = Math.round(reduced * rounder) / rounder;\\n    if (reduced >= 1) {\\n        value = reduced;\\n        key = powers[i].key;\\n        break;\\n    }\\n}\\nreturn value + key;",\r\n              "min": 0,\r\n              "tickDecimals": 0\r\n            },\r\n            "grid": {\r\n              "color": "#545454",\r\n              "tickColor": "#DDDDDD",\r\n              "verticalLines": true,\r\n              "horizontalLines": true,\r\n              "outlineWidth": 1\r\n            },\r\n            "stack": false,\r\n            "tooltipIndividual": false,\r\n            "defaultBarWidth": 2400000,\r\n            "barAlignment": "left",\r\n            "timeForComparison": "months",\r\n            "xaxisSecond": {\r\n              "axisPosition": "top",\r\n              "showLabels": true\r\n            }\r\n          },\r\n          "title": "{i18n:api-usage.telemetry-persistence-hourly-activity}",\r\n          "dropShadow": true,\r\n          "enableFullscreen": true,\r\n          "titleStyle": {\r\n            "fontSize": "16px",\r\n            "fontWeight": 400\r\n          },\r\n          "widgetStyle": {},\r\n          "useDashboardTimewindow": false,\r\n          "showLegend": true,\r\n          "actions": {\r\n            "headerButton": [\r\n              {\r\n                "name": "{i18n:api-usage.view-details}",\r\n                "icon": "insert_chart",\r\n                "type": "openDashboardState",\r\n                "targetDashboardStateId": "telemetry_persistence",\r\n                "setEntityId": false,\r\n                "stateEntityParamName": null,\r\n                "openRightLayout": false,\r\n                "id": "16707efb-e572-bd02-c219-55fc1b0f672a"\r\n              }\r\n            ]\r\n          },\r\n          "displayTimewindow": true,\r\n          "showTitleIcon": false,\r\n          "iconColor": "rgba(0, 0, 0, 0.87)",\r\n          "iconSize": "24px",\r\n          "titleTooltip": "",\r\n          "legendConfig": {\r\n            "direction": "column",\r\n            "position": "bottom",\r\n            "sortDataKeys": false,\r\n            "showMin": false,\r\n            "showMax": false,\r\n            "showAvg": false,\r\n            "showTotal": true\r\n          }\r\n        },\r\n        "row": 0,\r\n        "col": 0,\r\n        "id": "84b6cfa5-1449-e0f2-3560-f810d2dd7ead"\r\n      },\r\n      "d296b566-a000-7402-ae9d-c815381c5435": {\r\n        "isSystemType": true,\r\n        "bundleAlias": "charts",\r\n        "typeAlias": "timeseries_bars_flot",\r\n        "type": "timeseries",\r\n        "title": "New widget",\r\n        "sizeX": 8,\r\n        "sizeY": 5,\r\n        "config": {\r\n          "datasources": [\r\n            {\r\n              "type": "entity",\r\n              "name": null,\r\n              "entityAliasId": "40193437-33ac-3172-eefd-0b08eb849062",\r\n              "filterId": null,\r\n              "dataKeys": [\r\n                {\r\n                  "name": "emailCountHourly",\r\n                  "type": "timeseries",\r\n                  "label": "{i18n:api-usage.email-messages}",\r\n                  "color": "#d35a00",\r\n                  "settings": {\r\n                    "excludeFromStacking": false,\r\n                    "hideDataByDefault": false,\r\n                    "disableDataHiding": false,\r\n                    "removeFromLegend": false,\r\n                    "showLines": false,\r\n                    "fillLines": false,\r\n                    "showPoints": false,\r\n                    "showPointShape": "circle",\r\n                    "pointShapeFormatter": "",\r\n                    "showPointsLineWidth": 5,\r\n                    "showPointsRadius": 3,\r\n                    "showSeparateAxis": false,\r\n                    "axisPosition": "left",\r\n                    "thresholds": [\r\n                      {\r\n                        "thresholdValueSource": "predefinedValue"\r\n                      }\r\n                    ],\r\n                    "comparisonSettings": {\r\n                      "showValuesForComparison": true\r\n                    }\r\n                  },\r\n                  "_hash": 0.0661644137210089,\r\n                  "units": null,\r\n                  "decimals": null,\r\n                  "funcBody": null,\r\n                  "usePostProcessing": null,\r\n                  "postFuncBody": null\r\n                }\r\n              ]\r\n            }\r\n          ],\r\n          "timewindow": {\r\n            "hideInterval": false,\r\n            "hideAggregation": false,\r\n            "hideAggInterval": false,\r\n            "selectedTab": 0,\r\n            "realtime": {\r\n              "timewindowMs": 86400000,\r\n              "interval": 3600000\r\n            },\r\n            "aggregation": {\r\n              "type": "NONE",\r\n              "limit": 1000\r\n            }\r\n          },\r\n          "showTitle": true,\r\n          "backgroundColor": "#fff",\r\n          "color": "rgba(0, 0, 0, 0.87)",\r\n          "padding": "8px",\r\n          "settings": {\r\n            "shadowSize": 4,\r\n            "fontColor": "#545454",\r\n            "fontSize": 10,\r\n            "xaxis": {\r\n              "showLabels": true,\r\n              "color": "#545454"\r\n            },\r\n            "yaxis": {\r\n              "showLabels": true,\r\n              "color": "#545454",\r\n              "ticksFormatter": "var rounder = Math.pow(10, 1);\\nvar powers = [\\n  {key: \'Q\', value: Math.pow(10, 15)},\\n  {key: \'T\', value: Math.pow(10, 12)},\\n  {key: \'B\', value: Math.pow(10, 9)},\\n  {key: \'M\', value: Math.pow(10, 6)},\\n  {key: \'K\', value: 1000}\\n];\\n\\nvar key = \'\';\\n\\nfor (var i = 0; i < powers.length; i++) {\\n    var reduced = value / powers[i].value;\\n    reduced = Math.round(reduced * rounder) / rounder;\\n    if (reduced >= 1) {\\n        value = reduced;\\n        key = powers[i].key;\\n        break;\\n    }\\n}\\nreturn value + key;",\r\n              "min": 0,\r\n              "tickDecimals": 0\r\n            },\r\n            "grid": {\r\n              "color": "#545454",\r\n              "tickColor": "#DDDDDD",\r\n              "verticalLines": true,\r\n              "horizontalLines": true,\r\n              "outlineWidth": 1\r\n            },\r\n            "stack": false,\r\n            "tooltipIndividual": false,\r\n            "defaultBarWidth": 2400000,\r\n            "barAlignment": "left",\r\n            "timeForComparison": "months",\r\n            "xaxisSecond": {\r\n              "axisPosition": "top",\r\n              "showLabels": true\r\n            }\r\n          },\r\n          "title": "{i18n:api-usage.email-messages-hourly-activity}",\r\n          "dropShadow": true,\r\n          "enableFullscreen": true,\r\n          "titleStyle": {\r\n            "fontSize": "16px",\r\n            "fontWeight": 400\r\n          },\r\n          "widgetStyle": {},\r\n          "useDashboardTimewindow": false,\r\n          "showLegend": true,\r\n          "actions": {\r\n            "headerButton": [\r\n              {\r\n                "name": "{i18n:api-usage.view-details}",\r\n                "icon": "insert_chart",\r\n                "type": "openDashboardState",\r\n                "targetDashboardStateId": "email_messages",\r\n                "setEntityId": false,\r\n                "stateEntityParamName": null,\r\n                "openRightLayout": false,\r\n                "id": "371882f9-ea23-3abc-fca8-9449c5dfdd6b"\r\n              }\r\n            ]\r\n          },\r\n          "displayTimewindow": true,\r\n          "showTitleIcon": false,\r\n          "iconColor": "rgba(0, 0, 0, 0.87)",\r\n          "iconSize": "24px",\r\n          "titleTooltip": "",\r\n          "legendConfig": {\r\n            "direction": "column",\r\n            "position": "bottom",\r\n            "sortDataKeys": false,\r\n            "showMin": false,\r\n            "showMax": false,\r\n            "showAvg": false,\r\n            "showTotal": true\r\n          }\r\n        },\r\n        "row": 0,\r\n        "col": 0,\r\n        "id": "d296b566-a000-7402-ae9d-c815381c5435"\r\n      },\r\n      "00a02464-9509-911b-3b5e-21fb37629822": {\r\n        "isSystemType": true,\r\n        "bundleAlias": "charts",\r\n        "typeAlias": "timeseries_bars_flot",\r\n        "type": "timeseries",\r\n        "title": "New widget",\r\n        "sizeX": 8,\r\n        "sizeY": 5,\r\n        "config": {\r\n          "datasources": [\r\n            {\r\n              "type": "entity",\r\n              "name": null,\r\n              "entityAliasId": "40193437-33ac-3172-eefd-0b08eb849062",\r\n              "filterId": null,\r\n              "dataKeys": [\r\n                {\r\n                  "name": "smsCountHourly",\r\n                  "type": "timeseries",\r\n                  "label": "{i18n:api-usage.sms-messages}",\r\n                  "color": "#f36021",\r\n                  "settings": {\r\n                    "excludeFromStacking": false,\r\n                    "hideDataByDefault": false,\r\n                    "disableDataHiding": false,\r\n                    "removeFromLegend": false,\r\n                    "showLines": false,\r\n                    "fillLines": false,\r\n                    "showPoints": false,\r\n                    "showPointShape": "circle",\r\n                    "pointShapeFormatter": "",\r\n                    "showPointsLineWidth": 5,\r\n                    "showPointsRadius": 3,\r\n                    "showSeparateAxis": false,\r\n                    "axisPosition": "left",\r\n                    "thresholds": [\r\n                      {\r\n                        "thresholdValueSource": "predefinedValue"\r\n                      }\r\n                    ],\r\n                    "comparisonSettings": {\r\n                      "showValuesForComparison": true\r\n                    }\r\n                  },\r\n                  "_hash": 0.0661644137210089,\r\n                  "units": null,\r\n                  "decimals": null,\r\n                  "funcBody": null,\r\n                  "usePostProcessing": null,\r\n                  "postFuncBody": null\r\n                }\r\n              ]\r\n            }\r\n          ],\r\n          "timewindow": {\r\n            "hideInterval": false,\r\n            "hideAggregation": false,\r\n            "hideAggInterval": false,\r\n            "selectedTab": 0,\r\n            "realtime": {\r\n              "timewindowMs": 86400000,\r\n              "interval": 3600000\r\n            },\r\n            "aggregation": {\r\n              "type": "NONE",\r\n              "limit": 1000\r\n            }\r\n          },\r\n          "showTitle": true,\r\n          "backgroundColor": "#fff",\r\n          "color": "rgba(0, 0, 0, 0.87)",\r\n          "padding": "8px",\r\n          "settings": {\r\n            "shadowSize": 4,\r\n            "fontColor": "#545454",\r\n            "fontSize": 10,\r\n            "xaxis": {\r\n              "showLabels": true,\r\n              "color": "#545454"\r\n            },\r\n            "yaxis": {\r\n              "showLabels": true,\r\n              "color": "#545454",\r\n              "ticksFormatter": "var rounder = Math.pow(10, 1);\\nvar powers = [\\n  {key: \'Q\', value: Math.pow(10, 15)},\\n  {key: \'T\', value: Math.pow(10, 12)},\\n  {key: \'B\', value: Math.pow(10, 9)},\\n  {key: \'M\', value: Math.pow(10, 6)},\\n  {key: \'K\', value: 1000}\\n];\\n\\nvar key = \'\';\\n\\nfor (var i = 0; i < powers.length; i++) {\\n    var reduced = value / powers[i].value;\\n    reduced = Math.round(reduced * rounder) / rounder;\\n    if (reduced >= 1) {\\n        value = reduced;\\n        key = powers[i].key;\\n        break;\\n    }\\n}\\nreturn value + key;",\r\n              "min": 0,\r\n              "tickDecimals": 0\r\n            },\r\n            "grid": {\r\n              "color": "#545454",\r\n              "tickColor": "#DDDDDD",\r\n              "verticalLines": true,\r\n              "horizontalLines": true,\r\n              "outlineWidth": 1\r\n            },\r\n            "stack": false,\r\n            "tooltipIndividual": false,\r\n            "defaultBarWidth": 2400000,\r\n            "barAlignment": "left",\r\n            "timeForComparison": "months",\r\n            "xaxisSecond": {\r\n              "axisPosition": "top",\r\n              "showLabels": true\r\n            }\r\n          },\r\n          "title": "{i18n:api-usage.sms-messages-hourly-activity}",\r\n          "dropShadow": true,\r\n          "enableFullscreen": true,\r\n          "titleStyle": {\r\n            "fontSize": "16px",\r\n            "fontWeight": 400\r\n          },\r\n          "widgetStyle": {},\r\n          "useDashboardTimewindow": false,\r\n          "showLegend": true,\r\n          "actions": {\r\n            "headerButton": [\r\n              {\r\n                "name": "{i18n:api-usage.view-details}",\r\n                "icon": "insert_chart",\r\n                "type": "openDashboardState",\r\n                "targetDashboardStateId": "sms_messages",\r\n                "setEntityId": false,\r\n                "stateEntityParamName": null,\r\n                "openRightLayout": false,\r\n                "id": "49aefac0-ec5e-d6f3-f39c-8744759f4b19"\r\n              }\r\n            ]\r\n          },\r\n          "displayTimewindow": true,\r\n          "showTitleIcon": false,\r\n          "iconColor": "rgba(0, 0, 0, 0.87)",\r\n          "iconSize": "24px",\r\n          "titleTooltip": "",\r\n          "legendConfig": {\r\n            "direction": "column",\r\n            "position": "bottom",\r\n            "sortDataKeys": false,\r\n            "showMin": false,\r\n            "showMax": false,\r\n            "showAvg": false,\r\n            "showTotal": true\r\n          }\r\n        },\r\n        "row": 0,\r\n        "col": 0,\r\n        "id": "00a02464-9509-911b-3b5e-21fb37629822"\r\n      },\r\n      "74199074-7873-6c6a-2a51-3fc614769f03": {\r\n        "isSystemType": true,\r\n        "bundleAlias": "charts",\r\n        "typeAlias": "timeseries_bars_flot",\r\n        "type": "timeseries",\r\n        "title": "New widget",\r\n        "sizeX": 8,\r\n        "sizeY": 5,\r\n        "config": {\r\n          "datasources": [\r\n            {\r\n              "type": "entity",\r\n              "name": null,\r\n              "entityAliasId": "40193437-33ac-3172-eefd-0b08eb849062",\r\n              "filterId": null,\r\n              "dataKeys": [\r\n                {\r\n                  "name": "ruleEngineExecutionCountHourly",\r\n                  "type": "timeseries",\r\n                  "label": "{i18n:api-usage.rule-engine-executions}",\r\n                  "color": "#ab00ff",\r\n                  "settings": {\r\n                    "excludeFromStacking": false,\r\n                    "hideDataByDefault": false,\r\n                    "disableDataHiding": false,\r\n                    "removeFromLegend": false,\r\n                    "showLines": false,\r\n                    "fillLines": false,\r\n                    "showPoints": false,\r\n                    "showPointShape": "circle",\r\n                    "pointShapeFormatter": "",\r\n                    "showPointsLineWidth": 5,\r\n                    "showPointsRadius": 3,\r\n                    "showSeparateAxis": false,\r\n                    "axisPosition": "left",\r\n                    "thresholds": [\r\n                      {\r\n                        "thresholdValueSource": "predefinedValue"\r\n                      }\r\n                    ],\r\n                    "comparisonSettings": {\r\n                      "showValuesForComparison": true\r\n                    }\r\n                  },\r\n                  "_hash": 0.0661644137210089,\r\n                  "units": null,\r\n                  "decimals": null,\r\n                  "funcBody": null,\r\n                  "usePostProcessing": null,\r\n                  "postFuncBody": null\r\n                }\r\n              ]\r\n            }\r\n          ],\r\n          "timewindow": {\r\n            "hideInterval": false,\r\n            "hideAggregation": false,\r\n            "hideAggInterval": false,\r\n            "selectedTab": 1,\r\n            "history": {\r\n              "historyType": 0,\r\n              "timewindowMs": 2592000000,\r\n              "interval": 86400000\r\n            },\r\n            "aggregation": {\r\n              "type": "SUM",\r\n              "limit": 1000\r\n            }\r\n          },\r\n          "showTitle": true,\r\n          "backgroundColor": "#fff",\r\n          "color": "rgba(0, 0, 0, 0.87)",\r\n          "padding": "8px",\r\n          "settings": {\r\n            "shadowSize": 4,\r\n            "fontColor": "#545454",\r\n            "fontSize": 10,\r\n            "xaxis": {\r\n              "showLabels": true,\r\n              "color": "#545454"\r\n            },\r\n            "yaxis": {\r\n              "showLabels": true,\r\n              "color": "#545454",\r\n              "ticksFormatter": "var rounder = Math.pow(10, 1);\\nvar powers = [\\n  {key: \'Q\', value: Math.pow(10, 15)},\\n  {key: \'T\', value: Math.pow(10, 12)},\\n  {key: \'B\', value: Math.pow(10, 9)},\\n  {key: \'M\', value: Math.pow(10, 6)},\\n  {key: \'K\', value: 1000}\\n];\\n\\nvar key = \'\';\\n\\nfor (var i = 0; i < powers.length; i++) {\\n    var reduced = value / powers[i].value;\\n    reduced = Math.round(reduced * rounder) / rounder;\\n    if (reduced >= 1) {\\n        value = reduced;\\n        key = powers[i].key;\\n        break;\\n    }\\n}\\nreturn value + key;",\r\n              "min": 0,\r\n              "tickDecimals": 0\r\n            },\r\n            "grid": {\r\n              "color": "#545454",\r\n              "tickColor": "#DDDDDD",\r\n              "verticalLines": true,\r\n              "horizontalLines": true,\r\n              "outlineWidth": 1\r\n            },\r\n            "stack": false,\r\n            "tooltipIndividual": false,\r\n            "defaultBarWidth": 1800000,\r\n            "barAlignment": "left",\r\n            "timeForComparison": "months",\r\n            "xaxisSecond": {\r\n              "axisPosition": "top",\r\n              "showLabels": true\r\n            }\r\n          },\r\n          "title": "{i18n:api-usage.rule-engine-daily-activity}",\r\n          "dropShadow": true,\r\n          "enableFullscreen": true,\r\n          "titleStyle": {\r\n            "fontSize": "16px",\r\n            "fontWeight": 400\r\n          },\r\n          "widgetStyle": {},\r\n          "useDashboardTimewindow": false,\r\n          "showLegend": true,\r\n          "actions": {},\r\n          "displayTimewindow": true,\r\n          "showTitleIcon": false,\r\n          "iconColor": "rgba(0, 0, 0, 0.87)",\r\n          "iconSize": "24px",\r\n          "titleTooltip": "",\r\n          "legendConfig": {\r\n            "direction": "column",\r\n            "position": "bottom",\r\n            "sortDataKeys": false,\r\n            "showMin": false,\r\n            "showMax": false,\r\n            "showAvg": false,\r\n            "showTotal": true\r\n          }\r\n        },\r\n        "row": 0,\r\n        "col": 0,\r\n        "id": "74199074-7873-6c6a-2a51-3fc614769f03"\r\n      },\r\n      "00006bc3-8a8d-b55e-ed39-e318f1bcd090": {\r\n        "isSystemType": true,\r\n        "bundleAlias": "charts",\r\n        "typeAlias": "timeseries_bars_flot",\r\n        "type": "timeseries",\r\n        "title": "New widget",\r\n        "sizeX": 8,\r\n        "sizeY": 5,\r\n        "config": {\r\n          "datasources": [\r\n            {\r\n              "type": "entity",\r\n              "name": null,\r\n              "entityAliasId": "40193437-33ac-3172-eefd-0b08eb849062",\r\n              "filterId": null,\r\n              "dataKeys": [\r\n                {\r\n                  "name": "ruleEngineExecutionCount",\r\n                  "type": "timeseries",\r\n                  "label": "{i18n:api-usage.rule-engine-executions}",\r\n                  "color": "#ab00ff",\r\n                  "settings": {\r\n                    "excludeFromStacking": false,\r\n                    "hideDataByDefault": false,\r\n                    "disableDataHiding": false,\r\n                    "removeFromLegend": false,\r\n                    "showLines": false,\r\n                    "fillLines": false,\r\n                    "showPoints": false,\r\n                    "showPointShape": "circle",\r\n                    "pointShapeFormatter": "",\r\n                    "showPointsLineWidth": 5,\r\n                    "showPointsRadius": 3,\r\n                    "showSeparateAxis": false,\r\n                    "axisPosition": "left",\r\n                    "thresholds": [\r\n                      {\r\n                        "thresholdValueSource": "predefinedValue"\r\n                      }\r\n                    ],\r\n                    "comparisonSettings": {\r\n                      "showValuesForComparison": true\r\n                    }\r\n                  },\r\n                  "_hash": 0.0661644137210089,\r\n                  "units": null,\r\n                  "decimals": null,\r\n                  "funcBody": null,\r\n                  "usePostProcessing": null,\r\n                  "postFuncBody": null\r\n                }\r\n              ]\r\n            }\r\n          ],\r\n          "timewindow": {\r\n            "hideInterval": false,\r\n            "hideAggregation": false,\r\n            "hideAggInterval": false,\r\n            "selectedTab": 1,\r\n            "history": {\r\n              "historyType": 0,\r\n              "timewindowMs": 31536000000,\r\n              "interval": 1000\r\n            },\r\n            "aggregation": {\r\n              "type": "NONE",\r\n              "limit": 1000\r\n            }\r\n          },\r\n          "showTitle": true,\r\n          "backgroundColor": "#fff",\r\n          "color": "rgba(0, 0, 0, 0.87)",\r\n          "padding": "8px",\r\n          "settings": {\r\n            "shadowSize": 4,\r\n            "fontColor": "#545454",\r\n            "fontSize": 10,\r\n            "xaxis": {\r\n              "showLabels": true,\r\n              "color": "#545454"\r\n            },\r\n            "yaxis": {\r\n              "showLabels": true,\r\n              "color": "#545454",\r\n              "ticksFormatter": "var rounder = Math.pow(10, 1);\\nvar powers = [\\n  {key: \'Q\', value: Math.pow(10, 15)},\\n  {key: \'T\', value: Math.pow(10, 12)},\\n  {key: \'B\', value: Math.pow(10, 9)},\\n  {key: \'M\', value: Math.pow(10, 6)},\\n  {key: \'K\', value: 1000}\\n];\\n\\nvar key = \'\';\\n\\nfor (var i = 0; i < powers.length; i++) {\\n    var reduced = value / powers[i].value;\\n    reduced = Math.round(reduced * rounder) / rounder;\\n    if (reduced >= 1) {\\n        value = reduced;\\n        key = powers[i].key;\\n        break;\\n    }\\n}\\nreturn value + key;",\r\n              "min": 0,\r\n              "tickDecimals": 0\r\n            },\r\n            "grid": {\r\n              "color": "#545454",\r\n              "tickColor": "#DDDDDD",\r\n              "verticalLines": true,\r\n              "horizontalLines": true,\r\n              "outlineWidth": 1\r\n            },\r\n            "stack": false,\r\n            "tooltipIndividual": false,\r\n            "defaultBarWidth": 900000000,\r\n            "barAlignment": "left",\r\n            "timeForComparison": "months",\r\n            "xaxisSecond": {\r\n              "axisPosition": "top",\r\n              "showLabels": true\r\n            }\r\n          },\r\n          "title": "{i18n:api-usage.rule-engine-monthly-activity}",\r\n          "dropShadow": true,\r\n          "enableFullscreen": true,\r\n          "titleStyle": {\r\n            "fontSize": "16px",\r\n            "fontWeight": 400\r\n          },\r\n          "widgetStyle": {},\r\n          "useDashboardTimewindow": false,\r\n          "showLegend": true,\r\n          "actions": {},\r\n          "displayTimewindow": true,\r\n          "showTitleIcon": false,\r\n          "iconColor": "rgba(0, 0, 0, 0.87)",\r\n          "iconSize": "24px",\r\n          "titleTooltip": "",\r\n          "legendConfig": {\r\n            "direction": "column",\r\n            "position": "bottom",\r\n            "sortDataKeys": false,\r\n            "showMin": false,\r\n            "showMax": false,\r\n            "showAvg": false,\r\n            "showTotal": true\r\n          }\r\n        },\r\n        "row": 0,\r\n        "col": 0,\r\n        "id": "00006bc3-8a8d-b55e-ed39-e318f1bcd090"\r\n      },\r\n      "5f5ca59c-e507-5301-5910-7ad8cd34df40": {\r\n        "isSystemType": true,\r\n        "bundleAlias": "charts",\r\n        "typeAlias": "timeseries_bars_flot",\r\n        "type": "timeseries",\r\n        "title": "New widget",\r\n        "sizeX": 8,\r\n        "sizeY": 5,\r\n        "config": {\r\n          "datasources": [\r\n            {\r\n              "type": "entity",\r\n              "name": null,\r\n              "entityAliasId": "40193437-33ac-3172-eefd-0b08eb849062",\r\n              "filterId": null,\r\n              "dataKeys": [\r\n                {\r\n                  "name": "jsExecutionCountHourly",\r\n                  "type": "timeseries",\r\n                  "label": "{i18n:api-usage.javascript-executions}",\r\n                  "color": "#ff9900",\r\n                  "settings": {\r\n                    "excludeFromStacking": false,\r\n                    "hideDataByDefault": false,\r\n                    "disableDataHiding": false,\r\n                    "removeFromLegend": false,\r\n                    "showLines": false,\r\n                    "fillLines": false,\r\n                    "showPoints": false,\r\n                    "showPointShape": "circle",\r\n                    "pointShapeFormatter": "",\r\n                    "showPointsLineWidth": 5,\r\n                    "showPointsRadius": 3,\r\n                    "showSeparateAxis": false,\r\n                    "axisPosition": "left",\r\n                    "thresholds": [\r\n                      {\r\n                        "thresholdValueSource": "predefinedValue"\r\n                      }\r\n                    ],\r\n                    "comparisonSettings": {\r\n                      "showValuesForComparison": true\r\n                    }\r\n                  },\r\n                  "_hash": 0.0661644137210089,\r\n                  "units": null,\r\n                  "decimals": null,\r\n                  "funcBody": null,\r\n                  "usePostProcessing": null,\r\n                  "postFuncBody": null\r\n                }\r\n              ]\r\n            }\r\n          ],\r\n          "timewindow": {\r\n            "hideInterval": false,\r\n            "hideAggregation": false,\r\n            "hideAggInterval": false,\r\n            "selectedTab": 1,\r\n            "history": {\r\n              "historyType": 0,\r\n              "timewindowMs": 2592000000,\r\n              "interval": 86400000\r\n            },\r\n            "aggregation": {\r\n              "type": "SUM",\r\n              "limit": 1000\r\n            }\r\n          },\r\n          "showTitle": true,\r\n          "backgroundColor": "#fff",\r\n          "color": "rgba(0, 0, 0, 0.87)",\r\n          "padding": "8px",\r\n          "settings": {\r\n            "shadowSize": 4,\r\n            "fontColor": "#545454",\r\n            "fontSize": 10,\r\n            "xaxis": {\r\n              "showLabels": true,\r\n              "color": "#545454"\r\n            },\r\n            "yaxis": {\r\n              "showLabels": true,\r\n              "color": "#545454",\r\n              "min": 0,\r\n              "tickDecimals": 0,\r\n              "ticksFormatter": "var rounder = Math.pow(10, 1);\\nvar powers = [\\n  {key: \'Q\', value: Math.pow(10, 15)},\\n  {key: \'T\', value: Math.pow(10, 12)},\\n  {key: \'B\', value: Math.pow(10, 9)},\\n  {key: \'M\', value: Math.pow(10, 6)},\\n  {key: \'K\', value: 1000}\\n];\\n\\nvar key = \'\';\\n\\nfor (var i = 0; i < powers.length; i++) {\\n    var reduced = value / powers[i].value;\\n    reduced = Math.round(reduced * rounder) / rounder;\\n    if (reduced >= 1) {\\n        value = reduced;\\n        key = powers[i].key;\\n        break;\\n    }\\n}\\nreturn value + key;"\r\n            },\r\n            "grid": {\r\n              "color": "#545454",\r\n              "tickColor": "#DDDDDD",\r\n              "verticalLines": true,\r\n              "horizontalLines": true,\r\n              "outlineWidth": 1\r\n            },\r\n            "stack": false,\r\n            "tooltipIndividual": false,\r\n            "defaultBarWidth": 1800000,\r\n            "barAlignment": "left",\r\n            "timeForComparison": "months",\r\n            "xaxisSecond": {\r\n              "axisPosition": "top",\r\n              "showLabels": true\r\n            }\r\n          },\r\n          "title": "{i18n:api-usage.javascript-functions-daily-activity}",\r\n          "dropShadow": true,\r\n          "enableFullscreen": true,\r\n          "titleStyle": {\r\n            "fontSize": "16px",\r\n            "fontWeight": 400\r\n          },\r\n          "widgetStyle": {},\r\n          "useDashboardTimewindow": false,\r\n          "showLegend": true,\r\n          "actions": {},\r\n          "displayTimewindow": true,\r\n          "showTitleIcon": false,\r\n          "iconColor": "rgba(0, 0, 0, 0.87)",\r\n          "iconSize": "24px",\r\n          "titleTooltip": "",\r\n          "legendConfig": {\r\n            "direction": "column",\r\n            "position": "bottom",\r\n            "sortDataKeys": false,\r\n            "showMin": false,\r\n            "showMax": false,\r\n            "showAvg": false,\r\n            "showTotal": true\r\n          }\r\n        },\r\n        "row": 0,\r\n        "col": 0,\r\n        "id": "5f5ca59c-e507-5301-5910-7ad8cd34df40"\r\n      },\r\n      "ada32ee9-44ed-48d1-c368-fd0c94b7607f": {\r\n        "isSystemType": true,\r\n        "bundleAlias": "charts",\r\n        "typeAlias": "timeseries_bars_flot",\r\n        "type": "timeseries",\r\n        "title": "New widget",\r\n        "sizeX": 8,\r\n        "sizeY": 5,\r\n        "config": {\r\n          "datasources": [\r\n            {\r\n              "type": "entity",\r\n              "name": null,\r\n              "entityAliasId": "40193437-33ac-3172-eefd-0b08eb849062",\r\n              "filterId": null,\r\n              "dataKeys": [\r\n                {\r\n                  "name": "jsExecutionCount",\r\n                  "type": "timeseries",\r\n                  "label": "{i18n:api-usage.javascript-executions}",\r\n                  "color": "#ff9900",\r\n                  "settings": {\r\n                    "excludeFromStacking": false,\r\n                    "hideDataByDefault": false,\r\n                    "disableDataHiding": false,\r\n                    "removeFromLegend": false,\r\n                    "showLines": false,\r\n                    "fillLines": false,\r\n                    "showPoints": false,\r\n                    "showPointShape": "circle",\r\n                    "pointShapeFormatter": "",\r\n                    "showPointsLineWidth": 5,\r\n                    "showPointsRadius": 3,\r\n                    "showSeparateAxis": false,\r\n                    "axisPosition": "left",\r\n                    "thresholds": [\r\n                      {\r\n                        "thresholdValueSource": "predefinedValue"\r\n                      }\r\n                    ],\r\n                    "comparisonSettings": {\r\n                      "showValuesForComparison": true\r\n                    }\r\n                  },\r\n                  "_hash": 0.0661644137210089,\r\n                  "units": null,\r\n                  "decimals": null,\r\n                  "funcBody": null,\r\n                  "usePostProcessing": null,\r\n                  "postFuncBody": null\r\n                }\r\n              ]\r\n            }\r\n          ],\r\n          "timewindow": {\r\n            "hideInterval": false,\r\n            "hideAggregation": false,\r\n            "hideAggInterval": false,\r\n            "selectedTab": 1,\r\n            "history": {\r\n              "historyType": 0,\r\n              "timewindowMs": 31536000000,\r\n              "interval": 1000\r\n            },\r\n            "aggregation": {\r\n              "type": "NONE",\r\n              "limit": 1000\r\n            }\r\n          },\r\n          "showTitle": true,\r\n          "backgroundColor": "#fff",\r\n          "color": "rgba(0, 0, 0, 0.87)",\r\n          "padding": "8px",\r\n          "settings": {\r\n            "shadowSize": 4,\r\n            "fontColor": "#545454",\r\n            "fontSize": 10,\r\n            "xaxis": {\r\n              "showLabels": true,\r\n              "color": "#545454"\r\n            },\r\n            "yaxis": {\r\n              "showLabels": true,\r\n              "color": "#545454",\r\n              "min": 0,\r\n              "tickDecimals": 0,\r\n              "ticksFormatter": "var rounder = Math.pow(10, 1);\\nvar powers = [\\n  {key: \'Q\', value: Math.pow(10, 15)},\\n  {key: \'T\', value: Math.pow(10, 12)},\\n  {key: \'B\', value: Math.pow(10, 9)},\\n  {key: \'M\', value: Math.pow(10, 6)},\\n  {key: \'K\', value: 1000}\\n];\\n\\nvar key = \'\';\\n\\nfor (var i = 0; i < powers.length; i++) {\\n    var reduced = value / powers[i].value;\\n    reduced = Math.round(reduced * rounder) / rounder;\\n    if (reduced >= 1) {\\n        value = reduced;\\n        key = powers[i].key;\\n        break;\\n    }\\n}\\nreturn value + key;"\r\n            },\r\n            "grid": {\r\n              "color": "#545454",\r\n              "tickColor": "#DDDDDD",\r\n              "verticalLines": true,\r\n              "horizontalLines": true,\r\n              "outlineWidth": 1\r\n            },\r\n            "stack": false,\r\n            "tooltipIndividual": false,\r\n            "defaultBarWidth": 900000000,\r\n            "barAlignment": "left",\r\n            "timeForComparison": "months",\r\n            "xaxisSecond": {\r\n              "axisPosition": "top",\r\n              "showLabels": true\r\n            }\r\n          },\r\n          "title": "{i18n:api-usage.javascript-functions-monthly-activity}",\r\n          "dropShadow": true,\r\n          "enableFullscreen": true,\r\n          "titleStyle": {\r\n            "fontSize": "16px",\r\n            "fontWeight": 400\r\n          },\r\n          "widgetStyle": {},\r\n          "useDashboardTimewindow": false,\r\n          "showLegend": true,\r\n          "actions": {},\r\n          "displayTimewindow": true,\r\n          "showTitleIcon": false,\r\n          "iconColor": "rgba(0, 0, 0, 0.87)",\r\n          "iconSize": "24px",\r\n          "titleTooltip": "",\r\n          "legendConfig": {\r\n            "direction": "column",\r\n            "position": "bottom",\r\n            "sortDataKeys": false,\r\n            "showMin": false,\r\n            "showMax": false,\r\n            "showAvg": false,\r\n            "showTotal": true\r\n          }\r\n        },\r\n        "row": 0,\r\n        "col": 0,\r\n        "id": "ada32ee9-44ed-48d1-c368-fd0c94b7607f"\r\n      },\r\n      "98bae68b-0f35-72f2-a428-9b06889f1554": {\r\n        "isSystemType": true,\r\n        "bundleAlias": "charts",\r\n        "typeAlias": "timeseries_bars_flot",\r\n        "type": "timeseries",\r\n        "title": "New widget",\r\n        "sizeX": 8,\r\n        "sizeY": 5,\r\n        "config": {\r\n          "datasources": [\r\n            {\r\n              "type": "entity",\r\n              "name": null,\r\n              "entityAliasId": "40193437-33ac-3172-eefd-0b08eb849062",\r\n              "filterId": null,\r\n              "dataKeys": [\r\n                {\r\n                  "name": "transportMsgCountHourly",\r\n                  "type": "timeseries",\r\n                  "label": "{i18n:api-usage.transport-messages}",\r\n                  "color": "#2196f3",\r\n                  "settings": {\r\n                    "excludeFromStacking": false,\r\n                    "hideDataByDefault": false,\r\n                    "disableDataHiding": false,\r\n                    "removeFromLegend": false,\r\n                    "showLines": false,\r\n                    "fillLines": false,\r\n                    "showPoints": false,\r\n                    "showPointShape": "circle",\r\n                    "pointShapeFormatter": "",\r\n                    "showPointsLineWidth": 5,\r\n                    "showPointsRadius": 3,\r\n                    "showSeparateAxis": false,\r\n                    "axisPosition": "left",\r\n                    "thresholds": [\r\n                      {\r\n                        "thresholdValueSource": "predefinedValue"\r\n                      }\r\n                    ],\r\n                    "comparisonSettings": {\r\n                      "showValuesForComparison": true\r\n                    }\r\n                  },\r\n                  "_hash": 0.0661644137210089,\r\n                  "units": null,\r\n                  "decimals": null,\r\n                  "funcBody": null,\r\n                  "usePostProcessing": null,\r\n                  "postFuncBody": null\r\n                },\r\n                {\r\n                  "name": "transportDataPointsCountHourly",\r\n                  "type": "timeseries",\r\n                  "label": "{i18n:api-usage.transport-data-points}",\r\n                  "color": "#4caf50",\r\n                  "settings": {\r\n                    "excludeFromStacking": false,\r\n                    "hideDataByDefault": false,\r\n                    "disableDataHiding": false,\r\n                    "removeFromLegend": false,\r\n                    "showLines": false,\r\n                    "fillLines": false,\r\n                    "showPoints": false,\r\n                    "showPointShape": "circle",\r\n                    "pointShapeFormatter": "",\r\n                    "showPointsLineWidth": 5,\r\n                    "showPointsRadius": 3,\r\n                    "showSeparateAxis": false,\r\n                    "axisPosition": "left",\r\n                    "thresholds": [\r\n                      {\r\n                        "thresholdValueSource": "predefinedValue"\r\n                      }\r\n                    ],\r\n                    "comparisonSettings": {\r\n                      "showValuesForComparison": true\r\n                    }\r\n                  },\r\n                  "_hash": 0.46849996721308895,\r\n                  "units": null,\r\n                  "decimals": null,\r\n                  "funcBody": null,\r\n                  "usePostProcessing": null,\r\n                  "postFuncBody": null\r\n                }\r\n              ]\r\n            }\r\n          ],\r\n          "timewindow": {\r\n            "hideInterval": false,\r\n            "hideAggregation": false,\r\n            "hideAggInterval": false,\r\n            "selectedTab": 1,\r\n            "history": {\r\n              "historyType": 0,\r\n              "timewindowMs": 2592000000,\r\n              "interval": 86400000\r\n            },\r\n            "aggregation": {\r\n              "type": "SUM",\r\n              "limit": 1000\r\n            }\r\n          },\r\n          "showTitle": true,\r\n          "backgroundColor": "#fff",\r\n          "color": "rgba(0, 0, 0, 0.87)",\r\n          "padding": "8px",\r\n          "settings": {\r\n            "shadowSize": 4,\r\n            "fontColor": "#545454",\r\n            "fontSize": 10,\r\n            "xaxis": {\r\n              "showLabels": true,\r\n              "color": "#545454"\r\n            },\r\n            "yaxis": {\r\n              "showLabels": true,\r\n              "color": "#545454",\r\n              "ticksFormatter": "var rounder = Math.pow(10, 1);\\nvar powers = [\\n  {key: \'Q\', value: Math.pow(10, 15)},\\n  {key: \'T\', value: Math.pow(10, 12)},\\n  {key: \'B\', value: Math.pow(10, 9)},\\n  {key: \'M\', value: Math.pow(10, 6)},\\n  {key: \'K\', value: 1000}\\n];\\n\\nvar key = \'\';\\n\\nfor (var i = 0; i < powers.length; i++) {\\n    var reduced = value / powers[i].value;\\n    reduced = Math.round(reduced * rounder) / rounder;\\n    if (reduced >= 1) {\\n        value = reduced;\\n        key = powers[i].key;\\n        break;\\n    }\\n}\\nreturn value + key;",\r\n              "min": 0,\r\n              "tickDecimals": 0\r\n            },\r\n            "grid": {\r\n              "color": "#545454",\r\n              "tickColor": "#DDDDDD",\r\n              "verticalLines": true,\r\n              "horizontalLines": true,\r\n              "outlineWidth": 1\r\n            },\r\n            "stack": true,\r\n            "tooltipIndividual": false,\r\n            "defaultBarWidth": 1800000,\r\n            "barAlignment": "left",\r\n            "timeForComparison": "months",\r\n            "xaxisSecond": {\r\n              "axisPosition": "top",\r\n              "showLabels": true\r\n            },\r\n            "tooltipCumulative": false\r\n          },\r\n          "title": "{i18n:api-usage.transport-daily-activity}",\r\n          "dropShadow": true,\r\n          "enableFullscreen": true,\r\n          "titleStyle": {\r\n            "fontSize": "16px",\r\n            "fontWeight": 400\r\n          },\r\n          "widgetStyle": {},\r\n          "useDashboardTimewindow": false,\r\n          "showLegend": true,\r\n          "actions": {},\r\n          "displayTimewindow": true,\r\n          "showTitleIcon": false,\r\n          "iconColor": "rgba(0, 0, 0, 0.87)",\r\n          "iconSize": "24px",\r\n          "titleTooltip": "",\r\n          "legendConfig": {\r\n            "direction": "column",\r\n            "position": "bottom",\r\n            "sortDataKeys": false,\r\n            "showMin": false,\r\n            "showMax": false,\r\n            "showAvg": false,\r\n            "showTotal": true\r\n          }\r\n        },\r\n        "row": 0,\r\n        "col": 0,\r\n        "id": "98bae68b-0f35-72f2-a428-9b06889f1554"\r\n      },\r\n      "e61e5477-5a09-cc25-966b-f613d81da833": {\r\n        "isSystemType": true,\r\n        "bundleAlias": "charts",\r\n        "typeAlias": "timeseries_bars_flot",\r\n        "type": "timeseries",\r\n        "title": "New widget",\r\n        "sizeX": 8,\r\n        "sizeY": 5,\r\n        "config": {\r\n          "datasources": [\r\n            {\r\n              "type": "entity",\r\n              "name": null,\r\n              "entityAliasId": "40193437-33ac-3172-eefd-0b08eb849062",\r\n              "filterId": null,\r\n              "dataKeys": [\r\n                {\r\n                  "name": "transportMsgCount",\r\n                  "type": "timeseries",\r\n                  "label": "{i18n:api-usage.transport-messages}",\r\n                  "color": "#2196f3",\r\n                  "settings": {\r\n                    "excludeFromStacking": false,\r\n                    "hideDataByDefault": false,\r\n                    "disableDataHiding": false,\r\n                    "removeFromLegend": false,\r\n                    "showLines": false,\r\n                    "fillLines": false,\r\n                    "showPoints": false,\r\n                    "showPointShape": "circle",\r\n                    "pointShapeFormatter": "",\r\n                    "showPointsLineWidth": 5,\r\n                    "showPointsRadius": 3,\r\n                    "showSeparateAxis": false,\r\n                    "axisPosition": "left",\r\n                    "thresholds": [\r\n                      {\r\n                        "thresholdValueSource": "predefinedValue"\r\n                      }\r\n                    ],\r\n                    "comparisonSettings": {\r\n                      "showValuesForComparison": true\r\n                    }\r\n                  },\r\n                  "_hash": 0.0661644137210089,\r\n                  "units": null,\r\n                  "decimals": null,\r\n                  "funcBody": null,\r\n                  "usePostProcessing": null,\r\n                  "postFuncBody": null\r\n                },\r\n                {\r\n                  "name": "transportDataPointsCount",\r\n                  "type": "timeseries",\r\n                  "label": "{i18n:api-usage.transport-data-points}",\r\n                  "color": "#4caf50",\r\n                  "settings": {\r\n                    "excludeFromStacking": false,\r\n                    "hideDataByDefault": false,\r\n                    "disableDataHiding": false,\r\n                    "removeFromLegend": false,\r\n                    "showLines": false,\r\n                    "fillLines": false,\r\n                    "showPoints": false,\r\n                    "showPointShape": "circle",\r\n                    "pointShapeFormatter": "",\r\n                    "showPointsLineWidth": 5,\r\n                    "showPointsRadius": 3,\r\n                    "showSeparateAxis": false,\r\n                    "axisPosition": "left",\r\n                    "thresholds": [\r\n                      {\r\n                        "thresholdValueSource": "predefinedValue"\r\n                      }\r\n                    ],\r\n                    "comparisonSettings": {\r\n                      "showValuesForComparison": true\r\n                    }\r\n                  },\r\n                  "_hash": 0.46849996721308895,\r\n                  "units": null,\r\n                  "decimals": null,\r\n                  "funcBody": null,\r\n                  "usePostProcessing": null,\r\n                  "postFuncBody": null\r\n                }\r\n              ]\r\n            }\r\n          ],\r\n          "timewindow": {\r\n            "hideInterval": false,\r\n            "hideAggregation": false,\r\n            "hideAggInterval": false,\r\n            "selectedTab": 1,\r\n            "history": {\r\n              "historyType": 0,\r\n              "timewindowMs": 31536000000,\r\n              "interval": 2592000000\r\n            },\r\n            "aggregation": {\r\n              "type": "NONE",\r\n              "limit": 1000\r\n            }\r\n          },\r\n          "showTitle": true,\r\n          "backgroundColor": "#fff",\r\n          "color": "rgba(0, 0, 0, 0.87)",\r\n          "padding": "8px",\r\n          "settings": {\r\n            "shadowSize": 4,\r\n            "fontColor": "#545454",\r\n            "fontSize": 10,\r\n            "xaxis": {\r\n              "showLabels": true,\r\n              "color": "#545454"\r\n            },\r\n            "yaxis": {\r\n              "showLabels": true,\r\n              "color": "#545454",\r\n              "ticksFormatter": "var rounder = Math.pow(10, 1);\\nvar powers = [\\n  {key: \'Q\', value: Math.pow(10, 15)},\\n  {key: \'T\', value: Math.pow(10, 12)},\\n  {key: \'B\', value: Math.pow(10, 9)},\\n  {key: \'M\', value: Math.pow(10, 6)},\\n  {key: \'K\', value: 1000}\\n];\\n\\nvar key = \'\';\\n\\nfor (var i = 0; i < powers.length; i++) {\\n    var reduced = value / powers[i].value;\\n    reduced = Math.round(reduced * rounder) / rounder;\\n    if (reduced >= 1) {\\n        value = reduced;\\n        key = powers[i].key;\\n        break;\\n    }\\n}\\nreturn value + key;",\r\n              "min": 0,\r\n              "tickDecimals": 0\r\n            },\r\n            "grid": {\r\n              "color": "#545454",\r\n              "tickColor": "#DDDDDD",\r\n              "verticalLines": true,\r\n              "horizontalLines": true,\r\n              "outlineWidth": 1\r\n            },\r\n            "stack": true,\r\n            "tooltipIndividual": false,\r\n            "defaultBarWidth": 900000000,\r\n            "barAlignment": "left",\r\n            "timeForComparison": "months",\r\n            "xaxisSecond": {\r\n              "axisPosition": "top",\r\n              "showLabels": true\r\n            },\r\n            "tooltipCumulative": false\r\n          },\r\n          "title": "{i18n:api-usage.transport-monthly-activity}",\r\n          "dropShadow": true,\r\n          "enableFullscreen": true,\r\n          "titleStyle": {\r\n            "fontSize": "16px",\r\n            "fontWeight": 400\r\n          },\r\n          "widgetStyle": {},\r\n          "useDashboardTimewindow": false,\r\n          "showLegend": true,\r\n          "actions": {},\r\n          "displayTimewindow": true,\r\n          "showTitleIcon": false,\r\n          "iconColor": "rgba(0, 0, 0, 0.87)",\r\n          "iconSize": "24px",\r\n          "titleTooltip": "",\r\n          "legendConfig": {\r\n            "direction": "column",\r\n            "position": "bottom",\r\n            "sortDataKeys": false,\r\n            "showMin": false,\r\n            "showMax": false,\r\n            "showAvg": false,\r\n            "showTotal": true\r\n          }\r\n        },\r\n        "row": 0,\r\n        "col": 0,\r\n        "id": "e61e5477-5a09-cc25-966b-f613d81da833"\r\n      },\r\n      "85fe0738-5326-f069-ab3f-30594bde5fed": {\r\n        "isSystemType": true,\r\n        "bundleAlias": "charts",\r\n        "typeAlias": "timeseries_bars_flot",\r\n        "type": "timeseries",\r\n        "title": "New widget",\r\n        "sizeX": 8,\r\n        "sizeY": 5,\r\n        "config": {\r\n          "datasources": [\r\n            {\r\n              "type": "entity",\r\n              "name": null,\r\n              "entityAliasId": "40193437-33ac-3172-eefd-0b08eb849062",\r\n              "filterId": null,\r\n              "dataKeys": [\r\n                {\r\n                  "name": "storageDataPointsCountHourly",\r\n                  "type": "timeseries",\r\n                  "label": "{i18n:api-usage.data-points-storage-days}",\r\n                  "color": "#1039ee",\r\n                  "settings": {\r\n                    "excludeFromStacking": false,\r\n                    "hideDataByDefault": false,\r\n                    "disableDataHiding": false,\r\n                    "removeFromLegend": false,\r\n                    "showLines": false,\r\n                    "fillLines": false,\r\n                    "showPoints": false,\r\n                    "showPointShape": "circle",\r\n                    "pointShapeFormatter": "",\r\n                    "showPointsLineWidth": 5,\r\n                    "showPointsRadius": 3,\r\n                    "showSeparateAxis": false,\r\n                    "axisPosition": "left",\r\n                    "thresholds": [\r\n                      {\r\n                        "thresholdValueSource": "predefinedValue"\r\n                      }\r\n                    ],\r\n                    "comparisonSettings": {\r\n                      "showValuesForComparison": true\r\n                    }\r\n                  },\r\n                  "_hash": 0.0661644137210089,\r\n                  "units": null,\r\n                  "decimals": null,\r\n                  "funcBody": null,\r\n                  "usePostProcessing": null,\r\n                  "postFuncBody": null\r\n                }\r\n              ]\r\n            }\r\n          ],\r\n          "timewindow": {\r\n            "hideInterval": false,\r\n            "hideAggregation": false,\r\n            "hideAggInterval": false,\r\n            "selectedTab": 1,\r\n            "history": {\r\n              "historyType": 0,\r\n              "timewindowMs": 2592000000,\r\n              "interval": 86400000\r\n            },\r\n            "aggregation": {\r\n              "type": "SUM",\r\n              "limit": 1000\r\n            }\r\n          },\r\n          "showTitle": true,\r\n          "backgroundColor": "#fff",\r\n          "color": "rgba(0, 0, 0, 0.87)",\r\n          "padding": "8px",\r\n          "settings": {\r\n            "shadowSize": 4,\r\n            "fontColor": "#545454",\r\n            "fontSize": 10,\r\n            "xaxis": {\r\n              "showLabels": true,\r\n              "color": "#545454"\r\n            },\r\n            "yaxis": {\r\n              "showLabels": true,\r\n              "color": "#545454",\r\n              "min": 0,\r\n              "tickDecimals": 0,\r\n              "ticksFormatter": "var rounder = Math.pow(10, 1);\\nvar powers = [\\n  {key: \'Q\', value: Math.pow(10, 15)},\\n  {key: \'T\', value: Math.pow(10, 12)},\\n  {key: \'B\', value: Math.pow(10, 9)},\\n  {key: \'M\', value: Math.pow(10, 6)},\\n  {key: \'K\', value: 1000}\\n];\\n\\nvar key = \'\';\\n\\nfor (var i = 0; i < powers.length; i++) {\\n    var reduced = value / powers[i].value;\\n    reduced = Math.round(reduced * rounder) / rounder;\\n    if (reduced >= 1) {\\n        value = reduced;\\n        key = powers[i].key;\\n        break;\\n    }\\n}\\nreturn value + key;"\r\n            },\r\n            "grid": {\r\n              "color": "#545454",\r\n              "tickColor": "#DDDDDD",\r\n              "verticalLines": true,\r\n              "horizontalLines": true,\r\n              "outlineWidth": 1\r\n            },\r\n            "stack": false,\r\n            "tooltipIndividual": false,\r\n            "defaultBarWidth": 1800000,\r\n            "barAlignment": "left",\r\n            "timeForComparison": "months",\r\n            "xaxisSecond": {\r\n              "axisPosition": "top",\r\n              "showLabels": true\r\n            }\r\n          },\r\n          "title": "{i18n:api-usage.telemetry-persistence-daily-activity}",\r\n          "dropShadow": true,\r\n          "enableFullscreen": true,\r\n          "titleStyle": {\r\n            "fontSize": "16px",\r\n            "fontWeight": 400\r\n          },\r\n          "widgetStyle": {},\r\n          "useDashboardTimewindow": false,\r\n          "showLegend": true,\r\n          "actions": {},\r\n          "displayTimewindow": true,\r\n          "showTitleIcon": false,\r\n          "iconColor": "rgba(0, 0, 0, 0.87)",\r\n          "iconSize": "24px",\r\n          "titleTooltip": "",\r\n          "legendConfig": {\r\n            "direction": "column",\r\n            "position": "bottom",\r\n            "sortDataKeys": false,\r\n            "showMin": false,\r\n            "showMax": false,\r\n            "showAvg": false,\r\n            "showTotal": true\r\n          }\r\n        },\r\n        "row": 0,\r\n        "col": 0,\r\n        "id": "85fe0738-5326-f069-ab3f-30594bde5fed"\r\n      },\r\n      "eaeb381a-437e-f6e9-60c9-6bc8826fdd44": {\r\n        "isSystemType": true,\r\n        "bundleAlias": "charts",\r\n        "typeAlias": "timeseries_bars_flot",\r\n        "type": "timeseries",\r\n        "title": "New widget",\r\n        "sizeX": 8,\r\n        "sizeY": 5,\r\n        "config": {\r\n          "datasources": [\r\n            {\r\n              "type": "entity",\r\n              "name": null,\r\n              "entityAliasId": "40193437-33ac-3172-eefd-0b08eb849062",\r\n              "filterId": null,\r\n              "dataKeys": [\r\n                {\r\n                  "name": "storageDataPointsCount",\r\n                  "type": "timeseries",\r\n                  "label": "{i18n:api-usage.data-points-storage-days}",\r\n                  "color": "#1039ee",\r\n                  "settings": {\r\n                    "excludeFromStacking": false,\r\n                    "hideDataByDefault": false,\r\n                    "disableDataHiding": false,\r\n                    "removeFromLegend": false,\r\n                    "showLines": false,\r\n                    "fillLines": false,\r\n                    "showPoints": false,\r\n                    "showPointShape": "circle",\r\n                    "pointShapeFormatter": "",\r\n                    "showPointsLineWidth": 5,\r\n                    "showPointsRadius": 3,\r\n                    "showSeparateAxis": false,\r\n                    "axisPosition": "left",\r\n                    "thresholds": [\r\n                      {\r\n                        "thresholdValueSource": "predefinedValue"\r\n                      }\r\n                    ],\r\n                    "comparisonSettings": {\r\n                      "showValuesForComparison": true\r\n                    }\r\n                  },\r\n                  "_hash": 0.0661644137210089,\r\n                  "units": null,\r\n                  "decimals": null,\r\n                  "funcBody": null,\r\n                  "usePostProcessing": null,\r\n                  "postFuncBody": null\r\n                }\r\n              ]\r\n            }\r\n          ],\r\n          "timewindow": {\r\n            "hideInterval": false,\r\n            "hideAggregation": false,\r\n            "hideAggInterval": false,\r\n            "selectedTab": 1,\r\n            "history": {\r\n              "historyType": 0,\r\n              "timewindowMs": 31536000000,\r\n              "interval": 1000\r\n            },\r\n            "aggregation": {\r\n              "type": "NONE",\r\n              "limit": 1000\r\n            }\r\n          },\r\n          "showTitle": true,\r\n          "backgroundColor": "#fff",\r\n          "color": "rgba(0, 0, 0, 0.87)",\r\n          "padding": "8px",\r\n          "settings": {\r\n            "shadowSize": 4,\r\n            "fontColor": "#545454",\r\n            "fontSize": 10,\r\n            "xaxis": {\r\n              "showLabels": true,\r\n              "color": "#545454"\r\n            },\r\n            "yaxis": {\r\n              "showLabels": true,\r\n              "color": "#545454",\r\n              "min": 0,\r\n              "tickDecimals": 0,\r\n              "ticksFormatter": "var rounder = Math.pow(10, 1);\\nvar powers = [\\n  {key: \'Q\', value: Math.pow(10, 15)},\\n  {key: \'T\', value: Math.pow(10, 12)},\\n  {key: \'B\', value: Math.pow(10, 9)},\\n  {key: \'M\', value: Math.pow(10, 6)},\\n  {key: \'K\', value: 1000}\\n];\\n\\nvar key = \'\';\\n\\nfor (var i = 0; i < powers.length; i++) {\\n    var reduced = value / powers[i].value;\\n    reduced = Math.round(reduced * rounder) / rounder;\\n    if (reduced >= 1) {\\n        value = reduced;\\n        key = powers[i].key;\\n        break;\\n    }\\n}\\nreturn value + key;"\r\n            },\r\n            "grid": {\r\n              "color": "#545454",\r\n              "tickColor": "#DDDDDD",\r\n              "verticalLines": true,\r\n              "horizontalLines": true,\r\n              "outlineWidth": 1\r\n            },\r\n            "stack": false,\r\n            "tooltipIndividual": false,\r\n            "defaultBarWidth": 900000000,\r\n            "barAlignment": "left",\r\n            "timeForComparison": "months",\r\n            "xaxisSecond": {\r\n              "axisPosition": "top",\r\n              "showLabels": true\r\n            }\r\n          },\r\n          "title": "{i18n:api-usage.telemetry-persistence-monthly-activity}",\r\n          "dropShadow": true,\r\n          "enableFullscreen": true,\r\n          "titleStyle": {\r\n            "fontSize": "16px",\r\n            "fontWeight": 400\r\n          },\r\n          "widgetStyle": {},\r\n          "useDashboardTimewindow": false,\r\n          "showLegend": true,\r\n          "actions": {},\r\n          "displayTimewindow": true,\r\n          "showTitleIcon": false,\r\n          "iconColor": "rgba(0, 0, 0, 0.87)",\r\n          "iconSize": "24px",\r\n          "titleTooltip": "",\r\n          "legendConfig": {\r\n            "direction": "column",\r\n            "position": "bottom",\r\n            "sortDataKeys": false,\r\n            "showMin": false,\r\n            "showMax": false,\r\n            "showAvg": false,\r\n            "showTotal": true\r\n          }\r\n        },\r\n        "row": 0,\r\n        "col": 0,\r\n        "id": "eaeb381a-437e-f6e9-60c9-6bc8826fdd44"\r\n      },\r\n      "4b798823-b97d-9d6a-59dc-fcafd897fc23": {\r\n        "isSystemType": true,\r\n        "bundleAlias": "charts",\r\n        "typeAlias": "timeseries_bars_flot",\r\n        "type": "timeseries",\r\n        "title": "New widget",\r\n        "sizeX": 8,\r\n        "sizeY": 5,\r\n        "config": {\r\n          "datasources": [\r\n            {\r\n              "type": "entity",\r\n              "name": null,\r\n              "entityAliasId": "40193437-33ac-3172-eefd-0b08eb849062",\r\n              "filterId": null,\r\n              "dataKeys": [\r\n                {\r\n                  "name": "emailCountHourly",\r\n                  "type": "timeseries",\r\n                  "label": "{i18n:api-usage.email-messages}",\r\n                  "color": "#d35a00",\r\n                  "settings": {\r\n                    "excludeFromStacking": false,\r\n                    "hideDataByDefault": false,\r\n                    "disableDataHiding": false,\r\n                    "removeFromLegend": false,\r\n                    "showLines": false,\r\n                    "fillLines": false,\r\n                    "showPoints": false,\r\n                    "showPointShape": "circle",\r\n                    "pointShapeFormatter": "",\r\n                    "showPointsLineWidth": 5,\r\n                    "showPointsRadius": 3,\r\n                    "showSeparateAxis": false,\r\n                    "axisPosition": "left",\r\n                    "thresholds": [\r\n                      {\r\n                        "thresholdValueSource": "predefinedValue"\r\n                      }\r\n                    ],\r\n                    "comparisonSettings": {\r\n                      "showValuesForComparison": true\r\n                    }\r\n                  },\r\n                  "_hash": 0.0661644137210089,\r\n                  "units": null,\r\n                  "decimals": null,\r\n                  "funcBody": null,\r\n                  "usePostProcessing": null,\r\n                  "postFuncBody": null\r\n                }\r\n              ]\r\n            }\r\n          ],\r\n          "timewindow": {\r\n            "hideInterval": false,\r\n            "hideAggregation": false,\r\n            "hideAggInterval": false,\r\n            "selectedTab": 1,\r\n            "history": {\r\n              "historyType": 0,\r\n              "timewindowMs": 2592000000,\r\n              "interval": 86400000\r\n            },\r\n            "aggregation": {\r\n              "type": "SUM",\r\n              "limit": 1000\r\n            }\r\n          },\r\n          "showTitle": true,\r\n          "backgroundColor": "#fff",\r\n          "color": "rgba(0, 0, 0, 0.87)",\r\n          "padding": "8px",\r\n          "settings": {\r\n            "shadowSize": 4,\r\n            "fontColor": "#545454",\r\n            "fontSize": 10,\r\n            "xaxis": {\r\n              "showLabels": true,\r\n              "color": "#545454"\r\n            },\r\n            "yaxis": {\r\n              "showLabels": true,\r\n              "color": "#545454",\r\n              "min": 0,\r\n              "tickDecimals": 0,\r\n              "ticksFormatter": "var rounder = Math.pow(10, 1);\\nvar powers = [\\n  {key: \'Q\', value: Math.pow(10, 15)},\\n  {key: \'T\', value: Math.pow(10, 12)},\\n  {key: \'B\', value: Math.pow(10, 9)},\\n  {key: \'M\', value: Math.pow(10, 6)},\\n  {key: \'K\', value: 1000}\\n];\\n\\nvar key = \'\';\\n\\nfor (var i = 0; i < powers.length; i++) {\\n    var reduced = value / powers[i].value;\\n    reduced = Math.round(reduced * rounder) / rounder;\\n    if (reduced >= 1) {\\n        value = reduced;\\n        key = powers[i].key;\\n        break;\\n    }\\n}\\nreturn value + key;"\r\n            },\r\n            "grid": {\r\n              "color": "#545454",\r\n              "tickColor": "#DDDDDD",\r\n              "verticalLines": true,\r\n              "horizontalLines": true,\r\n              "outlineWidth": 1\r\n            },\r\n            "stack": false,\r\n            "tooltipIndividual": false,\r\n            "defaultBarWidth": 1800000,\r\n            "barAlignment": "left",\r\n            "timeForComparison": "months",\r\n            "xaxisSecond": {\r\n              "axisPosition": "top",\r\n              "showLabels": true\r\n            }\r\n          },\r\n          "title": "{i18n:api-usage.email-messages-daily-activity}",\r\n          "dropShadow": true,\r\n          "enableFullscreen": true,\r\n          "titleStyle": {\r\n            "fontSize": "16px",\r\n            "fontWeight": 400\r\n          },\r\n          "widgetStyle": {},\r\n          "useDashboardTimewindow": false,\r\n          "showLegend": true,\r\n          "actions": {},\r\n          "displayTimewindow": true,\r\n          "showTitleIcon": false,\r\n          "iconColor": "rgba(0, 0, 0, 0.87)",\r\n          "iconSize": "24px",\r\n          "titleTooltip": "",\r\n          "legendConfig": {\r\n            "direction": "column",\r\n            "position": "bottom",\r\n            "sortDataKeys": false,\r\n            "showMin": false,\r\n            "showMax": false,\r\n            "showAvg": false,\r\n            "showTotal": true\r\n          }\r\n        },\r\n        "row": 0,\r\n        "col": 0,\r\n        "id": "4b798823-b97d-9d6a-59dc-fcafd897fc23"\r\n      },\r\n      "6a981580-7490-19dd-f937-b64cbf67a982": {\r\n        "isSystemType": true,\r\n        "bundleAlias": "charts",\r\n        "typeAlias": "timeseries_bars_flot",\r\n        "type": "timeseries",\r\n        "title": "New widget",\r\n        "sizeX": 8,\r\n        "sizeY": 5,\r\n        "config": {\r\n          "datasources": [\r\n            {\r\n              "type": "entity",\r\n              "name": null,\r\n              "entityAliasId": "40193437-33ac-3172-eefd-0b08eb849062",\r\n              "filterId": null,\r\n              "dataKeys": [\r\n                {\r\n                  "name": "emailCount",\r\n                  "type": "timeseries",\r\n                  "label": "{i18n:api-usage.email-messages}",\r\n                  "color": "#d35a00",\r\n                  "settings": {\r\n                    "excludeFromStacking": false,\r\n                    "hideDataByDefault": false,\r\n                    "disableDataHiding": false,\r\n                    "removeFromLegend": false,\r\n                    "showLines": false,\r\n                    "fillLines": false,\r\n                    "showPoints": false,\r\n                    "showPointShape": "circle",\r\n                    "pointShapeFormatter": "",\r\n                    "showPointsLineWidth": 5,\r\n                    "showPointsRadius": 3,\r\n                    "showSeparateAxis": false,\r\n                    "axisPosition": "left",\r\n                    "thresholds": [\r\n                      {\r\n                        "thresholdValueSource": "predefinedValue"\r\n                      }\r\n                    ],\r\n                    "comparisonSettings": {\r\n                      "showValuesForComparison": true\r\n                    }\r\n                  },\r\n                  "_hash": 0.0661644137210089,\r\n                  "units": null,\r\n                  "decimals": null,\r\n                  "funcBody": null,\r\n                  "usePostProcessing": null,\r\n                  "postFuncBody": null\r\n                }\r\n              ]\r\n            }\r\n          ],\r\n          "timewindow": {\r\n            "hideInterval": false,\r\n            "hideAggregation": false,\r\n            "hideAggInterval": false,\r\n            "selectedTab": 1,\r\n            "history": {\r\n              "historyType": 0,\r\n              "timewindowMs": 31536000000,\r\n              "interval": 1000\r\n            },\r\n            "aggregation": {\r\n              "type": "NONE",\r\n              "limit": 1000\r\n            }\r\n          },\r\n          "showTitle": true,\r\n          "backgroundColor": "#fff",\r\n          "color": "rgba(0, 0, 0, 0.87)",\r\n          "padding": "8px",\r\n          "settings": {\r\n            "shadowSize": 4,\r\n            "fontColor": "#545454",\r\n            "fontSize": 10,\r\n            "xaxis": {\r\n              "showLabels": true,\r\n              "color": "#545454"\r\n            },\r\n            "yaxis": {\r\n              "showLabels": true,\r\n              "color": "#545454",\r\n              "min": 0,\r\n              "tickDecimals": 0,\r\n              "ticksFormatter": "var rounder = Math.pow(10, 1);\\nvar powers = [\\n  {key: \'Q\', value: Math.pow(10, 15)},\\n  {key: \'T\', value: Math.pow(10, 12)},\\n  {key: \'B\', value: Math.pow(10, 9)},\\n  {key: \'M\', value: Math.pow(10, 6)},\\n  {key: \'K\', value: 1000}\\n];\\n\\nvar key = \'\';\\n\\nfor (var i = 0; i < powers.length; i++) {\\n    var reduced = value / powers[i].value;\\n    reduced = Math.round(reduced * rounder) / rounder;\\n    if (reduced >= 1) {\\n        value = reduced;\\n        key = powers[i].key;\\n        break;\\n    }\\n}\\nreturn value + key;"\r\n            },\r\n            "grid": {\r\n              "color": "#545454",\r\n              "tickColor": "#DDDDDD",\r\n              "verticalLines": true,\r\n              "horizontalLines": true,\r\n              "outlineWidth": 1\r\n            },\r\n            "stack": false,\r\n            "tooltipIndividual": false,\r\n            "defaultBarWidth": 900000000,\r\n            "barAlignment": "left",\r\n            "timeForComparison": "months",\r\n            "xaxisSecond": {\r\n              "axisPosition": "top",\r\n              "showLabels": true\r\n            }\r\n          },\r\n          "title": "{i18n:api-usage.sms-messages-monthly-activity}",\r\n          "dropShadow": true,\r\n          "enableFullscreen": true,\r\n          "titleStyle": {\r\n            "fontSize": "16px",\r\n            "fontWeight": 400\r\n          },\r\n          "widgetStyle": {},\r\n          "useDashboardTimewindow": false,\r\n          "showLegend": true,\r\n          "actions": {},\r\n          "displayTimewindow": true,\r\n          "showTitleIcon": false,\r\n          "iconColor": "rgba(0, 0, 0, 0.87)",\r\n          "iconSize": "24px",\r\n          "titleTooltip": "",\r\n          "legendConfig": {\r\n            "direction": "column",\r\n            "position": "bottom",\r\n            "sortDataKeys": false,\r\n            "showMin": false,\r\n            "showMax": false,\r\n            "showAvg": false,\r\n            "showTotal": true\r\n          }\r\n        },\r\n        "row": 0,\r\n        "col": 0,\r\n        "id": "6a981580-7490-19dd-f937-b64cbf67a982"\r\n      },\r\n      "7302df65-1b0c-579e-bbdb-145126ae3392": {\r\n        "isSystemType": true,\r\n        "bundleAlias": "charts",\r\n        "typeAlias": "timeseries_bars_flot",\r\n        "type": "timeseries",\r\n        "title": "New widget",\r\n        "sizeX": 8,\r\n        "sizeY": 5,\r\n        "config": {\r\n          "datasources": [\r\n            {\r\n              "type": "entity",\r\n              "name": null,\r\n              "entityAliasId": "40193437-33ac-3172-eefd-0b08eb849062",\r\n              "filterId": null,\r\n              "dataKeys": [\r\n                {\r\n                  "name": "smsCountHourly",\r\n                  "type": "timeseries",\r\n                  "label": "{i18n:api-usage.sms-messages}",\r\n                  "color": "#f36021",\r\n                  "settings": {\r\n                    "excludeFromStacking": false,\r\n                    "hideDataByDefault": false,\r\n                    "disableDataHiding": false,\r\n                    "removeFromLegend": false,\r\n                    "showLines": false,\r\n                    "fillLines": false,\r\n                    "showPoints": false,\r\n                    "showPointShape": "circle",\r\n                    "pointShapeFormatter": "",\r\n                    "showPointsLineWidth": 5,\r\n                    "showPointsRadius": 3,\r\n                    "showSeparateAxis": false,\r\n                    "axisPosition": "left",\r\n                    "thresholds": [\r\n                      {\r\n                        "thresholdValueSource": "predefinedValue"\r\n                      }\r\n                    ],\r\n                    "comparisonSettings": {\r\n                      "showValuesForComparison": true\r\n                    }\r\n                  },\r\n                  "_hash": 0.0661644137210089,\r\n                  "units": null,\r\n                  "decimals": null,\r\n                  "funcBody": null,\r\n                  "usePostProcessing": null,\r\n                  "postFuncBody": null\r\n                }\r\n              ]\r\n            }\r\n          ],\r\n          "timewindow": {\r\n            "hideInterval": false,\r\n            "hideAggregation": false,\r\n            "hideAggInterval": false,\r\n            "selectedTab": 1,\r\n            "history": {\r\n              "historyType": 0,\r\n              "timewindowMs": 2592000000,\r\n              "interval": 86400000\r\n            },\r\n            "aggregation": {\r\n              "type": "SUM",\r\n              "limit": 1000\r\n            }\r\n          },\r\n          "showTitle": true,\r\n          "backgroundColor": "#fff",\r\n          "color": "rgba(0, 0, 0, 0.87)",\r\n          "padding": "8px",\r\n          "settings": {\r\n            "shadowSize": 4,\r\n            "fontColor": "#545454",\r\n            "fontSize": 10,\r\n            "xaxis": {\r\n              "showLabels": true,\r\n              "color": "#545454"\r\n            },\r\n            "yaxis": {\r\n              "showLabels": true,\r\n              "color": "#545454",\r\n              "min": 0,\r\n              "tickDecimals": 0,\r\n              "ticksFormatter": "var rounder = Math.pow(10, 1);\\nvar powers = [\\n  {key: \'Q\', value: Math.pow(10, 15)},\\n  {key: \'T\', value: Math.pow(10, 12)},\\n  {key: \'B\', value: Math.pow(10, 9)},\\n  {key: \'M\', value: Math.pow(10, 6)},\\n  {key: \'K\', value: 1000}\\n];\\n\\nvar key = \'\';\\n\\nfor (var i = 0; i < powers.length; i++) {\\n    var reduced = value / powers[i].value;\\n    reduced = Math.round(reduced * rounder) / rounder;\\n    if (reduced >= 1) {\\n        value = reduced;\\n        key = powers[i].key;\\n        break;\\n    }\\n}\\nreturn value + key;"\r\n            },\r\n            "grid": {\r\n              "color": "#545454",\r\n              "tickColor": "#DDDDDD",\r\n              "verticalLines": true,\r\n              "horizontalLines": true,\r\n              "outlineWidth": 1\r\n            },\r\n            "stack": false,\r\n            "tooltipIndividual": false,\r\n            "defaultBarWidth": 1800000,\r\n            "barAlignment": "left",\r\n            "timeForComparison": "months",\r\n            "xaxisSecond": {\r\n              "axisPosition": "top",\r\n              "showLabels": true\r\n            }\r\n          },\r\n          "title": "{i18n:api-usage.sms-messages-daily-activity}",\r\n          "dropShadow": true,\r\n          "enableFullscreen": true,\r\n          "titleStyle": {\r\n            "fontSize": "16px",\r\n            "fontWeight": 400\r\n          },\r\n          "widgetStyle": {},\r\n          "useDashboardTimewindow": false,\r\n          "showLegend": true,\r\n          "actions": {},\r\n          "displayTimewindow": true,\r\n          "showTitleIcon": false,\r\n          "iconColor": "rgba(0, 0, 0, 0.87)",\r\n          "iconSize": "24px",\r\n          "titleTooltip": "",\r\n          "legendConfig": {\r\n            "direction": "column",\r\n            "position": "bottom",\r\n            "sortDataKeys": false,\r\n            "showMin": false,\r\n            "showMax": false,\r\n            "showAvg": false,\r\n            "showTotal": true\r\n          }\r\n        },\r\n        "row": 0,\r\n        "col": 0,\r\n        "id": "7302df65-1b0c-579e-bbdb-145126ae3392"\r\n      },\r\n      "fdb385e7-14fe-fc9f-ebdc-b400f26fc66b": {\r\n        "isSystemType": true,\r\n        "bundleAlias": "charts",\r\n        "typeAlias": "timeseries_bars_flot",\r\n        "type": "timeseries",\r\n        "title": "New widget",\r\n        "sizeX": 8,\r\n        "sizeY": 5,\r\n        "config": {\r\n          "datasources": [\r\n            {\r\n              "type": "entity",\r\n              "name": null,\r\n              "entityAliasId": "40193437-33ac-3172-eefd-0b08eb849062",\r\n              "filterId": null,\r\n              "dataKeys": [\r\n                {\r\n                  "name": "smsCount",\r\n                  "type": "timeseries",\r\n                  "label": "{i18n:api-usage.sms-messages}",\r\n                  "color": "#f36021",\r\n                  "settings": {\r\n                    "excludeFromStacking": false,\r\n                    "hideDataByDefault": false,\r\n                    "disableDataHiding": false,\r\n                    "removeFromLegend": false,\r\n                    "showLines": false,\r\n                    "fillLines": false,\r\n                    "showPoints": false,\r\n                    "showPointShape": "circle",\r\n                    "pointShapeFormatter": "",\r\n                    "showPointsLineWidth": 5,\r\n                    "showPointsRadius": 3,\r\n                    "showSeparateAxis": false,\r\n                    "axisPosition": "left",\r\n                    "thresholds": [\r\n                      {\r\n                        "thresholdValueSource": "predefinedValue"\r\n                      }\r\n                    ],\r\n                    "comparisonSettings": {\r\n                      "showValuesForComparison": true\r\n                    }\r\n                  },\r\n                  "_hash": 0.0661644137210089,\r\n                  "units": null,\r\n                  "decimals": null,\r\n                  "funcBody": null,\r\n                  "usePostProcessing": null,\r\n                  "postFuncBody": null\r\n                }\r\n              ]\r\n            }\r\n          ],\r\n          "timewindow": {\r\n            "hideInterval": false,\r\n            "hideAggregation": false,\r\n            "hideAggInterval": false,\r\n            "selectedTab": 1,\r\n            "history": {\r\n              "historyType": 0,\r\n              "timewindowMs": 31536000000,\r\n              "interval": 1000\r\n            },\r\n            "aggregation": {\r\n              "type": "NONE",\r\n              "limit": 1000\r\n            }\r\n          },\r\n          "showTitle": true,\r\n          "backgroundColor": "#fff",\r\n          "color": "rgba(0, 0, 0, 0.87)",\r\n          "padding": "8px",\r\n          "settings": {\r\n            "shadowSize": 4,\r\n            "fontColor": "#545454",\r\n            "fontSize": 10,\r\n            "xaxis": {\r\n              "showLabels": true,\r\n              "color": "#545454"\r\n            },\r\n            "yaxis": {\r\n              "showLabels": true,\r\n              "color": "#545454",\r\n              "min": 0,\r\n              "tickDecimals": 0,\r\n              "ticksFormatter": "var rounder = Math.pow(10, 1);\\nvar powers = [\\n  {key: \'Q\', value: Math.pow(10, 15)},\\n  {key: \'T\', value: Math.pow(10, 12)},\\n  {key: \'B\', value: Math.pow(10, 9)},\\n  {key: \'M\', value: Math.pow(10, 6)},\\n  {key: \'K\', value: 1000}\\n];\\n\\nvar key = \'\';\\n\\nfor (var i = 0; i < powers.length; i++) {\\n    var reduced = value / powers[i].value;\\n    reduced = Math.round(reduced * rounder) / rounder;\\n    if (reduced >= 1) {\\n        value = reduced;\\n        key = powers[i].key;\\n        break;\\n    }\\n}\\nreturn value + key;"\r\n            },\r\n            "grid": {\r\n              "color": "#545454",\r\n              "tickColor": "#DDDDDD",\r\n              "verticalLines": true,\r\n              "horizontalLines": true,\r\n              "outlineWidth": 1\r\n            },\r\n            "stack": false,\r\n            "tooltipIndividual": false,\r\n            "defaultBarWidth": 900000000,\r\n            "barAlignment": "left",\r\n            "timeForComparison": "months",\r\n            "xaxisSecond": {\r\n              "axisPosition": "top",\r\n              "showLabels": true\r\n            }\r\n          },\r\n          "title": "{i18n:api-usage.sms-messages-monthly-activity}",\r\n          "dropShadow": true,\r\n          "enableFullscreen": true,\r\n          "titleStyle": {\r\n            "fontSize": "16px",\r\n            "fontWeight": 400\r\n          },\r\n          "widgetStyle": {},\r\n          "useDashboardTimewindow": false,\r\n          "showLegend": true,\r\n          "actions": {},\r\n          "displayTimewindow": true,\r\n          "showTitleIcon": false,\r\n          "iconColor": "rgba(0, 0, 0, 0.87)",\r\n          "iconSize": "24px",\r\n          "titleTooltip": "",\r\n          "legendConfig": {\r\n            "direction": "column",\r\n            "position": "bottom",\r\n            "sortDataKeys": false,\r\n            "showMin": false,\r\n            "showMax": false,\r\n            "showAvg": false,\r\n            "showTotal": true\r\n          }\r\n        },\r\n        "row": 0,\r\n        "col": 0,\r\n        "id": "fdb385e7-14fe-fc9f-ebdc-b400f26fc66b"\r\n      },\r\n      "2408ad30-163e-8221-08e1-a82b638be564": {\r\n        "isSystemType": true,\r\n        "bundleAlias": "charts",\r\n        "typeAlias": "basic_timeseries",\r\n        "type": "timeseries",\r\n        "title": "New widget",\r\n        "sizeX": 12,\r\n        "sizeY": 7,\r\n        "config": {\r\n          "datasources": [\r\n            {\r\n              "type": "entity",\r\n              "dataKeys": [\r\n                {\r\n                  "name": "successfulMsgs",\r\n                  "type": "timeseries",\r\n                  "label": "{i18n:api-usage.successful}",\r\n                  "color": "#4caf50",\r\n                  "settings": {\r\n                    "excludeFromStacking": false,\r\n                    "hideDataByDefault": false,\r\n                    "disableDataHiding": false,\r\n                    "removeFromLegend": false,\r\n                    "showLines": true,\r\n                    "fillLines": false,\r\n                    "showPoints": false,\r\n                    "showPointShape": "circle",\r\n                    "pointShapeFormatter": "",\r\n                    "showPointsLineWidth": 5,\r\n                    "showPointsRadius": 3,\r\n                    "showSeparateAxis": false,\r\n                    "axisPosition": "left",\r\n                    "thresholds": [\r\n                      {\r\n                        "thresholdValueSource": "predefinedValue"\r\n                      }\r\n                    ],\r\n                    "comparisonSettings": {\r\n                      "showValuesForComparison": true\r\n                    }\r\n                  },\r\n                  "_hash": 0.15490750967648736\r\n                },\r\n                {\r\n                  "name": "failedMsgs",\r\n                  "type": "timeseries",\r\n                  "label": "{i18n:api-usage.permanent-failures}",\r\n                  "color": "#ef5350",\r\n                  "settings": {\r\n                    "excludeFromStacking": false,\r\n                    "hideDataByDefault": false,\r\n                    "disableDataHiding": false,\r\n                    "removeFromLegend": false,\r\n                    "showLines": true,\r\n                    "fillLines": false,\r\n                    "showPoints": false,\r\n                    "showPointShape": "circle",\r\n                    "pointShapeFormatter": "",\r\n                    "showPointsLineWidth": 5,\r\n                    "showPointsRadius": 3,\r\n                    "showSeparateAxis": false,\r\n                    "axisPosition": "left",\r\n                    "thresholds": [\r\n                      {\r\n                        "thresholdValueSource": "predefinedValue"\r\n                      }\r\n                    ],\r\n                    "comparisonSettings": {\r\n                      "showValuesForComparison": true\r\n                    }\r\n                  },\r\n                  "_hash": 0.4186621166514697\r\n                },\r\n                {\r\n                  "name": "tmpFailed",\r\n                  "type": "timeseries",\r\n                  "label": "{i18n:api-usage.processing-failures}",\r\n                  "color": "#ffc107",\r\n                  "settings": {\r\n                    "excludeFromStacking": false,\r\n                    "hideDataByDefault": false,\r\n                    "disableDataHiding": false,\r\n                    "removeFromLegend": false,\r\n                    "showLines": true,\r\n                    "fillLines": false,\r\n                    "showPoints": false,\r\n                    "showPointShape": "circle",\r\n                    "pointShapeFormatter": "",\r\n                    "showPointsLineWidth": 5,\r\n                    "showPointsRadius": 3,\r\n                    "showSeparateAxis": false,\r\n                    "axisPosition": "left",\r\n                    "thresholds": [\r\n                      {\r\n                        "thresholdValueSource": "predefinedValue"\r\n                      }\r\n                    ],\r\n                    "comparisonSettings": {\r\n                      "showValuesForComparison": true\r\n                    }\r\n                  },\r\n                  "_hash": 0.49891007198715376\r\n                }\r\n              ],\r\n              "entityAliasId": "2e4c97b0-257a-a1b9-690c-141d9bf2ec6f"\r\n            }\r\n          ],\r\n          "timewindow": {\r\n            "hideInterval": false,\r\n            "hideAggregation": false,\r\n            "hideAggInterval": false,\r\n            "selectedTab": 0,\r\n            "realtime": {\r\n              "timewindowMs": 3600000,\r\n              "interval": 1000\r\n            },\r\n            "aggregation": {\r\n              "type": "NONE",\r\n              "limit": 10000\r\n            }\r\n          },\r\n          "showTitle": true,\r\n          "backgroundColor": "#fff",\r\n          "color": "rgba(0, 0, 0, 0.87)",\r\n          "padding": "8px",\r\n          "settings": {\r\n            "shadowSize": 4,\r\n            "fontColor": "#545454",\r\n            "fontSize": 10,\r\n            "xaxis": {\r\n              "showLabels": true,\r\n              "color": "#545454"\r\n            },\r\n            "yaxis": {\r\n              "showLabels": true,\r\n              "color": "#545454",\r\n              "min": 0,\r\n              "tickDecimals": 0,\r\n              "ticksFormatter": "var rounder = Math.pow(10, 1);\\nvar powers = [\\n  {key: \'Q\', value: Math.pow(10, 15)},\\n  {key: \'T\', value: Math.pow(10, 12)},\\n  {key: \'B\', value: Math.pow(10, 9)},\\n  {key: \'M\', value: Math.pow(10, 6)},\\n  {key: \'K\', value: 1000}\\n];\\n\\nvar key = \'\';\\n\\nfor (var i = 0; i < powers.length; i++) {\\n    var reduced = value / powers[i].value;\\n    reduced = Math.round(reduced * rounder) / rounder;\\n    if (reduced >= 1) {\\n        value = reduced;\\n        key = powers[i].key;\\n        break;\\n    }\\n}\\nreturn value + key;"\r\n            },\r\n            "grid": {\r\n              "color": "#545454",\r\n              "tickColor": "#DDDDDD",\r\n              "verticalLines": true,\r\n              "horizontalLines": true,\r\n              "outlineWidth": 1\r\n            },\r\n            "stack": false,\r\n            "tooltipIndividual": false,\r\n            "timeForComparison": "months",\r\n            "xaxisSecond": {\r\n              "axisPosition": "top",\r\n              "showLabels": true\r\n            }\r\n          },\r\n          "title": "Queue Stats",\r\n          "dropShadow": true,\r\n          "enableFullscreen": true,\r\n          "titleStyle": {\r\n            "fontSize": "16px",\r\n            "fontWeight": 400\r\n          },\r\n          "mobileHeight": null,\r\n          "showTitleIcon": false,\r\n          "titleIcon": null,\r\n          "iconColor": "rgba(0, 0, 0, 0.87)",\r\n          "iconSize": "24px",\r\n          "titleTooltip": "",\r\n          "widgetStyle": {},\r\n          "useDashboardTimewindow": false,\r\n          "displayTimewindow": true,\r\n          "showLegend": true,\r\n          "actions": {},\r\n          "legendConfig": {\r\n            "direction": "column",\r\n            "position": "bottom",\r\n            "showMin": true,\r\n            "showMax": true,\r\n            "showAvg": false,\r\n            "showTotal": true\r\n          }\r\n        },\r\n        "id": "2408ad30-163e-8221-08e1-a82b638be564"\r\n      },\r\n      "e43dcfe1-b970-6a11-ce0e-5769f3eb5e88": {\r\n        "isSystemType": true,\r\n        "bundleAlias": "charts",\r\n        "typeAlias": "basic_timeseries",\r\n        "type": "timeseries",\r\n        "title": "New widget",\r\n        "sizeX": 12,\r\n        "sizeY": 7,\r\n        "config": {\r\n          "datasources": [\r\n            {\r\n              "type": "entity",\r\n              "dataKeys": [\r\n                {\r\n                  "name": "timeoutMsgs",\r\n                  "type": "timeseries",\r\n                  "label": "{i18n:api-usage.permanent-timeouts}",\r\n                  "color": "#4caf50",\r\n                  "settings": {\r\n                    "excludeFromStacking": false,\r\n                    "hideDataByDefault": false,\r\n                    "disableDataHiding": false,\r\n                    "removeFromLegend": false,\r\n                    "showLines": true,\r\n                    "fillLines": false,\r\n                    "showPoints": false,\r\n                    "showPointShape": "circle",\r\n                    "pointShapeFormatter": "",\r\n                    "showPointsLineWidth": 5,\r\n                    "showPointsRadius": 3,\r\n                    "showSeparateAxis": false,\r\n                    "axisPosition": "left",\r\n                    "thresholds": [\r\n                      {\r\n                        "thresholdValueSource": "predefinedValue"\r\n                      }\r\n                    ],\r\n                    "comparisonSettings": {\r\n                      "showValuesForComparison": true\r\n                    }\r\n                  },\r\n                  "_hash": 0.565222981550328\r\n                },\r\n                {\r\n                  "name": "tmpTimeout",\r\n                  "type": "timeseries",\r\n                  "label": "{i18n:api-usage.processing-timeouts}",\r\n                  "color": "#9c27b0",\r\n                  "settings": {\r\n                    "excludeFromStacking": false,\r\n                    "hideDataByDefault": false,\r\n                    "disableDataHiding": false,\r\n                    "removeFromLegend": false,\r\n                    "showLines": true,\r\n                    "fillLines": false,\r\n                    "showPoints": false,\r\n                    "showPointShape": "circle",\r\n                    "pointShapeFormatter": "",\r\n                    "showPointsLineWidth": 5,\r\n                    "showPointsRadius": 3,\r\n                    "showSeparateAxis": false,\r\n                    "axisPosition": "left",\r\n                    "thresholds": [\r\n                      {\r\n                        "thresholdValueSource": "predefinedValue"\r\n                      }\r\n                    ],\r\n                    "comparisonSettings": {\r\n                      "showValuesForComparison": true\r\n                    }\r\n                  },\r\n                  "_hash": 0.2679547062508352\r\n                }\r\n              ],\r\n              "entityAliasId": "2e4c97b0-257a-a1b9-690c-141d9bf2ec6f"\r\n            }\r\n          ],\r\n          "timewindow": {\r\n            "hideInterval": false,\r\n            "hideAggregation": false,\r\n            "hideAggInterval": false,\r\n            "selectedTab": 0,\r\n            "realtime": {\r\n              "timewindowMs": 3600000,\r\n              "interval": 1000\r\n            },\r\n            "aggregation": {\r\n              "type": "NONE",\r\n              "limit": 10000\r\n            }\r\n          },\r\n          "showTitle": true,\r\n          "backgroundColor": "#fff",\r\n          "color": "rgba(0, 0, 0, 0.87)",\r\n          "padding": "8px",\r\n          "settings": {\r\n            "shadowSize": 4,\r\n            "fontColor": "#545454",\r\n            "fontSize": 10,\r\n            "xaxis": {\r\n              "showLabels": true,\r\n              "color": "#545454"\r\n            },\r\n            "yaxis": {\r\n              "showLabels": true,\r\n              "color": "#545454",\r\n              "min": 0,\r\n              "tickDecimals": 0,\r\n              "ticksFormatter": "var rounder = Math.pow(10, 1);\\nvar powers = [\\n  {key: \'Q\', value: Math.pow(10, 15)},\\n  {key: \'T\', value: Math.pow(10, 12)},\\n  {key: \'B\', value: Math.pow(10, 9)},\\n  {key: \'M\', value: Math.pow(10, 6)},\\n  {key: \'K\', value: 1000}\\n];\\n\\nvar key = \'\';\\n\\nfor (var i = 0; i < powers.length; i++) {\\n    var reduced = value / powers[i].value;\\n    reduced = Math.round(reduced * rounder) / rounder;\\n    if (reduced >= 1) {\\n        value = reduced;\\n        key = powers[i].key;\\n        break;\\n    }\\n}\\nreturn value + key;"\r\n            },\r\n            "grid": {\r\n              "color": "#545454",\r\n              "tickColor": "#DDDDDD",\r\n              "verticalLines": true,\r\n              "horizontalLines": true,\r\n              "outlineWidth": 1\r\n            },\r\n            "stack": false,\r\n            "tooltipIndividual": false,\r\n            "timeForComparison": "months",\r\n            "xaxisSecond": {\r\n              "axisPosition": "top",\r\n              "showLabels": true\r\n            }\r\n          },\r\n          "title": "Processing Failures and Timeouts",\r\n          "dropShadow": true,\r\n          "enableFullscreen": true,\r\n          "titleStyle": {\r\n            "fontSize": "16px",\r\n            "fontWeight": 400\r\n          },\r\n          "mobileHeight": null,\r\n          "showTitleIcon": false,\r\n          "titleIcon": null,\r\n          "iconColor": "rgba(0, 0, 0, 0.87)",\r\n          "iconSize": "24px",\r\n          "titleTooltip": "",\r\n          "widgetStyle": {},\r\n          "useDashboardTimewindow": false,\r\n          "displayTimewindow": true,\r\n          "showLegend": true,\r\n          "actions": {},\r\n          "legendConfig": {\r\n            "direction": "column",\r\n            "position": "bottom",\r\n            "showMin": true,\r\n            "showMax": true,\r\n            "showAvg": false,\r\n            "showTotal": true\r\n          }\r\n        },\r\n        "id": "e43dcfe1-b970-6a11-ce0e-5769f3eb5e88"\r\n      },\r\n      "a669cf86-e715-efa4-dd9a-b839abf499e9": {\r\n        "isSystemType": true,\r\n        "bundleAlias": "cards",\r\n        "typeAlias": "timeseries_table",\r\n        "type": "timeseries",\r\n        "title": "New widget",\r\n        "sizeX": 24,\r\n        "sizeY": 5,\r\n        "config": {\r\n          "datasources": [\r\n            {\r\n              "type": "entity",\r\n              "dataKeys": [\r\n                {\r\n                  "name": "ruleEngineException",\r\n                  "type": "timeseries",\r\n                  "label": "Rule Chain",\r\n                  "color": "#2196f3",\r\n                  "settings": {\r\n                    "useCellStyleFunction": false,\r\n                    "useCellContentFunction": true,\r\n                    "cellContentFunction": "return JSON.parse(value).ruleChainName;"\r\n                  },\r\n                  "_hash": 0.9954481282345906\r\n                },\r\n                {\r\n                  "name": "ruleEngineException",\r\n                  "type": "timeseries",\r\n                  "label": "Rule Node",\r\n                  "color": "#4caf50",\r\n                  "settings": {\r\n                    "useCellStyleFunction": false,\r\n                    "useCellContentFunction": true,\r\n                    "cellContentFunction": "return JSON.parse(value).ruleNodeName;"\r\n                  },\r\n                  "_hash": 0.18580357036589978\r\n                },\r\n                {\r\n                  "name": "ruleEngineException",\r\n                  "type": "timeseries",\r\n                  "label": "Latest Error",\r\n                  "color": "#f44336",\r\n                  "settings": {\r\n                    "useCellStyleFunction": false,\r\n                    "useCellContentFunction": true,\r\n                    "cellContentFunction": "return JSON.parse(value).message;"\r\n                  },\r\n                  "_hash": 0.7255162989552142\r\n                }\r\n              ],\r\n              "entityAliasId": "2e4c97b0-257a-a1b9-690c-141d9bf2ec6f"\r\n            }\r\n          ],\r\n          "timewindow": {\r\n            "hideInterval": false,\r\n            "hideAggregation": false,\r\n            "hideAggInterval": false,\r\n            "selectedTab": 0,\r\n            "realtime": {\r\n              "timewindowMs": 2592000000,\r\n              "interval": 1000\r\n            },\r\n            "aggregation": {\r\n              "type": "NONE",\r\n              "limit": 1000\r\n            }\r\n          },\r\n          "showTitle": true,\r\n          "backgroundColor": "rgb(255, 255, 255)",\r\n          "color": "rgba(0, 0, 0, 0.87)",\r\n          "padding": "8px",\r\n          "settings": {\r\n            "showTimestamp": true,\r\n            "displayPagination": true,\r\n            "defaultPageSize": 10\r\n          },\r\n          "title": "Exceptions",\r\n          "dropShadow": true,\r\n          "enableFullscreen": true,\r\n          "titleStyle": {\r\n            "fontSize": "16px",\r\n            "fontWeight": 400\r\n          },\r\n          "useDashboardTimewindow": false,\r\n          "showLegend": false,\r\n          "widgetStyle": {},\r\n          "actions": {},\r\n          "showTitleIcon": false,\r\n          "titleIcon": null,\r\n          "iconColor": "rgba(0, 0, 0, 0.87)",\r\n          "iconSize": "24px",\r\n          "titleTooltip": "",\r\n          "displayTimewindow": true\r\n        },\r\n        "id": "a669cf86-e715-efa4-dd9a-b839abf499e9"\r\n      }\r\n    },\r\n    "states": {\r\n      "default": {\r\n        "name": "{i18n:api-usage.api-usage}",\r\n        "root": true,\r\n        "layouts": {\r\n          "main": {\r\n            "widgets": {\r\n              "fd6df872-2ddf-0921-3929-2e7f55062fad": {\r\n                "sizeX": 4,\r\n                "sizeY": 2,\r\n                "row": 0,\r\n                "col": 8,\r\n                "mobileHeight": 3\r\n              },\r\n              "7e235874-461b-e7c2-2fdd-d8762a020773": {\r\n                "sizeX": 4,\r\n                "sizeY": 2,\r\n                "row": 0,\r\n                "col": 12,\r\n                "mobileHeight": 3\r\n              },\r\n              "08545554-a0e8-05c7-66df-6000cfeff8a4": {\r\n                "sizeX": 4,\r\n                "sizeY": 2,\r\n                "row": 0,\r\n                "col": 4,\r\n                "mobileHeight": 3\r\n              },\r\n              "a245c67e-53ec-d299-fa89-69fe2062ccb2": {\r\n                "sizeX": 4,\r\n                "sizeY": 2,\r\n                "row": 0,\r\n                "col": 0,\r\n                "mobileHeight": 3\r\n              },\r\n              "a151ae60-0326-6116-d818-9070dda8e9c7": {\r\n                "sizeX": 4,\r\n                "sizeY": 2,\r\n                "row": 0,\r\n                "col": 16,\r\n                "mobileHeight": 3\r\n              },\r\n              "2503a391-5692-0614-85e6-f179c5ee0dc9": {\r\n                "sizeX": 4,\r\n                "sizeY": 2,\r\n                "row": 0,\r\n                "col": 20,\r\n                "mobileHeight": 3\r\n              },\r\n              "68e16e98-0420-f72c-4848-41dedffd3904": {\r\n                "sizeX": 8,\r\n                "sizeY": 4,\r\n                "row": 2,\r\n                "col": 8\r\n              },\r\n              "2aa6b499-6e27-b315-6833-89c4d58485ce": {\r\n                "sizeX": 8,\r\n                "sizeY": 4,\r\n                "row": 2,\r\n                "col": 0\r\n              },\r\n              "d890cea3-fba0-6474-9a21-fa780230dc62": {\r\n                "sizeX": 8,\r\n                "sizeY": 4,\r\n                "row": 2,\r\n                "col": 16\r\n              },\r\n              "84b6cfa5-1449-e0f2-3560-f810d2dd7ead": {\r\n                "sizeX": 8,\r\n                "sizeY": 4,\r\n                "row": 6,\r\n                "col": 0\r\n              },\r\n              "d296b566-a000-7402-ae9d-c815381c5435": {\r\n                "sizeX": 8,\r\n                "sizeY": 4,\r\n                "row": 6,\r\n                "col": 8\r\n              },\r\n              "00a02464-9509-911b-3b5e-21fb37629822": {\r\n                "sizeX": 8,\r\n                "sizeY": 4,\r\n                "row": 6,\r\n                "col": 16\r\n              }\r\n            },\r\n            "gridSettings": {\r\n              "backgroundColor": "#eeeeee",\r\n              "color": "rgba(0,0,0,0.870588)",\r\n              "columns": 24,\r\n              "margin": 5,\r\n              "backgroundSizeMode": "100%",\r\n              "autoFillHeight": true,\r\n              "backgroundImageUrl": null,\r\n              "mobileAutoFillHeight": false,\r\n              "mobileRowHeight": 70\r\n            }\r\n          }\r\n        }\r\n      },\r\n      "transport": {\r\n        "name": "{i18n:api-usage.transport}",\r\n        "root": false,\r\n        "layouts": {\r\n          "main": {\r\n            "widgets": {\r\n              "98bae68b-0f35-72f2-a428-9b06889f1554": {\r\n                "sizeX": 24,\r\n                "sizeY": 6,\r\n                "row": 0,\r\n                "col": 0\r\n              },\r\n              "e61e5477-5a09-cc25-966b-f613d81da833": {\r\n                "sizeX": 24,\r\n                "sizeY": 6,\r\n                "row": 6,\r\n                "col": 0\r\n              }\r\n            },\r\n            "gridSettings": {\r\n              "backgroundColor": "#eeeeee",\r\n              "color": "rgba(0,0,0,0.870588)",\r\n              "columns": 24,\r\n              "margin": 10,\r\n              "backgroundSizeMode": "100%",\r\n              "autoFillHeight": true,\r\n              "backgroundImageUrl": null,\r\n              "mobileAutoFillHeight": false,\r\n              "mobileRowHeight": 70\r\n            }\r\n          }\r\n        }\r\n      },\r\n      "rule_engine_execution": {\r\n        "name": "{i18n:api-usage.rule-engine-executions}",\r\n        "root": false,\r\n        "layouts": {\r\n          "main": {\r\n            "widgets": {\r\n              "74199074-7873-6c6a-2a51-3fc614769f03": {\r\n                "sizeX": 24,\r\n                "sizeY": 6,\r\n                "row": 0,\r\n                "col": 0\r\n              },\r\n              "00006bc3-8a8d-b55e-ed39-e318f1bcd090": {\r\n                "sizeX": 24,\r\n                "sizeY": 6,\r\n                "row": 6,\r\n                "col": 0\r\n              }\r\n            },\r\n            "gridSettings": {\r\n              "backgroundColor": "#eeeeee",\r\n              "color": "rgba(0,0,0,0.870588)",\r\n              "columns": 24,\r\n              "margin": 10,\r\n              "backgroundSizeMode": "100%",\r\n              "autoFillHeight": true,\r\n              "backgroundImageUrl": null,\r\n              "mobileAutoFillHeight": false,\r\n              "mobileRowHeight": 70\r\n            }\r\n          }\r\n        }\r\n      },\r\n      "javascript_functions": {\r\n        "name": "{i18n:api-usage.javascript-functions}",\r\n        "root": false,\r\n        "layouts": {\r\n          "main": {\r\n            "widgets": {\r\n              "5f5ca59c-e507-5301-5910-7ad8cd34df40": {\r\n                "sizeX": 24,\r\n                "sizeY": 6,\r\n                "row": 0,\r\n                "col": 0\r\n              },\r\n              "ada32ee9-44ed-48d1-c368-fd0c94b7607f": {\r\n                "sizeX": 24,\r\n                "sizeY": 6,\r\n                "row": 6,\r\n                "col": 0\r\n              }\r\n            },\r\n            "gridSettings": {\r\n              "backgroundColor": "#eeeeee",\r\n              "color": "rgba(0,0,0,0.870588)",\r\n              "columns": 24,\r\n              "margin": 10,\r\n              "backgroundSizeMode": "100%",\r\n              "autoFillHeight": true,\r\n              "backgroundImageUrl": null,\r\n              "mobileAutoFillHeight": false,\r\n              "mobileRowHeight": 70\r\n            }\r\n          }\r\n        }\r\n      },\r\n      "telemetry_persistence": {\r\n        "name": "{i18n:api-usage.telemetry-persistence}",\r\n        "root": false,\r\n        "layouts": {\r\n          "main": {\r\n            "widgets": {\r\n              "85fe0738-5326-f069-ab3f-30594bde5fed": {\r\n                "sizeX": 24,\r\n                "sizeY": 6,\r\n                "row": 0,\r\n                "col": 0\r\n              },\r\n              "eaeb381a-437e-f6e9-60c9-6bc8826fdd44": {\r\n                "sizeX": 24,\r\n                "sizeY": 6,\r\n                "row": 6,\r\n                "col": 0\r\n              }\r\n            },\r\n            "gridSettings": {\r\n              "backgroundColor": "#eeeeee",\r\n              "color": "rgba(0,0,0,0.870588)",\r\n              "columns": 24,\r\n              "margin": 10,\r\n              "backgroundSizeMode": "100%",\r\n              "autoFillHeight": true,\r\n              "backgroundImageUrl": null,\r\n              "mobileAutoFillHeight": false,\r\n              "mobileRowHeight": 70\r\n            }\r\n          }\r\n        }\r\n      },\r\n      "email_messages": {\r\n        "name": "{i18n:api-usage.email-messages}",\r\n        "root": false,\r\n        "layouts": {\r\n          "main": {\r\n            "widgets": {\r\n              "4b798823-b97d-9d6a-59dc-fcafd897fc23": {\r\n                "sizeX": 24,\r\n                "sizeY": 6,\r\n                "row": 0,\r\n                "col": 0\r\n              },\r\n              "6a981580-7490-19dd-f937-b64cbf67a982": {\r\n                "sizeX": 24,\r\n                "sizeY": 6,\r\n                "row": 6,\r\n                "col": 0\r\n              }\r\n            },\r\n            "gridSettings": {\r\n              "backgroundColor": "#eeeeee",\r\n              "color": "rgba(0,0,0,0.870588)",\r\n              "columns": 24,\r\n              "margin": 10,\r\n              "backgroundSizeMode": "100%",\r\n              "autoFillHeight": true,\r\n              "backgroundImageUrl": null,\r\n              "mobileAutoFillHeight": false,\r\n              "mobileRowHeight": 70\r\n            }\r\n          }\r\n        }\r\n      },\r\n      "sms_messages": {\r\n        "name": "{i18n:api-usage.sms-messages}",\r\n        "root": false,\r\n        "layouts": {\r\n          "main": {\r\n            "widgets": {\r\n              "7302df65-1b0c-579e-bbdb-145126ae3392": {\r\n                "sizeX": 24,\r\n                "sizeY": 6,\r\n                "row": 0,\r\n                "col": 0\r\n              },\r\n              "fdb385e7-14fe-fc9f-ebdc-b400f26fc66b": {\r\n                "sizeX": 24,\r\n                "sizeY": 6,\r\n                "row": 6,\r\n                "col": 0\r\n              }\r\n            },\r\n            "gridSettings": {\r\n              "backgroundColor": "#eeeeee",\r\n              "color": "rgba(0,0,0,0.870588)",\r\n              "columns": 24,\r\n              "margin": 10,\r\n              "backgroundSizeMode": "100%",\r\n              "autoFillHeight": true,\r\n              "backgroundImageUrl": null,\r\n              "mobileAutoFillHeight": false,\r\n              "mobileRowHeight": 70\r\n            }\r\n          }\r\n        }\r\n      },\r\n      "rule_engine_statistics": {\r\n        "name": "{i18n:api-usage.rule-engine-statistics}",\r\n        "root": false,\r\n        "layouts": {\r\n          "main": {\r\n            "widgets": {\r\n              "2408ad30-163e-8221-08e1-a82b638be564": {\r\n                "sizeX": 12,\r\n                "sizeY": 7,\r\n                "mobileHeight": null,\r\n                "row": 0,\r\n                "col": 0\r\n              },\r\n              "e43dcfe1-b970-6a11-ce0e-5769f3eb5e88": {\r\n                "sizeX": 12,\r\n                "sizeY": 7,\r\n                "mobileHeight": null,\r\n                "row": 0,\r\n                "col": 12\r\n              },\r\n              "a669cf86-e715-efa4-dd9a-b839abf499e9": {\r\n                "sizeX": 24,\r\n                "sizeY": 5,\r\n                "row": 7,\r\n                "col": 0\r\n              }\r\n            },\r\n            "gridSettings": {\r\n              "backgroundColor": "#eeeeee",\r\n              "color": "rgba(0,0,0,0.870588)",\r\n              "columns": 24,\r\n              "margin": 10,\r\n              "backgroundSizeMode": "100%",\r\n              "autoFillHeight": true,\r\n              "backgroundImageUrl": null,\r\n              "mobileAutoFillHeight": false,\r\n              "mobileRowHeight": 70\r\n            }\r\n          }\r\n        }\r\n      }\r\n    },\r\n    "entityAliases": {\r\n      "40193437-33ac-3172-eefd-0b08eb849062": {\r\n        "id": "40193437-33ac-3172-eefd-0b08eb849062",\r\n        "alias": "Api usage state",\r\n        "filter": {\r\n          "type": "apiUsageState",\r\n          "resolveMultiple": false\r\n        }\r\n      },\r\n      "2e4c97b0-257a-a1b9-690c-141d9bf2ec6f": {\r\n        "id": "2e4c97b0-257a-a1b9-690c-141d9bf2ec6f",\r\n        "alias": "TbServiceQueues",\r\n        "filter": {\r\n          "type": "assetType",\r\n          "resolveMultiple": true,\r\n          "assetType": "TbServiceQueue",\r\n          "assetNameFilter": ""\r\n        }\r\n      }\r\n    },\r\n    "filters": {},\r\n    "timewindow": {\r\n      "hideInterval": false,\r\n      "hideAggregation": false,\r\n      "hideAggInterval": false,\r\n      "selectedTab": 0,\r\n      "realtime": {\r\n        "timewindowMs": 86400000,\r\n        "interval": 3600000\r\n      },\r\n      "aggregation": {\r\n        "type": "NONE",\r\n        "limit": 50000\r\n      }\r\n    },\r\n    "settings": {\r\n      "stateControllerId": "entity",\r\n      "showTitle": false,\r\n      "showDashboardsSelect": false,\r\n      "showEntitiesSelect": false,\r\n      "showDashboardTimewindow": false,\r\n      "showDashboardExport": false,\r\n      "toolbarAlwaysOpen": true,\r\n      "titleColor": "rgba(0,0,0,0.870588)",\r\n      "showFilters": false\r\n    }\r\n  },\r\n  "name": "Api Usage"\r\n}\r\n')},t.\u0275fac=function(e){return new(e||t)(r["\u0275\u0275directiveInject"](m.Store))},t.\u0275cmp=r["\u0275\u0275defineComponent"]({type:t,selectors:[["tb-api-usage"]],features:[r["\u0275\u0275InheritDefinitionFeature"]],decls:1,vars:2,consts:[[3,"embedded","dashboard"]],template:function(e,t){1&e&&r["\u0275\u0275element"](0,"tb-dashboard-page",0),2&e&&r["\u0275\u0275property"]("embedded",!0)("dashboard",t.apiUsageDashboard)},directives:[qt.a],styles:["[_nghost-%COMP%]{width:100%;height:100%}"]}),t}(l.a);!function(){r["\u0275setClassMetadata"](Dl,[{type:r.Component,args:[{selector:"tb-api-usage",templateUrl:"./api-usage.component.html",styleUrls:["./api-usage.component.scss"]}]}],(function(){return[{type:m.Store}]}),null)}();var Al=[{path:"usage",component:Dl,data:{auth:[$.a.TENANT_ADMIN],title:"api-usage.api-usage",breadcrumb:{label:"api-usage.api-usage",icon:"insert_chart"}}}],Pl=function(){function e(){}return e.\u0275mod=r["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=r["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[a.RouterModule.forChild(Al)],a.RouterModule]}),e}();void(("undefined"==typeof ngJitMode||ngJitMode)&&r["\u0275\u0275setNgModuleScope"](Pl,{imports:[a.RouterModule],exports:[a.RouterModule]}));var Nl=function(){function e(){}return e.\u0275mod=r["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=r["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[i.CommonModule,jt.a,Rt.a,Pl]]}),e}();void(("undefined"==typeof ngJitMode||ngJitMode)&&r["\u0275\u0275setNgModuleScope"](Nl,{declarations:[Dl],imports:[i.CommonModule,jt.a,Rt.a,Pl]}));var kl=function(){function e(){}return e.\u0275mod=r["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=r["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},providers:[{provide:Ba.MODULES_MAP,useValue:il.a}],imports:[Vt,nn,Sn,rl,wr,Fl,Xi,ea,va,zi,lo,zo,Wo,qi,Nl,Wi]}),e}();void(("undefined"==typeof ngJitMode||ngJitMode)&&r["\u0275\u0275setNgModuleScope"](kl,{exports:[Vt,nn,Sn,rl,wr,Fl,Xi,ea,va,zi,lo,zo,Wo,qi,Nl,Wi]}))},YCWy:function(e,t,n){"use strict";n.d(t,"a",(function(){return M}));var r=n("mrSG"),i=n("fXoL"),a=n("RxGS"),o=n("3Pt+"),l=n("+5dr"),s=n("U3y+"),d=n("C4fA"),c=n("vpxU"),u=n("l7P3"),p=n("tyNb"),m=n("ofXK"),f=n("bTqV"),g=n("XiUz"),h=n("kmnG"),b=n("sYmb"),y=n("qFsG"),v=n("bSwM"),x=n("TSBb"),S=["ruleNodeConfigComponent"];function w(e,t){if(1&e){var n=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"div",4),i["\u0275\u0275elementStart"](1,"button",5),i["\u0275\u0275listener"]("click",(function(e){return i["\u0275\u0275restoreView"](n),i["\u0275\u0275nextContext"]().openRuleChain(e)})),i["\u0275\u0275text"](2),i["\u0275\u0275pipe"](3,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()}2&e&&(i["\u0275\u0275advance"](2),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](3,1,"rulechain.open-rulechain")," "))}function C(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"mat-error"),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,1,"rulenode.name-required")," "))}function I(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"section"),i["\u0275\u0275elementStart"](1,"section",6),i["\u0275\u0275elementStart"](2,"mat-form-field",7),i["\u0275\u0275elementStart"](3,"mat-label",8),i["\u0275\u0275text"](4,"rulenode.name"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](5,"input",9),i["\u0275\u0275template"](6,C,3,3,"mat-error",3),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](7,"mat-checkbox",10),i["\u0275\u0275text"](8),i["\u0275\u0275pipe"](9,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](10,"tb-rule-node-config",11,12),i["\u0275\u0275elementStart"](12,"div",13),i["\u0275\u0275elementStart"](13,"mat-form-field",14),i["\u0275\u0275elementStart"](14,"mat-label",8),i["\u0275\u0275text"](15,"rulenode.description"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](16,"textarea",15),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()),2&e){var n=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](6),i["\u0275\u0275property"]("ngIf",n.ruleNodeFormGroup.get("name").hasError("required")||n.ruleNodeFormGroup.get("name").hasError("pattern")),i["\u0275\u0275advance"](2),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](9,4,"rulenode.debug-mode")," "),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ruleNodeId",null==n.ruleNode.ruleNodeId?null:n.ruleNode.ruleNodeId.id)("nodeDefinition",n.ruleNode.component.configurationDescriptor.nodeDefinition)}}var E=function(e){return[e]};function T(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"section"),i["\u0275\u0275element"](1,"tb-entity-autocomplete",16),i["\u0275\u0275elementStart"](2,"div",13),i["\u0275\u0275elementStart"](3,"mat-form-field",14),i["\u0275\u0275elementStart"](4,"mat-label",8),i["\u0275\u0275text"](5,"rulenode.description"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](6,"textarea",15),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()),2&e){var n=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("excludeEntityIds",i["\u0275\u0275pureFunction1"](2,E,n.ruleChainId))("entityType",n.entityType.RULE_CHAIN)}}var M=function(e){function t(t,n,r,i){var a=e.call(this,t)||this;return a.store=t,a.fb=n,a.ruleChainService=r,a.router=i,a.isAdd=!1,a.ruleNodeType=l.c,a.entityType=s.b,a.ruleNodeFormGroup=a.fb.group({}),a}return Object(r.d)(t,e),t.prototype.buildForm=function(){var e=this;this.ruleNodeFormSubscription&&(this.ruleNodeFormSubscription.unsubscribe(),this.ruleNodeFormSubscription=null),this.ruleNode?(this.ruleNode.component.type!==l.c.RULE_CHAIN?this.ruleNodeFormGroup=this.fb.group({name:[this.ruleNode.name,[o.Validators.required,o.Validators.pattern("(.|\\s)*\\S(.|\\s)*")]],debugMode:[this.ruleNode.debugMode,[]],configuration:[this.ruleNode.configuration,[o.Validators.required]],additionalInfo:this.fb.group({description:[this.ruleNode.additionalInfo?this.ruleNode.additionalInfo.description:""]})}):this.ruleNodeFormGroup=this.fb.group({targetRuleChainId:[this.ruleNode.targetRuleChainId,[o.Validators.required]],additionalInfo:this.fb.group({description:[this.ruleNode.additionalInfo?this.ruleNode.additionalInfo.description:""]})}),this.ruleNodeFormSubscription=this.ruleNodeFormGroup.valueChanges.subscribe((function(){e.updateRuleNode()}))):this.ruleNodeFormGroup=this.fb.group({})},t.prototype.updateRuleNode=function(){var e=this,t=this.ruleNodeFormGroup.value||{};if(this.ruleNode.component.type===l.c.RULE_CHAIN){var n=t.targetRuleChainId;this.ruleNode.targetRuleChainId!==n&&n?this.ruleChainService.getRuleChain(n).subscribe((function(n){e.ruleNode.name=n.name,Object.assign(e.ruleNode,t)})):Object.assign(this.ruleNode,t)}else t.name=t.name.trim(),Object.assign(this.ruleNode,t)},t.prototype.ngOnInit=function(){},t.prototype.ngOnChanges=function(e){for(var t=0,n=Object.keys(e);t<n.length;t++){var r=n[t],i=e[r];i.currentValue!==i.previousValue&&"ruleNode"===r&&this.buildForm()}},t.prototype.validate=function(){this.ruleNode.component.type!==l.c.RULE_CHAIN&&this.ruleNodeConfigComponent.validate()},t.prototype.openRuleChain=function(e){e&&e.stopPropagation(),this.ruleNode.targetRuleChainId&&this.router.navigateByUrl("/ruleChains/"+this.ruleNode.targetRuleChainId)},t.\u0275fac=function(e){return new(e||t)(i["\u0275\u0275directiveInject"](u.Store),i["\u0275\u0275directiveInject"](o.FormBuilder),i["\u0275\u0275directiveInject"](d.a),i["\u0275\u0275directiveInject"](p.Router))},t.\u0275cmp=i["\u0275\u0275defineComponent"]({type:t,selectors:[["tb-rule-node"]],viewQuery:function(e,t){var n;(1&e&&i["\u0275\u0275viewQuery"](S,!0),2&e)&&(i["\u0275\u0275queryRefresh"](n=i["\u0275\u0275loadQuery"]())&&(t.ruleNodeConfigComponent=n.first))},inputs:{ruleNode:"ruleNode",ruleChainId:"ruleChainId",isEdit:"isEdit",isReadOnly:"isReadOnly",isAdd:"isAdd"},features:[i["\u0275\u0275InheritDefinitionFeature"],i["\u0275\u0275NgOnChangesFeature"]],decls:6,vars:7,consts:[["class","tb-details-buttons",4,"ngIf"],[1,"mat-padding",3,"formGroup"],[3,"disabled"],[4,"ngIf"],[1,"tb-details-buttons"],["mat-raised-button","","color","primary",3,"click"],["fxLayout","column","fxLayout.gt-sm","row"],["fxFlex","",1,"mat-block"],["translate",""],["matInput","","formControlName","name","required",""],["formControlName","debugMode"],["formControlName","configuration",3,"ruleNodeId","nodeDefinition"],["ruleNodeConfigComponent",""],["formGroupName","additionalInfo","fxLayout","column"],[1,"mat-block"],["matInput","","formControlName","description","rows","2"],["required","","formControlName","targetRuleChainId",3,"excludeEntityIds","entityType"]],template:function(e,t){1&e&&(i["\u0275\u0275template"](0,w,4,3,"div",0),i["\u0275\u0275elementStart"](1,"form",1),i["\u0275\u0275elementStart"](2,"fieldset",2),i["\u0275\u0275pipe"](3,"async"),i["\u0275\u0275template"](4,I,17,6,"section",3),i["\u0275\u0275template"](5,T,7,4,"section",3),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275property"]("ngIf",!t.isAdd&&t.ruleNode.component.type===t.ruleNodeType.RULE_CHAIN),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("formGroup",t.ruleNodeFormGroup),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("disabled",i["\u0275\u0275pipeBind1"](3,5,t.isLoading$)||!t.isEdit||t.isReadOnly),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngIf",t.ruleNode.component.type!==t.ruleNodeType.RULE_CHAIN),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",t.ruleNode.component.type===t.ruleNodeType.RULE_CHAIN))},directives:[m.NgIf,o["\u0275angular_packages_forms_forms_y"],o.NgControlStatusGroup,o.FormGroupDirective,f.MatButton,g.f,h.MatFormField,g.b,h.MatLabel,b.TranslateDirective,y.MatInput,o.DefaultValueAccessor,o.NgControlStatus,o.FormControlName,o.RequiredValidator,v.MatCheckbox,c.a,o.FormGroupName,h.MatError,x.a],pipes:[m.AsyncPipe,b.TranslatePipe],styles:["[_nghost-%COMP%]   form[_ngcontent-%COMP%]{overflow-x:hidden!important}"]}),t}(a.a);!function(){i["\u0275setClassMetadata"](M,[{type:i.Component,args:[{selector:"tb-rule-node",templateUrl:"./rule-node-details.component.html",styleUrls:["./rule-node-details.component.scss"]}]}],(function(){return[{type:u.Store},{type:o.FormBuilder},{type:d.a},{type:p.Router}]}),{ruleNodeConfigComponent:[{type:i.ViewChild,args:["ruleNodeConfigComponent"]}],ruleNode:[{type:i.Input}],ruleChainId:[{type:i.Input}],isEdit:[{type:i.Input}],isReadOnly:[{type:i.Input}],isAdd:[{type:i.Input}]})}()},fhZi:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return ge}));var r=n("mrSG"),i=n("RxGS"),a=n("fXoL"),o=n("5xOD"),l=n("0G7Z"),s=n("0lYY"),d=n("//Q6"),c=n("C/rb"),u=n("zp9Z"),p=n("oKkZ"),m=n("yl57"),f=n("Nyw1"),g=n("jCow"),h=n("nhHW"),b=n("wtyh"),y=n("xKAQ"),v=n("iO13"),x=n("cp0P"),S=n("HR/i"),w=n("/KqI"),C=n("vkgz"),I=n("lJxs"),E=n("Uj2l"),T=n("l7P3"),M=n("tyNb"),F=n("sYmb"),D=n("0IaG"),A=n("XiUz"),P=n("8m5z"),N=n("49Ji"),k=n("WEPN"),L=n("/t3+"),O=n("kmnG"),_=n("qFsG"),B=n("3Pt+"),j=n("d3UM"),R=n("ofXK"),V=n("bTqV"),z=n("znSr"),G=n("Qu3c"),U=n("NFeN"),q=n("sjz8"),$=n("STbY"),W=n("wZkO"),H=n("0HhY"),K=n("rezs"),J=n("FKr1"),Y=n("bSwM"),X=n("Xa2L"),Q=["topPanel"],Z=["topLeftPanel"],ee=["topRightPanel"],te=["bottomPanel"],ne=["javascriptPanel"],re=["framePanel"],ie=["htmlInput"],ae=["cssInput"],oe=["settingsJsonInput"],le=["dataKeySettingsJsonInput"],se=["javascriptInput"],de=["widgetIFrame"];function ce(e,t){if(1&e&&(a["\u0275\u0275elementStart"](0,"mat-option",62),a["\u0275\u0275text"](1),a["\u0275\u0275pipe"](2,"translate"),a["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit,r=a["\u0275\u0275nextContext"]();a["\u0275\u0275property"]("value",n),a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](2,2,r.widgetTypesDataMap.get(r.widgetTypes[n]).name)," ")}}function ue(e,t){if(1&e){var n=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementStart"](0,"button",13),a["\u0275\u0275listener"]("click",(function(){return a["\u0275\u0275restoreView"](n),a["\u0275\u0275nextContext"]().saveWidget()})),a["\u0275\u0275pipe"](1,"async"),a["\u0275\u0275pipe"](2,"translate"),a["\u0275\u0275elementStart"](3,"mat-icon"),a["\u0275\u0275text"](4,"save"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](5,"span",10),a["\u0275\u0275text"](6,"action.save"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()}if(2&e){var r=a["\u0275\u0275nextContext"]();a["\u0275\u0275propertyInterpolate1"]("matTooltip","",a["\u0275\u0275pipeBind1"](2,5,"widget.save")," (CTRL + S)"),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](1,3,r.isLoading$)||r.saveDisabled())("tb-circular-progress",r.saveWidgetPending)}}function pe(e,t){if(1&e){var n=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementStart"](0,"button",19),a["\u0275\u0275listener"]("click",(function(){return a["\u0275\u0275restoreView"](n),a["\u0275\u0275nextContext"]().saveWidget()})),a["\u0275\u0275pipe"](1,"async"),a["\u0275\u0275elementStart"](2,"mat-icon"),a["\u0275\u0275text"](3,"save"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](4,"span",10),a["\u0275\u0275text"](5,"action.save"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()}if(2&e){var r=a["\u0275\u0275nextContext"]();a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](1,1,r.isLoading$)||r.saveDisabled())}}function me(e,t){if(1&e){var n=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementStart"](0,"div",63),a["\u0275\u0275elementStart"](1,"mat-form-field",64),a["\u0275\u0275elementStart"](2,"input",65),a["\u0275\u0275listener"]("ngModelChange",(function(e){return a["\u0275\u0275restoreView"](n),t.$implicit.url=e}))("ngModelChange",(function(){return a["\u0275\u0275restoreView"](n),a["\u0275\u0275nextContext"]().isDirty=!0})),a["\u0275\u0275pipe"](3,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](4,"mat-checkbox",66),a["\u0275\u0275listener"]("ngModelChange",(function(e){return a["\u0275\u0275restoreView"](n),t.$implicit.isModule=e}))("ngModelChange",(function(){return a["\u0275\u0275restoreView"](n),a["\u0275\u0275nextContext"]().isDirty=!0})),a["\u0275\u0275text"](5),a["\u0275\u0275pipe"](6,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](7,"button",67),a["\u0275\u0275listener"]("click",(function(){a["\u0275\u0275restoreView"](n);var e=t.index;return a["\u0275\u0275nextContext"]().removeResource(e)})),a["\u0275\u0275pipe"](8,"async"),a["\u0275\u0275pipe"](9,"translate"),a["\u0275\u0275elementStart"](10,"mat-icon"),a["\u0275\u0275text"](11,"close"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()}if(2&e){var r=t.$implicit,i=a["\u0275\u0275nextContext"]();a["\u0275\u0275advance"](2),a["\u0275\u0275propertyInterpolate"]("placeholder",a["\u0275\u0275pipeBind1"](3,6,"widget.resource-url")),a["\u0275\u0275property"]("ngModel",r.url),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("ngModel",r.isModule),a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](6,8,"widget.resource-is-module")," "),a["\u0275\u0275advance"](2),a["\u0275\u0275propertyInterpolate"]("matTooltip",a["\u0275\u0275pipeBind1"](9,12,"widget.remove-resource")),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](8,10,i.isLoading$))}}function fe(e,t){1&e&&(a["\u0275\u0275elementStart"](0,"div",68),a["\u0275\u0275element"](1,"mat-spinner",69),a["\u0275\u0275elementEnd"]())}var ge=function(t){function n(e,n,r,i,a,o,l,d){var u=t.call(this,e)||this;return u.store=e,u.window=n,u.route=r,u.router=i,u.widgetService=a,u.translate=o,u.raf=l,u.dialog=d,u.widgetTypes=s.k,u.allWidgetTypes=Object.keys(s.k),u.widgetTypesDataMap=s.l,u.isDirty=!1,u.fullscreen=!1,u.htmlFullscreen=!1,u.cssFullscreen=!1,u.jsonSettingsFullscreen=!1,u.jsonDataKeySettingsFullscreen=!1,u.javascriptFullscreen=!1,u.iFrameFullscreen=!1,u.aceEditors=[],u.editorsResizeCafs={},u.onWindowMessageListener=u.onWindowMessage.bind(u),u.iframeWidgetEditModeInited=!1,u.saveWidgetPending=!1,u.saveWidgetAsPending=!1,u.gotError=!1,u.errorMarkers=[],u.errorAnnotationId=-1,u.hotKeys=[],u.rxSubscriptions=new Array,u.authUser=Object(c.b)(e),u.rxSubscriptions.push(u.route.data.subscribe((function(e){u.init(e)}))),u.initHotKeys(),u}return Object(r.d)(n,t),n.prototype.init=function(e){if(this.widgetsBundle=e.widgetsBundle,this.authUser.authority===u.a.TENANT_ADMIN?this.isReadOnly=!this.widgetsBundle||this.widgetsBundle.tenantId.id===p.a:this.isReadOnly=this.authUser.authority!==u.a.SYS_ADMIN,this.widgetTypeDetails=e.widgetEditorData.widgetTypeDetails,this.widget=e.widgetEditorData.widget,this.widgetTypeDetails){var t=JSON.parse(this.widget.defaultConfig);this.widget.defaultConfig=JSON.stringify(t)}this.origWidget=Object(d.e)(this.widget),this.widgetTypeDetails||(this.isDirty=!0)},n.prototype.ngOnInit=function(){this.initSplitLayout(),this.initAceEditors(),this.iframe=e(this.widgetIFrameElmRef.nativeElement),this.window.addEventListener("message",this.onWindowMessageListener),this.iframe.attr("data-widget",JSON.stringify(this.widget)),this.iframe.attr("src","/widget-editor")},n.prototype.ngOnDestroy=function(){this.window.removeEventListener("message",this.onWindowMessageListener),this.aceResize$.disconnect(),this.rxSubscriptions.forEach((function(e){e.unsubscribe()})),this.rxSubscriptions.length=0},n.prototype.initHotKeys=function(){var e=this;this.hotKeys.push(new m.a("ctrl+q",(function(t){return Object(f.a)(e.store)||e.undoDisabled()||(t.preventDefault(),e.undoWidget()),!1}),["INPUT","SELECT","TEXTAREA"],this.translate.instant("widget.undo"))),this.hotKeys.push(new m.a("ctrl+s",(function(t){return Object(f.a)(e.store)||e.saveDisabled()||(t.preventDefault(),e.saveWidget()),!1}),["INPUT","SELECT","TEXTAREA"],this.translate.instant("widget.save"))),this.hotKeys.push(new m.a("shift+ctrl+s",(function(t){return Object(f.a)(e.store)||e.saveAsDisabled()||(t.preventDefault(),e.saveWidgetAs()),!1}),["INPUT","SELECT","TEXTAREA"],this.translate.instant("widget.saveAs"))),this.hotKeys.push(new m.a("shift+ctrl+f",(function(t){return t.preventDefault(),e.fullscreen=!e.fullscreen,!1}),["INPUT","SELECT","TEXTAREA"],this.translate.instant("widget.toggle-fullscreen"))),this.hotKeys.push(new m.a("ctrl+enter",(function(t){return t.preventDefault(),e.applyWidgetScript(),!1}),["INPUT","SELECT","TEXTAREA"],this.translate.instant("widget.run")))},n.prototype.initSplitLayout=function(){Split([this.topPanelElmRef.nativeElement,this.bottomPanelElmRef.nativeElement],{sizes:[35,65],gutterSize:8,cursor:"row-resize",direction:"vertical"}),Split([this.topLeftPanelElmRef.nativeElement,this.topRightPanelElmRef.nativeElement],{sizes:[50,50],gutterSize:8,cursor:"col-resize"}),Split([this.javascriptPanelElmRef.nativeElement,this.framePanelElmRef.nativeElement],{sizes:[50,50],gutterSize:8,cursor:"col-resize"})},n.prototype.initAceEditors=function(){var e=this;this.aceResize$=new S.a((function(t){t.forEach((function(t){var n=e.aceEditors.find((function(e){return e.container===t.target}));e.onAceEditorResize(n)}))}));var t=[];t.push(this.createAceEditor(this.htmlInputElmRef,"html").pipe(Object(C.a)((function(t){e.htmlEditor=t,e.htmlEditor.on("input",(function(){var t=e.htmlEditor.getValue();e.widget.templateHtml!==t&&(e.widget.templateHtml=t,e.isDirty=!0)}))})))),t.push(this.createAceEditor(this.cssInputElmRef,"css").pipe(Object(C.a)((function(t){e.cssEditor=t,e.cssEditor.on("input",(function(){var t=e.cssEditor.getValue();e.widget.templateCss!==t&&(e.widget.templateCss=t,e.isDirty=!0)}))})))),t.push(this.createAceEditor(this.settingsJsonInputElmRef,"json").pipe(Object(C.a)((function(t){e.jsonSettingsEditor=t,e.jsonSettingsEditor.on("input",(function(){var t=e.jsonSettingsEditor.getValue();e.widget.settingsSchema!==t&&(e.widget.settingsSchema=t,e.isDirty=!0)}))})))),t.push(this.createAceEditor(this.dataKeySettingsJsonInputElmRef,"json").pipe(Object(C.a)((function(t){e.dataKeyJsonSettingsEditor=t,e.dataKeyJsonSettingsEditor.on("input",(function(){var t=e.dataKeyJsonSettingsEditor.getValue();e.widget.dataKeySettingsSchema!==t&&(e.widget.dataKeySettingsSchema=t,e.isDirty=!0)}))})))),t.push(this.createAceEditor(this.javascriptInputElmRef,"javascript").pipe(Object(C.a)((function(t){e.jsEditor=t,e.jsEditor.on("input",(function(){var t=e.jsEditor.getValue();e.widget.controllerScript!==t&&(e.widget.controllerScript=t,e.isDirty=!0)})),e.jsEditor.on("change",(function(){e.cleanupJsErrors()})),e.jsEditor.completers=Object(r.g)([w.a],e.jsEditor.completers||[])})))),Object(x.a)(t).subscribe((function(){e.setAceEditorValues()}))},n.prototype.setAceEditorValues=function(){this.htmlEditor.setValue(this.widget.templateHtml?this.widget.templateHtml:"",-1),this.cssEditor.setValue(this.widget.templateCss?this.widget.templateCss:"",-1),this.jsonSettingsEditor.setValue(this.widget.settingsSchema?this.widget.settingsSchema:"",-1),this.dataKeyJsonSettingsEditor.setValue(this.widget.dataKeySettingsSchema?this.widget.dataKeySettingsSchema:"",-1),this.jsEditor.setValue(this.widget.controllerScript?this.widget.controllerScript:"",-1)},n.prototype.createAceEditor=function(e,t){var n=this,i=e.nativeElement,a={mode:"ace/mode/"+t,showGutter:!0,showPrintMargin:!0};return a=Object(r.a)(Object(r.a)({},a),{enableSnippets:!0,enableBasicAutocompletion:!0,enableLiveAutocompletion:!0}),Object(g.b)().pipe(Object(I.a)((function(e){var t=e.edit(i,a);return t.session.setUseWrapMode(!0),n.aceEditors.push(t),n.aceResize$.observe(i),t})))},n.prototype.onAceEditorResize=function(e){this.editorsResizeCafs[e.id]&&(this.editorsResizeCafs[e.id](),delete this.editorsResizeCafs[e.id]),this.editorsResizeCafs[e.id]=this.raf.raf((function(){e.resize(),e.renderer.updateFull()}))},n.prototype.onWindowMessage=function(e){var t;if(e.data)try{t=JSON.parse(e.data)}catch(n){}if(t)switch(t.type){case"widgetException":this.onWidgetException(t.data);break;case"widgetEditModeInited":this.onWidgetEditModeInited();break;case"widgetEditUpdated":this.onWidgetEditUpdated(t.data)}},n.prototype.onWidgetEditModeInited=function(){var e=this;this.iframeWidgetEditModeInited=!0,(this.saveWidgetPending||this.saveWidgetAsPending)&&(this.saveWidgetTimeout||(this.saveWidgetTimeout=setTimeout((function(){e.gotError?(e.store.dispatch(new y.b({message:e.translate.instant("widget.unable-to-save-widget-error"),type:"error"})),e.saveWidgetPending=!1,e.saveWidgetAsPending=!1):e.saveWidgetPending?e.commitSaveWidget():e.saveWidgetAsPending&&e.commitSaveWidgetAs(),e.saveWidgetTimeout=void 0}),1500)))},n.prototype.onWidgetEditUpdated=function(e){this.widget.sizeX=e.sizeX/2,this.widget.sizeY=e.sizeY/2,this.widget.defaultConfig=JSON.stringify(e.config),this.iframe.attr("data-widget",JSON.stringify(this.widget)),this.isDirty=!0},n.prototype.onWidgetException=function(e){if(!this.gotError){this.gotError=!0;var t="Error:";if(e.name&&(t+=" "+e.name+":"),e.message&&(t+=" "+e.message),e.lineNumber&&(t+="<br>Line "+e.lineNumber,e.columnNumber&&(t+=" column "+e.columnNumber),t+=" of script."),this.saveWidgetPending||this.saveWidgetAsPending||this.store.dispatch(new y.b({message:t,type:"error",target:"javascriptPanel"})),e.lineNumber){var n=e.lineNumber-1,r=0;e.columnNumber&&(r=e.columnNumber);var i=this.jsEditor.session.addMarker(new g.a(n,0,n,1/0),"ace_active-line","screenLine");this.errorMarkers.push(i);var a=this.jsEditor.session.getAnnotations(),o={row:n,column:r,text:e.message,type:"error"};this.errorAnnotationId=a.push(o)-1,this.jsEditor.session.setAnnotations(a)}}},n.prototype.cleanupJsErrors=function(){var e=this;if(this.store.dispatch(new y.a({})),this.errorMarkers.forEach((function(t){e.jsEditor.session.removeMarker(t)})),this.errorMarkers.length=0,this.errorAnnotationId>-1){var t=this.jsEditor.session.getAnnotations();t.splice(this.errorAnnotationId,1),this.jsEditor.session.setAnnotations(t),this.errorAnnotationId=-1}},n.prototype.commitSaveWidget=function(){var e=this,t=this.widgetTypeDetails&&this.widgetTypeDetails.id?this.widgetTypeDetails.id:void 0,n=this.widgetTypeDetails&&this.widgetTypeDetails.createdTime?this.widgetTypeDetails.createdTime:void 0;this.widgetService.saveWidgetTypeDetails(this.widget,t,this.widgetsBundle.alias,n).subscribe((function(t){e.setWidgetTypeDetails(t),e.saveWidgetPending=!1,e.store.dispatch(new y.b({message:e.translate.instant("widget.widget-saved"),type:"success",duration:500}))}),(function(){e.saveWidgetPending=!1}))},n.prototype.commitSaveWidgetAs=function(){var e=this;this.dialog.open(v.a,{disableClose:!0,panelClass:["tb-dialog","tb-fullscreen-dialog"]}).afterClosed().subscribe((function(t){if(t){e.widget.widgetName=t.widgetName,e.widget.alias=void 0;var n=JSON.parse(e.widget.defaultConfig);n.title=e.widget.widgetName,e.widget.defaultConfig=JSON.stringify(n),e.isDirty=!1,e.widgetService.saveWidgetTypeDetails(e.widget,void 0,t.bundleAlias,void 0).subscribe((function(n){e.router.navigateByUrl("/widgets-bundles/"+t.bundleId+"/widgetTypes/"+n.id.id)}))}e.saveWidgetAsPending=!1}))},n.prototype.setWidgetTypeDetails=function(e){this.widgetTypeDetails=e,this.widget=Object(l.d)(this.widgetTypeDetails);var t=JSON.parse(this.widget.defaultConfig);this.widget.defaultConfig=JSON.stringify(t),this.origWidget=Object(d.e)(this.widget),this.isDirty=!1},n.prototype.applyWidgetScript=function(){this.cleanupJsErrors(),this.gotError=!1,this.iframeWidgetEditModeInited=!1;var e=JSON.parse(this.widget.defaultConfig);e.title=this.widget.widgetName,this.widget.defaultConfig=JSON.stringify(e),this.iframe.attr("data-widget",JSON.stringify(this.widget)),this.iframe[0].contentWindow.location.reload(!0)},n.prototype.undoWidget=function(){this.widget=Object(d.e)(this.origWidget),this.setAceEditorValues(),this.isDirty=!1,this.applyWidgetScript()},n.prototype.saveWidget=function(){this.widget.widgetName?(this.saveWidgetPending=!0,this.applyWidgetScript()):this.store.dispatch(new y.b({message:this.translate.instant("widget.missing-widget-title-error"),type:"error"}))},n.prototype.saveWidgetAs=function(){this.saveWidgetAsPending=!0,this.applyWidgetScript()},n.prototype.undoDisabled=function(){return!this.isDirty||!this.iframeWidgetEditModeInited||this.saveWidgetPending||this.saveWidgetAsPending},n.prototype.saveDisabled=function(){return this.isReadOnly||!this.isDirty||!this.iframeWidgetEditModeInited||this.saveWidgetPending||this.saveWidgetAsPending},n.prototype.saveAsDisabled=function(){return!this.iframeWidgetEditModeInited||this.saveWidgetPending||this.saveWidgetAsPending},n.prototype.beautifyCss=function(){var e=this;Object(E.a)(this.widget.templateCss,{indent_size:4}).subscribe((function(t){e.widget.templateCss!==t&&(e.isDirty=!0,e.widget.templateCss=t,e.cssEditor.setValue(e.widget.templateCss?e.widget.templateCss:"",-1))}))},n.prototype.beautifyHtml=function(){var e=this;Object(E.b)(this.widget.templateHtml,{indent_size:4,wrap_line_length:60}).subscribe((function(t){e.widget.templateHtml!==t&&(e.isDirty=!0,e.widget.templateHtml=t,e.htmlEditor.setValue(e.widget.templateHtml?e.widget.templateHtml:"",-1))}))},n.prototype.beautifyJson=function(){var e=this;Object(E.c)(this.widget.settingsSchema,{indent_size:4}).subscribe((function(t){e.widget.settingsSchema!==t&&(e.isDirty=!0,e.widget.settingsSchema=t,e.jsonSettingsEditor.setValue(e.widget.settingsSchema?e.widget.settingsSchema:"",-1))}))},n.prototype.beautifyDataKeyJson=function(){var e=this;Object(E.c)(this.widget.dataKeySettingsSchema,{indent_size:4}).subscribe((function(t){e.widget.dataKeySettingsSchema!==t&&(e.isDirty=!0,e.widget.dataKeySettingsSchema=t,e.dataKeyJsonSettingsEditor.setValue(e.widget.dataKeySettingsSchema?e.widget.dataKeySettingsSchema:"",-1))}))},n.prototype.beautifyJs=function(){var e=this;Object(E.c)(this.widget.controllerScript,{indent_size:4,wrap_line_length:60}).subscribe((function(t){e.widget.controllerScript!==t&&(e.isDirty=!0,e.widget.controllerScript=t,e.jsEditor.setValue(e.widget.controllerScript?e.widget.controllerScript:"",-1))}))},n.prototype.removeResource=function(e){e>-1&&this.widget.resources.splice(e,1).length>0&&(this.isDirty=!0)},n.prototype.addResource=function(){this.widget.resources.push({url:""}),this.isDirty=!0},n.prototype.widetTypeChanged=function(){var e=JSON.parse(this.widget.defaultConfig);this.widget.type!==s.k.rpc&&this.widget.type!==s.k.alarm?(e.targetDeviceAliases&&delete e.targetDeviceAliases,e.alarmSource&&delete e.alarmSource,e.datasources||(e.datasources=[]),e.timewindow||(e.timewindow={realtime:{timewindowMs:6e4}})):this.widget.type===s.k.rpc?(e.datasources&&delete e.datasources,e.alarmSource&&delete e.alarmSource,e.timewindow&&delete e.timewindow,e.targetDeviceAliases||(e.targetDeviceAliases=[])):(e.datasources&&delete e.datasources,e.targetDeviceAliases&&delete e.targetDeviceAliases,e.alarmSource||(e.alarmSource={}),e.timewindow||(e.timewindow={realtime:{timewindowMs:864e5}})),this.widget.defaultConfig=JSON.stringify(e),this.isDirty=!0},n.\u0275fac=function(e){return new(e||n)(a["\u0275\u0275directiveInject"](T.Store),a["\u0275\u0275directiveInject"](b.b),a["\u0275\u0275directiveInject"](M.ActivatedRoute),a["\u0275\u0275directiveInject"](M.Router),a["\u0275\u0275directiveInject"](o.a),a["\u0275\u0275directiveInject"](F.TranslateService),a["\u0275\u0275directiveInject"](h.a),a["\u0275\u0275directiveInject"](D.MatDialog))},n.\u0275cmp=a["\u0275\u0275defineComponent"]({type:n,selectors:[["tb-widget-editor"]],viewQuery:function(e,t){var n;(1&e&&(a["\u0275\u0275staticViewQuery"](Q,!0),a["\u0275\u0275staticViewQuery"](Z,!0),a["\u0275\u0275staticViewQuery"](ee,!0),a["\u0275\u0275staticViewQuery"](te,!0),a["\u0275\u0275staticViewQuery"](ne,!0),a["\u0275\u0275staticViewQuery"](re,!0),a["\u0275\u0275staticViewQuery"](ie,!0),a["\u0275\u0275staticViewQuery"](ae,!0),a["\u0275\u0275staticViewQuery"](oe,!0),a["\u0275\u0275staticViewQuery"](le,!0),a["\u0275\u0275staticViewQuery"](se,!0),a["\u0275\u0275staticViewQuery"](de,!0)),2&e)&&(a["\u0275\u0275queryRefresh"](n=a["\u0275\u0275loadQuery"]())&&(t.topPanelElmRef=n.first),a["\u0275\u0275queryRefresh"](n=a["\u0275\u0275loadQuery"]())&&(t.topLeftPanelElmRef=n.first),a["\u0275\u0275queryRefresh"](n=a["\u0275\u0275loadQuery"]())&&(t.topRightPanelElmRef=n.first),a["\u0275\u0275queryRefresh"](n=a["\u0275\u0275loadQuery"]())&&(t.bottomPanelElmRef=n.first),a["\u0275\u0275queryRefresh"](n=a["\u0275\u0275loadQuery"]())&&(t.javascriptPanelElmRef=n.first),a["\u0275\u0275queryRefresh"](n=a["\u0275\u0275loadQuery"]())&&(t.framePanelElmRef=n.first),a["\u0275\u0275queryRefresh"](n=a["\u0275\u0275loadQuery"]())&&(t.htmlInputElmRef=n.first),a["\u0275\u0275queryRefresh"](n=a["\u0275\u0275loadQuery"]())&&(t.cssInputElmRef=n.first),a["\u0275\u0275queryRefresh"](n=a["\u0275\u0275loadQuery"]())&&(t.settingsJsonInputElmRef=n.first),a["\u0275\u0275queryRefresh"](n=a["\u0275\u0275loadQuery"]())&&(t.dataKeySettingsJsonInputElmRef=n.first),a["\u0275\u0275queryRefresh"](n=a["\u0275\u0275loadQuery"]())&&(t.javascriptInputElmRef=n.first),a["\u0275\u0275queryRefresh"](n=a["\u0275\u0275loadQuery"]())&&(t.widgetIFrameElmRef=n.first))},features:[a["\u0275\u0275InheritDefinitionFeature"]],decls:182,vars:126,consts:[["fxFlex","","fxLayout","column"],["fxFlex","","fxLayout","column","tb-fullscreen","","tb-hotkeys","",3,"fullscreen","hotkeys","cheatSheet"],["cheatSheetComponent",""],["fxLayoutGap","16px","fxLayoutGap.lt-xl","8px",1,"mat-elevation-z1","tb-edit-toolbar","mat-hue-3"],["floatLabel","always","hideRequiredMarker","",1,"tb-widget-title"],["matInput","","required","",3,"disabled","ngModel","placeholder","ngModelChange"],["matInput","",3,"disabled","placeholder","ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["fxFlex",""],["mat-button","","fxHide.lt-md","","matTooltipPosition","below",3,"disabled","matTooltip","click"],["translate",""],["mat-raised-button","","fxHide.lt-md","","matTooltipPosition","below",3,"disabled","matTooltip","click"],["mat-raised-button","","fxHide.lt-md","","matTooltipPosition","below",3,"disabled","tb-circular-progress","matTooltip","click",4,"ngIf"],["mat-raised-button","","fxHide.lt-md","","matTooltipPosition","below",3,"disabled","tb-circular-progress","matTooltip","click"],["mat-button","","fxHide.lt-lg","","matTooltipPosition","below",3,"matTooltip","click"],["mat-icon-button","","fxHide","","fxShow.md","","matTooltipPosition","below",3,"matTooltip","click"],["mat-icon-button","","fxHide.gt-sm","",3,"matMenuTriggerFor"],["xPosition","before"],["widgetEditMenu","matMenu"],["mat-menu-item","",3,"disabled","click"],["mat-menu-item","",3,"disabled","click",4,"ngIf"],["fxFlex","",2,"position","relative"],[1,"tb-editor","tb-absolute-fill"],[1,"tb-split","tb-split-vertical"],["topPanel",""],[1,"tb-split","tb-content"],["topLeftPanel",""],["selectedIndex","1","dynamicHeight","true",2,"width","100%","height","100%"],[3,"label"],[1,"tb-resize-container",2,"background-color","#fff"],[1,"mat-padding"],["fxFlex","","fxLayout","row","style","max-height: 40px;","fxLayoutAlign","start center",4,"ngFor","ngForOf"],[2,"margin-top","6px"],["mat-raised-button","","color","primary","matTooltipPosition","above",3,"disabled","matTooltip","click"],["tb-fullscreen","",1,"tb-resize-container",3,"fullscreen"],[1,"tb-editor-area-title-panel"],["mat-button","",3,"click"],["mat-button","","mat-icon-button","","matTooltipPosition","above",1,"tb-mat-32",3,"matTooltip","click"],["htmlInput",""],["mat-icon-button","","matTooltipPosition","above",1,"tb-mat-32",3,"matTooltip","click"],["cssInput",""],["topRightPanel",""],["dynamicHeight","true",2,"width","100%","height","100%"],["settingsJsonInput",""],["dataKeySettingsJsonInput",""],["fxFlex","","maxSizeByte","524288",3,"label","ngModel","ngModelChange"],[1,"mat-block"],["matInput","","rows","2","maxlength","255",3,"ngModel","ngModelChange"],["descriptionInput",""],["align","end"],["bottomPanel",""],["tb-toast","","toastTarget","javascriptPanel",1,"tb-split","tb-content"],["javascriptPanel",""],["javascriptInput",""],[1,"tb-split","tb-content",2,"overflow-y","hidden","position","relative"],["framePanel",""],["class","mat-content tb-progress-cover","fxFlex","","fxLayout","column","fxLayoutAlign","center center",4,"ngIf"],["tb-fullscreen","",2,"width","100%","height","100%",3,"fullscreen"],["frameborder","0","height","100%","width","100%"],["widgetIFrame",""],[2,"position","absolute","top","10px","left","10px","bottom","initial"],["mat-icon-button","","matTooltipPosition","above",1,"tb-fullscreen-button-style",3,"matTooltip","click"],[3,"value"],["fxFlex","","fxLayout","row","fxLayoutAlign","start center",2,"max-height","40px"],["fxFlex","","floatLabel","never",1,"mat-block","resource-field",2,"margin","10px 0 0 0","max-height","40px"],["required","","matInput","",3,"ngModel","placeholder","ngModelChange"],[3,"ngModel","ngModelChange"],["mat-icon-button","","color","primary","matTooltipPosition","above",3,"disabled","matTooltip","click"],["fxFlex","","fxLayout","column","fxLayoutAlign","center center",1,"mat-content","tb-progress-cover"],["diameter","100","mode","indeterminate","color","warn"]],template:function(e,t){if(1&e&&(a["\u0275\u0275elementStart"](0,"div",0),a["\u0275\u0275elementStart"](1,"div",1),a["\u0275\u0275element"](2,"tb-hotkeys-cheatsheet",null,2),a["\u0275\u0275elementStart"](4,"mat-toolbar",3),a["\u0275\u0275elementStart"](5,"mat-form-field",4),a["\u0275\u0275element"](6,"mat-label"),a["\u0275\u0275elementStart"](7,"input",5),a["\u0275\u0275listener"]("ngModelChange",(function(e){return t.widget.widgetName=e}))("ngModelChange",(function(){return t.isDirty=!0})),a["\u0275\u0275pipe"](8,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](9,"mat-form-field"),a["\u0275\u0275elementStart"](10,"mat-select",6),a["\u0275\u0275listener"]("ngModelChange",(function(e){return t.widget.type=e}))("ngModelChange",(function(){return t.widetTypeChanged()})),a["\u0275\u0275pipe"](11,"translate"),a["\u0275\u0275template"](12,ce,3,4,"mat-option",7),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](13,"span",8),a["\u0275\u0275elementStart"](14,"button",9),a["\u0275\u0275listener"]("click",(function(){return t.applyWidgetScript()})),a["\u0275\u0275pipe"](15,"translate"),a["\u0275\u0275elementStart"](16,"mat-icon"),a["\u0275\u0275text"](17,"play_arrow"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](18,"span",10),a["\u0275\u0275text"](19,"action.run"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](20,"button",11),a["\u0275\u0275listener"]("click",(function(){return t.undoWidget()})),a["\u0275\u0275pipe"](21,"async"),a["\u0275\u0275pipe"](22,"translate"),a["\u0275\u0275elementStart"](23,"mat-icon"),a["\u0275\u0275text"](24,"undo"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](25,"span",10),a["\u0275\u0275text"](26,"action.undo"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275template"](27,ue,7,7,"button",12),a["\u0275\u0275elementStart"](28,"button",13),a["\u0275\u0275listener"]("click",(function(){return t.saveWidgetAs()})),a["\u0275\u0275pipe"](29,"async"),a["\u0275\u0275pipe"](30,"translate"),a["\u0275\u0275elementStart"](31,"mat-icon"),a["\u0275\u0275text"](32,"save"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](33,"span",10),a["\u0275\u0275text"](34,"action.saveAs"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](35,"button",14),a["\u0275\u0275listener"]("click",(function(){return t.fullscreen=!t.fullscreen})),a["\u0275\u0275pipe"](36,"translate"),a["\u0275\u0275elementStart"](37,"mat-icon"),a["\u0275\u0275text"](38),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](39,"span",10),a["\u0275\u0275text"](40,"widget.toggle-fullscreen"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](41,"button",15),a["\u0275\u0275listener"]("click",(function(){return t.fullscreen=!t.fullscreen})),a["\u0275\u0275pipe"](42,"translate"),a["\u0275\u0275elementStart"](43,"mat-icon"),a["\u0275\u0275text"](44),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](45,"button",16),a["\u0275\u0275elementStart"](46,"mat-icon"),a["\u0275\u0275text"](47,"more_vert"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](48,"mat-menu",17,18),a["\u0275\u0275elementStart"](50,"button",19),a["\u0275\u0275listener"]("click",(function(){return t.applyWidgetScript()})),a["\u0275\u0275elementStart"](51,"mat-icon"),a["\u0275\u0275text"](52,"play_arrow"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](53,"span",10),a["\u0275\u0275text"](54,"action.run"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](55,"button",19),a["\u0275\u0275listener"]("click",(function(){return t.undoWidget()})),a["\u0275\u0275pipe"](56,"async"),a["\u0275\u0275elementStart"](57,"mat-icon"),a["\u0275\u0275text"](58,"undo"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](59,"span",10),a["\u0275\u0275text"](60,"action.undo"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275template"](61,pe,6,3,"button",20),a["\u0275\u0275elementStart"](62,"button",19),a["\u0275\u0275listener"]("click",(function(){return t.saveWidgetAs()})),a["\u0275\u0275pipe"](63,"async"),a["\u0275\u0275elementStart"](64,"mat-icon"),a["\u0275\u0275text"](65,"save"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](66,"span",10),a["\u0275\u0275text"](67,"action.saveAs"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](68,"div",21),a["\u0275\u0275elementStart"](69,"div",22),a["\u0275\u0275elementStart"](70,"div",23,24),a["\u0275\u0275elementStart"](72,"div",25,26),a["\u0275\u0275elementStart"](74,"mat-tab-group",27),a["\u0275\u0275elementStart"](75,"mat-tab",28),a["\u0275\u0275pipe"](76,"translate"),a["\u0275\u0275elementStart"](77,"div",29),a["\u0275\u0275elementStart"](78,"div",30),a["\u0275\u0275template"](79,me,12,14,"div",31),a["\u0275\u0275elementStart"](80,"div",32),a["\u0275\u0275elementStart"](81,"button",33),a["\u0275\u0275listener"]("click",(function(){return t.addResource()})),a["\u0275\u0275pipe"](82,"async"),a["\u0275\u0275pipe"](83,"translate"),a["\u0275\u0275elementStart"](84,"span",10),a["\u0275\u0275text"](85,"action.add"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](86,"mat-tab",28),a["\u0275\u0275pipe"](87,"translate"),a["\u0275\u0275elementStart"](88,"div",34),a["\u0275\u0275elementStart"](89,"div",35),a["\u0275\u0275elementStart"](90,"button",36),a["\u0275\u0275listener"]("click",(function(){return t.beautifyHtml()})),a["\u0275\u0275text"](91),a["\u0275\u0275pipe"](92,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](93,"button",37),a["\u0275\u0275listener"]("click",(function(){return t.htmlFullscreen=!t.htmlFullscreen})),a["\u0275\u0275pipe"](94,"translate"),a["\u0275\u0275elementStart"](95,"mat-icon"),a["\u0275\u0275text"](96),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](97,"div",null,38),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](99,"mat-tab",28),a["\u0275\u0275pipe"](100,"translate"),a["\u0275\u0275elementStart"](101,"div",34),a["\u0275\u0275elementStart"](102,"div",35),a["\u0275\u0275elementStart"](103,"button",36),a["\u0275\u0275listener"]("click",(function(){return t.beautifyCss()})),a["\u0275\u0275text"](104),a["\u0275\u0275pipe"](105,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](106,"button",39),a["\u0275\u0275listener"]("click",(function(){return t.cssFullscreen=!t.cssFullscreen})),a["\u0275\u0275pipe"](107,"translate"),a["\u0275\u0275elementStart"](108,"mat-icon"),a["\u0275\u0275text"](109),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](110,"div",null,40),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](112,"div",25,41),a["\u0275\u0275elementStart"](114,"mat-tab-group",42),a["\u0275\u0275elementStart"](115,"mat-tab",28),a["\u0275\u0275pipe"](116,"translate"),a["\u0275\u0275elementStart"](117,"div",34),a["\u0275\u0275elementStart"](118,"div",35),a["\u0275\u0275elementStart"](119,"button",36),a["\u0275\u0275listener"]("click",(function(){return t.beautifyJson()})),a["\u0275\u0275text"](120),a["\u0275\u0275pipe"](121,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](122,"button",39),a["\u0275\u0275listener"]("click",(function(){return t.jsonSettingsFullscreen=!t.jsonSettingsFullscreen})),a["\u0275\u0275pipe"](123,"translate"),a["\u0275\u0275elementStart"](124,"mat-icon"),a["\u0275\u0275text"](125),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](126,"div",null,43),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](128,"mat-tab",28),a["\u0275\u0275pipe"](129,"translate"),a["\u0275\u0275elementStart"](130,"div",34),a["\u0275\u0275elementStart"](131,"div",35),a["\u0275\u0275elementStart"](132,"button",36),a["\u0275\u0275listener"]("click",(function(){return t.beautifyDataKeyJson()})),a["\u0275\u0275text"](133),a["\u0275\u0275pipe"](134,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](135,"button",39),a["\u0275\u0275listener"]("click",(function(){return t.jsonDataKeySettingsFullscreen=!t.jsonDataKeySettingsFullscreen})),a["\u0275\u0275pipe"](136,"translate"),a["\u0275\u0275elementStart"](137,"mat-icon"),a["\u0275\u0275text"](138),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](139,"div",null,44),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](141,"mat-tab",28),a["\u0275\u0275pipe"](142,"translate"),a["\u0275\u0275elementStart"](143,"div",29),a["\u0275\u0275elementStart"](144,"div",30),a["\u0275\u0275elementStart"](145,"tb-image-input",45),a["\u0275\u0275listener"]("ngModelChange",(function(e){return t.widget.image=e}))("ngModelChange",(function(){return t.isDirty=!0})),a["\u0275\u0275pipe"](146,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](147,"mat-form-field",46),a["\u0275\u0275elementStart"](148,"mat-label",10),a["\u0275\u0275text"](149,"widget.description"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](150,"textarea",47,48),a["\u0275\u0275listener"]("ngModelChange",(function(e){return t.widget.description=e}))("ngModelChange",(function(){return t.isDirty=!0})),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](152,"mat-hint",49),a["\u0275\u0275text"](153),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](154,"div",23,50),a["\u0275\u0275elementStart"](156,"div",51,52),a["\u0275\u0275elementStart"](158,"div",34),a["\u0275\u0275elementStart"](159,"div",35),a["\u0275\u0275elementStart"](160,"label",10),a["\u0275\u0275text"](161,"widget.javascript"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](162,"button",36),a["\u0275\u0275listener"]("click",(function(){return t.beautifyJs()})),a["\u0275\u0275text"](163),a["\u0275\u0275pipe"](164,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](165,"button",39),a["\u0275\u0275listener"]("click",(function(){return t.javascriptFullscreen=!t.javascriptFullscreen})),a["\u0275\u0275pipe"](166,"translate"),a["\u0275\u0275elementStart"](167,"mat-icon"),a["\u0275\u0275text"](168),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](169,"div",null,53),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](171,"div",54,55),a["\u0275\u0275template"](173,fe,2,0,"div",56),a["\u0275\u0275elementStart"](174,"div",57),a["\u0275\u0275element"](175,"iframe",58,59),a["\u0275\u0275elementStart"](177,"div",60),a["\u0275\u0275elementStart"](178,"button",61),a["\u0275\u0275listener"]("click",(function(){return t.iFrameFullscreen=!t.iFrameFullscreen})),a["\u0275\u0275pipe"](179,"translate"),a["\u0275\u0275elementStart"](180,"mat-icon"),a["\u0275\u0275text"](181),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()),2&e){var n=a["\u0275\u0275reference"](3),r=a["\u0275\u0275reference"](49),i=a["\u0275\u0275reference"](151);a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("fullscreen",t.fullscreen)("hotkeys",t.hotKeys)("cheatSheet",n),a["\u0275\u0275advance"](6),a["\u0275\u0275propertyInterpolate"]("placeholder",a["\u0275\u0275pipeBind1"](8,64,"widget.title")),a["\u0275\u0275property"]("disabled",t.isReadOnly)("ngModel",t.widget.widgetName),a["\u0275\u0275advance"](3),a["\u0275\u0275propertyInterpolate"]("placeholder",a["\u0275\u0275pipeBind1"](11,66,"widget.type")),a["\u0275\u0275property"]("disabled",t.isReadOnly)("ngModel",t.widget.type),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("ngForOf",t.allWidgetTypes),a["\u0275\u0275advance"](2),a["\u0275\u0275propertyInterpolate1"]("matTooltip","",a["\u0275\u0275pipeBind1"](15,68,"widget.run")," (CTRL + Return)"),a["\u0275\u0275property"]("disabled",!t.iframeWidgetEditModeInited),a["\u0275\u0275advance"](6),a["\u0275\u0275propertyInterpolate1"]("matTooltip","",a["\u0275\u0275pipeBind1"](22,72,"widget.undo")," (CTRL + Q)"),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](21,70,t.isLoading$)||t.undoDisabled()),a["\u0275\u0275advance"](7),a["\u0275\u0275property"]("ngIf",!t.isReadOnly),a["\u0275\u0275advance"](1),a["\u0275\u0275propertyInterpolate1"]("matTooltip","",a["\u0275\u0275pipeBind1"](30,76,"widget.saveAs")," (Shift + CTRL + S)"),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](29,74,t.isLoading$)||t.saveAsDisabled())("tb-circular-progress",t.saveWidgetAsPending),a["\u0275\u0275advance"](7),a["\u0275\u0275propertyInterpolate1"]("matTooltip","",a["\u0275\u0275pipeBind1"](36,78,"widget.toggle-fullscreen")," (Shift + CTRL + F)"),a["\u0275\u0275advance"](3),a["\u0275\u0275textInterpolate"](t.fullscreen?"fullscreen_exit":"fullscreen"),a["\u0275\u0275advance"](3),a["\u0275\u0275propertyInterpolate1"]("matTooltip","",a["\u0275\u0275pipeBind1"](42,80,"widget.toggle-fullscreen")," (Shift + CTRL + F)"),a["\u0275\u0275advance"](3),a["\u0275\u0275textInterpolate"](t.fullscreen?"fullscreen_exit":"fullscreen"),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("matMenuTriggerFor",r),a["\u0275\u0275advance"](5),a["\u0275\u0275property"]("disabled",!t.iframeWidgetEditModeInited),a["\u0275\u0275advance"](5),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](56,82,t.isLoading$)||t.undoDisabled()),a["\u0275\u0275advance"](6),a["\u0275\u0275property"]("ngIf",!t.isReadOnly),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](63,84,t.isLoading$)||t.saveAsDisabled()),a["\u0275\u0275advance"](13),a["\u0275\u0275propertyInterpolate"]("label",a["\u0275\u0275pipeBind1"](76,86,"widget.resources")),a["\u0275\u0275advance"](4),a["\u0275\u0275property"]("ngForOf",t.widget.resources),a["\u0275\u0275advance"](2),a["\u0275\u0275propertyInterpolate"]("matTooltip",a["\u0275\u0275pipeBind1"](83,90,"widget.add-resource")),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](82,88,t.isLoading$)),a["\u0275\u0275advance"](5),a["\u0275\u0275propertyInterpolate"]("label",a["\u0275\u0275pipeBind1"](87,92,"widget.html")),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("fullscreen",t.htmlFullscreen),a["\u0275\u0275advance"](3),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](92,94,"widget.tidy")," "),a["\u0275\u0275advance"](2),a["\u0275\u0275propertyInterpolate"]("matTooltip",a["\u0275\u0275pipeBind1"](94,96,t.htmlFullscreen?"fullscreen.exit":"fullscreen.expand")),a["\u0275\u0275advance"](3),a["\u0275\u0275textInterpolate"](t.htmlFullscreen?"fullscreen_exit":"fullscreen"),a["\u0275\u0275advance"](3),a["\u0275\u0275propertyInterpolate"]("label",a["\u0275\u0275pipeBind1"](100,98,"widget.css")),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("fullscreen",t.cssFullscreen),a["\u0275\u0275advance"](3),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](105,100,"widget.tidy")," "),a["\u0275\u0275advance"](2),a["\u0275\u0275propertyInterpolate"]("matTooltip",a["\u0275\u0275pipeBind1"](107,102,t.cssFullscreen?"fullscreen.exit":"fullscreen.expand")),a["\u0275\u0275advance"](3),a["\u0275\u0275textInterpolate"](t.cssFullscreen?"fullscreen_exit":"fullscreen"),a["\u0275\u0275advance"](6),a["\u0275\u0275propertyInterpolate"]("label",a["\u0275\u0275pipeBind1"](116,104,"widget.settings-schema")),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("fullscreen",t.jsonSettingsFullscreen),a["\u0275\u0275advance"](3),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](121,106,"widget.tidy")," "),a["\u0275\u0275advance"](2),a["\u0275\u0275propertyInterpolate"]("matTooltip",a["\u0275\u0275pipeBind1"](123,108,t.jsonSettingsFullscreen?"fullscreen.exit":"fullscreen.expand")),a["\u0275\u0275advance"](3),a["\u0275\u0275textInterpolate"](t.jsonSettingsFullscreen?"fullscreen_exit":"fullscreen"),a["\u0275\u0275advance"](3),a["\u0275\u0275propertyInterpolate"]("label",a["\u0275\u0275pipeBind1"](129,110,"widget.datakey-settings-schema")),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("fullscreen",t.jsonDataKeySettingsFullscreen),a["\u0275\u0275advance"](3),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](134,112,"widget.tidy")," "),a["\u0275\u0275advance"](2),a["\u0275\u0275propertyInterpolate"]("matTooltip",a["\u0275\u0275pipeBind1"](136,114,t.jsonDataKeySettingsFullscreen?"fullscreen.exit":"fullscreen.expand")),a["\u0275\u0275advance"](3),a["\u0275\u0275textInterpolate"](t.jsonDataKeySettingsFullscreen?"fullscreen_exit":"fullscreen"),a["\u0275\u0275advance"](3),a["\u0275\u0275propertyInterpolate"]("label",a["\u0275\u0275pipeBind1"](142,116,"widget.widget-settings")),a["\u0275\u0275advance"](4),a["\u0275\u0275propertyInterpolate"]("label",a["\u0275\u0275pipeBind1"](146,118,"widget.image-preview")),a["\u0275\u0275property"]("ngModel",t.widget.image),a["\u0275\u0275advance"](5),a["\u0275\u0275property"]("ngModel",t.widget.description),a["\u0275\u0275advance"](3),a["\u0275\u0275textInterpolate1"]("",(null==i.value?null:i.value.length)||0,"/255"),a["\u0275\u0275advance"](5),a["\u0275\u0275property"]("fullscreen",t.javascriptFullscreen),a["\u0275\u0275advance"](5),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](164,120,"widget.tidy")," "),a["\u0275\u0275advance"](2),a["\u0275\u0275propertyInterpolate"]("matTooltip",a["\u0275\u0275pipeBind1"](166,122,t.javascriptFullscreen?"fullscreen.exit":"fullscreen.expand")),a["\u0275\u0275advance"](3),a["\u0275\u0275textInterpolate"](t.javascriptFullscreen?"fullscreen_exit":"fullscreen"),a["\u0275\u0275advance"](5),a["\u0275\u0275property"]("ngIf",!t.iframeWidgetEditModeInited),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("fullscreen",t.iFrameFullscreen),a["\u0275\u0275advance"](4),a["\u0275\u0275propertyInterpolate"]("matTooltip",a["\u0275\u0275pipeBind1"](179,124,t.iFrameFullscreen?"fullscreen.exit":"fullscreen.expand")),a["\u0275\u0275advance"](3),a["\u0275\u0275textInterpolate"](t.iFrameFullscreen?"fullscreen_exit":"fullscreen")}},directives:[A.b,A.f,P.a,N.a,m.d,k.a,L.MatToolbar,A.g,O.MatFormField,O.MatLabel,_.MatInput,B.DefaultValueAccessor,B.RequiredValidator,B.NgControlStatus,B.NgModel,j.MatSelect,R.NgForOf,V.MatButton,z.d,G.MatTooltip,U.MatIcon,F.TranslateDirective,R.NgIf,q.a,$.MatMenuTrigger,$._MatMenu,$.MatMenuItem,W.MatTabGroup,W.MatTab,H.a,B.MaxLengthValidator,O.MatHint,K.b,J.MatOption,A.e,Y.MatCheckbox,X.MatSpinner],pipes:[F.TranslatePipe,R.AsyncPipe],styles:["tb-widget-editor{-ms-flex:1;flex:1;display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column}.tb-editor .tb-split{box-sizing:border-box;overflow-x:hidden;overflow-y:auto}.tb-editor mat-form-field.resource-field{max-height:40px;margin:10px 0 0}.tb-editor mat-form-field.resource-field .mat-form-field-wrapper{padding-bottom:0}.tb-editor mat-form-field.resource-field .mat-form-field-wrapper .mat-form-field-flex{max-height:40px}.tb-editor mat-form-field.resource-field .mat-form-field-wrapper .mat-form-field-flex .mat-form-field-infix{border:0}.tb-editor mat-form-field.resource-field .mat-form-field-wrapper .mat-form-field-underline{bottom:0}.tb-editor .ace_editor{font-size:14px!important}.tb-editor .tb-content{border:1px solid silver}.tb-editor .gutter{background-color:transparent;background-repeat:no-repeat;background-position:50%}.tb-editor .gutter.gutter-horizontal{cursor:col-resize;background-image:url(vertical.5e6d1df402c3bc10ecc6.png)}.tb-editor .gutter.gutter-vertical{cursor:row-resize;background-image:url(horizontal.98604ef1a5065a065f35.png)}.tb-editor .gutter.gutter-horizontal,.tb-editor .tb-split.tb-split-horizontal{float:left;height:100%}.tb-editor .tb-split.tb-split-vertical{display:-ms-flexbox;display:flex}.tb-editor .tb-split.tb-split-vertical .tb-split.tb-content{height:100%}.tb-editor .container{width:100%;height:100%}.tb-split-vertical mat-tab-group .mat-tab-body-wrapper{height:calc(100% - 49px)}.tb-split-vertical mat-tab-group .mat-tab-body-wrapper mat-tab-body,.tb-split-vertical mat-tab-group .mat-tab-body-wrapper mat-tab-body>div{height:100%}div.tb-editor-area-title-panel{position:absolute;top:5px;right:20px;z-index:5;font-size:.8rem;font-weight:500}div.tb-editor-area-title-panel label{padding:4px;color:#00acc1;background:hsla(0,0%,86.3%,.35);border-radius:5px}div.tb-editor-area-title-panel label:not(:last-child){margin-right:4px}div.tb-editor-area-title-panel button.mat-button,div.tb-editor-area-title-panel button.mat-icon-button,div.tb-editor-area-title-panel button.mat-icon-button.tb-mat-32{-ms-flex-align:center;align-items:center;vertical-align:middle;min-width:32px;min-height:15px;padding:4px;margin:0;font-size:.8rem;line-height:15px;color:#7b7b7b;background:hsla(0,0%,86.3%,.35)}div.tb-editor-area-title-panel button.mat-button:not(:last-child),div.tb-editor-area-title-panel button.mat-icon-button.tb-mat-32:not(:last-child),div.tb-editor-area-title-panel button.mat-icon-button:not(:last-child){margin-right:4px}.tb-resize-container{position:relative;width:100%;height:100%;overflow-y:auto}.tb-resize-container .ace_editor{height:100%}mat-toolbar.tb-edit-toolbar{min-height:40px!important;max-height:40px!important}mat-toolbar.tb-edit-toolbar button.mat-button-base:not(.mat-icon-button){font-size:12px;line-height:28px;padding:0 8px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}mat-toolbar.tb-edit-toolbar button.mat-button-base:not(.mat-icon-button) mat-icon{height:20px;width:20px;font-size:20px}mat-toolbar.tb-edit-toolbar mat-form-field input,mat-toolbar.tb-edit-toolbar mat-form-field mat-select{font-size:1.1rem;font-weight:400;letter-spacing:.005em}mat-toolbar.tb-edit-toolbar mat-form-field div.mat-form-field-infix{padding-bottom:5px}mat-toolbar.tb-edit-toolbar mat-form-field.tb-widget-title{min-width:250px}@media screen and (max-width:1279px){mat-toolbar.tb-edit-toolbar mat-form-field.tb-widget-title{min-width:0}}"],encapsulation:2}),n}(i.a);!function(){a["\u0275setClassMetadata"](ge,[{type:a.Component,args:[{selector:"tb-widget-editor",templateUrl:"./widget-editor.component.html",styleUrls:["./widget-editor.component.scss"],encapsulation:a.ViewEncapsulation.None}]}],(function(){return[{type:T.Store},{type:Window,decorators:[{type:a.Inject,args:[b.b]}]},{type:M.ActivatedRoute},{type:M.Router},{type:o.a},{type:F.TranslateService},{type:h.a},{type:D.MatDialog}]}),{topPanelElmRef:[{type:a.ViewChild,args:["topPanel",{static:!0}]}],topLeftPanelElmRef:[{type:a.ViewChild,args:["topLeftPanel",{static:!0}]}],topRightPanelElmRef:[{type:a.ViewChild,args:["topRightPanel",{static:!0}]}],bottomPanelElmRef:[{type:a.ViewChild,args:["bottomPanel",{static:!0}]}],javascriptPanelElmRef:[{type:a.ViewChild,args:["javascriptPanel",{static:!0}]}],framePanelElmRef:[{type:a.ViewChild,args:["framePanel",{static:!0}]}],htmlInputElmRef:[{type:a.ViewChild,args:["htmlInput",{static:!0}]}],cssInputElmRef:[{type:a.ViewChild,args:["cssInput",{static:!0}]}],settingsJsonInputElmRef:[{type:a.ViewChild,args:["settingsJsonInput",{static:!0}]}],dataKeySettingsJsonInputElmRef:[{type:a.ViewChild,args:["dataKeySettingsJsonInput",{static:!0}]}],javascriptInputElmRef:[{type:a.ViewChild,args:["javascriptInput",{static:!0}]}],widgetIFrameElmRef:[{type:a.ViewChild,args:["widgetIFrame",{static:!0}]}]})}()}).call(this,n("xexB"))},iO13:function(e,t,n){"use strict";n.d(t,"a",(function(){return E}));var r=n("mrSG"),i=n("fXoL"),a=n("3Pt+"),o=n("gmuX"),l=n("C/rb"),s=n("zp9Z"),d=n("l7P3"),c=n("tyNb"),u=n("0IaG"),p=n("/t3+"),m=n("sYmb"),f=n("XiUz"),g=n("bTqV"),h=n("NFeN"),b=n("ofXK"),y=n("kmnG"),v=n("qFsG"),x=n("KEZ6"),S=n("bv9b");function w(e,t){1&e&&i["\u0275\u0275element"](0,"mat-progress-bar",16)}function C(e,t){1&e&&i["\u0275\u0275element"](0,"div",17)}function I(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"mat-error"),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,1,"widget.title-required")," "))}var E=function(e){function t(t,n,r,i){var a=e.call(this,t,n,r)||this;return a.store=t,a.router=n,a.dialogRef=r,a.fb=i,Object(l.b)(t).authority===s.a.TENANT_ADMIN?a.bundlesScope="tenant":a.bundlesScope="system",a}return Object(r.d)(t,e),t.prototype.ngOnInit=function(){this.saveWidgetTypeAsFormGroup=this.fb.group({title:[null,[a.Validators.required]],widgetsBundle:[null,[a.Validators.required]]})},t.prototype.cancel=function(){this.dialogRef.close(null)},t.prototype.saveAs=function(){var e=this.saveWidgetTypeAsFormGroup.get("title").value,t=this.saveWidgetTypeAsFormGroup.get("widgetsBundle").value,n={widgetName:e,bundleId:t.id.id,bundleAlias:t.alias};this.dialogRef.close(n)},t.\u0275fac=function(e){return new(e||t)(i["\u0275\u0275directiveInject"](d.Store),i["\u0275\u0275directiveInject"](c.Router),i["\u0275\u0275directiveInject"](u.MatDialogRef),i["\u0275\u0275directiveInject"](a.FormBuilder))},t.\u0275cmp=i["\u0275\u0275defineComponent"]({type:t,selectors:[["tb-save-widget-type-as-dialog"]],features:[i["\u0275\u0275InheritDefinitionFeature"]],decls:31,vars:21,consts:[[3,"formGroup","ngSubmit"],["color","primary"],["translate",""],["fxFlex",""],["mat-button","","mat-icon-button","","type","button",3,"click"],[1,"material-icons"],["color","warn","mode","indeterminate",4,"ngIf"],["style","height: 4px;",4,"ngIf"],["mat-dialog-content",""],[1,"mat-block"],["matInput","","formControlName","title","required",""],[4,"ngIf"],["fxFlex","","formControlName","widgetsBundle","required","",3,"bundlesScope"],["mat-dialog-actions","","fxLayoutAlign","end center"],["mat-button","","color","primary","type","button","cdkFocusInitial","",3,"disabled","click"],["mat-raised-button","","color","primary","type","submit",3,"disabled"],["color","warn","mode","indeterminate"],[2,"height","4px"]],template:function(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"form",0),i["\u0275\u0275listener"]("ngSubmit",(function(){return t.saveAs()})),i["\u0275\u0275elementStart"](1,"mat-toolbar",1),i["\u0275\u0275elementStart"](2,"h2",2),i["\u0275\u0275text"](3,"widget.save-widget-type-as"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](4,"span",3),i["\u0275\u0275elementStart"](5,"button",4),i["\u0275\u0275listener"]("click",(function(){return t.cancel()})),i["\u0275\u0275elementStart"](6,"mat-icon",5),i["\u0275\u0275text"](7,"close"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](8,w,1,0,"mat-progress-bar",6),i["\u0275\u0275pipe"](9,"async"),i["\u0275\u0275template"](10,C,1,0,"div",7),i["\u0275\u0275pipe"](11,"async"),i["\u0275\u0275elementStart"](12,"div",8),i["\u0275\u0275elementStart"](13,"fieldset"),i["\u0275\u0275elementStart"](14,"span",2),i["\u0275\u0275text"](15,"widget.save-widget-type-as-text"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](16,"mat-form-field",9),i["\u0275\u0275elementStart"](17,"mat-label",2),i["\u0275\u0275text"](18,"widget.title"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](19,"input",10),i["\u0275\u0275template"](20,I,3,3,"mat-error",11),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](21,"tb-widgets-bundle-select",12),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](22,"div",13),i["\u0275\u0275elementStart"](23,"button",14),i["\u0275\u0275listener"]("click",(function(){return t.cancel()})),i["\u0275\u0275pipe"](24,"async"),i["\u0275\u0275text"](25),i["\u0275\u0275pipe"](26,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](27,"button",15),i["\u0275\u0275pipe"](28,"async"),i["\u0275\u0275text"](29),i["\u0275\u0275pipe"](30,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275property"]("formGroup",t.saveWidgetTypeAsFormGroup),i["\u0275\u0275advance"](8),i["\u0275\u0275property"]("ngIf",i["\u0275\u0275pipeBind1"](9,9,t.isLoading$)),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngIf",!i["\u0275\u0275pipeBind1"](11,11,t.isLoading$)),i["\u0275\u0275advance"](10),i["\u0275\u0275property"]("ngIf",t.saveWidgetTypeAsFormGroup.get("title").hasError("required")),i["\u0275\u0275advance"](1),i["\u0275\u0275propertyInterpolate"]("bundlesScope",t.bundlesScope),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("disabled",i["\u0275\u0275pipeBind1"](24,13,t.isLoading$)),i["\u0275\u0275advance"](2),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](26,15,"action.cancel")," "),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("disabled",i["\u0275\u0275pipeBind1"](28,17,t.isLoading$)||t.saveWidgetTypeAsFormGroup.invalid||!t.saveWidgetTypeAsFormGroup.dirty),i["\u0275\u0275advance"](2),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](30,19,"action.saveAs")," "))},directives:[a["\u0275angular_packages_forms_forms_y"],a.NgControlStatusGroup,a.FormGroupDirective,p.MatToolbar,m.TranslateDirective,f.b,g.MatButton,h.MatIcon,b.NgIf,u.MatDialogContent,y.MatFormField,y.MatLabel,v.MatInput,a.DefaultValueAccessor,a.NgControlStatus,a.FormControlName,a.RequiredValidator,x.a,u.MatDialogActions,f.e,S.MatProgressBar,y.MatError],pipes:[b.AsyncPipe,m.TranslatePipe],encapsulation:2}),t}(o.a);!function(){i["\u0275setClassMetadata"](E,[{type:i.Component,args:[{selector:"tb-save-widget-type-as-dialog",templateUrl:"./save-widget-type-as-dialog.component.html",styleUrls:[]}]}],(function(){return[{type:d.Store},{type:c.Router},{type:u.MatDialogRef},{type:a.FormBuilder}]}),null)}()},j22J:function(e,t,n){"use strict";n.d(t,"a",(function(){return L}));var r=n("fXoL"),i=n("3Pt+"),a=n("LRne"),o=n("8LU1"),l=n("//Q6"),s=n("T4sd"),d=n("FtGj"),c=n("JX91"),u=n("lJxs"),p=n("5+tZ"),m=n("w1tV"),f=n("sYmb"),g=n("kmnG"),h=n("A5z7"),b=n("ofXK"),y=n("qFsG"),v=n("/1cH"),x=n("NFeN"),S=n("FKr1"),w=n("d5eY"),C=["chipList"],I=["labelAutocomplete"],E=["labelInput"];function T(e,t){1&e&&(r["\u0275\u0275elementStart"](0,"mat-icon",12),r["\u0275\u0275text"](1,"close"),r["\u0275\u0275elementEnd"]())}function M(e,t){if(1&e){var n=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"mat-chip",10),r["\u0275\u0275listener"]("removed",(function(){r["\u0275\u0275restoreView"](n);var e=t.$implicit;return r["\u0275\u0275nextContext"]().remove(e)})),r["\u0275\u0275text"](1),r["\u0275\u0275template"](2,T,2,0,"mat-icon",11),r["\u0275\u0275elementEnd"]()}if(2&e){var i=t.$implicit,a=r["\u0275\u0275nextContext"]();r["\u0275\u0275property"]("selectable",!a.disabled)("removable",!a.disabled),r["\u0275\u0275advance"](1),r["\u0275\u0275textInterpolate1"](" ",i.name," "),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",!a.disabled)}}function F(e,t){if(1&e&&(r["\u0275\u0275elementStart"](0,"mat-option",13),r["\u0275\u0275element"](1,"span",14),r["\u0275\u0275pipe"](2,"highlight"),r["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit,i=r["\u0275\u0275nextContext"]();r["\u0275\u0275property"]("value",n),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("innerHTML",r["\u0275\u0275pipeBind2"](2,2,n.name,i.searchText),r["\u0275\u0275sanitizeHtml"])}}function D(e,t){1&e&&(r["\u0275\u0275elementStart"](0,"div"),r["\u0275\u0275elementStart"](1,"span",1),r["\u0275\u0275text"](2,"rulenode.no-link-labels-found"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]())}var A=function(e){return{label:e}};function P(e,t){if(1&e&&(r["\u0275\u0275elementStart"](0,"span"),r["\u0275\u0275text"](1),r["\u0275\u0275pipe"](2,"async"),r["\u0275\u0275elementEnd"]()),2&e){var n=r["\u0275\u0275nextContext"](2);r["\u0275\u0275advance"](1),r["\u0275\u0275textInterpolate1"](" ",r["\u0275\u0275pipeBind1"](2,1,n.translate.get("rulenode.no-link-label-matching",r["\u0275\u0275pureFunction1"](3,A,n.truncate.transform(n.searchText,!0,6,"..."))))," ")}}function N(e,t){if(1&e){var n=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"span"),r["\u0275\u0275elementStart"](1,"a",20),r["\u0275\u0275listener"]("click",(function(e){r["\u0275\u0275restoreView"](n);var t=r["\u0275\u0275nextContext"](2);return t.createLinkLabel(e,t.searchText)})),r["\u0275\u0275text"](2,"rulenode.create-new-link-label"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()}}function k(e,t){if(1&e){var n=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"mat-option",15),r["\u0275\u0275elementStart"](1,"div",16),r["\u0275\u0275listener"]("click",(function(e){return r["\u0275\u0275restoreView"](n),e.stopPropagation()})),r["\u0275\u0275template"](2,D,3,0,"div",17),r["\u0275\u0275template"](3,P,3,5,"ng-template",null,18,r["\u0275\u0275templateRefExtractor"]),r["\u0275\u0275template"](5,N,3,0,"span",19),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()}if(2&e){var i=r["\u0275\u0275reference"](4),a=r["\u0275\u0275nextContext"]();r["\u0275\u0275property"]("value",null),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("ngIf",!a.textIsNotEmpty(a.searchText))("ngIfElse",i),r["\u0275\u0275advance"](3),r["\u0275\u0275property"]("ngIf",a.allowCustom)}}var L=function(){function e(e,t,n){this.fb=e,this.truncate=t,this.translate=n,this.labelsList=[],this.separatorKeysCodes=[],this.labels=[],this.searchText="",this.propagateChange=function(e){},this.linksFormGroup=this.fb.group({label:[null]})}return Object.defineProperty(e.prototype,"required",{get:function(){return this.requiredValue},set:function(e){this.requiredValue=Object(o.coerceBooleanProperty)(e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"allowCustom",{get:function(){return this.allowCustomValue},set:function(e){this.allowCustomValue=Object(o.coerceBooleanProperty)(e),this.separatorKeysCodes=this.allowCustomValue?[d.ENTER,d.COMMA,d.SEMICOLON]:[]},enumerable:!1,configurable:!0}),e.prototype.registerOnChange=function(e){this.propagateChange=e},e.prototype.registerOnTouched=function(e){},e.prototype.ngOnInit=function(){var e=this;this.filteredLabels=this.linksFormGroup.get("label").valueChanges.pipe(Object(c.a)(""),Object(u.a)((function(e){return e||""})),Object(p.b)((function(t){return e.fetchLabels(t)})),Object(m.a)())},e.prototype.ngOnChanges=function(e){for(var t=!1,n=0,r=Object.keys(e);n<r.length;n++){var i=r[n],a=e[i];a.currentValue!==a.previousValue&&["allowCustom","allowedLabels"].includes(i)&&(t=!0)}t&&this.linksFormGroup.get("label").patchValue("",{emitEvent:!0})},e.prototype.setDisabledState=function(e){this.disabled=e,this.disabled?this.linksFormGroup.disable({emitEvent:!1}):this.linksFormGroup.enable({emitEvent:!1})},e.prototype.writeValue=function(e){var t=this;this.searchText="",this.labelsList.length=0,this.labels.length=0,this.modelValue=e;for(var n=0,r=Object.keys(this.allowedLabels);n<r.length;n++){var i=r[n];this.labelsList.push({name:this.allowedLabels[i].name,value:this.allowedLabels[i].value})}e&&e.forEach((function(e){t.allowedLabels[e]?t.labels.push(Object(l.e)(t.allowedLabels[e])):t.labels.push({name:e,value:e})})),this.chipList&&this.required&&(this.chipList.errorState=!this.labels.length),this.linksFormGroup.get("label").patchValue("",{emitEvent:!0})},e.prototype.displayLabelFn=function(e){return e?e.name:void 0},e.prototype.textIsNotEmpty=function(e){return!!(e&&null!=e&&e.length>0)},e.prototype.createLinkLabel=function(e,t){e.preventDefault(),this.transformLinkLabel(t)},e.prototype.add=function(e){this.matAutocomplete.isOpen&&!this.allowCustom||this.transformLinkLabel(e.value)},e.prototype.fetchLabels=function(e){if(this.searchText=e,this.searchText&&this.searchText.length){var t=this.searchText.toUpperCase();return Object(a.a)(this.labelsList.filter((function(e){return e.name.toUpperCase().includes(t)})))}return Object(a.a)(this.labelsList)},e.prototype.transformLinkLabel=function(e){if((e||"").trim()){var t=null,n=e.trim(),r=this.labelsList.find((function(e){return e.name===n}));r?t=Object(l.e)(r):this.allowCustom&&(t={name:n,value:n}),t&&this.addLabel(t)}this.clear("")},e.prototype.remove=function(e){var t=this.labels.indexOf(e);t>=0&&(this.labels.splice(t,1),this.labels.length||this.required&&(this.chipList.errorState=!0),this.updateModel())},e.prototype.selected=function(e){this.addLabel(e.option.value),this.clear("")},e.prototype.addLabel=function(e){-1===this.labels.findIndex((function(t){return t.value===e.value}))&&(this.labels.push(e),this.required&&(this.chipList.errorState=!1),this.updateModel())},e.prototype.onFocus=function(){this.linksFormGroup.get("label").updateValueAndValidity({onlySelf:!0,emitEvent:!0})},e.prototype.clear=function(e){var t=this;void 0===e&&(e=""),this.labelInput.nativeElement.value=e,this.linksFormGroup.get("label").patchValue(null,{emitEvent:!0}),setTimeout((function(){t.labelInput.nativeElement.blur(),t.labelInput.nativeElement.focus()}),0)},e.prototype.updateModel=function(){var e=this.labels.map((function(e){return e.value}));this.propagateChange(e)},e.\u0275fac=function(t){return new(t||e)(r["\u0275\u0275directiveInject"](i.FormBuilder),r["\u0275\u0275directiveInject"](s.a),r["\u0275\u0275directiveInject"](f.TranslateService))},e.\u0275cmp=r["\u0275\u0275defineComponent"]({type:e,selectors:[["tb-link-labels"]],viewQuery:function(e,t){var n;(1&e&&(r["\u0275\u0275viewQuery"](C,!0),r["\u0275\u0275viewQuery"](I,!0),r["\u0275\u0275viewQuery"](E,!0)),2&e)&&(r["\u0275\u0275queryRefresh"](n=r["\u0275\u0275loadQuery"]())&&(t.chipList=n.first),r["\u0275\u0275queryRefresh"](n=r["\u0275\u0275loadQuery"]())&&(t.matAutocomplete=n.first),r["\u0275\u0275queryRefresh"](n=r["\u0275\u0275loadQuery"]())&&(t.labelInput=n.first))},inputs:{required:"required",disabled:"disabled",allowCustom:"allowCustom",allowedLabels:"allowedLabels"},features:[r["\u0275\u0275ProvidersFeature"]([{provide:i.NG_VALUE_ACCESSOR,useExisting:Object(r.forwardRef)((function(){return e})),multi:!0}]),r["\u0275\u0275NgOnChangesFeature"]],decls:16,vars:16,consts:[[2,"width","100%",3,"formGroup"],["translate",""],["chipList",""],[3,"selectable","removable","removed",4,"ngFor","ngForOf"],["matInput","","type","text","formControlName","label","matAutocompleteOrigin","",2,"max-width","200px",3,"placeholder","matAutocompleteConnectedTo","matAutocomplete","matChipInputFor","matChipInputSeparatorKeyCodes","focusin","matChipInputTokenEnd"],["labelInput","","origin","matAutocompleteOrigin"],[1,"tb-autocomplete",3,"displayWith","optionSelected"],["labelAutocomplete","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],["class","tb-not-found",3,"value",4,"ngIf"],[3,"selectable","removable","removed"],["matChipRemove","",4,"ngIf"],["matChipRemove",""],[3,"value"],[3,"innerHTML"],[1,"tb-not-found",3,"value"],[1,"tb-not-found-content",3,"click"],[4,"ngIf","ngIfElse"],["searchNotEmpty",""],[4,"ngIf"],["translate","",3,"click"]],template:function(e,t){if(1&e&&(r["\u0275\u0275elementStart"](0,"mat-form-field",0),r["\u0275\u0275elementStart"](1,"mat-label",1),r["\u0275\u0275text"](2,"rulenode.link-labels"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](3,"mat-chip-list",null,2),r["\u0275\u0275template"](5,M,3,4,"mat-chip",3),r["\u0275\u0275elementStart"](6,"input",4,5),r["\u0275\u0275listener"]("focusin",(function(){return t.onFocus()}))("matChipInputTokenEnd",(function(e){return t.add(e)})),r["\u0275\u0275pipe"](9,"translate"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](10,"mat-autocomplete",6,7),r["\u0275\u0275listener"]("optionSelected",(function(e){return t.selected(e)})),r["\u0275\u0275template"](12,F,3,5,"mat-option",8),r["\u0275\u0275pipe"](13,"async"),r["\u0275\u0275template"](14,k,6,4,"mat-option",9),r["\u0275\u0275pipe"](15,"async"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()),2&e){var n,i=r["\u0275\u0275reference"](4),a=r["\u0275\u0275reference"](8),o=r["\u0275\u0275reference"](11);r["\u0275\u0275property"]("formGroup",t.linksFormGroup),r["\u0275\u0275advance"](5),r["\u0275\u0275property"]("ngForOf",t.labels),r["\u0275\u0275advance"](1),r["\u0275\u0275propertyInterpolate"]("placeholder",t.disabled?"":r["\u0275\u0275pipeBind1"](9,10,"rulenode.link-label")),r["\u0275\u0275property"]("matAutocompleteConnectedTo",a)("matAutocomplete",o)("matChipInputFor",i)("matChipInputSeparatorKeyCodes",t.separatorKeysCodes),r["\u0275\u0275advance"](4),r["\u0275\u0275property"]("displayWith",t.displayLabelFn),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("ngForOf",r["\u0275\u0275pipeBind1"](13,12,t.filteredLabels)),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("ngIf",0===(null==(n=r["\u0275\u0275pipeBind1"](15,14,t.filteredLabels))?null:n.length))}},directives:[g.MatFormField,i.NgControlStatusGroup,i.FormGroupDirective,g.MatLabel,f.TranslateDirective,h.MatChipList,b.NgForOf,y.MatInput,i.DefaultValueAccessor,v.MatAutocompleteTrigger,h.MatChipInput,i.NgControlStatus,i.FormControlName,v.MatAutocompleteOrigin,v.MatAutocomplete,b.NgIf,h.MatChip,x.MatIcon,h.MatChipRemove,S.MatOption],pipes:[f.TranslatePipe,b.AsyncPipe,w.a],encapsulation:2}),e}();!function(){r["\u0275setClassMetadata"](L,[{type:r.Component,args:[{selector:"tb-link-labels",templateUrl:"./link-labels.component.html",styleUrls:[],providers:[{provide:i.NG_VALUE_ACCESSOR,useExisting:Object(r.forwardRef)((function(){return L})),multi:!0}]}]}],(function(){return[{type:i.FormBuilder},{type:s.a},{type:f.TranslateService}]}),{chipList:[{type:r.ViewChild,args:["chipList"]}],matAutocomplete:[{type:r.ViewChild,args:["labelAutocomplete"]}],labelInput:[{type:r.ViewChild,args:["labelInput"]}],required:[{type:r.Input}],disabled:[{type:r.Input}],allowCustom:[{type:r.Input}],allowedLabels:[{type:r.Input}]})}()},m3bB:function(e,t,n){"use strict";(function(e){n.d(t,"c",(function(){return Ce})),n.d(t,"b",(function(){return Ie})),n.d(t,"a",(function(){return Ee}));var r=n("mrSG"),i=n("fXoL"),a=n("RxGS"),o=n("3Pt+"),l=n("FKr1"),s=n("0IaG"),d=n("7EHt"),c=n("S+vS"),u=n("Vurf"),p=n("8km5"),m=n("/Vd+"),f=n("+5dr"),g=n("C4fA"),h=n("5yfJ"),b=n("LRne"),y=n("xgIS"),v=n("vkgz"),x=n("5+tZ"),S=n("Kj3r"),w=n("/uUt"),C=n("//Q6"),I=n("YCWy"),E=n("4t2C"),T=n("gmuX"),M=n("FBAY"),F=n("yl57"),D=n("U3y+"),A=n("90vD"),P=n("l7P3"),N=n("tyNb"),k=n("sYmb"),L=n("XiUz"),O=n("8m5z"),_=n("49Ji"),B=n("WEPN"),j=n("znSr"),R=n("bTqV"),V=n("Qu3c"),z=n("NFeN"),G=n("XhcP"),U=n("/t3+"),q=n("kmnG"),$=n("qFsG"),W=n("ofXK"),H=n("STbY"),K=n("aYVl"),J=n("kRCp"),Y=n("wZkO"),X=n("mXAo"),Q=n("f0Cb"),Z=n("EbnC"),ee=n("bv9b"),te=["ruleNodeSearchInput"],ne=["ruleChainCanvas"],re=["ruleChainMenuTrigger"],ie=["tbRuleNode"],ae=["tbRuleNodeLink"],oe=["ruleNodeTypeExpansionPanels"];function le(e,t){if(1&e){var n=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"mat-expansion-panel",33,34),i["\u0275\u0275elementStart"](2,"mat-expansion-panel-header",35),i["\u0275\u0275listener"]("mouseenter",(function(e){i["\u0275\u0275restoreView"](n);var r=t.$implicit;return i["\u0275\u0275nextContext"]().typeHeaderMouseEnter(e,r)}))("mouseleave",(function(){return i["\u0275\u0275restoreView"](n),i["\u0275\u0275nextContext"]().destroyTooltips()})),i["\u0275\u0275elementStart"](3,"mat-panel-title"),i["\u0275\u0275elementStart"](4,"mat-icon"),i["\u0275\u0275text"](5),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](6,"div",36),i["\u0275\u0275text"](7),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](8,"fc-canvas",37),i["\u0275\u0275elementEnd"]()}if(2&e){var r=t.$implicit,a=i["\u0275\u0275nextContext"]();i["\u0275\u0275property"]("expanded",!0),i["\u0275\u0275advance"](5),i["\u0275\u0275textInterpolate"](a.ruleNodeTypeDescriptorsMap.get(r).icon),i["\u0275\u0275advance"](2),i["\u0275\u0275textInterpolate"](a.ruleNodeTypeDescriptorsMap.get(r).name),i["\u0275\u0275advance"](1),i["\u0275\u0275propertyInterpolate1"]("id","tb-rulchain-",r,""),i["\u0275\u0275property"]("model",a.ruleNodeTypesModel[r].model)("selectedObjects",a.ruleNodeTypesModel[r].selectedObjects)("automaticResize",!1)("userCallbacks",a.nodeLibCallbacks)("nodeWidth",170)("nodeHeight",50)("dropTargetId","tb-rulchain-canvas")}}var se=function(e){return[e]};function de(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"mat-tab",42,51),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275element"](3,"tb-event-table",52),i["\u0275\u0275elementEnd"]()),2&e){var n=i["\u0275\u0275reference"](1),r=i["\u0275\u0275nextContext"](2);i["\u0275\u0275propertyInterpolate"]("label",i["\u0275\u0275pipeBind1"](2,6,"rulenode.events")),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("debugEventTypes",i["\u0275\u0275pureFunction1"](8,se,r.debugEventTypes.DEBUG_RULE_NODE))("defaultEventType",r.debugEventTypes.DEBUG_RULE_NODE)("active",n.isActive)("tenantId",r.ruleChain.tenantId.id)("entityId",r.editingRuleNode.ruleNodeId)}}function ce(e,t){if(1&e){var n=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"tb-details-panel",38),i["\u0275\u0275listener"]("closeDetails",(function(){return i["\u0275\u0275restoreView"](n),i["\u0275\u0275nextContext"]().onEditRuleNodeClosed()}))("toggleDetailsEditMode",(function(){return i["\u0275\u0275restoreView"](n),i["\u0275\u0275nextContext"]().onRevertRuleNodeEdit()}))("applyDetails",(function(){return i["\u0275\u0275restoreView"](n),i["\u0275\u0275nextContext"]().saveRuleNode()})),i["\u0275\u0275pipe"](1,"translate"),i["\u0275\u0275elementStart"](2,"div",39),i["\u0275\u0275element"](3,"div",40),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](4,"mat-tab-group",41),i["\u0275\u0275listener"]("selectedIndexChange",(function(e){return i["\u0275\u0275restoreView"](n),i["\u0275\u0275nextContext"]().selectedRuleNodeTabIndex=e})),i["\u0275\u0275elementStart"](5,"mat-tab",42),i["\u0275\u0275pipe"](6,"translate"),i["\u0275\u0275element"](7,"tb-rule-node",43,44),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](9,de,4,10,"mat-tab",45),i["\u0275\u0275elementStart"](10,"mat-tab",42),i["\u0275\u0275pipe"](11,"translate"),i["\u0275\u0275elementStart"](12,"div",46),i["\u0275\u0275elementStart"](13,"div",47),i["\u0275\u0275elementStart"](14,"div",48),i["\u0275\u0275text"](15),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](16,"div"),i["\u0275\u0275text"](17,"\xa0"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](18,"div",49),i["\u0275\u0275text"](19),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](20,"div"),i["\u0275\u0275text"](21,"\xa0"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](22,"div",50),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()}if(2&e){var r=i["\u0275\u0275reference"](8),a=i["\u0275\u0275nextContext"]();i["\u0275\u0275propertyInterpolate"]("headerTitle",a.editingRuleNode.name),i["\u0275\u0275propertyInterpolate"]("headerSubtitle",i["\u0275\u0275pipeBind1"](1,17,a.ruleNodeTypeDescriptorsMap.get(a.editingRuleNode.component.type).name)+" - "+a.editingRuleNode.component.name),i["\u0275\u0275property"]("isReadOnly",a.selectedRuleNodeTabIndex>0)("isAlwaysEdit",!0)("theForm",r.ruleNodeFormGroup),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("tb-help",a.helpLinkIdForRuleNodeType()),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("selectedIndex",a.selectedRuleNodeTabIndex),i["\u0275\u0275advance"](1),i["\u0275\u0275propertyInterpolate"]("label",i["\u0275\u0275pipeBind1"](6,19,"rulenode.details")),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ruleNode",a.editingRuleNode)("ruleChainId",null==a.ruleChain.id?null:a.ruleChain.id.id)("isEdit",!0)("isReadOnly",!1),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngIf",a.editingRuleNode.ruleNodeId),i["\u0275\u0275advance"](1),i["\u0275\u0275propertyInterpolate"]("label",i["\u0275\u0275pipeBind1"](11,21,"rulenode.help")),i["\u0275\u0275advance"](5),i["\u0275\u0275textInterpolate"](a.editingRuleNode.component.name),i["\u0275\u0275advance"](4),i["\u0275\u0275textInterpolate"](a.editingRuleNode.component.configurationDescriptor.nodeDefinition.description),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("innerHtml",a.editingRuleNode.component.configurationDescriptor.nodeDefinition.details,i["\u0275\u0275sanitizeHtml"])}}function ue(e,t){if(1&e){var n=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"tb-details-panel",38),i["\u0275\u0275listener"]("closeDetails",(function(){return i["\u0275\u0275restoreView"](n),i["\u0275\u0275nextContext"]().onEditRuleNodeLinkClosed()}))("toggleDetailsEditMode",(function(){return i["\u0275\u0275restoreView"](n),i["\u0275\u0275nextContext"]().onRevertRuleNodeLinkEdit()}))("applyDetails",(function(){return i["\u0275\u0275restoreView"](n),i["\u0275\u0275nextContext"]().saveRuleNodeLink()})),i["\u0275\u0275pipe"](1,"translate"),i["\u0275\u0275elementStart"](2,"div",39),i["\u0275\u0275element"](3,"div",40),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](4,"tb-rule-node-link",53,54),i["\u0275\u0275listener"]("ngModelChange",(function(e){return i["\u0275\u0275restoreView"](n),i["\u0275\u0275nextContext"]().editingRuleNodeLink=e})),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()}if(2&e){var r=i["\u0275\u0275reference"](5),a=i["\u0275\u0275nextContext"]();i["\u0275\u0275propertyInterpolate"]("headerTitle",a.editingRuleNodeLink.label),i["\u0275\u0275propertyInterpolate"]("headerSubtitle",i["\u0275\u0275pipeBind1"](1,9,"rulenode.link-details")),i["\u0275\u0275property"]("isReadOnly",!1)("isAlwaysEdit",!0)("theForm",r.ruleNodeLinkFormGroup),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("tb-help","ruleEngine"),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngModel",a.editingRuleNodeLink)("allowedLabels",a.editingRuleNodeLinkLabels)("allowCustom",a.editingRuleNodeAllowCustomLabels)}}function pe(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"mat-icon"),i["\u0275\u0275text"](1),i["\u0275\u0275elementEnd"]()),2&e){var n=i["\u0275\u0275nextContext"]().contextInfo;i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate"](n.icon)}}function me(e,t){if(1&e&&i["\u0275\u0275element"](0,"img",62),2&e){var n=i["\u0275\u0275nextContext"]().contextInfo;i["\u0275\u0275property"]("src",n.iconUrl,i["\u0275\u0275sanitizeUrl"])}}function fe(e,t){1&e&&i["\u0275\u0275element"](0,"mat-divider")}function ge(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"span",67),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"keyboardShortcut"),i["\u0275\u0275elementEnd"]()),2&e){var n=i["\u0275\u0275nextContext"](2).$implicit;i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,1,n.shortcut),"")}}function he(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"mat-icon"),i["\u0275\u0275text"](1),i["\u0275\u0275elementEnd"]()),2&e){var n=i["\u0275\u0275nextContext"](2).$implicit;i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate"](n.icon)}}function be(e,t){if(1&e){var n=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"button",64),i["\u0275\u0275listener"]("click",(function(){i["\u0275\u0275restoreView"](n);var e=i["\u0275\u0275nextContext"]().$implicit,t=i["\u0275\u0275nextContext"](2);return e.action(t.contextMenuEvent)})),i["\u0275\u0275template"](1,ge,3,3,"span",65),i["\u0275\u0275template"](2,he,2,1,"mat-icon",56),i["\u0275\u0275elementStart"](3,"span",66),i["\u0275\u0275text"](4),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()}if(2&e){var r=i["\u0275\u0275nextContext"]().$implicit;i["\u0275\u0275property"]("disabled",!r.enabled),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",r.shortcut),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",r.icon),i["\u0275\u0275advance"](2),i["\u0275\u0275textInterpolate"](r.value)}}function ye(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"div"),i["\u0275\u0275template"](1,fe,1,0,"mat-divider",56),i["\u0275\u0275template"](2,be,5,4,"button",63),i["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",n.divider),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",!n.divider)}}function ve(e,t){if(1&e){var n=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"div",55),i["\u0275\u0275listener"]("mouseleave",(function(){return i["\u0275\u0275restoreView"](n),i["\u0275\u0275nextContext"]().onRuleChainContextMenuMouseLeave()})),i["\u0275\u0275elementStart"](1,"div"),i["\u0275\u0275template"](2,pe,2,1,"mat-icon",56),i["\u0275\u0275template"](3,me,1,1,"img",57),i["\u0275\u0275elementStart"](4,"div",58),i["\u0275\u0275elementStart"](5,"div",59),i["\u0275\u0275text"](6),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](7,"div",60),i["\u0275\u0275text"](8),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](9,ye,3,2,"div",61),i["\u0275\u0275elementEnd"]()}if(2&e){var r=t.contextInfo;i["\u0275\u0275advance"](1),i["\u0275\u0275classMapInterpolate1"]("tb-context-menu-header ",r.headerClass,""),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",!r.iconUrl),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",r.iconUrl),i["\u0275\u0275advance"](3),i["\u0275\u0275textInterpolate"](r.title),i["\u0275\u0275advance"](2),i["\u0275\u0275textInterpolate"](r.subtitle),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngForOf",r.menuItems)}}var xe=function(e){return{"tb-hide":e}};function Se(e,t){1&e&&i["\u0275\u0275element"](0,"mat-progress-bar",14)}function we(e,t){1&e&&i["\u0275\u0275element"](0,"mat-progress-bar",15)}var Ce=function(t){function n(e,n,r,i,a,o,l,s,d,c){var u=t.call(this,e)||this;return u.store=e,u.route=n,u.router=r,u.ruleChainService=i,u.authService=a,u.translate=o,u.itembuffer=l,u.dialog=s,u.dialogService=d,u.fb=c,u.width="100%",u.height="100%",u.eventTypes=A.b,u.debugEventTypes=A.a,u.ruleChainMenuPosition={x:"0px",y:"0px"},u.ruleNodeTypeDescriptorsMap=f.f,u.ruleNodeTypesLibraryArray=f.g,u.isInvalid=!1,u.errorTooltips={},u.isFullscreen=!1,u.selectedRuleNodeTabIndex=0,u.editingRuleNode=null,u.isEditingRuleNode=!1,u.editingRuleNodeIndex=-1,u.editingRuleNodeAllowCustomLabels=!1,u.editingRuleNodeLink=null,u.isEditingRuleNodeLink=!1,u.editingRuleNodeLinkIndex=-1,u.hotKeys=[],u.enableHotKeys=!0,u.isLibraryOpen=!0,u.ruleNodeSearch="",u.ruleNodeTypeSearch="",u.ruleChainModel={nodes:[],edges:[]},u.selectedObjects=[],u.editCallbacks={edgeDoubleClick:function(e,t){u.openLinkDetails(t)},edgeEdit:function(e,t){u.openLinkDetails(t)},nodeCallbacks:{doubleClick:function(e,t){u.openNodeDetails(t)},nodeEdit:function(e,t){u.openNodeDetails(t)},mouseEnter:u.displayNodeDescriptionTooltip.bind(u),mouseLeave:u.destroyTooltips.bind(u),mouseDown:u.destroyTooltips.bind(u)},isValidEdge:function(e,t){return e.type===m.f.rightConnectorType&&t.type===m.f.leftConnectorType},createEdge:function(e,t){var n=u.ruleChainCanvas.modelService.nodes.getNodeByConnectorId(t.source);if(n.component.type===f.c.INPUT){if(u.ruleChainCanvas.modelService.nodes.getNodeByConnectorId(t.destination).component.type===f.c.RULE_CHAIN)return h.a;var r=u.ruleChainModel.edges.find((function(e){return e.source===u.inputConnectorId+""}));return r&&u.ruleChainCanvas.modelService.edges.delete(r),Object(b.a)(t)}if(t.label)return t.labels||(t.labels=t.label.split(" / ")),Object(b.a)(t);var i=u.ruleChainService.getRuleNodeSupportedLinks(n.component),a=u.ruleChainService.ruleNodeAllowCustomLinks(n.component);return u.enableHotKeys=!1,u.addRuleNodeLink(t,i,a).pipe(Object(v.a)((function(){u.enableHotKeys=!0})),Object(x.b)((function(e){return e?Object(b.a)(e):h.a})))},dropNode:function(e,t){u.addRuleNode(t)}},u.ruleNodeTypesModel={},u.nodeLibCallbacks={nodeCallbacks:{mouseEnter:u.displayLibNodeDescriptionTooltip.bind(u),mouseLeave:u.destroyTooltips.bind(u),mouseDown:u.destroyTooltips.bind(u)}},u.flowchartConstants=m.f,u.rxSubscription=u.route.data.subscribe((function(){u.reset(),u.init()})),u}return Object(r.d)(n,t),Object.defineProperty(n.prototype,"isDirty",{get:function(){return this.isDirtyValue||this.isImport},enumerable:!1,configurable:!0}),n.prototype.ngOnInit=function(){},n.prototype.ngAfterViewInit=function(){var e=this;Object(y.a)(this.ruleNodeSearchInputField.nativeElement,"keyup").pipe(Object(S.a)(150),Object(w.a)(),Object(v.a)((function(){e.updateRuleChainLibrary()}))).subscribe(),this.ruleChainCanvas.adjustCanvasSize(!0)},n.prototype.ngOnDestroy=function(){t.prototype.ngOnDestroy.call(this),this.rxSubscription.unsubscribe()},n.prototype.onSearchTextUpdated=function(e){this.ruleNodeSearch=e,this.updateRuleNodesHighlight()},n.prototype.init=function(){if(this.initHotKeys(),this.isImport=this.route.snapshot.data.import,this.isImport){var e=this.itembuffer.getRuleChainImport();this.ruleChain=e.ruleChain,this.ruleChainMetaData=e.resolvedMetadata}else this.ruleChain=this.route.snapshot.data.ruleChain,this.ruleChainMetaData=this.route.snapshot.data.ruleChainMetaData;this.ruleNodeComponents=this.route.snapshot.data.ruleNodeComponents;for(var t=0,n=f.g;t<n.length;t++){var r=n[t];f.f.get(r).special||(this.ruleNodeTypesModel[r]={model:{nodes:[],edges:[]},selectedObjects:[]})}this.updateRuleChainLibrary(),this.createRuleChainModel()},n.prototype.reset=function(){this.selectedObjects=[],this.ruleChainModel.nodes=[],this.ruleChainModel.edges=[],this.ruleNodeTypesModel={},this.ruleChainCanvas&&this.ruleChainCanvas.adjustCanvasSize(!0),this.isEditingRuleNode=!1,this.isEditingRuleNodeLink=!1,this.updateRuleNodesHighlight()},n.prototype.initHotKeys=function(){var e=this;this.hotKeys.length||(this.hotKeys.push(new F.a("ctrl+a",(function(t){return!e.enableHotKeys||(t.preventDefault(),e.ruleChainCanvas.modelService.selectAll(),!1)}),["INPUT","SELECT","TEXTAREA"],this.translate.instant("rulenode.select-all-objects"))),this.hotKeys.push(new F.a("ctrl+c",(function(t){return!e.enableHotKeys||(t.preventDefault(),e.copyRuleNodes(),!1)}),["INPUT","SELECT","TEXTAREA"],this.translate.instant("rulenode.copy-selected"))),this.hotKeys.push(new F.a("ctrl+v",(function(t){return!e.enableHotKeys||(t.preventDefault(),e.itembuffer.hasRuleNodes()&&e.pasteRuleNodes(),!1)}),["INPUT","SELECT","TEXTAREA"],this.translate.instant("action.paste"))),this.hotKeys.push(new F.a("esc",(function(t){return!e.enableHotKeys||(t.preventDefault(),t.stopPropagation(),e.ruleChainCanvas.modelService.deselectAll(),!1)}),["INPUT","SELECT","TEXTAREA"],this.translate.instant("rulenode.deselect-all-objects"))),this.hotKeys.push(new F.a("ctrl+s",(function(t){return!e.enableHotKeys||(t.preventDefault(),e.saveRuleChain(),!1)}),["INPUT","SELECT","TEXTAREA"],this.translate.instant("action.apply"))),this.hotKeys.push(new F.a("ctrl+z",(function(t){return!e.enableHotKeys||(t.preventDefault(),e.revertRuleChain(),!1)}),["INPUT","SELECT","TEXTAREA"],this.translate.instant("action.decline-changes"))),this.hotKeys.push(new F.a("del",(function(t){return!e.enableHotKeys||(t.preventDefault(),e.ruleChainCanvas.modelService.deleteSelected(),!1)}),["INPUT","SELECT","TEXTAREA"],this.translate.instant("rulenode.delete-selected-objects"))))},n.prototype.updateRuleChainLibrary=function(){var e=this.ruleNodeTypeSearch.toUpperCase(),t=this.ruleNodeComponents.filter((function(t){return t.name.toUpperCase().includes(e)}));this.loadRuleChainLibrary(t)},n.prototype.loadRuleChainLibrary=function(e){for(var t=this,n=0,r=Object.keys(this.ruleNodeTypesModel);n<r.length;n++){var i=r[n];this.ruleNodeTypesModel[i].model.nodes.length=0}if(e.forEach((function(e){var n=e.type,r=t.ruleNodeTypesModel[n].model,i=f.f.get(f.c[n]),a=i.icon,o=null;e.configurationDescriptor.nodeDefinition.icon&&(a=e.configurationDescriptor.nodeDefinition.icon),e.configurationDescriptor.nodeDefinition.iconUrl&&(o=e.configurationDescriptor.nodeDefinition.iconUrl);var l={id:"node-lib-"+n+"-"+r.nodes.length,component:e,name:"",nodeClass:i.nodeClass,icon:a,iconUrl:o,x:30,y:10+50*r.nodes.length,connectors:[]};e.configurationDescriptor.nodeDefinition.inEnabled&&l.connectors.push({type:m.f.leftConnectorType,id:2*r.nodes.length+""}),e.configurationDescriptor.nodeDefinition.outEnabled&&l.connectors.push({type:m.f.rightConnectorType,id:2*r.nodes.length+1+""}),r.nodes.push(l)})),this.expansionPanels)for(var a=function(e){var t=o.expansionPanels.find((function(t,n){return n===e}));if(t){var n=f.g[e];o.ruleNodeTypesModel[n].model.nodes.length?t.open():t.close()}},o=this,l=0;l<f.g.length;l++)a(l)},n.prototype.createRuleChainModel=function(){var e=this;this.nextNodeID=1,this.nextConnectorID=1,this.selectedObjects=[],this.ruleChainModel.nodes=[],this.ruleChainModel.edges=[],this.inputConnectorId=this.nextConnectorID++,this.ruleChainModel.nodes.push({id:"rule-chain-node-"+this.nextNodeID++,component:p.a,name:"",nodeClass:f.f.get(f.c.INPUT).nodeClass,icon:f.f.get(f.c.INPUT).icon,readonly:!0,x:50,y:150,connectors:[{type:m.f.rightConnectorType,id:this.inputConnectorId+""}]});var t=[];if(this.ruleChainMetaData.nodes.forEach((function(n){var r=e.ruleChainService.getRuleNodeComponentByClazz(n.type),i=f.f.get(r.type),a=i.icon,o=null;r.configurationDescriptor.nodeDefinition.icon&&(a=r.configurationDescriptor.nodeDefinition.icon),r.configurationDescriptor.nodeDefinition.iconUrl&&(o=r.configurationDescriptor.nodeDefinition.iconUrl);var l={id:"rule-chain-node-"+e.nextNodeID++,ruleNodeId:n.id,additionalInfo:n.additionalInfo,configuration:n.configuration,debugMode:n.debugMode,x:Math.round(n.additionalInfo.layoutX),y:Math.round(n.additionalInfo.layoutY),component:r,name:n.name,nodeClass:i.nodeClass,icon:a,iconUrl:o,connectors:[]};r.configurationDescriptor.nodeDefinition.inEnabled&&l.connectors.push({type:m.f.leftConnectorType,id:e.nextConnectorID+++""}),r.configurationDescriptor.nodeDefinition.outEnabled&&l.connectors.push({type:m.f.rightConnectorType,id:e.nextConnectorID+++""}),t.push(l),e.ruleChainModel.nodes.push(l)})),this.ruleChainMetaData.firstNodeIndex>-1){var n=t[this.ruleChainMetaData.firstNodeIndex];if(n){var r=n.connectors.filter((function(e){return e.type===m.f.leftConnectorType}));if(r&&r.length){var i={source:this.inputConnectorId+"",destination:r[0].id};this.ruleChainModel.edges.push(i)}}}if(this.ruleChainMetaData.connections){var a={};this.ruleChainMetaData.connections.forEach((function(n){var r=t[n.fromIndex],i=t[n.toIndex];if(r&&i){var o=r.connectors.filter((function(e){return e.type===m.f.rightConnectorType})),l=i.connectors.filter((function(e){return e.type===m.f.leftConnectorType}));if(o&&o.length&&l&&l.length){var s=o[0].id,d=l[0].id,c=s+"_"+d,u=a[c];u?(u.label+=" / "+n.type,u.labels.push(n.type)):(u={source:s,destination:d,label:n.type,labels:[n.type]},a[c]=u,e.ruleChainModel.edges.push(u))}}}))}if(this.ruleChainMetaData.ruleChainConnections){var o=this.ruleChainMetaData.targetRuleChainsMap,l={},s={};this.ruleChainMetaData.ruleChainConnections.forEach((function(n){var r=o[n.targetRuleChainId.id];if(n.additionalInfo&&n.additionalInfo.ruleChainNodeId){var i=l[n.additionalInfo.ruleChainNodeId];i||(i={id:"rule-chain-node-"+e.nextNodeID++,name:r.name?r.name:"Unresolved",targetRuleChainId:r.name?n.targetRuleChainId.id:null,error:r.name?void 0:e.translate.instant("rulenode.invalid-target-rulechain"),additionalInfo:n.additionalInfo,x:Math.round(n.additionalInfo.layoutX),y:Math.round(n.additionalInfo.layoutY),component:p.b,nodeClass:f.f.get(f.c.RULE_CHAIN).nodeClass,icon:f.f.get(f.c.RULE_CHAIN).icon,connectors:[{type:m.f.leftConnectorType,id:e.nextConnectorID+++""}]},l[n.additionalInfo.ruleChainNodeId]=i,e.ruleChainModel.nodes.push(i));var a=t[n.fromIndex];if(a){var d=a.connectors.filter((function(e){return e.type===m.f.rightConnectorType}));if(d&&d.length){var c=d[0].id,u=i.connectors[0].id,g=c+"_"+u,h=s[g];h?(h.label+=" / "+n.type,h.labels.push(n.type)):(h={source:c,destination:u,label:n.type,labels:[n.type]},s[g]=h,e.ruleChainModel.edges.push(h))}}}}))}this.ruleChainCanvas&&this.ruleChainCanvas.adjustCanvasSize(!0),this.isDirtyValue=!1,this.updateRuleNodesHighlight(),this.validate()},n.prototype.openRuleChainContextMenu=function(e){if(this.ruleChainCanvas.modelService&&!e.ctrlKey&&!e.metaKey){var t=e.clientX,n=e.clientY,r=this.ruleChainCanvas.modelService.getItemInfoAtPoint(t,n),i=this.prepareContextMenu(r);i.menuItems&&i.menuItems.length>0&&(e.preventDefault(),e.stopPropagation(),this.contextMenuEvent=e,this.ruleChainMenuPosition.x=t+"px",this.ruleChainMenuPosition.y=n+"px",this.ruleChainMenuTrigger.menuData={contextInfo:i},this.ruleChainMenuTrigger.openMenu())}},n.prototype.onRuleChainContextMenuMouseLeave=function(){this.ruleChainMenuTrigger.closeMenu()},n.prototype.prepareContextMenu=function(e){return this.objectsSelected()||!e.node&&!e.edge?this.prepareRuleChainContextMenu():e.node?this.prepareRuleNodeContextMenu(e.node):e.edge?this.prepareEdgeContextMenu(e.edge):void 0},n.prototype.prepareRuleChainContextMenu=function(){var e=this,t={headerClass:"tb-rulechain-header",icon:"settings_ethernet",title:this.ruleChain.name,subtitle:this.translate.instant("rulechain.rulechain"),menuItems:[]};return this.ruleChainCanvas.modelService.nodes.getSelectedNodes().length&&t.menuItems.push({action:function(){e.copyRuleNodes()},enabled:!0,value:"rulenode.copy-selected",icon:"content_copy",shortcut:"M-C"}),t.menuItems.push({action:function(t){e.pasteRuleNodes(t)},enabled:this.itembuffer.hasRuleNodes(),value:"action.paste",icon:"content_paste",shortcut:"M-V"}),t.menuItems.push({divider:!0}),this.objectsSelected()?(t.menuItems.push({action:function(){e.ruleChainCanvas.modelService.deselectAll()},enabled:!0,value:"rulenode.deselect-all",icon:"tab_unselected",shortcut:"Esc"}),t.menuItems.push({action:function(){e.ruleChainCanvas.modelService.deleteSelected()},enabled:!0,value:"rulenode.delete-selected",icon:"clear",shortcut:"Del"})):t.menuItems.push({action:function(){e.ruleChainCanvas.modelService.selectAll()},enabled:!0,value:"rulenode.select-all",icon:"select_all",shortcut:"M-A"}),t.menuItems.push({divider:!0}),t.menuItems.push({action:function(){e.saveRuleChain()},enabled:!(this.isInvalid||!this.isDirty&&!this.isImport),value:"action.apply-changes",icon:"done",shortcut:"M-S"}),t.menuItems.push({action:function(){e.revertRuleChain()},enabled:this.isDirty,value:"action.decline-changes",icon:"close",shortcut:"M-Z"}),t},n.prototype.prepareRuleNodeContextMenu=function(e){var t=this,n={headerClass:e.nodeClass,icon:e.icon,iconUrl:e.iconUrl,title:e.name,subtitle:e.component.name,menuItems:[]};return e.readonly||(n.menuItems.push({action:function(){t.openNodeDetails(e)},enabled:!0,value:"rulenode.details",icon:"menu"}),n.menuItems.push({action:function(){t.copyNode(e)},enabled:!0,value:"action.copy",icon:"content_copy"}),n.menuItems.push({action:function(){t.ruleChainCanvas.modelService.nodes.delete(e)},enabled:!0,value:"action.delete",icon:"clear",shortcut:"M-X"})),n},n.prototype.prepareEdgeContextMenu=function(e){var t=this,n={headerClass:"tb-link-header",icon:"trending_flat",title:e.label,subtitle:this.translate.instant("rulenode.link"),menuItems:[]};return this.ruleChainCanvas.modelService.nodes.getNodeByConnectorId(e.source).component.type!==f.c.INPUT&&n.menuItems.push({action:function(){t.openLinkDetails(e)},enabled:!0,value:"rulenode.details",icon:"menu"}),n.menuItems.push({action:function(){t.ruleChainCanvas.modelService.edges.delete(e)},enabled:!0,value:"action.delete",icon:"clear",shortcut:"M-X"}),n},n.prototype.onModelChanged=function(){this.isDirtyValue=!0,this.validate()},n.prototype.helpLinkIdForRuleNodeType=function(){var e=null;return this.editingRuleNode&&(e=this.editingRuleNode.component),Object(f.d)(e)},n.prototype.openNodeDetails=function(e){var t=this;e.component.type!==f.c.INPUT&&(this.enableHotKeys=!1,this.updateErrorTooltips(!0),this.isEditingRuleNodeLink=!1,this.editingRuleNodeLink=null,this.isEditingRuleNode=!0,this.editingRuleNodeIndex=this.ruleChainModel.nodes.indexOf(e),this.editingRuleNode=Object(C.e)(e,["component"]),setTimeout((function(){t.ruleNodeComponent.ruleNodeFormGroup.markAsPristine()}),0))},n.prototype.openLinkDetails=function(e){var t=this,n=this.ruleChainCanvas.modelService.nodes.getNodeByConnectorId(e.source);n.component.type!==f.c.INPUT&&(this.enableHotKeys=!1,this.updateErrorTooltips(!0),this.isEditingRuleNode=!1,this.editingRuleNode=null,this.editingRuleNodeLinkLabels=this.ruleChainService.getRuleNodeSupportedLinks(n.component),this.editingRuleNodeAllowCustomLabels=this.ruleChainService.ruleNodeAllowCustomLinks(n.component),this.isEditingRuleNodeLink=!0,this.editingRuleNodeLinkIndex=this.ruleChainModel.edges.indexOf(e),this.editingRuleNodeLink=Object(C.e)(e),setTimeout((function(){t.ruleNodeLinkComponent.ruleNodeLinkFormGroup.markAsPristine()}),0))},n.prototype.copyNode=function(e){this.itembuffer.copyRuleNodes([e],[])},n.prototype.copyRuleNodes=function(){var e=this,t=this.ruleChainCanvas.modelService.nodes.getSelectedNodes(),n=this.ruleChainCanvas.modelService.edges.getSelectedEdges(),r=[];n.forEach((function(n){var i=e.ruleChainCanvas.modelService.nodes.getNodeByConnectorId(n.source),a=e.ruleChainCanvas.modelService.nodes.getNodeByConnectorId(n.destination),o=i.component.type===f.c.INPUT,l=t.indexOf(i),s=t.indexOf(a);if((o||l>-1)&&s>-1){var d={isInputSource:o,fromIndex:l,toIndex:s,label:n.label,labels:n.labels};r.push(d)}})),this.itembuffer.copyRuleNodes(t,r)},n.prototype.pasteRuleNodes=function(t){var n,r,i=this,a=e(this.ruleChainCanvas.modelService.canvasHtmlElement);if(t){var o=a.offset();n=Math.round(t.clientX-o.left),r=Math.round(t.clientY-o.top)}else{var l=a.parent(),s=l.scrollTop();n=l.scrollLeft()+l.width()/2,r=s+l.height()/2}var d=this.itembuffer.pasteRuleNodes(n,r);if(d){this.ruleChainCanvas.modelService.deselectAll();var c=[];d.nodes.forEach((function(e){e.id="rule-chain-node-"+i.nextNodeID++;var t=e.component;t.configurationDescriptor.nodeDefinition.inEnabled&&e.connectors.push({type:m.f.leftConnectorType,id:i.nextConnectorID+++""}),t.configurationDescriptor.nodeDefinition.outEnabled&&e.connectors.push({type:m.f.rightConnectorType,id:i.nextConnectorID+++""}),c.push(e),i.ruleChainModel.nodes.push(e),i.ruleChainCanvas.modelService.nodes.select(e)})),d.connections.forEach((function(e){var t=c[e.fromIndex],n=c[e.toIndex];if((e.isInputSource||t)&&n){var r=void 0,a=void 0;if(e.isInputSource){r=i.inputConnectorId+"";var o=i.ruleChainModel.edges.find((function(e){return e.source===i.inputConnectorId+""}));o&&i.ruleChainCanvas.modelService.edges.delete(o)}else{var l=i.ruleChainCanvas.modelService.nodes.getConnectorsByType(t,m.f.rightConnectorType);l&&l.length&&(r=l[0].id)}var s=i.ruleChainCanvas.modelService.nodes.getConnectorsByType(n,m.f.leftConnectorType);if(s&&s.length&&(a=s[0].id),r&&a){var d={source:r,destination:a,label:e.label,labels:e.labels};i.ruleChainModel.edges.push(d),i.ruleChainCanvas.modelService.edges.select(d)}}})),this.updateRuleNodesHighlight(),this.validate(),this.onModelChanged()}},n.prototype.onDetailsDrawerClosed=function(){this.onEditRuleNodeClosed(),this.onEditRuleNodeLinkClosed(),this.enableHotKeys=!0,this.updateErrorTooltips(!1)},n.prototype.onEditRuleNodeClosed=function(){this.editingRuleNode=null,this.isEditingRuleNode=!1},n.prototype.onEditRuleNodeLinkClosed=function(){this.editingRuleNodeLink=null,this.isEditingRuleNodeLink=!1},n.prototype.onRevertRuleNodeEdit=function(){this.ruleNodeComponent.ruleNodeFormGroup.markAsPristine();var e=this.ruleChainModel.nodes[this.editingRuleNodeIndex];this.editingRuleNode=Object(C.e)(e,["component"])},n.prototype.onRevertRuleNodeLinkEdit=function(){this.ruleNodeLinkComponent.ruleNodeLinkFormGroup.markAsPristine();var e=this.ruleChainModel.edges[this.editingRuleNodeLinkIndex];this.editingRuleNodeLink=Object(C.e)(e)},n.prototype.saveRuleNode=function(){this.ruleNodeComponent.validate(),this.ruleNodeComponent.ruleNodeFormGroup.valid&&(this.ruleNodeComponent.ruleNodeFormGroup.markAsPristine(),this.editingRuleNode.error&&delete this.editingRuleNode.error,this.ruleChainModel.nodes[this.editingRuleNodeIndex]=this.editingRuleNode,this.editingRuleNode=Object(C.e)(this.editingRuleNode,["component"]),this.onModelChanged(),this.updateRuleNodesHighlight())},n.prototype.saveRuleNodeLink=function(){this.ruleNodeLinkComponent.ruleNodeLinkFormGroup.markAsPristine(),this.ruleChainModel.edges[this.editingRuleNodeLinkIndex]=this.editingRuleNodeLink,this.editingRuleNodeLink=Object(C.e)(this.editingRuleNodeLink),this.onModelChanged()},n.prototype.typeHeaderMouseEnter=function(e,t){var n=f.f.get(t);this.displayTooltip(e,'<div class="tb-rule-node-tooltip tb-lib-tooltip"><div id="tb-node-content" layout="column"><div class="tb-node-title">'+this.translate.instant(n.name)+'</div><div class="tb-node-details">'+this.translate.instant(n.details)+"</div></div></div>")},n.prototype.displayLibNodeDescriptionTooltip=function(e,t){this.displayTooltip(e,'<div class="tb-rule-node-tooltip tb-lib-tooltip"><div id="tb-node-content" layout="column"><div class="tb-node-title">'+t.component.name+'</div><div class="tb-node-description">'+t.component.configurationDescriptor.nodeDefinition.description+'</div><div class="tb-node-details">'+t.component.configurationDescriptor.nodeDefinition.details+"</div></div></div>")},n.prototype.displayNodeDescriptionTooltip=function(e,t){if(!this.errorTooltips[t.id]){var n,r=void 0,i=void 0;t.component.type===f.c.INPUT?(n=this.translate.instant(f.f.get(f.c.INPUT).name),r=this.translate.instant(f.f.get(f.c.INPUT).details)):(n=t.name,r=this.translate.instant(f.f.get(t.component.type).name)+" - "+t.component.name,t.additionalInfo&&(i=t.additionalInfo.description));var a='<div class="tb-rule-node-tooltip"><div id="tb-node-content" layout="column"><div class="tb-node-title">'+n+'</div><div class="tb-node-description">'+r+"</div>";i&&(a+='<div class="tb-node-details">'+i+"</div>"),a+="</div></div>",this.displayTooltip(e,a)}},n.prototype.destroyTooltips=function(){this.tooltipTimeout&&(clearTimeout(this.tooltipTimeout),this.tooltipTimeout=null),e.tooltipster.instances().forEach((function(e){e.isErrorTooltip||e.destroy()}))},n.prototype.updateRuleNodesHighlight=function(){for(var e=0,t=this.ruleChainModel.nodes;e<t.length;e++){t[e].highlighted=!1}if(this.ruleNodeSearch){var n=this.ruleNodeSearch.toUpperCase(),r=this.ruleChainModel.nodes.filter((function(e){return e.name.toUpperCase().includes(n)}));if(r)for(var i=0,a=r;i<a.length;i++){a[i].highlighted=!0}}this.ruleChainCanvas&&this.ruleChainCanvas.modelService.detectChanges()},n.prototype.objectsSelected=function(){return this.ruleChainCanvas.modelService.nodes.getSelectedNodes().length>0||this.ruleChainCanvas.modelService.edges.getSelectedEdges().length>0},n.prototype.deleteSelected=function(){this.ruleChainCanvas.modelService.deleteSelected()},n.prototype.isDebugModeEnabled=function(){return void 0!==this.ruleChainModel.nodes.find((function(e){return e.debugMode}))},n.prototype.resetDebugModeInAllNodes=function(){var e=!1;this.ruleChainModel.nodes.forEach((function(t){t.component.type!==f.c.INPUT&&t.component.type!==f.c.RULE_CHAIN&&(e=e||t.debugMode,t.debugMode=!1)})),e&&this.onModelChanged()},n.prototype.validate=function(){var e=this;setTimeout((function(){e.isInvalid=!1,e.ruleChainModel.nodes.forEach((function(t){t.error&&(e.isInvalid=!0),e.updateNodeErrorTooltip(t)}))}),0)},n.prototype.saveRuleChain=function(){var e=this;(this.isImport?this.ruleChainService.saveRuleChain(this.ruleChain):Object(b.a)(this.ruleChain)).subscribe((function(t){e.ruleChain=t;var n={ruleChainId:e.ruleChain.id,nodes:[],connections:[],ruleChainConnections:[]},r=[];e.ruleChainModel.nodes.forEach((function(e){if(e.component.type!==f.c.INPUT&&e.component.type!==f.c.RULE_CHAIN){var t={id:e.ruleNodeId,type:e.component.clazz,name:e.name,configuration:e.configuration,additionalInfo:e.additionalInfo?e.additionalInfo:{},debugMode:e.debugMode};t.additionalInfo.layoutX=Math.round(e.x),t.additionalInfo.layoutY=Math.round(e.y),n.nodes.push(t),r.push(e)}}));var i=e.ruleChainModel.edges.find((function(t){return t.source===e.inputConnectorId+""}));if(i){var a=e.ruleChainCanvas.modelService.nodes.getNodeByConnectorId(i.destination);n.firstNodeIndex=r.indexOf(a)}e.ruleChainModel.edges.forEach((function(t){var i=e.ruleChainCanvas.modelService.nodes.getNodeByConnectorId(t.source),a=e.ruleChainCanvas.modelService.nodes.getNodeByConnectorId(t.destination);if(i.component.type!==f.c.INPUT){var o=r.indexOf(i);if(a.component.type===f.c.RULE_CHAIN){var l={fromIndex:o,targetRuleChainId:{entityType:D.b.RULE_CHAIN,id:a.targetRuleChainId},additionalInfo:a.additionalInfo?a.additionalInfo:{}};l.additionalInfo.layoutX=Math.round(a.x),l.additionalInfo.layoutY=Math.round(a.y),l.additionalInfo.ruleChainNodeId=a.id,t.labels.forEach((function(e){var t=Object(C.e)(l);t.type=e,n.ruleChainConnections.push(t)}))}else{var s={fromIndex:o,toIndex:r.indexOf(a)};t.labels.forEach((function(e){var t=Object(C.e)(s);t.type=e,n.connections.push(t)}))}}})),e.ruleChainService.saveAndGetResolvedRuleChainMetadata(n).subscribe((function(t){e.ruleChainMetaData=t,e.isImport?(e.isDirtyValue=!1,e.isImport=!1,e.router.navigateByUrl("ruleChains/"+e.ruleChain.id.id)):e.createRuleChainModel()}))}))},n.prototype.revertRuleChain=function(){this.createRuleChainModel()},n.prototype.addRuleNode=function(e){var t=this;e.configuration=Object(C.e)(e.component.configurationDescriptor.nodeDefinition.defaultConfiguration);var n=this.ruleChain.id?this.ruleChain.id.id:null;this.enableHotKeys=!1,this.dialog.open(Ee,{disableClose:!0,panelClass:["tb-dialog","tb-fullscreen-dialog"],data:{ruleNode:e,ruleChainId:n}}).afterClosed().subscribe((function(e){e&&(e.id="rule-chain-node-"+t.nextNodeID++,e.connectors=[],e.component.configurationDescriptor.nodeDefinition.inEnabled&&e.connectors.push({id:t.nextConnectorID+++"",type:m.f.leftConnectorType}),e.component.configurationDescriptor.nodeDefinition.outEnabled&&e.connectors.push({id:t.nextConnectorID+++"",type:m.f.rightConnectorType}),t.ruleChainModel.nodes.push(e),t.onModelChanged(),t.updateRuleNodesHighlight()),t.enableHotKeys=!0}))},n.prototype.addRuleNodeLink=function(e,t,n){return this.dialog.open(Ie,{disableClose:!0,panelClass:["tb-dialog","tb-fullscreen-dialog"],data:{link:e,labels:t,allowCustomLabels:n}}).afterClosed()},n.prototype.updateNodeErrorTooltip=function(t){if(t.error){var n=e("#"+t.id),r=this.errorTooltips[t.id];if(!r||!n.hasClass("tooltipstered")){n.tooltipster({theme:"tooltipster-shadow",delay:0,animationDuration:0,trigger:"custom",triggerOpen:{click:!1,tap:!1},triggerClose:{click:!1,tap:!1,scroll:!1},side:"top",trackOrigin:!0});var i='<div class="tb-rule-node-error-tooltip"><div id="tooltip-content" layout="column"><div class="tb-node-details">'+t.error+"</div></div></div>",a=e(i);(r=n.tooltipster("instance")).isErrorTooltip=!0,r.content(a),this.errorTooltips[t.id]=r}setTimeout((function(){r.open()}),0)}else{if(this.errorTooltips[t.id])this.errorTooltips[t.id].destroy(),delete this.errorTooltips[t.id]}},n.prototype.updateErrorTooltips=function(e){for(var t=0,n=Object.keys(this.errorTooltips);t<n.length;t++){var r=n[t],i=this.errorTooltips[r];e?i.close():i.open()}},n.prototype.displayTooltip=function(t,n){this.destroyTooltips(),this.tooltipTimeout=setTimeout((function(){var r=e(t.target);r.tooltipster({theme:"tooltipster-shadow",delay:100,trigger:"custom",triggerOpen:{click:!1,tap:!1},triggerClose:{click:!0,tap:!0,scroll:!0},side:"right",distance:12,trackOrigin:!0});var i=e(n),a=r.tooltipster("instance");a.content(i),a.open()}),500)},n.\u0275fac=function(e){return new(e||n)(i["\u0275\u0275directiveInject"](P.Store),i["\u0275\u0275directiveInject"](N.ActivatedRoute),i["\u0275\u0275directiveInject"](N.Router),i["\u0275\u0275directiveInject"](g.a),i["\u0275\u0275directiveInject"](u.a),i["\u0275\u0275directiveInject"](k.TranslateService),i["\u0275\u0275directiveInject"](M.a),i["\u0275\u0275directiveInject"](s.MatDialog),i["\u0275\u0275directiveInject"](c.a),i["\u0275\u0275directiveInject"](o.FormBuilder))},n.\u0275cmp=i["\u0275\u0275defineComponent"]({type:n,selectors:[["tb-rulechain-page"]],viewQuery:function(e,t){var n;(1&e&&(i["\u0275\u0275viewQuery"](te,!0),i["\u0275\u0275staticViewQuery"](ne,!0),i["\u0275\u0275staticViewQuery"](re,!0),i["\u0275\u0275viewQuery"](ie,!0),i["\u0275\u0275viewQuery"](ae,!0),i["\u0275\u0275viewQuery"](oe,!0,d.MatExpansionPanel)),2&e)&&(i["\u0275\u0275queryRefresh"](n=i["\u0275\u0275loadQuery"]())&&(t.ruleNodeSearchInputField=n.first),i["\u0275\u0275queryRefresh"](n=i["\u0275\u0275loadQuery"]())&&(t.ruleChainCanvas=n.first),i["\u0275\u0275queryRefresh"](n=i["\u0275\u0275loadQuery"]())&&(t.ruleChainMenuTrigger=n.first),i["\u0275\u0275queryRefresh"](n=i["\u0275\u0275loadQuery"]())&&(t.ruleNodeComponent=n.first),i["\u0275\u0275queryRefresh"](n=i["\u0275\u0275loadQuery"]())&&(t.ruleNodeLinkComponent=n.first),i["\u0275\u0275queryRefresh"](n=i["\u0275\u0275loadQuery"]())&&(t.expansionPanels=n))},hostVars:4,hostBindings:function(e,t){2&e&&i["\u0275\u0275styleProp"]("width",t.width)("height",t.height)},features:[i["\u0275\u0275InheritDefinitionFeature"]],decls:70,vars:71,consts:[["fxFlex","","tb-fullscreen","","tb-hotkeys","","fxLayout","column",1,"tb-rulechain",3,"fullscreen","hotkeys","cheatSheet"],["cheatSheetComponent",""],["fxFlex","","fxLayout","column",1,"tb-rulechain-container"],["fxFlex","","fxLayout","row",1,"tb-rulechain-layout"],["fxLayout","row",1,"tb-header-buttons","tb-library-open",3,"fxShow"],["mat-button","","mat-icon-button","","color","primary","matTooltipPosition","above",1,"tb-btn-header","tb-btn-open-library","mat-fab",3,"matTooltip","click"],[2,"width","100%","height","100%"],["disableClose","true","mode","side","position","start","fxLayout","column",1,"tb-rulechain-library","mat-elevation-z4",3,"opened"],["color","primary",1,"tb-dark"],[1,"mat-toolbar-tools"],["mat-button","","mat-icon-button","","matTooltipPosition","above",1,"tb-small",3,"matTooltip"],["fxFlex","","floatLabel","always"],["matInput","",3,"ngModel","placeholder","ngModelChange"],["ruleNodeSearchInput",""],["mat-button","","mat-icon-button","","matTooltipPosition","above",1,"tb-small",3,"fxShow","matTooltip","click"],["mat-button","","mat-icon-button","","matTooltipPosition","above",1,"tb-small",3,"matTooltip","click"],[1,"tb-rulechain-library-panel-group"],["class","mat-elevation-z2",3,"expanded",4,"ngFor","ngForOf"],["mode","over","position","end",1,"tb-details-drawer",3,"opened","closed"],["fxFlex","",3,"headerTitle","headerSubtitle","isReadOnly","isAlwaysEdit","theForm","closeDetails","toggleDetailsEditMode","applyDetails",4,"ngIf"],[1,"tb-rulechain-graph-content"],["mat-button","","type","button","mat-icon-button","","matTooltipPosition","above",1,"tb-fullscreen-button",3,"matTooltip","click"],[1,"tb-absolute-fill","tb-rulechain-graph",3,"contextmenu"],[2,"visibility","hidden","position","fixed",3,"matMenuTriggerFor"],["ruleChainMenuTrigger","matMenuTrigger"],[1,"tb-rule-chain-context-menu",3,"overlapTrigger"],["ruleChainMenu","matMenu"],["matMenuContent",""],["id","tb-rulchain-canvas","fitModelSizeByDefault","false",3,"model","selectedObjects","edgeStyle","automaticResize","nodeWidth","nodeHeight","dragAnimation","userCallbacks","modelChanged"],["ruleChainCanvas",""],["fxLayout","row","fxLayoutAlign","start end",1,"layout-wrap","tb-footer-buttons"],["mat-fab","","color","accent","matTooltipPosition","above",1,"tb-btn-footer",3,"disabled","ngClass","matTooltip","click"],["mat-fab","","color","accent","matTooltipPosition","above",1,"tb-btn-footer",3,"disabled","matTooltip","click"],[1,"mat-elevation-z2",3,"expanded"],["ruleNodeTypeExpansionPanels",""],["expandedHeight","48px",3,"mouseenter","mouseleave"],["translate","",1,"tb-panel-title"],["fitModelSizeByDefault","",3,"id","model","selectedObjects","automaticResize","userCallbacks","nodeWidth","nodeHeight","dropTargetId"],["fxFlex","",3,"headerTitle","headerSubtitle","isReadOnly","isAlwaysEdit","theForm","closeDetails","toggleDetailsEditMode","applyDetails"],[1,"details-buttons"],[3,"tb-help"],["fxFlex","",1,"tb-absolute-fill","tb-rulenode-details",3,"selectedIndex","selectedIndexChange"],[3,"label"],[3,"ruleNode","ruleChainId","isEdit","isReadOnly"],["tbRuleNode",""],[3,"label",4,"ngIf"],[1,"tb-rule-node-help"],["id","tb-node-content","fxLayout","column",1,"mat-padding"],[1,"tb-node-title"],[1,"tb-node-description"],[1,"tb-node-details",3,"innerHtml"],["eventsTab","matTab"],[3,"debugEventTypes","defaultEventType","active","tenantId","entityId"],["fxFlex","",3,"ngModel","allowedLabels","allowCustom","ngModelChange"],["tbRuleNodeLink",""],[1,"tb-rule-chain-context-menu-container",3,"mouseleave"],[4,"ngIf"],[3,"src",4,"ngIf"],["fxFlex",""],[1,"tb-context-menu-title"],[1,"tb-context-menu-subtitle"],[4,"ngFor","ngForOf"],[3,"src"],["mat-menu-item","",3,"disabled","click",4,"ngIf"],["mat-menu-item","",3,"disabled","click"],["class","tb-alt-text",4,"ngIf"],["translate",""],[1,"tb-alt-text"]],template:function(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"div",0),i["\u0275\u0275element"](1,"tb-hotkeys-cheatsheet",null,1),i["\u0275\u0275elementStart"](3,"section",2),i["\u0275\u0275elementStart"](4,"div",3),i["\u0275\u0275elementStart"](5,"section",4),i["\u0275\u0275elementStart"](6,"button",5),i["\u0275\u0275listener"]("click",(function(){return t.isLibraryOpen=!0})),i["\u0275\u0275pipe"](7,"translate"),i["\u0275\u0275elementStart"](8,"mat-icon"),i["\u0275\u0275text"](9,"menu"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](10,"mat-drawer-container",6),i["\u0275\u0275elementStart"](11,"mat-drawer",7),i["\u0275\u0275elementStart"](12,"mat-toolbar",8),i["\u0275\u0275elementStart"](13,"div",9),i["\u0275\u0275elementStart"](14,"button",10),i["\u0275\u0275pipe"](15,"translate"),i["\u0275\u0275elementStart"](16,"mat-icon"),i["\u0275\u0275text"](17,"search"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](18,"mat-form-field",11),i["\u0275\u0275element"](19,"mat-label"),i["\u0275\u0275elementStart"](20,"input",12,13),i["\u0275\u0275listener"]("ngModelChange",(function(e){return t.ruleNodeTypeSearch=e})),i["\u0275\u0275pipe"](22,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](23,"button",14),i["\u0275\u0275listener"]("click",(function(){return t.ruleNodeTypeSearch="",t.updateRuleChainLibrary()})),i["\u0275\u0275pipe"](24,"translate"),i["\u0275\u0275elementStart"](25,"mat-icon"),i["\u0275\u0275text"](26,"close"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](27,"button",15),i["\u0275\u0275listener"]("click",(function(){return t.isLibraryOpen=!1})),i["\u0275\u0275pipe"](28,"translate"),i["\u0275\u0275elementStart"](29,"mat-icon"),i["\u0275\u0275text"](30,"chevron_left"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](31,"div",16),i["\u0275\u0275template"](32,le,9,11,"mat-expansion-panel",17),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](33,"mat-drawer",18),i["\u0275\u0275listener"]("closed",(function(){return t.onDetailsDrawerClosed()})),i["\u0275\u0275template"](34,ce,23,23,"tb-details-panel",19),i["\u0275\u0275template"](35,ue,6,11,"tb-details-panel",19),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](36,"mat-drawer-content",20),i["\u0275\u0275elementStart"](37,"button",21),i["\u0275\u0275listener"]("click",(function(){return t.isFullscreen=!t.isFullscreen})),i["\u0275\u0275pipe"](38,"translate"),i["\u0275\u0275elementStart"](39,"mat-icon"),i["\u0275\u0275text"](40),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](41,"div",22),i["\u0275\u0275listener"]("contextmenu",(function(e){return t.openRuleChainContextMenu(e)})),i["\u0275\u0275element"](42,"div",23,24),i["\u0275\u0275elementStart"](44,"mat-menu",25,26),i["\u0275\u0275template"](46,ve,10,8,"ng-template",27),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](47,"fc-canvas",28,29),i["\u0275\u0275listener"]("modelChanged",(function(){return t.onModelChanged()})),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](49,"section",30),i["\u0275\u0275elementStart"](50,"button",31),i["\u0275\u0275listener"]("click",(function(){return t.deleteSelected()})),i["\u0275\u0275pipe"](51,"async"),i["\u0275\u0275pipe"](52,"translate"),i["\u0275\u0275elementStart"](53,"mat-icon"),i["\u0275\u0275text"](54,"delete"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](55,"button",32),i["\u0275\u0275listener"]("click",(function(){return t.resetDebugModeInAllNodes()})),i["\u0275\u0275pipe"](56,"async"),i["\u0275\u0275pipe"](57,"translate"),i["\u0275\u0275elementStart"](58,"mat-icon"),i["\u0275\u0275text"](59,"bug_report"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](60,"button",32),i["\u0275\u0275listener"]("click",(function(){return t.saveRuleChain()})),i["\u0275\u0275pipe"](61,"async"),i["\u0275\u0275pipe"](62,"translate"),i["\u0275\u0275elementStart"](63,"mat-icon"),i["\u0275\u0275text"](64,"done"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](65,"button",32),i["\u0275\u0275listener"]("click",(function(){return t.revertRuleChain()})),i["\u0275\u0275pipe"](66,"async"),i["\u0275\u0275pipe"](67,"translate"),i["\u0275\u0275elementStart"](68,"mat-icon"),i["\u0275\u0275text"](69,"close"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()),2&e){var n=i["\u0275\u0275reference"](2),r=i["\u0275\u0275reference"](45);i["\u0275\u0275property"]("fullscreen",t.isFullscreen)("hotkeys",t.hotKeys)("cheatSheet",n),i["\u0275\u0275advance"](5),i["\u0275\u0275property"]("fxShow",!t.isLibraryOpen),i["\u0275\u0275advance"](1),i["\u0275\u0275propertyInterpolate"]("matTooltip",i["\u0275\u0275pipeBind1"](7,41,"rulenode.open-node-library")),i["\u0275\u0275advance"](5),i["\u0275\u0275property"]("opened",t.isLibraryOpen),i["\u0275\u0275advance"](3),i["\u0275\u0275propertyInterpolate"]("matTooltip",i["\u0275\u0275pipeBind1"](15,43,"rulenode.search")),i["\u0275\u0275advance"](6),i["\u0275\u0275propertyInterpolate"]("placeholder",i["\u0275\u0275pipeBind1"](22,45,"rulenode.search")),i["\u0275\u0275property"]("ngModel",t.ruleNodeTypeSearch),i["\u0275\u0275advance"](3),i["\u0275\u0275propertyInterpolate"]("matTooltip",i["\u0275\u0275pipeBind1"](24,47,"action.clear-search")),i["\u0275\u0275property"]("fxShow",""!==t.ruleNodeTypeSearch),i["\u0275\u0275advance"](4),i["\u0275\u0275propertyInterpolate"]("matTooltip",i["\u0275\u0275pipeBind1"](28,49,"action.close")),i["\u0275\u0275advance"](5),i["\u0275\u0275property"]("ngForOf",t.ruleNodeTypesLibraryArray),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("opened",t.isEditingRuleNode||t.isEditingRuleNodeLink),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",t.editingRuleNode),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",t.editingRuleNodeLink),i["\u0275\u0275advance"](2),i["\u0275\u0275propertyInterpolate"]("matTooltip",i["\u0275\u0275pipeBind1"](38,51,t.isFullscreen?"fullscreen.exit":"fullscreen.expand")),i["\u0275\u0275advance"](3),i["\u0275\u0275textInterpolate"](t.isFullscreen?"fullscreen_exit":"fullscreen"),i["\u0275\u0275advance"](2),i["\u0275\u0275styleProp"]("left",t.ruleChainMenuPosition.x)("top",t.ruleChainMenuPosition.y),i["\u0275\u0275property"]("matMenuTriggerFor",r),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("overlapTrigger",!0),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("model",t.ruleChainModel)("selectedObjects",t.selectedObjects)("edgeStyle",t.flowchartConstants.curvedStyle)("automaticResize",!0)("nodeWidth",170)("nodeHeight",50)("dragAnimation",t.flowchartConstants.dragAnimationRepaint)("userCallbacks",t.editCallbacks),i["\u0275\u0275advance"](3),i["\u0275\u0275propertyInterpolate"]("matTooltip",i["\u0275\u0275pipeBind1"](52,55,"rulenode.delete-selected-objects")),i["\u0275\u0275property"]("disabled",i["\u0275\u0275pipeBind1"](51,53,t.isLoading$))("ngClass",i["\u0275\u0275pureFunction1"](69,xe,!t.objectsSelected())),i["\u0275\u0275advance"](5),i["\u0275\u0275propertyInterpolate"]("matTooltip",i["\u0275\u0275pipeBind1"](57,59,"rulenode.reset-debug-mode")),i["\u0275\u0275property"]("disabled",i["\u0275\u0275pipeBind1"](56,57,t.isLoading$)||!t.isDebugModeEnabled()),i["\u0275\u0275advance"](5),i["\u0275\u0275propertyInterpolate"]("matTooltip",i["\u0275\u0275pipeBind1"](62,63,"action.apply-changes")),i["\u0275\u0275property"]("disabled",i["\u0275\u0275pipeBind1"](61,61,t.isLoading$)||t.isInvalid||!t.isDirtyValue&&!t.isImport),i["\u0275\u0275advance"](5),i["\u0275\u0275propertyInterpolate"]("matTooltip",i["\u0275\u0275pipeBind1"](67,67,"action.decline-changes")),i["\u0275\u0275property"]("disabled",i["\u0275\u0275pipeBind1"](66,65,t.isLoading$)||!t.isDirtyValue)}},directives:[L.b,O.a,_.a,L.f,F.d,B.a,j.d,R.MatButton,V.MatTooltip,z.MatIcon,G.MatDrawerContainer,G.MatDrawer,U.MatToolbar,q.MatFormField,q.MatLabel,$.MatInput,o.DefaultValueAccessor,o.NgControlStatus,o.NgModel,W.NgForOf,W.NgIf,G.MatDrawerContent,H.MatMenuTrigger,H._MatMenu,H.MatMenuContent,m.g,L.e,W.NgClass,j.b,d.MatExpansionPanel,d.MatExpansionPanelHeader,d.MatExpansionPanelTitle,k.TranslateDirective,K.a,J.a,Y.MatTabGroup,Y.MatTab,I.a,X.a,E.a,Q.MatDivider,H.MatMenuItem],pipes:[k.TranslatePipe,W.AsyncPipe,Z.a],styles:[".tb-rulechain{width:100%;height:100%}.tb-rulechain .mat-tab-group.tb-rulenode-details>.mat-tab-body-wrapper{position:absolute;top:49px;left:0;right:0;bottom:0}.tb-rulechain .mat-tab-group.tb-rulenode-details>.mat-tab-header .mat-tab-label{min-width:40px}.tb-rulechain button.mat-button.mat-icon-button.tb-fullscreen-button{position:absolute;top:10px;right:10px;background:#ccc;color:#666;opacity:.85;margin:0 6px;z-index:2}.tb-rulechain section.tb-header-buttons.tb-library-open{position:absolute;top:0;left:0;z-index:2;pointer-events:none}.tb-rulechain section.tb-header-buttons.tb-library-open .mat-fab .mat-button-wrapper{padding:0}.tb-rulechain section.tb-header-buttons.tb-library-open .mat-button.tb-btn-open-library{top:0;left:0;width:36px;height:36px;margin:4px 0 0 4px;line-height:36px;opacity:.5}.tb-rulechain .tb-rulechain-library{z-index:1;width:250px;min-width:250px}.tb-rulechain .tb-rulechain-library .mat-toolbar{height:48px;min-height:48px;padding:0}.tb-rulechain .tb-rulechain-library .mat-toolbar .mat-toolbar-tools{height:48px;padding:0 6px;font-size:14px}.tb-rulechain .tb-rulechain-library .mat-toolbar .mat-toolbar-tools .mat-form-field .mat-form-field-infix{width:auto}.tb-rulechain .tb-rulechain-library .mat-toolbar .mat-toolbar-tools .mat-button.mat-icon-button{margin:0}.tb-rulechain .tb-rulechain-library .mat-toolbar .mat-toolbar-tools .mat-button.mat-icon-button.tb-small{width:32px;height:32px;min-height:32px;padding:6px;line-height:20px}.tb-rulechain .tb-rulechain-library .mat-toolbar .mat-toolbar-tools .mat-button.mat-icon-button.tb-small mat-icon{width:20px;min-width:20px;height:20px;min-height:20px;font-size:20px;line-height:20px}.tb-rulechain .tb-rulechain-library .tb-rulechain-library-panel-group{overflow-x:hidden;overflow-y:auto}.tb-rulechain .tb-rulechain-library .tb-rulechain-library-panel-group .mat-expansion-panel{border-radius:0}.tb-rulechain .tb-rulechain-library .tb-rulechain-library-panel-group .mat-expansion-panel:last-child{margin-bottom:5px}.tb-rulechain .tb-rulechain-library .tb-rulechain-library-panel-group .mat-expansion-panel .mat-expansion-panel-header{background:#e6e6e6}.tb-rulechain .tb-rulechain-library .tb-rulechain-library-panel-group .mat-expansion-panel .mat-expansion-panel-header:hover{background:#dadada}.tb-rulechain .tb-rulechain-library .tb-rulechain-library-panel-group .mat-expansion-panel .mat-expansion-panel-header .mat-expansion-panel-header-title{line-height:48px;height:48px}.tb-rulechain .tb-rulechain-library .tb-rulechain-library-panel-group .mat-expansion-panel .mat-expansion-panel-header .mat-expansion-panel-header-title .mat-icon{min-width:24px;margin:auto 8px auto auto}.tb-rulechain .tb-rulechain-library .tb-rulechain-library-panel-group .mat-expansion-panel .mat-expansion-panel-header .mat-expansion-panel-header-title .tb-panel-title{min-width:140px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.tb-rulechain .tb-rulechain-library .tb-rulechain-library-panel-group .mat-expansion-panel.mat-expanded .mat-expansion-panel-header{border-bottom:1px solid;border-color:#909090}.tb-rulechain .tb-rulechain-library .tb-rulechain-library-panel-group .mat-expansion-panel-body{padding:0}.tb-rulechain .tb-rulechain-library .tb-rulechain-library-panel-group .fc-canvas{background:#f9f9f9}.tb-rulechain .mat-drawer-content.tb-rulechain-graph-content{overflow:hidden}.tb-rulechain .mat-drawer-content.tb-rulechain-graph-content .tb-rulechain-graph{z-index:0;overflow:auto}.tb-rulechain .fc-canvas .fc-node{border-radius:8px}.tb-rulechain .fc-canvas .fc-node.fc-selected:not(.fc-edit){margin:-3px;border:3px solid red}.tb-rulechain .fc-canvas .fc-edit .fc-nodedelete,.tb-rulechain .fc-canvas .fc-edit .fc-nodeedit{box-sizing:content-box;border:2px solid #fff;background:#f83e05;outline:none}.tb-rulechain .fc-canvas .fc-nodeopen{display:block;position:absolute;top:11px;right:-12px;border:1px solid #fff;border-radius:4px;line-height:18px;height:22px;width:22px;background:#886cb1;color:#fff;text-align:center;cursor:pointer;box-sizing:border-box}.tb-rulechain .fc-canvas .fc-nodeopen mat-icon{width:16px;min-width:16px;height:16px;min-height:16px;font-size:16px}.tb-rulechain .fc-canvas .fc-nodeopen:hover{background-color:#4e2d7e}.tb-rulechain .fc-canvas .fc-arrow-marker polygon{fill:grey;stroke:grey}.tb-rulechain .fc-canvas .fc-arrow-marker-selected polygon{fill:red;stroke:red}.tb-rulechain .fc-canvas .fc-edge{outline:none;stroke:grey}.tb-rulechain .fc-canvas .fc-edge.fc-selected{stroke:red}.tb-rulechain .fc-canvas .fc-edge.fc-hover{stroke:grey}.tb-rulechain .fc-canvas .edge-endpoint{fill:grey}.tb-rulechain .fc-canvas .fc-edge-label{opacity:1!important}.tb-rulechain .fc-canvas .fc-edge-label:focus{outline:0}.tb-rulechain .fc-canvas .fc-edge-label.fc-selected .fc-edge-label-text span{color:#fff!important;background-color:red!important;border:solid red!important}.tb-rulechain .fc-canvas .fc-edge-label .fc-edge-label-text{font-size:14px!important;font-weight:600!important}.tb-rulechain .fc-canvas .fc-edge-label .fc-edge-label-text span{background-color:#fff!important;color:#003a79!important;border:2px solid #003a79!important}.tb-rule-node-help,.tb-rule-node-tooltip{color:#333}.tb-rule-node-tooltip{max-width:300px;font-size:14px}.tb-rule-node-tooltip.tb-lib-tooltip{width:300px}.tb-rule-node-help{font-size:16px}.tb-rule-node-error-tooltip{font-size:16px;color:#ea0d0d}.tb-rule-node-error-tooltip #tb-node-content .tb-node-title,.tb-rule-node-help #tb-node-content .tb-node-title,.tb-rule-node-tooltip #tb-node-content .tb-node-title{font-weight:600}.tb-rule-node-error-tooltip #tb-node-content .tb-node-description,.tb-rule-node-help #tb-node-content .tb-node-description,.tb-rule-node-tooltip #tb-node-content .tb-node-description{font-style:italic;color:#555}.tb-rule-node-error-tooltip #tb-node-content .tb-node-details,.tb-rule-node-help #tb-node-content .tb-node-details,.tb-rule-node-tooltip #tb-node-content .tb-node-details{padding-top:10px;padding-bottom:10px}.tb-rule-node-error-tooltip #tb-node-content code,.tb-rule-node-help #tb-node-content code,.tb-rule-node-tooltip #tb-node-content code{padding:0 3px 2px;margin:1px;font-size:12px;color:#ad1625;white-space:nowrap;background-color:#f7f7f9;border:1px solid #e1e1e8;border-radius:2px}.tb-rule-chain-context-menu{min-width:256px;max-height:404px;border-radius:8px;margin-left:-20px}.tb-rule-chain-context-menu.mat-menu-below{margin-top:-60px}.tb-rule-chain-context-menu .mat-menu-content{padding:0;display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column}.tb-rule-chain-context-menu .mat-menu-content .tb-rule-chain-context-menu-container{pointer-events:auto;padding:0 0 8px;display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;overflow-y:auto}.tb-rule-chain-context-menu .tb-context-menu-header{display:-ms-flexbox;display:flex;box-sizing:content-box;-ms-flex-direction:row;flex-direction:row;height:36px;min-height:36px;padding:8px 5px 5px;font-size:14px}.tb-rule-chain-context-menu .tb-context-menu-header.tb-filter-type{background-color:#f1e861}.tb-rule-chain-context-menu .tb-context-menu-header.tb-enrichment-type{background-color:#cdf14e}.tb-rule-chain-context-menu .tb-context-menu-header.tb-transformation-type{background-color:#79cef1}.tb-rule-chain-context-menu .tb-context-menu-header.tb-action-type{background-color:#f1928f}.tb-rule-chain-context-menu .tb-context-menu-header.tb-external-type{background-color:#fbc766}.tb-rule-chain-context-menu .tb-context-menu-header.tb-rule-chain-type{background-color:#d6c4f1}.tb-rule-chain-context-menu .tb-context-menu-header.tb-unknown-type{background-color:#f16c29}.tb-rule-chain-context-menu .tb-context-menu-header.tb-link-header,.tb-rule-chain-context-menu .tb-context-menu-header.tb-rulechain-header{background-color:#aac7e4}.tb-rule-chain-context-menu .tb-context-menu-header .mat-icon{padding-right:10px;padding-left:2px;margin:auto}.tb-rule-chain-context-menu .tb-context-menu-header .tb-context-menu-title{font-weight:500}.tb-rule-chain-context-menu .tb-context-menu-header .tb-context-menu-subtitle{font-size:12px}"],encapsulation:2}),n}(a.a);!function(){i["\u0275setClassMetadata"](Ce,[{type:i.Component,args:[{selector:"tb-rulechain-page",templateUrl:"./rulechain-page.component.html",styleUrls:["./rulechain-page.component.scss"],encapsulation:i.ViewEncapsulation.None}]}],(function(){return[{type:P.Store},{type:N.ActivatedRoute},{type:N.Router},{type:g.a},{type:u.a},{type:k.TranslateService},{type:M.a},{type:s.MatDialog},{type:c.a},{type:o.FormBuilder}]}),{width:[{type:i.HostBinding,args:["style.width"]}],height:[{type:i.HostBinding,args:["style.height"]}],ruleNodeSearchInputField:[{type:i.ViewChild,args:["ruleNodeSearchInput"]}],ruleChainCanvas:[{type:i.ViewChild,args:["ruleChainCanvas",{static:!0}]}],expansionPanels:[{type:i.ViewChildren,args:["ruleNodeTypeExpansionPanels",{read:d.MatExpansionPanel}]}],ruleChainMenuTrigger:[{type:i.ViewChild,args:["ruleChainMenuTrigger",{static:!0}]}],ruleNodeComponent:[{type:i.ViewChild,args:["tbRuleNode"]}],ruleNodeLinkComponent:[{type:i.ViewChild,args:["tbRuleNodeLink"]}]})}();var Ie=function(e){function t(t,n,r,i,a,l){var s=e.call(this,t,n,a)||this;return s.store=t,s.router=n,s.data=r,s.errorStateMatcher=i,s.dialogRef=a,s.fb=l,s.submitted=!1,s.link=s.data.link,s.labels=s.data.labels,s.allowCustomLabels=s.data.allowCustomLabels,s.ruleNodeLinkFormGroup=s.fb.group({link:[Object(C.e)(s.link),[o.Validators.required]]}),s}return Object(r.d)(t,e),t.prototype.ngOnInit=function(){},t.prototype.isErrorState=function(e,t){var n=this.errorStateMatcher.isErrorState(e,t),r=!!(e&&e.invalid&&this.submitted);return n||r},t.prototype.cancel=function(){this.dialogRef.close(null)},t.prototype.add=function(){this.submitted=!0;var e=this.ruleNodeLinkFormGroup.get("link").value;this.link=Object(r.a)(Object(r.a)({},this.link),e),this.dialogRef.close(this.link)},t.\u0275fac=function(e){return new(e||t)(i["\u0275\u0275directiveInject"](P.Store),i["\u0275\u0275directiveInject"](N.Router),i["\u0275\u0275directiveInject"](s.MAT_DIALOG_DATA),i["\u0275\u0275directiveInject"](l.ErrorStateMatcher,4),i["\u0275\u0275directiveInject"](s.MatDialogRef),i["\u0275\u0275directiveInject"](o.FormBuilder))},t.\u0275cmp=i["\u0275\u0275defineComponent"]({type:t,selectors:[["tb-add-rule-node-link-dialog"]],features:[i["\u0275\u0275ProvidersFeature"]([{provide:l.ErrorStateMatcher,useExisting:t}]),i["\u0275\u0275InheritDefinitionFeature"]],decls:24,vars:22,consts:[[2,"width","480px",3,"formGroup","ngSubmit"],["color","primary"],["translate",""],["fxFlex",""],[3,"tb-help"],["mat-icon-button","","type","button",3,"click"],[1,"material-icons"],["color","warn","mode","indeterminate",4,"ngIf"],["mat-dialog-content",""],[3,"disabled"],["required","","formControlName","link",3,"allowedLabels","allowCustom"],["mat-dialog-actions","","fxLayoutAlign","end center"],["mat-button","","color","primary","type","button","cdkFocusInitial","",3,"disabled","click"],["mat-raised-button","","color","primary","type","submit",3,"disabled"],["color","warn","mode","indeterminate"]],template:function(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"form",0),i["\u0275\u0275listener"]("ngSubmit",(function(){return t.add()})),i["\u0275\u0275elementStart"](1,"mat-toolbar",1),i["\u0275\u0275elementStart"](2,"h2",2),i["\u0275\u0275text"](3,"rulenode.add-link"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](4,"span",3),i["\u0275\u0275element"](5,"div",4),i["\u0275\u0275elementStart"](6,"button",5),i["\u0275\u0275listener"]("click",(function(){return t.cancel()})),i["\u0275\u0275elementStart"](7,"mat-icon",6),i["\u0275\u0275text"](8,"close"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](9,Se,1,0,"mat-progress-bar",7),i["\u0275\u0275pipe"](10,"async"),i["\u0275\u0275elementStart"](11,"div",8),i["\u0275\u0275elementStart"](12,"fieldset",9),i["\u0275\u0275pipe"](13,"async"),i["\u0275\u0275element"](14,"tb-rule-node-link",10),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](15,"div",11),i["\u0275\u0275elementStart"](16,"button",12),i["\u0275\u0275listener"]("click",(function(){return t.cancel()})),i["\u0275\u0275pipe"](17,"async"),i["\u0275\u0275text"](18),i["\u0275\u0275pipe"](19,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](20,"button",13),i["\u0275\u0275pipe"](21,"async"),i["\u0275\u0275text"](22),i["\u0275\u0275pipe"](23,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275property"]("formGroup",t.ruleNodeLinkFormGroup),i["\u0275\u0275advance"](5),i["\u0275\u0275property"]("tb-help","ruleEngine"),i["\u0275\u0275advance"](4),i["\u0275\u0275property"]("ngIf",i["\u0275\u0275pipeBind1"](10,10,t.isLoading$)),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("disabled",i["\u0275\u0275pipeBind1"](13,12,t.isLoading$)),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("allowedLabels",t.labels)("allowCustom",t.allowCustomLabels),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("disabled",i["\u0275\u0275pipeBind1"](17,14,t.isLoading$)),i["\u0275\u0275advance"](2),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](19,16,"action.cancel")," "),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("disabled",i["\u0275\u0275pipeBind1"](21,18,t.isLoading$)||t.ruleNodeLinkFormGroup.invalid||!t.ruleNodeLinkFormGroup.dirty),i["\u0275\u0275advance"](2),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](23,20,"action.add")," "))},directives:[o["\u0275angular_packages_forms_forms_y"],o.NgControlStatusGroup,o.FormGroupDirective,U.MatToolbar,k.TranslateDirective,L.b,J.a,R.MatButton,z.MatIcon,W.NgIf,s.MatDialogContent,E.a,o.RequiredValidator,o.NgControlStatus,o.FormControlName,s.MatDialogActions,L.e,ee.MatProgressBar],pipes:[W.AsyncPipe,k.TranslatePipe],styles:["[_nghost-%COMP%]     tb-rule-node-link form{overflow:hidden!important}"]}),t}(T.a);!function(){i["\u0275setClassMetadata"](Ie,[{type:i.Component,args:[{selector:"tb-add-rule-node-link-dialog",templateUrl:"./add-rule-node-link-dialog.component.html",providers:[{provide:l.ErrorStateMatcher,useExisting:Ie}],styleUrls:["./add-rule-node-link-dialog.component.scss"]}]}],(function(){return[{type:P.Store},{type:N.Router},{type:void 0,decorators:[{type:i.Inject,args:[s.MAT_DIALOG_DATA]}]},{type:l.ErrorStateMatcher,decorators:[{type:i.SkipSelf}]},{type:s.MatDialogRef},{type:o.FormBuilder}]}),null)}();var Ee=function(e){function t(t,n,r,i,a){var o=e.call(this,t,n,a)||this;return o.store=t,o.router=n,o.data=r,o.errorStateMatcher=i,o.dialogRef=a,o.submitted=!1,o.ruleNode=o.data.ruleNode,o.ruleChainId=o.data.ruleChainId,o}return Object(r.d)(t,e),t.prototype.ngOnInit=function(){},t.prototype.isErrorState=function(e,t){var n=this.errorStateMatcher.isErrorState(e,t),r=!!(e&&e.invalid&&this.submitted);return n||r},t.prototype.helpLinkIdForRuleNodeType=function(){return Object(f.d)(this.ruleNode.component)},t.prototype.cancel=function(){this.dialogRef.close(null)},t.prototype.add=function(){this.submitted=!0,this.ruleNodeDetailsComponent.validate(),this.ruleNodeDetailsComponent.ruleNodeFormGroup.valid&&this.dialogRef.close(this.ruleNode)},t.\u0275fac=function(e){return new(e||t)(i["\u0275\u0275directiveInject"](P.Store),i["\u0275\u0275directiveInject"](N.Router),i["\u0275\u0275directiveInject"](s.MAT_DIALOG_DATA),i["\u0275\u0275directiveInject"](l.ErrorStateMatcher,4),i["\u0275\u0275directiveInject"](s.MatDialogRef))},t.\u0275cmp=i["\u0275\u0275defineComponent"]({type:t,selectors:[["tb-add-rule-node-dialog"]],viewQuery:function(e,t){var n;(1&e&&i["\u0275\u0275staticViewQuery"](ie,!0),2&e)&&(i["\u0275\u0275queryRefresh"](n=i["\u0275\u0275loadQuery"]())&&(t.ruleNodeDetailsComponent=n.first))},features:[i["\u0275\u0275ProvidersFeature"]([{provide:l.ErrorStateMatcher,useExisting:t}]),i["\u0275\u0275InheritDefinitionFeature"]],decls:26,vars:25,consts:[[2,"min-width","650px",3,"ngSubmit"],["color","primary"],["translate",""],["fxFlex",""],[3,"tb-help"],["mat-icon-button","","type","button",3,"click"],[1,"material-icons"],["color","warn","mode","indeterminate",4,"ngIf"],["mat-dialog-content",""],[3,"disabled"],[3,"ruleNode","ruleChainId","isEdit","isAdd","isReadOnly"],["tbRuleNode",""],["mat-dialog-actions","","fxLayoutAlign","end center"],["mat-button","","color","primary","type","button","cdkFocusInitial","",3,"disabled","click"],["mat-raised-button","","color","primary","type","submit",3,"disabled"],["color","warn","mode","indeterminate"]],template:function(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"form",0),i["\u0275\u0275listener"]("ngSubmit",(function(){return t.add()})),i["\u0275\u0275elementStart"](1,"mat-toolbar",1),i["\u0275\u0275elementStart"](2,"h2",2),i["\u0275\u0275text"](3,"rulenode.add"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](4,"span",3),i["\u0275\u0275text"](5),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](6,"div",4),i["\u0275\u0275elementStart"](7,"button",5),i["\u0275\u0275listener"]("click",(function(){return t.cancel()})),i["\u0275\u0275elementStart"](8,"mat-icon",6),i["\u0275\u0275text"](9,"close"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](10,we,1,0,"mat-progress-bar",7),i["\u0275\u0275pipe"](11,"async"),i["\u0275\u0275elementStart"](12,"div",8),i["\u0275\u0275elementStart"](13,"fieldset",9),i["\u0275\u0275pipe"](14,"async"),i["\u0275\u0275element"](15,"tb-rule-node",10,11),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](17,"div",12),i["\u0275\u0275elementStart"](18,"button",13),i["\u0275\u0275listener"]("click",(function(){return t.cancel()})),i["\u0275\u0275pipe"](19,"async"),i["\u0275\u0275text"](20),i["\u0275\u0275pipe"](21,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](22,"button",14),i["\u0275\u0275pipe"](23,"async"),i["\u0275\u0275text"](24),i["\u0275\u0275pipe"](25,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()),2&e){var n=i["\u0275\u0275reference"](16);i["\u0275\u0275advance"](5),i["\u0275\u0275textInterpolate1"](": ",t.ruleNode.component.name,""),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("tb-help",t.helpLinkIdForRuleNodeType()),i["\u0275\u0275advance"](4),i["\u0275\u0275property"]("ngIf",i["\u0275\u0275pipeBind1"](11,13,t.isLoading$)),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("disabled",i["\u0275\u0275pipeBind1"](14,15,t.isLoading$)),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ruleNode",t.ruleNode)("ruleChainId",t.ruleChainId)("isEdit",!0)("isAdd",!0)("isReadOnly",!1),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("disabled",i["\u0275\u0275pipeBind1"](19,17,t.isLoading$)),i["\u0275\u0275advance"](2),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](21,19,"action.cancel")," "),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("disabled",i["\u0275\u0275pipeBind1"](23,21,t.isLoading$)||n.ruleNodeFormGroup.invalid||!n.ruleNodeFormGroup.dirty),i["\u0275\u0275advance"](2),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](25,23,"action.add")," ")}},directives:[o["\u0275angular_packages_forms_forms_y"],o.NgControlStatusGroup,o.NgForm,U.MatToolbar,k.TranslateDirective,L.b,J.a,R.MatButton,z.MatIcon,W.NgIf,s.MatDialogContent,I.a,s.MatDialogActions,L.e,ee.MatProgressBar],pipes:[W.AsyncPipe,k.TranslatePipe],encapsulation:2}),t}(T.a);!function(){i["\u0275setClassMetadata"](Ee,[{type:i.Component,args:[{selector:"tb-add-rule-node-dialog",templateUrl:"./add-rule-node-dialog.component.html",providers:[{provide:l.ErrorStateMatcher,useExisting:Ee}],styleUrls:[]}]}],(function(){return[{type:P.Store},{type:N.Router},{type:void 0,decorators:[{type:i.Inject,args:[s.MAT_DIALOG_DATA]}]},{type:l.ErrorStateMatcher,decorators:[{type:i.SkipSelf}]},{type:s.MatDialogRef}]}),{ruleNodeDetailsComponent:[{type:i.ViewChild,args:["tbRuleNode",{static:!0}]}]})}()}).call(this,n("xexB"))},vpxU:function(e,t,n){"use strict";n.d(t,"a",(function(){return g}));var r=n("fXoL"),i=n("3Pt+"),a=n("C4fA"),o=n("8LU1"),l=n("H3So"),s=n("//Q6"),d=n("sYmb"),c=n("ofXK"),u=["definedConfigContent"],p=["jsonObjectEditComponent"];function m(e,t){if(1&e&&(r["\u0275\u0275elementStart"](0,"div",4),r["\u0275\u0275text"](1),r["\u0275\u0275elementEnd"]()),2&e){var n=r["\u0275\u0275nextContext"]();r["\u0275\u0275advance"](1),r["\u0275\u0275textInterpolate"](n.definedDirectiveError)}}function f(e,t){if(1&e&&(r["\u0275\u0275element"](0,"tb-json-object-edit",5,6),r["\u0275\u0275pipe"](2,"translate")),2&e){var n=r["\u0275\u0275nextContext"]();r["\u0275\u0275property"]("label",r["\u0275\u0275pipeBind1"](2,3,"rulenode.configuration"))("required",n.required)("fillHeight",!0)}}var g=function(){function e(e,t,n){this.translate=e,this.ruleChainService=t,this.fb=n,this.propagateChange=function(e){},this.ruleNodeConfigFormGroup=this.fb.group({configuration:[null,i.Validators.required]})}return Object.defineProperty(e.prototype,"required",{get:function(){return this.requiredValue},set:function(e){this.requiredValue=Object(o.coerceBooleanProperty)(e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"nodeDefinition",{get:function(){return this.nodeDefinitionValue},set:function(e){this.nodeDefinitionValue!==e&&(this.nodeDefinitionValue=e,this.nodeDefinitionValue&&this.validateDefinedDirective())},enumerable:!1,configurable:!0}),e.prototype.registerOnChange=function(e){this.propagateChange=e},e.prototype.registerOnTouched=function(e){},e.prototype.ngOnInit=function(){},e.prototype.ngOnDestroy=function(){this.definedConfigComponentRef&&this.definedConfigComponentRef.destroy()},e.prototype.ngAfterViewInit=function(){},e.prototype.setDisabledState=function(e){this.disabled=e,this.disabled?this.ruleNodeConfigFormGroup.disable({emitEvent:!1}):this.ruleNodeConfigFormGroup.enable({emitEvent:!1})},e.prototype.writeValue=function(e){var t=this;this.configuration=Object(s.e)(e),this.changeSubscription&&(this.changeSubscription.unsubscribe(),this.changeSubscription=null),this.definedConfigComponent?(this.definedConfigComponent.configuration=this.configuration,this.changeSubscription=this.definedConfigComponent.configurationChanged.subscribe((function(e){t.updateModel(e)}))):(this.ruleNodeConfigFormGroup.get("configuration").patchValue(this.configuration,{emitEvent:!1}),this.changeSubscription=this.ruleNodeConfigFormGroup.get("configuration").valueChanges.subscribe((function(e){t.updateModel(e)})))},e.prototype.useDefinedDirective=function(){return this.nodeDefinition&&this.nodeDefinition.configDirective&&this.nodeDefinition.configDirective.length&&!this.definedDirectiveError},e.prototype.updateModel=function(e){this.definedConfigComponent||this.ruleNodeConfigFormGroup.valid?this.propagateChange(e):this.propagateChange(this.required?null:e)},e.prototype.validateDefinedDirective=function(){var e=this;if(this.definedConfigComponentRef&&(this.definedConfigComponentRef.destroy(),this.definedConfigComponentRef=null),this.nodeDefinition.uiResourceLoadError&&this.nodeDefinition.uiResourceLoadError.length)this.definedDirectiveError=this.nodeDefinition.uiResourceLoadError;else if(this.nodeDefinition.configDirective&&this.nodeDefinition.configDirective.length){this.changeSubscription&&(this.changeSubscription.unsubscribe(),this.changeSubscription=null),this.definedConfigContainer.clear();var t=this.ruleChainService.getRuleNodeConfigFactory(this.nodeDefinition.configDirective);this.definedConfigComponentRef=this.definedConfigContainer.createComponent(t),this.definedConfigComponent=this.definedConfigComponentRef.instance,this.definedConfigComponent.ruleNodeId=this.ruleNodeId,this.definedConfigComponent.configuration=this.configuration,this.changeSubscription=this.definedConfigComponent.configurationChanged.subscribe((function(t){e.updateModel(t)}))}},e.prototype.validate=function(){this.useDefinedDirective()&&this.definedConfigComponent.validate()},e.\u0275fac=function(t){return new(t||e)(r["\u0275\u0275directiveInject"](d.TranslateService),r["\u0275\u0275directiveInject"](a.a),r["\u0275\u0275directiveInject"](i.FormBuilder))},e.\u0275cmp=r["\u0275\u0275defineComponent"]({type:e,selectors:[["tb-rule-node-config"]],viewQuery:function(e,t){var n;(1&e&&(r["\u0275\u0275staticViewQuery"](u,!0,r.ViewContainerRef),r["\u0275\u0275viewQuery"](p,!0)),2&e)&&(r["\u0275\u0275queryRefresh"](n=r["\u0275\u0275loadQuery"]())&&(t.definedConfigContainer=n.first),r["\u0275\u0275queryRefresh"](n=r["\u0275\u0275loadQuery"]())&&(t.jsonObjectEditComponent=n.first))},inputs:{required:"required",disabled:"disabled",ruleNodeId:"ruleNodeId",nodeDefinition:"nodeDefinition"},features:[r["\u0275\u0275ProvidersFeature"]([{provide:i.NG_VALUE_ACCESSOR,useExisting:Object(r.forwardRef)((function(){return e})),multi:!0}])],decls:5,vars:3,consts:[[3,"formGroup"],["definedConfigContent",""],["class","tb-rulenode-directive-error",4,"ngIf"],["class","tb-rule-node-configuration-json","formControlName","configuration",3,"label","required","fillHeight",4,"ngIf"],[1,"tb-rulenode-directive-error"],["formControlName","configuration",1,"tb-rule-node-configuration-json",3,"label","required","fillHeight"],["jsonObjectEditComponent",""]],template:function(e,t){1&e&&(r["\u0275\u0275elementStart"](0,"div",0),r["\u0275\u0275elementContainer"](1,null,1),r["\u0275\u0275template"](3,m,2,1,"div",2),r["\u0275\u0275template"](4,f,3,5,"tb-json-object-edit",3),r["\u0275\u0275elementEnd"]()),2&e&&(r["\u0275\u0275property"]("formGroup",t.ruleNodeConfigFormGroup),r["\u0275\u0275advance"](3),r["\u0275\u0275property"]("ngIf",t.definedDirectiveError),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",!t.useDefinedDirective()))},directives:[i.NgControlStatusGroup,i.FormGroupDirective,c.NgIf,l.a,i.NgControlStatus,i.FormControlName,i.RequiredValidator],pipes:[d.TranslatePipe],styles:["[_nghost-%COMP%]   tb-json-object-edit.tb-rule-node-configuration-json[_ngcontent-%COMP%]{display:block;height:300px}[_nghost-%COMP%]   .tb-rulenode-directive-error[_ngcontent-%COMP%]{font-size:13px;font-weight:400;color:#dd2c00}"]}),e}();!function(){r["\u0275setClassMetadata"](g,[{type:r.Component,args:[{selector:"tb-rule-node-config",templateUrl:"./rule-node-config.component.html",styleUrls:["./rule-node-config.component.scss"],providers:[{provide:i.NG_VALUE_ACCESSOR,useExisting:Object(r.forwardRef)((function(){return g})),multi:!0}]}]}],(function(){return[{type:d.TranslateService},{type:a.a},{type:i.FormBuilder}]}),{definedConfigContainer:[{type:r.ViewChild,args:["definedConfigContent",{read:r.ViewContainerRef,static:!0}]}],jsonObjectEditComponent:[{type:r.ViewChild,args:["jsonObjectEditComponent"]}],required:[{type:r.Input}],disabled:[{type:r.Input}],ruleNodeId:[{type:r.Input}],nodeDefinition:[{type:r.Input}]})}()}}]);