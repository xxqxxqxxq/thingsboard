(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{"+Xys":function(t,e,n){"use strict";n.d(e,"a",(function(){return b}));var i=n("mrSG"),a=n("fXoL"),r=n("3Pt+"),o=n("RxGS"),s=n("l7P3"),l=n("znSr"),c=n("XiUz"),d=n("sYmb"),p=n("ofXK"),u=n("bTqV"),m=n("Qu3c"),f=n("NFeN"),h=n("IVsW"),g=n("wU4P");function y(t,e){if(1&t){var n=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementStart"](0,"div",12),a["\u0275\u0275elementStart"](1,"div",13),a["\u0275\u0275element"](2,"tb-relation-type-autocomplete",14),a["\u0275\u0275element"](3,"tb-entity-type-list",15),a["\u0275\u0275elementStart"](4,"button",16),a["\u0275\u0275listener"]("click",(function(){a["\u0275\u0275restoreView"](n);var t=e.index;return a["\u0275\u0275nextContext"]().removeFilter(t)})),a["\u0275\u0275pipe"](5,"async"),a["\u0275\u0275pipe"](6,"translate"),a["\u0275\u0275elementStart"](7,"mat-icon"),a["\u0275\u0275text"](8,"close"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()}if(2&t){var i=e.$implicit,r=a["\u0275\u0275nextContext"]();a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("formControl",i.get("relationType")),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("allowedEntityTypes",r.allowedEntityTypes)("formControl",i.get("entityTypes")),a["\u0275\u0275advance"](1),a["\u0275\u0275propertyInterpolate"]("matTooltip",a["\u0275\u0275pipeBind1"](6,7,"relation.remove-relation-filter")),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](5,5,r.isLoading$))}}var b=function(t){function e(e,n){var i=t.call(this,e)||this;return i.store=e,i.fb=n,i.propagateChange=null,i.valueChangeSubscription=null,i}return Object(i.d)(e,t),e.prototype.ngOnInit=function(){this.relationFiltersFormGroup=this.fb.group({}),this.relationFiltersFormGroup.addControl("relationFilters",this.fb.array([]))},e.prototype.relationFiltersFormArray=function(){return this.relationFiltersFormGroup.get("relationFilters")},e.prototype.registerOnChange=function(t){this.propagateChange=t},e.prototype.registerOnTouched=function(t){},e.prototype.setDisabledState=function(t){this.disabled=t},e.prototype.writeValue=function(t){var e=this;this.valueChangeSubscription&&this.valueChangeSubscription.unsubscribe();var n=[];t&&t.length&&t.forEach((function(t){n.push(e.createRelationFilterFormGroup(t))})),this.relationFiltersFormGroup.setControl("relationFilters",this.fb.array(n)),this.valueChangeSubscription=this.relationFiltersFormGroup.valueChanges.subscribe((function(){e.updateModel()}))},e.prototype.removeFilter=function(t){this.relationFiltersFormGroup.get("relationFilters").removeAt(t)},e.prototype.addFilter=function(){this.relationFiltersFormGroup.get("relationFilters").push(this.createRelationFilterFormGroup({relationType:null,entityTypes:[]}))},e.prototype.createRelationFilterFormGroup=function(t){return this.fb.group({relationType:[t?t.relationType:null],entityTypes:[t?t.entityTypes:[]]})},e.prototype.updateModel=function(){var t=this.relationFiltersFormGroup.get("relationFilters").value;this.propagateChange(t)},e.\u0275fac=function(t){return new(t||e)(a["\u0275\u0275directiveInject"](s.Store),a["\u0275\u0275directiveInject"](r.FormBuilder))},e.\u0275cmp=a["\u0275\u0275defineComponent"]({type:e,selectors:[["tb-relation-filters"]],inputs:{disabled:"disabled",allowedEntityTypes:"allowedEntityTypes"},features:[a["\u0275\u0275ProvidersFeature"]([{provide:r.NG_VALUE_ACCESSOR,useExisting:Object(a.forwardRef)((function(){return e})),multi:!0}]),a["\u0275\u0275InheritDefinitionFeature"]],decls:23,vars:14,consts:[[1,"tb-relation-filters",3,"formGroup"],[1,"container"],[1,"header",3,"fxShow"],["fxLayout","row","fxLayoutAlign","start center"],["translate","",1,"cell",2,"width","200px","min-width","200px"],["fxFlex","","translate","",1,"cell"],[1,"cell",2,"width","40px","min-width","40px"],[1,"body",3,"fxShow"],["class","row","fxFlex","","fxLayout","row","fxLayoutAlign","start center","formArrayName","relationFilters",4,"ngFor","ngForOf"],[1,"any-filter",3,"fxShow"],["fxLayoutAlign","center center","translate","",1,"tb-prompt"],["mat-raised-button","","color","primary","type","button","matTooltipPosition","above",3,"disabled","matTooltip","click"],["fxFlex","","fxLayout","row","fxLayoutAlign","start center","formArrayName","relationFilters",1,"row"],["fxFlex","","fxLayout","row","fxLayoutAlign","start center",1,"mat-elevation-z1"],[1,"cell",2,"width","200px","min-width","200px",3,"formControl"],["fxFlex","",1,"cell",3,"allowedEntityTypes","formControl"],["mat-icon-button","","color","primary","type","button","matTooltipPosition","above",2,"width","40px","min-width","40px",3,"disabled","matTooltip","click"]],template:function(t,e){1&t&&(a["\u0275\u0275elementStart"](0,"div",0),a["\u0275\u0275elementStart"](1,"div",1),a["\u0275\u0275elementStart"](2,"div",2),a["\u0275\u0275elementStart"](3,"div",3),a["\u0275\u0275elementStart"](4,"span",4),a["\u0275\u0275text"](5,"relation.type"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](6,"span",5),a["\u0275\u0275text"](7,"entity.entity-types"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](8,"span",6),a["\u0275\u0275text"](9,"\xa0"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](10,"div",7),a["\u0275\u0275template"](11,y,9,9,"div",8),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](12,"div",9),a["\u0275\u0275elementStart"](13,"span",10),a["\u0275\u0275text"](14,"relation.any-relation"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](15,"div"),a["\u0275\u0275elementStart"](16,"button",11),a["\u0275\u0275listener"]("click",(function(){return e.addFilter()})),a["\u0275\u0275pipe"](17,"async"),a["\u0275\u0275pipe"](18,"translate"),a["\u0275\u0275elementStart"](19,"mat-icon"),a["\u0275\u0275text"](20,"add"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275text"](21),a["\u0275\u0275pipe"](22,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()),2&t&&(a["\u0275\u0275property"]("formGroup",e.relationFiltersFormGroup),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("fxShow",e.relationFiltersFormArray().length),a["\u0275\u0275advance"](8),a["\u0275\u0275property"]("fxShow",e.relationFiltersFormArray().length),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngForOf",e.relationFiltersFormArray().controls),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("fxShow",!e.relationFiltersFormArray().length),a["\u0275\u0275advance"](4),a["\u0275\u0275propertyInterpolate"]("matTooltip",a["\u0275\u0275pipeBind1"](18,10,"relation.add-relation-filter")),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](17,8,e.isLoading$)),a["\u0275\u0275advance"](5),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](22,12,"action.add")," "))},directives:[r.NgControlStatusGroup,r.FormGroupDirective,l.d,c.f,c.e,d.TranslateDirective,c.b,p.NgForOf,u.MatButton,m.MatTooltip,f.MatIcon,r.FormArrayName,h.a,r.NgControlStatus,r.FormControlDirective,g.a],pipes:[p.AsyncPipe,d.TranslatePipe],styles:["[_nghost-%COMP%]   .tb-relation-filters[_ngcontent-%COMP%]{max-width:calc(100vw - 48px);overflow:hidden}[_nghost-%COMP%]   .tb-relation-filters[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]{width:100%;overflow:auto}[_nghost-%COMP%]   .tb-relation-filters[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{width:-webkit-max-content;width:-moz-max-content;width:max-content;padding:0 5px 5px}[_nghost-%COMP%]   .tb-relation-filters[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .cell[_ngcontent-%COMP%]{padding-right:5px;padding-left:5px;font-size:12px;font-weight:700;color:rgba(0,0,0,.54);white-space:nowrap}[_nghost-%COMP%]   .tb-relation-filters[_ngcontent-%COMP%]   .body[_ngcontent-%COMP%]{width:-webkit-max-content;width:-moz-max-content;width:max-content;padding:0 5px 20px}[_nghost-%COMP%]   .tb-relation-filters[_ngcontent-%COMP%]   .body[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]{padding-top:5px}[_nghost-%COMP%]   .tb-relation-filters[_ngcontent-%COMP%]   .body[_ngcontent-%COMP%]   .cell[_ngcontent-%COMP%]{padding-right:5px;padding-left:5px}[_nghost-%COMP%]   .tb-relation-filters[_ngcontent-%COMP%]   .any-filter[_ngcontent-%COMP%]{margin:10px 0 20px}[_nghost-%COMP%]     .tb-relation-filters .cell .mat-form-field .mat-form-field-infix{border-top:none}[_nghost-%COMP%]     .tb-relation-filters .cell .mat-form-field.mat-form-field-appearance-standard .mat-form-field-flex{padding-top:0}"]}),e}(o.a);!function(){a["\u0275setClassMetadata"](b,[{type:a.Component,args:[{selector:"tb-relation-filters",templateUrl:"./relation-filters.component.html",styleUrls:["./relation-filters.component.scss"],providers:[{provide:r.NG_VALUE_ACCESSOR,useExisting:Object(a.forwardRef)((function(){return b})),multi:!0}]}]}],(function(){return[{type:s.Store},{type:r.FormBuilder}]}),{disabled:[{type:a.Input}],allowedEntityTypes:[{type:a.Input}]})}()},"/Bgp":function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var i=n("U3y+"),a=function(t){this.entityType=i.b.USER,this.id=t}},"02Lk":function(t,e,n){"use strict";n.d(e,"a",(function(){return c}));var i=n("JX7q"),a=n("Ji7U"),r=n("LK+K"),o=n("1OyB"),s=n("vuIU"),l=n("zx2A");function c(t,e){return function(n){return n.lift(new d(t,e))}}var d=function(){function t(e,n){Object(o.a)(this,t),this.keySelector=e,this.flushes=n}return Object(s.a)(t,[{key:"call",value:function(t,e){return e.subscribe(new p(t,this.keySelector,this.flushes))}}]),t}(),p=function(t){Object(a.a)(n,t);var e=Object(r.a)(n);function n(t,a,r){var s;return Object(o.a)(this,n),(s=e.call(this,t)).keySelector=a,s.values=new Set,r&&s.add(Object(l.c)(r,new l.a(Object(i.a)(s)))),s}return Object(s.a)(n,[{key:"notifyNext",value:function(){this.values.clear()}},{key:"notifyError",value:function(t){this._error(t)}},{key:"_next",value:function(t){this.keySelector?this._useKeySelector(t):this._finalizeNext(t,t)}},{key:"_useKeySelector",value:function(t){var e,n=this.destination;try{e=this.keySelector(t)}catch(i){return n.error(i),void 0}this._finalizeNext(e,t)}},{key:"_finalizeNext",value:function(t,e){var n=this.values;n.has(t)||(n.add(t),this.destination.next(e))}}]),n}(l.b)},"0AoA":function(t,e,n){"use strict";n.d(e,"a",(function(){return I}));var i=n("mrSG"),a=n("fXoL"),r=n("RxGS"),o=n("yl57"),s=n("FBAY"),l=(n("WEPN"),n("l7P3")),c=n("sYmb"),d=n("jhN1"),p=n("ofXK"),u=n("49Ji"),m=n("znSr"),f=n("eeD6"),h=n("XiUz"),g=n("Xa2L"),y=n("bTqV"),b=n("NFeN"),v=["dashboard"];function x(t,e){1&t&&(a["\u0275\u0275elementStart"](0,"div",5),a["\u0275\u0275element"](1,"mat-spinner",6),a["\u0275\u0275elementEnd"]())}function C(t,e){1&t&&(a["\u0275\u0275elementStart"](0,"span"),a["\u0275\u0275text"](1),a["\u0275\u0275pipe"](2,"translate"),a["\u0275\u0275elementEnd"]()),2&t&&(a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](2,1,"dashboard.no-widgets")," "))}function S(t,e){if(1&t){var n=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementStart"](0,"button",10),a["\u0275\u0275listener"]("click",(function(t){return a["\u0275\u0275restoreView"](n),a["\u0275\u0275nextContext"](2).addWidget(t)})),a["\u0275\u0275elementStart"](1,"mat-icon",11),a["\u0275\u0275text"](2,"add"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275text"](3),a["\u0275\u0275pipe"](4,"translate"),a["\u0275\u0275elementEnd"]()}2&t&&(a["\u0275\u0275advance"](3),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](4,1,"dashboard.add-widget")," "))}var w=function(t){return{color:t}};function E(t,e){if(1&t&&(a["\u0275\u0275elementStart"](0,"section",7),a["\u0275\u0275template"](1,C,3,3,"span",8),a["\u0275\u0275template"](2,S,5,3,"button",9),a["\u0275\u0275elementEnd"]()),2&t){var n=a["\u0275\u0275nextContext"]();a["\u0275\u0275property"]("ngStyle",a["\u0275\u0275pureFunction1"](3,w,n.layoutCtx.gridSettings.color)),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",!n.isEdit),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",n.isEdit&&!n.widgetEditMode)}}var I=function(t){function e(e,n,i,a){var r=t.call(this,e)||this;return r.store=e,r.translate=n,r.itembuffer=i,r.sanitizer=a,r.dashboardStyle=null,r.hotKeys=[],r.rxSubscriptions=new Array,r.initHotKeys(),r}return Object(i.d)(e,t),Object.defineProperty(e.prototype,"layoutCtx",{get:function(){return this.layoutCtxValue},set:function(t){this.layoutCtxValue=t,this.layoutCtxValue&&(this.layoutCtxValue.ctrl=this,null==this.dashboardStyle&&this.loadDashboardStyle())},enumerable:!1,configurable:!0}),e.prototype.ngOnInit=function(){var t=this;this.rxSubscriptions.push(this.dashboard.dashboardTimewindowChanged.subscribe((function(e){t.dashboardCtx.dashboardTimewindow=e,t.dashboardCtx.runChangeDetection()})))},e.prototype.ngOnDestroy=function(){this.rxSubscriptions.forEach((function(t){t.unsubscribe()})),this.rxSubscriptions.length=0},e.prototype.initHotKeys=function(){var t=this;this.hotKeys.push(new o.a("ctrl+c",(function(e){if(t.isEdit&&!t.isEditingWidget&&!t.widgetEditMode){var n=t.dashboard.getSelectedWidget();n&&(e.preventDefault(),t.copyWidget(e,n))}return!1}),null,this.translate.instant("action.copy"))),this.hotKeys.push(new o.a("ctrl+r",(function(e){if(t.isEdit&&!t.isEditingWidget&&!t.widgetEditMode){var n=t.dashboard.getSelectedWidget();n&&(e.preventDefault(),t.copyWidgetReference(e,n))}return!1}),null,this.translate.instant("action.copy-reference"))),this.hotKeys.push(new o.a("ctrl+v",(function(e){return!t.isEdit||t.isEditingWidget||t.widgetEditMode||t.itembuffer.hasWidget()&&(e.preventDefault(),t.pasteWidget(e)),!1}),null,this.translate.instant("action.paste"))),this.hotKeys.push(new o.a("ctrl+i",(function(e){return!t.isEdit||t.isEditingWidget||t.widgetEditMode||t.itembuffer.canPasteWidgetReference(t.dashboardCtx.getDashboard(),t.dashboardCtx.state,t.layoutCtx.id)&&(e.preventDefault(),t.pasteWidgetReference(e)),!1}),null,this.translate.instant("action.paste-reference"))),this.hotKeys.push(new o.a("ctrl+x",(function(e){if(t.isEdit&&!t.isEditingWidget&&!t.widgetEditMode){var n=t.dashboard.getSelectedWidget();n&&(e.preventDefault(),t.layoutCtx.dashboardCtrl.removeWidget(e,t.layoutCtx,n))}return!1}),null,this.translate.instant("action.delete")))},e.prototype.loadDashboardStyle=function(){this.dashboardStyle={"background-color":this.layoutCtx.gridSettings.backgroundColor,"background-repeat":"no-repeat","background-attachment":"scroll","background-size":this.layoutCtx.gridSettings.backgroundSizeMode||"100%","background-position":"0% 0%"},this.backgroundImage=this.layoutCtx.gridSettings.backgroundImageUrl?this.sanitizer.bypassSecurityTrustStyle("url("+this.layoutCtx.gridSettings.backgroundImageUrl+")"):"none"},e.prototype.reload=function(){var t=this;this.loadDashboardStyle(),this.dashboard.pauseChangeNotifications(),setTimeout((function(){t.dashboard.resumeChangeNotifications(),t.dashboard.notifyLayoutUpdated()}),0)},e.prototype.resetHighlight=function(){this.dashboard.resetHighlight()},e.prototype.highlightWidget=function(t,e){this.dashboard.highlightWidget(t,e)},e.prototype.selectWidget=function(t,e){this.dashboard.selectWidget(t,e)},e.prototype.addWidget=function(t){this.layoutCtx.dashboardCtrl.addWidget(t,this.layoutCtx)},e.prototype.onEditWidget=function(t,e){this.layoutCtx.dashboardCtrl.editWidget(t,this.layoutCtx,e)},e.prototype.onExportWidget=function(t,e){this.layoutCtx.dashboardCtrl.exportWidget(t,this.layoutCtx,e)},e.prototype.onRemoveWidget=function(t,e){return this.layoutCtx.dashboardCtrl.removeWidget(t,this.layoutCtx,e)},e.prototype.onWidgetMouseDown=function(t,e){this.layoutCtx.dashboardCtrl.widgetMouseDown(t,this.layoutCtx,e)},e.prototype.onWidgetClicked=function(t,e){this.layoutCtx.dashboardCtrl.widgetClicked(t,this.layoutCtx,e)},e.prototype.prepareDashboardContextMenu=function(t){return this.layoutCtx.dashboardCtrl.prepareDashboardContextMenu(this.layoutCtx)},e.prototype.prepareWidgetContextMenu=function(t,e){return this.layoutCtx.dashboardCtrl.prepareWidgetContextMenu(this.layoutCtx,e)},e.prototype.copyWidget=function(t,e){this.layoutCtx.dashboardCtrl.copyWidget(t,this.layoutCtx,e)},e.prototype.copyWidgetReference=function(t,e){this.layoutCtx.dashboardCtrl.copyWidgetReference(t,this.layoutCtx,e)},e.prototype.pasteWidget=function(t){var e=this.dashboard.getEventGridPosition(t);this.layoutCtx.dashboardCtrl.pasteWidget(t,this.layoutCtx,e)},e.prototype.pasteWidgetReference=function(t){var e=this.dashboard.getEventGridPosition(t);this.layoutCtx.dashboardCtrl.pasteWidgetReference(t,this.layoutCtx,e)},e.\u0275fac=function(t){return new(t||e)(a["\u0275\u0275directiveInject"](l.Store),a["\u0275\u0275directiveInject"](c.TranslateService),a["\u0275\u0275directiveInject"](s.a),a["\u0275\u0275directiveInject"](d.DomSanitizer))},e.\u0275cmp=a["\u0275\u0275defineComponent"]({type:e,selectors:[["tb-dashboard-layout"]],viewQuery:function(t,e){var n;(1&t&&a["\u0275\u0275staticViewQuery"](v,!0),2&t)&&(a["\u0275\u0275queryRefresh"](n=a["\u0275\u0275loadQuery"]())&&(e.dashboard=n.first))},inputs:{dashboardCheatSheet:"dashboardCheatSheet",layoutCtx:"layoutCtx",dashboardCtx:"dashboardCtx",isEdit:"isEdit",isEditingWidget:"isEditingWidget",isMobile:"isMobile",widgetEditMode:"widgetEditMode"},features:[a["\u0275\u0275InheritDefinitionFeature"]],decls:5,vars:28,consts:[["fxLayout","column","class","tb-progress-cover","fxLayoutAlign","center center",4,"ngIf"],["tb-hotkeys","",1,"mat-content",2,"position","relative","width","100%","height","100%",3,"hotkeys","cheatSheet","ngStyle"],["fxLayoutAlign","center center","style","display: flex; z-index: 1; pointer-events: none;","class","mat-headline tb-absolute-fill",3,"ngStyle",4,"ngIf"],[3,"dashboardStyle","backgroundImage","widgets","widgetLayouts","columns","margin","aliasController","stateController","dashboardTimewindow","isEdit","autofillHeight","mobileAutofillHeight","mobileRowHeight","isMobile","isMobileDisabled","disableWidgetInteraction","isEditActionEnabled","isExportActionEnabled","isRemoveActionEnabled","callbacks","ignoreLoading"],["dashboard",""],["fxLayout","column","fxLayoutAlign","center center",1,"tb-progress-cover"],["color","warn","mode","indeterminate","diameter","100"],["fxLayoutAlign","center center",1,"mat-headline","tb-absolute-fill",2,"display","flex","z-index","1","pointer-events","none",3,"ngStyle"],[4,"ngIf"],["mat-button","","class","tb-add-new-widget",3,"click",4,"ngIf"],["mat-button","",1,"tb-add-new-widget",3,"click"],[1,"tb-mat-96"]],template:function(t,e){1&t&&(a["\u0275\u0275template"](0,x,2,0,"div",0),a["\u0275\u0275elementStart"](1,"div",1),a["\u0275\u0275template"](2,E,3,5,"section",2),a["\u0275\u0275element"](3,"tb-dashboard",3,4),a["\u0275\u0275elementEnd"]()),2&t&&(a["\u0275\u0275property"]("ngIf",e.layoutCtx.widgets.isLoading()),a["\u0275\u0275advance"](1),a["\u0275\u0275styleProp"]("background-image",e.backgroundImage),a["\u0275\u0275property"]("hotkeys",e.hotKeys)("cheatSheet",e.dashboardCheatSheet)("ngStyle",e.dashboardStyle),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",e.layoutCtx.widgets.isEmpty()),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("dashboardStyle",e.dashboardStyle)("backgroundImage",e.backgroundImage)("widgets",e.layoutCtx.widgets)("widgetLayouts",e.layoutCtx.widgetLayouts)("columns",e.layoutCtx.gridSettings.columns)("margin",e.layoutCtx.gridSettings.margin)("aliasController",e.dashboardCtx.aliasController)("stateController",e.dashboardCtx.stateController)("dashboardTimewindow",e.dashboardCtx.dashboardTimewindow)("isEdit",e.isEdit)("autofillHeight",e.layoutCtx.gridSettings.autoFillHeight&&!e.isEdit)("mobileAutofillHeight",e.layoutCtx.gridSettings.mobileAutoFillHeight&&!e.isEdit)("mobileRowHeight",e.layoutCtx.gridSettings.mobileRowHeight)("isMobile",e.isMobile)("isMobileDisabled",e.widgetEditMode)("disableWidgetInteraction",e.isEdit)("isEditActionEnabled",e.isEdit)("isExportActionEnabled",e.isEdit&&!e.widgetEditMode)("isRemoveActionEnabled",e.isEdit&&!e.widgetEditMode)("callbacks",e)("ignoreLoading",e.layoutCtx.ignoreLoading))},directives:[p.NgIf,u.a,o.d,p.NgStyle,m.e,f.a,h.f,h.e,g.MatSpinner,y.MatButton,b.MatIcon],pipes:[c.TranslatePipe],styles:["[_nghost-%COMP%]   button.tb-add-new-widget[_ngcontent-%COMP%]{padding-right:12px;font-size:24px;border-style:dashed;border-width:2px}"]}),e}(r.a);!function(){a["\u0275setClassMetadata"](I,[{type:a.Component,args:[{selector:"tb-dashboard-layout",templateUrl:"./dashboard-layout.component.html",styleUrls:["./dashboard-layout.component.scss"]}]}],(function(){return[{type:l.Store},{type:c.TranslateService},{type:s.a},{type:d.DomSanitizer}]}),{dashboardCheatSheet:[{type:a.Input}],layoutCtx:[{type:a.Input}],dashboardCtx:[{type:a.Input}],isEdit:[{type:a.Input}],isEditingWidget:[{type:a.Input}],isMobile:[{type:a.Input}],widgetEditMode:[{type:a.Input}],dashboard:[{type:a.ViewChild,args:["dashboard",{static:!0}]}]})}()},"0Dj+":function(t,e,n){"use strict";n.d(e,"a",(function(){return d})),n.d(e,"b",(function(){return p}));var i=n("fXoL"),a=n("XiUz"),r=n("ofXK"),o=n("bSwM"),s=n("3Pt+"),l=n("sYmb");function c(t,e){if(1&t){var n=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"mat-checkbox",2),i["\u0275\u0275listener"]("ngModelChange",(function(t){return i["\u0275\u0275restoreView"](n),e.$implicit.display=t}))("ngModelChange",(function(){return i["\u0275\u0275restoreView"](n),i["\u0275\u0275nextContext"]().update()})),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()}if(2&t){var a=e.$implicit;i["\u0275\u0275property"]("ngModel",a.display),i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,2,"widget."+a.type)," ")}}var d=new i.InjectionToken("DisplayWidgetTypesPanelData"),p=function(){function t(t){this.data=t,this.types=this.data.types}return t.prototype.update=function(){this.data.typesUpdated(this.types)},t.\u0275fac=function(e){return new(e||t)(i["\u0275\u0275directiveInject"](d))},t.\u0275cmp=i["\u0275\u0275defineComponent"]({type:t,selectors:[["tb-widget-types-panel"]],decls:2,vars:1,consts:[["fxLayout","column",1,"mat-content","mat-padding"],["style","padding-bottom: 8px;",3,"ngModel","ngModelChange",4,"ngFor","ngForOf"],[2,"padding-bottom","8px",3,"ngModel","ngModelChange"]],template:function(t,e){1&t&&(i["\u0275\u0275elementStart"](0,"div",0),i["\u0275\u0275template"](1,c,3,4,"mat-checkbox",1),i["\u0275\u0275elementEnd"]()),2&t&&(i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngForOf",e.types))},directives:[a.f,r.NgForOf,o.MatCheckbox,s.NgControlStatus,s.NgModel],pipes:[l.TranslatePipe],styles:["[_nghost-%COMP%]{width:100%;height:100%;min-width:200px;overflow:hidden;background:#fff;border-radius:4px;box-shadow:0 7px 8px -4px rgba(0,0,0,.2),0 13px 19px 2px rgba(0,0,0,.14),0 5px 24px 4px rgba(0,0,0,.12)}[_nghost-%COMP%]   .mat-content[_ngcontent-%COMP%]{overflow:hidden;background-color:#fff}[_nghost-%COMP%]   .mat-padding[_ngcontent-%COMP%]{padding:16px}"]}),t}();!function(){i["\u0275setClassMetadata"](p,[{type:i.Component,args:[{selector:"tb-widget-types-panel",templateUrl:"./widget-types-panel.component.html",styleUrls:["./widget-types-panel.component.scss"]}]}],(function(){return[{type:void 0,decorators:[{type:i.Inject,args:[d]}]}]}),null)}()},"0WnP":function(t,e,n){"use strict";n.d(e,"a",(function(){return H}));var i=n("mrSG"),a=n("fXoL"),r=n("3Pt+"),o=n("MBk6"),s=n("U3y+"),l=n("21Fy"),c=n("7JTo"),d=n("sYmb"),p=n("XiUz"),u=n("kmnG"),m=n("d3UM"),f=n("ofXK"),h=n("FKr1"),g=n("89S7"),y=n("8lD5"),b=n("EdYI"),v=n("qFsG"),x=n("6XAR"),C=n("1jcm"),S=n("+Xys"),w=n("IVsW"),E=n("16lU");function I(t,e){if(1&t&&(a["\u0275\u0275elementStart"](0,"mat-option",8),a["\u0275\u0275text"](1),a["\u0275\u0275pipe"](2,"translate"),a["\u0275\u0275elementEnd"]()),2&t){var n=e.$implicit,i=a["\u0275\u0275nextContext"]();a["\u0275\u0275property"]("value",n),a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](2,2,i.aliasFilterTypeTranslations.get(n))," ")}}function O(t,e){1&t&&(a["\u0275\u0275elementStart"](0,"mat-error"),a["\u0275\u0275text"](1),a["\u0275\u0275pipe"](2,"translate"),a["\u0275\u0275elementEnd"]()),2&t&&(a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](2,1,"alias.filter-type-required")," "))}function T(t,e){1&t&&a["\u0275\u0275element"](0,"tb-entity-select",9)}function M(t,e){if(1&t&&(a["\u0275\u0275element"](0,"tb-entity-type-select",10),a["\u0275\u0275element"](1,"tb-entity-list",11)),2&t){var n=a["\u0275\u0275nextContext"]();a["\u0275\u0275property"]("allowedEntityTypes",n.allowedEntityTypes),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("entityType",n.filterFormGroup.get("entityType").value)}}function F(t,e){1&t&&(a["\u0275\u0275elementStart"](0,"mat-error"),a["\u0275\u0275text"](1),a["\u0275\u0275pipe"](2,"translate"),a["\u0275\u0275elementEnd"]()),2&t&&(a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](2,1,"entity.entity-name-filter-required")," "))}function P(t,e){if(1&t&&(a["\u0275\u0275element"](0,"tb-entity-type-select",10),a["\u0275\u0275elementStart"](1,"mat-form-field",1),a["\u0275\u0275elementStart"](2,"mat-label",2),a["\u0275\u0275text"](3,"entity.name-starts-with"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](4,"input",12),a["\u0275\u0275template"](5,F,3,3,"mat-error",5),a["\u0275\u0275elementEnd"]()),2&t){var n=a["\u0275\u0275nextContext"]();a["\u0275\u0275property"]("allowedEntityTypes",n.allowedEntityTypes),a["\u0275\u0275advance"](5),a["\u0275\u0275property"]("ngIf",n.filterFormGroup.get("entityNameFilter").hasError("required"))}}function D(t,e){if(1&t&&a["\u0275\u0275element"](0,"tb-entity-type-select",10),2&t){var n=a["\u0275\u0275nextContext"]();a["\u0275\u0275property"]("allowedEntityTypes",n.allowedEntityTypes)}}function k(t,e){1&t&&(a["\u0275\u0275elementStart"](0,"mat-form-field",13),a["\u0275\u0275elementStart"](1,"mat-label",2),a["\u0275\u0275text"](2,"alias.state-entity-parameter-name"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](3,"input",14),a["\u0275\u0275pipe"](4,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](5,"div",15),a["\u0275\u0275elementStart"](6,"label",16),a["\u0275\u0275text"](7),a["\u0275\u0275pipe"](8,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](9,"tb-entity-select",17),a["\u0275\u0275elementEnd"]()),2&t&&(a["\u0275\u0275advance"](3),a["\u0275\u0275propertyInterpolate"]("placeholder",a["\u0275\u0275pipeBind1"](4,2,"alias.default-entity-parameter-name")),a["\u0275\u0275advance"](4),a["\u0275\u0275textInterpolate"](a["\u0275\u0275pipeBind1"](8,4,"alias.default-state-entity")))}function j(t,e){if(1&t&&(a["\u0275\u0275element"](0,"tb-entity-subtype-autocomplete",18),a["\u0275\u0275elementStart"](1,"mat-form-field",1),a["\u0275\u0275elementStart"](2,"mat-label",2),a["\u0275\u0275text"](3,"asset.name-starts-with"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](4,"input",19),a["\u0275\u0275elementEnd"]()),2&t){var n=a["\u0275\u0275nextContext"]();a["\u0275\u0275property"]("entityType",n.entityType.ASSET)}}function A(t,e){if(1&t&&(a["\u0275\u0275element"](0,"tb-entity-subtype-autocomplete",20),a["\u0275\u0275elementStart"](1,"mat-form-field",1),a["\u0275\u0275elementStart"](2,"mat-label",2),a["\u0275\u0275text"](3,"device.name-starts-with"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](4,"input",21),a["\u0275\u0275elementEnd"]()),2&t){var n=a["\u0275\u0275nextContext"]();a["\u0275\u0275property"]("entityType",n.entityType.DEVICE)}}function _(t,e){if(1&t&&(a["\u0275\u0275element"](0,"tb-entity-subtype-autocomplete",22),a["\u0275\u0275elementStart"](1,"mat-form-field",1),a["\u0275\u0275elementStart"](2,"mat-label",2),a["\u0275\u0275text"](3,"entity-view.name-starts-with"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](4,"input",23),a["\u0275\u0275elementEnd"]()),2&t){var n=a["\u0275\u0275nextContext"]();a["\u0275\u0275property"]("entityType",n.entityType.ENTITY_VIEW)}}function L(t,e){1&t&&(a["\u0275\u0275elementStart"](0,"div",29),a["\u0275\u0275element"](1,"tb-entity-select",38),a["\u0275\u0275elementEnd"]())}function V(t,e){1&t&&(a["\u0275\u0275elementStart"](0,"div",29),a["\u0275\u0275elementStart"](1,"mat-form-field",39),a["\u0275\u0275elementStart"](2,"mat-label",2),a["\u0275\u0275text"](3,"alias.state-entity-parameter-name"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](4,"input",14),a["\u0275\u0275pipe"](5,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](6,"div",40),a["\u0275\u0275elementStart"](7,"label",16),a["\u0275\u0275text"](8),a["\u0275\u0275pipe"](9,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](10,"tb-entity-select",17),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()),2&t&&(a["\u0275\u0275advance"](4),a["\u0275\u0275propertyInterpolate"]("placeholder",a["\u0275\u0275pipeBind1"](5,2,"alias.default-entity-parameter-name")),a["\u0275\u0275advance"](4),a["\u0275\u0275textInterpolate"](a["\u0275\u0275pipeBind1"](9,4,"alias.default-state-entity")))}function R(t,e){if(1&t&&(a["\u0275\u0275elementStart"](0,"mat-option",8),a["\u0275\u0275text"](1),a["\u0275\u0275pipe"](2,"translate"),a["\u0275\u0275elementEnd"]()),2&t){var n=e.$implicit,i=a["\u0275\u0275nextContext"](2);a["\u0275\u0275property"]("value",n),a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](2,2,i.directionTypeTranslations.get(i.directionTypeEnum[n]))," ")}}function N(t,e){if(1&t&&(a["\u0275\u0275elementStart"](0,"section",24),a["\u0275\u0275elementStart"](1,"label",16),a["\u0275\u0275text"](2),a["\u0275\u0275pipe"](3,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](4,"section",25),a["\u0275\u0275element"](5,"mat-slide-toggle",26),a["\u0275\u0275elementStart"](6,"label",27),a["\u0275\u0275text"](7,"alias.root-state-entity"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275template"](8,L,2,0,"div",28),a["\u0275\u0275template"](9,V,11,6,"div",28),a["\u0275\u0275elementStart"](10,"div",29),a["\u0275\u0275elementStart"](11,"section",25),a["\u0275\u0275element"](12,"mat-slide-toggle",30),a["\u0275\u0275elementStart"](13,"label",27),a["\u0275\u0275text"](14,"alias.last-level-relation"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](15,"div",31),a["\u0275\u0275elementStart"](16,"mat-form-field",32),a["\u0275\u0275elementStart"](17,"mat-label",2),a["\u0275\u0275text"](18,"relation.direction"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](19,"mat-select",33),a["\u0275\u0275template"](20,R,3,4,"mat-option",4),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](21,"mat-form-field",34),a["\u0275\u0275elementStart"](22,"mat-label",2),a["\u0275\u0275text"](23,"alias.max-relation-level"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](24,"input",35),a["\u0275\u0275pipe"](25,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](26,"div",36),a["\u0275\u0275text"](27,"relation.relation-filters"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](28,"tb-relation-filters",37),a["\u0275\u0275elementEnd"]()),2&t){var n=a["\u0275\u0275nextContext"]();a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate"](a["\u0275\u0275pipeBind1"](3,6,"alias.root-entity")),a["\u0275\u0275advance"](6),a["\u0275\u0275property"]("ngIf",!n.filterFormGroup.get("rootStateEntity").value),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",n.filterFormGroup.get("rootStateEntity").value),a["\u0275\u0275advance"](11),a["\u0275\u0275property"]("ngForOf",n.directionTypes),a["\u0275\u0275advance"](4),a["\u0275\u0275propertyInterpolate"]("placeholder",a["\u0275\u0275pipeBind1"](25,8,"alias.unlimited-level")),a["\u0275\u0275advance"](4),a["\u0275\u0275property"]("allowedEntityTypes",n.allowedEntityTypes)}}function G(t,e){1&t&&(a["\u0275\u0275elementStart"](0,"div",29),a["\u0275\u0275element"](1,"tb-entity-select",38),a["\u0275\u0275elementEnd"]())}function B(t,e){1&t&&(a["\u0275\u0275elementStart"](0,"div",29),a["\u0275\u0275elementStart"](1,"mat-form-field",39),a["\u0275\u0275elementStart"](2,"mat-label",2),a["\u0275\u0275text"](3,"alias.state-entity-parameter-name"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](4,"input",14),a["\u0275\u0275pipe"](5,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](6,"div",40),a["\u0275\u0275elementStart"](7,"label",16),a["\u0275\u0275text"](8),a["\u0275\u0275pipe"](9,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](10,"tb-entity-select",17),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()),2&t&&(a["\u0275\u0275advance"](4),a["\u0275\u0275propertyInterpolate"]("placeholder",a["\u0275\u0275pipeBind1"](5,2,"alias.default-entity-parameter-name")),a["\u0275\u0275advance"](4),a["\u0275\u0275textInterpolate"](a["\u0275\u0275pipeBind1"](9,4,"alias.default-state-entity")))}function U(t,e){if(1&t&&(a["\u0275\u0275elementStart"](0,"mat-option",8),a["\u0275\u0275text"](1),a["\u0275\u0275pipe"](2,"translate"),a["\u0275\u0275elementEnd"]()),2&t){var n=e.$implicit,i=a["\u0275\u0275nextContext"](2);a["\u0275\u0275property"]("value",n),a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](2,2,i.directionTypeTranslations.get(i.directionTypeEnum[n]))," ")}}function q(t,e){if(1&t&&(a["\u0275\u0275elementStart"](0,"label",16),a["\u0275\u0275text"](1),a["\u0275\u0275pipe"](2,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](3,"section",25),a["\u0275\u0275element"](4,"mat-slide-toggle",26),a["\u0275\u0275elementStart"](5,"label",27),a["\u0275\u0275text"](6,"alias.root-state-entity"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275template"](7,G,2,0,"div",28),a["\u0275\u0275template"](8,B,11,6,"div",28),a["\u0275\u0275elementStart"](9,"div",29),a["\u0275\u0275elementStart"](10,"section",25),a["\u0275\u0275element"](11,"mat-slide-toggle",30),a["\u0275\u0275elementStart"](12,"label",27),a["\u0275\u0275text"](13,"alias.last-level-relation"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](14,"div",31),a["\u0275\u0275elementStart"](15,"mat-form-field",32),a["\u0275\u0275elementStart"](16,"mat-label",2),a["\u0275\u0275text"](17,"relation.direction"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](18,"mat-select",33),a["\u0275\u0275template"](19,U,3,4,"mat-option",4),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](20,"mat-form-field",34),a["\u0275\u0275elementStart"](21,"mat-label",2),a["\u0275\u0275text"](22,"alias.max-relation-level"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](23,"input",35),a["\u0275\u0275pipe"](24,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](25,"div",41),a["\u0275\u0275text"](26,"relation.relation-type"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](27,"tb-relation-type-autocomplete",42)),2&t){var n=a["\u0275\u0275nextContext"]();a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate"](a["\u0275\u0275pipeBind1"](2,5,"alias.root-entity")),a["\u0275\u0275advance"](6),a["\u0275\u0275property"]("ngIf",!n.filterFormGroup.get("rootStateEntity").value),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",n.filterFormGroup.get("rootStateEntity").value),a["\u0275\u0275advance"](11),a["\u0275\u0275property"]("ngForOf",n.directionTypes),a["\u0275\u0275advance"](4),a["\u0275\u0275propertyInterpolate"]("placeholder",a["\u0275\u0275pipeBind1"](24,7,"alias.unlimited-level"))}}function W(t,e){if(1&t&&(a["\u0275\u0275elementStart"](0,"div",43),a["\u0275\u0275text"](1,"asset.asset-types"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](2,"tb-entity-subtype-list",44)),2&t){var n=a["\u0275\u0275nextContext"]();a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("entityType",n.entityType.ASSET)}}function z(t,e){if(1&t&&(a["\u0275\u0275elementStart"](0,"div",43),a["\u0275\u0275text"](1,"device.device-types"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](2,"tb-entity-subtype-list",45)),2&t){var n=a["\u0275\u0275nextContext"]();a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("entityType",n.entityType.DEVICE)}}function K(t,e){if(1&t&&(a["\u0275\u0275elementStart"](0,"div",43),a["\u0275\u0275text"](1,"entity-view.entity-view-types"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](2,"tb-entity-subtype-list",46)),2&t){var n=a["\u0275\u0275nextContext"]();a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("entityType",n.entityType.ENTITY_VIEW)}}var H=function(){function t(t,e,n){this.translate=t,this.entityService=e,this.fb=n,this.resolveMultipleChanged=new a.EventEmitter,this.aliasFilterType=o.a,this.aliasFilterTypeTranslations=o.b,this.entityType=s.b,this.directionTypes=Object.keys(c.b),this.directionTypeTranslations=c.g,this.directionTypeEnum=c.b,this.propagateChange=null}return t.prototype.ngOnInit=function(){var t=this;this.aliasFilterTypes=this.entityService.getAliasFilterTypesByEntityTypes(this.allowedEntityTypes),this.entityFilterFormGroup=this.fb.group({type:[null,[r.Validators.required]]}),this.entityFilterFormGroup.get("type").valueChanges.subscribe((function(e){t.filterTypeChanged(e)})),this.entityFilterFormGroup.valueChanges.subscribe((function(){t.updateModel()})),this.filterFormGroup=this.fb.group({})},t.prototype.registerOnChange=function(t){this.propagateChange=t},t.prototype.registerOnTouched=function(t){},t.prototype.setDisabledState=function(t){this.disabled=t},t.prototype.writeValue=function(t){t||(t={type:null,resolveMultiple:this.resolveMultiple}),this.entityFilterFormGroup.get("type").patchValue(t.type,{emitEvent:!1}),t&&t.type&&this.updateFilterFormGroup(t.type,t)},t.prototype.updateFilterFormGroup=function(t,e){var n=this;switch(t){case o.a.singleEntity:this.filterFormGroup=this.fb.group({singleEntity:[e?e.singleEntity:null,[r.Validators.required]]});break;case o.a.entityList:this.filterFormGroup=this.fb.group({entityType:[e?e.entityType:null,[r.Validators.required]],entityList:[e?e.entityList:[],[r.Validators.required]]});break;case o.a.entityName:this.filterFormGroup=this.fb.group({entityType:[e?e.entityType:null,[r.Validators.required]],entityNameFilter:[e?e.entityNameFilter:"",[r.Validators.required]]});break;case o.a.entityType:this.filterFormGroup=this.fb.group({entityType:[e?e.entityType:null,[r.Validators.required]]});break;case o.a.stateEntity:this.filterFormGroup=this.fb.group({stateEntityParamName:[e?e.stateEntityParamName:null,[]],defaultStateEntity:[e?e.defaultStateEntity:null,[]]});break;case o.a.assetType:this.filterFormGroup=this.fb.group({assetType:[e?e.assetType:null,[r.Validators.required]],assetNameFilter:[e?e.assetNameFilter:"",[]]});break;case o.a.deviceType:this.filterFormGroup=this.fb.group({deviceType:[e?e.deviceType:null,[r.Validators.required]],deviceNameFilter:[e?e.deviceNameFilter:"",[]]});break;case o.a.entityViewType:this.filterFormGroup=this.fb.group({entityViewType:[e?e.entityViewType:null,[r.Validators.required]],entityViewNameFilter:[e?e.entityViewNameFilter:"",[]]});break;case o.a.apiUsageState:this.filterFormGroup=this.fb.group({});break;case o.a.relationsQuery:case o.a.assetSearchQuery:case o.a.deviceSearchQuery:case o.a.entityViewSearchQuery:this.filterFormGroup=this.fb.group({rootStateEntity:[!!e&&e.rootStateEntity,[]],stateEntityParamName:[e?e.stateEntityParamName:null,[]],defaultStateEntity:[e?e.defaultStateEntity:null,[]],rootEntity:[e?e.rootEntity:null,e&&e.rootStateEntity?[]:[r.Validators.required]],direction:[e?e.direction:c.b.FROM,[r.Validators.required]],maxLevel:[e?e.maxLevel:1,[]],fetchLastLevelOnly:[!!e&&e.fetchLastLevelOnly,[]]}),this.filterFormGroup.get("rootStateEntity").valueChanges.subscribe((function(t){n.filterFormGroup.get("rootEntity").setValidators(t?[]:[r.Validators.required]),n.filterFormGroup.get("rootEntity").updateValueAndValidity()})),t===o.a.relationsQuery?this.filterFormGroup.addControl("filters",this.fb.control(e?e.filters:[],[])):(this.filterFormGroup.addControl("relationType",this.fb.control(e?e.relationType:null,[])),t===o.a.assetSearchQuery?this.filterFormGroup.addControl("assetTypes",this.fb.control(e?e.assetTypes:[],[r.Validators.required])):t===o.a.deviceSearchQuery?this.filterFormGroup.addControl("deviceTypes",this.fb.control(e?e.deviceTypes:[],[r.Validators.required])):t===o.a.entityViewSearchQuery&&this.filterFormGroup.addControl("entityViewTypes",this.fb.control(e?e.entityViewTypes:[],[r.Validators.required])))}this.filterFormGroup.valueChanges.subscribe((function(){n.updateModel()}))},t.prototype.filterTypeChanged=function(t){var e=!0;t!==o.a.singleEntity&&t!==o.a.stateEntity&&t!==o.a.apiUsageState||(e=!1),this.resolveMultiple!==e&&this.resolveMultipleChanged.emit(e),this.updateFilterFormGroup(t)},t.prototype.updateModel=function(){var t=null;this.entityFilterFormGroup.valid&&this.filterFormGroup.valid&&(t={type:this.entityFilterFormGroup.get("type").value,resolveMultiple:this.resolveMultiple},t=Object(i.a)(Object(i.a)({},t),this.filterFormGroup.value)),this.propagateChange(t)},t.\u0275fac=function(e){return new(e||t)(a["\u0275\u0275directiveInject"](d.TranslateService),a["\u0275\u0275directiveInject"](l.a),a["\u0275\u0275directiveInject"](r.FormBuilder))},t.\u0275cmp=a["\u0275\u0275defineComponent"]({type:t,selectors:[["tb-entity-filter"]],inputs:{disabled:"disabled",allowedEntityTypes:"allowedEntityTypes",resolveMultiple:"resolveMultiple"},outputs:{resolveMultipleChanged:"resolveMultipleChanged"},features:[a["\u0275\u0275ProvidersFeature"]([{provide:r.NG_VALUE_ACCESSOR,useExisting:Object(a.forwardRef)((function(){return t})),multi:!0}])],decls:21,vars:18,consts:[["fxLayout","column",1,"tb-entity-filter",3,"formGroup"],[1,"mat-block"],["translate",""],["required","","formControlName","type"],[3,"value",4,"ngFor","ngForOf"],[4,"ngIf"],["fxLayout","column",3,"formGroup","ngSwitch"],[3,"ngSwitchCase"],[3,"value"],["required","","useAliasEntityTypes","true","formControlName","singleEntity"],["required","","showLabel","","formControlName","entityType",3,"allowedEntityTypes"],["required","","formControlName","entityList",3,"entityType"],["matInput","","formControlName","entityNameFilter","required",""],["floatLabel","always",1,"mat-block"],["matInput","","formControlName","stateEntityParamName",3,"placeholder"],["fxLayout","column"],[1,"tb-small"],["fxFlex","","useAliasEntityTypes","true","formControlName","defaultStateEntity"],["required","","formControlName","assetType",3,"entityType"],["matInput","","formControlName","assetNameFilter"],["required","","formControlName","deviceType",3,"entityType"],["matInput","","formControlName","deviceNameFilter"],["required","","formControlName","entityViewType",3,"entityType"],["matInput","","formControlName","entityViewNameFilter"],["fxLayout","column","id","relationsQueryFilter"],["fxLayout","row","fxLayoutAlign","start center",1,"tb-root-state-entity-switch",2,"padding-left","0"],["formControlName","rootStateEntity",1,"root-state-entity-switch"],["translate","",1,"tb-small","root-state-entity-label"],["fxFlex","","fxLayout","row",4,"ngIf"],["fxFlex","","fxLayout","row"],["formControlName","fetchLastLevelOnly",1,"root-state-entity-switch"],["fxFlex","","fxLayoutGap","8px","fxLayout","row","fxLayout.xs","column"],[1,"mat-block",2,"min-width","100px"],["required","","formControlName","direction"],["fxFlex","","floatLabel","always",1,"mat-block"],["matInput","","type","number","min","1","step","1","formControlName","maxLevel",3,"placeholder"],["translate","",1,"mat-caption",2,"padding-bottom","10px","color","rgba(0,0,0,0.57)"],["formControlName","filters",3,"allowedEntityTypes"],["fxFlex","","required","","useAliasEntityTypes","true","formControlName","rootEntity"],["floatLabel","always",1,"mat-block",2,"margin-top","14px","padding-right","8px"],["fxFlex","","fxLayout","column"],["translate","",1,"mat-caption",2,"color","rgba(0,0,0,0.57)"],["fxFlex","","formControlName","relationType"],["translate","",1,"mat-caption","tb-required",2,"color","rgba(0,0,0,0.57)"],["required","","formControlName","assetTypes",3,"entityType"],["required","","formControlName","deviceTypes",3,"entityType"],["required","","formControlName","entityViewTypes",3,"entityType"]],template:function(t,e){1&t&&(a["\u0275\u0275elementStart"](0,"div",0),a["\u0275\u0275elementStart"](1,"mat-form-field",1),a["\u0275\u0275elementStart"](2,"mat-label",2),a["\u0275\u0275text"](3,"alias.filter-type"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](4,"mat-select",3),a["\u0275\u0275template"](5,I,3,4,"mat-option",4),a["\u0275\u0275elementEnd"](),a["\u0275\u0275template"](6,O,3,3,"mat-error",5),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](7,"section",6),a["\u0275\u0275template"](8,T,1,0,"ng-template",7),a["\u0275\u0275template"](9,M,2,2,"ng-template",7),a["\u0275\u0275template"](10,P,6,2,"ng-template",7),a["\u0275\u0275template"](11,D,1,1,"ng-template",7),a["\u0275\u0275template"](12,k,10,6,"ng-template",7),a["\u0275\u0275template"](13,j,5,1,"ng-template",7),a["\u0275\u0275template"](14,A,5,1,"ng-template",7),a["\u0275\u0275template"](15,_,5,1,"ng-template",7),a["\u0275\u0275template"](16,N,29,10,"ng-template",7),a["\u0275\u0275template"](17,q,28,9,"ng-template",7),a["\u0275\u0275template"](18,W,3,1,"ng-template",7),a["\u0275\u0275template"](19,z,3,1,"ng-template",7),a["\u0275\u0275template"](20,K,3,1,"ng-template",7),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()),2&t&&(a["\u0275\u0275property"]("formGroup",e.entityFilterFormGroup),a["\u0275\u0275advance"](5),a["\u0275\u0275property"]("ngForOf",e.aliasFilterTypes),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",e.entityFilterFormGroup.get("type").hasError("required")),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("formGroup",e.filterFormGroup)("ngSwitch",e.entityFilterFormGroup.get("type").value),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngSwitchCase",e.aliasFilterType.singleEntity),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngSwitchCase",e.aliasFilterType.entityList),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngSwitchCase",e.aliasFilterType.entityName),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngSwitchCase",e.aliasFilterType.entityType),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngSwitchCase",e.aliasFilterType.stateEntity),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngSwitchCase",e.aliasFilterType.assetType),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngSwitchCase",e.aliasFilterType.deviceType),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngSwitchCase",e.aliasFilterType.entityViewType),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngSwitchCase",e.aliasFilterType.relationsQuery),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngSwitchCase",e.entityFilterFormGroup.get("type").value===e.aliasFilterType.assetSearchQuery||e.entityFilterFormGroup.get("type").value===e.aliasFilterType.deviceSearchQuery||e.entityFilterFormGroup.get("type").value===e.aliasFilterType.entityViewSearchQuery?e.entityFilterFormGroup.get("type").value:""),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngSwitchCase",e.aliasFilterType.assetSearchQuery),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngSwitchCase",e.aliasFilterType.deviceSearchQuery),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngSwitchCase",e.aliasFilterType.entityViewSearchQuery))},directives:[p.f,r.NgControlStatusGroup,r.FormGroupDirective,u.MatFormField,u.MatLabel,d.TranslateDirective,m.MatSelect,r.RequiredValidator,r.NgControlStatus,r.FormControlName,f.NgForOf,f.NgIf,f.NgSwitch,f.NgSwitchCase,h.MatOption,u.MatError,g.a,y.a,b.a,v.MatInput,r.DefaultValueAccessor,p.b,x.a,p.e,C.MatSlideToggle,p.g,r.NumberValueAccessor,S.a,w.a,E.a],pipes:[d.TranslatePipe],styles:["[_nghost-%COMP%]   .tb-entity-filter[_ngcontent-%COMP%]   #relationsQueryFilter[_ngcontent-%COMP%]{padding-top:20px}[_nghost-%COMP%]   .tb-entity-filter[_ngcontent-%COMP%]   #relationsQueryFilter[_ngcontent-%COMP%]   tb-entity-select[_ngcontent-%COMP%]{min-height:92px}[_nghost-%COMP%]   .tb-entity-filter[_ngcontent-%COMP%]   .tb-root-state-entity-switch[_ngcontent-%COMP%]{padding-left:10px;padding-bottom:10px}[_nghost-%COMP%]   .tb-entity-filter[_ngcontent-%COMP%]   .tb-root-state-entity-switch[_ngcontent-%COMP%]   .root-state-entity-switch[_ngcontent-%COMP%]{margin:0}[_nghost-%COMP%]   .tb-entity-filter[_ngcontent-%COMP%]   .tb-root-state-entity-switch[_ngcontent-%COMP%]   .root-state-entity-label[_ngcontent-%COMP%]{margin:5px 0 5px 10px}"]}),t}();!function(){a["\u0275setClassMetadata"](H,[{type:a.Component,args:[{selector:"tb-entity-filter",templateUrl:"./entity-filter.component.html",styleUrls:["./entity-filter.component.scss"],providers:[{provide:r.NG_VALUE_ACCESSOR,useExisting:Object(a.forwardRef)((function(){return H})),multi:!0}]}]}],(function(){return[{type:d.TranslateService},{type:l.a},{type:r.FormBuilder}]}),{disabled:[{type:a.Input}],allowedEntityTypes:[{type:a.Input}],resolveMultiple:[{type:a.Input}],resolveMultipleChanged:[{type:a.Output}]})}()},"0dMK":function(t,e,n){"use strict";n.d(e,"a",(function(){return c})),n.d(e,"b",(function(){return d}));var i=n("fXoL"),a=n("XiUz"),r=n("ofXK"),o=n("iOaI"),s=n("3Pt+");function l(t,e){if(1&t){var n=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"div",2),i["\u0275\u0275elementStart"](1,"tb-aliases-entity-autocomplete",3),i["\u0275\u0275listener"]("ngModelChange",(function(t){return i["\u0275\u0275restoreView"](n),e.$implicit.value.currentEntity=t}))("ngModelChange",(function(){i["\u0275\u0275restoreView"](n);var t=e.$implicit;return i["\u0275\u0275nextContext"]().currentAliasEntityChanged(t.key,t.value.currentEntity)})),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()}if(2&t){var a=e.$implicit;i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("alias",a.value.alias)("entityFilter",a.value.entityFilter)("ngModel",a.value.currentEntity)}}var c=new i.InjectionToken("AliasesEntitySelectPanelData"),d=function(){function t(t){this.data=t,this.entityAliasesInfo=this.data.entityAliasesInfo}return t.prototype.currentAliasEntityChanged=function(t,e){e&&this.data.aliasController.updateCurrentAliasEntity(t,e)},t.\u0275fac=function(e){return new(e||t)(i["\u0275\u0275directiveInject"](c))},t.\u0275cmp=i["\u0275\u0275defineComponent"]({type:t,selectors:[["tb-aliases-entity-select-panel"]],decls:3,vars:3,consts:[["fxLayout","column",1,"mat-content","mat-padding"],["fxLayout","row",4,"ngFor","ngForOf"],["fxLayout","row"],["fxFlex","","required","",3,"alias","entityFilter","ngModel","ngModelChange"]],template:function(t,e){1&t&&(i["\u0275\u0275elementStart"](0,"div",0),i["\u0275\u0275template"](1,l,2,3,"div",1),i["\u0275\u0275pipe"](2,"keyvalue"),i["\u0275\u0275elementEnd"]()),2&t&&(i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngForOf",i["\u0275\u0275pipeBind1"](2,1,e.entityAliasesInfo)))},directives:[a.f,r.NgForOf,o.a,a.b,s.RequiredValidator,s.NgControlStatus,s.NgModel],pipes:[r.KeyValuePipe],styles:["[_nghost-%COMP%]{min-width:300px;max-height:150px;overflow-x:hidden;overflow-y:auto;background:#fff;border-radius:4px;box-shadow:0 7px 8px -4px rgba(0,0,0,.2),0 13px 19px 2px rgba(0,0,0,.14),0 5px 24px 4px rgba(0,0,0,.12)}@media (min-height:350px){[_nghost-%COMP%]{max-height:250px}}[_nghost-%COMP%]   .mat-content[_ngcontent-%COMP%]{background-color:#fff}"]}),t}();!function(){i["\u0275setClassMetadata"](d,[{type:i.Component,args:[{selector:"tb-aliases-entity-select-panel",templateUrl:"./aliases-entity-select-panel.component.html",styleUrls:["./aliases-entity-select-panel.component.scss"]}]}],(function(){return[{type:void 0,decorators:[{type:i.Inject,args:[c]}]}]}),null)}()},"10j8":function(t,e,n){"use strict";n.d(e,"a",(function(){return G}));var i=n("mrSG"),a=n("fXoL"),r=n("0IaG"),o=n("jtHE"),s=n("gmuX"),l=n("UZbx"),c=n("7ZKe"),d=n("vkgz"),p=n("l7P3"),u=n("tyNb"),m=n("ofXK"),f=n("sYmb"),h=n("3Pt+"),g=n("/t3+"),y=n("XiUz"),b=n("bTqV"),v=n("NFeN"),x=n("kmnG"),C=n("qFsG"),S=n("znSr"),w=n("bv9b"),E=n("H3So");function I(t,e){1&t&&a["\u0275\u0275element"](0,"mat-progress-bar",23)}function O(t,e){1&t&&a["\u0275\u0275element"](0,"div",24)}function T(t,e){1&t&&(a["\u0275\u0275elementStart"](0,"mat-form-field",13),a["\u0275\u0275elementStart"](1,"mat-label",11),a["\u0275\u0275text"](2,"alarm.start-time"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](3,"input",27),a["\u0275\u0275elementEnd"]())}function M(t,e){1&t&&(a["\u0275\u0275elementStart"](0,"mat-form-field",13),a["\u0275\u0275elementStart"](1,"mat-label",11),a["\u0275\u0275text"](2,"alarm.end-time"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](3,"input",28),a["\u0275\u0275elementEnd"]())}function F(t,e){1&t&&a["\u0275\u0275element"](0,"span",2)}function P(t,e){if(1&t&&(a["\u0275\u0275elementStart"](0,"div",9),a["\u0275\u0275template"](1,T,4,0,"mat-form-field",25),a["\u0275\u0275template"](2,M,4,0,"mat-form-field",25),a["\u0275\u0275template"](3,F,1,0,"span",26),a["\u0275\u0275elementEnd"]()),2&t){var n=a["\u0275\u0275nextContext"]();a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",n.alarmFormGroup.get("startTime").value),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",n.alarmFormGroup.get("endTime").value),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",!n.alarmFormGroup.get("startTime").value||!n.alarmFormGroup.get("endTime").value)}}function D(t,e){1&t&&(a["\u0275\u0275elementStart"](0,"mat-form-field",13),a["\u0275\u0275elementStart"](1,"mat-label",11),a["\u0275\u0275text"](2,"alarm.ack-time"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](3,"input",29),a["\u0275\u0275elementEnd"]())}function k(t,e){1&t&&(a["\u0275\u0275elementStart"](0,"mat-form-field",13),a["\u0275\u0275elementStart"](1,"mat-label",11),a["\u0275\u0275text"](2,"alarm.clear-time"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](3,"input",30),a["\u0275\u0275elementEnd"]())}function j(t,e){1&t&&a["\u0275\u0275element"](0,"span",2)}function A(t,e){if(1&t&&(a["\u0275\u0275elementStart"](0,"div",9),a["\u0275\u0275template"](1,D,4,0,"mat-form-field",25),a["\u0275\u0275template"](2,k,4,0,"mat-form-field",25),a["\u0275\u0275template"](3,j,1,0,"span",26),a["\u0275\u0275elementEnd"]()),2&t){var n=a["\u0275\u0275nextContext"]();a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",n.alarmFormGroup.get("ackTime").value),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",n.alarmFormGroup.get("clearTime").value),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",!n.alarmFormGroup.get("ackTime").value||!n.alarmFormGroup.get("clearTime").value)}}function _(t,e){1&t&&(a["\u0275\u0275element"](0,"tb-json-object-edit",31),a["\u0275\u0275pipe"](1,"translate")),2&t&&a["\u0275\u0275propertyInterpolate"]("label",a["\u0275\u0275pipeBind1"](1,1,"alarm.details"))}function L(t,e){if(1&t){var n=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementStart"](0,"button",34),a["\u0275\u0275listener"]("click",(function(){return a["\u0275\u0275restoreView"](n),a["\u0275\u0275nextContext"](2).acknowledge()})),a["\u0275\u0275pipe"](1,"async"),a["\u0275\u0275text"](2),a["\u0275\u0275pipe"](3,"translate"),a["\u0275\u0275elementEnd"]()}if(2&t){var i=a["\u0275\u0275nextContext"](2);a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](1,2,i.isLoading$)),a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](3,4,"alarm.acknowledge")," ")}}function V(t,e){if(1&t){var n=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementStart"](0,"button",34),a["\u0275\u0275listener"]("click",(function(){return a["\u0275\u0275restoreView"](n),a["\u0275\u0275nextContext"](2).clear()})),a["\u0275\u0275pipe"](1,"async"),a["\u0275\u0275text"](2),a["\u0275\u0275pipe"](3,"translate"),a["\u0275\u0275elementEnd"]()}if(2&t){var i=a["\u0275\u0275nextContext"](2);a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](1,2,i.isLoading$)),a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](3,4,"alarm.clear")," ")}}function R(t,e){if(1&t&&(a["\u0275\u0275elementStart"](0,"div",32),a["\u0275\u0275template"](1,L,4,6,"button",33),a["\u0275\u0275template"](2,V,4,6,"button",33),a["\u0275\u0275elementEnd"]()),2&t){var n=e.$implicit,i=a["\u0275\u0275nextContext"]();a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",i.allowAcknowledgment&&(n.status===i.alarmStatuses.ACTIVE_UNACK||n.status===i.alarmStatuses.CLEARED_UNACK)),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",i.allowClear&&(n.status===i.alarmStatuses.ACTIVE_ACK||n.status===i.alarmStatuses.ACTIVE_UNACK))}}var N=function(t){return{fontWeight:"bold",color:t}},G=function(t){function e(e,n,i,a,r,s,c,p){var u=t.call(this,e,n,c)||this;return u.store=e,u.router=n,u.datePipe=i,u.translate=a,u.data=r,u.alarmService=s,u.dialogRef=c,u.fb=p,u.loadAlarmSubject=new o.a,u.alarm$=u.loadAlarmSubject.asObservable().pipe(Object(d.a)((function(t){return u.loadAlarmFields(t)}))),u.alarmSeverityColorsMap=l.g,u.alarmStatuses=l.d,u.alarmUpdated=!1,u.allowAcknowledgment=r.allowAcknowledgment,u.allowClear=r.allowClear,u.displayDetails=r.displayDetails,u.alarmFormGroup=u.fb.group({createdTime:[""],originatorName:[""],startTime:[""],endTime:[""],ackTime:[""],clearTime:[""],type:[""],alarmSeverity:[""],alarmStatus:[""],alarmDetails:[null]}),u.loadAlarm(),u}return Object(i.d)(e,t),e.prototype.loadAlarm=function(){var t=this;this.alarmService.getAlarmInfo(this.data.alarmId).subscribe((function(e){return t.loadAlarmSubject.next(e)}))},e.prototype.loadAlarmFields=function(t){this.alarmFormGroup.get("createdTime").patchValue(this.datePipe.transform(t.createdTime,"yyyy-MM-dd HH:mm:ss")),this.alarmFormGroup.get("originatorName").patchValue(t.originatorName),t.startTs&&this.alarmFormGroup.get("startTime").patchValue(this.datePipe.transform(t.startTs,"yyyy-MM-dd HH:mm:ss")),t.endTs&&this.alarmFormGroup.get("endTime").patchValue(this.datePipe.transform(t.endTs,"yyyy-MM-dd HH:mm:ss")),t.ackTs&&this.alarmFormGroup.get("ackTime").patchValue(this.datePipe.transform(t.ackTs,"yyyy-MM-dd HH:mm:ss")),t.clearTs&&this.alarmFormGroup.get("clearTime").patchValue(this.datePipe.transform(t.clearTs,"yyyy-MM-dd HH:mm:ss")),this.alarmFormGroup.get("type").patchValue(t.type),this.alarmFormGroup.get("alarmSeverity").patchValue(this.translate.instant(l.h.get(t.severity))),this.alarmFormGroup.get("alarmStatus").patchValue(this.translate.instant(l.i.get(t.status))),this.alarmFormGroup.get("alarmDetails").patchValue(t.details)},e.prototype.ngOnInit=function(){},e.prototype.close=function(){this.dialogRef.close(this.alarmUpdated)},e.prototype.acknowledge=function(){var t=this;this.alarmService.ackAlarm(this.data.alarmId).subscribe((function(){t.alarmUpdated=!0,t.loadAlarm()}))},e.prototype.clear=function(){var t=this;this.alarmService.clearAlarm(this.data.alarmId).subscribe((function(){t.alarmUpdated=!0,t.loadAlarm()}))},e.\u0275fac=function(t){return new(t||e)(a["\u0275\u0275directiveInject"](p.Store),a["\u0275\u0275directiveInject"](u.Router),a["\u0275\u0275directiveInject"](m.DatePipe),a["\u0275\u0275directiveInject"](f.TranslateService),a["\u0275\u0275directiveInject"](r.MAT_DIALOG_DATA),a["\u0275\u0275directiveInject"](c.a),a["\u0275\u0275directiveInject"](r.MatDialogRef),a["\u0275\u0275directiveInject"](h.FormBuilder))},e.\u0275cmp=a["\u0275\u0275defineComponent"]({type:e,selectors:[["tb-alarm-details-dialog"]],features:[a["\u0275\u0275InheritDefinitionFeature"]],decls:50,vars:30,consts:[[2,"min-width","600px",3,"formGroup"],["color","primary"],["fxFlex",""],["mat-icon-button","","type","button",3,"click"],[1,"material-icons"],["color","warn","mode","indeterminate",4,"ngIf"],["style","height: 4px;",4,"ngIf"],["mat-dialog-content",""],[3,"disabled"],["fxLayout","row","fxLayoutGap","6px"],[1,"mat-block"],["translate",""],["matInput","","formControlName","createdTime","readonly",""],["fxFlex","",1,"mat-block"],["matInput","","formControlName","originatorName","readonly",""],["fxLayout","row","fxLayoutGap","6px",4,"ngIf"],["matInput","","formControlName","type","readonly",""],["matInput","","formControlName","alarmSeverity","readonly","",3,"ngStyle"],["matInput","","formControlName","alarmStatus","readonly",""],["formControlName","alarmDetails","readonly","",3,"label",4,"ngIf"],["mat-dialog-actions","","fxLayout","row"],["mat-button","","color","primary","type","button","cdkFocusInitial","",3,"disabled","click"],["fxLayout","row","fxLayoutGap","8px",4,"ngIf"],["color","warn","mode","indeterminate"],[2,"height","4px"],["fxFlex","","class","mat-block",4,"ngIf"],["fxFlex","",4,"ngIf"],["matInput","","formControlName","startTime","readonly",""],["matInput","","formControlName","endTime","readonly",""],["matInput","","formControlName","ackTime","readonly",""],["matInput","","formControlName","clearTime","readonly",""],["formControlName","alarmDetails","readonly","",3,"label"],["fxLayout","row","fxLayoutGap","8px"],["mat-raised-button","","color","primary","type","button",3,"disabled","click",4,"ngIf"],["mat-raised-button","","color","primary","type","button",3,"disabled","click"]],template:function(t,e){if(1&t&&(a["\u0275\u0275elementStart"](0,"form",0),a["\u0275\u0275elementStart"](1,"mat-toolbar",1),a["\u0275\u0275elementStart"](2,"h2"),a["\u0275\u0275text"](3),a["\u0275\u0275pipe"](4,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](5,"span",2),a["\u0275\u0275elementStart"](6,"button",3),a["\u0275\u0275listener"]("click",(function(){return e.close()})),a["\u0275\u0275elementStart"](7,"mat-icon",4),a["\u0275\u0275text"](8,"close"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275template"](9,I,1,0,"mat-progress-bar",5),a["\u0275\u0275pipe"](10,"async"),a["\u0275\u0275template"](11,O,1,0,"div",6),a["\u0275\u0275pipe"](12,"async"),a["\u0275\u0275elementStart"](13,"div",7),a["\u0275\u0275elementStart"](14,"fieldset",8),a["\u0275\u0275pipe"](15,"async"),a["\u0275\u0275elementStart"](16,"div",9),a["\u0275\u0275elementStart"](17,"mat-form-field",10),a["\u0275\u0275elementStart"](18,"mat-label",11),a["\u0275\u0275text"](19,"alarm.created-time"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](20,"input",12),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](21,"mat-form-field",13),a["\u0275\u0275elementStart"](22,"mat-label",11),a["\u0275\u0275text"](23,"alarm.originator"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](24,"input",14),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275template"](25,P,4,3,"div",15),a["\u0275\u0275template"](26,A,4,3,"div",15),a["\u0275\u0275elementStart"](27,"div",9),a["\u0275\u0275elementStart"](28,"mat-form-field",13),a["\u0275\u0275elementStart"](29,"mat-label",11),a["\u0275\u0275text"](30,"alarm.type"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](31,"input",16),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](32,"mat-form-field",13),a["\u0275\u0275elementStart"](33,"mat-label",11),a["\u0275\u0275text"](34,"alarm.severity"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](35,"input",17),a["\u0275\u0275pipe"](36,"async"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](37,"mat-form-field",13),a["\u0275\u0275elementStart"](38,"mat-label",11),a["\u0275\u0275text"](39,"alarm.status"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](40,"input",18),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275template"](41,_,2,3,"tb-json-object-edit",19),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](42,"div",20),a["\u0275\u0275elementStart"](43,"button",21),a["\u0275\u0275listener"]("click",(function(){return e.close()})),a["\u0275\u0275pipe"](44,"async"),a["\u0275\u0275text"](45),a["\u0275\u0275pipe"](46,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](47,"span",2),a["\u0275\u0275template"](48,R,3,2,"div",22),a["\u0275\u0275pipe"](49,"async"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()),2&t){var n;a["\u0275\u0275property"]("formGroup",e.alarmFormGroup),a["\u0275\u0275advance"](3),a["\u0275\u0275textInterpolate"](a["\u0275\u0275pipeBind1"](4,12,"alarm.alarm-details")),a["\u0275\u0275advance"](6),a["\u0275\u0275property"]("ngIf",a["\u0275\u0275pipeBind1"](10,14,e.isLoading$)),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("ngIf",!a["\u0275\u0275pipeBind1"](12,16,e.isLoading$)),a["\u0275\u0275advance"](3),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](15,18,e.isLoading$)),a["\u0275\u0275advance"](11),a["\u0275\u0275property"]("ngIf",e.alarmFormGroup.get("startTime").value||e.alarmFormGroup.get("endTime").value),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",e.alarmFormGroup.get("ackTime").value||e.alarmFormGroup.get("clearTime").value),a["\u0275\u0275advance"](9),a["\u0275\u0275property"]("ngStyle",a["\u0275\u0275pureFunction1"](28,N,e.alarmSeverityColorsMap.get(null==(n=a["\u0275\u0275pipeBind1"](36,20,e.alarm$))?null:n.severity))),a["\u0275\u0275advance"](6),a["\u0275\u0275property"]("ngIf",e.displayDetails),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](44,22,e.isLoading$)),a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](46,24,"action.close")," "),a["\u0275\u0275advance"](3),a["\u0275\u0275property"]("ngIf",a["\u0275\u0275pipeBind1"](49,26,e.alarm$))}},directives:[h["\u0275angular_packages_forms_forms_y"],h.NgControlStatusGroup,h.FormGroupDirective,g.MatToolbar,y.b,b.MatButton,v.MatIcon,m.NgIf,r.MatDialogContent,y.f,y.g,x.MatFormField,x.MatLabel,f.TranslateDirective,C.MatInput,h.DefaultValueAccessor,h.NgControlStatus,h.FormControlName,m.NgStyle,S.e,r.MatDialogActions,w.MatProgressBar,E.a],pipes:[f.TranslatePipe,m.AsyncPipe],encapsulation:2}),e}(s.a);!function(){a["\u0275setClassMetadata"](G,[{type:a.Component,args:[{selector:"tb-alarm-details-dialog",templateUrl:"./alarm-details-dialog.component.html",styleUrls:[]}]}],(function(){return[{type:p.Store},{type:u.Router},{type:m.DatePipe},{type:f.TranslateService},{type:void 0,decorators:[{type:a.Inject,args:[r.MAT_DIALOG_DATA]}]},{type:c.a},{type:r.MatDialogRef},{type:h.FormBuilder}]}),null)}()},"10n/":function(t,e,n){"use strict";n.d(e,"a",(function(){return O}));var i=n("fXoL"),a=n("3Pt+"),r=n("JIJk"),o=n("//Q6"),s=n("/uUt"),l=n("kmnG"),c=n("sYmb"),d=n("d3UM"),p=n("ofXK"),u=n("FKr1"),m=n("qFsG"),f=n("bTqV"),h=n("NFeN"),g=n("0Miz");function y(t,e){if(1&t&&(i["\u0275\u0275elementStart"](0,"mat-option",7),i["\u0275\u0275text"](1),i["\u0275\u0275elementEnd"]()),2&t){var n=e.$implicit,a=i["\u0275\u0275nextContext"]();i["\u0275\u0275property"]("value",n),i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",a.credentialTypeNamesMap.get(a.deviceCredentialsType[n])," ")}}function b(t,e){1&t&&(i["\u0275\u0275elementStart"](0,"mat-error"),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&t&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,1,"device.access-token-required")," "))}function v(t,e){1&t&&(i["\u0275\u0275elementStart"](0,"mat-error"),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&t&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,1,"device.access-token-invalid")," "))}function x(t,e){if(1&t&&(i["\u0275\u0275elementStart"](0,"mat-form-field",1),i["\u0275\u0275elementStart"](1,"mat-label",2),i["\u0275\u0275text"](2,"device.access-token"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](3,"input",8),i["\u0275\u0275template"](4,b,3,3,"mat-error",9),i["\u0275\u0275template"](5,v,3,3,"mat-error",9),i["\u0275\u0275elementEnd"]()),2&t){var n=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](4),i["\u0275\u0275property"]("ngIf",n.deviceCredentialsFormGroup.get("credentialsId").hasError("required")),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",n.deviceCredentialsFormGroup.get("credentialsId").hasError("pattern"))}}function C(t,e){1&t&&(i["\u0275\u0275elementStart"](0,"mat-error"),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&t&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,1,"device.rsa-key-required")," "))}function S(t,e){if(1&t&&(i["\u0275\u0275elementStart"](0,"mat-form-field",1),i["\u0275\u0275elementStart"](1,"mat-label",2),i["\u0275\u0275text"](2,"device.rsa-key"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](3,"textarea",10),i["\u0275\u0275template"](4,C,3,3,"mat-error",9),i["\u0275\u0275elementEnd"]()),2&t){var n=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](4),i["\u0275\u0275property"]("ngIf",n.deviceCredentialsFormGroup.get("credentialsValue").hasError("required"))}}function w(t,e){1&t&&(i["\u0275\u0275elementStart"](0,"mat-error"),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&t&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,1,"device.client-id-pattern")," "))}function E(t,e){1&t&&(i["\u0275\u0275elementStart"](0,"mat-error"),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&t&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,1,"device.user-name-required")," "))}function I(t,e){if(1&t){var n=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"section",11),i["\u0275\u0275elementStart"](1,"mat-form-field",1),i["\u0275\u0275elementStart"](2,"mat-label",2),i["\u0275\u0275text"](3,"device.client-id"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](4,"input",12),i["\u0275\u0275template"](5,w,3,3,"mat-error",9),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](6,"mat-form-field",1),i["\u0275\u0275elementStart"](7,"mat-label",2),i["\u0275\u0275text"](8,"device.user-name"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](9,"input",13),i["\u0275\u0275template"](10,E,3,3,"mat-error",9),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](11,"mat-form-field",1),i["\u0275\u0275elementStart"](12,"mat-label",2),i["\u0275\u0275text"](13,"device.password"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](14,"input",14),i["\u0275\u0275listener"]("ngModelChange",(function(){return i["\u0275\u0275restoreView"](n),i["\u0275\u0275nextContext"]().passwordChanged()})),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](15,"button",15),i["\u0275\u0275listener"]("click",(function(){i["\u0275\u0275restoreView"](n);var t=i["\u0275\u0275nextContext"]();return t.hidePassword=!t.hidePassword})),i["\u0275\u0275elementStart"](16,"mat-icon"),i["\u0275\u0275text"](17),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](18,"tb-error",16),i["\u0275\u0275pipe"](19,"translate"),i["\u0275\u0275elementEnd"]()}if(2&t){var a=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](5),i["\u0275\u0275property"]("ngIf",a.deviceCredentialsFormGroup.get("credentialsBasic.clientId").hasError("pattern")),i["\u0275\u0275advance"](4),i["\u0275\u0275property"]("required",!!a.deviceCredentialsFormGroup.get("credentialsBasic.password").value),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",a.deviceCredentialsFormGroup.get("credentialsBasic.userName").hasError("required")),i["\u0275\u0275advance"](4),i["\u0275\u0275property"]("type",a.hidePassword?"password":"text"),i["\u0275\u0275advance"](1),i["\u0275\u0275attribute"]("aria-pressed",a.hidePassword),i["\u0275\u0275advance"](2),i["\u0275\u0275textInterpolate"](a.hidePassword?"visibility_off":"visibility"),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("error",a.deviceCredentialsFormGroup.get("credentialsBasic").hasError("atLeastOne")?i["\u0275\u0275pipeBind1"](19,7,"device.client-id-or-user-name-necessary"):"")}}var O=function(){function t(t){var e=this;this.fb=t,this.subscriptions=[],this.deviceCredentials=null,this.submitted=!1,this.deviceCredentialsType=r.g,this.credentialsTypes=Object.keys(r.g),this.credentialTypeNamesMap=r.r,this.hidePassword=!0,this.propagateChange=function(t){},this.deviceCredentialsFormGroup=this.fb.group({credentialsType:[r.g.ACCESS_TOKEN],credentialsId:[null],credentialsValue:[null],credentialsBasic:this.fb.group({clientId:[null,[a.Validators.pattern(/^[A-Za-z0-9]+$/)]],userName:[null],password:[null]},{validators:this.atLeastOne(a.Validators.required,["clientId","userName"])})}),this.deviceCredentialsFormGroup.get("credentialsBasic").disable(),this.subscriptions.push(this.deviceCredentialsFormGroup.valueChanges.pipe(Object(s.a)()).subscribe((function(){e.updateView()}))),this.subscriptions.push(this.deviceCredentialsFormGroup.get("credentialsType").valueChanges.subscribe((function(){e.credentialsTypeChanged()})))}return t.prototype.ngOnInit=function(){this.disabled&&this.deviceCredentialsFormGroup.disable({emitEvent:!1})},t.prototype.ngOnDestroy=function(){this.subscriptions.forEach((function(t){return t.unsubscribe()}))},t.prototype.writeValue=function(t){if(Object(o.o)(t)){this.deviceCredentials=t;var e={clientId:null,userName:null,password:null},n=null;t.credentialsType===r.g.MQTT_BASIC?e=JSON.parse(t.credentialsValue):n=t.credentialsValue,this.deviceCredentialsFormGroup.patchValue({credentialsType:t.credentialsType,credentialsId:t.credentialsId,credentialsValue:n,credentialsBasic:e},{emitEvent:!1}),this.updateValidators()}},t.prototype.updateView=function(){var t=this.deviceCredentialsFormGroup.value;t.credentialsType===r.g.MQTT_BASIC&&(t.credentialsValue=JSON.stringify(t.credentialsBasic)),delete t.credentialsBasic,this.propagateChange(t)},t.prototype.registerOnChange=function(t){this.propagateChange=t},t.prototype.registerOnTouched=function(t){},t.prototype.setDisabledState=function(t){this.disabled=t,this.disabled?this.deviceCredentialsFormGroup.disable({emitEvent:!1}):(this.deviceCredentialsFormGroup.enable({emitEvent:!1}),this.updateValidators())},t.prototype.validate=function(t){return this.deviceCredentialsFormGroup.valid?null:{deviceCredentials:{valid:!1}}},t.prototype.credentialsTypeChanged=function(){this.deviceCredentialsFormGroup.patchValue({credentialsId:null,credentialsValue:null,credentialsBasic:{clientId:"",userName:"",password:""}}),this.updateValidators()},t.prototype.updateValidators=function(){switch(this.hidePassword=!0,this.deviceCredentialsFormGroup.get("credentialsType").value){case r.g.ACCESS_TOKEN:this.deviceCredentialsFormGroup.get("credentialsId").setValidators([a.Validators.required,a.Validators.pattern(/^.{1,20}$/)]),this.deviceCredentialsFormGroup.get("credentialsId").updateValueAndValidity({emitEvent:!1}),this.deviceCredentialsFormGroup.get("credentialsValue").setValidators([]),this.deviceCredentialsFormGroup.get("credentialsValue").updateValueAndValidity({emitEvent:!1}),this.deviceCredentialsFormGroup.get("credentialsBasic").disable({emitEvent:!1});break;case r.g.X509_CERTIFICATE:this.deviceCredentialsFormGroup.get("credentialsValue").setValidators([a.Validators.required]),this.deviceCredentialsFormGroup.get("credentialsValue").updateValueAndValidity({emitEvent:!1}),this.deviceCredentialsFormGroup.get("credentialsId").setValidators([]),this.deviceCredentialsFormGroup.get("credentialsId").updateValueAndValidity({emitEvent:!1}),this.deviceCredentialsFormGroup.get("credentialsBasic").disable({emitEvent:!1});break;case r.g.MQTT_BASIC:this.deviceCredentialsFormGroup.get("credentialsBasic").enable({emitEvent:!1}),this.deviceCredentialsFormGroup.get("credentialsBasic").updateValueAndValidity({emitEvent:!1}),this.deviceCredentialsFormGroup.get("credentialsId").setValidators([]),this.deviceCredentialsFormGroup.get("credentialsId").updateValueAndValidity({emitEvent:!1}),this.deviceCredentialsFormGroup.get("credentialsValue").setValidators([]),this.deviceCredentialsFormGroup.get("credentialsValue").updateValueAndValidity({emitEvent:!1})}},t.prototype.atLeastOne=function(t,e){return void 0===e&&(e=null),function(n){return e||(e=Object.keys(n.controls)),(null==n?void 0:n.controls)&&e.some((function(e){return!t(n.controls[e])}))?null:{atLeastOne:!0}}},t.prototype.passwordChanged=function(){""!==this.deviceCredentialsFormGroup.get("credentialsBasic.password").value?this.deviceCredentialsFormGroup.get("credentialsBasic.userName").setValidators([a.Validators.required]):this.deviceCredentialsFormGroup.get("credentialsBasic.userName").setValidators([]),this.deviceCredentialsFormGroup.get("credentialsBasic.userName").updateValueAndValidity({emitEvent:!1,onlySelf:!0})},t.\u0275fac=function(e){return new(e||t)(i["\u0275\u0275directiveInject"](a.FormBuilder))},t.\u0275cmp=i["\u0275\u0275defineComponent"]({type:t,selectors:[["tb-device-credentials"]],inputs:{disabled:"disabled"},features:[i["\u0275\u0275ProvidersFeature"]([{provide:a.NG_VALUE_ACCESSOR,useExisting:Object(i.forwardRef)((function(){return t})),multi:!0},{provide:a.NG_VALIDATORS,useExisting:Object(i.forwardRef)((function(){return t})),multi:!0}])],decls:9,vars:5,consts:[[3,"formGroup"],[1,"mat-block"],["translate",""],["formControlName","credentialsType"],[3,"value",4,"ngFor","ngForOf"],["class","mat-block",4,"ngIf"],["formGroupName","credentialsBasic",4,"ngIf"],[3,"value"],["matInput","","formControlName","credentialsId","required",""],[4,"ngIf"],["matInput","","formControlName","credentialsValue","cols","15","rows","5","required",""],["formGroupName","credentialsBasic"],["matInput","","formControlName","clientId"],["matInput","","formControlName","userName",3,"required"],["matInput","","formControlName","password","autocomplete","new-password",3,"type","ngModelChange"],["mat-icon-button","","matSuffix","","type","button",3,"click"],[2,"margin-top","-12px","display","block",3,"error"]],template:function(t,e){1&t&&(i["\u0275\u0275elementStart"](0,"section",0),i["\u0275\u0275elementStart"](1,"mat-form-field",1),i["\u0275\u0275elementStart"](2,"mat-label",2),i["\u0275\u0275text"](3,"device.credentials-type"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](4,"mat-select",3),i["\u0275\u0275template"](5,y,2,2,"mat-option",4),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](6,x,6,2,"mat-form-field",5),i["\u0275\u0275template"](7,S,5,1,"mat-form-field",5),i["\u0275\u0275template"](8,I,20,9,"section",6),i["\u0275\u0275elementEnd"]()),2&t&&(i["\u0275\u0275property"]("formGroup",e.deviceCredentialsFormGroup),i["\u0275\u0275advance"](5),i["\u0275\u0275property"]("ngForOf",e.credentialsTypes),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",e.deviceCredentialsFormGroup.get("credentialsType").value===e.deviceCredentialsType.ACCESS_TOKEN),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",e.deviceCredentialsFormGroup.get("credentialsType").value===e.deviceCredentialsType.X509_CERTIFICATE),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",e.deviceCredentialsFormGroup.get("credentialsType").value===e.deviceCredentialsType.MQTT_BASIC))},directives:[a.NgControlStatusGroup,a.FormGroupDirective,l.MatFormField,l.MatLabel,c.TranslateDirective,d.MatSelect,a.NgControlStatus,a.FormControlName,p.NgForOf,p.NgIf,u.MatOption,m.MatInput,a.DefaultValueAccessor,a.RequiredValidator,l.MatError,a.FormGroupName,f.MatButton,l.MatSuffix,h.MatIcon,g.a],pipes:[c.TranslatePipe],encapsulation:2}),t}();!function(){i["\u0275setClassMetadata"](O,[{type:i.Component,args:[{selector:"tb-device-credentials",templateUrl:"./device-credentials.component.html",providers:[{provide:a.NG_VALUE_ACCESSOR,useExisting:Object(i.forwardRef)((function(){return O})),multi:!0},{provide:a.NG_VALIDATORS,useExisting:Object(i.forwardRef)((function(){return O})),multi:!0}],styleUrls:[]}]}],(function(){return[{type:a.FormBuilder}]}),{disabled:[{type:i.Input}]})}()},"1iWl":function(t,e,n){"use strict";n.d(e,"a",(function(){return x})),n.d(e,"b",(function(){return C}));var i=n("fXoL"),a=n("UZbx"),r=n("FtGj"),o=n("rDax"),s=n("3Pt+"),l=n("XiUz"),c=n("kmnG"),d=n("sYmb"),p=n("d3UM"),u=n("ofXK"),m=n("A5z7"),f=n("bTqV"),h=n("FKr1"),g=n("NFeN");function y(t,e){if(1&t&&(i["\u0275\u0275elementStart"](0,"mat-option",13),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&t){var n=e.$implicit,a=i["\u0275\u0275nextContext"]();i["\u0275\u0275property"]("value",n),i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,2,a.alarmSearchStatusTranslationMap.get(n))," ")}}function b(t,e){if(1&t&&(i["\u0275\u0275elementStart"](0,"mat-option",13),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&t){var n=e.$implicit,a=i["\u0275\u0275nextContext"]();i["\u0275\u0275property"]("value",n),i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,2,a.alarmSeverityTranslationMap.get(a.alarmSeverityEnum[n]))," ")}}function v(t,e){if(1&t){var n=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"mat-chip",14),i["\u0275\u0275listener"]("removed",(function(){i["\u0275\u0275restoreView"](n);var t=e.$implicit;return i["\u0275\u0275nextContext"]().removeAlarmType(t)})),i["\u0275\u0275text"](1),i["\u0275\u0275elementStart"](2,"mat-icon",15),i["\u0275\u0275text"](3,"cancel"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()}if(2&t){var a=e.$implicit;i["\u0275\u0275property"]("selectable",!0)("removable",!0),i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",a," ")}}var x=new i.InjectionToken("AlarmFilterPanelData"),C=function(){function t(t,e,n){this.data=t,this.overlayRef=e,this.fb=n,this.separatorKeysCodes=[r.ENTER,r.COMMA,r.SEMICOLON],this.alarmSearchStatuses=[a.b.ACTIVE,a.b.CLEARED,a.b.ACK,a.b.UNACK],this.alarmSearchStatusTranslationMap=a.f,this.alarmSeverities=Object.keys(a.c),this.alarmSeverityEnum=a.c,this.alarmSeverityTranslationMap=a.h,this.alarmFilterFormGroup=this.fb.group({alarmStatusList:[this.data.statusList],alarmSeverityList:[this.data.severityList],alarmTypeList:[this.data.typeList]})}return t.prototype.alarmTypeList=function(){return this.alarmFilterFormGroup.get("alarmTypeList").value},t.prototype.removeAlarmType=function(t){var e=this.alarmFilterFormGroup.get("alarmTypeList").value,n=e.indexOf(t);n>=0&&(e.splice(n,1),this.alarmFilterFormGroup.get("alarmTypeList").setValue(e),this.alarmFilterFormGroup.get("alarmTypeList").markAsDirty())},t.prototype.addAlarmType=function(t){var e=t.input,n=t.value,i=this.alarmFilterFormGroup.get("alarmTypeList").value;(n||"").trim()&&(i.push(n.trim()),this.alarmFilterFormGroup.get("alarmTypeList").setValue(i),this.alarmFilterFormGroup.get("alarmTypeList").markAsDirty()),e&&(e.value="")},t.prototype.update=function(){this.result={statusList:this.alarmFilterFormGroup.get("alarmStatusList").value,severityList:this.alarmFilterFormGroup.get("alarmSeverityList").value,typeList:this.alarmFilterFormGroup.get("alarmTypeList").value},this.overlayRef.dispose()},t.prototype.cancel=function(){this.overlayRef.dispose()},t.\u0275fac=function(e){return new(e||t)(i["\u0275\u0275directiveInject"](x),i["\u0275\u0275directiveInject"](o.OverlayRef),i["\u0275\u0275directiveInject"](s.FormBuilder))},t.\u0275cmp=i["\u0275\u0275defineComponent"]({type:t,selectors:[["tb-alarm-filter-panel"]],decls:28,vars:23,consts:[["fxLayout","column",1,"mat-content","mat-padding",3,"formGroup","ngSubmit"],["fxFlex","","floatLabel","always",1,"mat-block"],["translate",""],["formControlName","alarmStatusList","multiple","",3,"placeholder"],[3,"value",4,"ngFor","ngForOf"],["formControlName","alarmSeverityList","multiple","",3,"placeholder"],["formControlName","alarmTypeList"],["alarmTypeChipList",""],[3,"selectable","removable","removed",4,"ngFor","ngForOf"],[3,"placeholder","matChipInputFor","matChipInputSeparatorKeyCodes","matChipInputAddOnBlur","matChipInputTokenEnd"],["fxLayout","row","fxLayoutAlign","end center",1,"tb-panel-actions"],["type","button","mat-button","",3,"click"],["type","submit","mat-raised-button","","color","primary",3,"disabled"],[3,"value"],[3,"selectable","removable","removed"],["matChipRemove",""]],template:function(t,e){if(1&t&&(i["\u0275\u0275elementStart"](0,"form",0),i["\u0275\u0275listener"]("ngSubmit",(function(){return e.update()})),i["\u0275\u0275elementStart"](1,"mat-form-field",1),i["\u0275\u0275elementStart"](2,"mat-label",2),i["\u0275\u0275text"](3,"alarm.alarm-status-list"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](4,"mat-select",3),i["\u0275\u0275pipe"](5,"translate"),i["\u0275\u0275template"](6,y,3,4,"mat-option",4),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](7,"mat-form-field",1),i["\u0275\u0275elementStart"](8,"mat-label",2),i["\u0275\u0275text"](9,"alarm.alarm-severity-list"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](10,"mat-select",5),i["\u0275\u0275pipe"](11,"translate"),i["\u0275\u0275template"](12,b,3,4,"mat-option",4),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](13,"mat-form-field",1),i["\u0275\u0275elementStart"](14,"mat-label",2),i["\u0275\u0275text"](15,"alarm.alarm-type-list"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](16,"mat-chip-list",6,7),i["\u0275\u0275template"](18,v,4,3,"mat-chip",8),i["\u0275\u0275elementStart"](19,"input",9),i["\u0275\u0275listener"]("matChipInputTokenEnd",(function(t){return e.addAlarmType(t)})),i["\u0275\u0275pipe"](20,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](21,"div",10),i["\u0275\u0275elementStart"](22,"button",11),i["\u0275\u0275listener"]("click",(function(){return e.cancel()})),i["\u0275\u0275text"](23),i["\u0275\u0275pipe"](24,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](25,"button",12),i["\u0275\u0275text"](26),i["\u0275\u0275pipe"](27,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()),2&t){var n=i["\u0275\u0275reference"](17);i["\u0275\u0275property"]("formGroup",e.alarmFilterFormGroup),i["\u0275\u0275advance"](4),i["\u0275\u0275propertyInterpolate"]("placeholder",null!=e.alarmFilterFormGroup.get("alarmStatusList").value&&e.alarmFilterFormGroup.get("alarmStatusList").value.length?"":i["\u0275\u0275pipeBind1"](5,13,"alarm.any-status")),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngForOf",e.alarmSearchStatuses),i["\u0275\u0275advance"](4),i["\u0275\u0275propertyInterpolate"]("placeholder",null!=e.alarmFilterFormGroup.get("alarmSeverityList").value&&e.alarmFilterFormGroup.get("alarmSeverityList").value.length?"":i["\u0275\u0275pipeBind1"](11,15,"alarm.any-severity")),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngForOf",e.alarmSeverities),i["\u0275\u0275advance"](6),i["\u0275\u0275property"]("ngForOf",e.alarmTypeList()),i["\u0275\u0275advance"](1),i["\u0275\u0275propertyInterpolate"]("placeholder",null!=e.alarmFilterFormGroup.get("alarmTypeList").value&&e.alarmFilterFormGroup.get("alarmTypeList").value.length?"":i["\u0275\u0275pipeBind1"](20,17,"alarm.any-type")),i["\u0275\u0275property"]("matChipInputFor",n)("matChipInputSeparatorKeyCodes",e.separatorKeysCodes)("matChipInputAddOnBlur",!0),i["\u0275\u0275advance"](4),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](24,19,"action.cancel")," "),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("disabled",e.alarmFilterFormGroup.invalid||!e.alarmFilterFormGroup.dirty),i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](27,21,"action.update")," ")}},directives:[s["\u0275angular_packages_forms_forms_y"],s.NgControlStatusGroup,l.f,s.FormGroupDirective,c.MatFormField,l.b,c.MatLabel,d.TranslateDirective,p.MatSelect,s.NgControlStatus,s.FormControlName,u.NgForOf,m.MatChipList,m.MatChipInput,l.e,f.MatButton,h.MatOption,m.MatChip,g.MatIcon,m.MatChipRemove],pipes:[d.TranslatePipe],styles:["[_nghost-%COMP%]{width:100%;height:100%;min-width:300px;overflow:hidden;background:#fff;border-radius:4px;box-shadow:0 7px 8px -4px rgba(0,0,0,.2),0 13px 19px 2px rgba(0,0,0,.14),0 5px 24px 4px rgba(0,0,0,.12)}[_nghost-%COMP%]   .mat-content[_ngcontent-%COMP%]{overflow:hidden;background-color:#fff}[_nghost-%COMP%]   .mat-padding[_ngcontent-%COMP%]{padding:16px}"]}),t}();!function(){i["\u0275setClassMetadata"](C,[{type:i.Component,args:[{selector:"tb-alarm-filter-panel",templateUrl:"./alarm-filter-panel.component.html",styleUrls:["./alarm-filter-panel.component.scss"]}]}],(function(){return[{type:void 0,decorators:[{type:i.Inject,args:[x]}]},{type:o.OverlayRef},{type:s.FormBuilder}]}),null)}()},"1uah":function(t,e,n){"use strict";n.d(e,"b",(function(){return u})),n.d(e,"a",(function(){return m}));var i=n("Ji7U"),a=n("LK+K"),r=n("1OyB"),o=n("vuIU"),s=n("yCtX"),l=n("DH7j"),c=n("7o/Q"),d=n("Lhse"),p=n("zx2A");function u(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var i=e[e.length-1];return"function"==typeof i&&e.pop(),Object(s.a)(e,void 0).lift(new m(i))}var m=function(){function t(e){Object(r.a)(this,t),this.resultSelector=e}return Object(o.a)(t,[{key:"call",value:function(t,e){return e.subscribe(new f(t,this.resultSelector))}}]),t}(),f=function(t){Object(i.a)(n,t);var e=Object(a.a)(n);function n(t,i){var a;arguments.length>2&&void 0!==arguments[2]?arguments[2]:Object.create(null);return Object(r.a)(this,n),(a=e.call(this,t)).resultSelector=i,a.iterators=[],a.active=0,a.resultSelector="function"==typeof i?i:void 0,a}return Object(o.a)(n,[{key:"_next",value:function(t){var e=this.iterators;Object(l.a)(t)?e.push(new g(t)):"function"==typeof t[d.a]?e.push(new h(t[d.a]())):e.push(new y(this.destination,this,t))}},{key:"_complete",value:function(){var t=this.iterators,e=t.length;if(this.unsubscribe(),0===e)return this.destination.complete(),void 0;this.active=e;for(var n=0;n<e;n++){var i=t[n];if(i.stillUnsubscribed)this.destination.add(i.subscribe());else this.active--}}},{key:"notifyInactive",value:function(){this.active--,0===this.active&&this.destination.complete()}},{key:"checkIterators",value:function(){for(var t=this.iterators,e=t.length,n=this.destination,i=0;i<e;i++){var a=t[i];if("function"==typeof a.hasValue&&!a.hasValue())return}for(var r=!1,o=[],s=0;s<e;s++){var l=t[s],c=l.next();if(l.hasCompleted()&&(r=!0),c.done)return n.complete(),void 0;o.push(c.value)}this.resultSelector?this._tryresultSelector(o):n.next(o),r&&n.complete()}},{key:"_tryresultSelector",value:function(t){var e;try{e=this.resultSelector.apply(this,t)}catch(n){return this.destination.error(n),void 0}this.destination.next(e)}}]),n}(c.a),h=function(){function t(e){Object(r.a)(this,t),this.iterator=e,this.nextResult=e.next()}return Object(o.a)(t,[{key:"hasValue",value:function(){return!0}},{key:"next",value:function(){var t=this.nextResult;return this.nextResult=this.iterator.next(),t}},{key:"hasCompleted",value:function(){var t=this.nextResult;return Boolean(t&&t.done)}}]),t}(),g=function(){function t(e){Object(r.a)(this,t),this.array=e,this.index=0,this.length=0,this.length=e.length}return Object(o.a)(t,[{key:d.a,value:function(){return this}},{key:"next",value:function(t){var e=this.index++,n=this.array;return e<this.length?{value:n[e],done:!1}:{value:null,done:!0}}},{key:"hasValue",value:function(){return this.array.length>this.index}},{key:"hasCompleted",value:function(){return this.array.length===this.index}}]),t}(),y=function(t){Object(i.a)(n,t);var e=Object(a.a)(n);function n(t,i,a){var o;return Object(r.a)(this,n),(o=e.call(this,t)).parent=i,o.observable=a,o.stillUnsubscribed=!0,o.buffer=[],o.isComplete=!1,o}return Object(o.a)(n,[{key:d.a,value:function(){return this}},{key:"next",value:function(){var t=this.buffer;return 0===t.length&&this.isComplete?{value:null,done:!0}:{value:t.shift(),done:!1}}},{key:"hasValue",value:function(){return this.buffer.length>0}},{key:"hasCompleted",value:function(){return 0===this.buffer.length&&this.isComplete}},{key:"notifyComplete",value:function(){this.buffer.length>0?(this.isComplete=!0,this.parent.notifyInactive()):this.destination.complete()}},{key:"notifyNext",value:function(t){this.buffer.push(t),this.parent.checkIterators()}},{key:"subscribe",value:function(){return Object(p.c)(this.observable,new p.a(this))}}]),n}(p.b)},"2/1y":function(t,e,n){"use strict";(function(t){n.d(e,"a",(function(){return O}));var i=n("mrSG"),a=n("fXoL"),r=n("RxGS"),o=(n("0G7Z"),n("//Q6")),s=n("Zss7"),l=n("OiFK"),c=n("0lYY"),d=n("U3y+"),p=n("HR/i"),u=n("l7P3"),m=n("XiUz"),f=n("znSr"),h=n("ofXK"),g=["led"],y=["ledContainer"],b=["textMeasure"],v=["ledTitleContainer"],x=["ledTitle"],C=["ledErrorContainer"],S=["ledError"],w=function(t){return{paddingTop:t}},E=function(t){return{background:t}},I=s,O=function(e){function n(t,n){var i=e.call(this,n)||this;return i.utils=t,i.store=n,i.showTitle=!1,i.value=!1,i.error="",i.title="",i.destroyed=!1,i.subscriptionOptions={callbacks:{onDataUpdated:function(t,e){return i.ctx.ngZone.run((function(){i.onDataUpdated(t,e)}))},onDataUpdateError:function(t,e){return i.ctx.ngZone.run((function(){i.onDataUpdateError(t,e)}))},dataLoading:function(){}}},i}return Object(i.d)(n,e),n.prototype.ngOnInit=function(){var e=this;this.led=t(this.ledRef.nativeElement),this.ledContainer=t(this.ledContainerRef.nativeElement),this.textMeasure=t(this.textMeasureRef.nativeElement),this.ledTitleContainer=t(this.ledTitleContainerRef.nativeElement),this.ledTitle=t(this.ledTitleRef.nativeElement),this.ledErrorContainer=t(this.ledErrorContainerRef.nativeElement),this.ledError=t(this.ledErrorRef.nativeElement),this.ledResize$=new p.a((function(){e.resize()})),this.ledResize$.observe(this.ledContainerRef.nativeElement),this.init()},n.prototype.ngOnDestroy=function(){this.destroyed=!0,this.checkStatusTimeoutHandle&&clearTimeout(this.checkStatusTimeoutHandle),this.subscription&&this.ctx.subscriptionApi.removeSubscription(this.subscription.id),this.ledResize$&&this.ledResize$.disconnect()},n.prototype.init=function(){var t=this.ctx.settings;this.title=Object(o.n)(t.title)?t.title:"",this.showTitle=!(!this.title||!this.title.length);var e=Object(o.n)(t.ledColor)?t.ledColor:"green";this.valueAttribute=Object(o.n)(t.valueAttribute)?t.valueAttribute:"value",this.ledColor=I(e).brighten(30).toHexString(),this.ledMiddleColor=I(e).toHexString(),this.disabledColor=I(e).darken(40).toHexString(),this.disabledMiddleColor=I(e).darken(60).toHexString();var n=!!Object(o.n)(t.initialValue)&&t.initialValue;this.setValue(n,!0);var i=this.ctx.defaultSubscription.rpcEnabled;if(this.isSimulated=this.utils.widgetEditMode,this.requestTimeout=500,t.requestTimeout&&(this.requestTimeout=t.requestTimeout),this.retrieveValueMethod="attribute",t.retrieveValueMethod&&t.retrieveValueMethod.length&&(this.retrieveValueMethod=t.retrieveValueMethod),this.parseValueFunction=function(t){return!!t},t.parseValueFunction&&t.parseValueFunction.length)try{this.parseValueFunction=new Function("data",t.parseValueFunction)}catch(a){this.parseValueFunction=function(t){return!!t}}this.performCheckStatus=!1!==t.performCheckStatus,this.performCheckStatus&&(this.checkStatusMethod="checkStatus",t.checkStatusMethod&&t.checkStatusMethod.length&&(this.checkStatusMethod=t.checkStatusMethod)),i?this.isSimulated||(this.performCheckStatus?this.rpcCheckStatus():this.subscribeForValue()):this.onError("Target device is not set!")},n.prototype.resize=function(){var t=this.ledContainer.width(),e=this.ledContainer.height(),n=Math.min(t,e);this.led.css({width:n,height:n}),this.showTitle&&this.setFontSize(this.ledTitle,this.title,2*this.ledTitleContainer.height()/3,this.ledTitleContainer.width()),this.setFontSize(this.ledError,this.error,this.ledErrorContainer.height(),this.ledErrorContainer.width())},n.prototype.setFontSize=function(t,e,n,i){for(var a=this.measureTextWidth(e,n);a>i;)n--,a=this.measureTextWidth(e,n);t.css({fontSize:n+"px",lineHeight:n+"px"})},n.prototype.measureTextWidth=function(t,e){return this.textMeasure.css({fontSize:e+"px",lineHeight:e+"px"}),this.textMeasure.text(t),this.textMeasure.width()},n.prototype.onError=function(t){this.error=t,this.setFontSize(this.ledError,this.error,this.ledErrorContainer.height(),this.ledErrorContainer.width()),this.ctx.detectChanges()},n.prototype.setValue=function(t,e){(this.value!==t||e)&&(this.value=t,this.updateColor())},n.prototype.updateColor=function(){var t=this.value?this.ledColor:this.disabledColor,e="#000 0 -1px 6px 1px, inset "+(this.value?this.ledMiddleColor:this.disabledMiddleColor)+" 0 -1px 8px, "+t+" 0 3px 11px";this.led.css({backgroundColor:t}),this.led.css({boxShadow:e}),this.value?this.led.removeClass("disabled"):this.led.addClass("disabled")},n.prototype.rpcCheckStatus=function(){var t=this;this.destroyed||(this.error="",this.ctx.controlApi.sendTwoWayCommand(this.checkStatusMethod,null,this.requestTimeout).subscribe((function(e){if(!!e)t.checkStatusTimeoutHandle&&(clearTimeout(t.checkStatusTimeoutHandle),t.checkStatusTimeoutHandle=null),t.subscribeForValue();else{t.onError("Unknown device status!"),t.checkStatusTimeoutHandle&&clearTimeout(t.checkStatusTimeoutHandle),t.checkStatusTimeoutHandle=setTimeout(t.rpcCheckStatus.bind(t),1e4)}}),(function(){var e=t.ctx.defaultSubscription.rpcErrorText;t.onError(e),t.checkStatusTimeoutHandle&&clearTimeout(t.checkStatusTimeoutHandle),t.checkStatusTimeoutHandle=setTimeout(t.rpcCheckStatus.bind(t),1e4)})))},n.prototype.subscribeForValue=function(){var t=this,e=[{type:c.a.entity,entityType:d.b.DEVICE,entityId:this.ctx.defaultSubscription.targetDeviceId}];"attribute"===this.retrieveValueMethod?e[0].attributes=[{name:this.valueAttribute}]:e[0].timeseries=[{name:this.valueAttribute}],this.ctx.subscriptionApi.createSubscriptionFromInfo(c.k.latest,e,this.subscriptionOptions,!1,!0).subscribe((function(e){t.subscription=e}))},n.prototype.onDataUpdated=function(t,e){var n=!1,i=t.data;if(i.length){var a=i[0];if(a&&a.data&&a.data[0]){var r=a.data[0][1];if(Object(o.n)(r)){var s=null;try{s=this.parseValueFunction(JSON.parse(r))}catch(l){}n=!!s}}}this.setValue(n),e&&this.ctx.detectChanges()},n.prototype.onDataUpdateError=function(t,e){var n=this.utils.parseException(e),i=n.name;n.message&&(i+=": "+n.message),this.onError(i)},n.\u0275fac=function(t){return new(t||n)(a["\u0275\u0275directiveInject"](l.a),a["\u0275\u0275directiveInject"](u.Store))},n.\u0275cmp=a["\u0275\u0275defineComponent"]({type:n,selectors:[["tb-led-indicator"]],viewQuery:function(t,e){var n;(1&t&&(a["\u0275\u0275staticViewQuery"](g,!0),a["\u0275\u0275staticViewQuery"](y,!0),a["\u0275\u0275staticViewQuery"](b,!0),a["\u0275\u0275staticViewQuery"](v,!0),a["\u0275\u0275staticViewQuery"](x,!0),a["\u0275\u0275staticViewQuery"](C,!0),a["\u0275\u0275staticViewQuery"](S,!0)),2&t)&&(a["\u0275\u0275queryRefresh"](n=a["\u0275\u0275loadQuery"]())&&(e.ledRef=n.first),a["\u0275\u0275queryRefresh"](n=a["\u0275\u0275loadQuery"]())&&(e.ledContainerRef=n.first),a["\u0275\u0275queryRefresh"](n=a["\u0275\u0275loadQuery"]())&&(e.textMeasureRef=n.first),a["\u0275\u0275queryRefresh"](n=a["\u0275\u0275loadQuery"]())&&(e.ledTitleContainerRef=n.first),a["\u0275\u0275queryRefresh"](n=a["\u0275\u0275loadQuery"]())&&(e.ledTitleRef=n.first),a["\u0275\u0275queryRefresh"](n=a["\u0275\u0275loadQuery"]())&&(e.ledErrorContainerRef=n.first),a["\u0275\u0275queryRefresh"](n=a["\u0275\u0275loadQuery"]())&&(e.ledErrorRef=n.first))},inputs:{ctx:"ctx"},features:[a["\u0275\u0275InheritDefinitionFeature"]],decls:17,vars:10,consts:[["fxLayout","column",1,"tb-led-indicator"],["fxFlex","20","fxLayout","row","fxLayoutAlign","center center",1,"title-container",3,"fxShow"],["ledTitleContainer",""],[1,"led-title"],["ledTitle",""],["id","led-container","fxLayout","column","fxLayoutAlign","center center",3,"fxFlex","ngStyle"],["ledContainer",""],[1,"led"],["led",""],["fxLayout","row","fxLayoutAlign","center center",1,"error-container",3,"ngStyle"],["ledErrorContainer",""],[1,"led-error"],["ledError",""],["id","text-measure"],["textMeasure",""]],template:function(t,e){1&t&&(a["\u0275\u0275elementStart"](0,"div",0),a["\u0275\u0275elementStart"](1,"div",1,2),a["\u0275\u0275elementStart"](3,"span",3,4),a["\u0275\u0275text"](5),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](6,"div",5,6),a["\u0275\u0275element"](8,"div",7,8),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](10,"div",9,10),a["\u0275\u0275elementStart"](12,"span",11,12),a["\u0275\u0275text"](14),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](15,"div",13,14),a["\u0275\u0275elementEnd"]()),2&t&&(a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("fxShow",e.showTitle),a["\u0275\u0275advance"](4),a["\u0275\u0275textInterpolate"](e.title),a["\u0275\u0275advance"](1),a["\u0275\u0275propertyInterpolate"]("fxFlex",e.showTitle?80:100),a["\u0275\u0275property"]("ngStyle",a["\u0275\u0275pureFunction1"](6,w,e.showTitle?"5px":"10px")),a["\u0275\u0275advance"](4),a["\u0275\u0275property"]("ngStyle",a["\u0275\u0275pureFunction1"](8,E,null!=e.error&&e.error.length?"rgba(255,255,255,0.25)":"none")),a["\u0275\u0275advance"](4),a["\u0275\u0275textInterpolate"](e.error))},directives:[m.f,m.b,m.e,f.d,h.NgStyle,f.e],styles:["[_nghost-%COMP%]   .tb-led-indicator[_ngcontent-%COMP%]{width:100%;height:100%}[_nghost-%COMP%]   .tb-led-indicator[_ngcontent-%COMP%]   .title-container[_ngcontent-%COMP%]   .led-title[_ngcontent-%COMP%]{font-weight:500;color:#757575;white-space:nowrap}[_nghost-%COMP%]   .tb-led-indicator[_ngcontent-%COMP%]   .error-container[_ngcontent-%COMP%]{position:absolute;top:1%;right:0;left:0;z-index:4;height:14px}[_nghost-%COMP%]   .tb-led-indicator[_ngcontent-%COMP%]   .error-container[_ngcontent-%COMP%]   .led-error[_ngcontent-%COMP%]{color:#ff3315;white-space:nowrap}[_nghost-%COMP%]   .tb-led-indicator[_ngcontent-%COMP%]   #text-measure[_ngcontent-%COMP%]{position:absolute;width:auto;height:auto;white-space:nowrap;visibility:hidden}[_nghost-%COMP%]   .tb-led-indicator[_ngcontent-%COMP%]   #led-container[_ngcontent-%COMP%]{padding:10px}[_nghost-%COMP%]   .tb-led-indicator[_ngcontent-%COMP%]   #led-container[_ngcontent-%COMP%]   .led[_ngcontent-%COMP%]{position:relative;cursor:pointer;background-image:radial-gradient(circle closest-corner at 50% 50%,transparent,rgba(0,0,0,.25));border-radius:50%;transition:background-color .5s,box-shadow .5s}[_nghost-%COMP%]   .tb-led-indicator[_ngcontent-%COMP%]   #led-container[_ngcontent-%COMP%]   .led.disabled[_ngcontent-%COMP%]{background-image:radial-gradient(circle closest-corner at 50% 50%,hsla(0,0%,100%,.5),rgba(0,0,0,.1))}"]}),n}(r.a);!function(){a["\u0275setClassMetadata"](O,[{type:a.Component,args:[{selector:"tb-led-indicator",templateUrl:"./led-indicator.component.html",styleUrls:["./led-indicator.component.scss"]}]}],(function(){return[{type:l.a},{type:u.Store}]}),{ledRef:[{type:a.ViewChild,args:["led",{static:!0}]}],ledContainerRef:[{type:a.ViewChild,args:["ledContainer",{static:!0}]}],textMeasureRef:[{type:a.ViewChild,args:["textMeasure",{static:!0}]}],ledTitleContainerRef:[{type:a.ViewChild,args:["ledTitleContainer",{static:!0}]}],ledTitleRef:[{type:a.ViewChild,args:["ledTitle",{static:!0}]}],ledErrorContainerRef:[{type:a.ViewChild,args:["ledErrorContainer",{static:!0}]}],ledErrorRef:[{type:a.ViewChild,args:["ledError",{static:!0}]}],ctx:[{type:a.Input}]})}()}).call(this,n("xexB"))},"2lgB":function(t,e,n){"use strict";n.d(e,"a",(function(){return w}));var i=n("fXoL"),a=n("3Tyt"),r=n("l7P3"),o=n("Vurf"),s=n("C/rb"),l=n("wtyh"),c=n("1OyB"),d=n("vuIU"),p=n("ReuC"),u=n("foSv"),m=n("Ji7U"),f=n("LK+K"),h=n("XNiG"),g=n("7o/Q"),y=n("HDdC"),b=n("quSY"),v=n("jtHE"),x={url:"",deserializer:function(t){return JSON.parse(t.data)},serializer:function(t){return JSON.stringify(t)}},C=function(t){Object(m.a)(n,t);var e=Object(f.a)(n);function n(t,i){var a;if(Object(c.a)(this,n),a=e.call(this),t instanceof y.a)a.destination=i,a.source=t;else{var r=a._config=Object.assign({},x);if(a._output=new h.b,"string"==typeof t)r.url=t;else for(var o in t)t.hasOwnProperty(o)&&(r[o]=t[o]);if(!r.WebSocketCtor&&WebSocket)r.WebSocketCtor=WebSocket;else if(!r.WebSocketCtor)throw new Error("no WebSocket constructor can be found");a.destination=new v.a}return a}return Object(d.a)(n,[{key:"lift",value:function(t){var e=new n(this._config,this.destination);return e.operator=t,e.source=this,e}},{key:"_resetState",value:function(){this._socket=null,this.source||(this.destination=new v.a),this._output=new h.b}},{key:"multiplex",value:function(t,e,n){var i=this;return new y.a((function(a){try{i.next(t())}catch(o){a.error(o)}var r=i.subscribe((function(t){try{n(t)&&a.next(t)}catch(o){a.error(o)}}),(function(t){return a.error(t)}),(function(){return a.complete()}));return function(){try{i.next(e())}catch(o){a.error(o)}r.unsubscribe()}}))}},{key:"_connectSocket",value:function(){var t=this,e=this._config,n=e.WebSocketCtor,i=e.protocol,a=e.url,r=e.binaryType,o=this._output,s=null;try{s=i?new n(a,i):new n(a),this._socket=s,r&&(this._socket.binaryType=r)}catch(c){return o.error(c),void 0}var l=new b.a((function(){t._socket=null,s&&1===s.readyState&&s.close()}));s.onopen=function(e){if(!t._socket)return s.close(),t._resetState(),void 0;var n=t._config.openObserver;n&&n.next(e);var i=t.destination;t.destination=g.a.create((function(n){if(1===s.readyState)try{var i=t._config.serializer;s.send(i(n))}catch(e){t.destination.error(e)}}),(function(e){var n=t._config.closingObserver;n&&n.next(void 0),e&&e.code?s.close(e.code,e.reason):o.error(new TypeError("WebSocketSubject.error must be called with an object with an error code, and an optional reason: { code: number, reason: string }")),t._resetState()}),(function(){var e=t._config.closingObserver;e&&e.next(void 0),s.close(),t._resetState()})),i&&i instanceof v.a&&l.add(i.subscribe(t.destination))},s.onerror=function(e){t._resetState(),o.error(e)},s.onclose=function(e){t._resetState();var n=t._config.closeObserver;n&&n.next(e),e.wasClean?o.complete():o.error(e)},s.onmessage=function(e){try{var n=t._config.deserializer;o.next(n(e))}catch(i){o.error(i)}}}},{key:"_subscribe",value:function(t){var e=this,n=this.source;return n?n.subscribe(t):(this._socket||this._connectSocket(),this._output.subscribe(t),t.add((function(){var t=e._socket;0===e._output.observers.length&&(t&&1===t.readyState&&t.close(),e._resetState())})),t)}},{key:"unsubscribe",value:function(){var t=this._socket;t&&1===t.readyState&&t.close(),this._resetState(),Object(p.a)(Object(u.a)(n.prototype),"unsubscribe",this).call(this)}}]),n}(h.a);var S=n("xKAQ"),w=function(){function t(t,e,n,i){var o=this;this.store=t,this.authService=e,this.ngZone=n,this.window=i,this.isActive=!1,this.isOpening=!1,this.isOpened=!1,this.isReconnect=!1,this.lastCmdId=0,this.subscribersCount=0,this.subscribersMap=new Map,this.reconnectSubscribers=new Set,this.cmdsWrapper=new a.v,this.store.pipe(Object(r.select)(s.e)).subscribe((function(){o.reset(!0)}));var l=this.window.location.port;"https:"===this.window.location.protocol?(l||(l="443"),this.telemetryUri="wss:"):(l||(l="80"),this.telemetryUri="ws:"),this.telemetryUri+="//"+this.window.location.hostname+":"+l+"/api/ws/plugins/telemetry"}return t.prototype.subscribe=function(t){var e=this;this.isActive=!0,t.subscriptionCommands.forEach((function(n){var i=e.nextCmdId();e.subscribersMap.set(i,t),n.cmdId=i,n instanceof a.s?n.getType()===a.u.TIMESERIES?e.cmdsWrapper.tsSubCmds.push(n):e.cmdsWrapper.attrSubCmds.push(n):n instanceof a.q?e.cmdsWrapper.historyCmds.push(n):n instanceof a.n?e.cmdsWrapper.entityDataCmds.push(n):n instanceof a.a?e.cmdsWrapper.alarmDataCmds.push(n):n instanceof a.k&&e.cmdsWrapper.entityCountCmds.push(n)})),this.subscribersCount++,this.publishCommands()},t.prototype.update=function(t){var e=this;this.isReconnect||(t.subscriptionCommands.forEach((function(t){t.cmdId&&t instanceof a.n&&e.cmdsWrapper.entityDataCmds.push(t)})),this.publishCommands())},t.prototype.unsubscribe=function(t){var e=this;this.isActive&&(t.subscriptionCommands.forEach((function(t){if(t instanceof a.s)t.unsubscribe=!0,t.getType()===a.u.TIMESERIES?e.cmdsWrapper.tsSubCmds.push(t):e.cmdsWrapper.attrSubCmds.push(t);else if(t instanceof a.n){var n=new a.o;n.cmdId=t.cmdId,e.cmdsWrapper.entityDataUnsubscribeCmds.push(n)}else if(t instanceof a.a){var i=new a.b;i.cmdId=t.cmdId,e.cmdsWrapper.alarmDataUnsubscribeCmds.push(i)}else if(t instanceof a.k){var r=new a.l;r.cmdId=t.cmdId,e.cmdsWrapper.entityCountUnsubscribeCmds.push(r)}var o=t.cmdId;o&&e.subscribersMap.delete(o)})),this.reconnectSubscribers.delete(t),this.subscribersCount--,this.publishCommands())},t.prototype.nextCmdId=function(){return this.lastCmdId++,this.lastCmdId},t.prototype.publishCommands=function(){for(;this.isOpened&&this.cmdsWrapper.hasCommands();)this.dataStream.next(this.cmdsWrapper.preparePublishCommands(10)),this.checkToClose();this.tryOpenSocket()},t.prototype.checkToClose=function(){var t=this;0===this.subscribersCount&&this.isOpened&&(this.socketCloseTimer||(this.socketCloseTimer=setTimeout((function(){return t.closeSocket()}),9e4)))},t.prototype.reset=function(t){this.socketCloseTimer&&(clearTimeout(this.socketCloseTimer),this.socketCloseTimer=null),this.lastCmdId=0,this.subscribersMap.clear(),this.subscribersCount=0,this.cmdsWrapper.clear(),t&&this.closeSocket()},t.prototype.closeSocket=function(){this.isActive=!1,this.isOpened&&this.dataStream.unsubscribe()},t.prototype.tryOpenSocket=function(){var t=this;this.isActive&&(this.isOpened||this.isOpening||(this.isOpening=!0,o.a.isJwtTokenValid()?this.openSocket(o.a.getJwtToken()):this.authService.refreshJwtToken().subscribe((function(){t.openSocket(o.a.getJwtToken())}),(function(){t.isOpening=!1,t.authService.logout(!0)}))),this.socketCloseTimer&&(clearTimeout(this.socketCloseTimer),this.socketCloseTimer=null))},t.prototype.openSocket=function(t){var e=this,n=this.telemetryUri+"?token="+t;this.dataStream=new C({url:n,openObserver:{next:function(){e.onOpen()}},closeObserver:{next:function(t){e.onClose(t)}}}),this.dataStream.subscribe((function(t){e.ngZone.runOutsideAngular((function(){e.onMessage(t)}))}),(function(t){e.onError(t)}))},t.prototype.onOpen=function(){var t=this;this.isOpening=!1,this.isOpened=!0,this.reconnectTimer&&(clearTimeout(this.reconnectTimer),this.reconnectTimer=null),this.isReconnect?(this.isReconnect=!1,this.reconnectSubscribers.forEach((function(e){e.onReconnected(),t.subscribe(e)})),this.reconnectSubscribers.clear()):this.publishCommands()},t.prototype.onMessage=function(t){if(t.errorCode)this.showWsError(t.errorCode,t.errorMsg);else{var e=void 0;Object(a.B)(t)?(e=this.subscribersMap.get(t.cmdId))&&e.onEntityData(new a.p(t)):Object(a.y)(t)?(e=this.subscribersMap.get(t.cmdId))&&e.onAlarmData(new a.c(t)):Object(a.A)(t)?(e=this.subscribersMap.get(t.cmdId))&&e.onEntityCount(new a.m(t)):t.subscriptionId&&(e=this.subscribersMap.get(t.subscriptionId))&&e.onData(new a.t(t))}this.checkToClose()},t.prototype.onError=function(t){t&&console.warn("WebSocket error event",t),this.isOpening=!1},t.prototype.onClose=function(t){var e=this;t&&t.code>1001&&1006!==t.code&&this.showWsError(t.code,t.reason),this.isOpening=!1,this.isOpened=!1,this.isActive&&(this.isReconnect||(this.reconnectSubscribers.clear(),this.subscribersMap.forEach((function(t){e.reconnectSubscribers.add(t)})),this.reset(!1),this.isReconnect=!0),this.reconnectTimer&&clearTimeout(this.reconnectTimer),this.reconnectTimer=setTimeout((function(){return e.tryOpenSocket()}),2e3))},t.prototype.showWsError=function(t,e){var n=e;n||(n+="WebSocket Error: error code - "+t+"."),this.store.dispatch(new S.b({message:n,type:"error"}))},t.\u0275fac=function(e){return new(e||t)(i["\u0275\u0275inject"](r.Store),i["\u0275\u0275inject"](o.a),i["\u0275\u0275inject"](i.NgZone),i["\u0275\u0275inject"](l.b))},t.\u0275prov=i["\u0275\u0275defineInjectable"]({token:t,factory:t.\u0275fac,providedIn:"root"}),t}();!function(){i["\u0275setClassMetadata"](w,[{type:i.Injectable,args:[{providedIn:"root"}]}],(function(){return[{type:r.Store},{type:o.a},{type:i.NgZone},{type:Window,decorators:[{type:i.Inject,args:[l.b]}]}]}),null)}()},"3MWt":function(t,e,n){"use strict";n.d(e,"a",(function(){return _}));var i=n("mrSG"),a=n("fXoL"),r=n("FKr1"),o=n("0IaG"),s=n("3Pt+"),l=n("gmuX"),c=n("OiFK"),d=n("//Q6"),p=n("4j5O"),u=n("YnEf"),m=n("cp0P"),f=n("LRne"),h=n("6opy"),g=n("C6Vs"),y=n("5+tZ"),b=n("FBAY"),v=n("l7P3"),x=n("tyNb"),C=n("/t3+"),S=n("sYmb"),w=n("XiUz"),E=n("bTqV"),I=n("NFeN"),O=n("ofXK"),T=n("QibW"),M=n("XMqU"),F=n("kmnG"),P=n("qFsG"),D=n("bSwM"),k=n("bv9b");function j(t,e){1&t&&a["\u0275\u0275element"](0,"mat-progress-bar",20)}function A(t,e){1&t&&(a["\u0275\u0275elementStart"](0,"mat-error"),a["\u0275\u0275text"](1),a["\u0275\u0275pipe"](2,"translate"),a["\u0275\u0275elementEnd"]()),2&t&&(a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](2,1,"dashboard.title-required")," "))}var _=function(t){function e(e,n,i,a,r,o,l,c,d,p,u){var m=t.call(this,e,n,r)||this;return m.store=e,m.router=n,m.data=i,m.errorStateMatcher=a,m.dialogRef=r,m.fb=o,m.utils=l,m.dashboardUtils=c,m.dashboardService=d,m.itembuffer=p,m.dialog=u,m.submitted=!1,m.addWidgetFormGroup=m.fb.group({addToDashboardType:[0,[]],dashboardId:[null,[s.Validators.required]],newDashboardTitle:[{value:null,disabled:!0},[]],openDashboard:[!1,[]]}),m.addWidgetFormGroup.get("addToDashboardType").valueChanges.subscribe((function(t){0===t?(m.addWidgetFormGroup.get("dashboardId").setValidators([s.Validators.required]),m.addWidgetFormGroup.get("dashboardId").enable(),m.addWidgetFormGroup.get("newDashboardTitle").setValidators([]),m.addWidgetFormGroup.get("newDashboardTitle").disable(),m.addWidgetFormGroup.get("dashboardId").updateValueAndValidity(),m.addWidgetFormGroup.get("newDashboardTitle").updateValueAndValidity()):(m.addWidgetFormGroup.get("dashboardId").setValidators([]),m.addWidgetFormGroup.get("dashboardId").disable(),m.addWidgetFormGroup.get("newDashboardTitle").setValidators([s.Validators.required]),m.addWidgetFormGroup.get("newDashboardTitle").enable(),m.addWidgetFormGroup.get("dashboardId").updateValueAndValidity(),m.addWidgetFormGroup.get("newDashboardTitle").updateValueAndValidity())})),m}return Object(i.d)(e,t),e.prototype.ngOnInit=function(){},e.prototype.isErrorState=function(t,e){var n=this.errorStateMatcher.isErrorState(t,e),i=!!(t&&t.invalid&&this.submitted);return n||i},e.prototype.cancel=function(){this.dialogRef.close(null)},e.prototype.add=function(){var t=this;if(this.submitted=!0,0===this.addWidgetFormGroup.get("addToDashboardType").value){var e=this.addWidgetFormGroup.get("dashboardId").value;this.dashboardService.getDashboard(e).pipe(Object(y.b)((function(e){return e=t.dashboardUtils.validateAndUpdateDashboard(e),t.selectTargetState(e).pipe(Object(y.b)((function(n){return Object(m.a)([Object(f.a)(e),Object(f.a)(n),t.selectTargetLayout(e,n)])})))}))).subscribe((function(e){t.addWidgetToDashboard(e[0],e[1],e[2])}))}else{var n={title:this.addWidgetFormGroup.get("newDashboardTitle").value};this.addWidgetToDashboard(n,"default","main")}},e.prototype.selectTargetState=function(t){var e=t.configuration.states,n=Object.keys(e);return n.length>1?this.dialog.open(g.a,{disableClose:!0,panelClass:["tb-dialog","tb-fullscreen-dialog"],data:{states:e}}).afterClosed():Object(f.a)(n[0])},e.prototype.selectTargetLayout=function(t,e){var n=t.configuration.states[e].layouts,i=Object.keys(n);return i.length>1?this.dialog.open(h.a,{disableClose:!0,panelClass:["tb-dialog","tb-fullscreen-dialog"]}).afterClosed():Object(f.a)(i[0])},e.prototype.addWidgetToDashboard=function(t,e,n){var i=this,a={datasourceAliases:{},targetDeviceAliases:{}};a.datasourceAliases[0]={alias:this.data.entityName,filter:this.dashboardUtils.createSingleEntityFilter(this.data.entityId)};this.itembuffer.addWidgetToDashboard(t,e,n,this.data.widget,a,{datasourceFilters:{}},null,null,48,null,-1,-1).pipe(Object(y.b)((function(t){return i.dashboardService.saveDashboard(t)}))).subscribe((function(n){var a=i.addWidgetFormGroup.get("openDashboard").value;if(i.dialogRef.close(),a){var r=void 0;if(Object.keys(t.configuration.states).indexOf(e)>0){var o={id:e,params:{}},s=Object(d.D)([o]);r="/dashboards/"+n.id.id+"?state="+s}else r="/dashboards/"+n.id.id;i.router.parseUrl(r);i.router.navigateByUrl(r)}}))},e.\u0275fac=function(t){return new(t||e)(a["\u0275\u0275directiveInject"](v.Store),a["\u0275\u0275directiveInject"](x.Router),a["\u0275\u0275directiveInject"](o.MAT_DIALOG_DATA),a["\u0275\u0275directiveInject"](r.ErrorStateMatcher,4),a["\u0275\u0275directiveInject"](o.MatDialogRef),a["\u0275\u0275directiveInject"](s.FormBuilder),a["\u0275\u0275directiveInject"](c.a),a["\u0275\u0275directiveInject"](p.a),a["\u0275\u0275directiveInject"](u.a),a["\u0275\u0275directiveInject"](b.a),a["\u0275\u0275directiveInject"](o.MatDialog))},e.\u0275cmp=a["\u0275\u0275defineComponent"]({type:e,selectors:[["tb-add-widget-to-dashboard-dialog"]],features:[a["\u0275\u0275ProvidersFeature"]([{provide:r.ErrorStateMatcher,useExisting:e}]),a["\u0275\u0275InheritDefinitionFeature"]],decls:41,vars:28,consts:[[2,"min-width","400px",3,"formGroup","ngSubmit"],["color","primary"],["translate",""],["fxFlex",""],["mat-button","","mat-icon-button","","type","button",3,"click"],[1,"material-icons"],["color","warn","mode","indeterminate",4,"ngIf"],["mat-dialog-content","","fxLayout","column"],[3,"disabled"],["formControlName","addToDashboardType"],["color","primary",3,"value"],["fxLayout","column",2,"width","300px"],["formControlName","dashboardId",3,"required","selectFirstDashboard"],[1,"mat-block"],["matInput","","formControlName","newDashboardTitle",3,"required"],[4,"ngIf"],["mat-dialog-actions","","fxLayout","row"],["formControlName","openDashboard",2,"margin-bottom","0"],["mat-button","","color","primary","type","button","cdkFocusInitial","",3,"disabled","click"],["mat-raised-button","","color","primary","type","submit",3,"disabled"],["color","warn","mode","indeterminate"]],template:function(t,e){1&t&&(a["\u0275\u0275elementStart"](0,"form",0),a["\u0275\u0275listener"]("ngSubmit",(function(){return e.add()})),a["\u0275\u0275elementStart"](1,"mat-toolbar",1),a["\u0275\u0275elementStart"](2,"h2",2),a["\u0275\u0275text"](3,"attribute.add-widget-to-dashboard"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](4,"span",3),a["\u0275\u0275elementStart"](5,"button",4),a["\u0275\u0275listener"]("click",(function(){return e.cancel()})),a["\u0275\u0275elementStart"](6,"mat-icon",5),a["\u0275\u0275text"](7,"close"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275template"](8,j,1,0,"mat-progress-bar",6),a["\u0275\u0275pipe"](9,"async"),a["\u0275\u0275elementStart"](10,"div",7),a["\u0275\u0275elementStart"](11,"fieldset",8),a["\u0275\u0275pipe"](12,"async"),a["\u0275\u0275elementStart"](13,"mat-radio-group",9),a["\u0275\u0275elementStart"](14,"mat-radio-button",10),a["\u0275\u0275elementStart"](15,"section",11),a["\u0275\u0275elementStart"](16,"span",2),a["\u0275\u0275text"](17,"dashboard.select-existing"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](18,"tb-dashboard-autocomplete",12),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](19,"mat-radio-button",10),a["\u0275\u0275elementStart"](20,"section",11),a["\u0275\u0275elementStart"](21,"span",2),a["\u0275\u0275text"](22,"dashboard.create-new"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](23,"mat-form-field",13),a["\u0275\u0275elementStart"](24,"mat-label",2),a["\u0275\u0275text"](25,"dashboard.new-dashboard-title"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](26,"input",14),a["\u0275\u0275template"](27,A,3,3,"mat-error",15),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](28,"div",16),a["\u0275\u0275elementStart"](29,"mat-checkbox",17),a["\u0275\u0275text"](30),a["\u0275\u0275pipe"](31,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](32,"span",3),a["\u0275\u0275elementStart"](33,"button",18),a["\u0275\u0275listener"]("click",(function(){return e.cancel()})),a["\u0275\u0275pipe"](34,"async"),a["\u0275\u0275text"](35),a["\u0275\u0275pipe"](36,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](37,"button",19),a["\u0275\u0275pipe"](38,"async"),a["\u0275\u0275text"](39),a["\u0275\u0275pipe"](40,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()),2&t&&(a["\u0275\u0275property"]("formGroup",e.addWidgetFormGroup),a["\u0275\u0275advance"](8),a["\u0275\u0275property"]("ngIf",a["\u0275\u0275pipeBind1"](9,14,e.isLoading$)),a["\u0275\u0275advance"](3),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](12,16,e.isLoading$)),a["\u0275\u0275advance"](3),a["\u0275\u0275property"]("value",0),a["\u0275\u0275advance"](4),a["\u0275\u0275property"]("required",0===e.addWidgetFormGroup.get("addToDashboardType").value)("selectFirstDashboard",!1),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("value",1),a["\u0275\u0275advance"](7),a["\u0275\u0275property"]("required",1===e.addWidgetFormGroup.get("addToDashboardType").value),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",e.addWidgetFormGroup.get("newDashboardTitle").hasError("required")),a["\u0275\u0275advance"](3),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](31,18,"dashboard.open-dashboard")," "),a["\u0275\u0275advance"](3),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](34,20,e.isLoading$)),a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](36,22,"action.cancel")," "),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](38,24,e.isLoading$)||e.addWidgetFormGroup.invalid||!e.addWidgetFormGroup.dirty),a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](40,26,"action.add")," "))},directives:[s["\u0275angular_packages_forms_forms_y"],s.NgControlStatusGroup,s.FormGroupDirective,C.MatToolbar,S.TranslateDirective,w.b,E.MatButton,I.MatIcon,O.NgIf,o.MatDialogContent,w.f,T.MatRadioGroup,s.NgControlStatus,s.FormControlName,T.MatRadioButton,M.a,s.RequiredValidator,F.MatFormField,F.MatLabel,P.MatInput,s.DefaultValueAccessor,o.MatDialogActions,D.MatCheckbox,k.MatProgressBar,F.MatError],pipes:[O.AsyncPipe,S.TranslatePipe],styles:["[_nghost-%COMP%]     mat-radio-button{display:block;margin-bottom:16px}[_nghost-%COMP%]     mat-radio-button .mat-radio-label{width:100%;-ms-flex-align:start;align-items:start}[_nghost-%COMP%]     mat-radio-button .mat-radio-label .mat-radio-label-content{width:100%}"]}),e}(l.a);!function(){a["\u0275setClassMetadata"](_,[{type:a.Component,args:[{selector:"tb-add-widget-to-dashboard-dialog",templateUrl:"./add-widget-to-dashboard-dialog.component.html",providers:[{provide:r.ErrorStateMatcher,useExisting:_}],styleUrls:["./add-widget-to-dashboard-dialog.component.scss"]}]}],(function(){return[{type:v.Store},{type:x.Router},{type:void 0,decorators:[{type:a.Inject,args:[o.MAT_DIALOG_DATA]}]},{type:r.ErrorStateMatcher,decorators:[{type:a.SkipSelf}]},{type:o.MatDialogRef},{type:s.FormBuilder},{type:c.a},{type:p.a},{type:u.a},{type:b.a},{type:o.MatDialog}]}),null)}()},"3QxM":function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return a})),n.d(e,"i",(function(){return r})),n.d(e,"d",(function(){return o})),n.d(e,"e",(function(){return s})),n.d(e,"f",(function(){return l})),n.d(e,"g",(function(){return c})),n.d(e,"c",(function(){return d})),n.d(e,"j",(function(){return p})),n.d(e,"h",(function(){return u}));var i={schema:{title:"Map Configuration",type:"object",properties:{defaultZoomLevel:{title:"Default map zoom level (0 - 20)",type:"number"},useDefaultCenterPosition:{title:"Use default map center position",type:"boolean",default:!1},mapPageSize:{title:"Limit of entities to load",type:"number",default:16384},defaultCenterPosition:{title:"Default map center position (0,0)",type:"string",default:"0,0"},fitMapBounds:{title:"Fit map bounds to cover all markers",type:"boolean",default:!0},draggableMarker:{title:"Draggable Marker",type:"boolean",default:!1},disableScrollZooming:{title:"Disable scroll zooming",type:"boolean",default:!1},latKeyName:{title:"Latitude key name",type:"string",default:"latitude"},lngKeyName:{title:"Longitude key name",type:"string",default:"longitude"},xPosKeyName:{title:"X position key name",type:"string",default:"xPos"},yPosKeyName:{title:"Y position key name",type:"string",default:"yPos"},showLabel:{title:"Show label",type:"boolean",default:!0},label:{title:"Label (pattern examples: '${entityName}', '${entityName}: (Text ${keyName} units.)' )",type:"string",default:"${entityName}"},useLabelFunction:{title:"Use label function",type:"boolean",default:!1},labelFunction:{title:"Label function: f(data, dsData, dsIndex)",type:"string"},showTooltip:{title:"Show tooltip",type:"boolean",default:!0},showTooltipAction:{title:"Action for displaying the tooltip",type:"string",default:"click"},autocloseTooltip:{title:"Auto-close tooltips",type:"boolean",default:!0},tooltipPattern:{title:"Tooltip (for ex. 'Text ${keyName} units.' or <link-act name='my-action'>Link text</link-act>')",type:"string",default:"<b>${entityName}</b><br/><br/><b>Latitude:</b> ${latitude:7}<br/><b>Longitude:</b> ${longitude:7}"},useTooltipFunction:{title:"Use tooltip function",type:"boolean",default:!1},tooltipFunction:{title:"Tooltip function: f(data, dsData, dsIndex)",type:"string"},posFunction:{title:"Position conversion function: f(origXPos, origYPos), should return x,y coordinates as double from 0 to 1 each",type:"string",default:"return {x: origXPos, y: origYPos};"},markerOffsetX:{title:"Marker X offset relative to position",type:"number",default:.5},markerOffsetY:{title:"Marker Y offset relative to position",type:"number",default:1},color:{title:"Color",type:"string"},useColorFunction:{title:"Use color function",type:"boolean",default:!1},colorFunction:{title:"Color function: f(data, dsData, dsIndex)",type:"string"},markerImage:{title:"Custom marker image",type:"string"},markerImageSize:{title:"Custom marker image size (px)",type:"number",default:34},useMarkerImageFunction:{title:"Use marker image function",type:"boolean",default:!1},markerImageFunction:{title:"Marker image function: f(data, images, dsData, dsIndex)",type:"string"},markerImages:{title:"Marker images",type:"array",items:{title:"Marker image",type:"string"}}},required:[]},form:[{key:"defaultZoomLevel",condition:'model.provider !== "image-map"'},{key:"useDefaultCenterPosition",condition:'model.provider !== "image-map"'},{key:"defaultCenterPosition",condition:'model.provider !== "image-map"'},{key:"fitMapBounds",condition:'model.provider !== "image-map"'},"mapPageSize","draggableMarker",{key:"disableScrollZooming",condition:'model.provider !== "image-map"'},{key:"latKeyName",condition:'model.provider !== "image-map"'},{key:"lngKeyName",condition:'model.provider !== "image-map"'},{key:"xPosKeyName",condition:'model.provider === "image-map"'},{key:"yPosKeyName",condition:'model.provider === "image-map"'},"showLabel","label","useLabelFunction",{key:"labelFunction",type:"javascript"},"showTooltip",{key:"showTooltipAction",type:"rc-select",multiple:!1,items:[{value:"click",label:"Show tooltip on click (Default)"},{value:"hover",label:"Show tooltip on hover"}]},"autocloseTooltip",{key:"tooltipPattern",type:"textarea"},"useTooltipFunction",{key:"tooltipFunction",type:"javascript"},{key:"markerOffsetX",condition:'model.provider === "image-map"'},{key:"markerOffsetY",condition:'model.provider === "image-map"'},{key:"posFunction",type:"javascript",condition:'model.provider === "image-map"'},{key:"color",type:"color"},"useColorFunction",{key:"colorFunction",type:"javascript"},{key:"markerImage",type:"image"},"markerImageSize","useMarkerImageFunction",{key:"markerImageFunction",type:"javascript"},{key:"markerImages",items:[{key:"markerImages[]",type:"image"}]}]},a={schema:{title:"Map Polygon Configuration",type:"object",properties:{showPolygon:{title:"Show polygon",type:"boolean",default:!1},polygonKeyName:{title:"Polygon key name",type:"string",default:"coordinates"},editablePolygon:{title:"Enable polygon edit",type:"boolean",default:!1},polygonColor:{title:"Polygon color",type:"string"},polygonOpacity:{title:"Polygon opacity",type:"number",default:.5},polygonStrokeColor:{title:"Stroke color",type:"string"},polygonStrokeOpacity:{title:"Stroke opacity",type:"number",default:1},polygonStrokeWeight:{title:"Stroke weight",type:"number",default:1},showPolygonTooltip:{title:"Show polygon tooltip",type:"boolean",default:!1},polygonTooltipPattern:{title:"Tooltip (for ex. 'Text ${keyName} units.' or <link-act name='my-action'>Link text</link-act>')",type:"string",default:"<b>${entityName}</b><br/><br/><b>TimeStamp:</b> ${ts:7}"},usePolygonTooltipFunction:{title:"Use polygon tooltip function",type:"boolean",default:!1},polygonTooltipFunction:{title:"Polygon tooltip function: f(data, dsData, dsIndex)",type:"string"},usePolygonColorFunction:{title:"Use polygon color function",type:"boolean",default:!1},polygonColorFunction:{title:"Polygon Color function: f(data, dsData, dsIndex)",type:"string"}},required:[]},form:["showPolygon","polygonKeyName","editablePolygon",{key:"polygonColor",type:"color"},"polygonOpacity",{key:"polygonStrokeColor",type:"color"},"polygonStrokeOpacity","polygonStrokeWeight","showPolygonTooltip",{key:"polygonTooltipPattern",type:"textarea"},"usePolygonTooltipFunction",{key:"polygonTooltipFunction",type:"javascript"},"usePolygonColorFunction",{key:"polygonColorFunction",type:"javascript"}]},r={schema:{title:"Route Map Configuration",type:"object",properties:{strokeWeight:{title:"Stroke weight",type:"number",default:2},strokeOpacity:{title:"Stroke opacity",type:"number",default:1}},required:[]},form:["strokeWeight","strokeOpacity"]},o={schema:{title:"Markers Clustering Configuration",type:"object",properties:{useClusterMarkers:{title:"Use map markers clustering",type:"boolean",default:!1}},required:[]},form:[{key:"useClusterMarkers",condition:'model.provider !== "image-map"'}]},s={schema:{title:"Markers Clustering Configuration Leaflet",type:"object",properties:{zoomOnClick:{title:"Zoom when clicking on a cluster",type:"boolean",default:!0},maxZoom:{title:"The maximum zoom level when a marker can be part of a cluster (0 - 18)",type:"number"},showCoverageOnHover:{title:"Show the bounds of markers when mouse over a cluster",type:"boolean",default:!0},animate:{title:"Show animation on markers when zooming",type:"boolean",default:!0},maxClusterRadius:{title:"Maximum radius that a cluster will cover in pixels",type:"number",default:80},chunkedLoading:{title:"Use chunks for adding markers so that the page does not freeze",type:"boolean",default:!1},removeOutsideVisibleBounds:{title:"Use lazy load for adding markers",type:"boolean",default:!0}},required:[]},form:["zoomOnClick","maxZoom","showCoverageOnHover","animate","maxClusterRadius","chunkedLoading","removeOutsideVisibleBounds"]},l={schema:{title:"Trip Animation Path Configuration",type:"object",properties:{color:{title:"Path color",type:"string"},strokeWeight:{title:"Stroke weight",type:"number",default:2},strokeOpacity:{title:"Stroke opacity",type:"number",default:1},useColorFunction:{title:"Use path color function",type:"boolean",default:!1},colorFunction:{title:"Path color function: f(data, dsData, dsIndex)",type:"string"},usePolylineDecorator:{title:"Use path decorator",type:"boolean",default:!1},decoratorSymbol:{title:"Decorator symbol",type:"string",default:"arrowHead"},decoratorSymbolSize:{title:"Decorator symbol size (px)",type:"number",default:10},useDecoratorCustomColor:{title:"Use path decorator custom color",type:"boolean",default:!1},decoratorCustomColor:{title:"Decorator custom color",type:"string",default:"#000"},decoratorOffset:{title:"Decorator offset",type:"string",default:"20px"},endDecoratorOffset:{title:"End decorator offset",type:"string",default:"20px"},decoratorRepeat:{title:"Decorator repeat",type:"string",default:"20px"}},required:[]},form:[{key:"color",type:"color"},"useColorFunction",{key:"colorFunction",type:"javascript"},"strokeWeight","strokeOpacity","usePolylineDecorator",{key:"decoratorSymbol",type:"rc-select",multiple:!1,items:[{value:"arrowHead",label:"Arrow"},{value:"dash",label:"Dash"}]},"decoratorSymbolSize","useDecoratorCustomColor",{key:"decoratorCustomColor",type:"color"},{key:"decoratorOffset",type:"textarea"},{key:"endDecoratorOffset",type:"textarea"},{key:"decoratorRepeat",type:"textarea"}]},c={schema:{title:"Trip Animation Path Configuration",type:"object",properties:{showPoints:{title:"Show points",type:"boolean",default:!1},pointColor:{title:"Point color",type:"string"},useColorPointFunction:{title:"Use color point function",type:"boolean",default:!1},colorPointFunction:{title:"Color point function: f(data, dsData, dsIndex)",type:"string"},pointSize:{title:"Point size (px)",type:"number",default:10},usePointAsAnchor:{title:"Use point as anchor",type:"boolean",default:!1},pointAsAnchorFunction:{title:"Point as anchor function: f(data, dsData, dsIndex)",type:"string"},pointTooltipOnRightPanel:{title:"Independant point tooltip",type:"boolean",default:!0}},required:[]},form:["showPoints",{key:"pointColor",type:"color"},"useColorPointFunction",{key:"colorPointFunction",type:"javascript"},"pointSize","usePointAsAnchor",{key:"pointAsAnchorFunction",type:"javascript"},"pointTooltipOnRightPanel"]},d={schema:{title:"Map Provider Configuration",type:"object",properties:{provider:{title:"Map Provider",type:"string",default:"openstreet-map"}},required:[]},form:[{key:"provider",type:"rc-select",multiple:!1,items:[{value:"google-map",label:"Google maps"},{value:"openstreet-map",label:"Openstreet maps"},{value:"here",label:"HERE maps"},{value:"image-map",label:"Image map"},{value:"tencent-map",label:"Tencent maps"}]}]},p={schema:{title:"Openstreet Map Configuration",type:"object",properties:{normalizationStep:{title:"Normalization data step (ms)",type:"number",default:1e3},latKeyName:{title:"Latitude key name",type:"string",default:"latitude"},lngKeyName:{title:"Longitude key name",type:"string",default:"longitude"},showLabel:{title:"Show label",type:"boolean",default:!0},label:{title:"Label (pattern examples: '${entityName}', '${entityName}: (Text ${keyName} units.)' )",type:"string",default:"${entityName}"},useLabelFunction:{title:"Use label function",type:"boolean",default:!1},labelFunction:{title:"Label function: f(data, dsData, dsIndex)",type:"string"},showTooltip:{title:"Show tooltip",type:"boolean",default:!0},tooltipColor:{title:"Tooltip background color",type:"string",default:"#fff"},tooltipFontColor:{title:"Tooltip font color",type:"string",default:"#000"},tooltipOpacity:{title:"Tooltip opacity (0-1)",type:"number",default:1},tooltipPattern:{title:"Tooltip (for ex. 'Text ${keyName} units.' or <link-act name='my-action'>Link text</link-act>')",type:"string",default:"<b>${entityName}</b><br/><br/><b>Latitude:</b> ${latitude:7}<br/><b>Longitude:</b> ${longitude:7}"},useTooltipFunction:{title:"Use tooltip function",type:"boolean",default:!1},tooltipFunction:{title:"Tooltip function: f(data, dsData, dsIndex)",type:"string"},autocloseTooltip:{title:"Auto-close point popup",type:"boolean",default:!0},markerImage:{title:"Custom marker image",type:"string"},markerImageSize:{title:"Custom marker image size (px)",type:"number",default:34},rotationAngle:{title:"Set additional rotation angle for marker (deg)",type:"number",default:0},useMarkerImageFunction:{title:"Use marker image function",type:"boolean",default:!1},markerImageFunction:{title:"Marker image function: f(data, images, dsData, dsIndex)",type:"string"},markerImages:{title:"Marker images",type:"array",items:{title:"Marker image",type:"string"}}},required:[]},form:["normalizationStep","latKeyName","lngKeyName","showLabel","label","useLabelFunction",{key:"labelFunction",type:"javascript"},"showTooltip",{key:"tooltipColor",type:"color"},{key:"tooltipFontColor",type:"color"},"tooltipOpacity",{key:"tooltipPattern",type:"textarea"},"useTooltipFunction",{key:"tooltipFunction",type:"javascript"},"autocloseTooltip",{key:"markerImage",type:"image"},"markerImageSize","rotationAngle","useMarkerImageFunction",{key:"markerImageFunction",type:"javascript"},{key:"markerImages",items:[{key:"markerImages[]",type:"image"}]}]},u={"openstreet-map":{schema:{schema:{title:"Openstreet Map Configuration",type:"object",properties:{mapProvider:{title:"Map provider",type:"string",default:"OpenStreetMap.Mapnik"},useCustomProvider:{title:"Use custom provider",type:"boolean",default:!1},customProviderTileUrl:{title:"Custom provider tile URL",type:"string",default:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}},required:[]},form:[{key:"mapProvider",type:"rc-select",multiple:!1,items:[{value:"OpenStreetMap.Mapnik",label:"OpenStreetMap.Mapnik (Default)"},{value:"OpenStreetMap.HOT",label:"OpenStreetMap.HOT"},{value:"Esri.WorldStreetMap",label:"Esri.WorldStreetMap"},{value:"Esri.WorldTopoMap",label:"Esri.WorldTopoMap"},{value:"CartoDB.Positron",label:"CartoDB.Positron"},{value:"CartoDB.DarkMatter",label:"CartoDB.DarkMatter"}]},"useCustomProvider",{key:"customProviderTileUrl",condition:"model.useCustomProvider === true"}]},name:"openstreet-map"},"tencent-map":{schema:{schema:{title:"Tencent Map Configuration",type:"object",properties:{tmApiKey:{title:"Tencent Maps API Key",type:"string",default:"84d6d83e0e51e481e50454ccbe8986b"},tmDefaultMapType:{title:"Default map type",type:"string",default:"roadmap"}},required:[]},form:["tmApiKey",{key:"tmDefaultMapType",type:"rc-select",multiple:!1,items:[{value:"roadmap",label:"Roadmap"},{value:"satellite",label:"Satellite"},{value:"hybrid",label:"Hybrid"}]}]},name:"tencent-map"},"google-map":{schema:{schema:{title:"Google Map Configuration",type:"object",properties:{gmApiKey:{title:"Google Maps API Key",type:"string",default:"AIzaSyDoEx2kaGz3PxwbI9T7ccTSg5xjdw8Nw8Q"},gmDefaultMapType:{title:"Default map type",type:"string",default:"roadmap"}},required:[]},form:["gmApiKey",{key:"gmDefaultMapType",type:"rc-select",multiple:!1,items:[{value:"roadmap",label:"Roadmap"},{value:"satellite",label:"Satellite"},{value:"hybrid",label:"Hybrid"},{value:"terrain",label:"Terrain"}]}]},name:"google-map"},here:{schema:{schema:{title:"HERE Map Configuration",type:"object",properties:{mapProviderHere:{title:"Map layer",type:"string",default:"HERE.normalDay"},credentials:{type:"object",title:"Credentials",properties:{app_id:{title:"HERE app id",type:"string",default:"AhM6TzD9ThyK78CT3ptx"},app_code:{title:"HERE app code",type:"string",default:"p6NPiITB3Vv0GMUFnkLOOg"}},required:["app_id","app_code"]}},required:[]},form:[{key:"mapProviderHere",type:"rc-select",multiple:!1,items:[{value:"HERE.normalDay",label:"HERE.normalDay (Default)"},{value:"HERE.normalNight",label:"HERE.normalNight"},{value:"HERE.hybridDay",label:"HERE.hybridDay"},{value:"HERE.terrainDay",label:"HERE.terrainDay"}]},"credentials"]},name:"here"},"image-map":{schema:{schema:{title:"Image Map Configuration",type:"object",properties:{mapImageUrl:{title:"Image map background",type:"string",default:"data:image/svg+xml;base64,PHN2ZyBpZD0ic3ZnMiIgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMTAwIiB3aWR0aD0iMTAwIiB2ZXJzaW9uPSIxLjEiIHhtbG5zOmNjPSJodHRwOi8vY3JlYXRpdmVjb21tb25zLm9yZy9ucyMiIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIgdmlld0JveD0iMCAwIDEwMCAxMDAiPgogPGcgaWQ9ImxheWVyMSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMCAtOTUyLjM2KSI+CiAgPHJlY3QgaWQ9InJlY3Q0Njg0IiBzdHJva2UtbGluZWpvaW49InJvdW5kIiBoZWlnaHQ9Ijk5LjAxIiB3aWR0aD0iOTkuMDEiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiB5PSI5NTIuODYiIHg9Ii40OTUwNSIgc3Ryb2tlLXdpZHRoPSIuOTkwMTAiIGZpbGw9IiNlZWUiLz4KICA8dGV4dCBpZD0idGV4dDQ2ODYiIHN0eWxlPSJ3b3JkLXNwYWNpbmc6MHB4O2xldHRlci1zcGFjaW5nOjBweDt0ZXh0LWFuY2hvcjptaWRkbGU7dGV4dC1hbGlnbjpjZW50ZXIiIGZvbnQtd2VpZ2h0PSJib2xkIiB4bWw6c3BhY2U9InByZXNlcnZlIiBmb250LXNpemU9IjEwcHgiIGxpbmUtaGVpZ2h0PSIxMjUlIiB5PSI5NzAuNzI4MDkiIHg9IjQ5LjM5NjQ3NyIgZm9udC1mYW1pbHk9IlJvYm90byIgZmlsbD0iIzY2NjY2NiI+PHRzcGFuIGlkPSJ0c3BhbjQ2OTAiIHg9IjUwLjY0NjQ3NyIgeT0iOTcwLjcyODA5Ij5JbWFnZSBiYWNrZ3JvdW5kIDwvdHNwYW4+PHRzcGFuIGlkPSJ0c3BhbjQ2OTIiIHg9IjQ5LjM5NjQ3NyIgeT0iOTgzLjIyODA5Ij5pcyBub3QgY29uZmlndXJlZDwvdHNwYW4+PC90ZXh0PgogIDxyZWN0IGlkPSJyZWN0NDY5NCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIgaGVpZ2h0PSIxOS4zNiIgd2lkdGg9IjY5LjM2IiBzdHJva2U9IiMwMDAiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgeT0iOTkyLjY4IiB4PSIxNS4zMiIgc3Ryb2tlLXdpZHRoPSIuNjM5ODYiIGZpbGw9Im5vbmUiLz4KIDwvZz4KPC9zdmc+Cg=="},imageEntityAlias:{title:"Image URL source entity alias",type:"string",default:""},imageUrlAttribute:{title:"Image URL source entity attribute",type:"string",default:""}},required:[]},form:[{key:"mapImageUrl",type:"image"},"imageEntityAlias","imageUrlAttribute"]},name:"image-map"}}},"3bvz":function(t,e,n){"use strict";n.d(e,"a",(function(){return X}));var i=n("mrSG"),a=n("fXoL"),r=n("3Pt+"),o=n("RxGS"),s=n("S+vS"),l=n("mbhL"),c=n("4r/P"),d=n("M9IT"),p=n("Dh3D"),u=n("xgIS"),m=n("VRyK"),f=n("Kj3r"),h=n("/uUt"),g=n("vkgz"),y=n("Hxax"),b=n("OiFK"),v=n("P0tZ"),x=n("//Q6"),C=n("l7P3"),S=n("sYmb"),w=n("0IaG"),E=n("XiUz"),I=n("/t3+"),O=n("znSr"),T=n("bTqV"),M=n("Qu3c"),F=n("NFeN"),P=n("kmnG"),D=n("qFsG"),k=n("+0xr"),j=n("f0Cb"),A=n("ofXK"),_=["searchInput"];function L(t,e){1&t&&(a["\u0275\u0275elementStart"](0,"mat-header-cell",28),a["\u0275\u0275text"](1),a["\u0275\u0275pipe"](2,"translate"),a["\u0275\u0275elementEnd"]()),2&t&&(a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](2,1,"widget-config.action-source")," "))}function V(t,e){if(1&t&&(a["\u0275\u0275elementStart"](0,"mat-cell"),a["\u0275\u0275text"](1),a["\u0275\u0275elementEnd"]()),2&t){var n=e.$implicit;a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"](" ",n.actionSourceName," ")}}function R(t,e){1&t&&(a["\u0275\u0275elementStart"](0,"mat-header-cell",29),a["\u0275\u0275text"](1),a["\u0275\u0275pipe"](2,"translate"),a["\u0275\u0275elementEnd"]()),2&t&&(a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](2,1,"widget-config.action-name")," "))}function N(t,e){if(1&t&&(a["\u0275\u0275elementStart"](0,"mat-cell"),a["\u0275\u0275text"](1),a["\u0275\u0275elementEnd"]()),2&t){var n=e.$implicit;a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"](" ",n.name," ")}}function G(t,e){1&t&&(a["\u0275\u0275elementStart"](0,"mat-header-cell",30),a["\u0275\u0275text"](1),a["\u0275\u0275pipe"](2,"translate"),a["\u0275\u0275elementEnd"]()),2&t&&(a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](2,1,"widget-config.action-icon")," "))}function B(t,e){if(1&t&&(a["\u0275\u0275elementStart"](0,"mat-cell"),a["\u0275\u0275elementStart"](1,"mat-icon"),a["\u0275\u0275text"](2),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()),2&t){var n=e.$implicit;a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate"](n.icon)}}function U(t,e){1&t&&(a["\u0275\u0275elementStart"](0,"mat-header-cell",31),a["\u0275\u0275text"](1),a["\u0275\u0275pipe"](2,"translate"),a["\u0275\u0275elementEnd"]()),2&t&&(a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](2,1,"widget-config.action-type")," "))}function q(t,e){if(1&t&&(a["\u0275\u0275elementStart"](0,"mat-cell"),a["\u0275\u0275text"](1),a["\u0275\u0275elementEnd"]()),2&t){var n=e.$implicit;a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"](" ",n.typeName," ")}}function W(t,e){1&t&&a["\u0275\u0275element"](0,"mat-header-cell",32)}function z(t,e){if(1&t){var n=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementStart"](0,"mat-cell"),a["\u0275\u0275elementStart"](1,"div",33),a["\u0275\u0275elementStart"](2,"button",6),a["\u0275\u0275listener"]("click",(function(t){a["\u0275\u0275restoreView"](n);var i=e.$implicit;return a["\u0275\u0275nextContext"]().editAction(t,i)})),a["\u0275\u0275pipe"](3,"async"),a["\u0275\u0275pipe"](4,"translate"),a["\u0275\u0275elementStart"](5,"mat-icon"),a["\u0275\u0275text"](6,"edit"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](7,"button",6),a["\u0275\u0275listener"]("click",(function(t){a["\u0275\u0275restoreView"](n);var i=e.$implicit;return a["\u0275\u0275nextContext"]().deleteAction(t,i)})),a["\u0275\u0275pipe"](8,"async"),a["\u0275\u0275pipe"](9,"translate"),a["\u0275\u0275elementStart"](10,"mat-icon"),a["\u0275\u0275text"](11,"delete"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()}if(2&t){var i=a["\u0275\u0275nextContext"]();a["\u0275\u0275advance"](2),a["\u0275\u0275propertyInterpolate"]("matTooltip",a["\u0275\u0275pipeBind1"](4,6,"widget-config.edit-action")),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](3,4,i.isLoading$)),a["\u0275\u0275advance"](5),a["\u0275\u0275propertyInterpolate"]("matTooltip",a["\u0275\u0275pipeBind1"](9,10,"widget-config.delete-action")),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](8,8,i.isLoading$))}}var K=function(){return{"mat-row-select":!0}};function H(t,e){1&t&&a["\u0275\u0275element"](0,"mat-header-row",34),2&t&&a["\u0275\u0275property"]("ngClass",a["\u0275\u0275pureFunction0"](1,K))}function $(t,e){1&t&&a["\u0275\u0275element"](0,"mat-row",34),2&t&&a["\u0275\u0275property"]("ngClass",a["\u0275\u0275pureFunction0"](1,K))}var Q=function(){return[10,20,30]},X=function(t){function e(e,n,i,a,r){var o=t.call(this,e)||this;o.store=e,o.translate=n,o.utils=i,o.dialog=a,o.dialogs=r,o.textSearchMode=!1,o.viewsInited=!1,o.dirtyValue=!1,o.propagateChange=function(t){};var s={property:"actionSourceName",direction:c.a.ASC};return o.pageLink=new l.b(10,0,null,s),o.dataSource=new y.a(o.translate,o.utils),o.displayedColumns=["actionSourceName","name","icon","typeName","actions"],o}return Object(i.d)(e,t),e.prototype.ngOnInit=function(){},e.prototype.ngOnDestroy=function(){},e.prototype.ngAfterViewInit=function(){var t=this;Object(u.a)(this.searchInputField.nativeElement,"keyup").pipe(Object(f.a)(150),Object(h.a)(),Object(g.a)((function(){t.paginator.pageIndex=0,t.updateData()}))).subscribe(),this.sort.sortChange.subscribe((function(){return t.paginator.pageIndex=0})),Object(m.a)(this.sort.sortChange,this.paginator.page).pipe(Object(g.a)((function(){return t.updateData()}))).subscribe(),this.viewsInited=!0,this.dirtyValue&&(this.dirtyValue=!1,this.updateData(!0))},e.prototype.updateData=function(t){void 0===t&&(t=!1),this.pageLink.page=this.paginator.pageIndex,this.pageLink.pageSize=this.paginator.pageSize,this.pageLink.sortOrder.property=this.sort.active,this.pageLink.sortOrder.direction=c.a[this.sort.direction.toUpperCase()],this.dataSource.loadActions(this.pageLink,t)},e.prototype.addAction=function(t){this.openWidgetActionDialog(t)},e.prototype.editAction=function(t,e){this.openWidgetActionDialog(t,e)},e.prototype.openWidgetActionDialog=function(t,e){var n=this;void 0===e&&(e=null),t&&t.stopPropagation();var i=null===e,a=null;i||(a=e.actionSourceId);for(var r={},o=0,s=Object.keys(this.innerValue.actionSources);o<s.length;o++){var l=s[o],c=this.innerValue.actionSources[l];if(c.multiple)r[l]=c;else if(i||e.actionSourceId!==l){var d=this.innerValue.actionsMap[l];d&&d.length||(r[l]=c)}else r[l]=c}var p={actionsMap:this.innerValue.actionsMap,actionSources:r};this.dialog.open(v.a,{disableClose:!0,panelClass:["tb-dialog","tb-fullscreen-dialog"],data:{isAdd:i,callbacks:this.callbacks,actionsData:p,action:Object(x.e)(e)}}).afterClosed().subscribe((function(t){t&&n.saveAction(t,i,a)}))},e.prototype.saveAction=function(t,e,n){var i,a,r=t.actionSourceId,o=Object(y.c)(t);e?(i=this.getOrCreateTargetActions(r)).push(o):r!==n?((a=(i=this.getOrCreateTargetActions(n)).findIndex((function(t){return t.id===o.id})))>-1&&i.splice(a,1),(i=this.getOrCreateTargetActions(r)).push(o)):(a=(i=this.getOrCreateTargetActions(r)).findIndex((function(t){return t.id===o.id})))>-1&&(i[a]=o);this.onActionsUpdated()},e.prototype.getOrCreateTargetActions=function(t){var e=this.innerValue.actionsMap,n=e[t];return n||(n=[],e[t]=n),n},e.prototype.deleteAction=function(t,e){var n=this;t&&t.stopPropagation();var i=this.translate.instant("widget-config.delete-action-title"),a=this.translate.instant("widget-config.delete-action-text",{actionName:e.name});this.dialogs.confirm(i,a,this.translate.instant("action.no"),this.translate.instant("action.yes"),!0).subscribe((function(t){if(t){var i=n.getOrCreateTargetActions(e.actionSourceId),a=i.findIndex((function(t){return t.id===e.id}));a>-1&&(i.splice(a,1),n.onActionsUpdated())}}))},e.prototype.enterFilterMode=function(){var t=this;this.textSearchMode=!0,this.pageLink.textSearch="",setTimeout((function(){t.searchInputField.nativeElement.focus(),t.searchInputField.nativeElement.setSelectionRange(0,0)}),10)},e.prototype.exitFilterMode=function(){this.textSearchMode=!1,this.pageLink.textSearch=null,this.paginator.pageIndex=0,this.updateData()},e.prototype.resetSortAndFilter=function(t){void 0===t&&(t=!0),this.pageLink.textSearch=null,this.paginator.pageIndex=0;var e=this.sort.sortables.get("actionSourceName");this.sort.active=e.id,this.sort.direction="asc",t&&this.updateData(!0)},e.prototype.registerOnChange=function(t){this.propagateChange=t},e.prototype.registerOnTouched=function(t){},e.prototype.setDisabledState=function(t){this.disabled=t},e.prototype.writeValue=function(t){var e=this;this.innerValue=t,this.innerValue&&setTimeout((function(){e.dataSource.setActions(e.innerValue),e.viewsInited?e.resetSortAndFilter(!0):e.dirtyValue=!0}),0)},e.prototype.onActionsUpdated=function(){this.updateData(!0),this.propagateChange(this.innerValue)},e.\u0275fac=function(t){return new(t||e)(a["\u0275\u0275directiveInject"](C.Store),a["\u0275\u0275directiveInject"](S.TranslateService),a["\u0275\u0275directiveInject"](b.a),a["\u0275\u0275directiveInject"](w.MatDialog),a["\u0275\u0275directiveInject"](s.a))},e.\u0275cmp=a["\u0275\u0275defineComponent"]({type:e,selectors:[["tb-manage-widget-actions"]],viewQuery:function(t,e){var n;(1&t&&(a["\u0275\u0275viewQuery"](_,!0),a["\u0275\u0275viewQuery"](d.MatPaginator,!0),a["\u0275\u0275viewQuery"](p.MatSort,!0)),2&t)&&(a["\u0275\u0275queryRefresh"](n=a["\u0275\u0275loadQuery"]())&&(e.searchInputField=n.first),a["\u0275\u0275queryRefresh"](n=a["\u0275\u0275loadQuery"]())&&(e.paginator=n.first),a["\u0275\u0275queryRefresh"](n=a["\u0275\u0275loadQuery"]())&&(e.sort=n.first))},inputs:{disabled:"disabled",callbacks:"callbacks"},features:[a["\u0275\u0275ProvidersFeature"]([{provide:r.NG_VALUE_ACCESSOR,useExisting:Object(a.forwardRef)((function(){return e})),multi:!0}]),a["\u0275\u0275InheritDefinitionFeature"]],decls:58,vars:41,consts:[[1,"mat-padding","tb-entity-table","tb-absolute-fill"],["fxFlex","","fxLayout","column",1,"mat-elevation-z1","tb-entity-table-content"],[1,"mat-table-toolbar",3,"fxShow"],[1,"mat-toolbar-tools"],["translate","",1,"tb-entity-table-title"],["fxFlex",""],["mat-icon-button","","type","button","matTooltipPosition","above",3,"disabled","matTooltip","click"],["mat-icon-button","","type","button","matTooltipPosition","above",3,"matTooltip"],["matInput","",3,"ngModel","placeholder","ngModelChange"],["searchInput",""],["mat-icon-button","","type","button","matTooltipPosition","above",3,"matTooltip","click"],["fxFlex","",1,"table-container"],["mat-table","","matSort","","matSortDisableClear","",3,"dataSource","matSortActive","matSortDirection"],["matColumnDef","actionSourceName"],["mat-sort-header","","style","width: 20%",4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","name"],["mat-sort-header","","style","width: 30%",4,"matHeaderCellDef"],["matColumnDef","icon"],["mat-sort-header","","style","width: 40px",4,"matHeaderCellDef"],["matColumnDef","typeName"],["mat-sort-header","","style","width: 50%",4,"matHeaderCellDef"],["matColumnDef","actions","stickyEnd",""],["style","min-width: 80px; max-width: 80px; width: 80px",4,"matHeaderCellDef"],[3,"ngClass",4,"matHeaderRowDef","matHeaderRowDefSticky"],[3,"ngClass",4,"matRowDef","matRowDefColumns"],["fxLayoutAlign","center center","translate","",1,"no-data-found",3,"fxShow"],[3,"length","pageIndex","pageSize","pageSizeOptions"],["mat-sort-header","",2,"width","20%"],["mat-sort-header","",2,"width","30%"],["mat-sort-header","",2,"width","40px"],["mat-sort-header","",2,"width","50%"],[2,"min-width","80px","max-width","80px","width","80px"],["fxFlex","","fxLayout","row","fxLayoutAlign","end"],[3,"ngClass"]],template:function(t,e){1&t&&(a["\u0275\u0275elementStart"](0,"div",0),a["\u0275\u0275elementStart"](1,"div",1),a["\u0275\u0275elementStart"](2,"mat-toolbar",2),a["\u0275\u0275elementStart"](3,"div",3),a["\u0275\u0275elementStart"](4,"span",4),a["\u0275\u0275text"](5,"widget-config.actions"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](6,"span",5),a["\u0275\u0275elementStart"](7,"button",6),a["\u0275\u0275listener"]("click",(function(t){return e.addAction(t)})),a["\u0275\u0275pipe"](8,"async"),a["\u0275\u0275pipe"](9,"translate"),a["\u0275\u0275elementStart"](10,"mat-icon"),a["\u0275\u0275text"](11,"add"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](12,"button",6),a["\u0275\u0275listener"]("click",(function(){return e.enterFilterMode()})),a["\u0275\u0275pipe"](13,"async"),a["\u0275\u0275pipe"](14,"translate"),a["\u0275\u0275elementStart"](15,"mat-icon"),a["\u0275\u0275text"](16,"search"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](17,"mat-toolbar",2),a["\u0275\u0275elementStart"](18,"div",3),a["\u0275\u0275elementStart"](19,"button",7),a["\u0275\u0275pipe"](20,"translate"),a["\u0275\u0275elementStart"](21,"mat-icon"),a["\u0275\u0275text"](22,"search"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](23,"mat-form-field",5),a["\u0275\u0275elementStart"](24,"mat-label"),a["\u0275\u0275text"](25,"\xa0"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](26,"input",8,9),a["\u0275\u0275listener"]("ngModelChange",(function(t){return e.pageLink.textSearch=t})),a["\u0275\u0275pipe"](28,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](29,"button",10),a["\u0275\u0275listener"]("click",(function(){return e.exitFilterMode()})),a["\u0275\u0275pipe"](30,"translate"),a["\u0275\u0275elementStart"](31,"mat-icon"),a["\u0275\u0275text"](32,"close"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](33,"div",11),a["\u0275\u0275elementStart"](34,"table",12),a["\u0275\u0275elementContainerStart"](35,13),a["\u0275\u0275template"](36,L,3,3,"mat-header-cell",14),a["\u0275\u0275template"](37,V,2,1,"mat-cell",15),a["\u0275\u0275elementContainerEnd"](),a["\u0275\u0275elementContainerStart"](38,16),a["\u0275\u0275template"](39,R,3,3,"mat-header-cell",17),a["\u0275\u0275template"](40,N,2,1,"mat-cell",15),a["\u0275\u0275elementContainerEnd"](),a["\u0275\u0275elementContainerStart"](41,18),a["\u0275\u0275template"](42,G,3,3,"mat-header-cell",19),a["\u0275\u0275template"](43,B,3,1,"mat-cell",15),a["\u0275\u0275elementContainerEnd"](),a["\u0275\u0275elementContainerStart"](44,20),a["\u0275\u0275template"](45,U,3,3,"mat-header-cell",21),a["\u0275\u0275template"](46,q,2,1,"mat-cell",15),a["\u0275\u0275elementContainerEnd"](),a["\u0275\u0275elementContainerStart"](47,22),a["\u0275\u0275template"](48,W,1,0,"mat-header-cell",23),a["\u0275\u0275template"](49,z,12,12,"mat-cell",15),a["\u0275\u0275elementContainerEnd"](),a["\u0275\u0275template"](50,H,1,2,"mat-header-row",24),a["\u0275\u0275template"](51,$,1,2,"mat-row",25),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](52,"span",26),a["\u0275\u0275pipe"](53,"async"),a["\u0275\u0275text"](54),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](55,"mat-divider"),a["\u0275\u0275element"](56,"mat-paginator",27),a["\u0275\u0275pipe"](57,"async"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()),2&t&&(a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("fxShow",!e.textSearchMode),a["\u0275\u0275advance"](5),a["\u0275\u0275propertyInterpolate"]("matTooltip",a["\u0275\u0275pipeBind1"](9,24,"widget-config.add-action")),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](8,22,e.isLoading$)),a["\u0275\u0275advance"](5),a["\u0275\u0275propertyInterpolate"]("matTooltip",a["\u0275\u0275pipeBind1"](14,28,"action.search")),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](13,26,e.isLoading$)),a["\u0275\u0275advance"](5),a["\u0275\u0275property"]("fxShow",e.textSearchMode),a["\u0275\u0275advance"](2),a["\u0275\u0275propertyInterpolate"]("matTooltip",a["\u0275\u0275pipeBind1"](20,30,"widget-config.search-actions")),a["\u0275\u0275advance"](7),a["\u0275\u0275propertyInterpolate"]("placeholder",a["\u0275\u0275pipeBind1"](28,32,"widget-config.search-actions")),a["\u0275\u0275property"]("ngModel",e.pageLink.textSearch),a["\u0275\u0275advance"](3),a["\u0275\u0275propertyInterpolate"]("matTooltip",a["\u0275\u0275pipeBind1"](30,34,"action.close")),a["\u0275\u0275advance"](5),a["\u0275\u0275property"]("dataSource",e.dataSource)("matSortActive",e.pageLink.sortOrder.property)("matSortDirection",e.pageLink.sortDirection()),a["\u0275\u0275advance"](16),a["\u0275\u0275property"]("matHeaderRowDef",e.displayedColumns)("matHeaderRowDefSticky",!0),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("matRowDefColumns",e.displayedColumns),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("fxShow",a["\u0275\u0275pipeBind1"](53,36,e.dataSource.isEmpty())),a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate"]("widget-config.no-actions-text"),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("length",a["\u0275\u0275pipeBind1"](57,38,e.dataSource.total()))("pageIndex",e.pageLink.page)("pageSize",e.pageLink.pageSize)("pageSizeOptions",a["\u0275\u0275pureFunction0"](40,Q)))},directives:[E.b,E.f,I.MatToolbar,O.d,S.TranslateDirective,T.MatButton,M.MatTooltip,F.MatIcon,P.MatFormField,P.MatLabel,D.MatInput,r.DefaultValueAccessor,r.NgControlStatus,r.NgModel,k.MatTable,p.MatSort,k.MatColumnDef,k.MatHeaderCellDef,k.MatCellDef,k.MatHeaderRowDef,k.MatRowDef,E.e,j.MatDivider,d.MatPaginator,k.MatHeaderCell,p.MatSortHeader,k.MatCell,k.MatHeaderRow,A.NgClass,O.b,k.MatRow],pipes:[A.AsyncPipe,S.TranslatePipe],styles:["[_nghost-%COMP%]{width:100%;height:100%}[_nghost-%COMP%]   .tb-entity-table[_ngcontent-%COMP%]   .tb-entity-table-content[_ngcontent-%COMP%]{width:100%;height:100%;background:#fff}[_nghost-%COMP%]   .tb-entity-table[_ngcontent-%COMP%]   .tb-entity-table-content[_ngcontent-%COMP%]   .tb-entity-table-title[_ngcontent-%COMP%]{padding-right:20px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}[_nghost-%COMP%]   .tb-entity-table[_ngcontent-%COMP%]   .tb-entity-table-content[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]{overflow:auto}[_nghost-%COMP%]     .mat-sort-header-sorted .mat-sort-header-arrow{opacity:1!important}"]}),e}(o.a);!function(){a["\u0275setClassMetadata"](X,[{type:a.Component,args:[{selector:"tb-manage-widget-actions",templateUrl:"./manage-widget-actions.component.html",styleUrls:["./manage-widget-actions.component.scss"],providers:[{provide:r.NG_VALUE_ACCESSOR,useExisting:Object(a.forwardRef)((function(){return X})),multi:!0}]}]}],(function(){return[{type:C.Store},{type:S.TranslateService},{type:b.a},{type:w.MatDialog},{type:s.a}]}),{disabled:[{type:a.Input}],callbacks:[{type:a.Input}],searchInputField:[{type:a.ViewChild,args:["searchInput"]}],paginator:[{type:a.ViewChild,args:[d.MatPaginator]}],sort:[{type:a.ViewChild,args:[p.MatSort]}]})}()},"4Nnk":function(t,e,n){"use strict";n.d(e,"a",(function(){return f}));var i=n("fXoL"),a=n("3Pt+"),r=n("JIJk"),o=n("Dgsq"),s=n("//Q6"),l=n("0IaG"),c=n("sYmb"),d=n("XiUz"),p=n("bTqV"),u=n("Qu3c"),m=n("NFeN"),f=function(){function t(t,e,n){this.dialog=t,this.translate=e,this.cd=n,this.scheduleText="",this.propagateChange=function(t){}}return t.prototype.ngOnInit=function(){},t.prototype.registerOnChange=function(t){this.propagateChange=t},t.prototype.registerOnTouched=function(t){},t.prototype.setDisabledState=function(t){this.disabled=t},t.prototype.writeValue=function(t){this.modelValue=t,this.updateScheduleText()},t.prototype.updateScheduleText=function(){var t=this.modelValue;switch(Object(s.o)(t)||(t={type:r.c.ANY_TIME}),this.scheduleText="",t.type){case r.c.ANY_TIME:this.scheduleText=this.translate.instant("device-profile.schedule-any-time");break;case r.c.SPECIFIC_TIME:for(var e=0,n=t.daysOfWeek;e<n.length;e++){var i=n[e];this.scheduleText.length&&(this.scheduleText+=", "),this.scheduleText+=this.translate.instant(r.s[i-1])}this.scheduleText+=" <b>"+Object(r.C)(Object(r.G)(t.startsOn),Object(r.G)(t.endsOn))+"</b>";break;case r.c.CUSTOM:for(var a=0,o=t.items;a<o.length;a++){var l=o[a];l.enabled&&(this.scheduleText.length&&(this.scheduleText+=", "),this.scheduleText+=this.translate.instant(r.s[l.dayOfWeek-1]),this.scheduleText+=" <b>"+Object(r.C)(Object(r.G)(l.startsOn),Object(r.G)(l.endsOn))+"</b>")}}},t.prototype.openScheduleDialog=function(t){var e=this;t&&t.stopPropagation(),this.dialog.open(o.a,{disableClose:!0,panelClass:["tb-dialog","tb-fullscreen-dialog"],data:{readonly:this.disabled,alarmSchedule:this.disabled?this.modelValue:Object(s.e)(this.modelValue)}}).afterClosed().subscribe((function(t){t&&(e.modelValue=t,e.propagateChange(e.modelValue),e.updateScheduleText(),e.cd.detectChanges())}))},t.\u0275fac=function(e){return new(e||t)(i["\u0275\u0275directiveInject"](l.MatDialog),i["\u0275\u0275directiveInject"](c.TranslateService),i["\u0275\u0275directiveInject"](i.ChangeDetectorRef))},t.\u0275cmp=i["\u0275\u0275defineComponent"]({type:t,selectors:[["tb-alarm-schedule-info"]],inputs:{disabled:"disabled"},features:[i["\u0275\u0275ProvidersFeature"]([{provide:a.NG_VALUE_ACCESSOR,useExisting:Object(i.forwardRef)((function(){return t})),multi:!0}])],decls:9,vars:8,consts:[["fxLayout","row","fxLayoutAlign","start center",2,"min-width","0"],[1,"tb-alarm-rule-schedule","title",3,"click"],[1,"tb-alarm-rule-schedule",3,"innerHTML","click"],["mat-icon-button","","color","primary","type","button","matTooltipPosition","above",3,"matTooltip","click"]],template:function(t,e){1&t&&(i["\u0275\u0275elementStart"](0,"div",0),i["\u0275\u0275elementStart"](1,"span",1),i["\u0275\u0275listener"]("click",(function(t){return e.openScheduleDialog(t)})),i["\u0275\u0275text"](2),i["\u0275\u0275pipe"](3,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](4,"span",2),i["\u0275\u0275listener"]("click",(function(t){return e.openScheduleDialog(t)})),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](5,"button",3),i["\u0275\u0275listener"]("click",(function(t){return e.openScheduleDialog(t)})),i["\u0275\u0275pipe"](6,"translate"),i["\u0275\u0275elementStart"](7,"mat-icon"),i["\u0275\u0275text"](8),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()),2&t&&(i["\u0275\u0275advance"](2),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](3,4,"device-profile.schedule")+": "),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("innerHTML",e.scheduleText,i["\u0275\u0275sanitizeHtml"]),i["\u0275\u0275advance"](1),i["\u0275\u0275propertyInterpolate"]("matTooltip",i["\u0275\u0275pipeBind1"](6,6,e.disabled?"action.view":"action.edit")),i["\u0275\u0275advance"](3),i["\u0275\u0275textInterpolate"](e.disabled?"visibility":"edit"))},directives:[d.f,d.e,p.MatButton,u.MatTooltip,m.MatIcon],pipes:[c.TranslatePipe],styles:["[_nghost-%COMP%]{display:-ms-flexbox;display:flex}[_nghost-%COMP%]   a.mat-button[_ngcontent-%COMP%]:focus, [_nghost-%COMP%]   a.mat-button[_ngcontent-%COMP%]:hover{border-bottom:none}[_nghost-%COMP%]   .tb-alarm-rule-schedule[_ngcontent-%COMP%]{padding:4px;cursor:pointer;overflow:hidden;white-space:nowrap;text-overflow:ellipsis}[_nghost-%COMP%]   .tb-alarm-rule-schedule.title[_ngcontent-%COMP%]{opacity:.7;overflow:visible}"]}),t}();!function(){i["\u0275setClassMetadata"](f,[{type:i.Component,args:[{selector:"tb-alarm-schedule-info",templateUrl:"./alarm-schedule-info.component.html",styleUrls:["./alarm-schedule-info.component.scss"],providers:[{provide:a.NG_VALUE_ACCESSOR,useExisting:Object(i.forwardRef)((function(){return f})),multi:!0}]}]}],(function(){return[{type:l.MatDialog},{type:c.TranslateService},{type:i.ChangeDetectorRef}]}),{disabled:[{type:i.Input}]})}()},"4j5O":function(t,e,n){"use strict";n.d(e,"a",(function(){return d}));var i=n("fXoL"),a=n("OiFK"),r=n("k9IB"),o=n("//Q6"),s=n("0lYY"),l=n("U3y+"),c=n("MBk6"),d=function(){function t(t,e){this.utils=t,this.timeService=e}return t.prototype.validateAndUpdateDashboard=function(t){var e=this;if(t.configuration||(t.configuration={}),Object(o.z)(t.configuration.widgets))t.configuration.widgets={};else if(Array.isArray(t.configuration.widgets)){var n={};t.configuration.widgets.forEach((function(t){t.id||(t.id=e.utils.guid()),n[t.id]=t})),t.configuration.widgets=n}for(var i=0,a=Object.keys(t.configuration.widgets);i<a.length;i++){var r=a[i],s=t.configuration.widgets[r];t.configuration.widgets[r]=this.validateAndUpdateWidget(s)}if(Object(o.z)(t.configuration.states)){t.configuration.states={default:this.createDefaultState(t.title,!0)};for(var l=t.configuration.states.default.layouts.main,c=0,d=Object.keys(t.configuration.widgets);c<d.length;c++){r=d[c],s=t.configuration.widgets[r];l.widgets[r]={sizeX:s.sizeX,sizeY:s.sizeY,row:s.row,col:s.col},Object(o.n)(s.config.mobileHeight)&&(l.widgets[r].mobileHeight=s.config.mobileHeight),Object(o.n)(s.config.mobileOrder)&&(l.widgets[r].mobileOrder=s.config.mobileOrder)}}else{for(var p=t.configuration.states,u=!1,m=0,f=Object.keys(p);m<f.length;m++){var h=p[f[m]];Object(o.z)(h.root)?h.root=!1:h.root&&(u=!0),this.validateAndUpdateState(h)}if(!u)p[Object.keys(p)[0]].root=!0}for(var g={},y={},b=0,v=Object.keys(t.configuration.widgets);b<v.length;b++){var x=v[b];if((s=t.configuration.widgets[x]).config.datasources.forEach((function(t){if(t.entityAliasId){var e=t.entityAliasId,n=g[e];n||(n=[],g[e]=n),n.push(t)}})),s.config.targetDeviceAliasIds&&s.config.targetDeviceAliasIds.length){var C=s.config.targetDeviceAliasIds[0],S=y[C];S||(S=[],y[C]=S),S.push(s.config.targetDeviceAliasIds)}}if(t.configuration=this.validateAndUpdateEntityAliases(t.configuration,g,y),t.configuration.filters||(t.configuration.filters={}),Object(o.z)(t.configuration.timewindow)&&(t.configuration.timewindow=this.timeService.defaultTimewindow()),Object(o.z)(t.configuration.settings)?(t.configuration.settings={},t.configuration.settings.stateControllerId="entity",t.configuration.settings.showTitle=!1,t.configuration.settings.showDashboardsSelect=!0,t.configuration.settings.showEntitiesSelect=!0,t.configuration.settings.showDashboardTimewindow=!0,t.configuration.settings.showDashboardExport=!0,t.configuration.settings.toolbarAlwaysOpen=!0):Object(o.z)(t.configuration.settings.stateControllerId)&&(t.configuration.settings.stateControllerId="entity"),Object(o.n)(t.configuration.gridSettings)){var w=t.configuration.gridSettings;Object(o.n)(w.showTitle)&&(t.configuration.settings.showTitle=w.showTitle,delete w.showTitle),Object(o.n)(w.titleColor)&&(t.configuration.settings.titleColor=w.titleColor,delete w.titleColor),Object(o.n)(w.showDevicesSelect)&&(t.configuration.settings.showEntitiesSelect=w.showDevicesSelect,delete w.showDevicesSelect),Object(o.n)(w.showEntitiesSelect)&&(t.configuration.settings.showEntitiesSelect=w.showEntitiesSelect,delete w.showEntitiesSelect),Object(o.n)(w.showDashboardTimewindow)&&(t.configuration.settings.showDashboardTimewindow=w.showDashboardTimewindow,delete w.showDashboardTimewindow),Object(o.n)(w.showDashboardExport)&&(t.configuration.settings.showDashboardExport=w.showDashboardExport,delete w.showDashboardExport),t.configuration.states.default.layouts.main.gridSettings=w,delete t.configuration.gridSettings}return t},t.prototype.createSingleWidgetDashboard=function(t){t.id||(t.id=this.utils.guid());var e={};return(e=this.validateAndUpdateDashboard(e)).configuration.widgets[t.id]=t,e.configuration.states.default.layouts.main.widgets[t.id]={sizeX:t.sizeX,sizeY:t.sizeY,row:t.row,col:t.col},e},t.prototype.validateAndUpdateWidget=function(t){return t.config||(t.config={}),t.config.datasources||(t.config.datasources=[]),t.config.datasources.forEach((function(t){"device"===t.type&&(t.type=s.a.entity),t.deviceAliasId&&(t.entityAliasId=t.deviceAliasId,delete t.deviceAliasId)})),t.isSystemType&&"charts"===t.bundleAlias&&"timeseries"===t.typeAlias&&(t.typeAlias="basic_timeseries"),t},t.prototype.createDefaultLayoutData=function(){return{widgets:{},gridSettings:this.createDefaultGridSettings()}},t.prototype.createDefaultGridSettings=function(){return{backgroundColor:"#eeeeee",color:"rgba(0,0,0,0.870588)",columns:24,margin:10,backgroundSizeMode:"100%"}},t.prototype.createDefaultLayouts=function(){return{main:this.createDefaultLayoutData()}},t.prototype.createDefaultState=function(t,e){return{name:t,root:e,layouts:this.createDefaultLayouts()}},t.prototype.createSingleEntityFilter=function(t){return{type:c.a.singleEntity,singleEntity:t,resolveMultiple:!1}},t.prototype.validateAndUpdateState=function(t){t.layouts||(t.layouts=this.createDefaultLayouts());for(var e=0,n=Object.keys(t.layouts);e<n.length;e++){var i=n[e],a=t.layouts[i];this.validateAndUpdateLayout(a)}},t.prototype.validateAndUpdateLayout=function(t){t.gridSettings||(t.gridSettings=this.createDefaultGridSettings()),t.gridSettings.margins&&2===t.gridSettings.margins.length&&(t.gridSettings.margin=t.gridSettings.margins[0],delete t.gridSettings.margins),t.gridSettings.margin=Object(o.n)(t.gridSettings.margin)?t.gridSettings.margin:10},t.prototype.setLayouts=function(t,e,n){for(var i=t.configuration.states[e],a=0,r=0,o=0,s=Object.keys(i.layouts);o<s.length;o++){n[d=s[o]]||r++}for(var l=0,c=Object.keys(n);l<c.length;l++){var d=c[l];i.layouts[d]||a++}i.layouts=n;var p,u=Object.keys(i.layouts).length;if(a)for(var m=0,f=Object.keys(i.layouts);m<f.length;m++){d=f[m];(p=i.layouts[d].gridSettings.columns*(u-a)/u)>0&&(i.layouts[d].gridSettings.columns=p)}if(r)for(var h=0,g=Object.keys(i.layouts);h<g.length;h++){d=g[h];(p=i.layouts[d].gridSettings.columns*(u+r)/u)>0&&(i.layouts[d].gridSettings.columns=p)}this.removeUnusedWidgets(t)},t.prototype.getRootStateId=function(t){for(var e=0,n=Object.keys(t);e<n.length;e++){var i=n[e];if(t[i].root)return i}return Object.keys(t)[0]},t.prototype.getStateLayoutsData=function(t,e){var n=t.configuration.states[e];if(n){for(var i={},a=0,r=Object.keys(n.layouts);a<r.length;a++){var o=r[a],s=n.layouts[o];if(s){i[o]={widgetIds:[],widgetLayouts:{},gridSettings:{}};for(var l=0,c=Object.keys(s.widgets);l<c.length;l++){var d=c[l];i[o].widgetIds.push(d)}i[o].widgetLayouts=s.widgets,i[o].gridSettings=s.gridSettings}}return i}return null},t.prototype.getWidgetsArray=function(t){for(var e=[],n=t.configuration.widgets,i=0,a=Object.keys(n);i<a.length;i++){var r=n[a[i]];e.push(r)}return e},t.prototype.addWidgetToLayout=function(t,e,n,i,a,r,s,l){var c=t.configuration,d=c.states[e],p=d.layouts[n],u=Object.keys(d.layouts).length;i.id||(i.id=this.utils.guid()),c.widgets[i.id]||(c.widgets[i.id]=i);var m={sizeX:r?r.sizeX:i.sizeX,sizeY:r?r.sizeY:i.sizeY,mobileOrder:i.config.mobileOrder,mobileHeight:i.config.mobileHeight};Object(o.z)(a)&&(a=24);var f=p.gridSettings,h=24;if(f&&f.columns&&(h=f.columns),(h*=u)!==a){var g=h/a;m.sizeX*=g,m.sizeY*=g}if(s>-1&&l>-1)m.row=s,m.col=l;else{s=0;for(var y=0,b=Object.keys(p.widgets);y<b.length;y++){var v=b[y],x=p.widgets[v],C=(x.row?x.row:0)+(x.sizeY?x.sizeY:1);s=Math.max(s,C)}m.row=s,m.col=0}m.sizeX=Math.floor(m.sizeX),m.sizeY=Math.floor(m.sizeY),m.row=Math.floor(m.row),m.col=Math.floor(m.col),p.widgets[i.id]=m},t.prototype.removeWidgetFromLayout=function(t,e,n,i){delete t.configuration.states[e].layouts[n].widgets[i],this.removeUnusedWidgets(t)},t.prototype.isSingleLayoutDashboard=function(t){var e=t.configuration.states,n=Object.keys(e);if(1===n.length){var i=e[n[0]].layouts,a=Object.keys(i);if(1===a.length)return{state:n[0],layout:a[0]}}return null},t.prototype.updateLayoutSettings=function(t,e){var n=t.gridSettings,i=n?n.columns:24;i||(i=24);var a=e.columns||24,r=a/i;t.gridSettings=e;for(var o=0,s=0,l=Object.keys(t.widgets);s<l.length;s++){var c=l[s];(m=t.widgets[c]).sizeX||(m.sizeX=1),m.sizeY||(m.sizeY=1),o=Math.max(o,m.row+m.sizeY)}for(var d=Math.round(o*r),p=0,u=Object.keys(t.widgets);p<u.length;p++){var m;c=u[p];(m=t.widgets[c]).row+m.sizeY===o?(m.row=Math.round(m.row*r),m.sizeY=d-m.row):(m.row=Math.round(m.row*r),m.sizeY=Math.round(m.sizeY*r)),m.sizeX=Math.round(m.sizeX*r),m.col=Math.round(m.col*r),m.col+m.sizeX>a&&(m.sizeX=a-m.col)}},t.prototype.removeUnusedWidgets=function(t){for(var e=t.configuration,n=e.states,i=e.widgets,a=0,r=Object.keys(i);a<r.length;a++){for(var o=r[a],s=!1,l=0,c=Object.keys(n);l<c.length;l++)for(var d=n[c[l]],p=0,u=Object.keys(d.layouts);p<u.length;p++){var m=u[p];if(d.layouts[m].widgets[o]){s=!0;break}}s||delete e.widgets[o]}},t.prototype.validateAndUpdateEntityAliases=function(t,e,n){var i;if(Object(o.z)(t.entityAliases)){if(t.entityAliases={},t.deviceAliases){for(var a=t.deviceAliases,r=0,s=Object.keys(a);r<s.length;r++){var l=a[u=s[r]];i=this.validateAndUpdateDeviceAlias(u,l,e,n),t.entityAliases[i.id]=i}delete t.deviceAliases}}else for(var c=t.entityAliases,d=0,p=Object.keys(c);d<p.length;d++){var u;i=c[u=p[d]],u!==(i=this.validateAndUpdateEntityAlias(u,i,e,n)).id&&delete c[u],c[i.id]=i}return t},t.prototype.validateAndUpdateDeviceAlias=function(t,e,n,i){var a={id:t=this.validateAliasId(t,n,i),alias:e.alias,filter:{type:null,entityType:l.b.DEVICE,resolveMultiple:!1}};return e.deviceFilter?(a.filter.type=e.deviceFilter.useFilter?c.a.entityName:c.a.entityList,a.filter.type===c.a.entityList?a.filter.entityList=e.deviceFilter.deviceList:a.filter.entityNameFilter=e.deviceFilter.deviceNameFilter):(a.filter.type=c.a.entityList,a.filter.entityList=[e.deviceId]),a},t.prototype.validateAndUpdateEntityAlias=function(t,e,n,i){return e.id=this.validateAliasId(t,n,i),e.filter||(e.filter={type:e.entityFilter.useFilter?c.a.entityName:c.a.entityList,entityType:e.entityType,resolveMultiple:!1},e.filter.type===c.a.entityList?e.filter.entityList=e.entityFilter.entityList:e.filter.entityNameFilter=e.entityFilter.entityNameFilter,delete e.entityType,delete e.entityFilter),e},t.prototype.validateAliasId=function(t,e,n){if(t&&Object(o.y)(t)&&36===t.length)return t;var i=this.utils.guid(),a=e[t];a&&a.forEach((function(t){t.entityAliasId=i}));var r=n[t];return r&&r.forEach((function(t){t[0]=i})),i},t.\u0275fac=function(e){return new(e||t)(i["\u0275\u0275inject"](a.a),i["\u0275\u0275inject"](r.a))},t.\u0275prov=i["\u0275\u0275defineInjectable"]({token:t,factory:t.\u0275fac,providedIn:"root"}),t}();!function(){i["\u0275setClassMetadata"](d,[{type:i.Injectable,args:[{providedIn:"root"}]}],(function(){return[{type:a.a},{type:r.a}]}),null)}()},"5OJv":function(t,e,n){"use strict";n.d(e,"a",(function(){return d}));var i=n("mrSG"),a=n("0lYY"),r=n("0G7Z"),o=n("XNiG"),s=n("LRne"),l=n("//Q6");function c(t){return function(e,n,i){i.enumerable=t}}var d=function(){function t(t,e,n){this.dashboard=t,this.widgetsDiffer=e,this.widgetLayoutsDiffer=n,this.highlightedMode=!1,this.dashboardWidgets=[]}return t.prototype[Symbol.iterator]=function(){return this.dashboardWidgets[Symbol.iterator]()},t.prototype.doCheck=function(){var t=this,e=this.widgetsDiffer.diff(this.widgets),n=this.widgetLayoutsDiffer.diff(this.widgetLayouts),i=[];null!==e&&(e.forEachAddedItem((function(e){i.push({widget:e.item,widgetId:e.item.id,widgetLayout:t.widgetLayouts?t.widgetLayouts[e.item.id]:null,operation:"add"})})),e.forEachRemovedItem((function(t){var e=i.find((function(e){return e.widgetId===t.item.id}));e?e.operation="update":(e={widgetId:t.item.id,operation:"remove"},i.push(e))}))),null!==n&&n.forEachChangedItem((function(e){if(!i.find((function(t){return t.widgetId===e.key}))){var n=t.dashboardWidgets.find((function(t){return t.widgetId===e.key}));n&&i.push({widget:n.widget,widgetId:e.key,widgetLayout:e.currentValue,operation:"update"})}})),i.length&&(i.forEach((function(e){switch(e.operation){case"add":t.dashboardWidgets.push(new p(t.dashboard,e.widget,e.widgetLayout));break;case"remove":var n=t.dashboardWidgets.findIndex((function(t){return t.widgetId===e.widgetId}));n>-1&&t.dashboardWidgets.splice(n,1);break;case"update":if((n=t.dashboardWidgets.findIndex((function(t){return t.widgetId===e.widgetId})))>-1){var i=t.dashboardWidgets[n];Object(l.r)(i.widget,e.widget)&&Object(l.r)(i.widgetLayout,e.widgetLayout)?(t.dashboardWidgets[n].widget=e.widget,t.dashboardWidgets[n].widgetLayout=e.widgetLayout):(t.dashboardWidgets[n]=new p(t.dashboard,e.widget,e.widgetLayout),t.dashboardWidgets[n].highlighted=i.highlighted,t.dashboardWidgets[n].selected=i.selected)}}})),this.updateRowsAndSort())},t.prototype.widgetLayoutsUpdated=function(){for(var t=function(t){var n=e.widgetLayouts[t],i=e.dashboardWidgets.findIndex((function(e){return e.widgetId===t}));i>-1&&(e.dashboardWidgets[i].widgetLayout=n)},e=this,n=0,i=Object.keys(this.widgetLayouts);n<i.length;n++){t(i[n])}this.updateRowsAndSort()},t.prototype.setWidgets=function(t,e){this.highlightedMode=!1,this.widgets=t,this.widgetLayouts=e},t.prototype.highlightWidget=function(t){var e=this.findWidgetById(t);return e&&(!this.highlightedMode||!e.highlighted||this.highlightedMode&&e.highlighted)?(this.highlightedMode=!0,e.highlighted=!0,this.dashboardWidgets.forEach((function(t){t!==e&&(t.highlighted=!1)})),e):null},t.prototype.selectWidget=function(t){var e=this.findWidgetById(t);return e&&!e.selected?(e.selected=!0,this.dashboardWidgets.forEach((function(t){t!==e&&(t.selected=!1)})),e):null},t.prototype.resetHighlight=function(){var t=this.dashboardWidgets.find((function(t){return t.highlighted}));return this.highlightedMode=!1,this.dashboardWidgets.forEach((function(t){t.highlighted=!1,t.selected=!1})),t},t.prototype.isHighlighted=function(t){return this.highlightedMode&&t.highlighted||t.selected},t.prototype.isNotHighlighted=function(t){return this.highlightedMode&&!t.highlighted},t.prototype.getSelectedWidget=function(){return this.dashboardWidgets.find((function(t){return t.selected}))},t.prototype.findWidgetById=function(t){return this.dashboardWidgets.find((function(e){return e.widgetId===t}))},t.prototype.updateRowsAndSort=function(){var t=this.dashboard.gridsterOpts.maxRows;this.dashboardWidgets.forEach((function(e){var n=e.y+e.rows;t=Math.max(t,n)})),this.sortWidgets(),this.dashboard.gridsterOpts.maxRows=t,this.dashboard.notifyGridsterOptionsChanged()},t.prototype.sortWidgets=function(){this.dashboardWidgets.sort((function(t,e){var n=t.widgetOrder-e.widgetOrder;return 0===n&&(n=t.x-e.x),n}))},t}(),p=function(){function t(t,e,n){this.dashboard=t,this.widget=e,this.widgetLayout=n,this.highlighted=!1,this.selected=!1,this.isFullscreen=!1,this.widgetContext=new r.c(this.dashboard,this,this.widget),this.gridsterItemComponentSubject=new o.b,e.id||(e.id=Object(l.k)()),this.widgetId=e.id,this.updateWidgetParams()}return Object.defineProperty(t.prototype,"gridsterItemComponent",{set:function(t){this.gridsterItemComponentValue=t,this.gridsterItemComponentSubject.next(this.gridsterItemComponentValue),this.gridsterItemComponentSubject.complete()},enumerable:!1,configurable:!0}),t.prototype.gridsterItemComponent$=function(){return this.gridsterItemComponentValue?Object(s.a)(this.gridsterItemComponentValue):this.gridsterItemComponentSubject.asObservable()},t.prototype.updateWidgetParams=function(){this.color=this.widget.config.color||"rgba(0, 0, 0, 0.87)",this.backgroundColor=this.widget.config.backgroundColor||"#fff",this.padding=this.widget.config.padding||"8px",this.margin=this.widget.config.margin||"0px",this.title=Object(l.n)(this.widgetContext.widgetTitle)&&this.widgetContext.widgetTitle.length?this.widgetContext.widgetTitle:this.widget.config.title,this.customTranslatedTitle=this.dashboard.utils.customTranslation(this.title,this.title),this.titleTooltip=Object(l.n)(this.widgetContext.widgetTitleTooltip)&&this.widgetContext.widgetTitleTooltip.length?this.widgetContext.widgetTitleTooltip:this.widget.config.titleTooltip,this.titleTooltip=this.dashboard.utils.customTranslation(this.titleTooltip,this.titleTooltip),this.showTitle=!Object(l.n)(this.widget.config.showTitle)||this.widget.config.showTitle,this.titleStyle=this.widget.config.titleStyle?this.widget.config.titleStyle:{},this.titleIcon=Object(l.n)(this.widget.config.titleIcon)?this.widget.config.titleIcon:"",this.showTitleIcon=!!Object(l.n)(this.widget.config.showTitleIcon)&&this.widget.config.showTitleIcon,this.titleIconStyle={},this.widget.config.iconColor&&(this.titleIconStyle.color=this.widget.config.iconColor),this.widget.config.iconSize&&(this.titleIconStyle.fontSize=this.widget.config.iconSize),this.dropShadow=!Object(l.n)(this.widget.config.dropShadow)||this.widget.config.dropShadow,this.enableFullscreen=!Object(l.n)(this.widget.config.enableFullscreen)||this.widget.config.enableFullscreen,this.hasTimewindow=(this.widget.type===a.k.timeseries||this.widget.type===a.k.alarm)&&(!!Object(l.n)(this.widget.config.useDashboardTimewindow)&&(!this.widget.config.useDashboardTimewindow&&(Object(l.z)(this.widget.config.displayTimewindow)||this.widget.config.displayTimewindow))),this.hasAggregation=this.widget.type===a.k.timeseries,this.style={cursor:"pointer",color:this.color,backgroundColor:this.backgroundColor,padding:this.padding,margin:this.margin},this.widget.config.widgetStyle&&(this.style=Object(i.a)(Object(i.a)({},this.style),this.widget.config.widgetStyle)),this.showWidgetTitlePanel=!this.widgetContext.hideTitlePanel&&(this.showTitle||this.hasTimewindow),this.showWidgetActions=!this.widgetContext.hideTitlePanel,this.customHeaderActions=this.widgetContext.customHeaderActions?this.widgetContext.customHeaderActions:[],this.widgetActions=this.widgetContext.widgetActions?this.widgetContext.widgetActions:[]},Object.defineProperty(t.prototype,"x",{get:function(){var t;return t=this.widgetLayout?this.widgetLayout.col:this.widget.col,Math.floor(t)},set:function(t){this.dashboard.isMobileSize||(this.widgetLayout?this.widgetLayout.col=t:this.widget.col=t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){var t;return t=this.widgetLayout?this.widgetLayout.row:this.widget.row,Math.floor(t)},set:function(t){this.dashboard.isMobileSize||(this.widgetLayout?this.widgetLayout.row=t:this.widget.row=t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cols",{get:function(){var t;return t=this.widgetLayout?this.widgetLayout.sizeX:this.widget.sizeX,Math.floor(t)},set:function(t){this.dashboard.isMobileSize||(this.widgetLayout?this.widgetLayout.sizeX=t:this.widget.sizeX=t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"rows",{get:function(){var t;if(this.dashboard.isMobileSize&&!this.dashboard.mobileAutofillHeight){var e=void 0;if(this.widgetLayout&&(e=this.widgetLayout.mobileHeight),!e&&this.widget.config.mobileHeight&&(e=this.widget.config.mobileHeight),e)t=e;else t=24*(this.widgetLayout?this.widgetLayout.sizeY:this.widget.sizeY)/this.dashboard.gridsterOpts.minCols}else t=this.widgetLayout?this.widgetLayout.sizeY:this.widget.sizeY;return Math.floor(t)},set:function(t){this.dashboard.isMobileSize||this.dashboard.autofillHeight||(this.widgetLayout?this.widgetLayout.sizeY=t:this.widget.sizeY=t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"widgetOrder",{get:function(){return this.widgetLayout&&Object(l.n)(this.widgetLayout.mobileOrder)&&this.widgetLayout.mobileOrder>=0?this.widgetLayout.mobileOrder:Object(l.n)(this.widget.config.mobileOrder)&&this.widget.config.mobileOrder>=0?this.widget.config.mobileOrder:this.widgetLayout?this.widgetLayout.row:this.widget.row},enumerable:!1,configurable:!0}),Object(i.c)([c(!0),Object(i.e)("design:type",Number),Object(i.e)("design:paramtypes",[Number])],t.prototype,"x",null),Object(i.c)([c(!0),Object(i.e)("design:type",Number),Object(i.e)("design:paramtypes",[Number])],t.prototype,"y",null),Object(i.c)([c(!0),Object(i.e)("design:type",Number),Object(i.e)("design:paramtypes",[Number])],t.prototype,"cols",null),Object(i.c)([c(!0),Object(i.e)("design:type",Number),Object(i.e)("design:paramtypes",[Number])],t.prototype,"rows",null),Object(i.c)([c(!0),Object(i.e)("design:type",Number),Object(i.e)("design:paramtypes",[])],t.prototype,"widgetOrder",null),t}()},"5pw5":function(t,e,n){"use strict";n.d(e,"a",(function(){return x}));var i=n("mrSG"),a=n("fXoL"),r=n("0IaG"),o=n("XOa3"),s=n("gmuX"),l=n("jCow"),c=n("l7P3"),d=n("tyNb"),p=n("/t3+"),u=n("sYmb"),m=n("XiUz"),f=n("bTqV"),h=n("NFeN"),g=n("znSr"),y=n("ofXK"),b=["actionDataEditor"],v=["failureDetailsEditor"],x=function(t){function e(e,n,i,a,r){var o=t.call(this,e,n,a)||this;return o.store=e,o.router=n,o.data=i,o.dialogRef=a,o.renderer=r,o}return Object(i.d)(e,t),e.prototype.ngOnInit=function(){this.auditLog=this.data.auditLog,this.displayFailureDetails=this.auditLog.actionStatus===o.a.FAILURE,this.actionData=this.auditLog.actionData?JSON.stringify(this.auditLog.actionData,null,2):"",this.actionFailureDetails=this.auditLog.actionFailureDetails,this.createEditor(this.actionDataEditorElmRef,this.actionData),this.displayFailureDetails&&this.createEditor(this.failureDetailsEditorElmRef,this.actionFailureDetails)},e.prototype.createEditor=function(t,e){var n=this,a=t.nativeElement,r={mode:"ace/mode/java",theme:"ace/theme/github",showGutter:!1,showPrintMargin:!1,readOnly:!0};r=Object(i.a)(Object(i.a)({},r),{enableSnippets:!1,enableBasicAutocompletion:!1,enableLiveAutocompletion:!1}),Object(l.b)().subscribe((function(t){var i=t.edit(a,r);i.session.setUseWrapMode(!1),i.setValue(e,-1),n.updateEditorSize(a,e,i)}))},e.prototype.updateEditorSize=function(t,e,n){var i=200,a=600;if(e&&e.length>0){var r=e.split("\n");i=16*r.length+16;var o=0;r.forEach((function(t){var e=t.replace(/\t/g,"    ").replace(/\n/g,"").length;o=Math.max(o,e)})),a=8*o+16}this.renderer.setStyle(t,"minHeight",i.toString()+"px"),this.renderer.setStyle(t,"height",i.toString()+"px"),this.renderer.setStyle(t,"width",a.toString()+"px"),n.resize()},e.\u0275fac=function(t){return new(t||e)(a["\u0275\u0275directiveInject"](c.Store),a["\u0275\u0275directiveInject"](d.Router),a["\u0275\u0275directiveInject"](r.MAT_DIALOG_DATA),a["\u0275\u0275directiveInject"](r.MatDialogRef),a["\u0275\u0275directiveInject"](a.Renderer2))},e.\u0275cmp=a["\u0275\u0275defineComponent"]({type:e,selectors:[["tb-audit-log-details-dialog"]],viewQuery:function(t,e){var n;(1&t&&(a["\u0275\u0275staticViewQuery"](b,!0),a["\u0275\u0275staticViewQuery"](v,!0)),2&t)&&(a["\u0275\u0275queryRefresh"](n=a["\u0275\u0275loadQuery"]())&&(e.actionDataEditorElmRef=n.first),a["\u0275\u0275queryRefresh"](n=a["\u0275\u0275loadQuery"]())&&(e.failureDetailsEditorElmRef=n.first))},features:[a["\u0275\u0275InheritDefinitionFeature"]],decls:22,vars:10,consts:[["color","primary"],["translate",""],["fxFlex",""],["mat-button","","mat-icon-button","","type","button",3,"mat-dialog-close"],[1,"material-icons"],["mat-dialog-content","","fxLayout","column"],["translate","",1,"tb-title","no-padding"],[1,"tb-audit-log-action-data"],["actionDataEditor",""],[2,"min-height","30px"],["translate","",1,"tb-title","no-padding",3,"fxShow"],[1,"tb-audit-log-failure-details",3,"fxShow"],["failureDetailsEditor",""],["mat-dialog-actions","","fxLayoutAlign","end center"],["mat-button","","color","primary","type","button","cdkFocusInitial","",3,"disabled","mat-dialog-close"]],template:function(t,e){1&t&&(a["\u0275\u0275elementStart"](0,"mat-toolbar",0),a["\u0275\u0275elementStart"](1,"h2",1),a["\u0275\u0275text"](2,"audit-log.audit-log-details"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](3,"span",2),a["\u0275\u0275elementStart"](4,"button",3),a["\u0275\u0275elementStart"](5,"mat-icon",4),a["\u0275\u0275text"](6,"close"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](7,"div",5),a["\u0275\u0275elementStart"](8,"label",6),a["\u0275\u0275text"](9,"audit-log.action-data"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](10,"div",7,8),a["\u0275\u0275element"](12,"span",9),a["\u0275\u0275elementStart"](13,"label",10),a["\u0275\u0275text"](14,"audit-log.failure-details"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](15,"div",11,12),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](17,"div",13),a["\u0275\u0275elementStart"](18,"button",14),a["\u0275\u0275pipe"](19,"async"),a["\u0275\u0275text"](20),a["\u0275\u0275pipe"](21,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()),2&t&&(a["\u0275\u0275advance"](4),a["\u0275\u0275property"]("mat-dialog-close",!1),a["\u0275\u0275advance"](9),a["\u0275\u0275property"]("fxShow",e.displayFailureDetails),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("fxShow",e.displayFailureDetails),a["\u0275\u0275advance"](3),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](19,6,e.isLoading$))("mat-dialog-close",!1),a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](21,8,"action.close")," "))},directives:[p.MatToolbar,u.TranslateDirective,m.b,f.MatButton,r.MatDialogClose,h.MatIcon,r.MatDialogContent,m.f,g.d,r.MatDialogActions,m.e],pipes:[y.AsyncPipe,u.TranslatePipe],styles:["[_nghost-%COMP%]   .tb-audit-log-action-data[_ngcontent-%COMP%], [_nghost-%COMP%]   .tb-audit-log-failure-details[_ngcontent-%COMP%]{width:100%;min-width:400px;height:100%;min-height:50px;border:1px solid silver}"]}),e}(s.a);!function(){a["\u0275setClassMetadata"](x,[{type:a.Component,args:[{selector:"tb-audit-log-details-dialog",templateUrl:"./audit-log-details-dialog.component.html",styleUrls:["./audit-log-details-dialog.component.scss"]}]}],(function(){return[{type:c.Store},{type:d.Router},{type:void 0,decorators:[{type:a.Inject,args:[r.MAT_DIALOG_DATA]}]},{type:r.MatDialogRef},{type:a.Renderer2}]}),{actionDataEditorElmRef:[{type:a.ViewChild,args:["actionDataEditor",{static:!0}]}],failureDetailsEditorElmRef:[{type:a.ViewChild,args:["failureDetailsEditor",{static:!0}]}]})}()},"6C3e":function(t,e,n){"use strict";n.r(e),n.d(e,"ColorPickerDialogComponent",(function(){return i.a})),n.d(e,"MaterialIconsDialogComponent",(function(){return a.a})),n.d(e,"PageComponent",(function(){return r.a})),n.d(e,"DialogComponent",(function(){return o.a})),n.d(e,"JsFuncComponent",(function(){return s.a})),n.d(e,"AlarmId",(function(){return l.a})),n.d(e,"AssetId",(function(){return d})),n.d(e,"AuditLogId",(function(){return p})),n.d(e,"CustomerId",(function(){return u.a})),n.d(e,"DashboardId",(function(){return m.a})),n.d(e,"DeviceCredentialsId",(function(){return f})),n.d(e,"DeviceId",(function(){return h})),n.d(e,"DeviceProfileId",(function(){return g.a})),n.d(e,"entityIdEquals",(function(){return y.a})),n.d(e,"EntityViewId",(function(){return b})),n.d(e,"EventId",(function(){return v})),n.d(e,"NULL_UUID",(function(){return x.a})),n.d(e,"RuleChainId",(function(){return C.a})),n.d(e,"RuleNodeId",(function(){return S})),n.d(e,"TenantId",(function(){return w.a})),n.d(e,"TenantProfileId",(function(){return E.a})),n.d(e,"UserId",(function(){return I.a})),n.d(e,"WidgetTypeId",(function(){return O.a})),n.d(e,"WidgetsBundleId",(function(){return T})),n.d(e,"emptyPageData",(function(){return M.a})),n.d(e,"MAX_SAFE_PAGE_SIZE",(function(){return F.a})),n.d(e,"defaultPageLinkSearchFunction",(function(){return F.d})),n.d(e,"sortItems",(function(){return F.e})),n.d(e,"PageLink",(function(){return F.b})),n.d(e,"TimePageLink",(function(){return F.c})),n.d(e,"Direction",(function(){return P.a})),n.d(e,"sortOrderFromString",(function(){return P.b})),n.d(e,"DataKeyType",(function(){return D.h})),n.d(e,"LatestTelemetry",(function(){return D.r})),n.d(e,"AttributeScope",(function(){return D.d})),n.d(e,"TelemetryFeature",(function(){return D.u})),n.d(e,"toTelemetryType",(function(){return D.D})),n.d(e,"telemetryTypeTranslations",(function(){return D.C})),n.d(e,"isClientSideTelemetryType",(function(){return D.z})),n.d(e,"DataSortOrder",(function(){return D.i})),n.d(e,"SubscriptionCmd",(function(){return D.s})),n.d(e,"AttributesSubscriptionCmd",(function(){return D.e})),n.d(e,"TimeseriesSubscriptionCmd",(function(){return D.x})),n.d(e,"GetHistoryCmd",(function(){return D.q})),n.d(e,"EntityDataCmd",(function(){return D.n})),n.d(e,"EntityCountCmd",(function(){return D.k})),n.d(e,"AlarmDataCmd",(function(){return D.a})),n.d(e,"EntityDataUnsubscribeCmd",(function(){return D.o})),n.d(e,"EntityCountUnsubscribeCmd",(function(){return D.l})),n.d(e,"AlarmDataUnsubscribeCmd",(function(){return D.b})),n.d(e,"TelemetryPluginCmdsWrapper",(function(){return D.v})),n.d(e,"CmdUpdateType",(function(){return D.g})),n.d(e,"isEntityDataUpdateMsg",(function(){return D.B})),n.d(e,"isAlarmDataUpdateMsg",(function(){return D.y})),n.d(e,"isEntityCountUpdateMsg",(function(){return D.A})),n.d(e,"SubscriptionUpdate",(function(){return D.t})),n.d(e,"CmdUpdate",(function(){return D.f})),n.d(e,"DataUpdate",(function(){return D.j})),n.d(e,"EntityDataUpdate",(function(){return D.p})),n.d(e,"AlarmDataUpdate",(function(){return D.c})),n.d(e,"EntityCountUpdate",(function(){return D.m})),n.d(e,"TelemetrySubscriber",(function(){return D.w})),n.d(e,"SECOND",(function(){return k.i})),n.d(e,"MINUTE",(function(){return k.e})),n.d(e,"HOUR",(function(){return k.c})),n.d(e,"DAY",(function(){return k.b})),n.d(e,"WEEK",(function(){return k.l})),n.d(e,"YEAR",(function(){return k.m})),n.d(e,"TimewindowType",(function(){return k.k})),n.d(e,"RealtimeWindowType",(function(){return k.h})),n.d(e,"HistoryWindowType",(function(){return k.d})),n.d(e,"AggregationType",(function(){return k.a})),n.d(e,"aggregationTranslations",(function(){return k.n})),n.d(e,"QuickTimeInterval",(function(){return k.f})),n.d(e,"QuickTimeIntervalTranslationMap",(function(){return k.g})),n.d(e,"historyInterval",(function(){return k.H})),n.d(e,"defaultTimewindow",(function(){return k.y})),n.d(e,"initModelFromDefaultTimewindow",(function(){return k.I})),n.d(e,"toHistoryTimewindow",(function(){return k.N})),n.d(e,"timewindowTypeChanged",(function(){return k.M})),n.d(e,"calculateTsOffset",(function(){return k.t})),n.d(e,"isHistoryTypeTimewindow",(function(){return k.J})),n.d(e,"createSubscriptionTimewindow",(function(){return k.v})),n.d(e,"calculateIntervalStartEndTime",(function(){return k.r})),n.d(e,"calculateIntervalStartTime",(function(){return k.s})),n.d(e,"calculateIntervalEndTime",(function(){return k.q})),n.d(e,"quickTimeIntervalPeriod",(function(){return k.K})),n.d(e,"calculateIntervalComparisonStartTime",(function(){return k.p})),n.d(e,"calculateIntervalComparisonEndTime",(function(){return k.o})),n.d(e,"createTimewindowForComparison",(function(){return k.w})),n.d(e,"cloneSelectedTimewindow",(function(){return k.u})),n.d(e,"defaultTimeIntervals",(function(){return k.x})),n.d(e,"TimeUnit",(function(){return k.j})),n.d(e,"timeUnitTranslationMap",(function(){return k.L})),n.d(e,"getTimezones",(function(){return k.G})),n.d(e,"getTimezoneInfo",(function(){return k.F})),n.d(e,"getDefaultTimezoneInfo",(function(){return k.C})),n.d(e,"getDefaultTimezone",(function(){return k.B})),n.d(e,"getCurrentTime",(function(){return k.z})),n.d(e,"getTime",(function(){return k.D})),n.d(e,"getTimezone",(function(){return k.E})),n.d(e,"getCurrentTimeForComparison",(function(){return k.A})),n.d(e,"AlarmSeverity",(function(){return j.c})),n.d(e,"AlarmStatus",(function(){return j.d})),n.d(e,"AlarmSearchStatus",(function(){return j.b})),n.d(e,"alarmSeverityTranslations",(function(){return j.h})),n.d(e,"alarmStatusTranslations",(function(){return j.i})),n.d(e,"alarmSearchStatusTranslations",(function(){return j.f})),n.d(e,"alarmSeverityColors",(function(){return j.g})),n.d(e,"simulatedAlarm",(function(){return j.j})),n.d(e,"alarmFields",(function(){return j.e})),n.d(e,"AlarmQuery",(function(){return j.a})),n.d(e,"AliasFilterType",(function(){return A.a})),n.d(e,"aliasFilterTypeTranslationMap",(function(){return A.b})),n.d(e,"AuditLogMode",(function(){return _.c})),n.d(e,"ActionType",(function(){return _.b})),n.d(e,"ActionStatus",(function(){return _.a})),n.d(e,"actionTypeTranslations",(function(){return _.e})),n.d(e,"actionStatusTranslations",(function(){return _.d})),n.d(e,"Authority",(function(){return L.a})),n.d(e,"ComponentType",(function(){return V.b})),n.d(e,"ComponentScope",(function(){return V.a})),n.d(e,"Constants",(function(){return R.a})),n.d(e,"MediaBreakpoints",(function(){return R.e})),n.d(e,"HelpLinks",(function(){return R.c})),n.d(e,"ValueType",(function(){return R.f})),n.d(e,"valueTypesMap",(function(){return R.j})),n.d(e,"ContentType",(function(){return R.b})),n.d(e,"contentTypesMap",(function(){return R.g})),n.d(e,"customTranslationsPrefix",(function(){return R.h})),n.d(e,"i18nPrefix",(function(){return R.i})),n.d(e,"MODULES_MAP",(function(){return R.d})),n.d(e,"isPublicDashboard",(function(){return N.c})),n.d(e,"getDashboardAssignedCustomersText",(function(){return N.a})),n.d(e,"isCurrentPublicDashboardCustomer",(function(){return N.b})),n.d(e,"DeviceProfileType",(function(){return G.h})),n.d(e,"DeviceTransportType",(function(){return G.j})),n.d(e,"TransportPayloadType",(function(){return G.k})),n.d(e,"CoapTransportDeviceType",(function(){return G.f})),n.d(e,"DeviceProvisionType",(function(){return G.i})),n.d(e,"deviceProfileTypeTranslationMap",(function(){return G.x})),n.d(e,"deviceProfileTypeConfigurationInfoMap",(function(){return G.w})),n.d(e,"deviceTransportTypeTranslationMap",(function(){return G.B})),n.d(e,"deviceProvisionTypeTranslationMap",(function(){return G.y})),n.d(e,"deviceTransportTypeHintMap",(function(){return G.A})),n.d(e,"transportPayloadTypeTranslationMap",(function(){return G.F})),n.d(e,"defaultTelemetrySchema",(function(){return G.u})),n.d(e,"defaultAttributesSchema",(function(){return G.t})),n.d(e,"coapDeviceTypeTranslationMap",(function(){return G.m})),n.d(e,"deviceTransportTypeConfigurationInfoMap",(function(){return G.z})),n.d(e,"createDeviceProfileConfiguration",(function(){return G.o})),n.d(e,"createDeviceConfiguration",(function(){return G.n})),n.d(e,"createDeviceProfileTransportConfiguration",(function(){return G.p})),n.d(e,"createDeviceTransportConfiguration",(function(){return G.q})),n.d(e,"AlarmConditionType",(function(){return G.a})),n.d(e,"AlarmConditionTypeTranslationMap",(function(){return G.b})),n.d(e,"AlarmScheduleType",(function(){return G.c})),n.d(e,"AlarmScheduleTypeTranslationMap",(function(){return G.d})),n.d(e,"alarmRuleValidator",(function(){return G.l})),n.d(e,"deviceProfileAlarmValidator",(function(){return G.v})),n.d(e,"DeviceCredentialsType",(function(){return G.g})),n.d(e,"credentialTypeNames",(function(){return G.r})),n.d(e,"ClaimResponse",(function(){return G.e})),n.d(e,"dayOfWeekTranslations",(function(){return G.s})),n.d(e,"getDayString",(function(){return G.D})),n.d(e,"timeOfDayToUTCTimestamp",(function(){return G.E})),n.d(e,"utcTimestampToTimeOfDay",(function(){return G.G})),n.d(e,"getAlarmScheduleRangeText",(function(){return G.C})),n.d(e,"entityFields",(function(){return B.a})),n.d(e,"EntityType",(function(){return c.b})),n.d(e,"AliasEntityType",(function(){return c.a})),n.d(e,"entityTypeTranslations",(function(){return c.d})),n.d(e,"entityTypeResources",(function(){return c.c})),n.d(e,"EventType",(function(){return U.b})),n.d(e,"DebugEventType",(function(){return U.a})),n.d(e,"eventTypeTranslations",(function(){return U.c})),n.d(e,"materialColorPalette",(function(){return q.a})),n.d(e,"materialColors",(function(){return q.b})),n.d(e,"DomainSchema",(function(){return W.b})),n.d(e,"domainSchemaTranslations",(function(){return W.e})),n.d(e,"MapperConfigType",(function(){return W.c})),n.d(e,"TenantNameStrategy",(function(){return W.d})),n.d(e,"ClientAuthenticationMethod",(function(){return W.a})),n.d(e,"ServiceType",(function(){return z.a})),n.d(e,"CONTAINS_TYPE",(function(){return K.a})),n.d(e,"MANAGES_TYPE",(function(){return K.c})),n.d(e,"RelationTypes",(function(){return K.e})),n.d(e,"RelationTypeGroup",(function(){return K.d})),n.d(e,"EntitySearchDirection",(function(){return K.b})),n.d(e,"entitySearchDirectionTranslations",(function(){return K.g})),n.d(e,"directionTypeTranslations",(function(){return K.f})),n.d(e,"ruleNodeTypeComponentTypes",(function(){return H.c})),n.d(e,"ruleChainNodeComponent",(function(){return H.b})),n.d(e,"unknownNodeComponent",(function(){return H.d})),n.d(e,"inputNodeComponent",(function(){return H.a})),n.d(e,"RuleNodeConfigurationComponent",(function(){return $.b})),n.d(e,"RuleNodeType",(function(){return $.c})),n.d(e,"ruleNodeTypesLibrary",(function(){return $.g})),n.d(e,"ruleNodeTypeDescriptors",(function(){return $.f})),n.d(e,"MessageType",(function(){return $.a})),n.d(e,"messageTypeNames",(function(){return $.e})),n.d(e,"getRuleNodeHelpLink",(function(){return $.d})),n.d(e,"smtpPortPattern",(function(){return Q.g})),n.d(e,"phoneNumberPattern",(function(){return Q.c})),n.d(e,"phoneNumberPatternTwilio",(function(){return Q.d})),n.d(e,"SmsProviderType",(function(){return Q.a})),n.d(e,"smsProviderTypeTranslationMap",(function(){return Q.f})),n.d(e,"smsProviderConfigurationValidator",(function(){return Q.e})),n.d(e,"createSmsProviderConfiguration",(function(){return Q.b})),n.d(e,"TenantProfileType",(function(){return X.a})),n.d(e,"createTenantProfileConfiguration",(function(){return X.b})),n.d(e,"ActivationMethod",(function(){return Y.a})),n.d(e,"activationMethodTranslations",(function(){return Y.b})),n.d(e,"widgetType",(function(){return J.k})),n.d(e,"widgetTypesData",(function(){return J.l})),n.d(e,"widgetActionSources",(function(){return J.i})),n.d(e,"LegendDirection",(function(){return J.b})),n.d(e,"legendDirectionTranslationMap",(function(){return J.g})),n.d(e,"LegendPosition",(function(){return J.c})),n.d(e,"legendPositionTranslationMap",(function(){return J.h})),n.d(e,"defaultLegendConfig",(function(){return J.f})),n.d(e,"DatasourceType",(function(){return J.a})),n.d(e,"datasourceTypeTranslationMap",(function(){return J.e})),n.d(e,"WidgetActionType",(function(){return J.d})),n.d(e,"widgetActionTypeTranslationMap",(function(){return J.j})),n.d(e,"EnumToArrayPipe",(function(){return Z.a})),n.d(e,"HighlightPipe",(function(){return tt.a})),n.d(e,"KeyboardShortcutPipe",(function(){return et.a})),n.d(e,"MillisecondsToTimeStringPipe",(function(){return nt.a})),n.d(e,"NospacePipe",(function(){return it.a})),n.d(e,"TruncatePipe",(function(){return at.a})),n.d(e,"FileSizePipe",(function(){return rt.a})),n.d(e,"SelectableColumnsPipe",(function(){return ot.a})),n.d(e,"SharedModule",(function(){return st.a}));var i=n("VYz+"),a=n("SReA"),r=n("RxGS"),o=n("gmuX"),s=n("yAAm"),l=n("WZ6u"),c=n("U3y+"),d=function(t){this.entityType=c.b.ASSET,this.id=t},p=function(t){this.id=t},u=n("8Mhd"),m=n("YjEJ"),f=function(t){this.id=t},h=function(t){this.entityType=c.b.DEVICE,this.id=t},g=n("zkya"),y=n("WeLn"),b=function(t){this.entityType=c.b.ENTITY_VIEW,this.id=t},v=function(t){this.id=t},x=n("oKkZ"),C=n("APwO"),S=function(t){this.entityType=c.b.RULE_NODE,this.id=t},w=n("KMMH"),E=n("XW0v"),I=n("/Bgp"),O=n("do/i"),T=function(t){this.entityType=c.b.WIDGETS_BUNDLE,this.id=t},M=n("Duvn"),F=n("mbhL"),P=n("4r/P"),D=n("3Tyt"),k=n("aX2P"),j=n("UZbx"),A=n("MBk6"),_=n("XOa3"),L=n("zp9Z"),V=n("3Zdl"),R=n("he9t"),N=n("IktG"),G=n("JIJk"),B=n("6OOC"),U=n("90vD"),q=n("7dgu"),W=n("PGJw"),z=n("/3Pq"),K=n("7JTo"),H=n("8km5"),$=n("+5dr"),Q=n("c1Lj"),X=n("NEMC"),Y=n("KJJU"),J=n("0lYY"),Z=n("fjw6"),tt=n("d5eY"),et=n("EbnC"),nt=n("z36O"),it=n("Ki3a"),at=n("T4sd"),rt=n("9DSm"),ot=n("uKK+"),st=n("PCNd")},"6opy":function(t,e,n){"use strict";n.d(e,"a",(function(){return b}));var i=n("mrSG"),a=n("fXoL"),r=n("gmuX"),o=n("l7P3"),s=n("tyNb"),l=n("0IaG"),c=n("3Pt+"),d=n("/t3+"),p=n("sYmb"),u=n("XiUz"),m=n("bTqV"),f=n("NFeN"),h=n("ofXK"),g=n("bv9b");function y(t,e){1&t&&a["\u0275\u0275element"](0,"mat-progress-bar",10)}var b=function(t){function e(e,n,i){var a=t.call(this,e,n,i)||this;return a.store=e,a.router=n,a.dialogRef=i,a}return Object(i.d)(e,t),e.prototype.ngOnInit=function(){},e.prototype.selectLayout=function(t){this.dialogRef.close(t)},e.prototype.cancel=function(){this.dialogRef.close(null)},e.\u0275fac=function(t){return new(t||e)(a["\u0275\u0275directiveInject"](o.Store),a["\u0275\u0275directiveInject"](s.Router),a["\u0275\u0275directiveInject"](l.MatDialogRef))},e.\u0275cmp=a["\u0275\u0275defineComponent"]({type:e,selectors:[["tb-select-target-layout-dialog"]],features:[a["\u0275\u0275InheritDefinitionFeature"]],decls:20,vars:6,consts:[["color","primary"],["translate",""],["fxFlex",""],["mat-icon-button","","type","button",3,"click"],[1,"material-icons"],["color","warn","mode","indeterminate",4,"ngIf"],["mat-dialog-content",""],["fxLayout","column","fxLayoutGap","8px",3,"disabled"],["fxLayout","row","fxLayoutAlign","start center","fxLayoutGap","8px"],["fxFlex","","mat-raised-button","","color","primary","type","button",1,"tb-layout-button",3,"click"],["color","warn","mode","indeterminate"]],template:function(t,e){1&t&&(a["\u0275\u0275elementStart"](0,"form"),a["\u0275\u0275elementStart"](1,"mat-toolbar",0),a["\u0275\u0275elementStart"](2,"h2",1),a["\u0275\u0275text"](3,"layout.select"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](4,"span",2),a["\u0275\u0275elementStart"](5,"button",3),a["\u0275\u0275listener"]("click",(function(){return e.cancel()})),a["\u0275\u0275elementStart"](6,"mat-icon",4),a["\u0275\u0275text"](7,"close"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275template"](8,y,1,0,"mat-progress-bar",5),a["\u0275\u0275pipe"](9,"async"),a["\u0275\u0275elementStart"](10,"div",6),a["\u0275\u0275elementStart"](11,"fieldset",7),a["\u0275\u0275pipe"](12,"async"),a["\u0275\u0275elementStart"](13,"div",8),a["\u0275\u0275elementStart"](14,"button",9),a["\u0275\u0275listener"]("click",(function(){return e.selectLayout("main")})),a["\u0275\u0275elementStart"](15,"span",1),a["\u0275\u0275text"](16,"layout.main"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](17,"button",9),a["\u0275\u0275listener"]("click",(function(){return e.selectLayout("right")})),a["\u0275\u0275elementStart"](18,"span",1),a["\u0275\u0275text"](19,"layout.right"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()),2&t&&(a["\u0275\u0275advance"](8),a["\u0275\u0275property"]("ngIf",a["\u0275\u0275pipeBind1"](9,2,e.isLoading$)),a["\u0275\u0275advance"](3),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](12,4,e.isLoading$)))},directives:[c["\u0275angular_packages_forms_forms_y"],c.NgControlStatusGroup,c.NgForm,d.MatToolbar,p.TranslateDirective,u.b,m.MatButton,f.MatIcon,h.NgIf,l.MatDialogContent,u.f,u.g,u.e,g.MatProgressBar],pipes:[h.AsyncPipe],styles:["[_nghost-%COMP%]   button.tb-layout-button[_ngcontent-%COMP%]{width:100%;height:100%;padding:40px 20px}[_nghost-%COMP%]  .mat-button-wrapper{line-height:18px}[_nghost-%COMP%]  .mat-button-wrapper span{font-size:18px;font-weight:400;white-space:normal}"]}),e}(r.a);!function(){a["\u0275setClassMetadata"](b,[{type:a.Component,args:[{selector:"tb-select-target-layout-dialog",templateUrl:"./select-target-layout-dialog.component.html",styleUrls:["./layout-button.scss"]}]}],(function(){return[{type:o.Store},{type:s.Router},{type:l.MatDialogRef}]}),null)}()},"6oqA":function(t,e,n){"use strict";n.d(e,"a",(function(){return w}));var i=n("mrSG"),a=n("fXoL"),r=n("FKr1"),o=n("0IaG"),s=n("gmuX"),l=n("ec17"),c=n("g+M/"),d=n("l7P3"),p=n("tyNb"),u=n("3Pt+"),m=n("/t3+"),f=n("XiUz"),h=n("bTqV"),g=n("NFeN"),y=n("ofXK"),b=n("bv9b"),v=n("sYmb"),x=["deviceProfileComponent"];function C(t,e){1&t&&a["\u0275\u0275element"](0,"mat-progress-bar",13)}function S(t,e){1&t&&a["\u0275\u0275element"](0,"div",14)}var w=function(t){function e(e,n,i,a,r,o,s,l){var c=t.call(this,e,n,a)||this;return c.store=e,c.router=n,c.data=i,c.dialogRef=a,c.componentFactoryResolver=r,c.injector=o,c.errorStateMatcher=s,c.deviceProfileService=l,c.submitted=!1,c.isAdd=c.data.isAdd,c.deviceProfile=c.data.deviceProfile,c}return Object(i.d)(e,t),e.prototype.ngAfterViewInit=function(){var t=this;this.isAdd&&setTimeout((function(){t.deviceProfileComponent.entityForm.markAsDirty()}),0)},e.prototype.isErrorState=function(t,e){var n=this.errorStateMatcher.isErrorState(t,e),i=!!(t&&t.invalid&&this.submitted);return n||i},e.prototype.cancel=function(){this.dialogRef.close(null)},e.prototype.save=function(){var t=this;this.submitted=!0,this.deviceProfileComponent.entityForm.valid&&(this.deviceProfile=Object(i.a)(Object(i.a)({},this.deviceProfile),this.deviceProfileComponent.entityFormValue()),this.deviceProfileService.saveDeviceProfile(this.deviceProfile).subscribe((function(e){t.dialogRef.close(e)})))},e.\u0275fac=function(t){return new(t||e)(a["\u0275\u0275directiveInject"](d.Store),a["\u0275\u0275directiveInject"](p.Router),a["\u0275\u0275directiveInject"](o.MAT_DIALOG_DATA),a["\u0275\u0275directiveInject"](o.MatDialogRef),a["\u0275\u0275directiveInject"](a.ComponentFactoryResolver),a["\u0275\u0275directiveInject"](a.Injector),a["\u0275\u0275directiveInject"](r.ErrorStateMatcher,4),a["\u0275\u0275directiveInject"](c.a))},e.\u0275cmp=a["\u0275\u0275defineComponent"]({type:e,selectors:[["tb-device-profile-dialog"]],viewQuery:function(t,e){var n;(1&t&&a["\u0275\u0275staticViewQuery"](x,!0),2&t)&&(a["\u0275\u0275queryRefresh"](n=a["\u0275\u0275loadQuery"]())&&(e.deviceProfileComponent=n.first))},features:[a["\u0275\u0275ProvidersFeature"]([{provide:r.ErrorStateMatcher,useExisting:e}]),a["\u0275\u0275InheritDefinitionFeature"]],decls:25,vars:24,consts:[[2,"width","1000px",3,"ngSubmit"],["color","primary"],["fxFlex",""],["mat-icon-button","","type","button",3,"click"],[1,"material-icons"],["color","warn","mode","indeterminate",4,"ngIf"],["style","height: 4px;",4,"ngIf"],["mat-dialog-content",""],[3,"standalone","entity","isEdit"],["deviceProfileComponent",""],["mat-dialog-actions","","fxLayoutAlign","end center"],["mat-button","","color","primary","type","button","cdkFocusInitial","",3,"disabled","click"],["mat-raised-button","","color","primary","type","submit",3,"disabled"],["color","warn","mode","indeterminate"],[2,"height","4px"]],template:function(t,e){if(1&t&&(a["\u0275\u0275elementStart"](0,"form",0),a["\u0275\u0275listener"]("ngSubmit",(function(){return e.save()})),a["\u0275\u0275elementStart"](1,"mat-toolbar",1),a["\u0275\u0275elementStart"](2,"h2"),a["\u0275\u0275text"](3),a["\u0275\u0275pipe"](4,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](5,"span",2),a["\u0275\u0275elementStart"](6,"button",3),a["\u0275\u0275listener"]("click",(function(){return e.cancel()})),a["\u0275\u0275elementStart"](7,"mat-icon",4),a["\u0275\u0275text"](8,"close"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275template"](9,C,1,0,"mat-progress-bar",5),a["\u0275\u0275pipe"](10,"async"),a["\u0275\u0275template"](11,S,1,0,"div",6),a["\u0275\u0275pipe"](12,"async"),a["\u0275\u0275elementStart"](13,"div",7),a["\u0275\u0275element"](14,"tb-device-profile",8,9),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](16,"div",10),a["\u0275\u0275elementStart"](17,"button",11),a["\u0275\u0275listener"]("click",(function(){return e.cancel()})),a["\u0275\u0275pipe"](18,"async"),a["\u0275\u0275text"](19),a["\u0275\u0275pipe"](20,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](21,"button",12),a["\u0275\u0275pipe"](22,"async"),a["\u0275\u0275text"](23),a["\u0275\u0275pipe"](24,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()),2&t){var n=a["\u0275\u0275reference"](15);a["\u0275\u0275advance"](3),a["\u0275\u0275textInterpolate"](a["\u0275\u0275pipeBind1"](4,10,e.isAdd?"device-profile.add":"device-profile.edit")),a["\u0275\u0275advance"](6),a["\u0275\u0275property"]("ngIf",a["\u0275\u0275pipeBind1"](10,12,e.isLoading$)),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("ngIf",!a["\u0275\u0275pipeBind1"](12,14,e.isLoading$)),a["\u0275\u0275advance"](3),a["\u0275\u0275property"]("standalone",!0)("entity",e.deviceProfile)("isEdit",!0),a["\u0275\u0275advance"](3),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](18,16,e.isLoading$)),a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](20,18,"action.cancel")," "),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](22,20,e.isLoading$)||(null==n.entityForm?null:n.entityForm.invalid)||!(null!=n.entityForm&&n.entityForm.dirty)),a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](24,22,e.isAdd?"action.add":"action.save")," ")}},directives:[u["\u0275angular_packages_forms_forms_y"],u.NgControlStatusGroup,u.NgForm,m.MatToolbar,f.b,h.MatButton,g.MatIcon,y.NgIf,o.MatDialogContent,l.a,o.MatDialogActions,f.e,b.MatProgressBar],pipes:[v.TranslatePipe,y.AsyncPipe],encapsulation:2}),e}(s.a);!function(){a["\u0275setClassMetadata"](w,[{type:a.Component,args:[{selector:"tb-device-profile-dialog",templateUrl:"./device-profile-dialog.component.html",providers:[{provide:r.ErrorStateMatcher,useExisting:w}],styleUrls:[]}]}],(function(){return[{type:d.Store},{type:p.Router},{type:void 0,decorators:[{type:a.Inject,args:[o.MAT_DIALOG_DATA]}]},{type:o.MatDialogRef},{type:a.ComponentFactoryResolver},{type:a.Injector},{type:r.ErrorStateMatcher,decorators:[{type:a.SkipSelf}]},{type:c.a}]}),{deviceProfileComponent:[{type:a.ViewChild,args:["deviceProfileComponent",{static:!0}]}]})}()},"7ZKe":function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var i=n("fXoL"),a=n("Y8nr"),r=n("OiFK"),o=n("tk/3"),s=function(){function t(t,e){this.http=t,this.utils=e}return t.prototype.getAlarm=function(t,e){return this.http.get("/api/alarm/"+t,Object(a.b)(e))},t.prototype.getAlarmInfo=function(t,e){return this.http.get("/api/alarm/info/"+t,Object(a.b)(e))},t.prototype.saveAlarm=function(t,e){return this.http.post("/api/alarm",t,Object(a.b)(e))},t.prototype.ackAlarm=function(t,e){return this.http.post("/api/alarm/"+t+"/ack",null,Object(a.b)(e))},t.prototype.clearAlarm=function(t,e){return this.http.post("/api/alarm/"+t+"/clear",null,Object(a.b)(e))},t.prototype.deleteAlarm=function(t,e){return this.http.delete("/api/alarm/"+t,Object(a.b)(e))},t.prototype.getAlarms=function(t,e){return this.http.get("/api/alarm"+t.toQuery(),Object(a.b)(e))},t.prototype.getHighestAlarmSeverity=function(t,e,n,i){var r="/api/alarm/highestSeverity/"+t.entityType+"/"+t.entityType;return e?r+="?searchStatus="+e:n&&(r+="?status="+n),this.http.get(r,Object(a.b)(i))},t.\u0275fac=function(e){return new(e||t)(i["\u0275\u0275inject"](o.b),i["\u0275\u0275inject"](r.a))},t.\u0275prov=i["\u0275\u0275defineInjectable"]({token:t,factory:t.\u0275fac,providedIn:"root"}),t}();!function(){i["\u0275setClassMetadata"](s,[{type:i.Injectable,args:[{providedIn:"root"}]}],(function(){return[{type:o.b},{type:r.a}]}),null)}()},"8Mhd":function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var i=n("U3y+"),a=function(t){this.entityType=i.b.CUSTOMER,this.id=t}},"8yrD":function(t,e,n){"use strict";n.d(e,"a",(function(){return g}));var i=n("fXoL"),a=n("3Pt+"),r=n("8LU1"),o=n("JIJk"),s=n("//Q6"),l=n("l7P3"),c=n("ofXK"),d=n("QTrg"),p=n("Tu+t"),u=n("nc6G");function m(t,e){if(1&t&&i["\u0275\u0275element"](0,"tb-default-device-profile-transport-configuration",3),2&t){var n=i["\u0275\u0275nextContext"]();i["\u0275\u0275property"]("required",n.required)}}function f(t,e){if(1&t&&i["\u0275\u0275element"](0,"tb-mqtt-device-profile-transport-configuration",3),2&t){var n=i["\u0275\u0275nextContext"]();i["\u0275\u0275property"]("required",n.required)}}function h(t,e){if(1&t&&i["\u0275\u0275element"](0,"tb-coap-device-profile-transport-configuration",3),2&t){var n=i["\u0275\u0275nextContext"]();i["\u0275\u0275property"]("required",n.required)}}var g=function(){function t(t,e){this.store=t,this.fb=e,this.deviceTransportType=o.j,this.propagateChange=function(t){}}return Object.defineProperty(t.prototype,"required",{get:function(){return this.requiredValue},set:function(t){this.requiredValue=Object(r.coerceBooleanProperty)(t)},enumerable:!1,configurable:!0}),t.prototype.registerOnChange=function(t){this.propagateChange=t},t.prototype.registerOnTouched=function(t){},t.prototype.ngOnInit=function(){var t=this;this.deviceProfileTransportConfigurationFormGroup=this.fb.group({configuration:[null,a.Validators.required]}),this.deviceProfileTransportConfigurationFormGroup.valueChanges.subscribe((function(){t.updateModel()}))},t.prototype.setDisabledState=function(t){this.disabled=t,this.disabled?this.deviceProfileTransportConfigurationFormGroup.disable({emitEvent:!1}):this.deviceProfileTransportConfigurationFormGroup.enable({emitEvent:!1})},t.prototype.writeValue=function(t){this.transportType=null==t?void 0:t.type;var e=Object(s.e)(t);e&&delete e.type,this.deviceProfileTransportConfigurationFormGroup.patchValue({configuration:e},{emitEvent:!1})},t.prototype.updateModel=function(){var t=null;this.deviceProfileTransportConfigurationFormGroup.valid&&((t=this.deviceProfileTransportConfigurationFormGroup.getRawValue().configuration).type=this.transportType),this.propagateChange(t)},t.\u0275fac=function(e){return new(e||t)(i["\u0275\u0275directiveInject"](l.Store),i["\u0275\u0275directiveInject"](a.FormBuilder))},t.\u0275cmp=i["\u0275\u0275defineComponent"]({type:t,selectors:[["tb-device-profile-transport-configuration"]],inputs:{required:"required",disabled:"disabled"},features:[i["\u0275\u0275ProvidersFeature"]([{provide:a.NG_VALUE_ACCESSOR,useExisting:Object(i.forwardRef)((function(){return t})),multi:!0}])],decls:5,vars:5,consts:[[3,"formGroup"],[3,"ngSwitch"],[3,"ngSwitchCase"],["formControlName","configuration",3,"required"]],template:function(t,e){1&t&&(i["\u0275\u0275elementStart"](0,"div",0),i["\u0275\u0275elementStart"](1,"div",1),i["\u0275\u0275template"](2,m,1,1,"ng-template",2),i["\u0275\u0275template"](3,f,1,1,"ng-template",2),i["\u0275\u0275template"](4,h,1,1,"ng-template",2),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()),2&t&&(i["\u0275\u0275property"]("formGroup",e.deviceProfileTransportConfigurationFormGroup),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngSwitch",e.transportType),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngSwitchCase",e.deviceTransportType.DEFAULT),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngSwitchCase",e.deviceTransportType.MQTT),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngSwitchCase",e.deviceTransportType.COAP))},directives:[a.NgControlStatusGroup,a.FormGroupDirective,c.NgSwitch,c.NgSwitchCase,d.a,a.NgControlStatus,a.FormControlName,a.RequiredValidator,p.a,u.a],encapsulation:2}),t}();!function(){i["\u0275setClassMetadata"](g,[{type:i.Component,args:[{selector:"tb-device-profile-transport-configuration",templateUrl:"./device-profile-transport-configuration.component.html",styleUrls:[],providers:[{provide:a.NG_VALUE_ACCESSOR,useExisting:Object(i.forwardRef)((function(){return g})),multi:!0}]}]}],(function(){return[{type:l.Store},{type:a.FormBuilder}]}),{required:[{type:i.Input}],disabled:[{type:i.Input}]})}()},"90vD":function(t,e,n){"use strict";var i,a;n.d(e,"b",(function(){return i})),n.d(e,"a",(function(){return a})),n.d(e,"c",(function(){return r})),function(t){t.ERROR="ERROR",t.LC_EVENT="LC_EVENT",t.STATS="STATS"}(i||(i={})),function(t){t.DEBUG_RULE_NODE="DEBUG_RULE_NODE",t.DEBUG_RULE_CHAIN="DEBUG_RULE_CHAIN"}(a||(a={}));var r=new Map([[i.ERROR,"event.type-error"],[i.LC_EVENT,"event.type-lc-event"],[i.STATS,"event.type-stats"],[a.DEBUG_RULE_NODE,"event.type-debug-rule-node"],[a.DEBUG_RULE_CHAIN,"event.type-debug-rule-chain"]])},"91qg":function(t,e,n){"use strict";n.d(e,"a",(function(){return f}));var i=n("fXoL"),a=n("3Pt+"),r=(n("xw5a"),n("ct/f")),o=n("//Q6"),s=n("0IaG"),l=n("XiUz"),c=n("kmnG"),d=n("sYmb"),p=n("bTqV"),u=n("Qu3c"),m=n("NFeN"),f=function(){function t(t){this.dialog=t,this.displayUserParameters=!0,this.allowUserDynamicSource=!0,this.onlyUserDynamicSource=!1,this.propagateChange=null}return t.prototype.ngOnInit=function(){},t.prototype.registerOnChange=function(t){this.propagateChange=t},t.prototype.registerOnTouched=function(t){},t.prototype.setDisabledState=function(t){this.disabled=t},t.prototype.writeValue=function(t){this.complexFilterPredicate=t},t.prototype.openComplexFilterDialog=function(){var t=this;this.dialog.open(r.a,{disableClose:!0,panelClass:["tb-dialog","tb-fullscreen-dialog"],data:{complexPredicate:this.disabled?this.complexFilterPredicate:Object(o.e)(this.complexFilterPredicate),readonly:this.disabled,valueType:this.valueType,isAdd:!1,key:this.key,displayUserParameters:this.displayUserParameters,allowUserDynamicSource:this.allowUserDynamicSource,onlyUserDynamicSource:this.onlyUserDynamicSource}}).afterClosed().subscribe((function(e){e&&(t.complexFilterPredicate=e,t.updateModel())}))},t.prototype.updateModel=function(){this.propagateChange(this.complexFilterPredicate)},t.\u0275fac=function(e){return new(e||t)(i["\u0275\u0275directiveInject"](s.MatDialog))},t.\u0275cmp=i["\u0275\u0275defineComponent"]({type:t,selectors:[["tb-complex-filter-predicate"]],inputs:{disabled:"disabled",valueType:"valueType",key:"key",displayUserParameters:"displayUserParameters",allowUserDynamicSource:"allowUserDynamicSource",onlyUserDynamicSource:"onlyUserDynamicSource"},features:[i["\u0275\u0275ProvidersFeature"]([{provide:a.NG_VALUE_ACCESSOR,useExisting:Object(i.forwardRef)((function(){return t})),multi:!0}])],decls:7,vars:4,consts:[["fxFlex","","fxLayout","row","fxLayoutAlign","start center","fxLayoutGap","8px"],["translate",""],["mat-icon-button","","color","primary","type","button","matTooltipPosition","above",1,"tb-mat-32",3,"matTooltip","click"]],template:function(t,e){1&t&&(i["\u0275\u0275elementStart"](0,"div",0),i["\u0275\u0275elementStart"](1,"mat-label",1),i["\u0275\u0275text"](2,"filter.complex-filter"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](3,"button",2),i["\u0275\u0275listener"]("click",(function(){return e.openComplexFilterDialog()})),i["\u0275\u0275pipe"](4,"translate"),i["\u0275\u0275elementStart"](5,"mat-icon"),i["\u0275\u0275text"](6),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()),2&t&&(i["\u0275\u0275advance"](3),i["\u0275\u0275propertyInterpolate"]("matTooltip",i["\u0275\u0275pipeBind1"](4,2,e.disabled?"filter.complex-filter":"filter.edit-complex-filter")),i["\u0275\u0275advance"](3),i["\u0275\u0275textInterpolate"](e.disabled?"more_vert":"edit"))},directives:[l.b,l.f,l.e,l.g,c.MatLabel,d.TranslateDirective,p.MatButton,u.MatTooltip,m.MatIcon],pipes:[d.TranslatePipe],encapsulation:2}),t}();!function(){i["\u0275setClassMetadata"](f,[{type:i.Component,args:[{selector:"tb-complex-filter-predicate",templateUrl:"./complex-filter-predicate.component.html",styleUrls:[],providers:[{provide:a.NG_VALUE_ACCESSOR,useExisting:Object(i.forwardRef)((function(){return f})),multi:!0}]}]}],(function(){return[{type:s.MatDialog}]}),{disabled:[{type:i.Input}],valueType:[{type:i.Input}],key:[{type:i.Input}],displayUserParameters:[{type:i.Input}],allowUserDynamicSource:[{type:i.Input}],onlyUserDynamicSource:[{type:i.Input}]})}()},"96Yx":function(t,e,n){"use strict";n.d(e,"a",(function(){return I}));var i=n("fXoL"),a=n("3Pt+"),r=n("JIJk"),o=n("UZbx"),s=n("0IaG"),l=n("XiUz"),c=n("ofXK"),d=n("kmnG"),p=n("sYmb"),u=n("d3UM"),m=n("f0Cb"),f=n("z5iZ"),h=n("FKr1"),g=n("bTqV"),y=n("Qu3c"),b=n("NFeN");function v(t,e){if(1&t&&(i["\u0275\u0275elementStart"](0,"mat-option",12),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&t){var n=e.$implicit,a=i["\u0275\u0275nextContext"]().index,r=i["\u0275\u0275nextContext"]();i["\u0275\u0275property"]("value",n)("disabled",r.isDisabledSeverity(r.alarmSeverityEnum[n],a)),i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,3,r.alarmSeverityTranslationMap.get(r.alarmSeverityEnum[n]))," ")}}function x(t,e){1&t&&(i["\u0275\u0275elementStart"](0,"mat-error"),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&t&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,1,"device-profile.alarm-severity-required")," "))}function C(t,e){if(1&t){var n=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"button",13),i["\u0275\u0275listener"]("click",(function(){i["\u0275\u0275restoreView"](n);var t=i["\u0275\u0275nextContext"]().index;return i["\u0275\u0275nextContext"]().removeCreateAlarmRule(t)})),i["\u0275\u0275pipe"](1,"translate"),i["\u0275\u0275elementStart"](2,"mat-icon"),i["\u0275\u0275text"](3,"remove_circle_outline"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()}2&t&&i["\u0275\u0275propertyInterpolate"]("matTooltip",i["\u0275\u0275pipeBind1"](1,1,"action.remove"))}function S(t,e){if(1&t&&(i["\u0275\u0275elementStart"](0,"div",3),i["\u0275\u0275elementStart"](1,"div",4),i["\u0275\u0275elementStart"](2,"mat-form-field",5),i["\u0275\u0275elementStart"](3,"mat-label",6),i["\u0275\u0275text"](4,"alarm.severity"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](5,"mat-select",7),i["\u0275\u0275pipe"](6,"translate"),i["\u0275\u0275template"](7,v,3,5,"mat-option",8),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](8,x,3,3,"mat-error",2),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](9,"mat-divider",9),i["\u0275\u0275element"](10,"tb-alarm-rule",10),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](11,C,4,3,"button",11),i["\u0275\u0275elementEnd"]()),2&t){var n=e.$implicit,a=i["\u0275\u0275nextContext"]();i["\u0275\u0275property"]("formGroup",n),i["\u0275\u0275advance"](5),i["\u0275\u0275propertyInterpolate"]("placeholder",i["\u0275\u0275pipeBind1"](6,6,"device-profile.select-alarm-severity")),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngForOf",a.alarmSeverities),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",n.get("severity").hasError("required")),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("deviceProfileId",a.deviceProfileId),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",!a.disabled)}}function w(t,e){1&t&&(i["\u0275\u0275elementStart"](0,"div"),i["\u0275\u0275elementStart"](1,"span",14),i["\u0275\u0275text"](2,"device-profile.add-create-alarm-rule-prompt"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]())}function E(t,e){if(1&t){var n=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"div"),i["\u0275\u0275elementStart"](1,"button",15),i["\u0275\u0275listener"]("click",(function(){return i["\u0275\u0275restoreView"](n),i["\u0275\u0275nextContext"]().addCreateAlarmRule()})),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementStart"](3,"mat-icon",16),i["\u0275\u0275text"](4,"add_circle_outline"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](5),i["\u0275\u0275pipe"](6,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()}2&t&&(i["\u0275\u0275advance"](1),i["\u0275\u0275propertyInterpolate"]("matTooltip",i["\u0275\u0275pipeBind1"](2,2,"device-profile.add-create-alarm-rule")),i["\u0275\u0275advance"](4),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](6,4,"device-profile.add-create-alarm-rule")," "))}var I=function(){function t(t,e){this.dialog=t,this.fb=e,this.alarmSeverities=Object.keys(o.c),this.alarmSeverityEnum=o.c,this.alarmSeverityTranslationMap=o.h,this.usedSeverities=[],this.valueChangeSubscription=null,this.propagateChange=function(t){}}return t.prototype.registerOnChange=function(t){this.propagateChange=t},t.prototype.registerOnTouched=function(t){},t.prototype.ngOnInit=function(){this.createAlarmRulesFormGroup=this.fb.group({createAlarmRules:this.fb.array([])})},t.prototype.createAlarmRulesFormArray=function(){return this.createAlarmRulesFormGroup.get("createAlarmRules")},t.prototype.setDisabledState=function(t){this.disabled=t,this.disabled?this.createAlarmRulesFormGroup.disable({emitEvent:!1}):this.createAlarmRulesFormGroup.enable({emitEvent:!1})},t.prototype.writeValue=function(t){var e=this;this.valueChangeSubscription&&this.valueChangeSubscription.unsubscribe();var n=[];t&&Object.keys(t).forEach((function(i){var r=t[i];"empty"===i&&(i=null),n.push(e.fb.group({severity:[i,a.Validators.required],alarmRule:[r,a.Validators.required]}))})),this.createAlarmRulesFormGroup.setControl("createAlarmRules",this.fb.array(n)),this.disabled?this.createAlarmRulesFormGroup.disable({emitEvent:!1}):this.createAlarmRulesFormGroup.enable({emitEvent:!1}),this.valueChangeSubscription=this.createAlarmRulesFormGroup.valueChanges.subscribe((function(){e.updateModel()})),this.updateUsedSeverities(),this.disabled||this.createAlarmRulesFormGroup.valid||this.updateModel()},t.prototype.removeCreateAlarmRule=function(t){this.createAlarmRulesFormGroup.get("createAlarmRules").removeAt(t)},t.prototype.addCreateAlarmRule=function(){this.createAlarmRulesFormGroup.get("createAlarmRules").push(this.fb.group({severity:[this.getFirstUnusedSeverity(),a.Validators.required],alarmRule:[{condition:{condition:[]}},r.l]})),this.createAlarmRulesFormGroup.updateValueAndValidity(),this.createAlarmRulesFormGroup.valid||this.updateModel()},t.prototype.getFirstUnusedSeverity=function(){for(var t=0,e=Object.keys(o.c);t<e.length;t++){var n=e[t],i=o.c[n];if(-1===this.usedSeverities.indexOf(i))return i}return null},t.prototype.validate=function(t){return this.createAlarmRulesFormGroup.valid?null:{createAlarmRules:{valid:!1}}},t.prototype.isDisabledSeverity=function(t,e){var n=this.usedSeverities.indexOf(t);return n>-1&&n!==e},t.prototype.updateUsedSeverities=function(){var t=this;this.usedSeverities=[],this.createAlarmRulesFormGroup.get("createAlarmRules").value.forEach((function(e,n){t.usedSeverities[n]=o.c[e.severity]}))},t.prototype.updateModel=function(){var t=this.createAlarmRulesFormGroup.get("createAlarmRules").value,e={};t.forEach((function(t){e[t.severity]=t.alarmRule})),this.updateUsedSeverities(),this.propagateChange(e)},t.\u0275fac=function(e){return new(e||t)(i["\u0275\u0275directiveInject"](s.MatDialog),i["\u0275\u0275directiveInject"](a.FormBuilder))},t.\u0275cmp=i["\u0275\u0275defineComponent"]({type:t,selectors:[["tb-create-alarm-rules"]],inputs:{disabled:"disabled",deviceProfileId:"deviceProfileId"},features:[i["\u0275\u0275ProvidersFeature"]([{provide:a.NG_VALUE_ACCESSOR,useExisting:Object(i.forwardRef)((function(){return t})),multi:!0},{provide:a.NG_VALIDATORS,useExisting:Object(i.forwardRef)((function(){return t})),multi:!0}])],decls:4,vars:3,consts:[["fxFlex","","fxLayout","column"],["fxLayout","row","fxLayoutAlign","start center","fxLayoutGap","8px","style","padding-bottom: 8px;",3,"formGroup",4,"ngFor","ngForOf"],[4,"ngIf"],["fxLayout","row","fxLayoutAlign","start center","fxLayoutGap","8px",2,"padding-bottom","8px",3,"formGroup"],["fxFlex","","fxLayout","row","fxLayoutGap","8px","fxLayoutAlign","start",1,"create-alarm-rule"],["floatLabel","always","hideRequiredMarker","",1,"severity","mat-block"],["translate",""],["formControlName","severity","required","",3,"placeholder"],[3,"value","disabled",4,"ngFor","ngForOf"],["vertical",""],["formControlName","alarmRule","required","","fxFlex","",3,"deviceProfileId"],["mat-icon-button","","color","primary","style","min-width: 40px;","type","button","matTooltipPosition","above",3,"matTooltip","click",4,"ngIf"],[3,"value","disabled"],["mat-icon-button","","color","primary","type","button","matTooltipPosition","above",2,"min-width","40px",3,"matTooltip","click"],["translate","","fxLayoutAlign","center center",1,"tb-prompt","required",2,"margin","16px 0"],["mat-stroked-button","","color","primary","type","button","matTooltipPosition","above",3,"matTooltip","click"],[1,"button-icon"]],template:function(t,e){1&t&&(i["\u0275\u0275elementStart"](0,"div",0),i["\u0275\u0275template"](1,S,12,8,"div",1),i["\u0275\u0275template"](2,w,3,0,"div",2),i["\u0275\u0275template"](3,E,7,6,"div",2),i["\u0275\u0275elementEnd"]()),2&t&&(i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngForOf",e.createAlarmRulesFormArray().controls),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",!e.createAlarmRulesFormArray().controls.length&&!e.disabled),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",!e.disabled))},directives:[l.b,l.f,c.NgForOf,c.NgIf,l.e,l.g,a.NgControlStatusGroup,a.FormGroupDirective,d.MatFormField,d.MatLabel,p.TranslateDirective,u.MatSelect,a.NgControlStatus,a.FormControlName,a.RequiredValidator,m.MatDivider,f.a,h.MatOption,d.MatError,g.MatButton,y.MatTooltip,b.MatIcon],pipes:[p.TranslatePipe],styles:["[_nghost-%COMP%]   .create-alarm-rule[_ngcontent-%COMP%]{border:2px groove rgba(0,0,0,.45);border-radius:4px;padding:8px;min-width:0}[_nghost-%COMP%]     .mat-form-field.severity .mat-form-field-infix{width:160px}[_nghost-%COMP%]     .button-icon{font-size:20px;width:20px;height:20px}"]}),t}();!function(){i["\u0275setClassMetadata"](I,[{type:i.Component,args:[{selector:"tb-create-alarm-rules",templateUrl:"./create-alarm-rules.component.html",styleUrls:["./create-alarm-rules.component.scss"],providers:[{provide:a.NG_VALUE_ACCESSOR,useExisting:Object(i.forwardRef)((function(){return I})),multi:!0},{provide:a.NG_VALIDATORS,useExisting:Object(i.forwardRef)((function(){return I})),multi:!0}]}]}],(function(){return[{type:s.MatDialog},{type:a.FormBuilder}]}),{disabled:[{type:i.Input}],deviceProfileId:[{type:i.Input}]})}()},"9GfO":function(t,e,n){"use strict";n.d(e,"a",(function(){return m}));var i=n("aX2P"),a=n("//Q6"),r=function(){function t(){this.rangeChanged=!1,this.minTs=Number.MAX_SAFE_INTEGER,this.map=new Map}return t.prototype.set=function(t,e){t<this.minTs&&(this.rangeChanged=!0,this.minTs=t),this.map.set(t,e)},t.prototype.get=function(t){return this.map.get(t)},t.prototype.delete=function(t){this.map.delete(t)},t.prototype.forEach=function(t,e){this.map.forEach(t,e)},t.prototype.size=function(){return this.map.size},t}(),o=function(){function t(){this.aggMap={}}return t.prototype.detectRangeChanged=function(){for(var t=!1,e=0,n=Object.keys(this.aggMap);e<n.length;e++){var i=n[e],a=this.aggMap[i];a.rangeChanged&&(t=!0,a.rangeChanged=!1)}return t},t.prototype.clearRangeChangedFlags=function(){for(var t=0,e=Object.keys(this.aggMap);t<e.length;t++){var n=e[t];this.aggMap[n].rangeChanged=!1}},t}(),s=function(t,e){t.count++,t.sum+=e,t.aggValue=t.sum/t.count},l=function(t,e){t.aggValue=Math.min(t.aggValue,e)},c=function(t,e){t.aggValue=Math.max(t.aggValue,e)},d=function(t,e){t.aggValue=t.aggValue+e},p=function(t){t.count++,t.aggValue=t.count},u=function(t,e){t.aggValue=e},m=function(){function t(t,e,n,a,r){var o=this;switch(this.onDataCb=t,this.tsKeyNames=e,this.subsTw=n,this.utils=a,this.ignoreDataUpdateOnIntervalTick=r,this.dataBuffer={},this.dataReceived=!1,this.resetPending=!1,this.updatedData=!1,this.noAggregation=this.subsTw.aggregation.type===i.a.NONE,this.aggregationTimeout=Math.max(this.subsTw.aggregation.interval,1e3),this.tsKeyNames.forEach((function(t){o.dataBuffer[t]=[]})),this.subsTw.aggregation.stateData&&(this.lastPrevKvPairData={}),this.subsTw.aggregation.type){case i.a.MIN:this.aggFunction=l;break;case i.a.MAX:this.aggFunction=c;break;case i.a.AVG:this.aggFunction=s;break;case i.a.SUM:this.aggFunction=d;break;case i.a.COUNT:this.aggFunction=p;break;case i.a.NONE:this.aggFunction=u;break;default:this.aggFunction=s}}return t.prototype.updateOnDataCb=function(t){var e=this.onDataCb;return this.onDataCb=t,e},t.prototype.reset=function(t){this.intervalTimeoutHandle&&(clearTimeout(this.intervalTimeoutHandle),this.intervalTimeoutHandle=null),this.subsTw=t,this.intervalScheduledTime=this.utils.currentPerfTime(),this.calculateStartEndTs(),this.elapsed=0,this.aggregationTimeout=Math.max(this.subsTw.aggregation.interval,1e3),this.resetPending=!0,this.updatedData=!1,this.intervalTimeoutHandle=setTimeout(this.onInterval.bind(this),this.aggregationTimeout)},t.prototype.destroy=function(){this.intervalTimeoutHandle&&(clearTimeout(this.intervalTimeoutHandle),this.intervalTimeoutHandle=null),this.aggregationMap=null},t.prototype.onData=function(t,e,n,i){if(this.updatedData=!0,!this.dataReceived||this.resetPending){var a=!0;this.dataReceived||(this.elapsed=0,this.dataReceived=!0,this.calculateStartEndTs()),this.resetPending&&(this.resetPending=!1,a=!1),e?(this.aggregationMap=new o,this.updateAggregatedData(t.data)):this.aggregationMap=this.processAggregatedData(t.data),a&&(this.intervalScheduledTime=this.utils.currentPerfTime()),this.aggregationMap.clearRangeChangedFlags(),this.onInterval(n,i)}else this.updateAggregatedData(t.data),n?(this.intervalScheduledTime=this.utils.currentPerfTime(),this.onInterval(n,i)):this.aggregationMap.detectRangeChanged()&&this.onInterval(!1,i,!0)},t.prototype.calculateStartEndTs=function(){if(this.startTs=this.subsTw.startTs+this.subsTw.tsOffset,this.subsTw.quickInterval)if("previousInterval"===this.subsTw.timeForComparison){var t=Object(i.D)(this.subsTw.startTs,this.subsTw.timezone),e=Object(i.z)(this.subsTw.timezone);this.endTs=Object(i.o)(this.subsTw.quickInterval,t,e)+this.subsTw.tsOffset}else{t=Object(i.D)(this.subsTw.startTs,this.subsTw.timezone);this.endTs=Object(i.q)(this.subsTw.quickInterval,t,this.subsTw.timezone)+this.subsTw.tsOffset}else this.endTs=this.startTs+this.subsTw.aggregation.timeWindow},t.prototype.onInterval=function(t,e,n){var a=this.utils.currentPerfTime();this.elapsed+=a-this.intervalScheduledTime,this.intervalScheduledTime=a,this.intervalTimeoutHandle&&(clearTimeout(this.intervalTimeoutHandle),this.intervalTimeoutHandle=null);var r=n?this.aggregationTimeout-this.elapsed:this.aggregationTimeout;if(t)this.data=this.updateData();else{var o=Math.floor(this.elapsed/this.subsTw.aggregation.interval);if(o||!this.data||n){var s=o*this.subsTw.aggregation.interval;if(this.subsTw.quickInterval){var l=Object(i.r)(this.subsTw.quickInterval,this.subsTw.timezone);this.startTs=l[0]+this.subsTw.tsOffset,this.endTs=l[1]+this.subsTw.tsOffset}else this.startTs+=s,this.endTs+=s;this.data=this.updateData(),this.elapsed=this.elapsed-o*this.subsTw.aggregation.interval}}!this.onDataCb||this.ignoreDataUpdateOnIntervalTick&&!this.updatedData||(this.onDataCb(this.data,e),this.updatedData=!1),t||(this.intervalTimeoutHandle=setTimeout(this.onInterval.bind(this),r))},t.prototype.updateData=function(){var t=this;this.tsKeyNames.forEach((function(e){t.dataBuffer[e]=[]}));for(var e=function(e){var i=n.aggregationMap.aggMap[e],r=n.dataBuffer[e];i.forEach((function(n,a){if(a<t.startTs)t.subsTw.aggregation.stateData&&(!t.lastPrevKvPairData[e]||t.lastPrevKvPairData[e][0]<a)&&(t.lastPrevKvPairData[e]=[a,n.aggValue]),i.delete(a),t.updatedData=!0;else if(a<t.endTs){var o=[a,n.aggValue];r.push(o)}})),r.sort((function(t,e){return t[0]-e[0]})),n.subsTw.aggregation.stateData&&n.updateStateBounds(r,Object(a.e)(n.lastPrevKvPairData[e])),r.length>n.subsTw.aggregation.limit&&(r=r.slice(r.length-n.subsTw.aggregation.limit)),n.dataBuffer[e]=r},n=this,i=0,r=Object.keys(this.aggregationMap.aggMap);i<r.length;i++){e(r[i])}return this.dataBuffer},t.prototype.updateStateBounds=function(t,e){var n;if(e&&(e[0]=this.startTs),t.length?n=t[0]:e&&(n=e,t.push(n)),n&&n[0]>this.startTs&&e&&t.unshift(e),t.length){var i=t[t.length-1];i[0]<this.endTs&&((i=Object(a.e)(i))[0]=this.endTs,t.push(i))}},t.prototype.processAggregatedData=function(t){for(var e=this,n=this.subsTw.aggregation.type===i.a.COUNT,a=new o,s=function(i){var o=a.aggMap[i];o||(o=new r,a.aggMap[i]=o),t[i].forEach((function(t){var i=t[0],a=e.convertValue(t[1]),r=i,s={count:n?a:1,sum:a,aggValue:a};o.set(r,s)}))},l=0,c=Object.keys(t);l<c.length;l++){s(c[l])}return a},t.prototype.updateAggregatedData=function(t){for(var e=this,n=this.subsTw.aggregation.type===i.a.COUNT,a=function(i){var a=o.aggregationMap.aggMap[i];a||(a=new r,o.aggregationMap.aggMap[i]=a),t[i].forEach((function(t){var i=t[0],r=e.convertValue(t[1]),o=e.noAggregation?i:e.startTs+Math.floor((i-e.startTs)/e.subsTw.aggregation.interval)*e.subsTw.aggregation.interval+e.subsTw.aggregation.interval/2,s=a.get(o);s?e.aggFunction(s,r):(s={count:1,sum:r,aggValue:n?1:r},a.set(o,s))}))},o=this,s=0,l=Object.keys(t);s<l.length;s++){a(l[s])}},t.prototype.isNumeric=function(t){return t-parseFloat(t)+1>=0},t.prototype.convertValue=function(t){return!this.noAggregation||t&&this.isNumeric(t)?Number(t):t},t.prototype.getCurrentTime=function(){return this.subsTw.timeForComparison?Object(i.A)(this.subsTw.timeForComparison,this.subsTw.timezone):Object(i.z)(this.subsTw.timezone)},t}()},"9HAa":function(t,e,n){"use strict";n.d(e,"a",(function(){return k}));var i=n("mrSG"),a=n("fXoL"),r=n("YnEf"),o=n("xKAQ"),s=n("//Q6"),l=n("wtyh"),c=n("ofXK"),d=n("MBk6"),p=n("ou6H"),u=n("LRne"),m=n("cp0P"),f=n("5+tZ"),h=n("JIr8"),g=n("lJxs"),y=n("vkgz"),b=n("4j5O"),v=n("21Fy"),x=n("EWcq"),C=n("FBAY"),S=n("z3OR"),w=n("U3y+"),E=n("OiFK"),I=n("5xOD"),O=n("oKkZ"),T=n("C4fA"),M=n("g+M/"),F=n("l7P3"),P=n("sYmb"),D=n("0IaG"),k=function(){function t(t,e,n,i,a,r,o,s,l,c,d,p,u){this.window=t,this.document=e,this.store=n,this.translate=i,this.dashboardService=a,this.dashboardUtils=r,this.widgetService=o,this.deviceProfileService=s,this.entityService=l,this.ruleChainService=c,this.utils=d,this.itembuffer=p,this.dialog=u}return t.prototype.exportDashboard=function(t){var e=this;this.dashboardService.getDashboard(t).subscribe((function(t){var n=t.title;n=n.toLowerCase().replace(/\W/g,"_"),e.exportToPc(e.prepareDashboardExport(t),n)}),(function(t){e.handleExportError(t,"dashboard.export-failed-error")}))},t.prototype.importDashboard=function(){var t=this;return this.openImportDialog("dashboard.import","dashboard.dashboard-file").pipe(Object(f.b)((function(e){if(t.validateImportedDashboard(e)){var n=null,i=(e=t.dashboardUtils.validateAndUpdateDashboard(e)).configuration.entityAliases;return i&&(n=Object.keys(i)),n&&n.length>0?t.processEntityAliases(i,n).pipe(Object(f.b)((function(n){return Object.keys(n).length>0?t.editMissingAliases(t.dashboardUtils.getWidgetsArray(e),!1,"dashboard.dashboard-import-missing-aliases-title",n).pipe(Object(f.b)((function(n){for(var a=0,r=Object.keys(n);a<r.length;a++){var o=r[a];i[o]=n[o]}return t.saveImportedDashboard(e)}))):t.saveImportedDashboard(e)}))):t.saveImportedDashboard(e)}throw t.store.dispatch(new o.b({message:t.translate.instant("dashboard.invalid-dashboard-file-error"),type:"error"})),new Error("Invalid dashboard file")})),Object(h.a)((function(t){return Object(u.a)(null)})))},t.prototype.exportWidget=function(t,e,n,i){var a=this.itembuffer.prepareWidgetItem(t,e,n,i),r=a.widget.config.title;r=r.toLowerCase().replace(/\W/g,"_"),this.exportToPc(this.prepareExport(a),r)},t.prototype.importWidget=function(t,e,n,a,r){var l=this;return this.openImportDialog("dashboard.import-widget","dashboard.widget-file").pipe(Object(f.b)((function(c){if(l.validateImportedWidget(c)){var d=c.widget;d=l.dashboardUtils.validateAndUpdateWidget(d);var p=l.prepareAliasesInfo(c.aliasesInfo),u=c.filtersInfo||{datasourceFilters:{}},m=c.originalColumns,h=c.originalSize,g=p.datasourceAliases,y=p.targetDeviceAliases;if(g||y){var b={},v={},x={},C=void 0,S=void 0;if(g)for(var w=0,E=Object.keys(g);w<E.length;w++){var I=E[w];S=Number(I),C=l.utils.guid(),v[C]=S,b[C]=Object(i.a)({id:C},g[S])}if(y)for(var O=0,T=Object.keys(y);O<T.length;O++){I=T[O];S=Number(I),C=l.utils.guid(),x[C]=S,b[C]=Object(i.a)({id:C},y[S])}var M=Object.keys(b);return M.length>0?l.processEntityAliases(b,M).pipe(Object(f.b)((function(i){return Object.keys(i).length>0?l.editMissingAliases([d],!1,"dashboard.widget-import-missing-aliases-title",i).pipe(Object(f.b)((function(i){for(var o=0,c=Object.keys(i);o<c.length;o++){var f=c[o],b=i[f],C=void 0;Object(s.n)(v[f])?(C=v[f],g[C]=b):Object(s.n)(x[f])&&(C=x[f],y[C]=b)}return l.addImportedWidget(t,e,n,d,p,u,a,r,m,h)}))):l.addImportedWidget(t,e,n,d,p,u,a,r,m,h)}))):l.addImportedWidget(t,e,n,d,p,u,a,r,m,h)}return l.addImportedWidget(t,e,n,d,p,u,a,r,m,h)}throw l.store.dispatch(new o.b({message:l.translate.instant("dashboard.invalid-widget-file-error"),type:"error"})),new Error("Invalid widget file")})),Object(h.a)((function(t){return Object(u.a)(null)})))},t.prototype.exportWidgetType=function(t){var e=this;this.widgetService.getWidgetTypeById(t).subscribe((function(t){Object(s.n)(t.bundleAlias)&&delete t.bundleAlias;var n=t.name;n=n.toLowerCase().replace(/\W/g,"_"),e.exportToPc(e.prepareExport(t),n)}),(function(t){e.handleExportError(t,"widget-type.export-failed-error")}))},t.prototype.importWidgetType=function(t){var e=this;return this.openImportDialog("widget-type.import","widget-type.widget-type-file").pipe(Object(f.b)((function(n){if(e.validateImportedWidgetTypeDetails(n))return n.bundleAlias=t,e.widgetService.saveImportedWidgetTypeDetails(n);throw e.store.dispatch(new o.b({message:e.translate.instant("widget-type.invalid-widget-type-file-error"),type:"error"})),new Error("Invalid widget type file")})),Object(h.a)((function(t){return Object(u.a)(null)})))},t.prototype.exportWidgetsBundle=function(t){var e=this;this.widgetService.getWidgetsBundle(t).subscribe((function(t){var n=t.alias,i=t.tenantId.id===O.a;e.widgetService.getBundleWidgetTypesDetails(n,i).subscribe((function(n){n=n.sort((function(t,e){return t.createdTime-e.createdTime}));for(var i={widgetsBundle:e.prepareExport(t),widgetTypes:[]},a=0,r=n;a<r.length;a++){var o=r[a];Object(s.n)(o.bundleAlias)&&delete o.bundleAlias,i.widgetTypes.push(e.prepareExport(o))}var l=t.title;l=l.toLowerCase().replace(/\W/g,"_"),e.exportToPc(i,l)}),(function(t){e.handleExportError(t,"widgets-bundle.export-failed-error")}))}),(function(t){e.handleExportError(t,"widgets-bundle.export-failed-error")}))},t.prototype.importWidgetsBundle=function(){var t=this;return this.openImportDialog("widgets-bundle.import","widgets-bundle.widgets-bundle-file").pipe(Object(f.b)((function(e){if(t.validateImportedWidgetsBundle(e)){var n=e.widgetsBundle;return t.widgetService.saveWidgetsBundle(n).pipe(Object(f.b)((function(n){var i=n.alias,a=e.widgetTypes;if(a.length){for(var r=[],o=0,s=a;o<s.length;o++){var l=s[o];l.bundleAlias=i,r.push(t.widgetService.saveImportedWidgetTypeDetails(l))}return Object(m.a)(r).pipe(Object(g.a)((function(){return n})))}return Object(u.a)(n)})))}throw t.store.dispatch(new o.b({message:t.translate.instant("widgets-bundle.invalid-widgets-bundle-file-error"),type:"error"})),new Error("Invalid widgets bundle file")})),Object(h.a)((function(t){return Object(u.a)(null)})))},t.prototype.importEntities=function(t,e,n,i,a){var r=this,o=100;o=t.length>o?o:t.length;for(var s={},l=[],c=0;c<o;c++){var d=this.entityService.saveEntityParameters(e,t[c],n,a).pipe(Object(y.a)((function(t){i&&i()})));l.push(d)}return Object(m.a)(l).pipe(Object(f.b)((function(l){for(var c=0,d=l;c<d.length;c++){var p=d[c];s=r.sumObject(s,p)}return t.splice(0,o),t.length?r.importEntities(t,e,n,i,a).pipe(Object(g.a)((function(t){return r.sumObject(s,t)}))):Object(u.a)(s)})))},t.prototype.exportRuleChain=function(t){var e=this;this.ruleChainService.getRuleChain(t).pipe(Object(f.b)((function(n){return e.ruleChainService.getRuleChainMetadata(t).pipe(Object(g.a)((function(t){return{ruleChain:e.prepareRuleChain(n),metadata:e.prepareRuleChainMetaData(t)}})))}))).subscribe((function(t){var n=t.ruleChain.name;n=n.toLowerCase().replace(/\W/g,"_"),e.exportToPc(t,n)}),(function(t){e.handleExportError(t,"rulechain.export-failed-error")}))},t.prototype.importRuleChain=function(){var t=this;return this.openImportDialog("rulechain.import","rulechain.rulechain-file").pipe(Object(f.b)((function(e){if(t.validateImportedRuleChain(e))return t.ruleChainService.resolveRuleChainMetadata(e.metadata).pipe(Object(g.a)((function(t){return e.resolvedMetadata=t,e})));throw t.store.dispatch(new o.b({message:t.translate.instant("rulechain.invalid-rulechain-file-error"),type:"error"})),new Error("Invalid rule chain file")})),Object(h.a)((function(t){return Object(u.a)(null)})))},t.prototype.exportDeviceProfile=function(t){var e=this;this.deviceProfileService.getDeviceProfile(t).subscribe((function(t){var n=t.name;n=n.toLowerCase().replace(/\W/g,"_"),e.exportToPc(e.prepareDeviceProfileExport(t),n)}),(function(t){e.handleExportError(t,"device-profile.export-failed-error")}))},t.prototype.importDeviceProfile=function(){var t=this;return this.openImportDialog("device-profile.import","device-profile.device-profile-file").pipe(Object(f.b)((function(e){if(t.validateImportedDeviceProfile(e))return t.deviceProfileService.saveDeviceProfile(e);throw t.store.dispatch(new o.b({message:t.translate.instant("device-profile.invalid-device-profile-file-error"),type:"error"})),new Error("Invalid device profile file")})),Object(h.a)((function(t){return Object(u.a)(null)})))},t.prototype.exportJSZip=function(t,e){var i=this;n.e(51).then(n.t.bind(null,"xOOu",7)).then((function(n){var a=new n.default;for(var r in t)if(t.hasOwnProperty(r)){var o=t[r];a.file(r,o)}a.generateAsync({type:"blob"}).then((function(t){i.downloadFile(t,e,S.c)}))}))},t.prototype.prepareRuleChain=function(t){return(t=this.prepareExport(t)).firstRuleNodeId&&(t.firstRuleNodeId=null),t.root=!1,t},t.prototype.prepareRuleChainMetaData=function(t){delete t.ruleChainId;for(var e=0;e<t.nodes.length;e++){var n=t.nodes[e];delete n.ruleChainId,t.nodes[e]=this.prepareExport(n)}return t},t.prototype.validateImportedRuleChain=function(t){return!(Object(s.z)(t.ruleChain)||Object(s.z)(t.metadata)||Object(s.z)(t.ruleChain.name))},t.prototype.validateImportedDeviceProfile=function(t){return!(Object(s.z)(t.name)||Object(s.z)(t.type)||Object(s.z)(t.transportType)||Object(s.z)(t.provisionType)||Object(s.z)(t.profileData))},t.prototype.sumObject=function(t,e){var n=this;return Object.keys(e).map((function(a){Object(s.x)(e[a])?(t[a]=t[a]||{},t[a]=Object(i.a)(Object(i.a)({},t[a]),n.sumObject(t[a],e[a]))):t[a]=(t[a]||0)+e[a]})),t},t.prototype.handleExportError=function(t,e){var n=t;n||(n=this.translate.instant("error.unknown-error")),this.store.dispatch(new o.b({message:this.translate.instant(e,{error:n}),type:"error"}))},t.prototype.validateImportedDashboard=function(t){return!Object(s.z)(t.title)&&!Object(s.z)(t.configuration)},t.prototype.validateImportedWidget=function(t){if(Object(s.z)(t.widget)||Object(s.z)(t.aliasesInfo)||Object(s.z)(t.originalColumns))return!1;var e=t.widget;return!(Object(s.z)(e.isSystemType)||Object(s.z)(e.bundleAlias)||Object(s.z)(e.typeAlias)||Object(s.z)(e.type))},t.prototype.validateImportedWidgetTypeDetails=function(t){return!Object(s.z)(t.name)&&!Object(s.z)(t.descriptor)},t.prototype.validateImportedWidgetsBundle=function(t){if(Object(s.z)(t.widgetsBundle))return!1;if(Object(s.z)(t.widgetTypes))return!1;var e=t.widgetsBundle;if(Object(s.z)(e.title))return!1;for(var n=0,i=t.widgetTypes;n<i.length;n++){var a=i[n];if(!this.validateImportedWidgetTypeDetails(a))return!1}return!0},t.prototype.saveImportedDashboard=function(t){return this.dashboardService.saveDashboard(t)},t.prototype.addImportedWidget=function(t,e,n,i,a,r,o,s,l,c){var d=this;return n().pipe(Object(f.b)((function(n){return d.itembuffer.addWidgetToDashboard(t,e,n,i,a,r,o,s,l,c,-1,-1).pipe(Object(g.a)((function(){return{widget:i,layoutId:n}})))})))},t.prototype.processEntityAliases=function(t,e){for(var n=[],i=function(e){var i=t[e];n.push(a.entityService.checkEntityAlias(i).pipe(Object(g.a)((function(t){if(!t){var e=Object(s.e)(i);return e.filter=null,e}return null}))))},a=this,r=0,o=e;r<o.length;r++){i(o[r])}return Object(m.a)(n).pipe(Object(g.a)((function(t){for(var e={},n=0,i=t=t.filter((function(t){return null!==t}));n<i.length;n++){var a=i[n];e[a.id]=a}return e})))},t.prototype.editMissingAliases=function(t,e,n,i){return this.dialog.open(x.a,{disableClose:!0,panelClass:["tb-dialog","tb-fullscreen-dialog"],data:{entityAliases:i,widgets:t,customTitle:n,isSingleWidget:e,disableAdd:!0}}).afterClosed().pipe(Object(g.a)((function(t){if(t)return t;throw new Error("Unable to resolve missing entity aliases!")})))},t.prototype.prepareAliasesInfo=function(t){var e=t.datasourceAliases,n=t.targetDeviceAliases;if(e||n){if(e)for(var i=0,a=Object.keys(e);i<a.length;i++){var r=a[i];e[l=Number(r)]=this.prepareEntityAlias(e[l])}if(n)for(var o=0,s=Object.keys(n);o<s.length;o++){var l;r=s[o];n[l=Number(r)]=this.prepareEntityAlias(n[l])}}return t},t.prototype.prepareEntityAlias=function(t){var e,n;return t.deviceId?(e=t.aliasName,n={type:d.a.entityList,entityType:w.b.DEVICE,entityList:[t.deviceId],resolveMultiple:!1}):t.deviceFilter?(e=t.aliasName,(n={type:t.deviceFilter.useFilter?d.a.entityName:d.a.entityList,entityType:w.b.DEVICE,resolveMultiple:!1}).type===d.a.entityList?n.entityList=t.deviceFilter.deviceList:n.entityNameFilter=t.deviceFilter.deviceNameFilter):t.entityFilter?(e=t.aliasName,(n={type:t.entityFilter.useFilter?d.a.entityName:d.a.entityList,entityType:t.entityType,resolveMultiple:!1}).type===d.a.entityList?n.entityList=t.entityFilter.entityList:n.entityNameFilter=t.entityFilter.entityNameFilter):(e=t.alias,n=t.filter),{alias:e,filter:n}},t.prototype.openImportDialog=function(t,e){return this.dialog.open(p.a,{disableClose:!0,panelClass:["tb-dialog","tb-fullscreen-dialog"],data:{importTitle:t,importFileLabel:e}}).afterClosed().pipe(Object(g.a)((function(t){if(t)return t;throw new Error("No file selected!")})))},t.prototype.exportToPc=function(t,e){if(!t)return console.error("No data"),void 0;this.exportJson(t,e)},t.prototype.exportJson=function(t,e){Object(s.x)(t)&&(t=JSON.stringify(t,null,2)),this.downloadFile(t,e,S.b)},t.prototype.downloadFile=function(t,e,n){e||(e="download"),e+="."+n.extension;var i=new Blob([t],{type:n.mimeType});if(this.window.navigator&&this.window.navigator.msSaveOrOpenBlob)this.window.navigator.msSaveOrOpenBlob(i,e);else{var a=this.document.createEvent("MouseEvents"),r=this.document.createElement("a");r.download=e,r.href=URL.createObjectURL(i),r.dataset.downloadurl=[n.mimeType,r.download,r.href].join(":"),a.initEvent("click",!0,!1,this.window,0,0,0,0,0,!1,!1,!1,!1,0,null),r.dispatchEvent(a)}},t.prototype.prepareDashboardExport=function(t){return delete(t=this.prepareExport(t)).assignedCustomers,t},t.prototype.prepareDeviceProfileExport=function(t){return(t=this.prepareExport(t)).default=!1,t},t.prototype.prepareExport=function(t){var e=Object(s.e)(t);return Object(s.n)(e.id)&&delete e.id,Object(s.n)(e.createdTime)&&delete e.createdTime,Object(s.n)(e.tenantId)&&delete e.tenantId,Object(s.n)(e.customerId)&&delete e.customerId,e},t.\u0275fac=function(e){return new(e||t)(a["\u0275\u0275inject"](l.b),a["\u0275\u0275inject"](c.DOCUMENT),a["\u0275\u0275inject"](F.Store),a["\u0275\u0275inject"](P.TranslateService),a["\u0275\u0275inject"](r.a),a["\u0275\u0275inject"](b.a),a["\u0275\u0275inject"](I.a),a["\u0275\u0275inject"](M.a),a["\u0275\u0275inject"](v.a),a["\u0275\u0275inject"](T.a),a["\u0275\u0275inject"](E.a),a["\u0275\u0275inject"](C.a),a["\u0275\u0275inject"](D.MatDialog))},t.\u0275prov=a["\u0275\u0275defineInjectable"]({token:t,factory:t.\u0275fac}),t}();!function(){a["\u0275setClassMetadata"](k,[{type:a.Injectable}],(function(){return[{type:Window,decorators:[{type:a.Inject,args:[l.b]}]},{type:Document,decorators:[{type:a.Inject,args:[c.DOCUMENT]}]},{type:F.Store},{type:P.TranslateService},{type:r.a},{type:b.a},{type:I.a},{type:M.a},{type:v.a},{type:T.a},{type:E.a},{type:C.a},{type:D.MatDialog}]}),null)}()},"9Q2s":function(t,e,n){"use strict";n.d(e,"a",(function(){return x}));var i=n("fXoL"),a=n("DaoB"),r=n("JIJk"),o=n("//Q6"),s=n("2Vo4"),l=n("pLZG"),c=n("/uUt"),d=n("vkgz"),p=n("5+tZ"),u=n("U3y+"),m=n("xKAQ"),f=n("l7P3"),h=n("sYmb"),g=n("bTqV"),y=n("Dvla"),b=n("znSr"),v=n("NFeN"),x=function(){function t(t,e,n,i){var a=this;this.store=t,this.translate=e,this.deviceService=n,this.cd=i,this.deviceId$=new s.a(null),this.hideButton=!0,this.loading=!1,this.credentialsSubscription=null,this.deviceId$.pipe(Object(l.a)((function(t){return Object(o.o)(t)&&t.entityType===u.b.DEVICE})),Object(c.a)((function(t,e){return t.id===e.id})),Object(d.a)((function(){return a.loading=!0})),Object(p.b)((function(t){return a.deviceService.getDeviceCredentials(t.id)}))).subscribe((function(t){a.processingValue(t),a.loading=!1}))}return Object.defineProperty(t.prototype,"deviceId",{set:function(t){this.deviceId$.next(t)},enumerable:!1,configurable:!0}),t.prototype.ngOnInit=function(){var t=this;this.credentialsSubscription=this.credentials$.pipe(Object(l.a)((function(t){return Object(o.o)(t)})),Object(c.a)((function(t,e){return Object(o.r)(t,e)}))).subscribe((function(e){t.processingValue(e),t.cd.detectChanges()}))},t.prototype.ngOnDestroy=function(){this.deviceId$.unsubscribe(),null!==this.credentialsSubscription&&this.credentialsSubscription.unsubscribe()},t.prototype.processingValue=function(t){switch(t.credentialsType){case r.g.ACCESS_TOKEN:this.hideButton=!1,this.credential=t.credentialsId,this.buttonLabel=this.translate.instant("device.copyAccessToken"),this.tooltipMessage=this.translate.instant("device.accessTokenCopiedMessage");break;case r.g.MQTT_BASIC:this.hideButton=!1,this.credential=this.convertObjectToString(JSON.parse(t.credentialsValue)),this.buttonLabel=this.translate.instant("device.copy-mqtt-authentication"),this.tooltipMessage=this.translate.instant("device.mqtt-authentication-copied-message");break;default:this.hideButton=!0,this.credential=null,this.buttonLabel="",this.tooltipMessage=""}},t.prototype.convertObjectToString=function(t){return Object.keys(t).forEach((function(e){return!t[e]&&void 0!==t[e]&&delete t[e]})),JSON.stringify(t).replace(/"([^"]+)":/g,"$1:")},t.prototype.onCopyCredential=function(){this.store.dispatch(new m.b({message:this.tooltipMessage,type:"success",duration:750,verticalPosition:"bottom",horizontalPosition:"right"}))},t.\u0275fac=function(e){return new(e||t)(i["\u0275\u0275directiveInject"](f.Store),i["\u0275\u0275directiveInject"](h.TranslateService),i["\u0275\u0275directiveInject"](a.a),i["\u0275\u0275directiveInject"](i.ChangeDetectorRef))},t.\u0275cmp=i["\u0275\u0275defineComponent"]({type:t,selectors:[["tb-copy-device-credentials"]],inputs:{deviceId:"deviceId",disabled:"disabled",credentials$:"credentials$"},decls:4,vars:4,consts:[["mat-raised-button","","ngxClipboard","",3,"cbContent","fxHide","disabled","cbOnSuccess"],["svgIcon","mdi:clipboard-arrow-left"]],template:function(t,e){1&t&&(i["\u0275\u0275elementStart"](0,"button",0),i["\u0275\u0275listener"]("cbOnSuccess",(function(){return e.onCopyCredential()})),i["\u0275\u0275element"](1,"mat-icon",1),i["\u0275\u0275elementStart"](2,"span"),i["\u0275\u0275text"](3),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()),2&t&&(i["\u0275\u0275property"]("cbContent",e.credential)("fxHide",e.hideButton)("disabled",e.disabled||e.loading),i["\u0275\u0275advance"](3),i["\u0275\u0275textInterpolate"](e.buttonLabel))},directives:[g.MatButton,y.a,b.d,v.MatIcon],encapsulation:2}),t}();!function(){i["\u0275setClassMetadata"](x,[{type:i.Component,args:[{selector:"tb-copy-device-credentials",templateUrl:"./copy-device-credentials.component.html",styleUrls:[]}]}],(function(){return[{type:f.Store},{type:h.TranslateService},{type:a.a},{type:i.ChangeDetectorRef}]}),{deviceId:[{type:i.Input}],disabled:[{type:i.Input}],credentials$:[{type:i.Input}]})}()},"9joC":function(t,e,n){"use strict";n.d(e,"a",(function(){return x}));var i=n("fXoL"),a=n("3Pt+"),r=n("//Q6"),o=n("JIJk"),s=n("lVMo"),l=n("aX2P"),c=n("0IaG"),d=n("sYmb"),p=n("ofXK"),u=n("XiUz"),m=n("eIDA"),f=n("bTqV"),h=n("Qu3c"),g=n("NFeN"),y=n("znSr"),b=function(t){return{disabled:t}};function v(t,e){if(1&t&&i["\u0275\u0275element"](0,"span",5),2&t){var n=i["\u0275\u0275nextContext"]();i["\u0275\u0275property"]("ngClass",i["\u0275\u0275pureFunction1"](2,b,n.disabled))("innerHTML",n.specText,i["\u0275\u0275sanitizeHtml"])}}var x=function(){function t(t,e,n,i){this.dialog=t,this.fb=e,this.translate=n,this.datePipe=i,this.specText="",this.propagateChange=function(t){}}return t.prototype.registerOnChange=function(t){this.propagateChange=t},t.prototype.registerOnTouched=function(t){},t.prototype.ngOnInit=function(){this.alarmRuleConditionFormGroup=this.fb.group({condition:[null,a.Validators.required],spec:[null,a.Validators.required]})},t.prototype.setDisabledState=function(t){this.disabled=t,this.disabled?this.alarmRuleConditionFormGroup.disable({emitEvent:!1}):this.alarmRuleConditionFormGroup.enable({emitEvent:!1})},t.prototype.writeValue=function(t){var e;this.modelValue=t,null!==this.modelValue&&Object(r.z)(null===(e=this.modelValue)||void 0===e?void 0:e.spec)&&(this.modelValue=Object.assign(this.modelValue,{spec:{type:o.a.SIMPLE}})),this.updateConditionInfo()},t.prototype.conditionSet=function(){return this.modelValue&&this.modelValue.condition.length},t.prototype.validate=function(t){return this.conditionSet()?null:{alarmRuleCondition:{valid:!1}}},t.prototype.openFilterDialog=function(t){var e=this;t&&t.stopPropagation(),this.dialog.open(s.a,{disableClose:!0,panelClass:["tb-dialog","tb-fullscreen-dialog"],data:{readonly:this.disabled,condition:this.disabled?this.modelValue:Object(r.e)(this.modelValue),entityId:this.deviceProfileId}}).afterClosed().subscribe((function(t){t&&(e.modelValue=t,e.updateModel())}))},t.prototype.updateConditionInfo=function(){var t,e;this.alarmRuleConditionFormGroup.patchValue({condition:null===(t=this.modelValue)||void 0===t?void 0:t.condition,spec:null===(e=this.modelValue)||void 0===e?void 0:e.spec}),this.updateSpecText()},t.prototype.updateSpecText=function(){if(this.specText="",this.modelValue&&this.modelValue.spec){var t=this.modelValue.spec;switch(t.type){case o.a.SIMPLE:break;case o.a.DURATION:var e="";switch(t.unit){case l.j.SECONDS:e=this.translate.instant("timewindow.seconds",{seconds:t.value});break;case l.j.MINUTES:e=this.translate.instant("timewindow.minutes",{minutes:t.value});break;case l.j.HOURS:e=this.translate.instant("timewindow.hours",{hours:t.value});break;case l.j.DAYS:e=this.translate.instant("timewindow.days",{days:t.value})}this.specText=this.translate.instant("device-profile.condition-during",{during:e});break;case o.a.REPEATING:this.specText=this.translate.instant("device-profile.condition-repeat-times",{count:t.count})}}},t.prototype.updateModel=function(){this.updateConditionInfo(),this.propagateChange(this.modelValue)},t.\u0275fac=function(e){return new(e||t)(i["\u0275\u0275directiveInject"](c.MatDialog),i["\u0275\u0275directiveInject"](a.FormBuilder),i["\u0275\u0275directiveInject"](d.TranslateService),i["\u0275\u0275directiveInject"](p.DatePipe))},t.\u0275cmp=i["\u0275\u0275defineComponent"]({type:t,selectors:[["tb-alarm-rule-condition"]],inputs:{disabled:"disabled",deviceProfileId:"deviceProfileId"},features:[i["\u0275\u0275ProvidersFeature"]([{provide:a.NG_VALUE_ACCESSOR,useExisting:Object(i.forwardRef)((function(){return t})),multi:!0},{provide:a.NG_VALIDATORS,useExisting:Object(i.forwardRef)((function(){return t})),multi:!0}])],decls:9,vars:11,consts:[["fxLayout","row","fxLayoutAlign","start center",2,"min-width","0",3,"formGroup"],["fxFlex","","fxLayout","column","fxLayoutAlign","center",1,"tb-alarm-rule-condition",3,"click"],["formControlName","condition","required","",3,"nowrap","addFilterPrompt"],["class","tb-alarm-rule-condition-spec",3,"ngClass","innerHTML",4,"ngIf"],["mat-icon-button","","type","button","matTooltipPosition","above",3,"color","matTooltip","click"],[1,"tb-alarm-rule-condition-spec",3,"ngClass","innerHTML"]],template:function(t,e){1&t&&(i["\u0275\u0275elementStart"](0,"div",0),i["\u0275\u0275elementStart"](1,"div",1),i["\u0275\u0275listener"]("click",(function(t){return e.openFilterDialog(t)})),i["\u0275\u0275element"](2,"tb-filter-text",2),i["\u0275\u0275pipe"](3,"translate"),i["\u0275\u0275template"](4,v,1,4,"span",3),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](5,"button",4),i["\u0275\u0275listener"]("click",(function(t){return e.openFilterDialog(t)})),i["\u0275\u0275pipe"](6,"translate"),i["\u0275\u0275elementStart"](7,"mat-icon"),i["\u0275\u0275text"](8),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()),2&t&&(i["\u0275\u0275property"]("formGroup",e.alarmRuleConditionFormGroup),i["\u0275\u0275advance"](2),i["\u0275\u0275propertyInterpolate"]("addFilterPrompt",i["\u0275\u0275pipeBind1"](3,7,"device-profile.enter-alarm-rule-condition-prompt")),i["\u0275\u0275property"]("nowrap",!0),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngIf",e.specText),i["\u0275\u0275advance"](1),i["\u0275\u0275propertyInterpolate"]("matTooltip",i["\u0275\u0275pipeBind1"](6,9,e.disabled?"action.view":"action.edit")),i["\u0275\u0275property"]("color",e.conditionSet()?"primary":"warn"),i["\u0275\u0275advance"](3),i["\u0275\u0275textInterpolate"](e.disabled?"visibility":e.conditionSet()?"edit":"add"))},directives:[u.f,u.e,a.NgControlStatusGroup,a.FormGroupDirective,u.b,m.a,a.NgControlStatus,a.FormControlName,a.RequiredValidator,p.NgIf,f.MatButton,h.MatTooltip,g.MatIcon,p.NgClass,y.b],pipes:[d.TranslatePipe],styles:["[_nghost-%COMP%]{display:-ms-flexbox;display:flex}[_nghost-%COMP%]   a.mat-button[_ngcontent-%COMP%]:focus, [_nghost-%COMP%]   a.mat-button[_ngcontent-%COMP%]:hover{border-bottom:none}[_nghost-%COMP%]   .tb-alarm-rule-condition[_ngcontent-%COMP%]{cursor:pointer;min-width:0}[_nghost-%COMP%]   .tb-alarm-rule-condition[_ngcontent-%COMP%]   .tb-alarm-rule-condition-spec[_ngcontent-%COMP%]{opacity:.7;padding:4px}[_nghost-%COMP%]     .tb-alarm-rule-condition .tb-filter-text{max-height:200px}"]}),t}();!function(){i["\u0275setClassMetadata"](x,[{type:i.Component,args:[{selector:"tb-alarm-rule-condition",templateUrl:"./alarm-rule-condition.component.html",styleUrls:["./alarm-rule-condition.component.scss"],providers:[{provide:a.NG_VALUE_ACCESSOR,useExisting:Object(i.forwardRef)((function(){return x})),multi:!0},{provide:a.NG_VALIDATORS,useExisting:Object(i.forwardRef)((function(){return x})),multi:!0}]}]}],(function(){return[{type:c.MatDialog},{type:a.FormBuilder},{type:d.TranslateService},{type:p.DatePipe}]}),{disabled:[{type:i.Input}],deviceProfileId:[{type:i.Input}]})}()},"9kgB":function(t,e,n){"use strict";n.d(e,"a",(function(){return y}));var i=n("fXoL"),a=n("3Pt+"),r=n("ofXK"),o=n("rDax"),s=n("+rOU"),l=n("he9t"),c=n("wtyh"),d=n("//Q6"),p=n("EYOO"),u=n("0MNC"),m=n("bTqV"),f=n("NFeN"),h=n("sYmb"),g=["legendConfigPanelOrigin"],y=function(){function t(t,e,n,i,a){this.overlay=t,this.viewContainerRef=e,this.breakpointObserver=n,this.document=i,this.window=a,this.propagateChange=function(t){}}return t.prototype.ngOnInit=function(){},t.prototype.ngOnDestroy=function(){},t.prototype.openEditMode=function(){if(!this.disabled){var t=this.breakpointObserver.isMatched(l.e["gt-sm"]),e=this.overlay.position(),n=new o.OverlayConfig({panelClass:"tb-legend-config-panel",backdropClass:"cdk-overlay-transparent-backdrop",hasBackdrop:t});if(t){n.minWidth="220px",n.maxHeight="300px";var i=this.legendConfigPanelOrigin.elementRef.nativeElement.getBoundingClientRect(),a=this.window.pageYOffset||this.document.documentElement.scrollTop||this.document.body.scrollTop||0,r=this.window.pageXOffset||this.document.documentElement.scrollLeft||this.document.body.scrollLeft||0,c=i.bottom-a,u=i.left-r,m=void 0,f=void 0,h=void 0,g=void 0;c+220>this.document.documentElement.clientHeight?(f="top",g="bottom"):(f="bottom",g="top"),u+220>this.document.documentElement.clientWidth?(m="end",h="end"):(m="start",h="start");var y={originX:m,originY:f,overlayX:h,overlayY:g};n.positionStrategy=e.flexibleConnectedTo(this.legendConfigPanelOrigin.elementRef).withPositions([y])}else n.minWidth="100%",n.minHeight="100%",n.positionStrategy=e.global().top("0%").left("0%").right("0%").bottom("0%");var b=this.overlay.create(n);b.backdropClick().subscribe((function(){b.dispose()}));var v=this._createLegendConfigPanelInjector(b,{legendConfig:Object(d.e)(this.innerValue),legendConfigUpdated:this.legendConfigUpdated.bind(this)});b.attach(new s.ComponentPortal(p.b,this.viewContainerRef,v))}},t.prototype._createLegendConfigPanelInjector=function(t,e){var n=[{provide:p.a,useValue:e},{provide:o.OverlayRef,useValue:t}];return i.Injector.create({parent:this.viewContainerRef.injector,providers:n})},t.prototype.registerOnChange=function(t){this.propagateChange=t},t.prototype.registerOnTouched=function(t){},t.prototype.setDisabledState=function(t){this.disabled=t},t.prototype.writeValue=function(t){this.innerValue=t},t.prototype.legendConfigUpdated=function(t){this.innerValue=t,this.propagateChange(this.innerValue)},t.\u0275fac=function(e){return new(e||t)(i["\u0275\u0275directiveInject"](o.Overlay),i["\u0275\u0275directiveInject"](i.ViewContainerRef),i["\u0275\u0275directiveInject"](u.BreakpointObserver),i["\u0275\u0275directiveInject"](r.DOCUMENT),i["\u0275\u0275directiveInject"](c.b))},t.\u0275cmp=i["\u0275\u0275defineComponent"]({type:t,selectors:[["tb-legend-config"]],viewQuery:function(t,e){var n;(1&t&&i["\u0275\u0275viewQuery"](g,!0),2&t)&&(i["\u0275\u0275queryRefresh"](n=i["\u0275\u0275loadQuery"]())&&(e.legendConfigPanelOrigin=n.first))},inputs:{disabled:"disabled"},features:[i["\u0275\u0275ProvidersFeature"]([{provide:a.NG_VALUE_ACCESSOR,useExisting:Object(i.forwardRef)((function(){return t})),multi:!0}])],decls:6,vars:1,consts:[["cdkOverlayOrigin","","type","button","mat-button","","mat-raised-button","","color","primary",3,"disabled","click"],["legendConfigPanelOrigin","cdkOverlayOrigin"],[1,"material-icons"],["translate",""]],template:function(t,e){1&t&&(i["\u0275\u0275elementStart"](0,"button",0,1),i["\u0275\u0275listener"]("click",(function(){return e.openEditMode()})),i["\u0275\u0275elementStart"](2,"mat-icon",2),i["\u0275\u0275text"](3,"toc"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](4,"span",3),i["\u0275\u0275text"](5,"legend.settings"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()),2&t&&i["\u0275\u0275property"]("disabled",e.disabled)},directives:[m.MatButton,o.CdkOverlayOrigin,f.MatIcon,h.TranslateDirective],encapsulation:2}),t}();!function(){i["\u0275setClassMetadata"](y,[{type:i.Component,args:[{selector:"tb-legend-config",templateUrl:"./legend-config.component.html",styleUrls:[],providers:[{provide:a.NG_VALUE_ACCESSOR,useExisting:Object(i.forwardRef)((function(){return y})),multi:!0}]}]}],(function(){return[{type:o.Overlay},{type:i.ViewContainerRef},{type:u.BreakpointObserver},{type:Document,decorators:[{type:i.Inject,args:[r.DOCUMENT]}]},{type:Window,decorators:[{type:i.Inject,args:[c.b]}]}]}),{disabled:[{type:i.Input}],legendConfigPanelOrigin:[{type:i.ViewChild,args:["legendConfigPanelOrigin"]}]})}()},A1kC:function(t,e,n){"use strict";n.d(e,"a",(function(){return P}));var i=n("mrSG"),a=n("fXoL"),r=n("FKr1"),o=n("0IaG"),s=n("3Pt+"),l=n("gmuX"),c=n("xw5a"),d=n("//Q6"),p=n("l7P3"),u=n("tyNb"),m=n("sYmb"),f=n("/t3+"),h=n("XiUz"),g=n("bTqV"),y=n("NFeN"),b=n("ofXK"),v=n("bv9b"),x=n("kmnG"),C=n("qFsG"),S=n("gl+N"),w=n("bSwM");function E(t,e){1&t&&a["\u0275\u0275element"](0,"mat-progress-bar",12)}function I(t,e){if(1&t&&(a["\u0275\u0275elementStart"](0,"mat-form-field",16),a["\u0275\u0275elementStart"](1,"mat-label"),a["\u0275\u0275text"](2),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](3,"input",17),a["\u0275\u0275elementEnd"]()),2&t){var n=a["\u0275\u0275nextContext"]().$implicit;a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate"](n.get("label").value),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("formControl",n.get("value"))}}function O(t,e){if(1&t&&(a["\u0275\u0275elementStart"](0,"mat-form-field",16),a["\u0275\u0275elementStart"](1,"mat-label"),a["\u0275\u0275text"](2),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](3,"input",18),a["\u0275\u0275elementEnd"]()),2&t){var n=a["\u0275\u0275nextContext"]().$implicit;a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate"](n.get("label").value),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("formControl",n.get("value"))}}function T(t,e){if(1&t&&(a["\u0275\u0275elementStart"](0,"label",19),a["\u0275\u0275text"](1),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](2,"tb-datetime",20)),2&t){var n=a["\u0275\u0275nextContext"]().$implicit;a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate"](n.get("label").value),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("formControl",n.get("value"))("showLabel",!1)}}function M(t,e){if(1&t&&(a["\u0275\u0275elementStart"](0,"mat-checkbox",21),a["\u0275\u0275text"](1),a["\u0275\u0275elementEnd"]()),2&t){var n=a["\u0275\u0275nextContext"]().$implicit;a["\u0275\u0275property"]("formControl",n.get("value")),a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"](" ",n.get("label").value," ")}}function F(t,e){if(1&t&&(a["\u0275\u0275elementStart"](0,"div",13),a["\u0275\u0275elementStart"](1,"div",14),a["\u0275\u0275template"](2,I,4,2,"ng-template",15),a["\u0275\u0275template"](3,O,4,2,"ng-template",15),a["\u0275\u0275template"](4,T,3,3,"ng-template",15),a["\u0275\u0275template"](5,M,2,2,"ng-template",15),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()),2&t){var n=e.$implicit,i=a["\u0275\u0275nextContext"]();a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngSwitch",n.get("valueType").value),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngSwitchCase",i.valueTypeEnum.STRING),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngSwitchCase",i.valueTypeEnum.NUMERIC),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngSwitchCase",i.valueTypeEnum.DATE_TIME),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngSwitchCase",i.valueTypeEnum.BOOLEAN)}}var P=function(t){function e(e,n,i,a,r,o,s){var l=t.call(this,e,n,r)||this;l.store=e,l.router=n,l.data=i,l.errorStateMatcher=a,l.dialogRef=r,l.fb=o,l.translate=s,l.valueTypeEnum=c.f,l.submitted=!1,l.filter=i.filter;for(var d=[],p=0,u=Object(c.A)(l.filter,s);p<u.length;p++){var m=u[p];d.push(l.createUserInputFormControl(m))}return l.userFilterFormGroup=l.fb.group({userInputs:l.fb.array(d)}),l}return Object(i.d)(e,t),e.prototype.createUserInputFormControl=function(t){var e=t.info.keyFilterPredicate.value,n=Object(d.o)(e.userValue)?e.userValue:e.defaultValue,i=this.fb.group({label:[t.label],valueType:[t.valueType],value:[n,t.valueType===c.f.NUMERIC||t.valueType===c.f.DATE_TIME?[s.Validators.required]:[]]});return i.get("value").valueChanges.subscribe((function(e){t.info.keyFilterPredicate.value.userValue=e})),i},e.prototype.userInputsFormArray=function(){return this.userFilterFormGroup.get("userInputs")},e.prototype.ngOnInit=function(){},e.prototype.isErrorState=function(t,e){var n=this.errorStateMatcher.isErrorState(t,e),i=!!(t&&t.invalid&&this.submitted);return n||i},e.prototype.cancel=function(){this.dialogRef.close(null)},e.prototype.save=function(){this.submitted=!0,this.dialogRef.close(this.filter)},e.\u0275fac=function(t){return new(t||e)(a["\u0275\u0275directiveInject"](p.Store),a["\u0275\u0275directiveInject"](u.Router),a["\u0275\u0275directiveInject"](o.MAT_DIALOG_DATA),a["\u0275\u0275directiveInject"](r.ErrorStateMatcher,4),a["\u0275\u0275directiveInject"](o.MatDialogRef),a["\u0275\u0275directiveInject"](s.FormBuilder),a["\u0275\u0275directiveInject"](m.TranslateService))},e.\u0275cmp=a["\u0275\u0275defineComponent"]({type:e,selectors:[["tb-user-filter-dialog"]],features:[a["\u0275\u0275ProvidersFeature"]([{provide:r.ErrorStateMatcher,useExisting:e}]),a["\u0275\u0275InheritDefinitionFeature"]],decls:23,vars:21,consts:[[2,"width","400px",3,"formGroup","ngSubmit"],["color","primary"],["fxFlex",""],["mat-icon-button","","type","button",3,"click"],[1,"material-icons"],["color","warn","mode","indeterminate",4,"ngIf"],["mat-dialog-content",""],[3,"disabled"],["formArrayName","userInputs",4,"ngFor","ngForOf"],["mat-dialog-actions","","fxLayoutAlign","end center"],["mat-button","","color","primary","type","button","cdkFocusInitial","",3,"disabled","click"],["mat-raised-button","","color","primary","type","submit",3,"disabled"],["color","warn","mode","indeterminate"],["formArrayName","userInputs"],[3,"ngSwitch"],[3,"ngSwitchCase"],[1,"mat-block"],["matInput","",3,"formControl"],["required","","type","number","matInput","",3,"formControl"],[1,"tb-title","no-padding","tb-required"],["dateText","filter.date","timeText","filter.time","required","",3,"formControl","showLabel"],["labelPosition","before",3,"formControl"]],template:function(t,e){1&t&&(a["\u0275\u0275elementStart"](0,"form",0),a["\u0275\u0275listener"]("ngSubmit",(function(){return e.save()})),a["\u0275\u0275elementStart"](1,"mat-toolbar",1),a["\u0275\u0275elementStart"](2,"h2"),a["\u0275\u0275text"](3),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](4,"span",2),a["\u0275\u0275elementStart"](5,"button",3),a["\u0275\u0275listener"]("click",(function(){return e.cancel()})),a["\u0275\u0275elementStart"](6,"mat-icon",4),a["\u0275\u0275text"](7,"close"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275template"](8,E,1,0,"mat-progress-bar",5),a["\u0275\u0275pipe"](9,"async"),a["\u0275\u0275elementStart"](10,"div",6),a["\u0275\u0275elementStart"](11,"fieldset",7),a["\u0275\u0275pipe"](12,"async"),a["\u0275\u0275template"](13,F,6,5,"div",8),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](14,"div",9),a["\u0275\u0275elementStart"](15,"button",10),a["\u0275\u0275listener"]("click",(function(){return e.cancel()})),a["\u0275\u0275pipe"](16,"async"),a["\u0275\u0275text"](17),a["\u0275\u0275pipe"](18,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](19,"button",11),a["\u0275\u0275pipe"](20,"async"),a["\u0275\u0275text"](21),a["\u0275\u0275pipe"](22,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()),2&t&&(a["\u0275\u0275property"]("formGroup",e.userFilterFormGroup),a["\u0275\u0275advance"](3),a["\u0275\u0275textInterpolate"](e.filter.filter),a["\u0275\u0275advance"](5),a["\u0275\u0275property"]("ngIf",a["\u0275\u0275pipeBind1"](9,9,e.isLoading$)),a["\u0275\u0275advance"](3),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](12,11,e.isLoading$)),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("ngForOf",e.userInputsFormArray().controls),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](16,13,e.isLoading$)),a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](18,15,"action.cancel")," "),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](20,17,e.isLoading$)||e.userFilterFormGroup.invalid||!e.userFilterFormGroup.dirty),a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](22,19,"action.update")," "))},directives:[s["\u0275angular_packages_forms_forms_y"],s.NgControlStatusGroup,s.FormGroupDirective,f.MatToolbar,h.b,g.MatButton,y.MatIcon,b.NgIf,o.MatDialogContent,b.NgForOf,o.MatDialogActions,h.e,v.MatProgressBar,s.FormArrayName,b.NgSwitch,b.NgSwitchCase,x.MatFormField,x.MatLabel,C.MatInput,s.DefaultValueAccessor,s.NgControlStatus,s.FormControlDirective,s.NumberValueAccessor,s.RequiredValidator,S.a,w.MatCheckbox],pipes:[b.AsyncPipe,m.TranslatePipe],encapsulation:2}),e}(l.a);!function(){a["\u0275setClassMetadata"](P,[{type:a.Component,args:[{selector:"tb-user-filter-dialog",templateUrl:"./user-filter-dialog.component.html",providers:[{provide:r.ErrorStateMatcher,useExisting:P}],styleUrls:[]}]}],(function(){return[{type:p.Store},{type:u.Router},{type:void 0,decorators:[{type:a.Inject,args:[o.MAT_DIALOG_DATA]}]},{type:r.ErrorStateMatcher,decorators:[{type:a.SkipSelf}]},{type:o.MatDialogRef},{type:s.FormBuilder},{type:m.TranslateService}]}),null)}()},A6E3:function(t,e,n){"use strict";n.d(e,"a",(function(){return p})),n.d(e,"b",(function(){return u}));var i=n("fXoL"),a=n("XiUz"),r=n("sYmb"),o=n("ofXK"),s=n("bSwM"),l=n("3Pt+"),c=n("uKK+");function d(t,e){if(1&t){var n=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"mat-checkbox",3),i["\u0275\u0275listener"]("ngModelChange",(function(t){return i["\u0275\u0275restoreView"](n),e.$implicit.display=t}))("ngModelChange",(function(){return i["\u0275\u0275restoreView"](n),i["\u0275\u0275nextContext"]().update()})),i["\u0275\u0275text"](1),i["\u0275\u0275elementEnd"]()}if(2&t){var a=e.$implicit;i["\u0275\u0275property"]("ngModel",a.display),i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",a.title," ")}}var p=new i.InjectionToken("DisplayColumnsPanelData"),u=function(){function t(t){this.data=t,this.columns=this.data.columns}return t.prototype.update=function(){this.data.columnsUpdated(this.columns)},t.\u0275fac=function(e){return new(e||t)(i["\u0275\u0275directiveInject"](p))},t.\u0275cmp=i["\u0275\u0275defineComponent"]({type:t,selectors:[["tb-display-columns-panel"]],decls:5,vars:3,consts:[["fxLayout","column",1,"mat-content","mat-padding"],["translate","",1,"tb-title"],["style","padding-bottom: 8px;",3,"ngModel","ngModelChange",4,"ngFor","ngForOf"],[2,"padding-bottom","8px",3,"ngModel","ngModelChange"]],template:function(t,e){1&t&&(i["\u0275\u0275elementStart"](0,"div",0),i["\u0275\u0275elementStart"](1,"label",1),i["\u0275\u0275text"](2,"entity.columns-to-display"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](3,d,2,2,"mat-checkbox",2),i["\u0275\u0275pipe"](4,"selectableColumns"),i["\u0275\u0275elementEnd"]()),2&t&&(i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("ngForOf",i["\u0275\u0275pipeBind1"](4,1,e.columns)))},directives:[a.f,r.TranslateDirective,o.NgForOf,s.MatCheckbox,l.NgControlStatus,l.NgModel],pipes:[c.a],styles:["[_nghost-%COMP%]{width:100%;height:100%;min-width:300px;overflow:hidden;background:#fff;border-radius:4px;box-shadow:0 7px 8px -4px rgba(0,0,0,.2),0 13px 19px 2px rgba(0,0,0,.14),0 5px 24px 4px rgba(0,0,0,.12)}[_nghost-%COMP%]   .mat-content[_ngcontent-%COMP%]{overflow:hidden;background-color:#fff}[_nghost-%COMP%]   .mat-padding[_ngcontent-%COMP%]{padding:16px}"]}),t}();!function(){i["\u0275setClassMetadata"](u,[{type:i.Component,args:[{selector:"tb-display-columns-panel",templateUrl:"./display-columns-panel.component.html",styleUrls:["./display-columns-panel.component.scss"]}]}],(function(){return[{type:void 0,decorators:[{type:i.Inject,args:[p]}]}]}),null)}()},AAbs:function(t,e,n){"use strict";n.d(e,"a",(function(){return Ut}));var i=n("mrSG"),a=n("fXoL"),r=n("RxGS"),o=n("mbhL"),s=n("M9IT"),l=n("Dh3D"),c=n("S+vS"),d=n("4r/P"),p=n("xgIS"),u=n("VRyK"),m=n("Kj3r"),f=n("/uUt"),h=n("vkgz"),g=n("3Tyt"),y=n("0EQZ"),b=n("2Vo4"),v=n("jtHE"),x=n("LRne"),C=n("Duvn"),S=n("JIr8"),w=n("lJxs"),E=n("05l1"),I=n("x+ZX"),O=n("IzEk"),T=function(){function t(t,e,n,i){this.attributeService=t,this.telemetryWsService=e,this.zone=n,this.translate=i,this.attributesSubject=new b.a([]),this.pageDataSubject=new b.a(Object(C.a)()),this.pageData$=this.pageDataSubject.asObservable(),this.selection=new y.SelectionModel(!0,[])}return t.prototype.connect=function(t){return this.attributesSubject.asObservable()},t.prototype.disconnect=function(t){this.attributesSubject.complete(),this.pageDataSubject.complete(),this.telemetrySubscriber&&(this.telemetrySubscriber.unsubscribe(),this.telemetrySubscriber=null)},t.prototype.loadAttributes=function(t,e,n,i){var a=this;void 0===i&&(i=!1),i&&(this.allAttributes=null,this.telemetrySubscriber&&(this.telemetrySubscriber.unsubscribe(),this.telemetrySubscriber=null)),this.selection.clear();var r=new v.a;return this.fetchAttributes(t,e,n).pipe(Object(S.a)((function(){return Object(x.a)(Object(C.a)())}))).subscribe((function(t){a.attributesSubject.next(t.data),a.pageDataSubject.next(t),r.next(t)})),r},t.prototype.fetchAttributes=function(t,e,n){return this.getAllAttributes(t,e).pipe(Object(w.a)((function(t){return n.filterData(t)})))},t.prototype.getAllAttributes=function(t,e){if(!this.allAttributes){var n=void 0;g.z.get(e)?(this.telemetrySubscriber=g.w.createEntityAttributesSubscription(this.telemetryWsService,t,e,this.zone),this.telemetrySubscriber.subscribe(),n=this.telemetrySubscriber.attributeData$()):n=this.attributeService.getEntityAttributes(t,e),this.allAttributes=n.pipe(Object(E.a)(1),Object(I.a)())}return this.allAttributes},t.prototype.isAllSelected=function(){var t=this.selection.selected.length;return this.attributesSubject.pipe(Object(w.a)((function(e){return t===e.length})))},t.prototype.isEmpty=function(){return this.attributesSubject.pipe(Object(w.a)((function(t){return!t.length})))},t.prototype.total=function(){return this.pageDataSubject.pipe(Object(w.a)((function(t){return t.totalElements})))},t.prototype.masterToggle=function(){var t=this;this.attributesSubject.pipe(Object(h.a)((function(e){t.selection.selected.length===e.length?t.selection.clear():e.forEach((function(e){t.selection.select(e)}))})),Object(O.a)(1)).subscribe()},t}(),M=n("BsGH"),F=n("U3y+"),P=n("8LU1"),D=n("Mldr"),k=n("rDax"),j=n("Rm96"),A=n("+rOU"),_=n("2lgB"),L=n("0lYY"),V=n("Xk9D"),R=n("OiFK"),N=n("4j5O"),G=n("oKkZ"),B=n("5xOD"),U=n("0G7Z"),q=n("21Fy"),W=n("3MWt"),z=n("//Q6"),K=n("l7P3"),H=n("sYmb"),$=n("0IaG"),Q=n("XiUz"),X=n("/t3+"),Y=n("znSr"),J=n("ofXK"),Z=n("bTqV"),tt=n("Qu3c"),et=n("NFeN"),nt=n("kmnG"),it=n("qFsG"),at=n("3Pt+"),rt=n("KEZ6"),ot=n("+0xr"),st=n("f0Cb"),lt=n("d3UM"),ct=n("FKr1"),dt=n("bSwM"),pt=n("joFe"),ut=n("eeD6"),mt=n("WKhm"),ft=["searchInput"];function ht(t,e){if(1&t&&(a["\u0275\u0275elementStart"](0,"mat-option",47),a["\u0275\u0275text"](1),a["\u0275\u0275pipe"](2,"translate"),a["\u0275\u0275elementEnd"]()),2&t){var n=e.$implicit,i=a["\u0275\u0275nextContext"](2);a["\u0275\u0275property"]("value",n),a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](2,2,i.telemetryTypeTranslationsMap.get(i.toTelemetryTypeFunc(n)))," ")}}function gt(t,e){if(1&t){var n=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementStart"](0,"mat-form-field",44),a["\u0275\u0275elementStart"](1,"mat-label",19),a["\u0275\u0275text"](2,"attribute.attributes-scope"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](3,"mat-select",45),a["\u0275\u0275listener"]("ngModelChange",(function(t){return a["\u0275\u0275restoreView"](n),a["\u0275\u0275nextContext"]().attributeScopeChanged(t)})),a["\u0275\u0275pipe"](4,"async"),a["\u0275\u0275template"](5,ht,3,4,"mat-option",46),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()}if(2&t){var i=a["\u0275\u0275nextContext"]();a["\u0275\u0275advance"](3),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](4,3,i.isLoading$)||i.attributeScopeSelectionReadonly)("ngModel",i.attributeScope),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("ngForOf",i.attributeScopes)}}function yt(t,e){if(1&t){var n=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementStart"](0,"button",9),a["\u0275\u0275listener"]("click",(function(t){return a["\u0275\u0275restoreView"](n),a["\u0275\u0275nextContext"]().addAttribute(t)})),a["\u0275\u0275pipe"](1,"async"),a["\u0275\u0275pipe"](2,"translate"),a["\u0275\u0275elementStart"](3,"mat-icon"),a["\u0275\u0275text"](4,"add"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()}if(2&t){var i=a["\u0275\u0275nextContext"]();a["\u0275\u0275propertyInterpolate"]("matTooltip",a["\u0275\u0275pipeBind1"](2,4,"action.add")),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](1,2,i.isLoading$))}}function bt(t,e){if(1&t){var n=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementStart"](0,"button",9),a["\u0275\u0275listener"]("click",(function(){return a["\u0275\u0275restoreView"](n),a["\u0275\u0275nextContext"]().reloadAttributes()})),a["\u0275\u0275pipe"](1,"async"),a["\u0275\u0275pipe"](2,"translate"),a["\u0275\u0275elementStart"](3,"mat-icon"),a["\u0275\u0275text"](4,"refresh"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()}if(2&t){var i=a["\u0275\u0275nextContext"]();a["\u0275\u0275propertyInterpolate"]("matTooltip",a["\u0275\u0275pipeBind1"](2,4,"action.refresh")),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](1,2,i.isLoading$))}}function vt(t,e){if(1&t){var n=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementStart"](0,"mat-header-cell",48),a["\u0275\u0275elementStart"](1,"mat-checkbox",49),a["\u0275\u0275listener"]("change",(function(t){a["\u0275\u0275restoreView"](n);var e=a["\u0275\u0275nextContext"]();return t?e.dataSource.masterToggle():null})),a["\u0275\u0275pipe"](2,"async"),a["\u0275\u0275pipe"](3,"async"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()}if(2&t){var i=a["\u0275\u0275nextContext"]();a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("checked",i.dataSource.selection.hasValue()&&a["\u0275\u0275pipeBind1"](2,2,i.dataSource.isAllSelected()))("indeterminate",i.dataSource.selection.hasValue()&&!a["\u0275\u0275pipeBind1"](3,4,i.dataSource.isAllSelected()))}}function xt(t,e){if(1&t){var n=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementStart"](0,"mat-cell"),a["\u0275\u0275elementStart"](1,"mat-checkbox",50),a["\u0275\u0275listener"]("click",(function(t){return a["\u0275\u0275restoreView"](n),t.stopPropagation()}))("change",(function(t){a["\u0275\u0275restoreView"](n);var i=e.$implicit,r=a["\u0275\u0275nextContext"]();return t?r.dataSource.selection.toggle(i):null})),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()}if(2&t){var i=e.$implicit,r=a["\u0275\u0275nextContext"]();a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("checked",r.dataSource.selection.isSelected(i))}}function Ct(t,e){1&t&&(a["\u0275\u0275elementStart"](0,"mat-header-cell",51),a["\u0275\u0275text"](1),a["\u0275\u0275pipe"](2,"translate"),a["\u0275\u0275elementEnd"]()),2&t&&(a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](2,1,"attribute.last-update-time")," "))}function St(t,e){if(1&t&&(a["\u0275\u0275elementStart"](0,"mat-cell"),a["\u0275\u0275text"](1),a["\u0275\u0275pipe"](2,"date"),a["\u0275\u0275elementEnd"]()),2&t){var n=e.$implicit;a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind2"](2,1,n.lastUpdateTs,"yyyy-MM-dd HH:mm:ss")," ")}}function wt(t,e){1&t&&(a["\u0275\u0275elementStart"](0,"mat-header-cell",52),a["\u0275\u0275text"](1),a["\u0275\u0275pipe"](2,"translate"),a["\u0275\u0275elementEnd"]()),2&t&&(a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](2,1,"attribute.key")," "))}function Et(t,e){if(1&t&&(a["\u0275\u0275elementStart"](0,"mat-cell"),a["\u0275\u0275text"](1),a["\u0275\u0275elementEnd"]()),2&t){var n=e.$implicit;a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"](" ",n.key," ")}}function It(t,e){1&t&&(a["\u0275\u0275elementStart"](0,"mat-header-cell",53),a["\u0275\u0275text"](1),a["\u0275\u0275pipe"](2,"translate"),a["\u0275\u0275elementEnd"]()),2&t&&(a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](2,1,"attribute.value")," "))}function Ot(t,e){if(1&t){var n=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementStart"](0,"mat-cell",54),a["\u0275\u0275listener"]("click",(function(t){a["\u0275\u0275restoreView"](n);var i=e.$implicit;return a["\u0275\u0275nextContext"]().editAttribute(t,i)})),a["\u0275\u0275elementStart"](1,"div",55),a["\u0275\u0275elementStart"](2,"span",7),a["\u0275\u0275text"](3),a["\u0275\u0275pipe"](4,"tbJson"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](5,"span",40),a["\u0275\u0275elementStart"](6,"mat-icon"),a["\u0275\u0275text"](7,"edit"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()}if(2&t){var i=e.$implicit,r=a["\u0275\u0275nextContext"]();a["\u0275\u0275advance"](3),a["\u0275\u0275textInterpolate"](a["\u0275\u0275pipeBind1"](4,2,i.value)),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("fxShow",!r.isClientSideTelemetryTypeMap.get(r.attributeScope))}}var Tt=function(){return{"mat-row-select":!0}};function Mt(t,e){1&t&&a["\u0275\u0275element"](0,"mat-header-row",56),2&t&&a["\u0275\u0275property"]("ngClass",a["\u0275\u0275pureFunction0"](1,Tt))}var Ft=function(t){return{"mat-row-select":!0,"mat-selected":t}};function Pt(t,e){if(1&t){var n=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementStart"](0,"mat-row",57),a["\u0275\u0275listener"]("click",(function(){a["\u0275\u0275restoreView"](n);var t=e.$implicit;return a["\u0275\u0275nextContext"]().dataSource.selection.toggle(t)})),a["\u0275\u0275elementEnd"]()}if(2&t){var i=e.$implicit,r=a["\u0275\u0275nextContext"]();a["\u0275\u0275property"]("ngClass",a["\u0275\u0275pureFunction1"](1,Ft,r.dataSource.selection.isSelected(i)))}}function Dt(t,e){if(1&t&&(a["\u0275\u0275elementStart"](0,"article",65),a["\u0275\u0275element"](1,"tb-dashboard",66),a["\u0275\u0275elementEnd"]()),2&t){var n=e.$implicit,i=a["\u0275\u0275nextContext"](2);a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("aliasController",i.aliasController)("widgets",n)("columns",20)("isEdit",!1)("isMobileDisabled",!0)("isEditActionEnabled",!1)("isRemoveActionEnabled",!1)}}function kt(t,e){1&t&&(a["\u0275\u0275elementStart"](0,"button",10),a["\u0275\u0275pipe"](1,"translate"),a["\u0275\u0275elementStart"](2,"mat-icon"),a["\u0275\u0275text"](3,"keyboard_arrow_left"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()),2&t&&a["\u0275\u0275propertyInterpolate"]("matTooltip",a["\u0275\u0275pipeBind1"](1,1,"attribute.prev-widget"))}function jt(t,e){if(1&t&&a["\u0275\u0275template"](0,kt,4,3,"button",67),2&t){var n=a["\u0275\u0275nextContext"](2);a["\u0275\u0275property"]("ngIf",n.widgetsCarouselIndex>0)}}function At(t,e){1&t&&(a["\u0275\u0275elementStart"](0,"button",10),a["\u0275\u0275pipe"](1,"translate"),a["\u0275\u0275elementStart"](2,"mat-icon"),a["\u0275\u0275text"](3,"keyboard_arrow_right"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()),2&t&&a["\u0275\u0275propertyInterpolate"]("matTooltip",a["\u0275\u0275pipeBind1"](1,1,"attribute.next-widget"))}function _t(t,e){if(1&t&&a["\u0275\u0275template"](0,At,4,3,"button",67),2&t){var n=a["\u0275\u0275nextContext"](2);a["\u0275\u0275property"]("ngIf",n.widgetsCarouselIndex<n.widgetsList.length-1)}}function Lt(t,e){if(1&t&&a["\u0275\u0275element"](0,"div",68),2&t){var n=e.$implicit;a["\u0275\u0275classProp"]("visible",n.index===n.currentIndex)}}function Vt(t,e){if(1&t){var n=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementStart"](0,"ngx-hm-carousel",58,59),a["\u0275\u0275listener"]("ngModelChange",(function(t){return a["\u0275\u0275restoreView"](n),a["\u0275\u0275nextContext"]().widgetsCarouselIndex=t}))("ngModelChange",(function(){return a["\u0275\u0275restoreView"](n),a["\u0275\u0275nextContext"]().onWidgetsCarouselIndexChanged()})),a["\u0275\u0275elementStart"](2,"section",60),a["\u0275\u0275template"](3,Dt,2,7,"article",61),a["\u0275\u0275elementEnd"](),a["\u0275\u0275template"](4,jt,1,1,"ng-template",null,62,a["\u0275\u0275templateRefExtractor"]),a["\u0275\u0275template"](6,_t,1,1,"ng-template",null,63,a["\u0275\u0275templateRefExtractor"]),a["\u0275\u0275template"](8,Lt,1,2,"ng-template",null,64,a["\u0275\u0275templateRefExtractor"]),a["\u0275\u0275elementEnd"]()}if(2&t){var i=a["\u0275\u0275nextContext"]();a["\u0275\u0275property"]("ngModel",i.widgetsCarouselIndex)("data",i.widgetsList)("infinite",!1),a["\u0275\u0275advance"](3),a["\u0275\u0275property"]("ngForOf",i.widgetsList)}}function Rt(t,e){1&t&&(a["\u0275\u0275elementStart"](0,"span",69),a["\u0275\u0275text"](1,"widgets-bundle.empty"),a["\u0275\u0275elementEnd"]())}function Nt(t,e){1&t&&(a["\u0275\u0275elementStart"](0,"span",69),a["\u0275\u0275text"](1,"widget.select-widgets-bundle"),a["\u0275\u0275elementEnd"]())}var Gt=function(t){return{count:t}},Bt=function(){return[10,20,30]},Ut=function(t){function e(e,n,i,a,r,s,l,c,p,u,m,f,h){var y=t.call(this,e)||this;y.store=e,y.attributeService=n,y.telemetryWsService=i,y.translate=a,y.dialog=r,y.overlay=s,y.viewContainerRef=l,y.dialogService=c,y.entityService=p,y.utils=u,y.dashboardUtils=m,y.widgetService=f,y.zone=h,y.telemetryTypeTranslationsMap=g.C,y.isClientSideTelemetryTypeMap=g.z,y.latestTelemetryTypes=g.r,y.mode="default",y.attributeScopes=[],y.toTelemetryTypeFunc=g.D,y.displayedColumns=["select","lastUpdateTs","key","value"],y.textSearchMode=!1,y.activeValue=!1,y.dirtyValue=!1,y.attributeScopeSelectionReadonly=!1,y.viewsInited=!1,y.selectedWidgetsBundleAlias=null,y.widgetsBundle=null,y.widgetsLoaded=!1,y.widgetsCarouselIndex=0,y.widgetsList=[],y.widgetsListCache=[],y.dirtyValue=!y.activeValue;var b={property:"key",direction:d.a.ASC};return y.pageLink=new o.b(10,0,null,b),y.dataSource=new T(y.attributeService,y.telemetryWsService,y.zone,y.translate),y}return Object(i.d)(e,t),Object.defineProperty(e.prototype,"disableAttributeScopeSelection",{get:function(){return this.disableAttributeScopeSelectionValue},set:function(t){this.disableAttributeScopeSelectionValue=Object(P.coerceBooleanProperty)(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"active",{set:function(t){this.activeValue!==t&&(this.activeValue=t,this.activeValue&&this.dirtyValue&&(this.dirtyValue=!1,this.viewsInited&&this.updateData(!0)))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"entityId",{set:function(t){this.entityIdValue!==t&&(this.entityIdValue=t,this.resetSortAndFilter(this.activeValue),this.activeValue||(this.dirtyValue=!0))},enumerable:!1,configurable:!0}),e.prototype.ngOnInit=function(){},e.prototype.attributeScopeChanged=function(t){this.attributeScope=t,this.mode="default",this.updateData(!0)},e.prototype.ngAfterViewInit=function(){var t=this;Object(p.a)(this.searchInputField.nativeElement,"keyup").pipe(Object(m.a)(150),Object(f.a)(),Object(h.a)((function(){t.paginator.pageIndex=0,t.updateData()}))).subscribe(),this.sort.sortChange.subscribe((function(){return t.paginator.pageIndex=0})),Object(u.a)(this.sort.sortChange,this.paginator.page).pipe(Object(h.a)((function(){return t.updateData()}))).subscribe(),this.viewsInited=!0,this.activeValue&&this.entityIdValue&&this.updateData(!0)},e.prototype.updateData=function(t){void 0===t&&(t=!1),this.pageLink.page=this.paginator.pageIndex,this.pageLink.pageSize=this.paginator.pageSize,this.pageLink.sortOrder.property=this.sort.active,this.pageLink.sortOrder.direction=d.a[this.sort.direction.toUpperCase()],this.dataSource.loadAttributes(this.entityIdValue,this.attributeScope,this.pageLink,t)},e.prototype.enterFilterMode=function(){var t=this;this.textSearchMode=!0,this.pageLink.textSearch="",setTimeout((function(){t.searchInputField.nativeElement.focus(),t.searchInputField.nativeElement.setSelectionRange(0,0)}),10)},e.prototype.exitFilterMode=function(){this.textSearchMode=!1,this.pageLink.textSearch=null,this.paginator.pageIndex=0,this.updateData()},e.prototype.resetSortAndFilter=function(t){void 0===t&&(t=!0);var e=this.entityIdValue.entityType;if(e===F.b.DEVICE||e===F.b.ENTITY_VIEW?(this.attributeScopes=Object.keys(g.d),this.attributeScopeSelectionReadonly=!1):(this.attributeScopes=[g.d.SERVER_SCOPE],this.attributeScopeSelectionReadonly=!0),this.mode="default",this.attributeScope=this.defaultAttributeScope,this.pageLink.textSearch=null,this.viewsInited){this.paginator.pageIndex=0;var n=this.sort.sortables.get("key");this.sort.active=n.id,this.sort.direction="asc",t&&this.updateData(!0)}},e.prototype.reloadAttributes=function(){this.updateData(!0)},e.prototype.addAttribute=function(t){var e=this;t&&t.stopPropagation(),this.dialog.open(D.a,{disableClose:!0,panelClass:["tb-dialog","tb-fullscreen-dialog"],data:{entityId:this.entityIdValue,attributeScope:this.attributeScope}}).afterClosed().subscribe((function(t){t&&e.reloadAttributes()}))},e.prototype.editAttribute=function(t,e){var n=this;if(t&&t.stopPropagation(),!this.isClientSideTelemetryTypeMap.get(this.attributeScope)){var r=t.target||t.srcElement||t.currentTarget,o=new k.OverlayConfig;o.backdropClass="cdk-overlay-transparent-backdrop",o.hasBackdrop=!0;o.positionStrategy=this.overlay.position().flexibleConnectedTo(r).withPositions([{originX:"end",originY:"center",overlayX:"end",overlayY:"center"}]);var s=this.overlay.create(o);s.backdropClick().subscribe((function(){s.dispose()}));var l=[{provide:j.a,useValue:{attributeValue:e.value}},{provide:k.OverlayRef,useValue:s}],c=a.Injector.create({parent:this.viewContainerRef.injector,providers:l}),d=s.attach(new A.ComponentPortal(j.b,this.viewContainerRef,c));d.onDestroy((function(){if(null!==d.instance.result){var t=d.instance.result,a=Object(i.a)({},e);a.value=t,n.attributeService.saveEntityAttributes(n.entityIdValue,n.attributeScope,[a]).subscribe((function(){n.reloadAttributes()}))}}))}},e.prototype.deleteAttributes=function(t){var e=this;t&&t.stopPropagation(),this.dataSource.selection.selected.length>0&&this.dialogService.confirm(this.translate.instant("attribute.delete-attributes-title",{count:this.dataSource.selection.selected.length}),this.translate.instant("attribute.delete-attributes-text"),this.translate.instant("action.no"),this.translate.instant("action.yes"),!0).subscribe((function(t){t&&e.attributeService.deleteEntityAttributes(e.entityIdValue,e.attributeScope,e.dataSource.selection.selected).subscribe((function(){e.reloadAttributes()}))}))},e.prototype.enterWidgetMode=function(){this.mode="widget",this.widgetsList=[],this.widgetsListCache=[],this.widgetsLoaded=!1,this.widgetsCarouselIndex=0,this.widgetsBundle=null,this.selectedWidgetsBundleAlias="cards";var t={id:this.utils.guid(),alias:this.entityName,filter:this.dashboardUtils.createSingleEntityFilter(this.entityIdValue)},e={};e[t.id]=t;var n={getStateParams:function(){return{}}};this.aliasController=new V.a(this.utils,this.entityService,this.translate,(function(){return n}),e,{});var i=this.attributeScope===g.r.LATEST_TELEMETRY?g.h.timeseries:g.h.attribute;this.widgetDatasource={type:L.a.entity,entityAliasId:t.id,dataKeys:[]};for(var a=0;a<this.dataSource.selection.selected.length;a++){var r=this.dataSource.selection.selected[a],o={name:r.key,label:r.key,type:i,color:this.utils.getMaterialColor(a),settings:{},_hash:Math.random()};this.widgetDatasource.dataKeys.push(o)}},e.prototype.onWidgetsCarouselIndexChanged=function(){if("widget"===this.mode)for(var t=0;t<this.widgetsList.length;t++)this.widgetsList[t].splice(0,this.widgetsList[t].length),t===this.widgetsCarouselIndex&&this.widgetsList[t].push(this.widgetsListCache[t][0])},e.prototype.onWidgetsBundleChanged=function(){var t=this;if("widget"===this.mode&&(this.widgetsList=[],this.widgetsListCache=[],this.widgetsCarouselIndex=0,this.widgetsBundle)){this.widgetsLoaded=!1;var e=this.widgetsBundle.alias,n=this.widgetsBundle.tenantId.id===G.a;this.widgetService.getBundleWidgetTypes(e,n).subscribe((function(i){for(var a=0,r=i=i.sort((function(t,e){var n=L.k[e.descriptor.type].localeCompare(L.k[t.descriptor.type]);return 0===n&&(n=e.createdTime-t.createdTime),n}));a<r.length;a++){var o=r[a],s=Object(U.e)(o);if(s.type!==L.k.static){var l=2*s.sizeX,c=2*s.sizeY,d=Math.floor(Math.max(0,(20-l)/2)),p={isSystemType:n,bundleAlias:e,typeAlias:s.alias,type:s.type,title:s.widgetName,sizeX:l,sizeY:c,row:0,col:d,config:JSON.parse(s.defaultConfig)};if(p.config.title=s.widgetName,p.config.datasources=[t.widgetDatasource],t.attributeScope===g.r.LATEST_TELEMETRY&&s.type!==L.k.rpc||s.type===L.k.latest){var u=t.widgetsListCache.push([p]);t.widgetsList.push(1===u?[p]:[])}}}t.widgetsLoaded=!0}))}},e.prototype.addWidgetToDashboard=function(){if("widget"===this.mode&&this.widgetsListCache.length>0){var t=this.widgetsListCache[this.widgetsCarouselIndex][0];this.dialog.open(W.a,{disableClose:!0,panelClass:["tb-dialog","tb-fullscreen-dialog"],data:{entityId:this.entityIdValue,entityName:this.entityName,widget:Object(z.e)(t)}}).afterClosed()}},e.prototype.exitWidgetMode=function(){this.selectedWidgetsBundleAlias=null,this.mode="default"},e.\u0275fac=function(t){return new(t||e)(a["\u0275\u0275directiveInject"](K.Store),a["\u0275\u0275directiveInject"](M.a),a["\u0275\u0275directiveInject"](_.a),a["\u0275\u0275directiveInject"](H.TranslateService),a["\u0275\u0275directiveInject"]($.MatDialog),a["\u0275\u0275directiveInject"](k.Overlay),a["\u0275\u0275directiveInject"](a.ViewContainerRef),a["\u0275\u0275directiveInject"](c.a),a["\u0275\u0275directiveInject"](q.a),a["\u0275\u0275directiveInject"](R.a),a["\u0275\u0275directiveInject"](N.a),a["\u0275\u0275directiveInject"](B.a),a["\u0275\u0275directiveInject"](a.NgZone))},e.\u0275cmp=a["\u0275\u0275defineComponent"]({type:e,selectors:[["tb-attribute-table"]],viewQuery:function(t,e){var n;(1&t&&(a["\u0275\u0275viewQuery"](ft,!0),a["\u0275\u0275viewQuery"](s.MatPaginator,!0),a["\u0275\u0275viewQuery"](l.MatSort,!0)),2&t)&&(a["\u0275\u0275queryRefresh"](n=a["\u0275\u0275loadQuery"]())&&(e.searchInputField=n.first),a["\u0275\u0275queryRefresh"](n=a["\u0275\u0275loadQuery"]())&&(e.paginator=n.first),a["\u0275\u0275queryRefresh"](n=a["\u0275\u0275loadQuery"]())&&(e.sort=n.first))},inputs:{disableAttributeScopeSelection:"disableAttributeScopeSelection",defaultAttributeScope:"defaultAttributeScope",active:"active",entityId:"entityId",entityName:"entityName"},features:[a["\u0275\u0275InheritDefinitionFeature"]],decls:95,vars:87,consts:[[1,"mat-padding","tb-entity-table","tb-absolute-fill"],["fxFlex","","fxLayout","column",1,"mat-elevation-z1","tb-entity-table-content"],[1,"mat-table-toolbar",3,"fxShow"],[1,"mat-toolbar-tools"],["fxLayout","row","fxLayoutAlign","start center","fxLayout.xs","column","fxLayoutAlign.xs","center start",1,"title-container"],[1,"tb-entity-table-title"],["class","mat-block tb-attribute-scope",4,"ngIf"],["fxFlex",""],["mat-icon-button","","matTooltipPosition","above",3,"disabled","matTooltip","click",4,"ngIf"],["mat-icon-button","","matTooltipPosition","above",3,"disabled","matTooltip","click"],["mat-icon-button","","matTooltipPosition","above",3,"matTooltip"],["matInput","",3,"ngModel","placeholder","ngModelChange"],["searchInput",""],["mat-icon-button","","matTooltipPosition","above",3,"matTooltip","click"],["color","primary",1,"mat-table-toolbar",3,"fxShow"],["fxLayout.xs","row wrap",1,"mat-toolbar-tools"],[1,"tb-entity-table-info"],["mat-icon-button","","matTooltipPosition","above",1,"button-widget-action",3,"fxShow","disabled","matTooltip","click"],["mat-raised-button","","color","accent","matTooltipPosition","above",1,"button-widget-action",3,"disabled","matTooltip","click"],["translate",""],["fxLayoutGap","8px","fxLayout.xs","row wrap",1,"mat-toolbar-tools"],["fxFlex","","fxLayout","row","fxLayoutAlign","start"],[1,"tb-details-subtitle"],["fxFlexOffset","5","fxFlex","",3,"selectFirstBundle","selectBundleAlias","ngModel","ngModelChange"],["mat-raised-button","","color","accent","matTooltipPosition","above",1,"button-widget-action",3,"fxShow","disabled","matTooltip","click"],["fxFlex","",1,"table-container",3,"fxShow"],["mat-table","","matSort","","matSortDisableClear","",3,"dataSource","matSortActive","matSortDirection"],["matColumnDef","select","sticky",""],["style","width: 30px;",4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","lastUpdateTs"],["mat-sort-header","","style","min-width: 150px; max-width: 150px; width: 150px;",4,"matHeaderCellDef"],["matColumnDef","key"],["mat-sort-header","","style","width: 40%",4,"matHeaderCellDef"],["matColumnDef","value"],["style","width: 60%",4,"matHeaderCellDef"],["class","tb-value-cell",3,"click",4,"matCellDef"],[3,"ngClass",4,"matHeaderRowDef","matHeaderRowDefSticky"],[3,"ngClass","click",4,"matRowDef","matRowDefColumns"],["fxLayoutAlign","center center","translate","",1,"no-data-found",3,"fxShow"],[3,"fxShow"],["showFirstLastButtons","",3,"fxShow","length","pageIndex","pageSize","pageSizeOptions"],["fxFlex","","class","carousel c-accent",3,"ngModel","data","infinite","ngModelChange",4,"ngIf"],["translate","","fxFlex","","fxLayoutAlign","center center","style","display: flex;","class","mat-headline",4,"ngIf"],[1,"mat-block","tb-attribute-scope"],[3,"disabled","ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[2,"width","30px"],[3,"checked","indeterminate","change"],[3,"checked","click","change"],["mat-sort-header","",2,"min-width","150px","max-width","150px","width","150px"],["mat-sort-header","",2,"width","40%"],[2,"width","60%"],[1,"tb-value-cell",3,"click"],["fxLayout","row",2,"align-items","center"],[3,"ngClass"],[3,"ngClass","click"],["fxFlex","",1,"carousel","c-accent",3,"ngModel","data","infinite","ngModelChange"],["carousel",""],["ngx-hm-carousel-container","",1,"content"],["class","item cursor-pointer","ngx-hm-carousel-item","",4,"ngFor","ngForOf"],["carouselPrev",""],["carouselNext",""],["carouselDot",""],["ngx-hm-carousel-item","",1,"item","cursor-pointer"],[1,"tb-absolute-fill",3,"aliasController","widgets","columns","isEdit","isMobileDisabled","isEditActionEnabled","isRemoveActionEnabled"],["mat-icon-button","","matTooltipPosition","above",3,"matTooltip",4,"ngIf"],[1,"ball"],["translate","","fxFlex","","fxLayoutAlign","center center",1,"mat-headline",2,"display","flex"]],template:function(t,e){1&t&&(a["\u0275\u0275elementStart"](0,"div",0),a["\u0275\u0275elementStart"](1,"div",1),a["\u0275\u0275elementStart"](2,"mat-toolbar",2),a["\u0275\u0275elementStart"](3,"div",3),a["\u0275\u0275elementStart"](4,"div",4),a["\u0275\u0275elementStart"](5,"span",5),a["\u0275\u0275text"](6),a["\u0275\u0275pipe"](7,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275template"](8,gt,6,5,"mat-form-field",6),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](9,"span",7),a["\u0275\u0275template"](10,yt,5,6,"button",8),a["\u0275\u0275template"](11,bt,5,6,"button",8),a["\u0275\u0275elementStart"](12,"button",9),a["\u0275\u0275listener"]("click",(function(){return e.enterFilterMode()})),a["\u0275\u0275pipe"](13,"async"),a["\u0275\u0275pipe"](14,"translate"),a["\u0275\u0275elementStart"](15,"mat-icon"),a["\u0275\u0275text"](16,"search"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](17,"mat-toolbar",2),a["\u0275\u0275elementStart"](18,"div",3),a["\u0275\u0275elementStart"](19,"button",10),a["\u0275\u0275pipe"](20,"translate"),a["\u0275\u0275elementStart"](21,"mat-icon"),a["\u0275\u0275text"](22,"search"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](23,"mat-form-field",7),a["\u0275\u0275elementStart"](24,"mat-label"),a["\u0275\u0275text"](25,"\xa0"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](26,"input",11,12),a["\u0275\u0275listener"]("ngModelChange",(function(t){return e.pageLink.textSearch=t})),a["\u0275\u0275pipe"](28,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](29,"button",13),a["\u0275\u0275listener"]("click",(function(){return e.exitFilterMode()})),a["\u0275\u0275pipe"](30,"translate"),a["\u0275\u0275elementStart"](31,"mat-icon"),a["\u0275\u0275text"](32,"close"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](33,"mat-toolbar",14),a["\u0275\u0275elementStart"](34,"div",15),a["\u0275\u0275elementStart"](35,"span",16),a["\u0275\u0275text"](36),a["\u0275\u0275pipe"](37,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](38,"span",7),a["\u0275\u0275elementStart"](39,"button",17),a["\u0275\u0275listener"]("click",(function(t){return e.deleteAttributes(t)})),a["\u0275\u0275pipe"](40,"async"),a["\u0275\u0275pipe"](41,"translate"),a["\u0275\u0275elementStart"](42,"mat-icon"),a["\u0275\u0275text"](43,"delete"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](44,"button",18),a["\u0275\u0275listener"]("click",(function(){return e.enterWidgetMode()})),a["\u0275\u0275pipe"](45,"async"),a["\u0275\u0275pipe"](46,"translate"),a["\u0275\u0275elementStart"](47,"mat-icon"),a["\u0275\u0275text"](48,"now_widgets"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](49,"span",19),a["\u0275\u0275text"](50,"attribute.show-on-widget"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](51,"mat-toolbar",14),a["\u0275\u0275elementStart"](52,"div",20),a["\u0275\u0275elementStart"](53,"div",21),a["\u0275\u0275elementStart"](54,"span",22),a["\u0275\u0275text"](55),a["\u0275\u0275pipe"](56,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](57,"tb-widgets-bundle-select",23),a["\u0275\u0275listener"]("ngModelChange",(function(t){return e.widgetsBundle=t}))("ngModelChange",(function(){return e.onWidgetsBundleChanged()})),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](58,"button",24),a["\u0275\u0275listener"]("click",(function(){return e.addWidgetToDashboard()})),a["\u0275\u0275pipe"](59,"async"),a["\u0275\u0275pipe"](60,"translate"),a["\u0275\u0275elementStart"](61,"mat-icon"),a["\u0275\u0275text"](62,"dashboard"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](63,"span",19),a["\u0275\u0275text"](64,"attribute.add-to-dashboard"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](65,"button",9),a["\u0275\u0275listener"]("click",(function(){return e.exitWidgetMode()})),a["\u0275\u0275pipe"](66,"async"),a["\u0275\u0275pipe"](67,"translate"),a["\u0275\u0275elementStart"](68,"mat-icon"),a["\u0275\u0275text"](69,"close"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](70,"div",25),a["\u0275\u0275elementStart"](71,"table",26),a["\u0275\u0275elementContainerStart"](72,27),a["\u0275\u0275template"](73,vt,4,6,"mat-header-cell",28),a["\u0275\u0275template"](74,xt,2,1,"mat-cell",29),a["\u0275\u0275elementContainerEnd"](),a["\u0275\u0275elementContainerStart"](75,30),a["\u0275\u0275template"](76,Ct,3,3,"mat-header-cell",31),a["\u0275\u0275template"](77,St,3,4,"mat-cell",29),a["\u0275\u0275elementContainerEnd"](),a["\u0275\u0275elementContainerStart"](78,32),a["\u0275\u0275template"](79,wt,3,3,"mat-header-cell",33),a["\u0275\u0275template"](80,Et,2,1,"mat-cell",29),a["\u0275\u0275elementContainerEnd"](),a["\u0275\u0275elementContainerStart"](81,34),a["\u0275\u0275template"](82,It,3,3,"mat-header-cell",35),a["\u0275\u0275template"](83,Ot,8,4,"mat-cell",36),a["\u0275\u0275elementContainerEnd"](),a["\u0275\u0275template"](84,Mt,1,2,"mat-header-row",37),a["\u0275\u0275template"](85,Pt,1,3,"mat-row",38),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](86,"span",39),a["\u0275\u0275pipe"](87,"async"),a["\u0275\u0275text"](88),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](89,"mat-divider",40),a["\u0275\u0275element"](90,"mat-paginator",41),a["\u0275\u0275pipe"](91,"async"),a["\u0275\u0275template"](92,Vt,10,4,"ngx-hm-carousel",42),a["\u0275\u0275template"](93,Rt,2,0,"span",43),a["\u0275\u0275template"](94,Nt,2,0,"span",43),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()),2&t&&(a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("fxShow","default"===e.mode&&!e.textSearchMode&&e.dataSource.selection.isEmpty()),a["\u0275\u0275advance"](4),a["\u0275\u0275textInterpolate"](a["\u0275\u0275pipeBind1"](7,47,e.telemetryTypeTranslationsMap.get(e.attributeScope))),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("ngIf",!e.disableAttributeScopeSelection),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("ngIf",!e.isClientSideTelemetryTypeMap.get(e.attributeScope)),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",!e.isClientSideTelemetryTypeMap.get(e.attributeScope)),a["\u0275\u0275advance"](1),a["\u0275\u0275propertyInterpolate"]("matTooltip",a["\u0275\u0275pipeBind1"](14,51,"action.search")),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](13,49,e.isLoading$)),a["\u0275\u0275advance"](5),a["\u0275\u0275property"]("fxShow","default"===e.mode&&e.textSearchMode&&e.dataSource.selection.isEmpty()),a["\u0275\u0275advance"](2),a["\u0275\u0275propertyInterpolate"]("matTooltip",a["\u0275\u0275pipeBind1"](20,53,"action.search")),a["\u0275\u0275advance"](7),a["\u0275\u0275propertyInterpolate"]("placeholder",a["\u0275\u0275pipeBind1"](28,55,"common.enter-search")),a["\u0275\u0275property"]("ngModel",e.pageLink.textSearch),a["\u0275\u0275advance"](3),a["\u0275\u0275propertyInterpolate"]("matTooltip",a["\u0275\u0275pipeBind1"](30,57,"action.close")),a["\u0275\u0275advance"](4),a["\u0275\u0275property"]("fxShow","default"===e.mode&&!e.dataSource.selection.isEmpty()),a["\u0275\u0275advance"](3),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind2"](37,59,e.attributeScope===e.latestTelemetryTypes.LATEST_TELEMETRY?"attribute.selected-telemetry":"attribute.selected-attributes",a["\u0275\u0275pureFunction1"](84,Gt,e.dataSource.selection.selected.length))," "),a["\u0275\u0275advance"](3),a["\u0275\u0275propertyInterpolate"]("matTooltip",a["\u0275\u0275pipeBind1"](41,64,"action.delete")),a["\u0275\u0275property"]("fxShow",!e.isClientSideTelemetryTypeMap.get(e.attributeScope))("disabled",a["\u0275\u0275pipeBind1"](40,62,e.isLoading$)),a["\u0275\u0275advance"](5),a["\u0275\u0275propertyInterpolate"]("matTooltip",a["\u0275\u0275pipeBind1"](46,68,"attribute.show-on-widget")),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](45,66,e.isLoading$)),a["\u0275\u0275advance"](7),a["\u0275\u0275property"]("fxShow","widget"===e.mode),a["\u0275\u0275advance"](4),a["\u0275\u0275textInterpolate"](a["\u0275\u0275pipeBind1"](56,70,"widgets-bundle.current")),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("selectFirstBundle",!1)("selectBundleAlias",e.selectedWidgetsBundleAlias)("ngModel",e.widgetsBundle),a["\u0275\u0275advance"](1),a["\u0275\u0275propertyInterpolate"]("matTooltip",a["\u0275\u0275pipeBind1"](60,74,"attribute.add-to-dashboard")),a["\u0275\u0275property"]("fxShow",e.widgetsList.length>0)("disabled",a["\u0275\u0275pipeBind1"](59,72,e.isLoading$)),a["\u0275\u0275advance"](7),a["\u0275\u0275propertyInterpolate"]("matTooltip",a["\u0275\u0275pipeBind1"](67,78,"action.close")),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](66,76,e.isLoading$)),a["\u0275\u0275advance"](5),a["\u0275\u0275property"]("fxShow","widget"!==e.mode),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("dataSource",e.dataSource)("matSortActive",e.pageLink.sortOrder.property)("matSortDirection",e.pageLink.sortDirection()),a["\u0275\u0275advance"](13),a["\u0275\u0275property"]("matHeaderRowDef",e.displayedColumns)("matHeaderRowDefSticky",!0),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("matRowDefColumns",e.displayedColumns),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("fxShow",a["\u0275\u0275pipeBind1"](87,80,e.dataSource.isEmpty())),a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate"](e.attributeScope===e.latestTelemetryTypes.LATEST_TELEMETRY?"attribute.no-telemetry-text":"attribute.no-attributes-text"),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("fxShow","widget"!==e.mode),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("fxShow","widget"!==e.mode)("length",a["\u0275\u0275pipeBind1"](91,82,e.dataSource.total()))("pageIndex",e.pageLink.page)("pageSize",e.pageLink.pageSize)("pageSizeOptions",a["\u0275\u0275pureFunction0"](86,Bt)),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("ngIf","widget"===e.mode&&e.widgetsList.length>0),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf","widget"===e.mode&&e.widgetsLoaded&&0===e.widgetsList.length&&e.widgetsBundle),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf","widget"===e.mode&&!e.widgetsBundle))},directives:[Q.b,Q.f,X.MatToolbar,Y.d,Q.e,J.NgIf,Z.MatButton,tt.MatTooltip,et.MatIcon,nt.MatFormField,nt.MatLabel,it.MatInput,at.DefaultValueAccessor,at.NgControlStatus,at.NgModel,H.TranslateDirective,Q.g,rt.a,Q.c,ot.MatTable,l.MatSort,ot.MatColumnDef,ot.MatHeaderCellDef,ot.MatCellDef,ot.MatHeaderRowDef,ot.MatRowDef,st.MatDivider,s.MatPaginator,lt.MatSelect,J.NgForOf,ct.MatOption,ot.MatHeaderCell,dt.MatCheckbox,ot.MatCell,l.MatSortHeader,ot.MatHeaderRow,J.NgClass,Y.b,ot.MatRow,pt.a,pt.c,ut.a],pipes:[H.TranslatePipe,J.AsyncPipe,J.DatePipe,mt.a],styles:["[_nghost-%COMP%]{width:100%;height:100%}[_nghost-%COMP%]   .tb-entity-table[_ngcontent-%COMP%]   .tb-entity-table-content[_ngcontent-%COMP%]{width:100%;height:100%;background:#fff}[_nghost-%COMP%]   .tb-entity-table[_ngcontent-%COMP%]   .tb-entity-table-content[_ngcontent-%COMP%]   .mat-toolbar-tools[_ngcontent-%COMP%]{min-height:auto}[_nghost-%COMP%]   .tb-entity-table[_ngcontent-%COMP%]   .tb-entity-table-content[_ngcontent-%COMP%]   .title-container[_ngcontent-%COMP%]{overflow:hidden}[_nghost-%COMP%]   .tb-entity-table[_ngcontent-%COMP%]   .tb-entity-table-content[_ngcontent-%COMP%]   .tb-entity-table-title[_ngcontent-%COMP%]{padding-right:20px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}[_nghost-%COMP%]   .tb-entity-table[_ngcontent-%COMP%]   .tb-entity-table-content[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]{overflow:auto}[_nghost-%COMP%]   .tb-entity-table[_ngcontent-%COMP%]   .tb-entity-table-content[_ngcontent-%COMP%]   .tb-entity-table-info[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}[_nghost-%COMP%]   .tb-entity-table[_ngcontent-%COMP%]   .tb-entity-table-content[_ngcontent-%COMP%]   .button-widget-action[_ngcontent-%COMP%]{margin-left:auto;overflow:hidden;text-overflow:ellipsis}@media screen and (max-width:599px){[_nghost-%COMP%]   .mat-toolbar[_ngcontent-%COMP%]{height:auto;min-height:100px}[_nghost-%COMP%]   .mat-toolbar[_ngcontent-%COMP%]   .tb-entity-table-title[_ngcontent-%COMP%]{padding-bottom:5px;width:100%}}[_nghost-%COMP%]     .mat-sort-header-sorted .mat-sort-header-arrow{opacity:1!important}[_nghost-%COMP%]     mat-form-field.tb-attribute-scope{font-size:16px;width:200px}[_nghost-%COMP%]     mat-form-field.tb-attribute-scope .mat-form-field-wrapper{padding-bottom:0}[_nghost-%COMP%]     mat-form-field.tb-attribute-scope .mat-form-field-underline{bottom:0}@media screen and (max-width:599px){[_nghost-%COMP%]     mat-form-field.tb-attribute-scope{width:100%}[_nghost-%COMP%]     mat-form-field.tb-attribute-scope .mat-form-field-infix{width:auto!important}}[_nghost-%COMP%]     mat-cell.tb-value-cell{cursor:pointer}[_nghost-%COMP%]     mat-cell.tb-value-cell mat-icon{height:24px;width:24px;font-size:24px;color:#757575}[_nghost-%COMP%]     .carousel .aniT{transition:all 1s linear}[_nghost-%COMP%]     .carousel .transition{transition:all .3s ease-in-out!important}[_nghost-%COMP%]     .carousel .content{display:-ms-flexbox;display:flex;height:100%}[_nghost-%COMP%]     .carousel .content .item{position:relative}[_nghost-%COMP%]     .carousel .direction{width:60px}[_nghost-%COMP%]     .carousel .ball{width:10px;height:10px;border-radius:50%;background:#000;border:2px solid;opacity:.5}[_nghost-%COMP%]     .carousel .ball.visible{opacity:1}[_nghost-%COMP%]     .carousel ul.indicators{pointer-events:none}[_nghost-%COMP%]     .carousel ul.indicators li{pointer-events:all}"],changeDetection:0}),e}(r.a);!function(){a["\u0275setClassMetadata"](Ut,[{type:a.Component,args:[{selector:"tb-attribute-table",templateUrl:"./attribute-table.component.html",styleUrls:["./attribute-table.component.scss"],changeDetection:a.ChangeDetectionStrategy.OnPush}]}],(function(){return[{type:K.Store},{type:M.a},{type:_.a},{type:H.TranslateService},{type:$.MatDialog},{type:k.Overlay},{type:a.ViewContainerRef},{type:c.a},{type:q.a},{type:R.a},{type:N.a},{type:B.a},{type:a.NgZone}]}),{disableAttributeScopeSelection:[{type:a.Input}],defaultAttributeScope:[{type:a.Input}],active:[{type:a.Input}],entityId:[{type:a.Input}],entityName:[{type:a.Input}],searchInputField:[{type:a.ViewChild,args:["searchInput"]}],paginator:[{type:a.ViewChild,args:[s.MatPaginator]}],sort:[{type:a.ViewChild,args:[l.MatSort]}]})}()},APwO:function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var i=n("U3y+"),a=function(t){this.entityType=i.b.RULE_CHAIN,this.id=t}},AUWA:function(t,e,n){"use strict";n.d(e,"a",(function(){return g}));var i=n("mrSG"),a=n("RxGS"),r=n("fXoL"),o=n("wZkO"),s=n("2Vo4"),l=n("zp9Z"),c=n("C/rb"),d=n("U3y+"),p=n("XOa3"),u=n("90vD"),m=n("3Tyt"),f=n("oKkZ"),h=n("l7P3"),g=function(t){function e(e){var n=t.call(this,e)||this;return n.store=e,n.attributeScopes=m.d,n.latestTelemetryTypes=m.r,n.authorities=l.a,n.entityTypes=d.b,n.auditLogModes=p.c,n.eventTypes=u.b,n.debugEventTypes=u.a,n.nullUid=f.a,n.entityTabsSubject=new s.a(null),n.entityTabsChanged=n.entityTabsSubject.asObservable(),n.authUser=Object(c.b)(e),n}return Object(i.d)(e,t),Object.defineProperty(e.prototype,"isEdit",{get:function(){return this.isEditValue},set:function(t){this.isEditValue=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"entity",{get:function(){return this.entityValue},set:function(t){this.setEntity(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"entitiesTableConfig",{get:function(){return this.entitiesTableConfigValue},set:function(t){this.setEntitiesTableConfig(t)},enumerable:!1,configurable:!0}),e.prototype.ngOnInit=function(){},e.prototype.ngAfterViewInit=function(){var t=this;this.entityTabsSubject.next(this.entityTabs.toArray()),this.entityTabs.changes.subscribe((function(){t.entityTabsSubject.next(t.entityTabs.toArray())}))},e.prototype.setEntity=function(t){this.entityValue=t},e.prototype.setEntitiesTableConfig=function(t){this.entitiesTableConfigValue=t},e.\u0275fac=function(t){return new(t||e)(r["\u0275\u0275directiveInject"](h.Store))},e.\u0275dir=r["\u0275\u0275defineDirective"]({type:e,viewQuery:function(t,e){var n;(1&t&&r["\u0275\u0275viewQuery"](o.MatTab,!0),2&t)&&(r["\u0275\u0275queryRefresh"](n=r["\u0275\u0275loadQuery"]())&&(e.entityTabs=n))},inputs:{isEdit:"isEdit",entity:"entity",entitiesTableConfig:"entitiesTableConfig",detailsForm:"detailsForm"},features:[r["\u0275\u0275InheritDefinitionFeature"]]}),e}(a.a);!function(){r["\u0275setClassMetadata"](g,[{type:r.Directive}],(function(){return[{type:h.Store}]}),{entityTabs:[{type:r.ViewChildren,args:[o.MatTab]}],isEdit:[{type:r.Input}],entity:[{type:r.Input}],entitiesTableConfig:[{type:r.Input}],detailsForm:[{type:r.Input}]})}()},Absi:function(t,e,n){"use strict";n.d(e,"a",(function(){return rt}));var i=n("mrSG"),a=n("fXoL"),r=n("FKr1"),o=n("0IaG"),s=n("gmuX"),l=n("mbhL"),c=n("2Vo4"),d=n("jtHE"),p=n("LRne"),u=n("Duvn"),m=n("JIr8"),f=n("lJxs"),h=n("05l1"),g=n("x+ZX"),y=function(){function t(t){this.states=t,this.statesSubject=new c.a([]),this.pageDataSubject=new c.a(Object(u.a)()),this.pageData$=this.pageDataSubject.asObservable()}return t.prototype.connect=function(t){return this.statesSubject.asObservable()},t.prototype.disconnect=function(t){this.statesSubject.complete(),this.pageDataSubject.complete()},t.prototype.loadStates=function(t,e){var n=this;void 0===e&&(e=!1),e&&(this.allStates=null);var i=new d.a;return this.fetchStates(t).pipe(Object(m.a)((function(){return Object(p.a)(Object(u.a)())}))).subscribe((function(t){n.statesSubject.next(t.data),n.pageDataSubject.next(t),i.next(t)})),i},t.prototype.fetchStates=function(t){return this.getAllStates().pipe(Object(f.a)((function(e){return t.filterData(e)})))},t.prototype.getAllStates=function(){if(!this.allStates){for(var t=[],e=0,n=Object.keys(this.states);e<n.length;e++){var a=n[e],r=this.states[a];t.push(Object(i.a)({id:a},r))}this.allStates=Object(p.a)(t).pipe(Object(h.a)(1),Object(g.a)())}return this.allStates},t.prototype.isEmpty=function(){return this.statesSubject.pipe(Object(f.a)((function(t){return!t.length})))},t.prototype.total=function(){return this.pageDataSubject.pipe(Object(f.a)((function(t){return t.totalElements})))},t}(),b=n("4r/P"),v=n("M9IT"),x=n("Dh3D"),C=n("xgIS"),S=n("VRyK"),w=n("Kj3r"),E=n("/uUt"),I=n("vkgz"),O=n("S+vS"),T=n("//Q6"),M=n("LBt+"),F=n("l7P3"),P=n("tyNb"),D=n("3Pt+"),k=n("sYmb"),j=n("/t3+"),A=n("XiUz"),_=n("bTqV"),L=n("NFeN"),V=n("ofXK"),R=n("znSr"),N=n("Qu3c"),G=n("kmnG"),B=n("qFsG"),U=n("+0xr"),q=n("f0Cb"),W=n("bv9b"),z=["searchInput"];function K(t,e){1&t&&a["\u0275\u0275element"](0,"mat-progress-bar",38)}function H(t,e){1&t&&(a["\u0275\u0275elementStart"](0,"mat-header-cell",39),a["\u0275\u0275text"](1),a["\u0275\u0275pipe"](2,"translate"),a["\u0275\u0275elementEnd"]()),2&t&&(a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](2,1,"dashboard.state-name")," "))}function $(t,e){if(1&t&&(a["\u0275\u0275elementStart"](0,"mat-cell"),a["\u0275\u0275text"](1),a["\u0275\u0275elementEnd"]()),2&t){var n=e.$implicit;a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"](" ",n.name," ")}}function Q(t,e){1&t&&(a["\u0275\u0275elementStart"](0,"mat-header-cell",40),a["\u0275\u0275text"](1),a["\u0275\u0275pipe"](2,"translate"),a["\u0275\u0275elementEnd"]()),2&t&&(a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](2,1,"dashboard.state-id")," "))}function X(t,e){if(1&t&&(a["\u0275\u0275elementStart"](0,"mat-cell"),a["\u0275\u0275text"](1),a["\u0275\u0275elementEnd"]()),2&t){var n=e.$implicit;a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"](" ",n.id," ")}}function Y(t,e){1&t&&(a["\u0275\u0275elementStart"](0,"mat-header-cell",41),a["\u0275\u0275text"](1),a["\u0275\u0275pipe"](2,"translate"),a["\u0275\u0275elementEnd"]()),2&t&&(a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](2,1,"dashboard.is-root-state")," "))}function J(t,e){if(1&t&&(a["\u0275\u0275elementStart"](0,"mat-cell"),a["\u0275\u0275elementStart"](1,"mat-icon",42),a["\u0275\u0275text"](2),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()),2&t){var n=e.$implicit;a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate"](n.root?"check_box":"check_box_outline_blank")}}function Z(t,e){1&t&&a["\u0275\u0275element"](0,"mat-header-cell",43)}function tt(t,e){if(1&t){var n=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementStart"](0,"mat-cell"),a["\u0275\u0275elementStart"](1,"div",44),a["\u0275\u0275elementStart"](2,"button",15),a["\u0275\u0275listener"]("click",(function(t){a["\u0275\u0275restoreView"](n);var i=e.$implicit;return a["\u0275\u0275nextContext"]().editState(t,i)})),a["\u0275\u0275pipe"](3,"async"),a["\u0275\u0275pipe"](4,"translate"),a["\u0275\u0275elementStart"](5,"mat-icon"),a["\u0275\u0275text"](6,"edit"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](7,"button",45),a["\u0275\u0275listener"]("click",(function(t){a["\u0275\u0275restoreView"](n);var i=e.$implicit;return a["\u0275\u0275nextContext"]().deleteState(t,i)})),a["\u0275\u0275pipe"](8,"async"),a["\u0275\u0275pipe"](9,"translate"),a["\u0275\u0275elementStart"](10,"mat-icon"),a["\u0275\u0275text"](11,"delete"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()}if(2&t){var i=e.$implicit,r=a["\u0275\u0275nextContext"]();a["\u0275\u0275advance"](2),a["\u0275\u0275propertyInterpolate"]("matTooltip",a["\u0275\u0275pipeBind1"](4,7,"dashboard.edit-state")),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](3,5,r.isLoading$)),a["\u0275\u0275advance"](5),a["\u0275\u0275propertyInterpolate"]("matTooltip",a["\u0275\u0275pipeBind1"](9,11,"dashboard.delete-state")),a["\u0275\u0275property"]("fxShow",!i.root)("disabled",a["\u0275\u0275pipeBind1"](8,9,r.isLoading$))}}function et(t,e){1&t&&a["\u0275\u0275element"](0,"mat-header-row",46)}function nt(t,e){1&t&&a["\u0275\u0275element"](0,"mat-row",46)}var it=function(){return{standalone:!0}},at=function(){return[5,10,15]},rt=function(t){function e(e,n,i,a,r,o,s,c,d){var p=t.call(this,e,n,r)||this;p.store=e,p.router=n,p.data=i,p.errorStateMatcher=a,p.dialogRef=r,p.fb=o,p.translate=s,p.dialogs=c,p.dialog=d,p.textSearchMode=!1,p.submitted=!1,p.states=p.data.states,p.statesFormGroup=p.fb.group({});var u={property:"name",direction:b.a.ASC};return p.pageLink=new l.b(5,0,null,u),p.displayedColumns=["name","id","root","actions"],p.dataSource=new y(p.states),p}return Object(i.d)(e,t),e.prototype.ngOnInit=function(){this.dataSource.loadStates(this.pageLink)},e.prototype.ngAfterViewInit=function(){var t=this;Object(C.a)(this.searchInputField.nativeElement,"keyup").pipe(Object(w.a)(150),Object(E.a)(),Object(I.a)((function(){t.paginator.pageIndex=0,t.updateData()}))).subscribe(),this.sort.sortChange.subscribe((function(){return t.paginator.pageIndex=0})),Object(S.a)(this.sort.sortChange,this.paginator.page).pipe(Object(I.a)((function(){return t.updateData()}))).subscribe()},e.prototype.updateData=function(t){void 0===t&&(t=!1),this.pageLink.page=this.paginator.pageIndex,this.pageLink.pageSize=this.paginator.pageSize,this.pageLink.sortOrder.property=this.sort.active,this.pageLink.sortOrder.direction=b.a[this.sort.direction.toUpperCase()],this.dataSource.loadStates(this.pageLink,t)},e.prototype.addState=function(t){this.openStateDialog(t)},e.prototype.editState=function(t,e){this.openStateDialog(t,e)},e.prototype.deleteState=function(t,e){var n=this;t&&t.stopPropagation();var i=this.translate.instant("dashboard.delete-state-title"),a=this.translate.instant("dashboard.delete-state-text",{stateName:e.name});this.dialogs.confirm(i,a,this.translate.instant("action.no"),this.translate.instant("action.yes")).subscribe((function(t){t&&(delete n.states[e.id],n.onStatesUpdated())}))},e.prototype.enterFilterMode=function(){var t=this;this.textSearchMode=!0,this.pageLink.textSearch="",setTimeout((function(){t.searchInputField.nativeElement.focus(),t.searchInputField.nativeElement.setSelectionRange(0,0)}),10)},e.prototype.exitFilterMode=function(){this.textSearchMode=!1,this.pageLink.textSearch=null,this.paginator.pageIndex=0,this.updateData()},e.prototype.openStateDialog=function(t,e){var n=this;void 0===e&&(e=null),t&&t.stopPropagation();var i=null===e,a=null;i||(a=e.id),this.dialog.open(M.a,{disableClose:!0,panelClass:["tb-dialog","tb-fullscreen-dialog"],data:{isAdd:i,states:this.states,state:Object(T.e)(e)}}).afterClosed().subscribe((function(t){t&&n.saveState(t,a)}))},e.prototype.saveState=function(t,e){var n={name:t.name,root:t.root,layouts:t.layouts};if(e&&e!==t.id?(delete this.states[e],this.states[t.id]=n):this.states[t.id]=n,t.root)for(var i=0,a=Object.keys(this.states);i<a.length;i++){var r=a[i],o=this.states[r];r!==t.id&&(o.root=!1)}else{for(var s=!1,l=0,c=Object.keys(this.states);l<c.length;l++){r=c[l];if((o=this.states[r]).root){s=!0;break}}if(!s){var d=Object.keys(this.states)[0];this.states[d].root=!0}}this.onStatesUpdated()},e.prototype.onStatesUpdated=function(){this.statesFormGroup.markAsDirty(),this.updateData(!0)},e.prototype.isErrorState=function(t,e){var n=this.errorStateMatcher.isErrorState(t,e),i=!!(t&&t.invalid&&this.submitted);return n||i},e.prototype.cancel=function(){this.dialogRef.close(null)},e.prototype.save=function(){this.submitted=!0,this.dialogRef.close(this.states)},e.\u0275fac=function(t){return new(t||e)(a["\u0275\u0275directiveInject"](F.Store),a["\u0275\u0275directiveInject"](P.Router),a["\u0275\u0275directiveInject"](o.MAT_DIALOG_DATA),a["\u0275\u0275directiveInject"](r.ErrorStateMatcher,4),a["\u0275\u0275directiveInject"](o.MatDialogRef),a["\u0275\u0275directiveInject"](D.FormBuilder),a["\u0275\u0275directiveInject"](k.TranslateService),a["\u0275\u0275directiveInject"](O.a),a["\u0275\u0275directiveInject"](o.MatDialog))},e.\u0275cmp=a["\u0275\u0275defineComponent"]({type:e,selectors:[["tb-manage-dashboard-states-dialog"]],viewQuery:function(t,e){var n;(1&t&&(a["\u0275\u0275viewQuery"](z,!0),a["\u0275\u0275viewQuery"](v.MatPaginator,!0),a["\u0275\u0275viewQuery"](x.MatSort,!0)),2&t)&&(a["\u0275\u0275queryRefresh"](n=a["\u0275\u0275loadQuery"]())&&(e.searchInputField=n.first),a["\u0275\u0275queryRefresh"](n=a["\u0275\u0275loadQuery"]())&&(e.paginator=n.first),a["\u0275\u0275queryRefresh"](n=a["\u0275\u0275loadQuery"]())&&(e.sort=n.first))},features:[a["\u0275\u0275ProvidersFeature"]([{provide:r.ErrorStateMatcher,useExisting:e}]),a["\u0275\u0275InheritDefinitionFeature"]],decls:78,vars:62,consts:[[2,"min-width","480px",3,"formGroup","ngSubmit"],["color","primary"],["translate",""],["fxFlex",""],["mat-button","","mat-icon-button","","type","button",3,"click"],[1,"material-icons"],["color","warn","mode","indeterminate",4,"ngIf"],["mat-dialog-content",""],[3,"disabled"],[1,"manage-dashboard-states"],[1,"tb-entity-table"],["fxLayout","column",1,"tb-entity-table-content"],[1,"mat-table-toolbar",3,"fxShow"],[1,"mat-toolbar-tools"],["translate","",1,"tb-entity-table-title"],["mat-icon-button","","type","button","matTooltipPosition","above",3,"disabled","matTooltip","click"],["mat-icon-button","","type","button","matTooltipPosition","above",3,"matTooltip"],["matInput","",3,"ngModel","ngModelOptions","placeholder","ngModelChange"],["searchInput",""],["mat-icon-button","","type","button","matTooltipPosition","above",3,"matTooltip","click"],[1,"table-container"],["mat-table","","matSort","","matSortDisableClear","",3,"dataSource","matSortActive","matSortDirection"],["matColumnDef","name"],["mat-sort-header","","style","width: 60%",4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","id"],["mat-sort-header","","style","width: 40%",4,"matHeaderCellDef"],["matColumnDef","root"],["mat-sort-header","","style","width: 80px",4,"matHeaderCellDef"],["matColumnDef","actions","stickyEnd",""],["style","min-width: 80px; max-width: 80px; width: 80px",4,"matHeaderCellDef"],["class","mat-row-select",4,"matHeaderRowDef","matHeaderRowDefSticky"],["class","mat-row-select",4,"matRowDef","matRowDefColumns"],["fxLayoutAlign","center center","translate","",1,"no-data-found",3,"fxShow"],[3,"length","pageIndex","pageSize","pageSizeOptions"],["mat-dialog-actions","","fxLayoutAlign","end center"],["mat-button","","color","primary","type","button","cdkFocusInitial","",3,"disabled","click"],["mat-raised-button","","color","primary","type","submit",3,"disabled"],["color","warn","mode","indeterminate"],["mat-sort-header","",2,"width","60%"],["mat-sort-header","",2,"width","40%"],["mat-sort-header","",2,"width","80px"],[1,"material-icons","mat-icon"],[2,"min-width","80px","max-width","80px","width","80px"],["fxFlex","","fxLayout","row"],["mat-icon-button","","type","button","matTooltipPosition","above",3,"fxShow","disabled","matTooltip","click"],[1,"mat-row-select"]],template:function(t,e){1&t&&(a["\u0275\u0275elementStart"](0,"form",0),a["\u0275\u0275listener"]("ngSubmit",(function(){return e.save()})),a["\u0275\u0275elementStart"](1,"mat-toolbar",1),a["\u0275\u0275elementStart"](2,"h2",2),a["\u0275\u0275text"](3,"dashboard.manage-states"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](4,"span",3),a["\u0275\u0275elementStart"](5,"button",4),a["\u0275\u0275listener"]("click",(function(){return e.cancel()})),a["\u0275\u0275elementStart"](6,"mat-icon",5),a["\u0275\u0275text"](7,"close"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275template"](8,K,1,0,"mat-progress-bar",6),a["\u0275\u0275pipe"](9,"async"),a["\u0275\u0275elementStart"](10,"div",7),a["\u0275\u0275elementStart"](11,"fieldset",8),a["\u0275\u0275pipe"](12,"async"),a["\u0275\u0275elementStart"](13,"div",9),a["\u0275\u0275elementStart"](14,"div",10),a["\u0275\u0275elementStart"](15,"div",11),a["\u0275\u0275elementStart"](16,"mat-toolbar",12),a["\u0275\u0275elementStart"](17,"div",13),a["\u0275\u0275elementStart"](18,"span",14),a["\u0275\u0275text"](19,"dashboard.states"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](20,"span",3),a["\u0275\u0275elementStart"](21,"button",15),a["\u0275\u0275listener"]("click",(function(t){return e.addState(t)})),a["\u0275\u0275pipe"](22,"async"),a["\u0275\u0275pipe"](23,"translate"),a["\u0275\u0275elementStart"](24,"mat-icon"),a["\u0275\u0275text"](25,"add"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](26,"button",15),a["\u0275\u0275listener"]("click",(function(){return e.enterFilterMode()})),a["\u0275\u0275pipe"](27,"async"),a["\u0275\u0275pipe"](28,"translate"),a["\u0275\u0275elementStart"](29,"mat-icon"),a["\u0275\u0275text"](30,"search"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](31,"mat-toolbar",12),a["\u0275\u0275elementStart"](32,"div",13),a["\u0275\u0275elementStart"](33,"button",16),a["\u0275\u0275pipe"](34,"translate"),a["\u0275\u0275elementStart"](35,"mat-icon"),a["\u0275\u0275text"](36,"search"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](37,"mat-form-field",3),a["\u0275\u0275elementStart"](38,"mat-label"),a["\u0275\u0275text"](39,"\xa0"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](40,"input",17,18),a["\u0275\u0275listener"]("ngModelChange",(function(t){return e.pageLink.textSearch=t})),a["\u0275\u0275pipe"](42,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](43,"button",19),a["\u0275\u0275listener"]("click",(function(){return e.exitFilterMode()})),a["\u0275\u0275pipe"](44,"translate"),a["\u0275\u0275elementStart"](45,"mat-icon"),a["\u0275\u0275text"](46,"close"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](47,"div",20),a["\u0275\u0275elementStart"](48,"table",21),a["\u0275\u0275elementContainerStart"](49,22),a["\u0275\u0275template"](50,H,3,3,"mat-header-cell",23),a["\u0275\u0275template"](51,$,2,1,"mat-cell",24),a["\u0275\u0275elementContainerEnd"](),a["\u0275\u0275elementContainerStart"](52,25),a["\u0275\u0275template"](53,Q,3,3,"mat-header-cell",26),a["\u0275\u0275template"](54,X,2,1,"mat-cell",24),a["\u0275\u0275elementContainerEnd"](),a["\u0275\u0275elementContainerStart"](55,27),a["\u0275\u0275template"](56,Y,3,3,"mat-header-cell",28),a["\u0275\u0275template"](57,J,3,1,"mat-cell",24),a["\u0275\u0275elementContainerEnd"](),a["\u0275\u0275elementContainerStart"](58,29),a["\u0275\u0275template"](59,Z,1,0,"mat-header-cell",30),a["\u0275\u0275template"](60,tt,12,13,"mat-cell",24),a["\u0275\u0275elementContainerEnd"](),a["\u0275\u0275template"](61,et,1,0,"mat-header-row",31),a["\u0275\u0275template"](62,nt,1,0,"mat-row",32),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](63,"span",33),a["\u0275\u0275pipe"](64,"async"),a["\u0275\u0275text"](65),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](66,"mat-divider"),a["\u0275\u0275element"](67,"mat-paginator",34),a["\u0275\u0275pipe"](68,"async"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](69,"div",35),a["\u0275\u0275elementStart"](70,"button",36),a["\u0275\u0275listener"]("click",(function(){return e.cancel()})),a["\u0275\u0275pipe"](71,"async"),a["\u0275\u0275text"](72),a["\u0275\u0275pipe"](73,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](74,"button",37),a["\u0275\u0275pipe"](75,"async"),a["\u0275\u0275text"](76),a["\u0275\u0275pipe"](77,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()),2&t&&(a["\u0275\u0275property"]("formGroup",e.statesFormGroup),a["\u0275\u0275advance"](8),a["\u0275\u0275property"]("ngIf",a["\u0275\u0275pipeBind1"](9,30,e.isLoading$)),a["\u0275\u0275advance"](3),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](12,32,e.isLoading$)),a["\u0275\u0275advance"](5),a["\u0275\u0275property"]("fxShow",!e.textSearchMode),a["\u0275\u0275advance"](5),a["\u0275\u0275propertyInterpolate"]("matTooltip",a["\u0275\u0275pipeBind1"](23,36,"dashboard.add-state")),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](22,34,e.isLoading$)),a["\u0275\u0275advance"](5),a["\u0275\u0275propertyInterpolate"]("matTooltip",a["\u0275\u0275pipeBind1"](28,40,"action.search")),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](27,38,e.isLoading$)),a["\u0275\u0275advance"](5),a["\u0275\u0275property"]("fxShow",e.textSearchMode),a["\u0275\u0275advance"](2),a["\u0275\u0275propertyInterpolate"]("matTooltip",a["\u0275\u0275pipeBind1"](34,42,"dashboard.search-states")),a["\u0275\u0275advance"](7),a["\u0275\u0275propertyInterpolate"]("placeholder",a["\u0275\u0275pipeBind1"](42,44,"dashboard.search-states")),a["\u0275\u0275property"]("ngModel",e.pageLink.textSearch)("ngModelOptions",a["\u0275\u0275pureFunction0"](60,it)),a["\u0275\u0275advance"](3),a["\u0275\u0275propertyInterpolate"]("matTooltip",a["\u0275\u0275pipeBind1"](44,46,"action.close")),a["\u0275\u0275advance"](5),a["\u0275\u0275property"]("dataSource",e.dataSource)("matSortActive",e.pageLink.sortOrder.property)("matSortDirection",e.pageLink.sortDirection()),a["\u0275\u0275advance"](13),a["\u0275\u0275property"]("matHeaderRowDef",e.displayedColumns)("matHeaderRowDefSticky",!0),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("matRowDefColumns",e.displayedColumns),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("fxShow",a["\u0275\u0275pipeBind1"](64,48,e.dataSource.isEmpty())),a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate"]("dashboard.no-states-text"),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("length",a["\u0275\u0275pipeBind1"](68,50,e.dataSource.total()))("pageIndex",e.pageLink.page)("pageSize",e.pageLink.pageSize)("pageSizeOptions",a["\u0275\u0275pureFunction0"](61,at)),a["\u0275\u0275advance"](3),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](71,52,e.isLoading$)),a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](73,54,"action.cancel")," "),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](75,56,e.isLoading$)||e.statesFormGroup.invalid||!e.statesFormGroup.dirty),a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](77,58,"action.save")," "))},directives:[D["\u0275angular_packages_forms_forms_y"],D.NgControlStatusGroup,D.FormGroupDirective,j.MatToolbar,k.TranslateDirective,A.b,_.MatButton,L.MatIcon,V.NgIf,o.MatDialogContent,A.f,R.d,N.MatTooltip,G.MatFormField,G.MatLabel,B.MatInput,D.DefaultValueAccessor,D.NgControlStatus,D.NgModel,U.MatTable,x.MatSort,U.MatColumnDef,U.MatHeaderCellDef,U.MatCellDef,U.MatHeaderRowDef,U.MatRowDef,A.e,q.MatDivider,v.MatPaginator,o.MatDialogActions,W.MatProgressBar,U.MatHeaderCell,x.MatSortHeader,U.MatCell,U.MatHeaderRow,U.MatRow],pipes:[V.AsyncPipe,k.TranslatePipe],styles:["[_nghost-%COMP%]   .manage-dashboard-states[_ngcontent-%COMP%]   .tb-entity-table[_ngcontent-%COMP%]   .tb-entity-table-content[_ngcontent-%COMP%]{width:100%;height:100%;background:#fff}[_nghost-%COMP%]   .manage-dashboard-states[_ngcontent-%COMP%]   .tb-entity-table[_ngcontent-%COMP%]   .tb-entity-table-content[_ngcontent-%COMP%]   .tb-entity-table-title[_ngcontent-%COMP%]{padding-right:20px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}[_nghost-%COMP%]   .manage-dashboard-states[_ngcontent-%COMP%]   .tb-entity-table[_ngcontent-%COMP%]   .tb-entity-table-content[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]{overflow:auto}[_nghost-%COMP%]     .manage-dashboard-states .mat-sort-header-sorted .mat-sort-header-arrow{opacity:1!important}"]}),e}(s.a);!function(){a["\u0275setClassMetadata"](rt,[{type:a.Component,args:[{selector:"tb-manage-dashboard-states-dialog",templateUrl:"./manage-dashboard-states-dialog.component.html",providers:[{provide:r.ErrorStateMatcher,useExisting:rt}],styleUrls:["./manage-dashboard-states-dialog.component.scss"]}]}],(function(){return[{type:F.Store},{type:P.Router},{type:void 0,decorators:[{type:a.Inject,args:[o.MAT_DIALOG_DATA]}]},{type:r.ErrorStateMatcher,decorators:[{type:a.SkipSelf}]},{type:o.MatDialogRef},{type:D.FormBuilder},{type:k.TranslateService},{type:O.a},{type:o.MatDialog}]}),{searchInputField:[{type:a.ViewChild,args:["searchInput"]}],paginator:[{type:a.ViewChild,args:[v.MatPaginator]}],sort:[{type:a.ViewChild,args:[x.MatSort]}]})}()},BOYq:function(t,e,n){"use strict";(function(t){n.d(e,"a",(function(){return L}));var i=n("mrSG"),a=n("fXoL"),r=n("Z9d0"),o=n("5xOD"),s=n("jtHE"),l=n("Cfvw"),c=n("cp0P"),d=n("LRne"),p=n("z6cu"),u=n("0G7Z"),m=n("Neop"),f=n("OiFK"),h=n("OCOE"),g=n("0lYY"),y=n("5+tZ"),b=n("vkgz"),v=n("JIr8"),x=n("lJxs"),C=n("eIep"),S=n("//Q6"),w=n("QXrN"),E=n("BY7U"),I=n("wtyh"),O=n("oKkZ"),T=n("do/i"),M=n("KMMH"),F=n("PCNd"),P=n("6C3e"),D=n("Zss7"),k=n("wd/R"),j=n.n(k),A=n("sYmb"),_=D,L=function(){function e(t,e,n,i,a,r,o){var s=this;this.window=t,this.modulesMap=e,this.dynamicComponentFactoryService=n,this.widgetService=i,this.utils=a,this.resources=r,this.translate=o,this.cssParser=new m.a,this.widgetsInfoInMemoryCache=new Map,this.widgetsInfoFetchQueue=new Map,this.cssParser.testMode=!1,this.widgetService.onWidgetTypeUpdated().subscribe((function(t){s.deleteWidgetInfoFromCache(t.bundleAlias,t.alias,t.tenantId.id===O.a)})),this.widgetService.onWidgetBundleDeleted().subscribe((function(t){s.deleteWidgetsBundleFromCache(t.alias,t.tenantId.id===O.a)})),this.init()}return e.prototype.init=function(){var e=this;if(this.init$)return this.init$;this.missingWidgetType=Object(i.a)({},u.b),this.errorWidgetType=Object(i.a)({},u.a),this.utils.widgetEditMode&&(this.editingWidgetType=Object(u.f)({widgetName:this.utils.editWidgetInfo.widgetName,alias:"customWidget",type:this.utils.editWidgetInfo.type,sizeX:this.utils.editWidgetInfo.sizeX,sizeY:this.utils.editWidgetInfo.sizeY,resources:this.utils.editWidgetInfo.resources,templateHtml:this.utils.editWidgetInfo.templateHtml,templateCss:this.utils.editWidgetInfo.templateCss,controllerScript:this.utils.editWidgetInfo.controllerScript,settingsSchema:this.utils.editWidgetInfo.settingsSchema,dataKeySettingsSchema:this.utils.editWidgetInfo.dataKeySettingsSchema,defaultConfig:this.utils.editWidgetInfo.defaultConfig},new T.a("1"),new M.a(O.a),"customWidgetBundle",void 0));var a=new s.a;this.init$=a.asObservable();var r=this.window;r.tinycolor=_,r.cssjs=m.a,r.moment=j.a,r.$=t,r.jQuery=t;var o=[];return o.push(Object(l.a)(n.e(19).then(n.t.bind(null,"CbsS",7)))),o.push(Object(l.a)(n.e(42).then(n.t.bind(null,"BElK",7))).pipe(Object(y.b)((function(){var t=[];return t.push(Object(l.a)(n.e(41).then(n.t.bind(null,"6QTo",7)))),t.push(Object(l.a)(n.e(48).then(n.t.bind(null,"53JH",7)))),t.push(Object(l.a)(n.e(45).then(n.t.bind(null,"qAHz",7)))),t.push(Object(l.a)(n.e(44).then(n.t.bind(null,"+8KB",7)))),t.push(Object(l.a)(n.e(43).then(n.t.bind(null,"ZKjk",7)))),t.push(Object(l.a)(n.e(46).then(n.t.bind(null,"zqSh",7)))),t.push(Object(l.a)(n.e(47).then(n.t.bind(null,"Z5FO",7)))),t.push(Object(l.a)(n.e(40).then(n.t.bind(null,"aATD",7)))),Object(c.a)(t)})))),o.push(Object(l.a)(n.e(22).then(n.bind(null,"bOIV"))).pipe(Object(b.a)((function(t){window.TbFlot=t.TbFlot})))),o.push(Object(l.a)(Promise.all([n.e(0),n.e(3),n.e(55)]).then(n.bind(null,"NZZV"))).pipe(Object(b.a)((function(t){window.TbAnalogueCompass=t.TbAnalogueCompass})))),o.push(Object(l.a)(Promise.all([n.e(0),n.e(3),n.e(57)]).then(n.bind(null,"0mCz"))).pipe(Object(b.a)((function(t){window.TbAnalogueRadialGauge=t.TbAnalogueRadialGauge})))),o.push(Object(l.a)(Promise.all([n.e(0),n.e(3),n.e(56)]).then(n.bind(null,"QfAU"))).pipe(Object(b.a)((function(t){window.TbAnalogueLinearGauge=t.TbAnalogueLinearGauge})))),o.push(Object(l.a)(Promise.all([n.e(0),n.e(10),n.e(21)]).then(n.bind(null,"4FQJ"))).pipe(Object(b.a)((function(t){window.TbCanvasDigitalGauge=t.TbCanvasDigitalGauge})))),o.push(Object(l.a)(n.e(6).then(n.bind(null,"n4i3"))).pipe(Object(b.a)((function(t){window.TbMapWidgetV2=t.TbMapWidgetV2})))),o.push(Object(l.a)(Promise.resolve().then(n.bind(null,"oTDE"))).pipe(Object(b.a)((function(t){window.TbTripAnimationWidget=t.TbTripAnimationWidget})))),Object(c.a)(o).subscribe((function(){var t=[e.loadWidgetResources(e.missingWidgetType,"global-widget-missing-type",[F.a,E.a]),e.loadWidgetResources(e.errorWidgetType,"global-widget-error-type",[F.a,E.a])];Object(c.a)(t).subscribe((function(){a.next()}),(function(t){var n=["Failed to load default widget types!"];t&&t.length&&(n=n.concat(t)),console.error("Failed to load default widget types!"),a.error({widgetInfo:e.errorWidgetType,errorMessages:n})}))}),(function(t){var n=["Failed to load widget modules!"];t&&t.length&&(n=n.concat(t)),console.error("Failed to load widget modules!"),a.error({widgetInfo:e.errorWidgetType,errorMessages:n})})),this.init$},e.prototype.getInstantWidgetInfo=function(t){var e=this.getWidgetInfoFromCache(t.bundleAlias,t.typeAlias,t.isSystemType);return e||{}},e.prototype.getWidgetInfo=function(t,e,n){var i=this;return this.init().pipe(Object(y.b)((function(){return i.getWidgetInfoInternal(t,e,n)})))},e.prototype.getWidgetInfoInternal=function(t,e,n){var i=this,a=new s.a,r=this.getWidgetInfoFromCache(t,e,n);if(r)a.next(r),a.complete();else if(this.utils.widgetEditMode)this.loadWidget(this.editingWidgetType,t,n,a);else{var o=this.createWidgetInfoCacheKey(t,e,n),l=this.widgetsInfoFetchQueue.get(o);l?l.push(a):(l=new Array,this.widgetsInfoFetchQueue.set(o,l),this.widgetService.getWidgetType(t,e,n,{ignoreErrors:!0}).subscribe((function(e){i.loadWidget(e,t,n,a)}),(function(){a.next(i.missingWidgetType),a.complete(),i.resolveWidgetsInfoFetchQueue(o,i.missingWidgetType)})))}return a.asObservable()},e.prototype.loadWidget=function(t,e,n,i){var a=this,r=Object(u.e)(t),o=this.createWidgetInfoCacheKey(e,r.alias,n),s=null;try{s=this.createWidgetControllerDescriptor(r,o)}catch(d){var l="Failed to compile widget script. \n Error: "+this.utils.parseException(d).message;this.processWidgetLoadError([l],o,i)}if(s){var c="widget-type-"+(n?"sys-":"")+e+"-"+r.alias;this.loadWidgetResources(r,c,[F.a,E.a]).subscribe((function(){s.settingsSchema&&(r.typeSettingsSchema=s.settingsSchema),s.dataKeySettingsSchema&&(r.typeDataKeySettingsSchema=s.dataKeySettingsSchema),r.typeParameters=s.typeParameters,r.actionSources=s.actionSources,r.widgetTypeFunction=s.widgetTypeFunction,a.putWidgetInfoToCache(r,e,r.alias,n),i&&(i.next(r),i.complete()),a.resolveWidgetsInfoFetchQueue(o,r)}),(function(t){a.processWidgetLoadError(t,o,i)}))}},e.prototype.loadWidgetResources=function(t,e,n){var a=this;this.cssParser.cssPreviewNamespace=e,this.cssParser.createStyleElement(e,t.templateCss);var r,o=[],s=[];return t.resources.length>0&&t.resources.filter((function(t){return t.isModule})).forEach((function(t){s.push(a.resources.loadModules(t.url,a.modulesMap).pipe(Object(v.a)((function(e){return Object(d.a)((null==e?void 0:e.message)?e.message:"Failed to load widget resource module: '"+t.url+"'")}))))})),t.resources.filter((function(t){return!t.isModule})).forEach((function(t){o.push(a.resources.loadResource(t.url).pipe(Object(v.a)((function(e){return Object(d.a)("Failed to load widget resource: '"+t.url+"'")}))))})),r=s.length?Object(c.a)(s).pipe(Object(x.a)((function(t){var e=t.find((function(t){return"string"==typeof t}));if(e)return e;var i=t.flat();return n&&n.length&&(i=i.concat(n)),i}))):n&&n.length?Object(d.a)(n):Object(d.a)([]),o.push(r.pipe(Object(y.b)((function(e){return"string"==typeof e?Object(d.a)(e):a.dynamicComponentFactoryService.createDynamicComponentFactory(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(i.d)(e,t),e}(w.a),t.templateHtml,e).pipe(Object(x.a)((function(e){return t.componentFactory=e,null})),Object(v.a)((function(t){var e="Failed to compile widget html. \n Error: "+a.utils.parseException(t).message;return Object(d.a)(e)})))})))),Object(c.a)(o).pipe(Object(C.a)((function(t){var e;return t&&t.length&&(e=t.filter((function(t){return t&&t.length>0}))),e&&e.length?Object(p.a)(e):Object(d.a)(null)})))},e.prototype.createWidgetControllerDescriptor=function(t,e){var n="return function "+e+" (ctx) {\n    var self = this;\n    self.ctx = ctx;\n\n";n+=t.controllerScript,n+="\n};\n";try{var a=new Function(n).apply(this),r=new a,o={widgetTypeFunction:a};Object(S.s)(r.getSettingsSchema)&&(o.settingsSchema=r.getSettingsSchema()),Object(S.s)(r.getDataKeySettingsSchema)&&(o.dataKeySettingsSchema=r.getDataKeySettingsSchema()),Object(S.s)(r.typeParameters)?o.typeParameters=r.typeParameters():o.typeParameters={},Object(S.s)(r.useCustomDatasources)?o.typeParameters.useCustomDatasources=r.useCustomDatasources():o.typeParameters.useCustomDatasources=!1,Object(S.z)(o.typeParameters.hasDataPageLink)&&(o.typeParameters.hasDataPageLink=!1),Object(S.z)(o.typeParameters.maxDatasources)&&(o.typeParameters.maxDatasources=-1),Object(S.z)(o.typeParameters.maxDataKeys)&&(o.typeParameters.maxDataKeys=-1),Object(S.z)(o.typeParameters.singleEntity)&&(o.typeParameters.singleEntity=!1),Object(S.z)(o.typeParameters.warnOnPageDataOverflow)&&(o.typeParameters.warnOnPageDataOverflow=!0),Object(S.z)(o.typeParameters.ignoreDataUpdateOnIntervalTick)&&(o.typeParameters.ignoreDataUpdateOnIntervalTick=!1),Object(S.z)(o.typeParameters.dataKeysOptional)&&(o.typeParameters.dataKeysOptional=!1),Object(S.z)(o.typeParameters.stateData)&&(o.typeParameters.stateData=!1),Object(S.s)(r.actionSources)?o.actionSources=r.actionSources():o.actionSources={};for(var s=0,l=Object.keys(g.i);s<l.length;s++){var c=l[s];o.actionSources[c]=Object(i.a)({},g.i[c]),o.actionSources[c].name=this.translate.instant(o.actionSources[c].name)}return o}catch(d){throw this.utils.processWidgetException(d),d}},e.prototype.processWidgetLoadError=function(t,e,n){n&&n.error({widgetInfo:this.errorWidgetType,errorMessages:t}),this.resolveWidgetsInfoFetchQueue(e,this.errorWidgetType,t)},e.prototype.resolveWidgetsInfoFetchQueue=function(t,e,n){var i=this.widgetsInfoFetchQueue.get(t);i&&(i.forEach((function(t){n?t.error({widgetInfo:e,errorMessages:n}):(t.next(e),t.complete())})),this.widgetsInfoFetchQueue.delete(t))},e.prototype.createWidgetInfoCacheKey=function(t,e,n){return(n?"sys_":"")+t+"_"+e},e.prototype.getWidgetInfoFromCache=function(t,e,n){var i=this.createWidgetInfoCacheKey(t,e,n);return this.widgetsInfoInMemoryCache.get(i)},e.prototype.putWidgetInfoToCache=function(t,e,n,i){var a=this.createWidgetInfoCacheKey(e,n,i);this.widgetsInfoInMemoryCache.set(a,t)},e.prototype.deleteWidgetInfoFromCache=function(t,e,n){var i=this.createWidgetInfoCacheKey(t,e,n);this.widgetsInfoInMemoryCache.delete(i)},e.prototype.deleteWidgetsBundleFromCache=function(t,e){var n=this,i=(e?"sys_":"")+t;this.widgetsInfoInMemoryCache.forEach((function(t,e){e.startsWith(i)&&n.widgetsInfoInMemoryCache.delete(e)}))},e.\u0275fac=function(t){return new(t||e)(a["\u0275\u0275inject"](I.b),a["\u0275\u0275inject"](P.MODULES_MAP,8),a["\u0275\u0275inject"](r.a),a["\u0275\u0275inject"](o.a),a["\u0275\u0275inject"](f.a),a["\u0275\u0275inject"](h.a),a["\u0275\u0275inject"](A.TranslateService))},e.\u0275prov=a["\u0275\u0275defineInjectable"]({token:e,factory:e.\u0275fac}),e}();!function(){a["\u0275setClassMetadata"](L,[{type:a.Injectable}],(function(){return[{type:Window,decorators:[{type:a.Inject,args:[I.b]}]},{type:void 0,decorators:[{type:a.Optional},{type:a.Inject,args:[P.MODULES_MAP]}]},{type:r.a},{type:o.a},{type:f.a},{type:h.a},{type:A.TranslateService}]}),null)}()}).call(this,n("xexB"))},BY7U:function(t,e,n){"use strict";n.d(e,"a",(function(){return rn}));var i=n("fXoL"),a=n("ofXK"),r=n("PCNd"),o=n("Bdm/"),s=n("A6E3"),l=n("nkFp"),c=n("1iWl"),d=n("wst2"),p=n("xRAe"),u=n("bkji"),m=n("g8Nv"),f=n("2/1y"),h=n("CyoE"),g=n("m4rf"),y=n("hBar"),b=function(){function t(){}return t.\u0275mod=i["\u0275\u0275defineNgModule"]({type:t}),t.\u0275inj=i["\u0275\u0275defineInjector"]({factory:function(e){return new(e||t)},imports:[[a.CommonModule,r.a]]}),t}();void(("undefined"==typeof ngJitMode||ngJitMode)&&i["\u0275\u0275setNgModuleScope"](b,{declarations:[f.a,h.a,g.a,y.a],imports:[a.CommonModule,r.a],exports:[f.a,h.a,g.a,y.a]}));var v=n("mrSG"),x=n("RxGS"),C=(n("0G7Z"),n("OiFK"));function S(t){var e,n=t.startDate,i=t.endDate;if(0===n.diff(i,"days"))e=n.format("DD MMM YYYY");else{var a="DD";n.month()===i.month()&&n.year()===i.year()||(a+=" MMM"),n.year()!==i.year()&&(a+=" YYYY"),e=n.format(a)+" - "+i.format("DD MMM YYYY")}return e}var w={hour:{ts:36e5,label:"Hour"},day:{ts:864e5,label:"Day"},week:{ts:6048e5,label:"Week"},twoWeeks:{ts:12096e5,label:"2 weeks"},month:{ts:2629743e3,label:"Month"},threeMonths:{ts:7889229e3,label:"3 months"},sixMonths:{ts:15778458e3,label:"6 months"}},E=n("wd/R"),I=n("rDax"),O=n("+rOU"),T=n("aX2P"),M=n("//Q6"),F=n("l7P3"),P=n("znSr"),D=n("kmnG"),k=n("d3UM"),j=n("3Pt+"),A=n("FKr1"),_=n("bTqV"),L=n("NFeN"),V=n("XiUz"),R=n("sYmb"),N=n("YhS8"),G=n("qFsG"),B=["datePicker"];function U(t,e){1&t&&(i["\u0275\u0275elementStart"](0,"mat-label",13),i["\u0275\u0275text"](1,"widgets.date-range-navigator.localizationMap.Date picker"),i["\u0275\u0275elementEnd"]())}function q(t,e){1&t&&(i["\u0275\u0275elementStart"](0,"mat-label",13),i["\u0275\u0275text"](1,"widgets.date-range-navigator.localizationMap.Interval"),i["\u0275\u0275elementEnd"]())}function W(t,e){if(1&t&&(i["\u0275\u0275elementStart"](0,"mat-option",5),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&t){var n=i["\u0275\u0275nextContext"]();i["\u0275\u0275property"]("value",n.customInterval.ts),i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,2,"widgets.date-range-navigator.localizationMap."+n.customInterval.label)," ")}}function z(t,e){if(1&t&&(i["\u0275\u0275elementStart"](0,"mat-option",5),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&t){var n=e.$implicit;i["\u0275\u0275property"]("value",n.value.ts),i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,2,"widgets.date-range-navigator.localizationMap."+n.value.label)," ")}}function K(t,e){1&t&&(i["\u0275\u0275elementStart"](0,"mat-label",13),i["\u0275\u0275text"](1,"widgets.date-range-navigator.localizationMap.Step size"),i["\u0275\u0275elementEnd"]())}function H(t,e){if(1&t&&(i["\u0275\u0275elementStart"](0,"mat-option",5),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&t){var n=e.$implicit;i["\u0275\u0275property"]("value",n.value.ts),i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,2,"widgets.date-range-navigator.localizationMap."+n.value.label)," ")}}var $=function(t,e,n){return{"short-mode":t,"labels-hidden":e,"long-mode":n}};function Q(t,e){if(1&t&&(i["\u0275\u0275elementStart"](0,"mat-form-field",4),i["\u0275\u0275element"](1,"input",5),i["\u0275\u0275elementEnd"]()),2&t){var n=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngModel",n.model.chosenLabel)}}function X(t,e){if(1&t){var n=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"div",6),i["\u0275\u0275element"](1,"span",7),i["\u0275\u0275elementStart"](2,"button",8),i["\u0275\u0275listener"]("click",(function(){return i["\u0275\u0275restoreView"](n),i["\u0275\u0275nextContext"]().apply()})),i["\u0275\u0275text"](3),i["\u0275\u0275pipe"](4,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()}2&t&&(i["\u0275\u0275advance"](3),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](4,1,"action.ok")," "))}var Y=function(t){function e(e,n,i,a){var r=t.call(this,a)||this;return r.utils=e,r.overlay=n,r.viewContainerRef=i,r.store=a,r.datesMap=w,r.advancedModel={},r.firstUpdate=!0,r.originalOrder=function(t,e){return 0},r}return Object(v.d)(e,t),e.prototype.ngOnInit=function(){var t,e=this;if(this.settings=this.ctx.settings,this.settings.useSessionStorage=!Object(M.n)(this.settings.useSessionStorage)||this.settings.useSessionStorage,this.settings.useSessionStorage&&(t=this.readFromStorage("date-range")),t)this.advancedModel={chosenLabel:t.name,startDate:E(t.start),endDate:E(t.end)};else{var n=new Date;n.setHours(23,59,59,999),this.advancedModel={startDate:E(n.getTime()+1-this.datesMap[this.settings.initialInterval||"week"].ts),endDate:E(n.getTime())},this.advancedModel.chosenLabel=S(this.advancedModel)}this.selectedStepSize=this.datesMap[this.settings.stepSize||"day"].ts,this.widgetContextTimewindowSync(),this.dashboardTimewindowChangedSubscription=this.ctx.dashboard.dashboardTimewindowChanged.subscribe((function(){e.widgetContextTimewindowSync()}))},e.prototype.ngOnDestroy=function(){this.dashboardTimewindowChangedSubscription&&(this.dashboardTimewindowChangedSubscription.unsubscribe(),this.dashboardTimewindowChangedSubscription=null)},e.prototype.openNavigatorPanel=function(t){var e=this;t&&t.stopPropagation(),this.datePickerSelect.close();var n=t.target||t.srcElement||t.currentTarget,a=new I.OverlayConfig;a.backdropClass="cdk-overlay-transparent-backdrop",a.hasBackdrop=!0,a.panelClass="tb-date-range-navigator-panel";a.positionStrategy=this.overlay.position().flexibleConnectedTo(n).withPositions([{originX:"end",originY:"bottom",overlayX:"end",overlayY:"top"}]);var r=this.overlay.create(a);r.backdropClick().subscribe((function(){r.dispose()}));var o,s,l=[{provide:J,useValue:{model:(o=this.advancedModel,s={},s.chosenLabel=o.chosenLabel,s.startDate=o.startDate?o.startDate.clone():void 0,s.endDate=o.endDate?o.endDate.clone():void 0,s),settings:this.settings,onChange:function(t){e.advancedModel=t,e.triggerChange()}}},{provide:I.OverlayRef,useValue:r}],c=i.Injector.create({parent:this.viewContainerRef.injector,providers:l});r.attach(new O.ComponentPortal(Z,this.viewContainerRef,c)),this.ctx.detectChanges()},e.prototype.widgetContextTimewindowSync=function(){this.firstUpdate||this.updateAdvancedModel(),this.updateDateInterval(),this.settings.useSessionStorage&&this.updateStorageDate(),this.firstUpdate&&(this.firstUpdate=!1,this.updateTimewindow(this.advancedModel.startDate.valueOf(),this.advancedModel.endDate.valueOf())),this.ctx.detectChanges()},e.prototype.updateAdvancedModel=function(){var t=this.ctx.dashboardTimewindow;if(t.selectedTab===T.k.HISTORY&&t.history.historyType===T.d.FIXED){var e=t.history.fixedTimewindow;this.advancedModel.startDate=E(e.startTimeMs),this.advancedModel.endDate=E(e.endTimeMs),this.advancedModel.chosenLabel=S(this.advancedModel)}},e.prototype.updateTimewindow=function(t,e){this.ctx.dashboard.onUpdateTimewindow(t,e,10,!0)},e.prototype.updateDateInterval=function(){for(var t=this.advancedModel.endDate.valueOf()-this.advancedModel.startDate.valueOf(),e=0,n=Object.keys(this.datesMap);e<n.length;e++){var i=n[e];if(Object.prototype.hasOwnProperty.call(this.datesMap,i)&&(this.datesMap[i].ts===t||this.datesMap[i].ts===t+1||this.datesMap[i].ts===t-1))return this.selectedDateInterval=this.datesMap[i].ts,this.customInterval=void 0,void 0}this.selectedDateInterval=t,this.customInterval={ts:t,label:"Custom interval"}},e.prototype.triggerChange=function(){this.updateTimewindow(this.advancedModel.startDate.valueOf(),this.advancedModel.endDate.valueOf())},e.prototype.changeInterval=function(){var t=this.ctx.dashboard.dashboardTimewindow.history?this.ctx.dashboard.dashboardTimewindow.history.fixedTimewindow.endTimeMs:this.advancedModel.endDate.valueOf();this.updateTimewindow(t-this.selectedDateInterval/2,t+this.selectedDateInterval/2)},e.prototype.goBack=function(){this.step(-1)},e.prototype.goForth=function(){this.step(1)},e.prototype.step=function(t){var e=this.ctx.dashboard.dashboardTimewindow.history?this.ctx.dashboard.dashboardTimewindow.history.fixedTimewindow.startTimeMs:this.advancedModel.startDate.valueOf(),n=this.ctx.dashboard.dashboardTimewindow.history?this.ctx.dashboard.dashboardTimewindow.history.fixedTimewindow.endTimeMs:this.advancedModel.endDate.valueOf();this.updateTimewindow(e+this.selectedStepSize*t,n+this.selectedStepSize*t)},e.prototype.readFromStorage=function(t){if(window.sessionStorage.getItem(t)){var e=JSON.parse(window.sessionStorage.getItem(t));return e.start=new Date(parseInt(e.start,10)),e.end=new Date(parseInt(e.end,10)),e}},e.prototype.updateStorageDate=function(){this.saveIntoStorage("date-range",{start:this.advancedModel.startDate.valueOf(),end:this.advancedModel.endDate.valueOf(),name:this.advancedModel.chosenLabel})},e.prototype.saveIntoStorage=function(t,e){e&&window.sessionStorage.setItem(t,JSON.stringify(e))},e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](C.a),i["\u0275\u0275directiveInject"](I.Overlay),i["\u0275\u0275directiveInject"](i.ViewContainerRef),i["\u0275\u0275directiveInject"](F.Store))},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["tb-date-range-navigator-widget"]],viewQuery:function(t,e){var n;(1&t&&i["\u0275\u0275staticViewQuery"](B,!0),2&t)&&(i["\u0275\u0275queryRefresh"](n=i["\u0275\u0275loadQuery"]())&&(e.datePickerSelect=n.first))},inputs:{ctx:"ctx"},features:[i["\u0275\u0275InheritDefinitionFeature"]],decls:25,vars:25,consts:[[1,"date-range-navigator",3,"ngClass"],[1,"mat-block",3,"fxHide","click"],["translate","",4,"ngIf"],[3,"ngModel"],["datePicker",""],[3,"value"],[1,"mat-block",3,"fxHide"],[3,"ngModel","ngModelChange"],[3,"value",4,"ngIf"],[3,"value",4,"ngFor","ngForOf"],[1,"drn__element","step",3,"fxHide"],["mat-button","","mat-icon-button","",3,"click"],["fxFlex.gt-sm","",1,"mat-block"],["translate",""]],template:function(t,e){1&t&&(i["\u0275\u0275elementStart"](0,"div",0),i["\u0275\u0275elementStart"](1,"mat-form-field",1),i["\u0275\u0275listener"]("click",(function(t){return e.openNavigatorPanel(t)})),i["\u0275\u0275template"](2,U,2,0,"mat-label",2),i["\u0275\u0275elementStart"](3,"mat-select",3,4),i["\u0275\u0275elementStart"](5,"mat-option",5),i["\u0275\u0275text"](6),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](7,"mat-form-field",6),i["\u0275\u0275template"](8,q,2,0,"mat-label",2),i["\u0275\u0275elementStart"](9,"mat-select",7),i["\u0275\u0275listener"]("ngModelChange",(function(t){return e.selectedDateInterval=t}))("ngModelChange",(function(){return e.changeInterval()})),i["\u0275\u0275template"](10,W,3,4,"mat-option",8),i["\u0275\u0275template"](11,z,3,4,"mat-option",9),i["\u0275\u0275pipe"](12,"keyvalue"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](13,"div",10),i["\u0275\u0275elementStart"](14,"button",11),i["\u0275\u0275listener"]("click",(function(){return e.goBack()})),i["\u0275\u0275elementStart"](15,"mat-icon"),i["\u0275\u0275text"](16,"keyboard_arrow_left"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](17,"mat-form-field",12),i["\u0275\u0275template"](18,K,2,0,"mat-label",2),i["\u0275\u0275elementStart"](19,"mat-select",7),i["\u0275\u0275listener"]("ngModelChange",(function(t){return e.selectedStepSize=t})),i["\u0275\u0275template"](20,H,3,4,"mat-option",9),i["\u0275\u0275pipe"](21,"keyvalue"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](22,"button",11),i["\u0275\u0275listener"]("click",(function(){return e.goForth()})),i["\u0275\u0275elementStart"](23,"mat-icon"),i["\u0275\u0275text"](24,"keyboard_arrow_right"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()),2&t&&(i["\u0275\u0275property"]("ngClass",i["\u0275\u0275pureFunction3"](21,$,e.ctx.width<400,e.settings.hideLabels,e.ctx.width>=400)),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("fxHide",e.settings.hidePicker),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",!e.settings.hideLabels),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngModel",e.advancedModel.chosenLabel),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("value",e.advancedModel.chosenLabel),i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",e.advancedModel.chosenLabel," "),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("fxHide",e.settings.hideInterval),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",!e.settings.hideLabels),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngModel",e.selectedDateInterval),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",e.customInterval),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngForOf",i["\u0275\u0275pipeBind2"](12,15,e.datesMap,e.originalOrder)),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("fxHide",e.settings.hideStepSize),i["\u0275\u0275advance"](5),i["\u0275\u0275property"]("ngIf",!e.settings.hideLabels),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngModel",e.selectedStepSize),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngForOf",i["\u0275\u0275pipeBind2"](21,18,e.datesMap,e.originalOrder)))},directives:[a.NgClass,P.b,D.MatFormField,P.d,a.NgIf,k.MatSelect,j.NgControlStatus,j.NgModel,A.MatOption,a.NgForOf,_.MatButton,L.MatIcon,V.b,D.MatLabel,R.TranslateDirective],pipes:[a.KeyValuePipe,R.TranslatePipe],styles:["[_nghost-%COMP%]{display:-ms-flexbox;display:flex;height:100%}[_nghost-%COMP%]   .date-range-navigator[_ngcontent-%COMP%]{-ms-flex-wrap:wrap;flex-wrap:wrap;-ms-flex-pack:space-evenly;justify-content:space-evenly;width:100%;margin:auto}[_nghost-%COMP%]   .date-range-navigator[_ngcontent-%COMP%], [_nghost-%COMP%]   .date-range-navigator[_ngcontent-%COMP%]   .drn__element[_ngcontent-%COMP%]{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center}[_nghost-%COMP%]   .date-range-navigator[_ngcontent-%COMP%]   .drn__element[_ngcontent-%COMP%]{-ms-flex-direction:row;flex-direction:row;max-width:100%;height:60px;margin:4px 0}[_nghost-%COMP%]   .date-range-navigator[_ngcontent-%COMP%]   .picker[_ngcontent-%COMP%]   .picker__wrapper[_ngcontent-%COMP%]{position:relative;max-width:100%;padding:2px}[_nghost-%COMP%]   .date-range-navigator[_ngcontent-%COMP%]   .picker[_ngcontent-%COMP%]   .picker__wrapper[_ngcontent-%COMP%] > label[_ngcontent-%COMP%]{position:absolute;right:-3px;bottom:100%;left:0;padding-left:3px;color:#787878;transform:scale(.75);transform-origin:left bottom}[_nghost-%COMP%]   .date-range-navigator[_ngcontent-%COMP%]   .picker[_ngcontent-%COMP%]   .md-select-value[_ngcontent-%COMP%]{min-width:225px;border-color:#e1e1e1}[_nghost-%COMP%]   .date-range-navigator[_ngcontent-%COMP%]   .picker[_ngcontent-%COMP%]   .md-select-value[_ngcontent-%COMP%]   .md-select-icon[_ngcontent-%COMP%]{color:#757575}[_nghost-%COMP%]   .date-range-navigator.short-mode[_ngcontent-%COMP%]{display:block;width:90%}[_nghost-%COMP%]   .date-range-navigator.short-mode[_ngcontent-%COMP%]   .drn__element[_ngcontent-%COMP%], [_nghost-%COMP%]   .date-range-navigator.short-mode[_ngcontent-%COMP%]   .picker[_ngcontent-%COMP%]   .picker__wrapper[_ngcontent-%COMP%]{width:100%}[_nghost-%COMP%]   .date-range-navigator.short-mode[_ngcontent-%COMP%]   .picker[_ngcontent-%COMP%]   .md-select-value[_ngcontent-%COMP%]{min-width:0}[_nghost-%COMP%]   .date-range-navigator.short-mode.labels-hidden[_ngcontent-%COMP%]   .drn__element[_ngcontent-%COMP%]{margin:0}[_nghost-%COMP%]   .date-range-navigator.long-mode.labels-hidden[_ngcontent-%COMP%]   .drn__element[_ngcontent-%COMP%]{height:36px}"]}),e}(x.a);!function(){i["\u0275setClassMetadata"](Y,[{type:i.Component,args:[{selector:"tb-date-range-navigator-widget",templateUrl:"./date-range-navigator.component.html",styleUrls:["./date-range-navigator.component.scss"]}]}],(function(){return[{type:C.a},{type:I.Overlay},{type:i.ViewContainerRef},{type:F.Store}]}),{ctx:[{type:i.Input}],datePickerSelect:[{type:i.ViewChild,args:["datePicker",{static:!0}]}]})}();var J=new i.InjectionToken("DateRangeNavigatorPanelData"),Z=function(){function t(t,e){this.data=t,this.overlayRef=e,this.locale={},this.model=t.model,this.settings=t.settings,this.locale.firstDay=this.settings.firstDayOfWeek||1,this.locale.daysOfWeek=E.weekdaysMin(),this.locale.monthNames=E.monthsShort()}return t.prototype.choosedDate=function(t){this.model=t,this.model.chosenLabel=S(this.model),this.settings.autoConfirm&&(this.data.onChange(this.model),this.overlayRef.dispose())},t.prototype.apply=function(){this.data.onChange(this.model),this.overlayRef.dispose()},t.\u0275fac=function(e){return new(e||t)(i["\u0275\u0275directiveInject"](J),i["\u0275\u0275directiveInject"](I.OverlayRef))},t.\u0275cmp=i["\u0275\u0275defineComponent"]({type:t,selectors:[["tb-date-range-navigator-panel"]],decls:4,vars:7,consts:[["fxLayout","column",1,"mat-content","mat-padding"],["class","mat-block",4,"ngIf"],[3,"startDate","endDate","locale","singleDatePicker","autoApply","choosedDate"],["class","tb-panel-actions","fxLayout","row",4,"ngIf"],[1,"mat-block"],["readonly","","matInput","","type","text",3,"ngModel"],["fxLayout","row",1,"tb-panel-actions"],["fxFlex",""],["mat-button","","mat-raised-button","","color","primary","type","button",3,"click"]],template:function(t,e){1&t&&(i["\u0275\u0275elementStart"](0,"div",0),i["\u0275\u0275template"](1,Q,2,1,"mat-form-field",1),i["\u0275\u0275elementStart"](2,"ngx-daterangepicker-material",2),i["\u0275\u0275listener"]("choosedDate",(function(t){return e.choosedDate(t)})),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](3,X,5,3,"div",3),i["\u0275\u0275elementEnd"]()),2&t&&(i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",e.settings.showTemplate),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("startDate",e.model.startDate)("endDate",e.model.endDate)("locale",e.locale)("singleDatePicker",e.settings.onePanel)("autoApply",!0),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",!e.settings.autoConfirm))},directives:[V.f,a.NgIf,N.a,D.MatFormField,G.MatInput,j.DefaultValueAccessor,j.NgControlStatus,j.NgModel,V.b,_.MatButton],pipes:[R.TranslatePipe],styles:[".tb-date-range-navigator-panel{overflow:auto;background:#fff;border-radius:4px;box-shadow:0 7px 8px -4px rgba(0,0,0,.2),0 13px 19px 2px rgba(0,0,0,.14),0 5px 24px 4px rgba(0,0,0,.12)}.tb-date-range-navigator-panel .mat-content{overflow:hidden;background-color:#fff}.tb-date-range-navigator-panel .mat-padding{padding:16px}"],encapsulation:2}),t}();!function(){i["\u0275setClassMetadata"](Z,[{type:i.Component,args:[{selector:"tb-date-range-navigator-panel",templateUrl:"./date-range-navigator-panel.component.html",styleUrls:["./date-range-navigator-panel.component.scss"],encapsulation:i.ViewEncapsulation.None}]}],(function(){return[{type:void 0,decorators:[{type:i.Inject,args:[J]}]},{type:I.OverlayRef}]}),null)}();var tt=n("0lYY"),et=n("U3y+"),nt=n("BsGH"),it=n("3Tyt"),at=n("XNiG"),rt=n("cp0P"),ot=n("HR/i"),st=n("1G5W"),lt=n("rezs"),ct=n("bSwM"),dt=n("1jcm"),pt=n("xoCY"),ut=["formContainer"];function mt(t,e){if(1&t&&(i["\u0275\u0275elementStart"](0,"legend",11),i["\u0275\u0275text"](1),i["\u0275\u0275elementEnd"]()),2&t){var n=i["\u0275\u0275nextContext"]().$implicit,a=i["\u0275\u0275nextContext"](2);i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"]("",a.getGroupTitle(n.datasource)," ")}}function ft(t,e){if(1&t&&(i["\u0275\u0275elementStart"](0,"mat-icon",21),i["\u0275\u0275text"](1),i["\u0275\u0275elementEnd"]()),2&t){var n=i["\u0275\u0275nextContext"](2).$implicit;i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate"](n.settings.icon)}}function ht(t,e){if(1&t&&(i["\u0275\u0275elementStart"](0,"mat-error"),i["\u0275\u0275text"](1),i["\u0275\u0275elementEnd"]()),2&t){var n=i["\u0275\u0275nextContext"](2).$implicit,a=i["\u0275\u0275nextContext"](3);i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",a.getErrorMessageText(n.settings,"required")," ")}}function gt(t,e){if(1&t){var n=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"div",16),i["\u0275\u0275elementStart"](1,"mat-form-field",17),i["\u0275\u0275elementStart"](2,"mat-label"),i["\u0275\u0275text"](3),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](4,"input",18),i["\u0275\u0275listener"]("focus",(function(t){i["\u0275\u0275restoreView"](n);var e=i["\u0275\u0275nextContext"]().$implicit,a=i["\u0275\u0275nextContext"](3);return e.isFocused=!0,a.focusInputElement(t)}))("blur",(function(){i["\u0275\u0275restoreView"](n);var t=i["\u0275\u0275nextContext"]().$implicit,e=i["\u0275\u0275nextContext"]().$implicit,a=i["\u0275\u0275nextContext"](2);return t.isFocused=!1,a.inputChanged(e,t)})),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](5,ft,2,1,"mat-icon",19),i["\u0275\u0275template"](6,ht,2,1,"mat-error",20),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()}if(2&t){var a=i["\u0275\u0275nextContext"]().$implicit,r=i["\u0275\u0275nextContext"](3);i["\u0275\u0275advance"](3),i["\u0275\u0275textInterpolate"](a.label),i["\u0275\u0275advance"](1),i["\u0275\u0275propertyInterpolate"]("formControlName",a.formId),i["\u0275\u0275property"]("required",a.settings.required)("readonly","readonly"===a.settings.isEditable),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",a.settings.icon),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",r.multipleInputFormGroup.get(a.formId).hasError("required"))}}function yt(t,e){if(1&t&&(i["\u0275\u0275elementStart"](0,"mat-icon",21),i["\u0275\u0275text"](1),i["\u0275\u0275elementEnd"]()),2&t){var n=i["\u0275\u0275nextContext"](2).$implicit;i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate"](n.settings.icon)}}function bt(t,e){if(1&t&&(i["\u0275\u0275elementStart"](0,"mat-error"),i["\u0275\u0275text"](1),i["\u0275\u0275elementEnd"]()),2&t){var n=i["\u0275\u0275nextContext"](2).$implicit,a=i["\u0275\u0275nextContext"](3);i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",a.getErrorMessageText(n.settings,"required")," ")}}function vt(t,e){if(1&t&&(i["\u0275\u0275elementStart"](0,"mat-error"),i["\u0275\u0275text"](1),i["\u0275\u0275elementEnd"]()),2&t){var n=i["\u0275\u0275nextContext"](2).$implicit,a=i["\u0275\u0275nextContext"](3);i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",a.getErrorMessageText(n.settings,"min")," ")}}function xt(t,e){if(1&t&&(i["\u0275\u0275elementStart"](0,"mat-error"),i["\u0275\u0275text"](1),i["\u0275\u0275elementEnd"]()),2&t){var n=i["\u0275\u0275nextContext"](2).$implicit,a=i["\u0275\u0275nextContext"](3);i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",a.getErrorMessageText(n.settings,"max")," ")}}function Ct(t,e){if(1&t){var n=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"div",16),i["\u0275\u0275elementStart"](1,"mat-form-field",17),i["\u0275\u0275elementStart"](2,"mat-label"),i["\u0275\u0275text"](3),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](4,"input",22),i["\u0275\u0275listener"]("focus",(function(t){i["\u0275\u0275restoreView"](n);var e=i["\u0275\u0275nextContext"]().$implicit,a=i["\u0275\u0275nextContext"](3);return e.isFocused=!0,a.focusInputElement(t)}))("blur",(function(){i["\u0275\u0275restoreView"](n);var t=i["\u0275\u0275nextContext"]().$implicit,e=i["\u0275\u0275nextContext"]().$implicit,a=i["\u0275\u0275nextContext"](2);return t.isFocused=!1,a.inputChanged(e,t)})),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](5,yt,2,1,"mat-icon",19),i["\u0275\u0275template"](6,bt,2,1,"mat-error",20),i["\u0275\u0275template"](7,vt,2,1,"mat-error",20),i["\u0275\u0275template"](8,xt,2,1,"mat-error",20),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()}if(2&t){var a=i["\u0275\u0275nextContext"]().$implicit,r=i["\u0275\u0275nextContext"](3);i["\u0275\u0275advance"](3),i["\u0275\u0275textInterpolate"](a.label),i["\u0275\u0275advance"](1),i["\u0275\u0275propertyInterpolate"]("formControlName",a.formId),i["\u0275\u0275propertyInterpolate"]("step",a.settings.step),i["\u0275\u0275propertyInterpolate"]("min",a.settings.minValue),i["\u0275\u0275propertyInterpolate"]("max",a.settings.maxValue),i["\u0275\u0275property"]("required",a.settings.required)("readonly","readonly"===a.settings.isEditable),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",a.settings.icon),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",r.multipleInputFormGroup.get(a.formId).hasError("required")),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",r.multipleInputFormGroup.get(a.formId).hasError("min")),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",r.multipleInputFormGroup.get(a.formId).hasError("max"))}}function St(t,e){if(1&t){var n=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"div",23),i["\u0275\u0275elementStart"](1,"mat-checkbox",24),i["\u0275\u0275listener"]("change",(function(){i["\u0275\u0275restoreView"](n);var t=i["\u0275\u0275nextContext"]().$implicit,e=i["\u0275\u0275nextContext"]().$implicit;return i["\u0275\u0275nextContext"](2).inputChanged(e,t)})),i["\u0275\u0275elementStart"](2,"span",25),i["\u0275\u0275text"](3),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()}if(2&t){var a=i["\u0275\u0275nextContext"]().$implicit;i["\u0275\u0275advance"](1),i["\u0275\u0275propertyInterpolate"]("formControlName",a.formId),i["\u0275\u0275advance"](2),i["\u0275\u0275textInterpolate"](a.label)}}function wt(t,e){if(1&t){var n=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"div",23),i["\u0275\u0275elementStart"](1,"mat-slide-toggle",24),i["\u0275\u0275listener"]("change",(function(){i["\u0275\u0275restoreView"](n);var t=i["\u0275\u0275nextContext"]().$implicit,e=i["\u0275\u0275nextContext"]().$implicit;return i["\u0275\u0275nextContext"](2).inputChanged(e,t)})),i["\u0275\u0275elementStart"](2,"span",25),i["\u0275\u0275text"](3),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()}if(2&t){var a=i["\u0275\u0275nextContext"]().$implicit;i["\u0275\u0275advance"](1),i["\u0275\u0275propertyInterpolate"]("formControlName",a.formId),i["\u0275\u0275advance"](2),i["\u0275\u0275textInterpolate"](a.label)}}function Et(t,e){if(1&t&&(i["\u0275\u0275elementStart"](0,"mat-error"),i["\u0275\u0275text"](1),i["\u0275\u0275elementEnd"]()),2&t){var n=i["\u0275\u0275nextContext"](2).$implicit,a=i["\u0275\u0275nextContext"](3);i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",a.getErrorMessageText(n.settings,"required")," ")}}function It(t,e){if(1&t&&(i["\u0275\u0275elementStart"](0,"mat-error"),i["\u0275\u0275text"](1),i["\u0275\u0275elementEnd"]()),2&t){var n=i["\u0275\u0275nextContext"](2).$implicit,a=i["\u0275\u0275nextContext"](3);i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",a.getErrorMessageText(n.settings,"invalidDate")," ")}}function Ot(t,e){if(1&t){var n=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"div",26),i["\u0275\u0275elementStart"](1,"mat-form-field"),i["\u0275\u0275elementStart"](2,"mat-placeholder"),i["\u0275\u0275text"](3),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](4,"mat-datetimepicker-toggle",27),i["\u0275\u0275element"](5,"mat-datetimepicker",28,29),i["\u0275\u0275elementStart"](7,"input",30),i["\u0275\u0275listener"]("focus",(function(){return i["\u0275\u0275restoreView"](n),i["\u0275\u0275nextContext"]().$implicit.isFocused=!0}))("blur",(function(){return i["\u0275\u0275restoreView"](n),i["\u0275\u0275nextContext"]().$implicit.isFocused=!1}))("dateChange",(function(){i["\u0275\u0275restoreView"](n);var t=i["\u0275\u0275nextContext"]().$implicit,e=i["\u0275\u0275nextContext"]().$implicit;return i["\u0275\u0275nextContext"](2).inputChanged(e,t)})),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](8,Et,2,1,"mat-error",20),i["\u0275\u0275template"](9,It,2,1,"mat-error",20),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()}if(2&t){var a=i["\u0275\u0275reference"](6),r=i["\u0275\u0275nextContext"]().$implicit,o=i["\u0275\u0275nextContext"](3);i["\u0275\u0275advance"](3),i["\u0275\u0275textInterpolate"](r.label),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("for",a),i["\u0275\u0275advance"](1),i["\u0275\u0275propertyInterpolate"]("type",o.datePickerType(r.settings.dataKeyValueType)),i["\u0275\u0275advance"](2),i["\u0275\u0275propertyInterpolate"]("formControlName",r.formId),i["\u0275\u0275property"]("required",r.settings.required)("readonly","readonly"===r.settings.isEditable)("matDatetimepicker",a),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",o.multipleInputFormGroup.get(r.formId).hasError("required")),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",o.multipleInputFormGroup.get(r.formId).hasError("matDatepickerParse"))}}var Tt=function(t){return{width:t}};function Mt(t,e){if(1&t&&(i["\u0275\u0275elementStart"](0,"div",12),i["\u0275\u0275template"](1,gt,7,6,"div",13),i["\u0275\u0275template"](2,Ct,9,11,"div",13),i["\u0275\u0275template"](3,St,4,2,"div",14),i["\u0275\u0275template"](4,wt,4,2,"div",14),i["\u0275\u0275template"](5,Ot,10,9,"div",15),i["\u0275\u0275elementEnd"]()),2&t){var n=e.$implicit,a=i["\u0275\u0275nextContext"](3);i["\u0275\u0275property"]("ngStyle",i["\u0275\u0275pureFunction1"](6,Tt,a.isVerticalAlignment||a.changeAlignment?"100%":a.inputWidthSettings)),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf","string"===n.settings.dataKeyValueType),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf","double"===n.settings.dataKeyValueType||"integer"===n.settings.dataKeyValueType),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf","booleanCheckbox"===n.settings.dataKeyValueType),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf","booleanSwitch"===n.settings.dataKeyValueType),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf","dateTime"===n.settings.dataKeyValueType||"date"===n.settings.dataKeyValueType||"time"===n.settings.dataKeyValueType)}}var Ft=function(t){return{"fields-group":t}},Pt=function(t){return{"vertical-alignment":t}};function Dt(t,e){if(1&t&&(i["\u0275\u0275elementStart"](0,"fieldset",7),i["\u0275\u0275template"](1,mt,2,1,"legend",8),i["\u0275\u0275elementStart"](2,"div",9),i["\u0275\u0275template"](3,Mt,6,8,"div",10),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()),2&t){var n=e.$implicit,a=i["\u0275\u0275nextContext"](2);i["\u0275\u0275property"]("ngClass",i["\u0275\u0275pureFunction1"](4,Ft,a.settings.showGroupTitle)),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",a.settings.showGroupTitle),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngClass",i["\u0275\u0275pureFunction1"](6,Pt,a.isVerticalAlignment||a.changeAlignment)),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngForOf",a.visibleKeys(n))}}function kt(t,e){if(1&t){var n=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"div",31),i["\u0275\u0275elementStart"](1,"button",32),i["\u0275\u0275listener"]("click",(function(){return i["\u0275\u0275restoreView"](n),i["\u0275\u0275nextContext"](2).discardAll()})),i["\u0275\u0275text"](2),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](3,"button",33),i["\u0275\u0275text"](4),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()}if(2&t){var a=i["\u0275\u0275nextContext"](2);i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("disabled",!a.multipleInputFormGroup.dirty),i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",a.resetButtonLabel," "),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("disabled",!a.multipleInputFormGroup.dirty||a.multipleInputFormGroup.invalid),i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",a.saveButtonLabel," ")}}function jt(t,e){if(1&t&&(i["\u0275\u0275elementStart"](0,"div",4),i["\u0275\u0275template"](1,Dt,4,8,"fieldset",5),i["\u0275\u0275template"](2,kt,5,4,"div",6),i["\u0275\u0275elementEnd"]()),2&t){var n=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngForOf",n.sources),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",n.entityDetected&&n.settings.showActionButtons)}}function At(t,e){if(1&t&&(i["\u0275\u0275elementStart"](0,"div",34),i["\u0275\u0275elementStart"](1,"div",35),i["\u0275\u0275text"](2),i["\u0275\u0275pipe"](3,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](4,"div",36),i["\u0275\u0275text"](5),i["\u0275\u0275pipe"](6,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()),2&t){var n=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("fxHide",n.entityDetected),i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](3,4,"widgets.input-widgets.no-entity-selected")," "),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("fxShow",n.entityDetected&&!n.isAllParametersValid),i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](6,6,"widgets.input-widgets.not-allowed-entity")," ")}}var _t=function(t){function e(e,n,i,a,r,o,s,l,c){var d=t.call(this,e)||this;return d.store=e,d.elementRef=n,d.ngZone=i,d.overlay=a,d.viewContainerRef=r,d.utils=o,d.fb=s,d.attributeService=l,d.translate=c,d.destroy$=new at.b,d.sources=[],d.entityDetected=!1,d.isAllParametersValid=!0,d.toastTargetId="multiple-input-widget"+d.utils.guid(),d}return Object(v.d)(e,t),e.prototype.ngOnInit=function(){var t=this;this.ctx.$scope.multipleInputWidget=this,this.settings=this.ctx.settings,this.widgetConfig=this.ctx.widgetConfig,this.subscription=this.ctx.defaultSubscription,this.datasources=this.subscription.datasources,this.initializeConfig(),this.updateDatasources(),this.buildForm(),this.ctx.updateWidgetParams(),this.formResize$=new ot.a((function(){t.resize()})),this.formResize$.observe(this.formContainerRef.nativeElement)},e.prototype.ngOnDestroy=function(){this.formResize$&&this.formResize$.disconnect(),this.destroy$.next(),this.destroy$.complete()},e.prototype.initializeConfig=function(){this.settings.widgetTitle&&this.settings.widgetTitle.length?this.ctx.widgetTitle=this.utils.customTranslation(this.settings.widgetTitle,this.settings.widgetTitle):this.ctx.widgetTitle=this.ctx.widgetConfig.title,this.settings.groupTitle=this.settings.groupTitle||"${entityName}",this.settings.saveButtonLabel&&this.settings.saveButtonLabel.length?this.saveButtonLabel=this.utils.customTranslation(this.settings.saveButtonLabel,this.settings.saveButtonLabel):this.saveButtonLabel=this.translate.instant("action.save"),this.settings.resetButtonLabel&&this.settings.resetButtonLabel.length?this.resetButtonLabel=this.utils.customTranslation(this.settings.resetButtonLabel,this.settings.resetButtonLabel):this.resetButtonLabel=this.translate.instant("action.undo"),Object(M.z)(this.settings.showActionButtons)&&(this.settings.showActionButtons=!0),Object(M.z)(this.settings.fieldsAlignment)&&(this.settings.fieldsAlignment="row"),Object(M.z)(this.settings.fieldsInRow)&&(this.settings.fieldsInRow=2),this.isVerticalAlignment=!("row"===this.settings.fieldsAlignment),!this.isVerticalAlignment&&this.settings.fieldsInRow&&(this.inputWidthSettings=100/this.settings.fieldsInRow+"%"),this.updateWidgetDisplaying()},e.prototype.updateDatasources=function(){var t=this;if(this.datasources&&this.datasources.length){this.entityDetected=!0;var e=0;this.datasources.forEach((function(n){var i={datasource:n,keys:[]};n.type===tt.a.entity?n.dataKeys.forEach((function(a){n.entityType!==et.b.DEVICE&&"shared"===a.settings.dataKeyType&&(t.isAllParametersValid=!1),a.units&&(a.label+=" ("+a.units+")"),a.formId=++e+"",a.isFocused=!1,Object(M.z)(a.settings.dataKeyType)&&(t.settings.attributesShared?a.settings.dataKeyType="shared":a.settings.dataKeyType="server"),Object(M.z)(a.settings.dataKeyValueType)&&(a.settings.inputTypeNumber?a.settings.dataKeyValueType="double":a.settings.dataKeyValueType="string"),Object(M.z)(a.settings.isEditable)&&(a.settings.readOnly?a.settings.isEditable="readonly":a.settings.isEditable="editable"),i.keys.push(a)})):t.entityDetected=!1,t.sources.push(i)}))}},e.prototype.buildForm=function(){var t=this;this.multipleInputFormGroup=this.fb.group({}),this.sources.forEach((function(e){for(var n={},i={},a=function(e){var a=[];e.settings.required&&a.push(j.Validators.required),"integer"===e.settings.dataKeyValueType&&a.push(j.Validators.pattern(/^-?[0-9]+$/)),"integer"!==e.settings.dataKeyValueType&&"double"!==e.settings.dataKeyValueType||(Object(M.o)(e.settings.minValue)&&isFinite(e.settings.minValue)&&a.push(j.Validators.min(e.settings.minValue)),Object(M.o)(e.settings.maxValue)&&isFinite(e.settings.maxValue)&&a.push(j.Validators.max(e.settings.maxValue)));var r=t.fb.control({value:e.value,disabled:"disabled"===e.settings.isEditable||e.settings.disabledOnCondition},a);t.settings.showActionButtons&&(n[e.name]=r,"editable"===e.settings.isEditable&&e.settings.disabledOnDataKey&&(n.hasOwnProperty(e.settings.disabledOnDataKey)?n[e.settings.disabledOnDataKey].valueChanges.pipe(Object(st.a)(t.destroy$)).subscribe((function(t){t?r.enable({emitEvent:!1}):r.disable({emitEvent:!1})})):i[e.settings.disabledOnDataKey]=r),i.hasOwnProperty(e.name)&&r.valueChanges.pipe(Object(st.a)(t.destroy$)).subscribe((function(t){t?i[e.name].enable({emitEvent:!1}):i[e.name].disable({emitEvent:!1})}))),t.multipleInputFormGroup.addControl(e.formId,r)},r=0,o=t.visibleKeys(e);r<o.length;r++){a(o[r])}}))},e.prototype.updateWidgetData=function(t){var e=this,n=0;this.sources.forEach((function(i){i.keys.forEach((function(a){var r=t[n].data;if(r&&r.length){var o=void 0;switch(a.settings.dataKeyValueType){case"dateTime":case"date":o=Object(M.o)(r[0][1])&&""!==r[0][1]?E(r[0][1]).toDate():null;break;case"time":o=E().startOf("day").add(r[0][1],"ms").toDate();break;case"booleanCheckbox":case"booleanSwitch":o="true"===r[0][1];break;default:o=r[0][1]}a.value=o}if("editable"===a.settings.isEditable&&a.settings.disabledOnDataKey){var s=t.filter((function(t){return i.datasource===t.datasource&&t.dataKey.name===a.settings.disabledOnDataKey}));s&&s.length&&s[0].data.length&&("false"===s[0].data[0][1]?a.settings.disabledOnCondition=!0:a.settings.disabledOnCondition=!s[0].data[0][1])}if(!a.settings.dataKeyHidden){"disabled"===a.settings.isEditable||a.settings.disabledOnCondition?e.multipleInputFormGroup.get(a.formId).disable({emitEvent:!1}):e.multipleInputFormGroup.get(a.formId).enable({emitEvent:!1});var l=e.multipleInputFormGroup.get(a.formId).dirty;a.isFocused||l||e.multipleInputFormGroup.get(a.formId).patchValue(a.value,{emitEvent:!1})}n++}))}))},e.prototype.updateWidgetDisplaying=function(){this.changeAlignment=this.ctx.$container&&this.ctx.$container[0].offsetWidth<620},e.prototype.onDataUpdated=function(){this.updateWidgetData(this.subscription.data),this.ctx.detectChanges()},e.prototype.resize=function(){this.updateWidgetDisplaying(),this.ctx.detectChanges()},e.prototype.getGroupTitle=function(t){var e=Object(M.d)(t,this.settings.groupTitle);return this.utils.customTranslation(e,e)},e.prototype.getErrorMessageText=function(t,e){var n,i,a;switch(e){case"required":n=t.requiredErrorMessage,i="";break;case"min":n=t.minValueErrorMessage,i="widgets.input-widgets.min-value-error",a={value:t.minValue};break;case"max":n=t.maxValueErrorMessage,i="widgets.input-widgets.max-value-error",a={value:t.maxValue};break;case"invalidDate":n=t.invalidDateErrorMessage,i="widgets.input-widgets.invalid-date";break;default:return""}return this.getTranslatedErrorText(n,i,a)},e.prototype.getTranslatedErrorText=function(t,e,n){var i;return t&&t.length?i=this.utils.customTranslation(t,t):e&&e.length?(n||(n={}),i=this.translate.instant(e,n)):i="",i},e.prototype.visibleKeys=function(t){return t.keys.filter((function(t){return!t.settings.dataKeyHidden}))},e.prototype.datePickerType=function(t){switch(t){case"dateTime":return"datetime";case"date":return"date";case"time":return"time"}},e.prototype.focusInputElement=function(t){t.target.select()},e.prototype.inputChanged=function(t,e){if(!this.settings.showActionButtons){var n=this.multipleInputFormGroup.get(e.formId).value;if(!e.settings.required||e.settings.required&&Object(M.n)(n)){var i={datasource:t.datasource,keys:[e]};this.save(i)}}},e.prototype.save=function(t){var e=this;document&&document.activeElement&&document.activeElement.blur();var n,i={ignoreLoading:!this.settings.showActionButtons};n=t?[t]:this.sources;var a=[];n.forEach((function(t){for(var n=[],r=[],o=[],s=0,l=e.visibleKeys(t);s<l.length;s++){var c=l[s],d=e.multipleInputFormGroup.get(c.formId).value;if(!Object(M.r)(d,c.value)||e.settings.updateAllValues){var p={key:c.name,value:null};if(d)switch(c.settings.dataKeyValueType){case"dateTime":case"date":p.value=d.getTime();break;case"time":p.value=d.getTime()-E().startOf("day").valueOf();break;default:p.value=d}else p.value=""===d?null:d;switch(c.settings.dataKeyType){case"shared":r.push(p);break;case"timeseries":o.push(p);break;default:n.push(p)}}}var u={entityType:t.datasource.entityType,id:t.datasource.entityId};n.length&&a.push(e.attributeService.saveEntityAttributes(u,it.d.SERVER_SCOPE,n,i)),r.length&&a.push(e.attributeService.saveEntityAttributes(u,it.d.SHARED_SCOPE,r,i)),o.length&&a.push(e.attributeService.saveEntityTimeseries(u,it.r.LATEST_TELEMETRY,o,i))})),a.length?Object(rt.a)(a).subscribe((function(){e.multipleInputFormGroup.markAsPristine(),e.ctx.detectChanges(),e.settings.showResultMessage&&e.ctx.showSuccessToast(e.translate.instant("widgets.input-widgets.update-successful"),1e3,"bottom","left",e.toastTargetId)}),(function(){e.settings.showResultMessage&&e.ctx.showErrorToast(e.translate.instant("widgets.input-widgets.update-failed"),"bottom","left",e.toastTargetId)})):(this.multipleInputFormGroup.markAsPristine(),this.ctx.detectChanges())},e.prototype.discardAll=function(){var t=this;this.multipleInputFormGroup.reset(void 0,{emitEvent:!1}),this.sources.forEach((function(e){for(var n=0,i=t.visibleKeys(e);n<i.length;n++){var a=i[n];t.multipleInputFormGroup.get(a.formId).patchValue(a.value,{emitEvent:!1})}})),this.multipleInputFormGroup.markAsPristine()},e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](F.Store),i["\u0275\u0275directiveInject"](i.ElementRef),i["\u0275\u0275directiveInject"](i.NgZone),i["\u0275\u0275directiveInject"](I.Overlay),i["\u0275\u0275directiveInject"](i.ViewContainerRef),i["\u0275\u0275directiveInject"](C.a),i["\u0275\u0275directiveInject"](j.FormBuilder),i["\u0275\u0275directiveInject"](nt.a),i["\u0275\u0275directiveInject"](R.TranslateService))},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["tb-multiple-input-widget"]],viewQuery:function(t,e){var n;(1&t&&i["\u0275\u0275staticViewQuery"](ut,!0),2&t)&&(i["\u0275\u0275queryRefresh"](n=i["\u0275\u0275loadQuery"]())&&(e.formContainerRef=n.first))},inputs:{ctx:"ctx"},features:[i["\u0275\u0275InheritDefinitionFeature"]],decls:4,vars:4,consts:[["tb-toast","","novalidate","","autocomplete","off",1,"tb-multiple-input",3,"formGroup","toastTarget","ngSubmit"],["formContainer",""],["style","padding: 0 8px;",4,"ngIf"],["class","tb-multiple-input__errors","fxLayout","column","fxLayoutAlign","center center","style","height: 100%;",4,"ngIf"],[2,"padding","0 8px"],[3,"ngClass",4,"ngFor","ngForOf"],["class","mat-padding","fxLayout","row","fxLayoutAlign","end center",4,"ngIf"],[3,"ngClass"],["class","group-title",4,"ngIf"],["fxLayout","row",1,"layout-wrap",3,"ngClass"],[3,"ngStyle",4,"ngFor","ngForOf"],[1,"group-title"],[3,"ngStyle"],["class","input-field",4,"ngIf"],["class","input-field mat-block",4,"ngIf"],["class","input-field mat-block date-time-input","fxLayout","column",4,"ngIf"],[1,"input-field"],[1,"mat-block"],["matInput","","type","text",3,"formControlName","required","readonly","focus","blur"],["matPrefix","",4,"ngIf"],[4,"ngIf"],["matPrefix",""],["matInput","","type","number",3,"formControlName","required","readonly","step","min","max","focus","blur"],[1,"input-field","mat-block"],[3,"formControlName","change"],[1,"label-wrapper"],["fxLayout","column",1,"input-field","mat-block","date-time-input"],["matPrefix","",3,"for"],["openOnFocus","true",3,"type"],["datePicker",""],["matInput","",3,"formControlName","required","readonly","matDatetimepicker","focus","blur","dateChange"],["fxLayout","row","fxLayoutAlign","end center",1,"mat-padding"],["mat-button","","color","primary","type","button",2,"max-height","50px","margin-right","20px",3,"disabled","click"],["mat-button","","mat-raised-button","","color","primary","type","submit",2,"max-height","50px","margin-right","20px",3,"disabled"],["fxLayout","column","fxLayoutAlign","center center",1,"tb-multiple-input__errors",2,"height","100%"],[2,"text-align","center","font-size","18px","color","#a0a0a0",3,"fxHide"],[2,"text-align","center","font-size","18px","color","#a0a0a0",3,"fxShow"]],template:function(t,e){1&t&&(i["\u0275\u0275elementStart"](0,"form",0,1),i["\u0275\u0275listener"]("ngSubmit",(function(){return e.save()})),i["\u0275\u0275template"](2,jt,3,2,"div",2),i["\u0275\u0275template"](3,At,7,8,"div",3),i["\u0275\u0275elementEnd"]()),2&t&&(i["\u0275\u0275propertyInterpolate"]("toastTarget",e.toastTargetId),i["\u0275\u0275property"]("formGroup",e.multipleInputFormGroup),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngIf",e.entityDetected&&e.isAllParametersValid),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",!e.entityDetected||!e.isAllParametersValid))},directives:[j["\u0275angular_packages_forms_forms_y"],j.NgControlStatusGroup,lt.b,j.FormGroupDirective,a.NgIf,a.NgForOf,a.NgClass,P.b,V.f,a.NgStyle,P.e,D.MatFormField,D.MatLabel,G.MatInput,j.DefaultValueAccessor,j.NgControlStatus,j.FormControlName,j.RequiredValidator,L.MatIcon,D.MatPrefix,D.MatError,j.NumberValueAccessor,ct.MatCheckbox,dt.MatSlideToggle,D.MatPlaceholder,pt.i,pt.a,pt.f,V.e,_.MatButton,P.d],pipes:[R.TranslatePipe],styles:["[_nghost-%COMP%]   .tb-multiple-input[_ngcontent-%COMP%]{height:100%;overflow-x:hidden;overflow-y:auto}[_nghost-%COMP%]   .tb-multiple-input[_ngcontent-%COMP%]   .fields-group[_ngcontent-%COMP%]{padding:0 8px;margin:10px 0;border:1px groove rgba(0,0,0,.25)}[_nghost-%COMP%]   .tb-multiple-input[_ngcontent-%COMP%]   .fields-group[_ngcontent-%COMP%]   legend[_ngcontent-%COMP%]{color:rgba(0,0,0,.7)}[_nghost-%COMP%]   .tb-multiple-input[_ngcontent-%COMP%]   .input-field[_ngcontent-%COMP%]{padding-right:10px}[_nghost-%COMP%]   .tb-multiple-input[_ngcontent-%COMP%]   .input-field[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{margin-bottom:5px}[_nghost-%COMP%]   .tb-multiple-input[_ngcontent-%COMP%]   mat-checkbox[_ngcontent-%COMP%], [_nghost-%COMP%]   .tb-multiple-input[_ngcontent-%COMP%]   mat-slide-toggle[_ngcontent-%COMP%]{display:block;margin-top:20px;margin-bottom:16px}[_nghost-%COMP%]   .tb-multiple-input[_ngcontent-%COMP%]   mat-checkbox[_ngcontent-%COMP%]   .label-wrapper[_ngcontent-%COMP%], [_nghost-%COMP%]   .tb-multiple-input[_ngcontent-%COMP%]   mat-slide-toggle[_ngcontent-%COMP%]   .label-wrapper[_ngcontent-%COMP%]{white-space:normal}[_nghost-%COMP%]   .tb-multiple-input[_ngcontent-%COMP%]   mat-slide-toggle[_ngcontent-%COMP%]{height:auto}[_nghost-%COMP%]   .tb-multiple-input[_ngcontent-%COMP%]   .date-time-input[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{width:100%;margin:2px 0}[_nghost-%COMP%]   .tb-multiple-input[_ngcontent-%COMP%]   .vertical-alignment[_ngcontent-%COMP%]{-ms-flex-direction:column;flex-direction:column}"]}),e}(x.a);!function(){i["\u0275setClassMetadata"](_t,[{type:i.Component,args:[{selector:"tb-multiple-input-widget ",templateUrl:"./multiple-input-widget.component.html",styleUrls:["./multiple-input-widget.component.scss"]}]}],(function(){return[{type:F.Store},{type:i.ElementRef},{type:i.NgZone},{type:I.Overlay},{type:i.ViewContainerRef},{type:C.a},{type:j.FormBuilder},{type:nt.a},{type:R.TranslateService}]}),{formContainerRef:[{type:i.ViewChild,args:["formContainer",{static:!0}]}],ctx:[{type:i.Input}]})}();var Lt=n("oTDE"),Vt=n("wtyh"),Rt=n("jhN1"),Nt=n("8m5z"),Gt=["videoStream"],Bt=["canvas"];function Ut(t,e){if(1&t){var n=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"button",24),i["\u0275\u0275listener"]("click",(function(){return i["\u0275\u0275restoreView"](n),i["\u0275\u0275nextContext"](2).takePhoto()})),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()}2&t&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,1,"widgets.input-widgets.take-photo")," "))}function qt(t,e){if(1&t){var n=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"div",3),i["\u0275\u0275elementStart"](1,"div",4),i["\u0275\u0275elementStart"](2,"div",5),i["\u0275\u0275elementStart"](3,"span",6),i["\u0275\u0275text"](4,"widgets.input-widgets.no-image"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](5,"img",7),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](6,Ut,3,3,"button",8),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](7,"div",9),i["\u0275\u0275elementStart"](8,"div",10),i["\u0275\u0275element"](9,"video",11,12),i["\u0275\u0275elementStart"](11,"div",13),i["\u0275\u0275element"](12,"div",14),i["\u0275\u0275elementStart"](13,"button",15),i["\u0275\u0275listener"]("click",(function(){return i["\u0275\u0275restoreView"](n),i["\u0275\u0275nextContext"]().switchWebCamera()})),i["\u0275\u0275elementStart"](14,"mat-icon"),i["\u0275\u0275text"](15,"switch_camera"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](16,"button",16),i["\u0275\u0275listener"]("click",(function(){return i["\u0275\u0275restoreView"](n),i["\u0275\u0275nextContext"]().createPhoto()})),i["\u0275\u0275elementStart"](17,"mat-icon"),i["\u0275\u0275text"](18,"photo_camera"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](19,"button",17),i["\u0275\u0275listener"]("click",(function(){return i["\u0275\u0275restoreView"](n),i["\u0275\u0275nextContext"]().closeCamera()})),i["\u0275\u0275elementStart"](20,"mat-icon"),i["\u0275\u0275text"](21,"close"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](22,"div",14),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](23,"div",10),i["\u0275\u0275element"](24,"img",18),i["\u0275\u0275element"](25,"canvas",19,20),i["\u0275\u0275elementStart"](27,"div",21),i["\u0275\u0275element"](28,"div",14),i["\u0275\u0275elementStart"](29,"button",22),i["\u0275\u0275listener"]("click",(function(){return i["\u0275\u0275restoreView"](n),i["\u0275\u0275nextContext"]().cancelPhoto()})),i["\u0275\u0275elementStart"](30,"mat-icon"),i["\u0275\u0275text"](31,"close"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](32,"button",23),i["\u0275\u0275listener"]("click",(function(){return i["\u0275\u0275restoreView"](n),i["\u0275\u0275nextContext"]().savePhoto()})),i["\u0275\u0275elementStart"](33,"mat-icon"),i["\u0275\u0275text"](34,"check"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](35,"div",14),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()}if(2&t){var a=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("fxShow",!a.isShowCamera),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("fxShow",!a.lastPhoto),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("fxShow",a.lastPhoto)("src",a.lastPhoto,i["\u0275\u0275sanitizeUrl"]),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",!a.textMessage),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("fxShow",a.isShowCamera),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("fxShow",!a.isPreviewPhoto),i["\u0275\u0275advance"](5),i["\u0275\u0275property"]("disabled",a.singleDevice),i["\u0275\u0275advance"](10),i["\u0275\u0275property"]("fxShow",a.isPreviewPhoto),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("src",a.previewPhoto,i["\u0275\u0275sanitizeUrl"]),i["\u0275\u0275advance"](5),i["\u0275\u0275property"]("disabled",a.updatePhoto),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("disabled",a.updatePhoto)}}function Wt(t,e){if(1&t&&(i["\u0275\u0275elementStart"](0,"div",25),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&t){var n=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,1,n.textMessage)," ")}}var zt,Kt=function(t){function e(e,n,i,a,r,o,s,l){var c=t.call(this,n)||this;return c.window=e,c.store=n,c.elementRef=i,c.ngZone=a,c.overlay=r,c.utils=o,c.attributeService=s,c.sanitizer=l,c.videoInputsIndex=0,c.width=640,c.height=480,c.isEntityDetected=!1,c.dataKeyDetected=!1,c.isProtocolHttps=!1,c.isCameraSupport=!1,c.isDeviceDetect=!1,c.isShowCamera=!1,c.isPreviewPhoto=!1,c.isHavePermissionCamera=!0,c.isLoading=!1,c.singleDevice=!0,c.updatePhoto=!1,c}return Object(v.d)(e,t),Object.defineProperty(e.prototype,"videoElement",{get:function(){return this.videoStreamRef.nativeElement},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"canvasElement",{get:function(){return this.canvasRef.nativeElement},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"videoWidth",{get:function(){var t=this.getVideoAspectRatio();return Math.min(this.width,this.height*t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"videoHeight",{get:function(){var t=this.getVideoAspectRatio();return Math.min(this.height,this.width/t)},enumerable:!1,configurable:!0}),e.hasGetUserMedia=function(){return!(!window.navigator.mediaDevices||!window.navigator.mediaDevices.getUserMedia)},e.getAvailableVideoInputs=function(){return new Promise((function(t,e){navigator.mediaDevices.enumerateDevices().then((function(e){t(e.filter((function(t){return"videoinput"===t.kind})))})).catch((function(t){e(t.message||t)}))}))},e.prototype.ngOnInit=function(){this.ctx.$scope.photoCameraInputWidget=this,this.isLoading=!0,this.settings=this.ctx.settings,this.datasource=this.ctx.datasources[0],this.settings.widgetTitle&&this.settings.widgetTitle.length?this.ctx.widgetTitle=this.utils.customTranslation(this.settings.widgetTitle,this.settings.widgetTitle):this.ctx.widgetTitle=this.ctx.widgetConfig.title,this.width=this.settings.maxWidth?this.settings.maxWidth:640,this.height=this.settings.maxHeight?this.settings.maxWidth:480,this.datasource.type===tt.a.entity&&this.datasource.entityType&&this.datasource.entityId&&(this.isEntityDetected=!0),this.datasource.dataKeys.length&&(this.dataKeyDetected=!0),this.detectAvailableDevices()},e.prototype.ngOnDestroy=function(){this.stopMediaTracks()},e.prototype.updateWidgetData=function(t){var e=t[0].data;(null==e?void 0:e.length)&&Object(M.y)(e[0][1])&&e[0][1].startsWith("data:image/")&&(this.lastPhoto=this.sanitizer.bypassSecurityTrustUrl(e[0][1]))},e.prototype.onDataUpdated=function(){this.updateWidgetData(this.ctx.defaultSubscription.data),this.ctx.detectChanges()},e.prototype.detectAvailableDevices=function(){var t=this;"https:"===this.window.location.protocol||"localhost"===this.window.location.hostname?(this.isProtocolHttps=!0,e.hasGetUserMedia()?(this.isCameraSupport=!0,e.getAvailableVideoInputs().then((function(e){t.isLoading=!1,t.isDeviceDetect=!!e.length,t.singleDevice=e.length<2,t.availableVideoInputs=e,t.ctx.detectChanges()}),(function(){t.isLoading=!1,t.availableVideoInputs=[]}))):this.isLoading=!1):this.isLoading=!1},e.prototype.getVideoAspectRatio=function(){return this.videoElement.videoWidth&&this.videoElement.videoWidth>0&&this.videoElement.videoHeight&&this.videoElement.videoHeight>0?this.videoElement.videoWidth/this.videoElement.videoHeight:this.width/this.height},e.prototype.stopMediaTracks=function(){this.mediaStream&&this.mediaStream.getTracks&&this.mediaStream.getTracks().forEach((function(t){return t.stop()}))},e.prototype.takePhoto=function(){this.inititedVideoStream(this.availableVideoInputs[this.videoInputsIndex].deviceId,!0)},e.prototype.closeCamera=function(){this.stopMediaTracks(),this.videoElement.srcObject=null,this.isShowCamera=!1},e.prototype.cancelPhoto=function(){this.isPreviewPhoto=!1,this.previewPhoto=""},e.prototype.savePhoto=function(){var t,e=this;this.updatePhoto=!0;var n={entityType:this.datasource.entityType,id:this.datasource.entityId},i=[{key:this.datasource.dataKeys[0].name,value:this.previewPhoto}];this.datasource.dataKeys[0].type===it.h.attribute?t=this.attributeService.saveEntityAttributes(n,it.d.SERVER_SCOPE,i):this.datasource.dataKeys[0].type===it.h.timeseries&&(t=this.attributeService.saveEntityTimeseries(n,"scope",i)),t.subscribe((function(){e.isPreviewPhoto=!1,e.updatePhoto=!1,e.closeCamera()}),(function(){e.updatePhoto=!1}))},e.prototype.switchWebCamera=function(){this.videoInputsIndex=(this.videoInputsIndex+1)%this.availableVideoInputs.length,this.stopMediaTracks(),this.inititedVideoStream(this.availableVideoInputs[this.videoInputsIndex].deviceId)},e.prototype.createPhoto=function(){this.canvasElement.width=this.videoWidth,this.canvasElement.height=this.videoHeight,this.canvasElement.getContext("2d").drawImage(this.videoElement,0,0,this.videoWidth,this.videoHeight);var t=this.settings.imageFormat?this.settings.imageFormat:e.DEFAULT_IMAGE_TYPE,n=this.settings.imageQuality?this.settings.imageQuality:e.DEFAULT_IMAGE_QUALITY;this.previewPhoto=this.canvasElement.toDataURL(t,n),this.isPreviewPhoto=!0},e.prototype.inititedVideoStream=function(t,n){var i=this;if(void 0===n&&(n=!1),window.navigator.mediaDevices&&window.navigator.mediaDevices.getUserMedia){var a={video:{deviceId:""!==t?{exact:t}:void 0}};window.navigator.mediaDevices.getUserMedia(a).then((function(t){n&&(i.isShowCamera=!0,i.availableVideoInputs.find((function(t){return""===t.deviceId}))&&e.getAvailableVideoInputs().then((function(t){i.singleDevice=t.length<2,i.availableVideoInputs=t,i.ctx.detectChanges()}))),i.mediaStream=t,i.videoElement.srcObject=t,i.ctx.detectChanges()}),(function(){i.isHavePermissionCamera=!1}))}},Object.defineProperty(e.prototype,"textMessage",{get:function(){return this.isLoading?"":this.isProtocolHttps?this.isCameraSupport?this.isEntityDetected?this.dataKeyDetected?this.isDeviceDetect?this.isHavePermissionCamera?null:"widgets.input-widgets.no-permission-camera":"widgets.input-widgets.no-found-your-camera":"widgets.input-widgets.no-datakey-selected":"widgets.input-widgets.no-entity-selected":"widgets.input-widgets.no-support-web-camera":"widgets.input-widgets.enable-https-use-widget"},enumerable:!1,configurable:!0}),e.DEFAULT_IMAGE_TYPE="image/jpeg",e.DEFAULT_IMAGE_QUALITY=.92,e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](Vt.b),i["\u0275\u0275directiveInject"](F.Store),i["\u0275\u0275directiveInject"](i.ElementRef),i["\u0275\u0275directiveInject"](i.NgZone),i["\u0275\u0275directiveInject"](I.Overlay),i["\u0275\u0275directiveInject"](C.a),i["\u0275\u0275directiveInject"](nt.a),i["\u0275\u0275directiveInject"](Rt.DomSanitizer))},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["tb-photo-camera-widget"]],viewQuery:function(t,e){var n;(1&t&&(i["\u0275\u0275viewQuery"](Gt,!0),i["\u0275\u0275viewQuery"](Bt,!0)),2&t)&&(i["\u0275\u0275queryRefresh"](n=i["\u0275\u0275loadQuery"]())&&(e.videoStreamRef=n.first),i["\u0275\u0275queryRefresh"](n=i["\u0275\u0275loadQuery"]())&&(e.canvasRef=n.first))},inputs:{ctx:"ctx"},features:[i["\u0275\u0275InheritDefinitionFeature"]],decls:3,vars:3,consts:[["fxLayout","column","fxLayoutAlign","center center","tb-fullscreen","",1,"tb-web-camera",3,"fullscreen"],["class","image-container",4,"ngIf"],["class","message-text",4,"ngIf"],[1,"image-container"],["fxLayout","column","fxLayoutAlign","space-between center","fxFlexFill","",3,"fxShow"],["fxFlex","",1,"tb-web-camera__last-photo"],["translate","",1,"tb-web-camera__last-photo_text",3,"fxShow"],["alt","last photo",1,"tb-web-camera__last-photo_img",3,"fxShow","src"],["mat-raised-button","","color","primary",3,"click",4,"ngIf"],["fxLayout","column","fxLayoutAlign","center center",1,"camera-container",3,"fxShow"],[1,"camera",3,"fxShow"],["autoplay","","muted","","playsinline","",1,"camera-stream"],["videoStream",""],["fxLayout","row wrap","fxLayoutAlign","space-between end",1,"camera-controls"],["fxFlex",""],["mat-mini-fab","","color","primary",3,"disabled","click"],["mat-fab","","color","accent",3,"click"],["mat-mini-fab","","color","primary",3,"click"],["alt","preview photo",1,"camera-stream",3,"src"],[2,"display","none"],["canvas",""],["fxLayout","row","fxLayoutAlign","space-between end",1,"camera-controls"],["mat-fab","","color","primary",3,"disabled","click"],["mat-fab","","color","accent",3,"disabled","click"],["mat-raised-button","","color","primary",3,"click"],[1,"message-text"]],template:function(t,e){1&t&&(i["\u0275\u0275elementStart"](0,"div",0),i["\u0275\u0275template"](1,qt,36,12,"div",1),i["\u0275\u0275template"](2,Wt,3,3,"div",2),i["\u0275\u0275elementEnd"]()),2&t&&(i["\u0275\u0275property"]("fullscreen",e.isShowCamera),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",e.isEntityDetected&&e.dataKeyDetected&&e.isCameraSupport&&e.isProtocolHttps),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",e.textMessage))},directives:[V.f,V.e,Nt.a,a.NgIf,V.k,P.d,V.b,R.TranslateDirective,_.MatButton,L.MatIcon],pipes:[R.TranslatePipe],styles:[".tb-web-camera{height:100%}.tb-web-camera__last-photo{width:100%;min-height:0;margin:5px 0;text-align:center;border:1px solid}.tb-web-camera__last-photo_text{position:absolute;top:50%;left:50%;margin-top:-.625em;transform:translate(-50%,-50%)}.tb-web-camera__last-photo_img{width:100%;height:100%;-o-object-fit:contain;object-fit:contain}.tb-web-camera .camera-container{height:100%}.tb-web-camera .camera{position:relative;width:100%;height:100%;overflow:hidden}.tb-web-camera .camera .camera-stream{display:block;width:100%;height:100%;-o-object-fit:contain;object-fit:contain}.tb-web-camera .camera .camera-controls{position:absolute;bottom:0;width:100%;padding:0 5px 5px}.tb-web-camera .camera .camera-controls .mat-button-base{margin:6px 8px}.tb-web-camera .message-text{font-size:18px;color:#a0a0a0;text-align:center}.tb-web-camera .image-container{height:100%;min-height:0;width:100%;min-width:100%}"],encapsulation:2}),e}(x.a);!function(){i["\u0275setClassMetadata"](Kt,[{type:i.Component,args:[{selector:"tb-photo-camera-widget",templateUrl:"./photo-camera-input.component.html",styleUrls:["./photo-camera-input.component.scss"],encapsulation:i.ViewEncapsulation.None}]}],(function(){return[{type:Window,decorators:[{type:i.Inject,args:[Vt.b]}]},{type:F.Store},{type:i.ElementRef},{type:i.NgZone},{type:I.Overlay},{type:C.a},{type:nt.a},{type:Rt.DomSanitizer}]}),{ctx:[{type:i.Input}],videoStreamRef:[{type:i.ViewChild,args:["videoStream",{static:!1}]}],canvasRef:[{type:i.ViewChild,args:["canvas",{static:!1}]}]})}(),function(t){t.tls="tls",t.accessToken="accessToken"}(zt||(zt={}));var Ht,$t,Qt=new Map([[zt.tls,"gateway.security-types.tls"],[zt.accessToken,"gateway.security-types.access-token"]]);!function(t){t.none="NONE",t.critical="CRITICAL",t.error="ERROR",t.warning="WARNING",t.info="INFO",t.debug="DEBUG"}(Ht||(Ht={})),function(t){t.memory="memory",t.file="file"}($t||($t={}));var Xt,Yt=new Map([[$t.memory,"gateway.storage-types.memory-storage"],[$t.file,"gateway.storage-types.file-storage"]]);!function(t){t.mqtt="MQTT",t.modbus="Modbus",t.opcua="OPC-UA",t.ble="BLE",t.request="Request",t.can="CAN",t.bacnet="BACnet",t.custom="Custom"}(Xt||(Xt={}));var Jt={config:{},name:"",configType:null,enabled:!1};function Zt(t){return JSON.stringify(t.value)===JSON.stringify({})?{validJSON:!0}:null}function te(t){return t.replace("_","").replace("-","").replace(/^\s+|\s+/g,"").toLowerCase()+".json"}function ee(t,e){return'[loggers]}}keys=root, service, connector, converter, tb_connection, storage, extension}}[handlers]}}keys=consoleHandler, serviceHandler, connectorHandler, converterHandler, tb_connectionHandler, storageHandler, extensionHandler}}[formatters]}}keys=LogFormatter}}[logger_root]}}level=ERROR}}handlers=consoleHandler}}[logger_connector]}}level={ERROR}}}handlers=connectorHandler}}formatter=LogFormatter}}qualname=connector}}[logger_storage]}}level={ERROR}}}handlers=storageHandler}}formatter=LogFormatter}}qualname=storage}}[logger_tb_connection]}}level={ERROR}}}handlers=tb_connectionHandler}}formatter=LogFormatter}}qualname=tb_connection}}[logger_service]}}level={ERROR}}}handlers=serviceHandler}}formatter=LogFormatter}}qualname=service}}[logger_converter]}}level={ERROR}}}handlers=converterHandler}}formatter=LogFormatter}}qualname=converter}}[logger_extension]}}level={ERROR}}}handlers=connectorHandler}}formatter=LogFormatter}}qualname=extension}}[handler_consoleHandler]}}class=StreamHandler}}level={ERROR}}}formatter=LogFormatter}}args=(sys.stdout,)}}[handler_connectorHandler]}}level={ERROR}}}class=logging.handlers.TimedRotatingFileHandler}}formatter=LogFormatter}}args=("{./logs/}connector.log", "d", 1, 7,)}}[handler_storageHandler]}}level={ERROR}}}class=logging.handlers.TimedRotatingFileHandler}}formatter=LogFormatter}}args=("{./logs/}storage.log", "d", 1, 7,)}}[handler_serviceHandler]}}level={ERROR}}}class=logging.handlers.TimedRotatingFileHandler}}formatter=LogFormatter}}args=("{./logs/}service.log", "d", 1, 7,)}}[handler_converterHandler]}}level={ERROR}}}class=logging.handlers.TimedRotatingFileHandler}}formatter=LogFormatter}}args=("{./logs/}converter.log", "d", 1, 3,)}}[handler_extensionHandler]}}level={ERROR}}}class=logging.handlers.TimedRotatingFileHandler}}formatter=LogFormatter}}args=("{./logs/}extension.log", "d", 1, 3,)}}[handler_tb_connectionHandler]}}level={ERROR}}}class=logging.handlers.TimedRotatingFileHandler}}formatter=LogFormatter}}args=("{./logs/}tb_connection.log", "d", 1, 3,)}}[formatter_LogFormatter]}}format="%(asctime)s - %(levelname)s - [%(filename)s] - %(module)s - %(lineno)d - %(message)s" }}datefmt="%Y-%m-%d %H:%M:%S"'.replace(/{ERROR}/g,t).replace(/{.\/logs\/}/g,e)}function ne(t){return{id:t,entityType:et.b.DEVICE}}function ie(t){var e={};return Object.prototype.hasOwnProperty.call(t,"thingsboard")&&(e.host=t.thingsboard.host,e.port=t.thingsboard.port,e.remoteConfiguration=t.thingsboard.remoteConfiguration,Object.prototype.hasOwnProperty.call(t.thingsboard.security,zt.accessToken)?(e.securityType=zt.accessToken,e.accessToken=t.thingsboard.security.accessToken):(e.securityType=zt.tls,e.caCertPath=t.thingsboard.security.caCert,e.privateKeyPath=t.thingsboard.security.privateKey,e.certPath=t.thingsboard.security.cert)),Object.prototype.hasOwnProperty.call(t,"storage")&&Object.prototype.hasOwnProperty.call(t.storage,"type")&&(t.storage.type===$t.memory?(e.storageType=$t.memory,e.readRecordsCount=t.storage.read_records_count,e.maxRecordsCount=t.storage.max_records_count):t.storage.type===$t.file&&(e.storageType=$t.file,e.dataFolderPath=t.storage.data_folder_path,e.maxFilesCount=t.storage.max_file_count,e.readRecordsCount=t.storage.read_records_count,e.maxRecordsCount=t.storage.max_records_count)),e}function ae(t){for(var e={},n=0,i=t;n<i.length;n++){var a=i[n];a.enabled||(e[a.name]={connector:a.configType,config:a.config})}return e}function re(t){var e={thingsboard:oe(t)};return!function(t,e){for(var n=0,i=e;n<i.length;n++){var a=i[n];if(a.enabled){var r=a.configType;Array.isArray(t[r])||(t[r]=[]);var o={name:a.name,config:a.config};t[r].push(o)}}}(e,t.connectors),e}function oe(t){var e;e=t.securityType===zt.accessToken?{accessToken:t.accessToken}:{caCert:t.caCertPath,privateKey:t.privateKeyPath,cert:t.certPath};var n,i={host:t.host,remoteConfiguration:t.remoteConfiguration,port:t.port,security:e};n=t.storageType===$t.memory?{type:$t.memory,read_records_count:t.readRecordsCount,max_records_count:t.maxRecordsCount}:{type:$t.file,data_folder_path:t.dataFolderPath,max_file_count:t.maxFilesCount,max_read_records_count:t.readRecordsCount,max_records_per_file:t.maxRecordsCount};for(var a=[],r=0,o=t.connectors;r<o.length;r++){var s=o[r];if(s.enabled){var l={configuration:te(s.name),name:s.name,type:s.configType};a.push(l)}}return{thingsboard:i,connectors:a,storage:n,logs:window.btoa(ee(t.remoteLoggingLevel,t.remoteLoggingPathToLogs))}}var se=n("HeHW"),le=n("DaoB"),ce=n("vkgz"),de=n("9HAa"),pe=n("0IaG"),ue=n("7EHt"),me=n("4Th+"),fe=n("Qu3c"),he=["formContainer"],ge=["gatewayConfigurationForm"];function ye(t,e){if(1&t&&(i["\u0275\u0275elementStart"](0,"mat-option",28),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&t){var n=e.$implicit;i["\u0275\u0275property"]("value",n.key),i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,2,n.value.toString())," ")}}function be(t,e){1&t&&(i["\u0275\u0275elementStart"](0,"mat-error",29),i["\u0275\u0275text"](1," gateway.thingsboard-host-required "),i["\u0275\u0275elementEnd"]())}function ve(t,e){1&t&&(i["\u0275\u0275elementStart"](0,"mat-error",29),i["\u0275\u0275text"](1," gateway.thingsboard-port-required "),i["\u0275\u0275elementEnd"]())}function xe(t,e){1&t&&(i["\u0275\u0275elementStart"](0,"mat-error",29),i["\u0275\u0275text"](1," gateway.thingsboard-port-min "),i["\u0275\u0275elementEnd"]())}function Ce(t,e){1&t&&(i["\u0275\u0275elementStart"](0,"mat-error",29),i["\u0275\u0275text"](1," gateway.thingsboard-port-max "),i["\u0275\u0275elementEnd"]())}function Se(t,e){1&t&&(i["\u0275\u0275elementStart"](0,"mat-error",29),i["\u0275\u0275text"](1," gateway.thingsboard-port-pattern "),i["\u0275\u0275elementEnd"]())}function we(t,e){1&t&&(i["\u0275\u0275elementStart"](0,"div",5),i["\u0275\u0275elementStart"](1,"mat-form-field",6),i["\u0275\u0275elementStart"](2,"mat-label"),i["\u0275\u0275text"](3),i["\u0275\u0275pipe"](4,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](5,"input",30),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](6,"mat-form-field",6),i["\u0275\u0275elementStart"](7,"mat-label"),i["\u0275\u0275text"](8),i["\u0275\u0275pipe"](9,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](10,"input",31),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](11,"mat-form-field",6),i["\u0275\u0275elementStart"](12,"mat-label"),i["\u0275\u0275text"](13),i["\u0275\u0275pipe"](14,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](15,"input",32),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()),2&t&&(i["\u0275\u0275advance"](3),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](4,3,"gateway.tls-path-ca-certificate")),i["\u0275\u0275advance"](5),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](9,5,"gateway.tls-path-private-key")),i["\u0275\u0275advance"](5),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](14,7,"gateway.tls-path-client-certificate")))}function Ee(t,e){if(1&t&&(i["\u0275\u0275elementStart"](0,"mat-option",28),i["\u0275\u0275text"](1),i["\u0275\u0275elementEnd"]()),2&t){var n=e.$implicit;i["\u0275\u0275property"]("value",n),i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",n," ")}}function Ie(t,e){1&t&&(i["\u0275\u0275elementStart"](0,"mat-error",29),i["\u0275\u0275text"](1," gateway.path-logs-required "),i["\u0275\u0275elementEnd"]())}function Oe(t,e){if(1&t&&(i["\u0275\u0275elementStart"](0,"mat-option",28),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&t){var n=e.$implicit;i["\u0275\u0275property"]("value",n.key),i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,2,n.value.toString())," ")}}function Te(t,e){1&t&&(i["\u0275\u0275elementStart"](0,"mat-error",29),i["\u0275\u0275text"](1," gateway.storage-pack-size-required "),i["\u0275\u0275elementEnd"]())}function Me(t,e){1&t&&(i["\u0275\u0275elementStart"](0,"mat-error",29),i["\u0275\u0275text"](1," gateway.storage-pack-size-min "),i["\u0275\u0275elementEnd"]())}function Fe(t,e){1&t&&(i["\u0275\u0275elementStart"](0,"mat-error",29),i["\u0275\u0275text"](1," gateway.storage-pack-size-pattern "),i["\u0275\u0275elementEnd"]())}function Pe(t,e){1&t&&(i["\u0275\u0275elementStart"](0,"mat-error",29),i["\u0275\u0275text"](1," gateway.storage-max-records-required "),i["\u0275\u0275elementEnd"]())}function De(t,e){1&t&&(i["\u0275\u0275elementStart"](0,"mat-error",29),i["\u0275\u0275text"](1," gateway.storage-max-records-min "),i["\u0275\u0275elementEnd"]())}function ke(t,e){1&t&&(i["\u0275\u0275elementStart"](0,"mat-error",29),i["\u0275\u0275text"](1," gateway.storage-max-records-pattern "),i["\u0275\u0275elementEnd"]())}function je(t,e){1&t&&(i["\u0275\u0275elementStart"](0,"mat-error",29),i["\u0275\u0275text"](1," gateway.storage-max-files-required "),i["\u0275\u0275elementEnd"]())}function Ae(t,e){1&t&&(i["\u0275\u0275elementStart"](0,"mat-error",29),i["\u0275\u0275text"](1," gateway.storage-max-files-min "),i["\u0275\u0275elementEnd"]())}function _e(t,e){1&t&&(i["\u0275\u0275elementStart"](0,"mat-error",29),i["\u0275\u0275text"](1," gateway.storage-max-files-pattern "),i["\u0275\u0275elementEnd"]())}function Le(t,e){1&t&&(i["\u0275\u0275elementStart"](0,"mat-error",29),i["\u0275\u0275text"](1," gateway.storage-path-required "),i["\u0275\u0275elementEnd"]())}function Ve(t,e){if(1&t&&(i["\u0275\u0275elementStart"](0,"div",9),i["\u0275\u0275elementStart"](1,"mat-form-field",6),i["\u0275\u0275elementStart"](2,"mat-label"),i["\u0275\u0275text"](3),i["\u0275\u0275pipe"](4,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](5,"input",33),i["\u0275\u0275template"](6,je,2,0,"mat-error",11),i["\u0275\u0275template"](7,Ae,2,0,"mat-error",11),i["\u0275\u0275template"](8,_e,2,0,"mat-error",11),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](9,"mat-form-field",6),i["\u0275\u0275elementStart"](10,"mat-label"),i["\u0275\u0275text"](11),i["\u0275\u0275pipe"](12,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](13,"input",34),i["\u0275\u0275template"](14,Le,2,0,"mat-error",11),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()),2&t){var n=i["\u0275\u0275nextContext"]();i["\u0275\u0275property"]("fxLayout",n.alignment)("fxLayoutGap",n.layoutGap),i["\u0275\u0275advance"](3),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](4,8,"gateway.storage-max-files")),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("ngIf",n.gatewayConfigurationGroup.get("maxFilesCount").hasError("required")),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",n.gatewayConfigurationGroup.get("maxFilesCount").hasError("min")),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",n.gatewayConfigurationGroup.get("maxFilesCount").hasError("pattern")),i["\u0275\u0275advance"](3),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](12,10,"gateway.storage-path")),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("ngIf",n.gatewayConfigurationGroup.get("dataFolderPath").hasError("required"))}}function Re(t,e){if(1&t&&(i["\u0275\u0275elementStart"](0,"mat-option",28),i["\u0275\u0275text"](1),i["\u0275\u0275elementEnd"]()),2&t){var n=e.$implicit;i["\u0275\u0275property"]("value",n),i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",n," ")}}function Ne(t,e){1&t&&(i["\u0275\u0275elementStart"](0,"mat-error",29),i["\u0275\u0275text"](1," gateway.connector-type-required "),i["\u0275\u0275elementEnd"]())}function Ge(t,e){1&t&&(i["\u0275\u0275elementStart"](0,"mat-error",29),i["\u0275\u0275text"](1," gateway.connector-name-required "),i["\u0275\u0275elementEnd"]())}var Be=function(t){return{"mat-warn":t}};function Ue(t,e){if(1&t){var n=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"section",35),i["\u0275\u0275elementStart"](1,"div",36),i["\u0275\u0275elementStart"](2,"div",37),i["\u0275\u0275element"](3,"mat-slide-toggle",38),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](4,"div",39),i["\u0275\u0275elementStart"](5,"mat-form-field",6),i["\u0275\u0275elementStart"](6,"mat-label"),i["\u0275\u0275text"](7),i["\u0275\u0275pipe"](8,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](9,"mat-select",40),i["\u0275\u0275listener"]("selectionChange",(function(){i["\u0275\u0275restoreView"](n);var t=e.$implicit;return i["\u0275\u0275nextContext"]().changeConnectorType(t)})),i["\u0275\u0275template"](10,Re,2,2,"mat-option",8),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](11,Ne,2,0,"mat-error",11),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](12,"mat-form-field",6),i["\u0275\u0275elementStart"](13,"mat-label"),i["\u0275\u0275text"](14),i["\u0275\u0275pipe"](15,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](16,"input",41),i["\u0275\u0275listener"]("blur",(function(){i["\u0275\u0275restoreView"](n);var t=e.$implicit,a=e.index;return i["\u0275\u0275nextContext"]().changeConnectorName(t,a)})),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](17,Ge,2,0,"mat-error",11),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](18,"div",42),i["\u0275\u0275elementStart"](19,"button",43),i["\u0275\u0275listener"]("click",(function(t){i["\u0275\u0275restoreView"](n);var a=e.index,r=e.$implicit;return i["\u0275\u0275nextContext"]().openConfigDialog(t,a,r.get("config").value,r.get("name").value)})),i["\u0275\u0275pipe"](20,"translate"),i["\u0275\u0275elementStart"](21,"mat-icon"),i["\u0275\u0275text"](22,"more_horiz"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](23,"button",44),i["\u0275\u0275listener"]("click",(function(){i["\u0275\u0275restoreView"](n);var t=e.index;return i["\u0275\u0275nextContext"]().removeConnector(t)})),i["\u0275\u0275pipe"](24,"translate"),i["\u0275\u0275elementStart"](25,"mat-icon"),i["\u0275\u0275text"](26,"close"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()}if(2&t){var a=e.$implicit,r=e.index,o=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("formGroupName",r),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("fxLayout",o.alignment)("fxLayoutGap",o.layoutGap),i["\u0275\u0275advance"](3),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](8,16,"gateway.connector-type")),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("ngForOf",o.connectorTypes),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",a.get("configType").hasError("required")),i["\u0275\u0275advance"](3),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](15,18,"gateway.connector-name")),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("ngIf",a.get("name").hasError("required")),i["\u0275\u0275advance"](1),i["\u0275\u0275propertyInterpolate"]("fxLayoutAlign","row"==o.alignment?"end center":"space-evenly center"),i["\u0275\u0275property"]("fxLayout",o.alignment)("fxLayoutGap",o.layoutGap),i["\u0275\u0275advance"](1),i["\u0275\u0275propertyInterpolate"]("matTooltip",i["\u0275\u0275pipeBind1"](20,20,"gateway.update-config")),i["\u0275\u0275property"]("disabled",o.isReadOnlyForm)("ngClass",i["\u0275\u0275pureFunction1"](24,Be,a.get("config").invalid)),i["\u0275\u0275advance"](4),i["\u0275\u0275propertyInterpolate"]("matTooltip",i["\u0275\u0275pipeBind1"](24,22,"gateway.delete")),i["\u0275\u0275property"]("disabled",o.isReadOnlyForm)}}function qe(t,e){if(1&t){var n=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"button",45),i["\u0275\u0275listener"]("click",(function(){return i["\u0275\u0275restoreView"](n),i["\u0275\u0275nextContext"]().exportConfig()})),i["\u0275\u0275pipe"](1,"translate"),i["\u0275\u0275text"](2),i["\u0275\u0275pipe"](3,"translate"),i["\u0275\u0275elementEnd"]()}if(2&t){var a=i["\u0275\u0275nextContext"]();i["\u0275\u0275propertyInterpolate"]("matTooltip",i["\u0275\u0275pipeBind1"](1,3,"gateway.download-tip")),i["\u0275\u0275property"]("disabled",!a.gatewayConfigurationGroup.dirty||a.gatewayConfigurationGroup.invalid),i["\u0275\u0275advance"](2),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](3,5,"action.download")," ")}}function We(t,e){if(1&t&&(i["\u0275\u0275elementStart"](0,"button",46),i["\u0275\u0275pipe"](1,"translate"),i["\u0275\u0275text"](2),i["\u0275\u0275pipe"](3,"translate"),i["\u0275\u0275elementEnd"]()),2&t){var n=i["\u0275\u0275nextContext"]();i["\u0275\u0275propertyInterpolate"]("matTooltip",i["\u0275\u0275pipeBind1"](1,3,"gateway.save-tip")),i["\u0275\u0275property"]("disabled",!n.gatewayConfigurationGroup.dirty||n.gatewayConfigurationGroup.invalid),i["\u0275\u0275advance"](2),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](3,5,"action.save")," ")}}var ze=function(t){function e(e,n,i,a,r,o,s,l,c,d,p){var u=t.call(this,e)||this;return u.store=e,u.elementRef=n,u.utils=i,u.ngZone=a,u.fb=r,u.window=o,u.dialog=s,u.translate=l,u.deviceService=c,u.attributeService=d,u.importExport=p,u.alignment="row",u.layoutGap="5px",u.securityTypes=Qt,u.gatewayLogLevels=Object.keys(Ht).map((function(t){return Ht[t]})),u.connectorTypes=Object.keys(Xt),u.storageTypes=Yt,u.toastTargetId="gateway-configuration-widget"+u.utils.guid(),u.isReadOnlyForm=!1,u}return Object(v.d)(e,t),Object.defineProperty(e.prototype,"connectors",{get:function(){return this.gatewayConfigurationGroup.get("connectors")},enumerable:!1,configurable:!0}),e.prototype.ngOnInit=function(){var t=this;this.initWidgetSettings(this.ctx.settings),this.ctx.datasources&&this.ctx.datasources.length&&(this.deviceNameForm=this.ctx.datasources[0].name),this.buildForm(),this.ctx.updateWidgetParams(),this.formResize$=new ot.a((function(){t.resize()})),this.formResize$.observe(this.formContainerRef.nativeElement)},e.prototype.ngOnDestroy=function(){this.formResize$&&this.formResize$.disconnect(),this.subscribeGateway$.unsubscribe(),this.subscribeStorageType$.unsubscribe()},e.prototype.initWidgetSettings=function(t){var e,n,i;i=t.gatewayTitle&&t.gatewayTitle.length?this.utils.customTranslation(t.gatewayTitle,t.gatewayTitle):this.translate.instant("gateway.gateway"),this.ctx.widgetTitle=i,this.isReadOnlyForm=!!t.readOnly&&t.readOnly,this.archiveFileName=(null===(e=t.archiveFileName)||void 0===e?void 0:e.length)?t.archiveFileName:"gatewayConfiguration",this.gatewayType=(null===(n=t.gatewayType)||void 0===n?void 0:n.length)?t.gatewayType:"Gateway",this.gatewayNameExists=this.utils.customTranslation(t.gatewayNameExists,t.gatewayNameExists)||this.translate.instant("gateway.gateway-exists"),this.successfulSaved=this.utils.customTranslation(t.successfulSave,t.successfulSave)||this.translate.instant("gateway.gateway-saved"),this.updateWidgetDisplaying()},e.prototype.resize=function(){var t=this;this.ngZone.run((function(){t.updateWidgetDisplaying(),t.ctx.detectChanges()}))},e.prototype.updateWidgetDisplaying=function(){this.ctx.$container&&this.ctx.$container[0].offsetWidth<=425?(this.layoutGap="0",this.alignment="column"):(this.layoutGap="5px",this.alignment="row")},e.prototype.saveAttribute=function(t,e,n){var i=this.gatewayConfigurationGroup.get("gateway").value,a={key:t,value:e};return this.attributeService.saveEntityAttributes(ne(i),n,[a])},e.prototype.createConnector=function(t){void 0===t&&(t=Jt),this.connectors.push(this.fb.group({enabled:[t.enabled],configType:[t.configType,[j.Validators.required]],name:[t.name,[j.Validators.required]],config:[t.config,[j.Validators.nullValidator,Zt]]}))},e.prototype.getFormField=function(t){return this.gatewayConfigurationGroup.get(t)},e.prototype.buildForm=function(){var t=this;this.gatewayConfigurationGroup=this.fb.group({gateway:[null,[]],accessToken:[null,[j.Validators.required]],securityType:[zt.accessToken],host:[this.window.location.hostname,[j.Validators.required]],port:[1883,[j.Validators.required,j.Validators.min(1),j.Validators.max(65535),j.Validators.pattern(/^-?[0-9]+$/)]],remoteConfiguration:[!0],caCertPath:["/etc/thingsboard-gateway/ca.pem"],privateKeyPath:["/etc/thingsboard-gateway/privateKey.pem"],certPath:["/etc/thingsboard-gateway/certificate.pem"],remoteLoggingLevel:[Ht.debug],remoteLoggingPathToLogs:["./logs/",[j.Validators.required]],storageType:[$t.memory],readRecordsCount:[100,[j.Validators.required,j.Validators.min(1),j.Validators.pattern(/^-?[0-9]+$/)]],maxRecordsCount:[1e4,[j.Validators.required,j.Validators.min(1),j.Validators.pattern(/^-?[0-9]+$/)]],maxFilesCount:[5,[j.Validators.required,j.Validators.min(1),j.Validators.pattern(/^-?[0-9]+$/)]],dataFolderPath:["./data/",[j.Validators.required]],connectors:this.fb.array([])}),this.isReadOnlyForm&&this.gatewayConfigurationGroup.disable({emitEvent:!1}),this.subscribeStorageType$=this.getFormField("storageType").valueChanges.subscribe((function(e){e===$t.memory?(t.getFormField("maxFilesCount").disable(),t.getFormField("dataFolderPath").disable()):(t.getFormField("maxFilesCount").enable(),t.getFormField("dataFolderPath").enable())})),this.subscribeGateway$=this.getFormField("gateway").valueChanges.subscribe((function(e){null!==e?Object(rt.a)(Object(v.g)([t.deviceService.getDeviceCredentials(e).pipe(Object(ce.a)((function(e){t.getFormField("accessToken").patchValue(e.credentialsId)})))],t.getAttributes(e))).subscribe((function(){t.gatewayConfigurationGroup.markAsPristine(),t.ctx.detectChanges()})):t.getFormField("accessToken").patchValue("")}))},e.prototype.gatewayExist=function(){this.ctx.showErrorToast(this.gatewayNameExists,"top","left",this.toastTargetId)},e.prototype.exportConfig=function(){var t,e,n,i=this.gatewayConfigurationGroup.value,a={};a["tb_gateway.yaml"]=function(t){var e;e="thingsboard:\n",e+="  host: "+t.host+"\n",e+="  remoteConfiguration: "+t.remoteConfiguration+"\n",e+="  port: "+t.port+"\n",e+="  security:\n",t.securityType===zt.accessToken?e+="    access-token: "+t.accessToken+"\n":(e+="    ca_cert: "+t.caCertPath+"\n",e+="    privateKey: "+t.privateKeyPath+"\n",e+="    cert: "+t.certPath+"\n"),e+="storage:\n",t.storageType===$t.memory?(e+="  type: memory\n",e+="  read_records_count: "+t.readRecordsCount+"\n",e+="  max_records_count: "+t.maxRecordsCount+"\n"):(e+="  type: file\n",e+="  data_folder_path: "+t.dataFolderPath+"\n",e+="  max_file_count: "+t.maxFilesCount+"\n",e+="  max_read_records_count: "+t.readRecordsCount+"\n",e+="  max_records_per_file: "+t.maxRecordsCount+"\n"),e+="connectors:\n";for(var n=0,i=t.connectors;n<i.length;n++){var a=i[n];a.enabled&&(e+="  -\n",e+="    name: "+a.name+"\n",e+="    type: "+a.configType+"\n",e+="    configuration: "+te(a.name)+"\n")}return e}(i),function(t,e){for(var n=0,i=e;n<i.length;n++){var a=i[n];a.enabled&&(t[te(a.name)]=JSON.stringify(a.config))}}(a,i.connectors),t=a,e=i.remoteLoggingLevel,n=i.remoteLoggingPathToLogs,t["logs.conf"]=ee(e,n),this.importExport.exportJSZip(a,this.archiveFileName),this.saveAttribute("RemoteLoggingLevel",this.gatewayConfigurationGroup.value.remoteLoggingLevel.toUpperCase(),it.d.SHARED_SCOPE)},e.prototype.addNewConnector=function(){this.createConnector()},e.prototype.removeConnector=function(t){t>-1&&(this.connectors.removeAt(t),this.connectors.markAsDirty())},e.prototype.openConfigDialog=function(t,e,n,i){var a=this;t&&(t.stopPropagation(),t.preventDefault()),this.dialog.open(se.a,{disableClose:!0,panelClass:["tb-dialog","tb-fullscreen-dialog"],data:{jsonValue:n,title:this.translate.instant("gateway.title-connectors-json",{typeName:i})}}).afterClosed().subscribe((function(t){t&&(a.connectors.at(e).get("config").patchValue(t),a.ctx.detectChanges())}))},e.prototype.createConnectorName=function(t,e,n){void 0===n&&(n=0);var i=n?e+n:e;return-1===t.findIndex((function(t){return t.name===i}))?i:this.createConnectorName(t,e,++n)},e.prototype.validateConnectorName=function(t,e,n,i){void 0===i&&(i=0);for(var a=0;a<t.length;a++){var r=0===i?e:e+i;a!==n&&t[a].name===r&&this.validateConnectorName(t,e,n,++i)}return 0===i?e:e+i},e.prototype.changeConnectorType=function(t){if(!t.get("name").value){var e=t.get("configType").value,n=this.gatewayConfigurationGroup.value.connectors;t.get("name").patchValue(this.createConnectorName(n,Xt[e]))}},e.prototype.changeConnectorName=function(t,e){var n=this.gatewayConfigurationGroup.value.connectors;t.get("name").patchValue(this.validateConnectorName(n,t.get("name").value,e))},e.prototype.save=function(){var t=this,e=this.gatewayConfigurationGroup.value;Object(rt.a)([this.saveAttribute("configuration",window.btoa(JSON.stringify(re(e))),it.d.SHARED_SCOPE),this.saveAttribute("configuration_drafts",window.btoa(JSON.stringify(ae(e.connectors))),it.d.SERVER_SCOPE),this.saveAttribute("RemoteLoggingLevel",this.gatewayConfigurationGroup.value.remoteLoggingLevel.toUpperCase(),it.d.SHARED_SCOPE)]).subscribe((function(){t.ctx.showSuccessToast(t.successfulSaved,2e3,"top","left",t.toastTargetId),t.gatewayConfigurationGroup.markAsPristine()}))},e.prototype.getAttributes=function(t){var e=this,n=[];return n.push(Object(rt.a)([this.getAttribute("current_configuration",it.d.CLIENT_SCOPE,t),this.getAttribute("configuration_drafts",it.d.SERVER_SCOPE,t)]).pipe(Object(ce.a)((function(t){var n=t[0],i=t[1];e.setFormGatewaySettings(n),e.setFormConnectorsDraft(i),e.isReadOnlyForm&&e.gatewayConfigurationGroup.disable({emitEvent:!1})})))),n.push(this.getAttribute("RemoteLoggingLevel",it.d.SHARED_SCOPE,t).pipe(Object(ce.a)((function(t){return e.processLoggingLevel(t)})))),n},e.prototype.getAttribute=function(t,e,n){return this.attributeService.getEntityAttributes(ne(n),e,[t])},e.prototype.setFormGatewaySettings=function(t){if(this.connectors.clear(),t.length>0)for(var e=JSON.parse(window.atob(t[0].value)),n=0,i=Object.keys(e);n<i.length;n++){var a=i[n],r=e[a];if("thingsboard"===a)null!==r&&Object.keys(r).length>0&&this.gatewayConfigurationGroup.patchValue(ie(r));else for(var o=0,s=Object.keys(r);o<s.length;o++){var l=s[o],c="No name";Object.prototype.hasOwnProperty.call(r[l],"name")&&(c=r[l].name);var d={enabled:!0,configType:a,config:r[l].config,name:c};this.createConnector(d)}}},e.prototype.setFormConnectorsDraft=function(t){if(t.length>0)for(var e=JSON.parse(window.atob(t[0].value)),n=0,i=Object.keys(e);n<i.length;n++){var a=i[n],r={enabled:!1,configType:e[a].connector,config:e[a].config,name:a};this.createConnector(r)}},e.prototype.processLoggingLevel=function(t){var e=Ht.debug;t.length>0&&Ht[t[0].value.toLowerCase()]&&(e=Ht[t[0].value.toLowerCase()]),this.getFormField("remoteLoggingLevel").patchValue(e)},e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](F.Store),i["\u0275\u0275directiveInject"](i.ElementRef),i["\u0275\u0275directiveInject"](C.a),i["\u0275\u0275directiveInject"](i.NgZone),i["\u0275\u0275directiveInject"](j.FormBuilder),i["\u0275\u0275directiveInject"](Vt.b),i["\u0275\u0275directiveInject"](pe.MatDialog),i["\u0275\u0275directiveInject"](R.TranslateService),i["\u0275\u0275directiveInject"](le.a),i["\u0275\u0275directiveInject"](nt.a),i["\u0275\u0275directiveInject"](de.a))},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["tb-gateway-form"]],viewQuery:function(t,e){var n;(1&t&&(i["\u0275\u0275staticViewQuery"](he,!0),i["\u0275\u0275staticViewQuery"](ge,!0)),2&t)&&(i["\u0275\u0275queryRefresh"](n=i["\u0275\u0275loadQuery"]())&&(e.formContainerRef=n.first),i["\u0275\u0275queryRefresh"](n=i["\u0275\u0275loadQuery"]())&&(e.multipleInputForm=n.first))},inputs:{ctx:"ctx",isStateForm:"isStateForm"},features:[i["\u0275\u0275InheritDefinitionFeature"]],decls:105,vars:89,consts:[["tb-toast","",1,"gateway-form",3,"formGroup","toastTarget","ngSubmit"],["formContainer",""],["multi","true",1,"mat-body-1"],[1,"tb-panel-title"],["formControlName","gateway","required","",3,"deviceName","isStateForm","newGatewayType","gatewayNameExist"],["fxLayout","column"],["fxFlex",""],["formControlName","securityType"],[3,"value",4,"ngFor","ngForOf"],[3,"fxLayout","fxLayoutGap"],["matInput","","type","text","formControlName","host"],["translate","",4,"ngIf"],["matInput","","type","number","formControlName","port"],["fxLayout","column",4,"ngIf"],["formControlName","remoteConfiguration"],["formControlName","remoteLoggingLevel"],["matInput","","type","text","formControlName","remoteLoggingPathToLogs"],["formControlName","storageType"],["matInput","","type","number","formControlName","readRecordsCount"],["matInput","","type","number","formControlName","maxRecordsCount"],[3,"fxLayout","fxLayoutGap",4,"ngIf"],["fxLayout","column",1,"gateway-config"],["formArrayName","connectors",4,"ngFor","ngForOf"],["fxLayoutAlign","center center",1,"no-data-found",3,"fxShow"],["mat-raised-button","","type","button","matTooltipPosition","above",3,"fxShow","matTooltip","click"],["fxLayout","row","fxLayoutAlign","end center",1,"form-action-buttons",3,"fxShow"],["mat-raised-button","","color","primary","type","button",3,"disabled","matTooltip","click",4,"ngIf"],["mat-raised-button","","color","primary","type","submit",3,"disabled","matTooltip",4,"ngIf"],[3,"value"],["translate",""],["matInput","","type","text","formControlName","caCertPath"],["matInput","","type","text","formControlName","privateKeyPath"],["matInput","","type","text","formControlName","certPath"],["matInput","","type","number","formControlName","maxFilesCount"],["matInput","","type","text","formControlName","dataFolderPath"],["formArrayName","connectors"],["fxLayout","row","fxLayoutAlign","space-between stretch","fxLayoutGap","8px",3,"formGroupName"],["fxLayout","column","fxLayoutAlign","center start"],["formControlName","enabled"],["fxFlex","",3,"fxLayout","fxLayoutGap"],["formControlName","configType",3,"selectionChange"],["matInput","","type","text","formControlName","name",3,"blur"],[1,"action-buttons",3,"fxLayout","fxLayoutGap","fxLayoutAlign"],["mat-icon-button","","matTooltipPosition","above",3,"disabled","matTooltip","ngClass","click"],["mat-icon-button","","matTooltipPosition","above",3,"disabled","matTooltip","click"],["mat-raised-button","","color","primary","type","button",3,"disabled","matTooltip","click"],["mat-raised-button","","color","primary","type","submit",3,"disabled","matTooltip"]],template:function(t,e){1&t&&(i["\u0275\u0275elementStart"](0,"form",0,1),i["\u0275\u0275listener"]("ngSubmit",(function(){return e.save()})),i["\u0275\u0275elementStart"](2,"mat-accordion",2),i["\u0275\u0275elementStart"](3,"mat-expansion-panel"),i["\u0275\u0275elementStart"](4,"mat-expansion-panel-header"),i["\u0275\u0275elementStart"](5,"mat-panel-title"),i["\u0275\u0275elementStart"](6,"div",3),i["\u0275\u0275text"](7),i["\u0275\u0275pipe"](8,"uppercase"),i["\u0275\u0275pipe"](9,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](10,"tb-entity-gateway-select",4),i["\u0275\u0275listener"]("gatewayNameExist",(function(){return e.gatewayExist()})),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](11,"div",5),i["\u0275\u0275elementStart"](12,"mat-form-field",6),i["\u0275\u0275elementStart"](13,"mat-label"),i["\u0275\u0275text"](14),i["\u0275\u0275pipe"](15,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](16,"mat-select",7),i["\u0275\u0275template"](17,ye,3,4,"mat-option",8),i["\u0275\u0275pipe"](18,"keyvalue"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](19,"div",9),i["\u0275\u0275elementStart"](20,"mat-form-field",6),i["\u0275\u0275elementStart"](21,"mat-label"),i["\u0275\u0275text"](22),i["\u0275\u0275pipe"](23,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](24,"input",10),i["\u0275\u0275template"](25,be,2,0,"mat-error",11),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](26,"mat-form-field",6),i["\u0275\u0275elementStart"](27,"mat-label"),i["\u0275\u0275text"](28),i["\u0275\u0275pipe"](29,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](30,"input",12),i["\u0275\u0275template"](31,ve,2,0,"mat-error",11),i["\u0275\u0275template"](32,xe,2,0,"mat-error",11),i["\u0275\u0275template"](33,Ce,2,0,"mat-error",11),i["\u0275\u0275template"](34,Se,2,0,"mat-error",11),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](35,we,16,9,"div",13),i["\u0275\u0275elementStart"](36,"mat-checkbox",14),i["\u0275\u0275text"](37),i["\u0275\u0275pipe"](38,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](39,"div",9),i["\u0275\u0275elementStart"](40,"mat-form-field",6),i["\u0275\u0275elementStart"](41,"mat-label"),i["\u0275\u0275text"](42),i["\u0275\u0275pipe"](43,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](44,"mat-select",15),i["\u0275\u0275template"](45,Ee,2,2,"mat-option",8),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](46,"mat-form-field",6),i["\u0275\u0275elementStart"](47,"mat-label"),i["\u0275\u0275text"](48),i["\u0275\u0275pipe"](49,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](50,"input",16),i["\u0275\u0275template"](51,Ie,2,0,"mat-error",11),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](52,"mat-expansion-panel"),i["\u0275\u0275elementStart"](53,"mat-expansion-panel-header"),i["\u0275\u0275elementStart"](54,"mat-panel-title"),i["\u0275\u0275elementStart"](55,"div",3),i["\u0275\u0275text"](56),i["\u0275\u0275pipe"](57,"uppercase"),i["\u0275\u0275pipe"](58,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](59,"div",5),i["\u0275\u0275elementStart"](60,"mat-form-field",6),i["\u0275\u0275elementStart"](61,"mat-label"),i["\u0275\u0275text"](62),i["\u0275\u0275pipe"](63,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](64,"mat-select",17),i["\u0275\u0275template"](65,Oe,3,4,"mat-option",8),i["\u0275\u0275pipe"](66,"keyvalue"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](67,"div",9),i["\u0275\u0275elementStart"](68,"mat-form-field",6),i["\u0275\u0275elementStart"](69,"mat-label"),i["\u0275\u0275text"](70),i["\u0275\u0275pipe"](71,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](72,"input",18),i["\u0275\u0275template"](73,Te,2,0,"mat-error",11),i["\u0275\u0275template"](74,Me,2,0,"mat-error",11),i["\u0275\u0275template"](75,Fe,2,0,"mat-error",11),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](76,"mat-form-field",6),i["\u0275\u0275elementStart"](77,"mat-label"),i["\u0275\u0275text"](78),i["\u0275\u0275pipe"](79,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](80,"input",19),i["\u0275\u0275template"](81,Pe,2,0,"mat-error",11),i["\u0275\u0275template"](82,De,2,0,"mat-error",11),i["\u0275\u0275template"](83,ke,2,0,"mat-error",11),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](84,Ve,15,12,"div",20),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](85,"mat-expansion-panel"),i["\u0275\u0275elementStart"](86,"mat-expansion-panel-header"),i["\u0275\u0275elementStart"](87,"mat-panel-title"),i["\u0275\u0275elementStart"](88,"div",3),i["\u0275\u0275text"](89),i["\u0275\u0275pipe"](90,"uppercase"),i["\u0275\u0275pipe"](91,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](92,"div",21),i["\u0275\u0275template"](93,Ue,27,26,"section",22),i["\u0275\u0275elementStart"](94,"span",23),i["\u0275\u0275text"](95),i["\u0275\u0275pipe"](96,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](97,"div"),i["\u0275\u0275elementStart"](98,"button",24),i["\u0275\u0275listener"]("click",(function(){return e.addNewConnector()})),i["\u0275\u0275pipe"](99,"translate"),i["\u0275\u0275text"](100),i["\u0275\u0275pipe"](101,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](102,"section",25),i["\u0275\u0275template"](103,qe,4,7,"button",26),i["\u0275\u0275template"](104,We,4,7,"button",27),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()),2&t&&(i["\u0275\u0275propertyInterpolate"]("toastTarget",e.toastTargetId),i["\u0275\u0275property"]("formGroup",e.gatewayConfigurationGroup),i["\u0275\u0275advance"](7),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](8,49,i["\u0275\u0275pipeBind1"](9,51,"gateway.thingsboard"))),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("deviceName",e.deviceNameForm)("isStateForm",e.isStateForm)("newGatewayType",e.gatewayType),i["\u0275\u0275advance"](4),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](15,53,"gateway.security-type")),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("ngForOf",i["\u0275\u0275pipeBind1"](18,55,e.securityTypes)),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("fxLayout",e.alignment)("fxLayoutGap",e.layoutGap),i["\u0275\u0275advance"](3),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](23,57,"gateway.thingsboard-host")),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("ngIf",e.gatewayConfigurationGroup.get("host").hasError("required")),i["\u0275\u0275advance"](3),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](29,59,"gateway.thingsboard-port")),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("ngIf",e.gatewayConfigurationGroup.get("port").hasError("required")),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",e.gatewayConfigurationGroup.get("port").hasError("min")),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",e.gatewayConfigurationGroup.get("port").hasError("max")),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",e.gatewayConfigurationGroup.get("port").hasError("pattern")),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf","tls"==e.gatewayConfigurationGroup.get("securityType").value),i["\u0275\u0275advance"](2),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](38,61,"gateway.remote")),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("fxLayout",e.alignment)("fxLayoutGap",e.layoutGap),i["\u0275\u0275advance"](3),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](43,63,"gateway.remote-logging-level")),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("ngForOf",e.gatewayLogLevels),i["\u0275\u0275advance"](3),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](49,65,"gateway.path-logs")),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("ngIf",e.gatewayConfigurationGroup.get("remoteLoggingPathToLogs").hasError("required")),i["\u0275\u0275advance"](5),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](57,67,i["\u0275\u0275pipeBind1"](58,69,"gateway.storage"))),i["\u0275\u0275advance"](6),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](63,71,"gateway.storage-type")),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("ngForOf",i["\u0275\u0275pipeBind1"](66,73,e.storageTypes)),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("fxLayout",e.alignment)("fxLayoutGap",e.layoutGap),i["\u0275\u0275advance"](3),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](71,75,"gateway.storage-pack-size")),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("ngIf",e.gatewayConfigurationGroup.get("readRecordsCount").hasError("required")),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",e.gatewayConfigurationGroup.get("readRecordsCount").hasError("min")),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",e.gatewayConfigurationGroup.get("readRecordsCount").hasError("pattern")),i["\u0275\u0275advance"](3),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](79,77,"file"!==e.gatewayConfigurationGroup.get("storageType").value?"gateway.storage-max-records":"gateway.storage-max-file-records")," "),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("ngIf",e.gatewayConfigurationGroup.get("maxRecordsCount").hasError("required")),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",e.gatewayConfigurationGroup.get("maxRecordsCount").hasError("min")),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",e.gatewayConfigurationGroup.get("maxRecordsCount").hasError("pattern")),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf","file"==e.gatewayConfigurationGroup.get("storageType").value),i["\u0275\u0275advance"](5),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](90,79,i["\u0275\u0275pipeBind1"](91,81,"gateway.connectors"))),i["\u0275\u0275advance"](4),i["\u0275\u0275property"]("ngForOf",e.connectors.controls),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("fxShow",!e.connectors.length),i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](96,83,"gateway.no-connectors")),i["\u0275\u0275advance"](3),i["\u0275\u0275propertyInterpolate"]("matTooltip",i["\u0275\u0275pipeBind1"](99,85,"gateway.connector-add")),i["\u0275\u0275property"]("fxShow",!e.isReadOnlyForm),i["\u0275\u0275advance"](2),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](101,87,"action.add")," "),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("fxShow",!e.isReadOnlyForm),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",!e.gatewayConfigurationGroup.get("remoteConfiguration").value),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",e.gatewayConfigurationGroup.get("remoteConfiguration").value))},directives:[j["\u0275angular_packages_forms_forms_y"],j.NgControlStatusGroup,lt.b,j.FormGroupDirective,ue.MatAccordion,ue.MatExpansionPanel,ue.MatExpansionPanelHeader,ue.MatExpansionPanelTitle,me.a,j.NgControlStatus,j.FormControlName,j.RequiredValidator,V.f,D.MatFormField,V.b,D.MatLabel,k.MatSelect,a.NgForOf,V.g,G.MatInput,j.DefaultValueAccessor,a.NgIf,j.NumberValueAccessor,ct.MatCheckbox,V.e,P.d,_.MatButton,fe.MatTooltip,A.MatOption,D.MatError,R.TranslateDirective,j.FormArrayName,j.FormGroupName,dt.MatSlideToggle,a.NgClass,P.b,L.MatIcon],pipes:[a.UpperCasePipe,R.TranslatePipe,a.KeyValuePipe],styles:["[_nghost-%COMP%]   .gateway-form[_ngcontent-%COMP%]{height:100%;padding:5px;background-color:transparent;overflow-y:auto;overflow-x:hidden}[_nghost-%COMP%]   .gateway-form[_ngcontent-%COMP%]   .form-action-buttons[_ngcontent-%COMP%]{padding-top:8px}[_nghost-%COMP%]   .gateway-form[_ngcontent-%COMP%]   .gateway-config[_ngcontent-%COMP%]   .no-data-found[_ngcontent-%COMP%]{position:relative;display:-ms-flexbox;display:flex;height:40px}[_nghost-%COMP%]     .mat-form-field-infix{width:auto!important}"]}),e}(x.a);!function(){i["\u0275setClassMetadata"](ze,[{type:i.Component,args:[{selector:"tb-gateway-form",templateUrl:"./gateway-form.component.html",styleUrls:["./gateway-form.component.scss"]}]}],(function(){return[{type:F.Store},{type:i.ElementRef},{type:C.a},{type:i.NgZone},{type:j.FormBuilder},{type:Window,decorators:[{type:i.Inject,args:[Vt.b]}]},{type:pe.MatDialog},{type:R.TranslateService},{type:le.a},{type:nt.a},{type:de.a}]}),{formContainerRef:[{type:i.ViewChild,args:["formContainer",{static:!0}]}],multipleInputForm:[{type:i.ViewChild,args:["gatewayConfigurationForm",{static:!0}]}],ctx:[{type:i.Input}],isStateForm:[{type:i.Input}]})}();var Ke=n("/crD"),He=n("lJxs"),$e=n("tyNb"),Qe=n("zkoq"),Xe=n("Wp6s");function Ye(t,e){if(1&t&&(i["\u0275\u0275elementStart"](0,"mat-icon",12),i["\u0275\u0275text"](1),i["\u0275\u0275elementEnd"]()),2&t){var n=i["\u0275\u0275nextContext"]().$implicit;i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate"](n.icon)}}function Je(t,e){if(1&t&&i["\u0275\u0275element"](0,"mat-icon",13),2&t){var n=i["\u0275\u0275nextContext"]().$implicit;i["\u0275\u0275property"]("svgIcon",n.icon)}}function Ze(t,e){if(1&t){var n=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"mat-grid-tile"),i["\u0275\u0275elementStart"](1,"a",8),i["\u0275\u0275listener"]("click",(function(t){i["\u0275\u0275restoreView"](n);var a=e.$implicit;return i["\u0275\u0275nextContext"](3).navigate(t,a.path)})),i["\u0275\u0275template"](2,Ye,2,1,"mat-icon",9),i["\u0275\u0275template"](3,Je,1,1,"mat-icon",10),i["\u0275\u0275elementStart"](4,"span",11),i["\u0275\u0275text"](5),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()}if(2&t){var a=e.$implicit;i["\u0275\u0275advance"](1),i["\u0275\u0275propertyInterpolate"]("href",a.path,i["\u0275\u0275sanitizeUrl"]),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",!a.isMdiIcon),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",a.isMdiIcon),i["\u0275\u0275advance"](2),i["\u0275\u0275textInterpolate"](a.name)}}function tn(t,e){if(1&t&&(i["\u0275\u0275elementStart"](0,"mat-grid-tile",3),i["\u0275\u0275elementStart"](1,"mat-card",4),i["\u0275\u0275elementStart"](2,"mat-card-title"),i["\u0275\u0275elementStart"](3,"span",5),i["\u0275\u0275text"](4),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](5,"mat-card-content"),i["\u0275\u0275elementStart"](6,"mat-grid-list",6),i["\u0275\u0275template"](7,Ze,6,4,"mat-grid-tile",7),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()),2&t){var n=e.$implicit,a=i["\u0275\u0275nextContext"](2);i["\u0275\u0275property"]("colspan",a.sectionColspan(n)),i["\u0275\u0275advance"](4),i["\u0275\u0275textInterpolate"](n.name),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("cols",a.sectionPlaces(n).length),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngForOf",a.sectionPlaces(n))}}function en(t,e){if(1&t&&(i["\u0275\u0275elementStart"](0,"mat-grid-list",1),i["\u0275\u0275template"](1,tn,8,4,"mat-grid-tile",2),i["\u0275\u0275pipe"](2,"async"),i["\u0275\u0275elementEnd"]()),2&t){var n=i["\u0275\u0275nextContext"]();i["\u0275\u0275property"]("cols",n.cols),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngForOf",i["\u0275\u0275pipeBind1"](2,2,n.showHomeSections$))}}var nn=function(t){function e(e,n,i,a){var r=t.call(this,e)||this;return r.store=e,r.menuService=n,r.ngZone=i,r.router=a,r.homeSections$=r.menuService.homeSections(),r.showHomeSections$=r.homeSections$.pipe(Object(He.a)((function(t){return t.filter((function(t){return r.sectionPlaces(t).length>0}))}))),r.cols=null,r}return Object(v.d)(e,t),e.prototype.ngOnInit=function(){this.ctx.$scope.navigationCardsWidget=this,this.settings=this.ctx.settings},e.prototype.resize=function(){this.updateColumnCount()},e.prototype.updateColumnCount=function(){this.cols=2;var t=this.ctx.width;t>=1280&&(this.cols=3,t>=1920&&(this.cols=4)),this.ctx.detectChanges()},e.prototype.navigate=function(t,e){var n=this;t.preventDefault(),this.ngZone.run((function(){n.router.navigateByUrl(e)}))},e.prototype.sectionPlaces=function(t){var e=this;return t&&t.places?t.places.filter((function(t){return e.filterPlace(t)})):[]},e.prototype.filterPlace=function(t){return"include"===this.settings.filterType?this.settings.filter.includes(t.path):"exclude"!==this.settings.filterType||!this.settings.filter.includes(t.path)},e.prototype.sectionColspan=function(t){if(this.ctx.width>=960){var e=this.cols,n=this.sectionPlaces(t);return n.length<=e&&(e=n.length),e}return 2},e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](F.Store),i["\u0275\u0275directiveInject"](Ke.a),i["\u0275\u0275directiveInject"](i.NgZone),i["\u0275\u0275directiveInject"]($e.Router))},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["tb-navigation-cards-widget"]],inputs:{ctx:"ctx"},features:[i["\u0275\u0275InheritDefinitionFeature"]],decls:1,vars:1,consts:[["class","tb-navigation-cards","rowHeight","280px",3,"cols",4,"ngIf"],["rowHeight","280px",1,"tb-navigation-cards",3,"cols"],[3,"colspan",4,"ngFor","ngForOf"],[3,"colspan"],[2,"width","100%"],["translate","",1,"mat-headline"],["rowHeight","170px",3,"cols"],[4,"ngFor","ngForOf"],["mat-raised-button","","color","primary",1,"tb-card-button",3,"href","click"],["class","material-icons tb-mat-96",4,"ngIf"],["class","tb-mat-96",3,"svgIcon",4,"ngIf"],["translate",""],[1,"material-icons","tb-mat-96"],[1,"tb-mat-96",3,"svgIcon"]],template:function(t,e){1&t&&i["\u0275\u0275template"](0,en,3,4,"mat-grid-list",0),2&t&&i["\u0275\u0275property"]("ngIf",e.cols)},directives:[a.NgIf,Qe.MatGridList,a.NgForOf,Qe.MatGridTile,Xe.MatCard,Xe.MatCardTitle,R.TranslateDirective,Xe.MatCardContent,_.MatAnchor,L.MatIcon],pipes:[a.AsyncPipe],styles:["[_nghost-%COMP%]{width:100%;height:100%}[_nghost-%COMP%]     .tb-navigation-cards .mat-headline{font-size:20px}@media screen and (min-width:1600px){[_nghost-%COMP%]     .tb-navigation-cards .mat-headline{font-size:24px}}[_nghost-%COMP%]     .tb-navigation-cards mat-card{padding:0;margin:8px}[_nghost-%COMP%]     .tb-navigation-cards mat-card mat-card-title{margin:0;padding:24px 16px 16px}[_nghost-%COMP%]     .tb-navigation-cards mat-card mat-card-title+mat-card-content{padding-top:0}[_nghost-%COMP%]     .tb-navigation-cards mat-card mat-card-content{padding:16px}[_nghost-%COMP%]     .tb-navigation-cards .tb-card-button{width:100%;height:100%;max-width:240px}[_nghost-%COMP%]     .tb-navigation-cards .tb-card-button:focus, [_nghost-%COMP%]     .tb-navigation-cards .tb-card-button:hover{border-bottom:none}[_nghost-%COMP%]     .tb-navigation-cards .tb-card-button .mat-button-wrapper{width:100%;height:100%;display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;-ms-flex-align:center;align-items:center}[_nghost-%COMP%]     .tb-navigation-cards .tb-card-button .mat-button-wrapper mat-icon{margin:auto}[_nghost-%COMP%]     .tb-navigation-cards .tb-card-button .mat-button-wrapper span{height:18px;min-height:36px;max-height:36px;padding:0 0 20px;margin:auto;font-size:18px;font-weight:400;line-height:18px;white-space:normal}[_nghost-%COMP%]     .tb-navigation-cards .tb-card-button.mat-raised-button.mat-primary .mat-ripple-element{opacity:.3;background-color:hsla(0,0%,100%,.3)}"]}),e}(x.a);!function(){i["\u0275setClassMetadata"](nn,[{type:i.Component,args:[{selector:"tb-navigation-cards-widget",templateUrl:"./navigation-cards-widget.component.html",styleUrls:["./navigation-cards-widget.component.scss"]}]}],(function(){return[{type:F.Store},{type:Ke.a},{type:i.NgZone},{type:$e.Router}]}),{ctx:[{type:i.Input}]})}();var an=function(t){function e(e,n,i,a){var r=t.call(this,e)||this;return r.store=e,r.utils=n,r.ngZone=i,r.router=a,r}return Object(v.d)(e,t),e.prototype.ngOnInit=function(){this.ctx.$scope.navigationCardWidget=this,this.settings=this.ctx.settings,this.translatedName=this.utils.customTranslation(this.settings.name,this.settings.name)},e.prototype.navigate=function(t,e){var n=this;t.preventDefault(),this.ngZone.run((function(){n.router.navigateByUrl(e)}))},e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](F.Store),i["\u0275\u0275directiveInject"](C.a),i["\u0275\u0275directiveInject"](i.NgZone),i["\u0275\u0275directiveInject"]($e.Router))},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["tb-navigation-card-widget"]],inputs:{ctx:"ctx"},features:[i["\u0275\u0275InheritDefinitionFeature"]],decls:5,vars:3,consts:[["mat-raised-button","","color","primary",1,"tb-nav-button",3,"href","click"],[1,"material-icons","tb-mat-96"]],template:function(t,e){1&t&&(i["\u0275\u0275elementStart"](0,"a",0),i["\u0275\u0275listener"]("click",(function(t){return e.navigate(t,e.settings.path)})),i["\u0275\u0275elementStart"](1,"mat-icon",1),i["\u0275\u0275text"](2),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](3,"span"),i["\u0275\u0275text"](4),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()),2&t&&(i["\u0275\u0275propertyInterpolate"]("href",e.settings.path,i["\u0275\u0275sanitizeUrl"]),i["\u0275\u0275advance"](2),i["\u0275\u0275textInterpolate"](e.settings.icon),i["\u0275\u0275advance"](2),i["\u0275\u0275textInterpolate"](e.translatedName))},directives:[_.MatAnchor,L.MatIcon],styles:["[_nghost-%COMP%], [_nghost-%COMP%]     .tb-nav-button{width:100%;height:100%}[_nghost-%COMP%]     .tb-nav-button:focus, [_nghost-%COMP%]     .tb-nav-button:hover{border-bottom:none}[_nghost-%COMP%]     .tb-nav-button .mat-button-wrapper{width:100%;height:100%;display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;-ms-flex-align:center;align-items:center}[_nghost-%COMP%]     .tb-nav-button .mat-button-wrapper mat-icon{margin:auto}[_nghost-%COMP%]     .tb-nav-button .mat-button-wrapper span{height:18px;min-height:36px;max-height:36px;padding:0 0 20px;margin:auto;font-size:18px;font-weight:400;line-height:18px;white-space:normal}[_nghost-%COMP%]     .tb-nav-button.mat-raised-button.mat-primary .mat-ripple-element{opacity:.3;background-color:hsla(0,0%,100%,.3)}"]}),e}(x.a);!function(){i["\u0275setClassMetadata"](an,[{type:i.Component,args:[{selector:"tb-navigation-card-widget",templateUrl:"./navigation-card-widget.component.html",styleUrls:["./navigation-card-widget.component.scss"]}]}],(function(){return[{type:F.Store},{type:C.a},{type:i.NgZone},{type:$e.Router}]}),{ctx:[{type:i.Input}]})}();var rn=function(){function t(){}return t.\u0275mod=i["\u0275\u0275defineNgModule"]({type:t}),t.\u0275inj=i["\u0275\u0275defineInjector"]({factory:function(e){return new(e||t)},providers:[m.a,de.a],imports:[[a.CommonModule,r.a,b,d.a],b]}),t}();void(("undefined"==typeof ngJitMode||ngJitMode)&&i["\u0275\u0275setNgModuleScope"](rn,{declarations:[s.b,c.b,o.a,l.a,p.a,u.a,Y,Z,_t,Lt.TripAnimationComponent,Kt,ze,nn,an],imports:[a.CommonModule,r.a,b,d.a],exports:[o.a,l.a,p.a,u.a,b,Y,_t,Lt.TripAnimationComponent,Kt,ze,nn,an]}))},"Bdm/":function(t,e,n){"use strict";(function(t){n.d(e,"a",(function(){return rt}));var i=n("mrSG"),a=n("fXoL"),r=n("RxGS"),o=(n("0G7Z"),n("OiFK")),s=n("//Q6"),l=n("Neop"),c=n("3Tyt"),d=n("xgIS"),p=n("VRyK"),u=n("2Vo4"),m=n("Duvn"),f=n("U3y+"),h=n("Kj3r"),g=n("/uUt"),y=n("vkgz"),b=n("lJxs"),v=n("M9IT"),x=n("Dh3D"),C=n("fr2l"),S=n("rDax"),w=n("+rOU"),E=n("A6E3"),I=n("xw5a"),O=n("mbhL"),T=n("6OOC"),M=n("l7P3"),F=n("ofXK"),P=n("sYmb"),D=n("jhN1"),k=n("XiUz"),j=n("/t3+"),A=n("znSr"),_=n("bTqV"),L=n("Qu3c"),V=n("NFeN"),R=n("kmnG"),N=n("qFsG"),G=n("3Pt+"),B=n("+0xr"),U=n("STbY"),q=n("f0Cb"),W=["searchInput"];function z(t,e){if(1&t&&(a["\u0275\u0275elementStart"](0,"mat-header-cell",24),a["\u0275\u0275text"](1),a["\u0275\u0275elementEnd"]()),2&t){var n=a["\u0275\u0275nextContext"]().$implicit,i=a["\u0275\u0275nextContext"]();a["\u0275\u0275property"]("ngStyle",i.headerStyle(n)),a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"](" ",n.title," ")}}function K(t,e){if(1&t&&a["\u0275\u0275element"](0,"mat-cell",25),2&t){var n=e.$implicit,i=a["\u0275\u0275nextContext"]().$implicit,r=a["\u0275\u0275nextContext"]();a["\u0275\u0275property"]("innerHTML",r.cellContent(n,i),a["\u0275\u0275sanitizeHtml"])("ngStyle",r.cellStyle(n,i))}}function H(t,e){if(1&t&&(a["\u0275\u0275elementContainerStart"](0,21),a["\u0275\u0275template"](1,z,2,2,"mat-header-cell",22),a["\u0275\u0275template"](2,K,1,2,"mat-cell",23),a["\u0275\u0275elementContainerEnd"]()),2&t){var n=e.$implicit;a["\u0275\u0275property"]("matColumnDef",n.def)}}var $=function(t,e,n){return{minWidth:t,maxWidth:e,width:n}};function Q(t,e){if(1&t&&a["\u0275\u0275element"](0,"mat-header-cell",26),2&t){var n=a["\u0275\u0275nextContext"]();a["\u0275\u0275property"]("ngStyle.gt-md",a["\u0275\u0275pureFunction3"](1,$,40*n.actionCellDescriptors.length+"px",40*n.actionCellDescriptors.length+"px",40*n.actionCellDescriptors.length+"px"))}}function X(t,e){if(1&t){var n=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementStart"](0,"button",30),a["\u0275\u0275listener"]("click",(function(t){a["\u0275\u0275restoreView"](n);var i=e.$implicit,r=a["\u0275\u0275nextContext"]().$implicit;return a["\u0275\u0275nextContext"]().onActionButtonClick(t,r,i)})),a["\u0275\u0275pipe"](1,"async"),a["\u0275\u0275elementStart"](2,"mat-icon"),a["\u0275\u0275text"](3),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()}if(2&t){var i=e.$implicit,r=a["\u0275\u0275nextContext"](2);a["\u0275\u0275propertyInterpolate"]("matTooltip",i.displayName),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](1,3,r.isLoading$)),a["\u0275\u0275advance"](3),a["\u0275\u0275textInterpolate"](i.icon)}}function Y(t,e){if(1&t){var n=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementStart"](0,"button",37),a["\u0275\u0275listener"]("click",(function(t){a["\u0275\u0275restoreView"](n);var i=e.$implicit,r=a["\u0275\u0275nextContext"](2).$implicit;return a["\u0275\u0275nextContext"]().onActionButtonClick(t,r,i)})),a["\u0275\u0275pipe"](1,"async"),a["\u0275\u0275elementStart"](2,"mat-icon"),a["\u0275\u0275text"](3),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](4,"span"),a["\u0275\u0275text"](5),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()}if(2&t){var i=e.$implicit,r=a["\u0275\u0275nextContext"](3);a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](1,3,r.isLoading$)),a["\u0275\u0275advance"](3),a["\u0275\u0275textInterpolate"](i.icon),a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate"](i.displayName)}}function J(t,e){if(1&t){var n=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementStart"](0,"div",31),a["\u0275\u0275elementStart"](1,"button",32),a["\u0275\u0275listener"]("click",(function(t){a["\u0275\u0275restoreView"](n);var e=a["\u0275\u0275nextContext"](2);return t.stopPropagation(),e.ctx.detectChanges()})),a["\u0275\u0275elementStart"](2,"mat-icon",33),a["\u0275\u0275text"](3,"more_vert"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](4,"mat-menu",34,35),a["\u0275\u0275template"](6,Y,6,5,"button",36),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()}if(2&t){var i=a["\u0275\u0275reference"](5),r=a["\u0275\u0275nextContext"](2);a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("matMenuTriggerFor",i),a["\u0275\u0275advance"](5),a["\u0275\u0275property"]("ngForOf",r.actionCellDescriptors)("ngForTrackBy",r.trackByActionCellDescriptionId)}}function Z(t,e){if(1&t&&(a["\u0275\u0275elementStart"](0,"mat-cell",26),a["\u0275\u0275elementStart"](1,"div",27),a["\u0275\u0275template"](2,X,4,5,"button",28),a["\u0275\u0275elementEnd"](),a["\u0275\u0275template"](3,J,7,3,"div",29),a["\u0275\u0275elementEnd"]()),2&t){var n=a["\u0275\u0275nextContext"]();a["\u0275\u0275property"]("ngStyle.gt-md",a["\u0275\u0275pureFunction3"](4,$,40*n.actionCellDescriptors.length+"px",40*n.actionCellDescriptors.length+"px",40*n.actionCellDescriptors.length+"px")),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("ngForOf",n.actionCellDescriptors)("ngForTrackBy",n.trackByActionCellDescriptionId),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",n.actionCellDescriptors.length)}}function tt(t,e){1&t&&a["\u0275\u0275element"](0,"mat-header-row")}var et=function(t,e){return{"tb-current-entity":t,invisible:e}};function nt(t,e){if(1&t){var n=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementStart"](0,"mat-row",38),a["\u0275\u0275listener"]("click",(function(t){a["\u0275\u0275restoreView"](n);var i=e.$implicit;return a["\u0275\u0275nextContext"]().onRowClick(t,i)}))("dblclick",(function(t){a["\u0275\u0275restoreView"](n);var i=e.$implicit;return a["\u0275\u0275nextContext"]().onRowClick(t,i,!0)})),a["\u0275\u0275elementEnd"]()}if(2&t){var i=e.$implicit,r=a["\u0275\u0275nextContext"]();a["\u0275\u0275property"]("ngClass",a["\u0275\u0275pureFunction2"](2,et,r.entityDatasource.isCurrentEntity(i),r.entityDatasource.dataLoading))("ngStyle",r.rowStyle(i))}}function it(t,e){1&t&&a["\u0275\u0275element"](0,"mat-divider")}function at(t,e){if(1&t&&(a["\u0275\u0275element"](0,"mat-paginator",39),a["\u0275\u0275pipe"](1,"async")),2&t){var n=a["\u0275\u0275nextContext"]();a["\u0275\u0275property"]("length",a["\u0275\u0275pipeBind1"](1,4,n.entityDatasource.total()))("pageIndex",n.pageLink.page)("pageSize",n.pageLink.pageSize)("pageSizeOptions",n.pageSizeOptions)}}var rt=function(e){function n(t,n,i,a,r,o,s,l,c){var d=e.call(this,t)||this;return d.store=t,d.elementRef=n,d.ngZone=i,d.overlay=a,d.viewContainerRef=r,d.utils=o,d.datePipe=s,d.translate=l,d.domSanitizer=c,d.displayPagination=!0,d.enableStickyHeader=!0,d.enableStickyAction=!0,d.textSearchMode=!1,d.columns=[],d.displayedColumns=[],d.defaultPageSize=10,d.defaultSortOrder="entityName",d.contentsInfo={},d.stylesInfo={},d.columnWidth={},d.columnDefaultVisibility={},d.columnSelectionAvailability={},d.searchAction={name:"action.search",show:!0,icon:"search",onAction:function(){d.enterFilterMode()}},d.columnDisplayAction={name:"entity.columns-to-display",show:!0,icon:"view_column",onAction:function(t){d.editColumnsToDisplay(t)}},d.pageLink={page:0,pageSize:d.defaultPageSize,textSearch:null,dynamic:!0},d}return Object(i.d)(n,e),n.prototype.ngOnInit=function(){this.ctx.$scope.entitiesTableWidget=this,this.settings=this.ctx.settings,this.widgetConfig=this.ctx.widgetConfig,this.subscription=this.ctx.defaultSubscription,this.initializeConfig(),this.updateDatasources(),this.ctx.updateWidgetParams()},n.prototype.ngAfterViewInit=function(){var t=this;Object(d.a)(this.searchInputField.nativeElement,"keyup").pipe(Object(h.a)(150),Object(g.a)(),Object(y.a)((function(){t.displayPagination&&(t.paginator.pageIndex=0),t.updateData()}))).subscribe(),this.displayPagination&&this.sort.sortChange.subscribe((function(){return t.paginator.pageIndex=0})),(this.displayPagination?Object(p.a)(this.sort.sortChange,this.paginator.page):this.sort.sortChange).pipe(Object(y.a)((function(){return t.updateData()}))).subscribe(),this.updateData()},n.prototype.onDataUpdated=function(){this.updateTitle(!0),this.entityDatasource.dataUpdated()},n.prototype.pageLinkSortDirection=function(){return Object(I.s)(this.pageLink)},n.prototype.initializeConfig=function(){this.ctx.widgetActions=[this.searchAction,this.columnDisplayAction],this.actionCellDescriptors=this.ctx.actionsApi.getActionDescriptors("actionCellButton"),this.settings.entitiesTitle&&this.settings.entitiesTitle.length?this.entitiesTitlePattern=this.utils.customTranslation(this.settings.entitiesTitle,this.settings.entitiesTitle):this.entitiesTitlePattern=this.translate.instant("entity.entities"),this.updateTitle(!1),this.searchAction.show=!Object(s.n)(this.settings.enableSearch)||this.settings.enableSearch,this.displayPagination=!Object(s.n)(this.settings.displayPagination)||this.settings.displayPagination,this.enableStickyHeader=!Object(s.n)(this.settings.enableStickyHeader)||this.settings.enableStickyHeader,this.enableStickyAction=!Object(s.n)(this.settings.enableStickyAction)||this.settings.enableStickyAction,this.columnDisplayAction.show=!Object(s.n)(this.settings.enableSelectColumnDisplay)||this.settings.enableSelectColumnDisplay,this.rowStylesInfo=Object(C.m)(this.settings,"entity, ctx");var e=this.settings.defaultPageSize;Object(s.n)(e)&&Object(s.v)(e)&&e>0&&(this.defaultPageSize=e),this.pageSizeOptions=[this.defaultPageSize,2*this.defaultPageSize,3*this.defaultPageSize],this.pageLink.pageSize=this.displayPagination?this.defaultPageSize:1024;var n=Object(C.a)(this.widgetConfig),i=new l.a;i.testMode=!1;var a="entities-table-"+Object(s.l)(n);i.cssPreviewNamespace=a,i.createStyleElement(a,n),t(this.elementRef.nativeElement).addClass(a)},n.prototype.updateTitle=function(t){void 0===t&&(t=!1);var e=Object(s.d)(this.subscription.datasources[0],this.entitiesTitlePattern);this.ctx.widgetTitle!==e&&(this.ctx.widgetTitle=e,t&&this.ctx.updateWidgetParams())},n.prototype.updateDatasources=function(){var t,e,n,i=this,a=!Object(s.n)(this.settings.displayEntityName)||this.settings.displayEntityName,r=!!Object(s.n)(this.settings.displayEntityLabel)&&this.settings.displayEntityLabel;e=this.settings.entityNameColumnTitle&&this.settings.entityNameColumnTitle.length?this.utils.customTranslation(this.settings.entityNameColumnTitle,this.settings.entityNameColumnTitle):this.translate.instant("entity.entity-name"),n=this.settings.entityLabelColumnTitle&&this.settings.entityLabelColumnTitle.length?this.utils.customTranslation(this.settings.entityLabelColumnTitle,this.settings.entityLabelColumnTitle):this.translate.instant("entity.entity-label");var o=!Object(s.n)(this.settings.displayEntityType)||this.settings.displayEntityType;a&&(this.columns.push({name:"entityName",label:"entityName",def:"entityName",title:e,entityKey:{key:"name",type:I.e.ENTITY_FIELD}}),this.contentsInfo.entityName={useCellContentFunction:!1},this.stylesInfo.entityName={useCellStyleFunction:!1},this.columnWidth.entityName="0px",this.columnDefaultVisibility.entityName=!0,this.columnSelectionAvailability.entityName=!0),r&&(this.columns.push({name:"entityLabel",label:"entityLabel",def:"entityLabel",title:n,entityKey:{key:"label",type:I.e.ENTITY_FIELD}}),this.contentsInfo.entityLabel={useCellContentFunction:!1},this.stylesInfo.entityLabel={useCellStyleFunction:!1},this.columnWidth.entityLabel="0px",this.columnDefaultVisibility.entityLabel=!0,this.columnSelectionAvailability.entityLabel=!0),o&&(this.columns.push({name:"entityType",label:"entityType",def:"entityType",title:this.translate.instant("entity.entity-type"),entityKey:{key:"entityType",type:I.e.ENTITY_FIELD}}),this.contentsInfo.entityType={useCellContentFunction:!1},this.stylesInfo.entityType={useCellStyleFunction:!1},this.columnWidth.entityType="0px",this.columnDefaultVisibility.entityType=!0,this.columnSelectionAvailability.entityType=!0);var l,d=[],p=this.subscription.options.datasources?this.subscription.options.datasources[0]:null;p&&p.dataKeys&&(p.dataKeys.forEach((function(t){var e=Object(s.e)(t);e.entityKey=Object(I.o)(t),e.type===c.h.function&&(e.name=e.label),d.push(e),e.label=i.utils.customTranslation(e.label,e.label),e.title=e.label,e.def="def"+i.columns.length;var n=e.settings;if(e.type===c.h.entityField&&!Object(s.n)(n.columnWidth)||"0px"===n.columnWidth){var a=T.a[e.name];a&&a.time&&(n.columnWidth="120px")}i.stylesInfo[e.def]=Object(C.h)(n,"value, entity, ctx"),i.contentsInfo[e.def]=Object(C.g)(n,"value, entity, ctx"),i.contentsInfo[e.def].units=e.units,i.contentsInfo[e.def].decimals=e.decimals,i.columnWidth[e.def]=Object(C.k)(n),i.columnDefaultVisibility[e.def]=Object(C.i)(n),i.columnSelectionAvailability[e.def]=Object(C.j)(n),i.columns.push(e)})),(t=this.displayedColumns).push.apply(t,this.columns.filter((function(t){return i.columnDefaultVisibility[t.def]})).map((function(t){return t.def})))),this.settings.defaultSortOrder&&this.settings.defaultSortOrder.length&&(this.defaultSortOrder=this.utils.customTranslation(this.settings.defaultSortOrder,this.settings.defaultSortOrder)),this.pageLink.sortOrder=Object(C.b)(this.defaultSortOrder,this.columns),this.pageLink.sortOrder&&(l=Object(C.c)(this.pageLink.sortOrder.key,this.columns)),this.sortOrderProperty=l?l.def:null,this.actionCellDescriptors.length&&this.displayedColumns.push("actions"),this.entityDatasource=new ot(this.translate,d,this.subscription)},n.prototype.editColumnsToDisplay=function(t){var e=this;t&&t.stopPropagation();var n=t.target||t.currentTarget,i=new S.OverlayConfig;i.backdropClass="cdk-overlay-transparent-backdrop",i.hasBackdrop=!0;i.positionStrategy=this.overlay.position().flexibleConnectedTo(n).withPositions([{originX:"end",originY:"bottom",overlayX:"end",overlayY:"top"}]);var r=this.overlay.create(i);r.backdropClick().subscribe((function(){r.dispose()}));var o=this.columns.map((function(t){return{title:t.title,def:t.def,display:e.displayedColumns.indexOf(t.def)>-1,selectable:e.columnSelectionAvailability[t.def]}})),s=[{provide:E.a,useValue:{columns:o,columnsUpdated:function(t){e.displayedColumns=t.filter((function(t){return t.display})).map((function(t){return t.def})),e.actionCellDescriptors.length&&e.displayedColumns.push("actions")}}},{provide:S.OverlayRef,useValue:r}],l=a.Injector.create({parent:this.viewContainerRef.injector,providers:s});r.attach(new w.ComponentPortal(E.b,this.viewContainerRef,l)),this.ctx.detectChanges()},n.prototype.enterFilterMode=function(){var t=this;this.textSearchMode=!0,this.pageLink.textSearch="",this.ctx.hideTitlePanel=!0,this.ctx.detectChanges(!0),setTimeout((function(){t.searchInputField.nativeElement.focus(),t.searchInputField.nativeElement.setSelectionRange(0,0)}),10)},n.prototype.exitFilterMode=function(){this.textSearchMode=!1,this.pageLink.textSearch=null,this.displayPagination&&(this.paginator.pageIndex=0),this.updateData(),this.ctx.hideTitlePanel=!1,this.ctx.detectChanges(!0)},n.prototype.updateData=function(){this.displayPagination?(this.pageLink.page=this.paginator.pageIndex,this.pageLink.pageSize=this.paginator.pageSize):this.pageLink.page=0;var t=Object(C.d)(this.sort.active,this.columns);this.pageLink.sortOrder=t?{key:t,direction:I.c[this.sort.direction.toUpperCase()]}:null;var e=Object(C.e)(this.sort.active,this.columns);this.entityDatasource.loadEntities(this.pageLink,e,null),this.ctx.detectChanges()},n.prototype.trackByColumnDef=function(t,e){return e.def},n.prototype.trackByEntityId=function(t,e){return e.id.id},n.prototype.trackByActionCellDescriptionId=function(t,e){return e.id},n.prototype.headerStyle=function(t){var e=this.columnWidth[t.def];return Object(C.n)(e)},n.prototype.rowStyle=function(t){var e={};if(t)if(this.rowStylesInfo.useRowStyleFunction&&this.rowStylesInfo.rowStyleFunction)try{if(e=this.rowStylesInfo.rowStyleFunction(t,this.ctx),!Object(s.x)(e))throw new TypeError((null===e?"null":typeof e)+" instead of style object");if(Array.isArray(e))throw new TypeError("Array instead of style object")}catch(n){e={},console.warn("Row style function in widget '"+this.ctx.widgetTitle+"' returns '"+n+"'. Please check your row style function.")}else e={};return e},n.prototype.cellStyle=function(t,e){var n={};if(t&&e){var a=this.stylesInfo[e.def],r=Object(C.l)(t,e);if(a.useCellStyleFunction&&a.cellStyleFunction)try{if(n=a.cellStyleFunction(r,t,this.ctx),!Object(s.x)(n))throw new TypeError((null===n?"null":typeof n)+" instead of style object");if(Array.isArray(n))throw new TypeError("Array instead of style object")}catch(l){n={},console.warn("Cell style function for data key '"+e.label+"' in widget '"+this.ctx.widgetTitle+"' returns '"+l+"'. Please check your cell style function.")}else n={}}if(!n.width){var o=this.columnWidth[e.def];n=Object(i.a)(Object(i.a)({},n),Object(C.n)(o))}return n},n.prototype.cellContent=function(t,e){if(!t||!e)return"";var n=this.contentsInfo[e.def],i=Object(C.l)(t,e),a=void 0;if(n.useCellContentFunction&&n.cellContentFunction)try{a=n.cellContentFunction(i,t,this.ctx)}catch(r){a=""+i}else a=this.defaultContent(e,n,i);if(!Object(s.n)(a))return"";switch(typeof(a=this.utils.customTranslation(a,a))){case"string":return this.domSanitizer.bypassSecurityTrustHtml(a);default:return a}},n.prototype.defaultContent=function(t,e,n){if(Object(s.n)(n)){var i=T.a[t.name];if(i&&i.time)return this.datePipe.transform(n,"yyyy-MM-dd HH:mm:ss");var a=e.decimals||0===e.decimals?e.decimals:this.ctx.widgetConfig.decimals,r=e.units||this.ctx.widgetConfig.units;return this.ctx.utils.formatValue(n,a,r,!0)}return""},n.prototype.onRowClick=function(t,e,n){t&&t.stopPropagation(),this.entityDatasource.toggleCurrentEntity(e);var i=n?"rowDoubleClick":"rowClick",a=this.ctx.actionsApi.getActionDescriptors(i);if(a.length){var r=void 0,o=void 0,s=void 0;e&&(r=e.id,o=e.entityName,s=e.entityLabel),this.ctx.actionsApi.handleWidgetAction(t,a[0],r,o,null,s)}},n.prototype.onActionButtonClick=function(t,e,n){var i,a,r;t&&t.stopPropagation(),e&&(i=e.id,a=e.entityName,r=e.entityLabel),this.ctx.actionsApi.handleWidgetAction(t,n,i,a,null,r)},n.\u0275fac=function(t){return new(t||n)(a["\u0275\u0275directiveInject"](M.Store),a["\u0275\u0275directiveInject"](a.ElementRef),a["\u0275\u0275directiveInject"](a.NgZone),a["\u0275\u0275directiveInject"](S.Overlay),a["\u0275\u0275directiveInject"](a.ViewContainerRef),a["\u0275\u0275directiveInject"](o.a),a["\u0275\u0275directiveInject"](F.DatePipe),a["\u0275\u0275directiveInject"](P.TranslateService),a["\u0275\u0275directiveInject"](D.DomSanitizer))},n.\u0275cmp=a["\u0275\u0275defineComponent"]({type:n,selectors:[["tb-entities-table-widget"]],viewQuery:function(t,e){var n;(1&t&&(a["\u0275\u0275viewQuery"](W,!0),a["\u0275\u0275viewQuery"](v.MatPaginator,!0),a["\u0275\u0275viewQuery"](x.MatSort,!0)),2&t)&&(a["\u0275\u0275queryRefresh"](n=a["\u0275\u0275loadQuery"]())&&(e.searchInputField=n.first),a["\u0275\u0275queryRefresh"](n=a["\u0275\u0275loadQuery"]())&&(e.paginator=n.first),a["\u0275\u0275queryRefresh"](n=a["\u0275\u0275loadQuery"]())&&(e.sort=n.first))},inputs:{ctx:"ctx"},features:[a["\u0275\u0275InheritDefinitionFeature"]],decls:34,vars:30,consts:[[1,"tb-table-widget","tb-absolute-fill"],["fxFlex","","fxLayout","column",1,"tb-absolute-fill"],[1,"mat-table-toolbar",3,"fxShow"],[1,"mat-toolbar-tools"],["mat-button","","mat-icon-button","","matTooltipPosition","above",3,"matTooltip"],["fxFlex",""],["matInput","",3,"ngModel","placeholder","ngModelChange"],["searchInput",""],["mat-button","","mat-icon-button","","matTooltipPosition","above",3,"matTooltip","click"],["fxFlex","",1,"table-container"],["mat-table","","matSort","","matSortDisableClear","",3,"dataSource","trackBy","matSortActive","matSortDirection"],[3,"matColumnDef",4,"ngFor","ngForOf","ngForTrackBy"],["matColumnDef","actions",3,"stickyEnd"],[3,"ngStyle.gt-md",4,"matHeaderCellDef"],[3,"ngStyle.gt-md",4,"matCellDef"],[4,"matHeaderRowDef","matHeaderRowDefSticky"],[3,"ngClass","ngStyle","click","dblclick",4,"matRowDef","matRowDefColumns"],["fxLayoutAlign","center center","translate","",1,"no-data-found",3,"fxShow"],["fxLayoutAlign","center center",1,"no-data-found",3,"fxShow"],[4,"ngIf"],["showFirstLastButtons","",3,"length","pageIndex","pageSize","pageSizeOptions",4,"ngIf"],[3,"matColumnDef"],["mat-sort-header","",3,"ngStyle",4,"matHeaderCellDef"],[3,"innerHTML","ngStyle",4,"matCellDef"],["mat-sort-header","",3,"ngStyle"],[3,"innerHTML","ngStyle"],[3,"ngStyle.gt-md"],["fxHide","","fxShow.gt-md","","fxFlex","","fxLayout","row","fxLayoutAlign","end"],["mat-button","","mat-icon-button","","matTooltipPosition","above",3,"disabled","matTooltip","click",4,"ngFor","ngForOf","ngForTrackBy"],["fxHide","","fxShow.lt-lg","",4,"ngIf"],["mat-button","","mat-icon-button","","matTooltipPosition","above",3,"disabled","matTooltip","click"],["fxHide","","fxShow.lt-lg",""],["mat-button","","mat-icon-button","",3,"matMenuTriggerFor","click"],[1,"material-icons"],["xPosition","before"],["cellActionsMenu","matMenu"],["mat-menu-item","",3,"disabled","click",4,"ngFor","ngForOf","ngForTrackBy"],["mat-menu-item","",3,"disabled","click"],[3,"ngClass","ngStyle","click","dblclick"],["showFirstLastButtons","",3,"length","pageIndex","pageSize","pageSizeOptions"]],template:function(t,e){1&t&&(a["\u0275\u0275elementStart"](0,"div",0),a["\u0275\u0275elementStart"](1,"div",1),a["\u0275\u0275elementStart"](2,"mat-toolbar",2),a["\u0275\u0275elementStart"](3,"div",3),a["\u0275\u0275elementStart"](4,"button",4),a["\u0275\u0275pipe"](5,"translate"),a["\u0275\u0275elementStart"](6,"mat-icon"),a["\u0275\u0275text"](7,"search"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](8,"mat-form-field",5),a["\u0275\u0275elementStart"](9,"mat-label"),a["\u0275\u0275text"](10,"\xa0"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](11,"input",6,7),a["\u0275\u0275listener"]("ngModelChange",(function(t){return e.pageLink.textSearch=t})),a["\u0275\u0275pipe"](13,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](14,"button",8),a["\u0275\u0275listener"]("click",(function(){return e.exitFilterMode()})),a["\u0275\u0275pipe"](15,"translate"),a["\u0275\u0275elementStart"](16,"mat-icon"),a["\u0275\u0275text"](17,"close"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](18,"div",9),a["\u0275\u0275elementStart"](19,"table",10),a["\u0275\u0275template"](20,H,3,1,"ng-container",11),a["\u0275\u0275elementContainerStart"](21,12),a["\u0275\u0275template"](22,Q,1,5,"mat-header-cell",13),a["\u0275\u0275template"](23,Z,4,8,"mat-cell",14),a["\u0275\u0275elementContainerEnd"](),a["\u0275\u0275template"](24,tt,1,0,"mat-header-row",15),a["\u0275\u0275template"](25,nt,1,5,"mat-row",16),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](26,"span",17),a["\u0275\u0275pipe"](27,"async"),a["\u0275\u0275text"](28,"entity.no-entities-prompt"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](29,"span",18),a["\u0275\u0275text"](30),a["\u0275\u0275pipe"](31,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275template"](32,it,1,0,"mat-divider",19),a["\u0275\u0275template"](33,at,2,6,"mat-paginator",20),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()),2&t&&(a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("fxShow",e.textSearchMode),a["\u0275\u0275advance"](2),a["\u0275\u0275propertyInterpolate"]("matTooltip",a["\u0275\u0275pipeBind1"](5,20,"action.search")),a["\u0275\u0275advance"](7),a["\u0275\u0275propertyInterpolate"]("placeholder",a["\u0275\u0275pipeBind1"](13,22,"entity.search")),a["\u0275\u0275property"]("ngModel",e.pageLink.textSearch),a["\u0275\u0275advance"](3),a["\u0275\u0275propertyInterpolate"]("matTooltip",a["\u0275\u0275pipeBind1"](15,24,"action.close")),a["\u0275\u0275advance"](5),a["\u0275\u0275property"]("dataSource",e.entityDatasource)("trackBy",e.trackByEntityId)("matSortActive",e.sortOrderProperty)("matSortDirection",e.pageLinkSortDirection()),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngForOf",e.columns)("ngForTrackBy",e.trackByColumnDef),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("stickyEnd",e.enableStickyAction),a["\u0275\u0275advance"](3),a["\u0275\u0275property"]("matHeaderRowDef",e.displayedColumns)("matHeaderRowDefSticky",e.enableStickyHeader),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("matRowDefColumns",e.displayedColumns),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("fxShow",a["\u0275\u0275pipeBind1"](27,26,e.entityDatasource.isEmpty())&&!e.entityDatasource.dataLoading),a["\u0275\u0275advance"](3),a["\u0275\u0275property"]("fxShow",e.entityDatasource.dataLoading),a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate"](a["\u0275\u0275pipeBind1"](31,28,"common.loading")),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("ngIf",e.displayPagination),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",e.displayPagination))},directives:[k.b,k.f,j.MatToolbar,A.d,_.MatButton,L.MatTooltip,V.MatIcon,R.MatFormField,R.MatLabel,N.MatInput,G.DefaultValueAccessor,G.NgControlStatus,G.NgModel,B.MatTable,x.MatSort,F.NgForOf,B.MatColumnDef,B.MatHeaderCellDef,B.MatCellDef,B.MatHeaderRowDef,B.MatRowDef,k.e,P.TranslateDirective,F.NgIf,B.MatHeaderCell,x.MatSortHeader,F.NgStyle,A.e,B.MatCell,U.MatMenuTrigger,U._MatMenu,U.MatMenuItem,B.MatHeaderRow,B.MatRow,F.NgClass,A.b,q.MatDivider,v.MatPaginator],pipes:[P.TranslatePipe,F.AsyncPipe],styles:["[_nghost-%COMP%]{width:100%;height:100%}[_nghost-%COMP%]   .tb-table-widget[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]{position:relative}[_nghost-%COMP%]   .tb-table-widget[_ngcontent-%COMP%]   .mat-table[_ngcontent-%COMP%]   .mat-row.invisible[_ngcontent-%COMP%]{visibility:hidden}[_nghost-%COMP%]   .tb-table-widget[_ngcontent-%COMP%]   span.no-data-found[_ngcontent-%COMP%]{position:absolute;top:60px;bottom:0;left:0;right:0}","[_nghost-%COMP%]   .tb-table-widget[_ngcontent-%COMP%]   .mat-paginator[_ngcontent-%COMP%], [_nghost-%COMP%]   .tb-table-widget[_ngcontent-%COMP%]   .mat-table[_ngcontent-%COMP%], [_nghost-%COMP%]   .tb-table-widget[_ngcontent-%COMP%]   mat-toolbar.mat-table-toolbar[_ngcontent-%COMP%]:not([color=primary]){background:transparent}[_nghost-%COMP%]   .tb-table-widget[_ngcontent-%COMP%]   mat-toolbar[_ngcontent-%COMP%], [_nghost-%COMP%]   .tb-table-widget[_ngcontent-%COMP%]   mat-toolbar[_ngcontent-%COMP%]   .mat-toolbar-tools[_ngcontent-%COMP%]{height:39px;max-height:39px}[_nghost-%COMP%]   .tb-table-widget[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]{overflow:auto}[_nghost-%COMP%]   .tb-table-widget[_ngcontent-%COMP%]   .mat-header-row.mat-row-select[_ngcontent-%COMP%]   mat-cell[_ngcontent-%COMP%]:nth-child(2), [_nghost-%COMP%]   .tb-table-widget[_ngcontent-%COMP%]   .mat-header-row.mat-row-select[_ngcontent-%COMP%]   mat-cell[_ngcontent-%COMP%]:nth-child(n+3):nth-last-child(n+2), [_nghost-%COMP%]   .tb-table-widget[_ngcontent-%COMP%]   .mat-header-row.mat-row-select[_ngcontent-%COMP%]   mat-footer-cell[_ngcontent-%COMP%]:nth-child(2), [_nghost-%COMP%]   .tb-table-widget[_ngcontent-%COMP%]   .mat-header-row.mat-row-select[_ngcontent-%COMP%]   mat-footer-cell[_ngcontent-%COMP%]:nth-child(n+3):nth-last-child(n+2), [_nghost-%COMP%]   .tb-table-widget[_ngcontent-%COMP%]   .mat-header-row.mat-row-select[_ngcontent-%COMP%]   mat-header-cell[_ngcontent-%COMP%]:nth-child(2), [_nghost-%COMP%]   .tb-table-widget[_ngcontent-%COMP%]   .mat-header-row.mat-row-select[_ngcontent-%COMP%]   mat-header-cell[_ngcontent-%COMP%]:nth-child(n+3):nth-last-child(n+2), [_nghost-%COMP%]   .tb-table-widget[_ngcontent-%COMP%]   .mat-header-row[_ngcontent-%COMP%]:not(.mat-row-select)   mat-cell[_ngcontent-%COMP%]:nth-child(n+2):nth-last-child(n+2), [_nghost-%COMP%]   .tb-table-widget[_ngcontent-%COMP%]   .mat-header-row[_ngcontent-%COMP%]:not(.mat-row-select)   mat-footer-cell[_ngcontent-%COMP%]:nth-child(n+2):nth-last-child(n+2), [_nghost-%COMP%]   .tb-table-widget[_ngcontent-%COMP%]   .mat-header-row[_ngcontent-%COMP%]:not(.mat-row-select)   mat-header-cell[_ngcontent-%COMP%]:nth-child(n+2):nth-last-child(n+2), [_nghost-%COMP%]   .tb-table-widget[_ngcontent-%COMP%]   .mat-row.mat-row-select[_ngcontent-%COMP%]   mat-cell[_ngcontent-%COMP%]:nth-child(2), [_nghost-%COMP%]   .tb-table-widget[_ngcontent-%COMP%]   .mat-row.mat-row-select[_ngcontent-%COMP%]   mat-cell[_ngcontent-%COMP%]:nth-child(n+3):nth-last-child(n+2), [_nghost-%COMP%]   .tb-table-widget[_ngcontent-%COMP%]   .mat-row.mat-row-select[_ngcontent-%COMP%]   mat-footer-cell[_ngcontent-%COMP%]:nth-child(2), [_nghost-%COMP%]   .tb-table-widget[_ngcontent-%COMP%]   .mat-row.mat-row-select[_ngcontent-%COMP%]   mat-footer-cell[_ngcontent-%COMP%]:nth-child(n+3):nth-last-child(n+2), [_nghost-%COMP%]   .tb-table-widget[_ngcontent-%COMP%]   .mat-row.mat-row-select[_ngcontent-%COMP%]   mat-header-cell[_ngcontent-%COMP%]:nth-child(2), [_nghost-%COMP%]   .tb-table-widget[_ngcontent-%COMP%]   .mat-row.mat-row-select[_ngcontent-%COMP%]   mat-header-cell[_ngcontent-%COMP%]:nth-child(n+3):nth-last-child(n+2), [_nghost-%COMP%]   .tb-table-widget[_ngcontent-%COMP%]   .mat-row[_ngcontent-%COMP%]:not(.mat-row-select)   mat-cell[_ngcontent-%COMP%]:nth-child(n+2):nth-last-child(n+2), [_nghost-%COMP%]   .tb-table-widget[_ngcontent-%COMP%]   .mat-row[_ngcontent-%COMP%]:not(.mat-row-select)   mat-footer-cell[_ngcontent-%COMP%]:nth-child(n+2):nth-last-child(n+2), [_nghost-%COMP%]   .tb-table-widget[_ngcontent-%COMP%]   .mat-row[_ngcontent-%COMP%]:not(.mat-row-select)   mat-header-cell[_ngcontent-%COMP%]:nth-child(n+2):nth-last-child(n+2){padding:0 5px}.tb-has-timewindow[_nghost-%COMP%]   .tb-table-widget[_ngcontent-%COMP%]   mat-toolbar[_ngcontent-%COMP%], .tb-has-timewindow   [_nghost-%COMP%]   .tb-table-widget[_ngcontent-%COMP%]   mat-toolbar[_ngcontent-%COMP%], .tb-has-timewindow[_nghost-%COMP%]   .tb-table-widget[_ngcontent-%COMP%]   mat-toolbar[_ngcontent-%COMP%]   .mat-toolbar-tools[_ngcontent-%COMP%], .tb-has-timewindow   [_nghost-%COMP%]   .tb-table-widget[_ngcontent-%COMP%]   mat-toolbar[_ngcontent-%COMP%]   .mat-toolbar-tools[_ngcontent-%COMP%]{height:65px;max-height:65px}"]}),n}(r.a);!function(){a["\u0275setClassMetadata"](rt,[{type:a.Component,args:[{selector:"tb-entities-table-widget",templateUrl:"./entities-table-widget.component.html",styleUrls:["./entities-table-widget.component.scss","./table-widget.scss"]}]}],(function(){return[{type:M.Store},{type:a.ElementRef},{type:a.NgZone},{type:S.Overlay},{type:a.ViewContainerRef},{type:o.a},{type:F.DatePipe},{type:P.TranslateService},{type:D.DomSanitizer}]}),{ctx:[{type:a.Input}],searchInputField:[{type:a.ViewChild,args:["searchInput"]}],paginator:[{type:a.ViewChild,args:[v.MatPaginator]}],sort:[{type:a.ViewChild,args:[x.MatSort]}]})}();var ot=function(){function t(t,e,n){this.translate=t,this.dataKeys=e,this.subscription=n,this.entitiesSubject=new u.a([]),this.pageDataSubject=new u.a(Object(m.a)()),this.currentEntity=null,this.dataLoading=!0}return t.prototype.connect=function(t){return this.entitiesSubject.asObservable()},t.prototype.disconnect=function(t){this.entitiesSubject.complete(),this.pageDataSubject.complete()},t.prototype.loadEntities=function(t,e,n){this.dataLoading=!0,this.appliedPageLink=t,this.appliedSortOrderLabel=e,this.subscription.subscribeForPaginatedData(0,t,n)},t.prototype.clear=function(){this.entitiesSubject.next([]),this.pageDataSubject.next(Object(m.a)())},t.prototype.dataUpdated=function(){var t=this,e=this.subscription.datasourcePages[0],n=this.subscription.dataPages[0],i=new Array;if(e.data.forEach((function(e,a){i.push(t.datasourceToEntityData(e,n.data[a]))})),this.appliedSortOrderLabel&&this.appliedSortOrderLabel.length){var a=this.appliedPageLink.sortOrder.direction===I.c.ASC;i=i.sort((function(e,n){return Object(O.e)(e,n,t.appliedSortOrderLabel,a)}))}var r={data:i,totalPages:e.totalPages,totalElements:e.totalElements,hasNext:e.hasNext};this.entitiesSubject.next(i),this.pageDataSubject.next(r),this.dataLoading=!1},t.prototype.datasourceToEntityData=function(t,e){var n={id:{},entityName:t.entityName,entityLabel:t.entityLabel?t.entityLabel:t.entityName};return t.entityId&&(n.id.id=t.entityId),t.entityType?(n.id.entityType=t.entityType,n.entityType=this.translate.instant(f.d.get(t.entityType).type)):n.entityType="",this.dataKeys.forEach((function(t,i){var a=e[i].data;a&&a.length&&a[0].length>1?e[i].dataKey.type===c.h.entityField&&n.hasOwnProperty(t.label)||(n[t.label]=a[0][1]):n[t.label]=""})),n},t.prototype.isEmpty=function(){return this.entitiesSubject.pipe(Object(b.a)((function(t){return!t.length})))},t.prototype.total=function(){return this.pageDataSubject.pipe(Object(b.a)((function(t){return t.totalElements})))},t.prototype.toggleCurrentEntity=function(t){return this.currentEntity!==t&&(this.currentEntity=t,!0)},t.prototype.isCurrentEntity=function(t){return this.currentEntity&&t&&this.currentEntity.id&&t.id&&this.currentEntity.id.id===t.id.id},t}()}).call(this,n("xexB"))},C6Vs:function(t,e,n){"use strict";n.d(e,"a",(function(){return w}));var i=n("mrSG"),a=n("fXoL"),r=n("FKr1"),o=n("0IaG"),s=n("3Pt+"),l=n("gmuX"),c=n("4j5O"),d=n("l7P3"),p=n("tyNb"),u=n("/t3+"),m=n("sYmb"),f=n("XiUz"),h=n("bTqV"),g=n("NFeN"),y=n("ofXK"),b=n("kmnG"),v=n("d3UM"),x=n("bv9b");function C(t,e){1&t&&a["\u0275\u0275element"](0,"mat-progress-bar",15)}function S(t,e){if(1&t&&(a["\u0275\u0275elementStart"](0,"mat-option",16),a["\u0275\u0275text"](1),a["\u0275\u0275elementEnd"]()),2&t){var n=e.$implicit;a["\u0275\u0275property"]("value",n.key),a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"](" ",n.value.name," ")}}var w=function(t){function e(e,n,i,a,r,o,l){var c=t.call(this,e,n,r)||this;return c.store=e,c.router=n,c.data=i,c.errorStateMatcher=a,c.dialogRef=r,c.fb=o,c.dashboardUtils=l,c.submitted=!1,c.states=c.data.states,c.stateFormGroup=c.fb.group({stateId:[c.dashboardUtils.getRootStateId(c.states),[s.Validators.required]]}),c}return Object(i.d)(e,t),e.prototype.ngOnInit=function(){},e.prototype.isErrorState=function(t,e){var n=this.errorStateMatcher.isErrorState(t,e),i=!!(t&&t.invalid&&this.submitted);return n||i},e.prototype.cancel=function(){this.dialogRef.close(null)},e.prototype.save=function(){this.submitted=!0;var t=this.stateFormGroup.get("stateId").value;this.dialogRef.close(t)},e.\u0275fac=function(t){return new(t||e)(a["\u0275\u0275directiveInject"](d.Store),a["\u0275\u0275directiveInject"](p.Router),a["\u0275\u0275directiveInject"](o.MAT_DIALOG_DATA),a["\u0275\u0275directiveInject"](r.ErrorStateMatcher,4),a["\u0275\u0275directiveInject"](o.MatDialogRef),a["\u0275\u0275directiveInject"](s.FormBuilder),a["\u0275\u0275directiveInject"](c.a))},e.\u0275cmp=a["\u0275\u0275defineComponent"]({type:e,selectors:[["tb-select-target-state-dialog"]],features:[a["\u0275\u0275ProvidersFeature"]([{provide:r.ErrorStateMatcher,useExisting:e}]),a["\u0275\u0275InheritDefinitionFeature"]],decls:28,vars:22,consts:[[3,"formGroup","ngSubmit"],["color","primary"],["translate",""],["fxFlex",""],["mat-icon-button","","type","button",3,"click"],[1,"material-icons"],["color","warn","mode","indeterminate",4,"ngIf"],["mat-dialog-content",""],["fxLayout","column",3,"disabled"],[1,"mat-block"],["required","","formControlName","stateId"],[3,"value",4,"ngFor","ngForOf"],["mat-dialog-actions","","fxLayoutAlign","end center"],["mat-button","","color","primary","type","button","cdkFocusInitial","",3,"disabled","click"],["mat-raised-button","","color","primary","type","submit",3,"disabled"],["color","warn","mode","indeterminate"],[3,"value"]],template:function(t,e){1&t&&(a["\u0275\u0275elementStart"](0,"form",0),a["\u0275\u0275listener"]("ngSubmit",(function(){return e.save()})),a["\u0275\u0275elementStart"](1,"mat-toolbar",1),a["\u0275\u0275elementStart"](2,"h2",2),a["\u0275\u0275text"](3,"dashboard.select-state"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](4,"span",3),a["\u0275\u0275elementStart"](5,"button",4),a["\u0275\u0275listener"]("click",(function(){return e.cancel()})),a["\u0275\u0275elementStart"](6,"mat-icon",5),a["\u0275\u0275text"](7,"close"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275template"](8,C,1,0,"mat-progress-bar",6),a["\u0275\u0275pipe"](9,"async"),a["\u0275\u0275elementStart"](10,"div",7),a["\u0275\u0275elementStart"](11,"fieldset",8),a["\u0275\u0275pipe"](12,"async"),a["\u0275\u0275elementStart"](13,"mat-form-field",9),a["\u0275\u0275elementStart"](14,"mat-label",2),a["\u0275\u0275text"](15,"dashboard.state"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](16,"mat-select",10),a["\u0275\u0275template"](17,S,2,2,"mat-option",11),a["\u0275\u0275pipe"](18,"keyvalue"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](19,"div",12),a["\u0275\u0275elementStart"](20,"button",13),a["\u0275\u0275listener"]("click",(function(){return e.cancel()})),a["\u0275\u0275pipe"](21,"async"),a["\u0275\u0275text"](22),a["\u0275\u0275pipe"](23,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](24,"button",14),a["\u0275\u0275pipe"](25,"async"),a["\u0275\u0275text"](26),a["\u0275\u0275pipe"](27,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()),2&t&&(a["\u0275\u0275property"]("formGroup",e.stateFormGroup),a["\u0275\u0275advance"](8),a["\u0275\u0275property"]("ngIf",a["\u0275\u0275pipeBind1"](9,8,e.isLoading$)),a["\u0275\u0275advance"](3),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](12,10,e.isLoading$)),a["\u0275\u0275advance"](6),a["\u0275\u0275property"]("ngForOf",a["\u0275\u0275pipeBind1"](18,12,e.states)),a["\u0275\u0275advance"](3),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](21,14,e.isLoading$)),a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](23,16,"action.cancel")," "),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](25,18,e.isLoading$)||e.stateFormGroup.invalid),a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](27,20,"action.select")," "))},directives:[s["\u0275angular_packages_forms_forms_y"],s.NgControlStatusGroup,s.FormGroupDirective,u.MatToolbar,m.TranslateDirective,f.b,h.MatButton,g.MatIcon,y.NgIf,o.MatDialogContent,f.f,b.MatFormField,b.MatLabel,v.MatSelect,s.RequiredValidator,s.NgControlStatus,s.FormControlName,y.NgForOf,o.MatDialogActions,f.e,x.MatProgressBar,r.MatOption],pipes:[y.AsyncPipe,y.KeyValuePipe,m.TranslatePipe],encapsulation:2}),e}(l.a);!function(){a["\u0275setClassMetadata"](w,[{type:a.Component,args:[{selector:"tb-select-target-state-dialog",templateUrl:"./select-target-state-dialog.component.html",providers:[{provide:r.ErrorStateMatcher,useExisting:w}],styleUrls:[]}]}],(function(){return[{type:d.Store},{type:p.Router},{type:void 0,decorators:[{type:a.Inject,args:[o.MAT_DIALOG_DATA]}]},{type:r.ErrorStateMatcher,decorators:[{type:a.SkipSelf}]},{type:o.MatDialogRef},{type:s.FormBuilder},{type:c.a}]}),null)}()},CRwc:function(t,e,n){"use strict";n.d(e,"a",(function(){return A}));var i=n("fXoL"),a=n("0lYY"),r=n("ofXK"),o=n("znSr"),s=n("sYmb");function l(t,e){1&t&&(i["\u0275\u0275elementStart"](0,"th"),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&t&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](2,1,"legend.min")))}function c(t,e){1&t&&(i["\u0275\u0275elementStart"](0,"th"),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&t&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](2,1,"legend.max")))}function d(t,e){1&t&&(i["\u0275\u0275elementStart"](0,"th"),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&t&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](2,1,"legend.avg")))}function p(t,e){1&t&&(i["\u0275\u0275elementStart"](0,"th"),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&t&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](2,1,"legend.total")))}function u(t,e){if(1&t&&(i["\u0275\u0275elementStart"](0,"tr",5),i["\u0275\u0275element"](1,"th",6),i["\u0275\u0275template"](2,l,3,3,"th",2),i["\u0275\u0275template"](3,c,3,3,"th",2),i["\u0275\u0275template"](4,d,3,3,"th",2),i["\u0275\u0275template"](5,p,3,3,"th",2),i["\u0275\u0275elementEnd"]()),2&t){var n=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngIf",!0===n.legendConfig.showMin),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",!0===n.legendConfig.showMax),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",!0===n.legendConfig.showAvg),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",!0===n.legendConfig.showTotal)}}function m(t,e){if(1&t&&(i["\u0275\u0275elementStart"](0,"td",12),i["\u0275\u0275text"](1),i["\u0275\u0275elementEnd"]()),2&t){var n=i["\u0275\u0275nextContext"]().$implicit,a=i["\u0275\u0275nextContext"](2);i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate"](a.legendData.data[n.dataIndex].min)}}function f(t,e){if(1&t&&(i["\u0275\u0275elementStart"](0,"td",12),i["\u0275\u0275text"](1),i["\u0275\u0275elementEnd"]()),2&t){var n=i["\u0275\u0275nextContext"]().$implicit,a=i["\u0275\u0275nextContext"](2);i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate"](a.legendData.data[n.dataIndex].max)}}function h(t,e){if(1&t&&(i["\u0275\u0275elementStart"](0,"td",12),i["\u0275\u0275text"](1),i["\u0275\u0275elementEnd"]()),2&t){var n=i["\u0275\u0275nextContext"]().$implicit,a=i["\u0275\u0275nextContext"](2);i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate"](a.legendData.data[n.dataIndex].avg)}}function g(t,e){if(1&t&&(i["\u0275\u0275elementStart"](0,"td",12),i["\u0275\u0275text"](1),i["\u0275\u0275elementEnd"]()),2&t){var n=i["\u0275\u0275nextContext"]().$implicit,a=i["\u0275\u0275nextContext"](2);i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate"](a.legendData.data[n.dataIndex].total)}}var y=function(t){return{backgroundColor:t}},b=function(t,e){return{"tb-hidden-label":t,"tb-horizontal":e}};function v(t,e){if(1&t){var n=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"tr",8),i["\u0275\u0275elementStart"](1,"td"),i["\u0275\u0275element"](2,"span",9),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](3,"td",10),i["\u0275\u0275listener"]("click",(function(){i["\u0275\u0275restoreView"](n);var t=e.$implicit;return i["\u0275\u0275nextContext"](2).toggleHideData(t.dataIndex)})),i["\u0275\u0275text"](4),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](5,m,2,1,"td",11),i["\u0275\u0275template"](6,f,2,1,"td",11),i["\u0275\u0275template"](7,h,2,1,"td",11),i["\u0275\u0275template"](8,g,2,1,"td",11),i["\u0275\u0275elementEnd"]()}if(2&t){var a=e.$implicit,r=i["\u0275\u0275nextContext"](2);i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngStyle",i["\u0275\u0275pureFunction1"](7,y,a.dataKey.color)),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngClass",i["\u0275\u0275pureFunction2"](9,b,a.dataKey.hidden,r.isHorizontal)),i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",a.dataKey.label," "),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",!0===r.legendConfig.showMin),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",!0===r.legendConfig.showMax),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",!0===r.legendConfig.showAvg),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",!0===r.legendConfig.showTotal)}}function x(t,e){if(1&t&&(i["\u0275\u0275elementContainerStart"](0),i["\u0275\u0275template"](1,v,9,12,"tr",7),i["\u0275\u0275elementContainerEnd"]()),2&t){var n=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngForOf",n.legendKeys())}}var C=function(t){return{"tb-hidden-label":t}};function S(t,e){if(1&t){var n=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"td"),i["\u0275\u0275element"](1,"span",9),i["\u0275\u0275elementStart"](2,"span",10),i["\u0275\u0275listener"]("click",(function(){i["\u0275\u0275restoreView"](n);var t=e.$implicit;return i["\u0275\u0275nextContext"](2).toggleHideData(t.dataIndex)})),i["\u0275\u0275text"](3),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()}if(2&t){var a=e.$implicit;i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngStyle",i["\u0275\u0275pureFunction1"](3,y,a.dataKey.color)),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngClass",i["\u0275\u0275pureFunction1"](5,C,a.dataKey.hidden)),i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",a.dataKey.label," ")}}var w=function(t){return{"tb-row-direction":t}};function E(t,e){if(1&t&&(i["\u0275\u0275elementStart"](0,"tr",13),i["\u0275\u0275element"](1,"td"),i["\u0275\u0275template"](2,S,4,7,"td",14),i["\u0275\u0275elementEnd"]()),2&t){var n=i["\u0275\u0275nextContext"]();i["\u0275\u0275property"]("ngClass",i["\u0275\u0275pureFunction1"](2,w,!n.displayHeader)),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngForOf",n.legendKeys())}}function I(t,e){if(1&t&&(i["\u0275\u0275elementStart"](0,"td",12),i["\u0275\u0275text"](1),i["\u0275\u0275elementEnd"]()),2&t){var n=e.$implicit,a=i["\u0275\u0275nextContext"](2);i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",a.legendData.data[n.dataIndex].min," ")}}function O(t,e){if(1&t&&(i["\u0275\u0275elementStart"](0,"tr",8),i["\u0275\u0275elementStart"](1,"td",15),i["\u0275\u0275text"](2),i["\u0275\u0275pipe"](3,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](4,I,2,1,"td",16),i["\u0275\u0275elementEnd"]()),2&t){var n=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](2),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](3,2,"legend.min")),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngForOf",n.legendKeys())}}function T(t,e){if(1&t&&(i["\u0275\u0275elementStart"](0,"td",12),i["\u0275\u0275text"](1),i["\u0275\u0275elementEnd"]()),2&t){var n=e.$implicit,a=i["\u0275\u0275nextContext"](2);i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",a.legendData.data[n.dataIndex].max," ")}}function M(t,e){if(1&t&&(i["\u0275\u0275elementStart"](0,"tr",8),i["\u0275\u0275elementStart"](1,"td",15),i["\u0275\u0275text"](2),i["\u0275\u0275pipe"](3,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](4,T,2,1,"td",16),i["\u0275\u0275elementEnd"]()),2&t){var n=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](2),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](3,2,"legend.max")),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngForOf",n.legendKeys())}}function F(t,e){if(1&t&&(i["\u0275\u0275elementStart"](0,"td",12),i["\u0275\u0275text"](1),i["\u0275\u0275elementEnd"]()),2&t){var n=e.$implicit,a=i["\u0275\u0275nextContext"](2);i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",a.legendData.data[n.dataIndex].avg," ")}}function P(t,e){if(1&t&&(i["\u0275\u0275elementStart"](0,"tr",8),i["\u0275\u0275elementStart"](1,"td",15),i["\u0275\u0275text"](2),i["\u0275\u0275pipe"](3,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](4,F,2,1,"td",16),i["\u0275\u0275elementEnd"]()),2&t){var n=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](2),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](3,2,"legend.avg")),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngForOf",n.legendKeys())}}function D(t,e){if(1&t&&(i["\u0275\u0275elementStart"](0,"td",12),i["\u0275\u0275text"](1),i["\u0275\u0275elementEnd"]()),2&t){var n=e.$implicit,a=i["\u0275\u0275nextContext"](2);i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",a.legendData.data[n.dataIndex].total," ")}}function k(t,e){if(1&t&&(i["\u0275\u0275elementStart"](0,"tr",8),i["\u0275\u0275elementStart"](1,"td",15),i["\u0275\u0275text"](2),i["\u0275\u0275pipe"](3,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](4,D,2,1,"td",16),i["\u0275\u0275elementEnd"]()),2&t){var n=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](2),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](3,2,"legend.total")),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngForOf",n.legendKeys())}}var j=function(t){return{marginRight:t}},A=function(){function t(){this.legendKeyHiddenChange=new i.EventEmitter}return t.prototype.ngOnInit=function(){this.displayHeader=!0===this.legendConfig.showMin||!0===this.legendConfig.showMax||!0===this.legendConfig.showAvg||!0===this.legendConfig.showTotal,this.isHorizontal=this.legendConfig.position===a.c.bottom||this.legendConfig.position===a.c.top,this.isRowDirection=this.legendConfig.direction===a.b.row},t.prototype.toggleHideData=function(t){var e=this.legendData.keys.find((function(e){return e.dataIndex===t})).dataKey;e.settings.disableDataHiding||(e.hidden=!e.hidden,this.legendKeyHiddenChange.emit(t))},t.prototype.legendKeys=function(){var t=this,e=this.legendData.keys;return this.legendConfig.sortDataKeys&&(e=this.legendData.keys.sort((function(t,e){return t.dataKey.label.localeCompare(e.dataKey.label)}))),e.filter((function(e){return t.legendData.keys[e.dataIndex].dataKey.inLegend}))},t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=i["\u0275\u0275defineComponent"]({type:t,selectors:[["tb-legend"]],inputs:{legendConfig:"legendConfig",legendData:"legendData"},outputs:{legendKeyHiddenChange:"legendKeyHiddenChange"},decls:10,vars:11,consts:[[1,"tb-legend",3,"ngClass","ngStyle"],["class","tb-legend-header",4,"ngIf"],[4,"ngIf"],["class","tb-legend-keys",3,"ngClass",4,"ngIf"],["class","tb-legend-keys",4,"ngIf"],[1,"tb-legend-header"],["colspan","2"],["class","tb-legend-keys",4,"ngFor","ngForOf"],[1,"tb-legend-keys"],[1,"tb-legend-line",3,"ngStyle"],[1,"tb-legend-label",3,"ngClass","click"],["class","tb-legend-value",4,"ngIf"],[1,"tb-legend-value"],[1,"tb-legend-keys",3,"ngClass"],[4,"ngFor","ngForOf"],[1,"tb-legend-type"],["class","tb-legend-value",4,"ngFor","ngForOf"]],template:function(t,e){1&t&&(i["\u0275\u0275elementStart"](0,"table",0),i["\u0275\u0275elementStart"](1,"thead"),i["\u0275\u0275template"](2,u,6,4,"tr",1),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](3,"tbody"),i["\u0275\u0275template"](4,x,2,1,"ng-container",2),i["\u0275\u0275template"](5,E,3,4,"tr",3),i["\u0275\u0275template"](6,O,5,4,"tr",4),i["\u0275\u0275template"](7,M,5,4,"tr",4),i["\u0275\u0275template"](8,P,5,4,"tr",4),i["\u0275\u0275template"](9,k,5,4,"tr",4),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()),2&t&&(i["\u0275\u0275property"]("ngClass",e.isRowDirection?"tb-legend-row":"tb-legend-column")("ngStyle",i["\u0275\u0275pureFunction1"](9,j,e.isRowDirection&&!e.displayHeader?"auto":"20px")),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngIf",!e.isRowDirection),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngIf",!e.isRowDirection),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",e.isRowDirection),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",e.isRowDirection&&!0===e.legendConfig.showMin),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",e.isRowDirection&&!0===e.legendConfig.showMax),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",e.isRowDirection&&!0===e.legendConfig.showAvg),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",e.isRowDirection&&!0===e.legendConfig.showTotal))},directives:[r.NgClass,o.b,r.NgStyle,o.e,r.NgIf,r.NgForOf],pipes:[s.TranslatePipe],styles:["[_nghost-%COMP%]   table.tb-legend[_ngcontent-%COMP%]{font-size:12px}[_nghost-%COMP%]   table.tb-legend.tb-legend-column[_ngcontent-%COMP%]{width:100%}[_nghost-%COMP%]   table.tb-legend.tb-legend-row[_ngcontent-%COMP%]{width:auto;margin-left:auto}[_nghost-%COMP%]   table.tb-legend[_ngcontent-%COMP%]   .tb-legend-header[_ngcontent-%COMP%], [_nghost-%COMP%]   table.tb-legend[_ngcontent-%COMP%]   .tb-legend-value[_ngcontent-%COMP%]{text-align:right}[_nghost-%COMP%]   table.tb-legend[_ngcontent-%COMP%]   .tb-legend-header[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:0 10px 1px 0;color:#ff6e40;white-space:nowrap;font-size:12px}[_nghost-%COMP%]   table.tb-legend[_ngcontent-%COMP%]   .tb-legend-keys[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{font-size:12px}[_nghost-%COMP%]   table.tb-legend[_ngcontent-%COMP%]   .tb-legend-keys[_ngcontent-%COMP%]   td.tb-legend-label[_ngcontent-%COMP%], [_nghost-%COMP%]   table.tb-legend[_ngcontent-%COMP%]   .tb-legend-keys[_ngcontent-%COMP%]   td.tb-legend-value[_ngcontent-%COMP%]{padding:2px 10px;white-space:nowrap}[_nghost-%COMP%]   table.tb-legend[_ngcontent-%COMP%]   .tb-legend-keys[_ngcontent-%COMP%]   .tb-legend-type[_ngcontent-%COMP%]{min-width:50px;padding:0 10px 1px 0;font-weight:700;color:#ff6e40;text-align:right;white-space:nowrap}[_nghost-%COMP%]   table.tb-legend[_ngcontent-%COMP%]   .tb-legend-keys[_ngcontent-%COMP%]   .tb-legend-line[_ngcontent-%COMP%]{display:inline-block;width:15px;height:3px;vertical-align:middle}[_nghost-%COMP%]   table.tb-legend[_ngcontent-%COMP%]   .tb-legend-keys[_ngcontent-%COMP%]   .tb-legend-label[_ngcontent-%COMP%]{padding:2px 10px;text-align:left;white-space:nowrap;outline:none}[_nghost-%COMP%]   table.tb-legend[_ngcontent-%COMP%]   .tb-legend-keys[_ngcontent-%COMP%]   .tb-legend-label.tb-horizontal[_ngcontent-%COMP%]{width:95%}[_nghost-%COMP%]   table.tb-legend[_ngcontent-%COMP%]   .tb-legend-keys[_ngcontent-%COMP%]   .tb-legend-label.tb-hidden-label[_ngcontent-%COMP%]{text-decoration:line-through;opacity:.6}[_nghost-%COMP%]   table.tb-legend[_ngcontent-%COMP%]   .tb-legend-keys.tb-row-direction[_ngcontent-%COMP%]{display:inline-block}"]}),t}();!function(){i["\u0275setClassMetadata"](A,[{type:i.Component,args:[{selector:"tb-legend",templateUrl:"./legend.component.html",styleUrls:["./legend.component.scss"]}]}],null,{legendConfig:[{type:i.Input}],legendData:[{type:i.Input}],legendKeyHiddenChange:[{type:i.Output}]})}()},CUDX:function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var i=n("fXoL"),a=n("Qrxw"),r=function(){function t(t,e){this.viewContainerRef=t,this.statesControllerService=e}return t.prototype.ngOnInit=function(){this.init()},t.prototype.ngOnDestroy=function(){this.destroy()},t.prototype.ngOnChanges=function(t){for(var e=!1,n=0,i=Object.keys(t);n<i.length;n++){var a=i[n],r=t[a];r.firstChange||r.currentValue===r.previousValue||("statesControllerId"===a?this.reInit():"states"===a?this.stateControllerComponent.states=this.states:"dashboardId"===a?(this.stateControllerComponent.dashboardId=this.dashboardId,e=!0):"isMobile"===a?this.stateControllerComponent.isMobile=this.isMobile:"state"===a?this.stateControllerComponent.state=this.state:"currentState"===a?this.stateControllerComponent.currentState=this.currentState:"syncStateWithQueryParam"===a&&(this.stateControllerComponent.syncStateWithQueryParam=this.syncStateWithQueryParam))}e&&this.stateControllerComponent.reInit()},t.prototype.reInit=function(){this.destroy(),this.init()},t.prototype.init=function(){this.viewContainerRef.clear();var t=this.statesControllerService.getStateController(this.statesControllerId);t||(t=this.statesControllerService.getStateController("default"));var e=this.dashboardCtrl.dashboardCtx.instanceId+"_"+this.statesControllerId,n=this.statesControllerService.withdrawStateControllerState(e),i=t.factory;this.stateControllerComponentRef=this.viewContainerRef.createComponent(i),this.stateControllerComponent=this.stateControllerComponentRef.instance,this.dashboardCtrl.dashboardCtx.stateController=this.stateControllerComponent,this.stateControllerComponent.preservedState=n,this.stateControllerComponent.dashboardCtrl=this.dashboardCtrl,this.stateControllerComponent.stateControllerInstanceId=e,this.stateControllerComponent.state=this.state,this.stateControllerComponent.currentState=this.currentState,this.stateControllerComponent.syncStateWithQueryParam=this.syncStateWithQueryParam,this.stateControllerComponent.isMobile=this.isMobile,this.stateControllerComponent.states=this.states,this.stateControllerComponent.dashboardId=this.dashboardId},t.prototype.destroy=function(){this.stateControllerComponentRef&&this.stateControllerComponentRef.destroy()},t.\u0275fac=function(e){return new(e||t)(i["\u0275\u0275directiveInject"](i.ViewContainerRef),i["\u0275\u0275directiveInject"](a.a))},t.\u0275dir=i["\u0275\u0275defineDirective"]({type:t,selectors:[["tb-states-component"]],inputs:{statesControllerId:"statesControllerId",dashboardCtrl:"dashboardCtrl",dashboardId:"dashboardId",states:"states",state:"state",currentState:"currentState",syncStateWithQueryParam:"syncStateWithQueryParam",isMobile:"isMobile"},features:[i["\u0275\u0275NgOnChangesFeature"]]}),t}();!function(){i["\u0275setClassMetadata"](r,[{type:i.Directive,args:[{selector:"tb-states-component"}]}],(function(){return[{type:i.ViewContainerRef},{type:a.a}]}),{statesControllerId:[{type:i.Input}],dashboardCtrl:[{type:i.Input}],dashboardId:[{type:i.Input}],states:[{type:i.Input}],state:[{type:i.Input}],currentState:[{type:i.Input}],syncStateWithQueryParam:[{type:i.Input}],isMobile:[{type:i.Input}]})}()},CyoE:function(t,e,n){"use strict";(function(t){n.d(e,"a",(function(){return O}));var i=n("mrSG"),a=n("fXoL"),r=n("RxGS"),o=(n("0G7Z"),n("OiFK")),s=n("//Q6"),l=n("0lYY"),c=n("U3y+"),d=n("HR/i"),p=n("l7P3"),u=n("XiUz"),m=n("ofXK"),f=n("znSr"),h=["switch"],g=["switchContainer"],y=["onoff"],b=["textMeasure"],v=["switchTitleContainer"],x=["switchTitle"],C=["switchErrorContainer"],S=["switchError"],w=function(t){return{pointerEvents:t}},E=function(t){return{paddingTop:t}},I=function(t){return{background:t}},O=function(e){function n(t,n){var i=e.call(this,n)||this;return i.utils=t,i.store=n,i.showTitle=!1,i.value=!1,i.error="",i.title="",i.checkboxId="onoff-"+i.utils.guid(),i}return Object(i.d)(n,e),n.prototype.ngOnInit=function(){var e=this;this.switchElement=t(this.switchElementRef.nativeElement),this.switchContainer=t(this.switchContainerRef.nativeElement),this.onoff=t(this.onoffRef.nativeElement),this.textMeasure=t(this.textMeasureRef.nativeElement),this.switchTitleContainer=t(this.switchTitleContainerRef.nativeElement),this.switchTitle=t(this.switchTitleRef.nativeElement),this.switchErrorContainer=t(this.switchErrorContainerRef.nativeElement),this.switchError=t(this.switchErrorRef.nativeElement),this.onoff.on("change",(function(){e.value=!1===e.onoff.prop("checked"),e.onValue()})),this.switchResize$=new d.a((function(){e.resize()})),this.switchResize$.observe(this.switchContainerRef.nativeElement),this.init()},n.prototype.ngOnDestroy=function(){this.valueSubscription&&this.ctx.subscriptionApi.removeSubscription(this.valueSubscription.id),this.switchResize$&&this.switchResize$.disconnect()},n.prototype.init=function(){var t=this.ctx.settings;this.title=Object(s.n)(t.title)?t.title:"",this.showTitle=!(!this.title||!this.title.length);var e=!!Object(s.n)(t.initialValue)&&t.initialValue;this.setValue(e);var n=this.ctx.defaultSubscription.rpcEnabled;if(this.isSimulated=this.utils.widgetEditMode,this.requestTimeout=500,t.requestTimeout&&(this.requestTimeout=t.requestTimeout),this.retrieveValueMethod="rpc",t.retrieveValueMethod&&t.retrieveValueMethod.length&&(this.retrieveValueMethod=t.retrieveValueMethod),this.valueKey="value",t.valueKey&&t.valueKey.length&&(this.valueKey=t.valueKey),this.parseValueFunction=function(t){return!!t},t.parseValueFunction&&t.parseValueFunction.length)try{this.parseValueFunction=new Function("data",t.parseValueFunction)}catch(i){this.parseValueFunction=function(t){return!!t}}if(this.convertValueFunction=function(t){return t},t.convertValueFunction&&t.convertValueFunction.length)try{this.convertValueFunction=new Function("value",t.convertValueFunction)}catch(i){this.convertValueFunction=function(t){return t}}this.getValueMethod="getValue",t.getValueMethod&&t.getValueMethod.length&&(this.getValueMethod=t.getValueMethod),this.setValueMethod="setValue",t.setValueMethod&&t.setValueMethod.length&&(this.setValueMethod=t.setValueMethod),n?this.isSimulated||("rpc"===this.retrieveValueMethod?this.rpcRequestValue():"attribute"!==this.retrieveValueMethod&&"timeseries"!==this.retrieveValueMethod||this.subscribeForValue()):this.onError("Target device is not set!")},n.prototype.resize=function(){var t=this.switchContainer.width(),e=this.switchContainer.height(),n=Math.min(t,e)/260;this.switchElement.css({"-webkit-transform":"scale("+n+")","-moz-transform":"scale("+n+")","-ms-transform":"scale("+n+")","-o-transform":"scale("+n+")",transform:"scale("+n+")"}),this.showTitle&&this.setFontSize(this.switchTitle,this.title,2*this.switchTitleContainer.height()/3,this.switchTitleContainer.width()),this.setFontSize(this.switchError,this.error,this.switchErrorContainer.height(),this.switchErrorContainer.width())},n.prototype.setFontSize=function(t,e,n,i){for(var a=this.measureTextWidth(e,n);a>i;)n--,a=this.measureTextWidth(e,n);t.css({fontSize:n+"px",lineHeight:n+"px"})},n.prototype.measureTextWidth=function(t,e){return this.textMeasure.css({fontSize:e+"px",lineHeight:e+"px"}),this.textMeasure.text(t),this.textMeasure.width()},n.prototype.onError=function(t){this.error=t,this.setFontSize(this.switchError,this.error,this.switchErrorContainer.height(),this.switchErrorContainer.width()),this.ctx.detectChanges()},n.prototype.setValue=function(t){this.value=!!t,this.onoff.prop("checked",!this.value)},n.prototype.onValue=function(){this.rpcUpdateValue(this.value)},n.prototype.rpcRequestValue=function(){var t=this;this.error="",this.ctx.controlApi.sendTwoWayCommand(this.getValueMethod,null,this.requestTimeout).subscribe((function(e){t.setValue(t.parseValueFunction(e))}),(function(){var e=t.ctx.defaultSubscription.rpcErrorText;t.onError(e)}))},n.prototype.rpcUpdateValue=function(t){var e=this;if(this.executingUpdateValue)return this.scheduledValue=t,void 0;this.scheduledValue=null,this.rpcValue=t,this.executingUpdateValue=!0,this.error="",this.ctx.controlApi.sendOneWayCommand(this.setValueMethod,this.convertValueFunction(t),this.requestTimeout).subscribe((function(){e.executingUpdateValue=!1,null!=e.scheduledValue&&e.scheduledValue!==e.rpcValue&&e.rpcUpdateValue(e.scheduledValue)}),(function(){e.executingUpdateValue=!1;var t=e.ctx.defaultSubscription.rpcErrorText;e.onError(t)}))},n.prototype.subscribeForValue=function(){var t=this,e=[{type:l.a.entity,entityType:c.b.DEVICE,entityId:this.ctx.defaultSubscription.targetDeviceId}];"attribute"===this.retrieveValueMethod?e[0].attributes=[{name:this.valueKey}]:e[0].timeseries=[{name:this.valueKey}];var n={callbacks:{onDataUpdated:function(e,n){return t.ctx.ngZone.run((function(){t.onDataUpdated(e,n)}))},onDataUpdateError:function(e,n){return t.ctx.ngZone.run((function(){t.onDataUpdateError(e,n)}))}}};this.ctx.subscriptionApi.createSubscriptionFromInfo(l.k.latest,e,n,!1,!0).subscribe((function(e){t.valueSubscription=e}))},n.prototype.onDataUpdated=function(t,e){var n=!1,i=t.data;if(i.length){var a=i[0];if(a&&a.data&&a.data[0]){var r=a.data[0][1];if(Object(s.n)(r)){var o=null;try{o=this.parseValueFunction(JSON.parse(r))}catch(l){}n=!!o}}}this.setValue(n),e&&this.ctx.detectChanges()},n.prototype.onDataUpdateError=function(t,e){var n=this.utils.parseException(e),i=n.name;n.message&&(i+=": "+n.message),this.onError(i)},n.\u0275fac=function(t){return new(t||n)(a["\u0275\u0275directiveInject"](o.a),a["\u0275\u0275directiveInject"](p.Store))},n.\u0275cmp=a["\u0275\u0275defineComponent"]({type:n,selectors:[["tb-round-switch"]],viewQuery:function(t,e){var n;(1&t&&(a["\u0275\u0275staticViewQuery"](h,!0),a["\u0275\u0275staticViewQuery"](g,!0),a["\u0275\u0275staticViewQuery"](y,!0),a["\u0275\u0275staticViewQuery"](b,!0),a["\u0275\u0275staticViewQuery"](v,!0),a["\u0275\u0275staticViewQuery"](x,!0),a["\u0275\u0275staticViewQuery"](C,!0),a["\u0275\u0275staticViewQuery"](S,!0)),2&t)&&(a["\u0275\u0275queryRefresh"](n=a["\u0275\u0275loadQuery"]())&&(e.switchElementRef=n.first),a["\u0275\u0275queryRefresh"](n=a["\u0275\u0275loadQuery"]())&&(e.switchContainerRef=n.first),a["\u0275\u0275queryRefresh"](n=a["\u0275\u0275loadQuery"]())&&(e.onoffRef=n.first),a["\u0275\u0275queryRefresh"](n=a["\u0275\u0275loadQuery"]())&&(e.textMeasureRef=n.first),a["\u0275\u0275queryRefresh"](n=a["\u0275\u0275loadQuery"]())&&(e.switchTitleContainerRef=n.first),a["\u0275\u0275queryRefresh"](n=a["\u0275\u0275loadQuery"]())&&(e.switchTitleRef=n.first),a["\u0275\u0275queryRefresh"](n=a["\u0275\u0275loadQuery"]())&&(e.switchErrorContainerRef=n.first),a["\u0275\u0275queryRefresh"](n=a["\u0275\u0275loadQuery"]())&&(e.switchErrorRef=n.first))},inputs:{ctx:"ctx"},features:[a["\u0275\u0275InheritDefinitionFeature"]],decls:25,vars:15,consts:[["fxLayout","column",1,"tb-round-switch",3,"ngStyle"],["fxFlex","20","fxLayout","row","fxLayoutAlign","center center",1,"title-container",3,"fxShow"],["switchTitleContainer",""],[1,"switch-title"],["switchTitle",""],["id","switch-container","fxLayout","column","fxLayoutAlign","center center",3,"fxFlex","ngStyle"],["switchContainer",""],[1,"switch"],["switch",""],["type","checkbox","name","onoff",3,"id"],["onoff",""],[1,"back"],[1,"but",3,"for"],[1,"on"],[1,"off"],["fxLayout","row","fxLayoutAlign","center center",1,"error-container",3,"ngStyle"],["switchErrorContainer",""],[1,"switch-error"],["switchError",""],["id","text-measure"],["textMeasure",""]],template:function(t,e){1&t&&(a["\u0275\u0275elementStart"](0,"div",0),a["\u0275\u0275elementStart"](1,"div",1,2),a["\u0275\u0275elementStart"](3,"span",3,4),a["\u0275\u0275text"](5),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](6,"div",5,6),a["\u0275\u0275elementStart"](8,"div",7,8),a["\u0275\u0275element"](10,"input",9,10),a["\u0275\u0275elementStart"](12,"div",11),a["\u0275\u0275elementStart"](13,"label",12),a["\u0275\u0275elementStart"](14,"span",13),a["\u0275\u0275text"](15,"I"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](16,"span",14),a["\u0275\u0275text"](17,"0"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](18,"div",15,16),a["\u0275\u0275elementStart"](20,"span",17,18),a["\u0275\u0275text"](22),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](23,"div",19,20),a["\u0275\u0275elementEnd"]()),2&t&&(a["\u0275\u0275property"]("ngStyle",a["\u0275\u0275pureFunction1"](9,w,e.ctx.isEdit?"none":"all")),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("fxShow",e.showTitle),a["\u0275\u0275advance"](4),a["\u0275\u0275textInterpolate"](e.title),a["\u0275\u0275advance"](1),a["\u0275\u0275propertyInterpolate"]("fxFlex",e.showTitle?80:100),a["\u0275\u0275property"]("ngStyle",a["\u0275\u0275pureFunction1"](11,E,e.showTitle?"5px":"10px")),a["\u0275\u0275advance"](4),a["\u0275\u0275propertyInterpolate"]("id",e.checkboxId),a["\u0275\u0275advance"](3),a["\u0275\u0275propertyInterpolate"]("for",e.checkboxId),a["\u0275\u0275advance"](5),a["\u0275\u0275property"]("ngStyle",a["\u0275\u0275pureFunction1"](13,I,null!=e.error&&e.error.length?"rgba(255,255,255,0.25)":"none")),a["\u0275\u0275advance"](4),a["\u0275\u0275textInterpolate"](e.error))},directives:[u.f,m.NgStyle,f.e,u.b,u.e,f.d],styles:["[_nghost-%COMP%]   .tb-round-switch[_ngcontent-%COMP%]{width:100%;height:100%}[_nghost-%COMP%]   .tb-round-switch[_ngcontent-%COMP%]   .title-container[_ngcontent-%COMP%]   .switch-title[_ngcontent-%COMP%]{font-weight:500;color:#757575;white-space:nowrap}[_nghost-%COMP%]   .tb-round-switch[_ngcontent-%COMP%]   .error-container[_ngcontent-%COMP%]{position:absolute;top:1%;right:0;left:0;z-index:4;height:14px}[_nghost-%COMP%]   .tb-round-switch[_ngcontent-%COMP%]   .error-container[_ngcontent-%COMP%]   .switch-error[_ngcontent-%COMP%]{color:#ff3315;white-space:nowrap}[_nghost-%COMP%]   .tb-round-switch[_ngcontent-%COMP%]   #text-measure[_ngcontent-%COMP%]{position:absolute;width:auto;height:auto;white-space:nowrap;visibility:hidden}[_nghost-%COMP%]   .tb-round-switch[_ngcontent-%COMP%]   #switch-container[_ngcontent-%COMP%]{padding:10px}[_nghost-%COMP%]   .tb-round-switch[_ngcontent-%COMP%]   #switch-container[_ngcontent-%COMP%]   .switch[_ngcontent-%COMP%]{position:relative;box-sizing:border-box;width:260px;min-width:260px;height:260px;min-height:260px;padding:25px;font-family:sans-serif;font-size:48px;color:#424242;cursor:pointer;background:#ddd;background:linear-gradient(180deg,#bbb,#ddd);border-radius:130px;box-shadow:0 0 0 8px rgba(0,0,0,.1),0 0 3px 1px rgba(0,0,0,.1),inset 0 8px 3px -8px hsla(0,0%,100%,.4)}[_nghost-%COMP%]   .tb-round-switch[_ngcontent-%COMP%]   #switch-container[_ngcontent-%COMP%]   .switch[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{display:none}[_nghost-%COMP%]   .tb-round-switch[_ngcontent-%COMP%]   #switch-container[_ngcontent-%COMP%]   .switch[_ngcontent-%COMP%]   .off[_ngcontent-%COMP%], [_nghost-%COMP%]   .tb-round-switch[_ngcontent-%COMP%]   #switch-container[_ngcontent-%COMP%]   .switch[_ngcontent-%COMP%]   .on[_ngcontent-%COMP%]{position:absolute;width:100%;text-align:center;text-shadow:1px 1px 4px #4a4a4a}[_nghost-%COMP%]   .tb-round-switch[_ngcontent-%COMP%]   #switch-container[_ngcontent-%COMP%]   .switch[_ngcontent-%COMP%]   .on[_ngcontent-%COMP%]{top:10px;font-family:sans-serif;color:#444;transition:all .1s}[_nghost-%COMP%]   .tb-round-switch[_ngcontent-%COMP%]   #switch-container[_ngcontent-%COMP%]   .switch[_ngcontent-%COMP%]   .off[_ngcontent-%COMP%]{bottom:5px;transition:all .1s;transform:scaleY(.85)}[_nghost-%COMP%]   .tb-round-switch[_ngcontent-%COMP%]   #switch-container[_ngcontent-%COMP%]   .switch[_ngcontent-%COMP%]   .but[_ngcontent-%COMP%]{position:relative;display:block;width:200px;height:178px;font-size:48px;cursor:pointer;background-color:#d8d8d8;border-bottom-width:0;border-radius:400px 400px 400px 400px/400px 400px 300px 300px;box-shadow:inset 8px 6px 5px -7px #a2a2a2,inset -8px 6px 5px -7px #a2a2a2,inset 0 -3px 2px -2px hsla(0,0%,78.4%,.5),0 3px 3px -2px #fff,inset 0 -230px 60px -200px hsla(0,0%,100%,.2),inset 0 220px 40px -200px rgba(0,0,0,.3);transition:all .2s}[_nghost-%COMP%]   .tb-round-switch[_ngcontent-%COMP%]   #switch-container[_ngcontent-%COMP%]   .switch[_ngcontent-%COMP%]   .back[_ngcontent-%COMP%]{box-sizing:border-box;width:210px;height:210px;padding:4px;cursor:pointer;background-color:#888787;background-image:linear-gradient(-90deg,transparent 30%,transparent 70%),linear-gradient(0deg,hsla(0,0%,58.8%,0) 30%,hsla(0,0%,58.8%,.2) 50%,hsla(0,0%,58.8%,0) 70%);border-radius:105px;box-shadow:30px 30px 30px -20px rgba(58,58,58,.3),-30px 30px 30px -20px rgba(58,58,58,.3),0 30px 30px 0 rgba(16,16,16,.3),inset 0 -1px 0 0 #484848;transition:all .2s}[_nghost-%COMP%]   .tb-round-switch[_ngcontent-%COMP%]   #switch-container[_ngcontent-%COMP%]   .switch[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked + .back[_ngcontent-%COMP%]   .off[_ngcontent-%COMP%], [_nghost-%COMP%]   .tb-round-switch[_ngcontent-%COMP%]   #switch-container[_ngcontent-%COMP%]   .switch[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked + .back[_ngcontent-%COMP%]   .on[_ngcontent-%COMP%]{text-shadow:1px 1px 4px #4a4a4a}[_nghost-%COMP%]   .tb-round-switch[_ngcontent-%COMP%]   #switch-container[_ngcontent-%COMP%]   .switch[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked + .back[_ngcontent-%COMP%]   .on[_ngcontent-%COMP%]{top:10px;color:#4c4c4c;transform:scaleY(.85)}[_nghost-%COMP%]   .tb-round-switch[_ngcontent-%COMP%]   #switch-container[_ngcontent-%COMP%]   .switch[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked + .back[_ngcontent-%COMP%]   .off[_ngcontent-%COMP%]{bottom:5px;color:#444;transform:scaleY(1)}[_nghost-%COMP%]   .tb-round-switch[_ngcontent-%COMP%]   #switch-container[_ngcontent-%COMP%]   .switch[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked + .back[_ngcontent-%COMP%]   .but[_ngcontent-%COMP%]{margin-top:20px;background:#dcdcdc radial-gradient(circle closest-corner at 50% 15%,rgba(0,0,0,.3),transparent);border-radius:400px 400px 400px 400px/300px 300px 400px 400px;box-shadow:inset 8px -4px 5px -7px #a9a9a9,inset -8px -4px 5px -7px grey,0 -3px 8px -4px rgba(50,50,50,.4),inset 0 3px 4px -2px #9c9c9c,inset 0 280px 40px -200px rgba(0,0,0,.2),inset 0 -200px 40px -200px hsla(0,0%,70.6%,.2)}[_nghost-%COMP%]   .tb-round-switch[_ngcontent-%COMP%]   #switch-container[_ngcontent-%COMP%]   .switch[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked + .back[_ngcontent-%COMP%]{padding:2px 4px;background-image:linear-gradient(0deg,#868686 30%,transparent 70%),linear-gradient(90deg,hsla(0,0%,45.1%,0),hsla(0,0%,100%,.74) 50%,hsla(0,0%,41.2%,0));box-shadow:30px 30px 30px -20px rgba(49,49,49,.1),-30px 30px 30px -20px hsla(0,0%,43.5%,.1),0 30px 30px 0 rgba(0,0,0,.2),inset 0 1px 2px 0 hsla(0,0%,65.5%,.6)}"]}),n}(r.a);!function(){a["\u0275setClassMetadata"](O,[{type:a.Component,args:[{selector:"tb-round-switch",templateUrl:"./round-switch.component.html",styleUrls:["./round-switch.component.scss"]}]}],(function(){return[{type:o.a},{type:p.Store}]}),{switchElementRef:[{type:a.ViewChild,args:["switch",{static:!0}]}],switchContainerRef:[{type:a.ViewChild,args:["switchContainer",{static:!0}]}],onoffRef:[{type:a.ViewChild,args:["onoff",{static:!0}]}],textMeasureRef:[{type:a.ViewChild,args:["textMeasure",{static:!0}]}],switchTitleContainerRef:[{type:a.ViewChild,args:["switchTitleContainer",{static:!0}]}],switchTitleRef:[{type:a.ViewChild,args:["switchTitle",{static:!0}]}],switchErrorContainerRef:[{type:a.ViewChild,args:["switchErrorContainer",{static:!0}]}],switchErrorRef:[{type:a.ViewChild,args:["switchError",{static:!0}]}],ctx:[{type:a.Input}]})}()}).call(this,n("xexB"))},Dgsq:function(t,e,n){"use strict";n.d(e,"a",(function(){return S}));var i=n("mrSG"),a=n("fXoL"),r=n("FKr1"),o=n("0IaG"),s=n("gmuX"),l=n("OiFK"),c=n("l7P3"),d=n("tyNb"),p=n("3Pt+"),u=n("sYmb"),m=n("/t3+"),f=n("XiUz"),h=n("bTqV"),g=n("NFeN"),y=n("ofXK"),b=n("V4k/"),v=n("bv9b");function x(t,e){1&t&&a["\u0275\u0275element"](0,"mat-progress-bar",13)}function C(t,e){if(1&t&&(a["\u0275\u0275elementStart"](0,"button",14),a["\u0275\u0275pipe"](1,"async"),a["\u0275\u0275text"](2),a["\u0275\u0275pipe"](3,"translate"),a["\u0275\u0275elementEnd"]()),2&t){var n=a["\u0275\u0275nextContext"]();a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](1,2,n.isLoading$)||n.alarmScheduleFormGroup.invalid||!n.alarmScheduleFormGroup.dirty),a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](3,4,"action.save")," ")}}var S=function(t){function e(e,n,i,a,r,o,s,l){var c=t.call(this,e,n,r)||this;return c.store=e,c.router=n,c.data=i,c.errorStateMatcher=a,c.dialogRef=r,c.fb=o,c.utils=s,c.translate=l,c.readonly=c.data.readonly,c.alarmSchedule=c.data.alarmSchedule,c.submitted=!1,c.alarmScheduleFormGroup=c.fb.group({alarmSchedule:[c.alarmSchedule]}),c.readonly&&c.alarmScheduleFormGroup.disable({emitEvent:!1}),c}return Object(i.d)(e,t),e.prototype.ngOnInit=function(){},e.prototype.isErrorState=function(t,e){var n=this.errorStateMatcher.isErrorState(t,e),i=!!(t&&t.invalid&&this.submitted);return n||i},e.prototype.cancel=function(){this.dialogRef.close(null)},e.prototype.save=function(){this.submitted=!0,this.alarmSchedule=this.alarmScheduleFormGroup.get("alarmSchedule").value,this.dialogRef.close(this.alarmSchedule)},e.\u0275fac=function(t){return new(t||e)(a["\u0275\u0275directiveInject"](c.Store),a["\u0275\u0275directiveInject"](d.Router),a["\u0275\u0275directiveInject"](o.MAT_DIALOG_DATA),a["\u0275\u0275directiveInject"](r.ErrorStateMatcher,4),a["\u0275\u0275directiveInject"](o.MatDialogRef),a["\u0275\u0275directiveInject"](p.FormBuilder),a["\u0275\u0275directiveInject"](l.a),a["\u0275\u0275directiveInject"](u.TranslateService))},e.\u0275cmp=a["\u0275\u0275defineComponent"]({type:e,selectors:[["tb-alarm-schedule-dialog"]],features:[a["\u0275\u0275ProvidersFeature"]([{provide:r.ErrorStateMatcher,useExisting:e}]),a["\u0275\u0275InheritDefinitionFeature"]],decls:22,vars:17,consts:[[2,"width","800px",3,"formGroup","ngSubmit"],["color","primary"],["fxFlex",""],["mat-icon-button","","type","button",3,"click"],[1,"material-icons"],["color","warn","mode","indeterminate",4,"ngIf"],["mat-dialog-content",""],[3,"disabled"],["fxFlex","","fxLayout","column"],["formControlName","alarmSchedule"],["mat-dialog-actions","","fxLayoutAlign","end center"],["mat-button","","color","primary","type","button","cdkFocusInitial","",3,"disabled","click"],["mat-raised-button","","color","primary","type","submit",3,"disabled",4,"ngIf"],["color","warn","mode","indeterminate"],["mat-raised-button","","color","primary","type","submit",3,"disabled"]],template:function(t,e){1&t&&(a["\u0275\u0275elementStart"](0,"form",0),a["\u0275\u0275listener"]("ngSubmit",(function(){return e.save()})),a["\u0275\u0275elementStart"](1,"mat-toolbar",1),a["\u0275\u0275elementStart"](2,"h2"),a["\u0275\u0275text"](3),a["\u0275\u0275pipe"](4,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](5,"span",2),a["\u0275\u0275elementStart"](6,"button",3),a["\u0275\u0275listener"]("click",(function(){return e.cancel()})),a["\u0275\u0275elementStart"](7,"mat-icon",4),a["\u0275\u0275text"](8,"close"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275template"](9,x,1,0,"mat-progress-bar",5),a["\u0275\u0275pipe"](10,"async"),a["\u0275\u0275elementStart"](11,"div",6),a["\u0275\u0275elementStart"](12,"fieldset",7),a["\u0275\u0275pipe"](13,"async"),a["\u0275\u0275elementStart"](14,"div",8),a["\u0275\u0275element"](15,"tb-alarm-schedule",9),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](16,"div",10),a["\u0275\u0275elementStart"](17,"button",11),a["\u0275\u0275listener"]("click",(function(){return e.cancel()})),a["\u0275\u0275pipe"](18,"async"),a["\u0275\u0275text"](19),a["\u0275\u0275pipe"](20,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275template"](21,C,4,6,"button",12),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()),2&t&&(a["\u0275\u0275property"]("formGroup",e.alarmScheduleFormGroup),a["\u0275\u0275advance"](3),a["\u0275\u0275textInterpolate"](a["\u0275\u0275pipeBind1"](4,7,e.readonly?"device-profile.schedule":"device-profile.edit-schedule")),a["\u0275\u0275advance"](6),a["\u0275\u0275property"]("ngIf",a["\u0275\u0275pipeBind1"](10,9,e.isLoading$)),a["\u0275\u0275advance"](3),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](13,11,e.isLoading$)),a["\u0275\u0275advance"](5),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](18,13,e.isLoading$)),a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](20,15,e.readonly?"action.close":"action.cancel")," "),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("ngIf",!e.readonly))},directives:[p["\u0275angular_packages_forms_forms_y"],p.NgControlStatusGroup,p.FormGroupDirective,m.MatToolbar,f.b,h.MatButton,g.MatIcon,y.NgIf,o.MatDialogContent,f.f,b.a,p.NgControlStatus,p.FormControlName,o.MatDialogActions,f.e,v.MatProgressBar],pipes:[u.TranslatePipe,y.AsyncPipe],encapsulation:2}),e}(s.a);!function(){a["\u0275setClassMetadata"](S,[{type:a.Component,args:[{selector:"tb-alarm-schedule-dialog",templateUrl:"./alarm-schedule-dialog.component.html",providers:[{provide:r.ErrorStateMatcher,useExisting:S}],styleUrls:[]}]}],(function(){return[{type:c.Store},{type:d.Router},{type:void 0,decorators:[{type:a.Inject,args:[o.MAT_DIALOG_DATA]}]},{type:r.ErrorStateMatcher,decorators:[{type:a.SkipSelf}]},{type:o.MatDialogRef},{type:p.FormBuilder},{type:l.a},{type:u.TranslateService}]}),null)}()},E4Bx:function(t,e,n){"use strict";n.d(e,"a",(function(){return k}));var i=n("fXoL"),a=n("3Pt+"),r=n("vkgz"),o=n("lJxs"),s=n("5+tZ"),l=n("w1tV"),c=n("8LU1"),d=n("U3y+"),p=n("21Fy"),u=n("T4sd"),m=n("C4fA"),f=n("/1cH"),h=n("l7P3"),g=n("sYmb"),y=n("kmnG"),b=n("qFsG"),v=n("ofXK"),x=n("bTqV"),C=n("NFeN"),S=n("FKr1"),w=n("d5eY"),E=["ruleChainInput"];function I(t,e){if(1&t){var n=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"button",9),i["\u0275\u0275listener"]("click",(function(){return i["\u0275\u0275restoreView"](n),i["\u0275\u0275nextContext"]().clear()})),i["\u0275\u0275elementStart"](1,"mat-icon",10),i["\u0275\u0275text"](2,"close"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()}}function O(t,e){if(1&t&&(i["\u0275\u0275elementStart"](0,"mat-option",11),i["\u0275\u0275element"](1,"span",12),i["\u0275\u0275pipe"](2,"highlight"),i["\u0275\u0275elementEnd"]()),2&t){var n=e.$implicit,a=i["\u0275\u0275nextContext"]();i["\u0275\u0275property"]("value",n),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("innerHTML",i["\u0275\u0275pipeBind2"](2,2,n.name,a.searchText),i["\u0275\u0275sanitizeHtml"])}}function T(t,e){1&t&&(i["\u0275\u0275elementStart"](0,"div"),i["\u0275\u0275elementStart"](1,"span",18),i["\u0275\u0275text"](2,"device-profile.no-device-profiles-found"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]())}var M=function(t){return{entity:t}};function F(t,e){if(1&t&&(i["\u0275\u0275elementStart"](0,"span"),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"async"),i["\u0275\u0275elementEnd"]()),2&t){var n=i["\u0275\u0275nextContext"](2);i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,1,n.translate.get("rulechain.no-rulechains-matching",i["\u0275\u0275pureFunction1"](3,M,n.truncate.transform(n.searchText,!0,6,"..."))))," ")}}function P(t,e){if(1&t){var n=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"mat-option",13),i["\u0275\u0275elementStart"](1,"div",14),i["\u0275\u0275listener"]("click",(function(t){return i["\u0275\u0275restoreView"](n),t.stopPropagation()})),i["\u0275\u0275template"](2,T,3,0,"div",15),i["\u0275\u0275template"](3,F,3,5,"ng-template",null,16,i["\u0275\u0275templateRefExtractor"]),i["\u0275\u0275elementStart"](5,"span"),i["\u0275\u0275elementStart"](6,"a",17),i["\u0275\u0275listener"]("click",(function(t){i["\u0275\u0275restoreView"](n);var e=i["\u0275\u0275nextContext"]();return e.createDefaultRuleChain(t,e.searchText)})),i["\u0275\u0275text"](7,"rulechain.create-new-rulechain"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()}if(2&t){var a=i["\u0275\u0275reference"](4),r=i["\u0275\u0275nextContext"]();i["\u0275\u0275property"]("value",null),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngIf",!r.textIsNotEmpty(r.searchText))("ngIfElse",a)}}function D(t,e){1&t&&(i["\u0275\u0275elementStart"](0,"mat-error"),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&t&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,1,"rulechain.rulechain-required")," "))}var k=function(){function t(t,e,n,i,a,r){this.store=t,this.translate=e,this.truncate=n,this.entityService=i,this.ruleChainService=a,this.fb=r,this.ruleChainLabel="rulechain.rulechain",this.searchText="",this.dirty=!1,this.propagateChange=function(t){},this.selectRuleChainFormGroup=this.fb.group({ruleChainId:[null]})}return Object.defineProperty(t.prototype,"required",{get:function(){return this.requiredValue},set:function(t){this.requiredValue=Object(c.coerceBooleanProperty)(t)},enumerable:!1,configurable:!0}),t.prototype.registerOnChange=function(t){this.propagateChange=t},t.prototype.registerOnTouched=function(t){},t.prototype.ngOnInit=function(){var t=this;this.filteredRuleChains=this.selectRuleChainFormGroup.get("ruleChainId").valueChanges.pipe(Object(r.a)((function(e){var n;n="string"!=typeof e&&e?e.id.id:null,t.updateView(n),null===e&&t.clear()})),Object(o.a)((function(t){return t?"string"==typeof t?t:t.name:""})),Object(s.b)((function(e){return t.fetchRuleChain(e)})),Object(l.a)())},t.prototype.ngAfterViewInit=function(){},t.prototype.getCurrentEntity=function(){var t=this.selectRuleChainFormGroup.get("ruleChainId").value;return t&&"string"!=typeof t?t:null},t.prototype.setDisabledState=function(t){this.disabled=t,this.disabled?this.selectRuleChainFormGroup.disable({emitEvent:!1}):this.selectRuleChainFormGroup.enable({emitEvent:!1})},t.prototype.textIsNotEmpty=function(t){return t&&t.length>0},t.prototype.writeValue=function(t){var e=this;if(this.searchText="",null!=t){var n=d.b.RULE_CHAIN;this.entityService.getEntity(n,t,{ignoreLoading:!0,ignoreErrors:!0}).subscribe((function(t){e.modelValue=t.id.id,e.selectRuleChainFormGroup.get("ruleChainId").patchValue(t,{emitEvent:!1})}),(function(){e.modelValue=null,e.selectRuleChainFormGroup.get("ruleChainId").patchValue("",{emitEvent:!1}),null!==t&&e.propagateChange(e.modelValue)}))}else this.modelValue=null,this.selectRuleChainFormGroup.get("ruleChainId").patchValue("",{emitEvent:!1});this.dirty=!0},t.prototype.onFocus=function(){this.dirty&&(this.selectRuleChainFormGroup.get("ruleChainId").updateValueAndValidity({onlySelf:!0,emitEvent:!0}),this.dirty=!1)},t.prototype.reset=function(){this.selectRuleChainFormGroup.get("ruleChainId").patchValue("",{emitEvent:!1})},t.prototype.updateView=function(t){this.modelValue!==t&&(this.modelValue=t,this.propagateChange(this.modelValue))},t.prototype.displayRuleChainFn=function(t){return t?t.name:void 0},t.prototype.fetchRuleChain=function(t){return this.searchText=t,this.entityService.getEntitiesByNameFilter(d.b.RULE_CHAIN,t,50,null,{ignoreLoading:!0})},t.prototype.clear=function(){var t=this;this.selectRuleChainFormGroup.get("ruleChainId").patchValue("",{emitEvent:!0}),setTimeout((function(){t.ruleChainInput.nativeElement.blur(),t.ruleChainInput.nativeElement.focus()}),0)},t.prototype.createDefaultRuleChain=function(t,e){var n=this;t.preventDefault(),this.ruleChainAutocomplete.closePanel(),this.ruleChainService.createDefaultRuleChain(e.trim()).subscribe((function(t){n.selectRuleChainFormGroup.get("ruleChainId").patchValue(t)}))},t.\u0275fac=function(e){return new(e||t)(i["\u0275\u0275directiveInject"](h.Store),i["\u0275\u0275directiveInject"](g.TranslateService),i["\u0275\u0275directiveInject"](u.a),i["\u0275\u0275directiveInject"](p.a),i["\u0275\u0275directiveInject"](m.a),i["\u0275\u0275directiveInject"](a.FormBuilder))},t.\u0275cmp=i["\u0275\u0275defineComponent"]({type:t,selectors:[["tb-rule-chain-autocomplete"]],viewQuery:function(t,e){var n;(1&t&&(i["\u0275\u0275staticViewQuery"](E,!0),i["\u0275\u0275viewQuery"](E,!0,f.MatAutocompleteTrigger)),2&t)&&(i["\u0275\u0275queryRefresh"](n=i["\u0275\u0275loadQuery"]())&&(e.ruleChainInput=n.first),i["\u0275\u0275queryRefresh"](n=i["\u0275\u0275loadQuery"]())&&(e.ruleChainAutocomplete=n.first))},inputs:{labelText:"labelText",requiredText:"requiredText",required:"required",disabled:"disabled"},features:[i["\u0275\u0275ProvidersFeature"]([{provide:a.NG_VALUE_ACCESSOR,useExisting:Object(i.forwardRef)((function(){return t})),multi:!0}])],decls:12,vars:15,consts:[[1,"mat-block",3,"formGroup"],["matInput","","type","text","formControlName","ruleChainId",3,"placeholder","required","matAutocomplete","focusin"],["ruleChainInput",""],["type","button","matSuffix","","mat-button","","mat-icon-button","","aria-label","Clear",3,"click",4,"ngIf"],[1,"tb-autocomplete",3,"displayWith"],["ruleChainAutocomplete","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],["class","tb-not-found",3,"value",4,"ngIf"],[4,"ngIf"],["type","button","matSuffix","","mat-button","","mat-icon-button","","aria-label","Clear",3,"click"],[1,"material-icons"],[3,"value"],[3,"innerHTML"],[1,"tb-not-found",3,"value"],[1,"tb-not-found-content",3,"click"],[4,"ngIf","ngIfElse"],["searchNotEmpty",""],["translate","",3,"click"],["translate",""]],template:function(t,e){if(1&t&&(i["\u0275\u0275elementStart"](0,"mat-form-field",0),i["\u0275\u0275elementStart"](1,"input",1,2),i["\u0275\u0275listener"]("focusin",(function(){return e.onFocus()})),i["\u0275\u0275pipe"](3,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](4,I,3,0,"button",3),i["\u0275\u0275elementStart"](5,"mat-autocomplete",4,5),i["\u0275\u0275template"](7,O,3,5,"mat-option",6),i["\u0275\u0275pipe"](8,"async"),i["\u0275\u0275template"](9,P,8,3,"mat-option",7),i["\u0275\u0275pipe"](10,"async"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](11,D,3,3,"mat-error",8),i["\u0275\u0275elementEnd"]()),2&t){var n,a=i["\u0275\u0275reference"](6);i["\u0275\u0275property"]("formGroup",e.selectRuleChainFormGroup),i["\u0275\u0275advance"](1),i["\u0275\u0275propertyInterpolate"]("placeholder",i["\u0275\u0275pipeBind1"](3,9,e.ruleChainLabel)),i["\u0275\u0275property"]("required",e.required)("matAutocomplete",a),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("ngIf",e.selectRuleChainFormGroup.get("ruleChainId").value&&!e.disabled),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("displayWith",e.displayRuleChainFn),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngForOf",i["\u0275\u0275pipeBind1"](8,11,e.filteredRuleChains)),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngIf",!(null!=(n=i["\u0275\u0275pipeBind1"](10,13,e.filteredRuleChains))&&n.length)),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngIf",e.selectRuleChainFormGroup.get("ruleChainId").hasError("required"))}},directives:[y.MatFormField,a.NgControlStatusGroup,a.FormGroupDirective,b.MatInput,a.DefaultValueAccessor,f.MatAutocompleteTrigger,a.NgControlStatus,a.FormControlName,a.RequiredValidator,v.NgIf,f.MatAutocomplete,v.NgForOf,x.MatButton,y.MatSuffix,C.MatIcon,S.MatOption,g.TranslateDirective,y.MatError],pipes:[g.TranslatePipe,v.AsyncPipe,w.a],encapsulation:2}),t}();!function(){i["\u0275setClassMetadata"](k,[{type:i.Component,args:[{selector:"tb-rule-chain-autocomplete",templateUrl:"./rule-chain-autocomplete.component.html",styleUrls:[],providers:[{provide:a.NG_VALUE_ACCESSOR,useExisting:Object(i.forwardRef)((function(){return k})),multi:!0}]}]}],(function(){return[{type:h.Store},{type:g.TranslateService},{type:u.a},{type:p.a},{type:m.a},{type:a.FormBuilder}]}),{labelText:[{type:i.Input}],requiredText:[{type:i.Input}],required:[{type:i.Input}],disabled:[{type:i.Input}],ruleChainInput:[{type:i.ViewChild,args:["ruleChainInput",{static:!0}]}],ruleChainAutocomplete:[{type:i.ViewChild,args:["ruleChainInput",{read:f.MatAutocompleteTrigger}]}]})}()},EWcq:function(t,e,n){"use strict";n.d(e,"a",(function(){return _}));var i=n("mrSG"),a=n("fXoL"),r=n("FKr1"),o=n("0IaG"),s=n("3Pt+"),l=n("gmuX"),c=n("0lYY"),d=n("OiFK"),p=n("xKAQ"),u=n("S+vS"),m=n("//Q6"),f=n("hqxT"),h=n("l7P3"),g=n("tyNb"),y=n("sYmb"),b=n("/t3+"),v=n("XiUz"),x=n("bTqV"),C=n("NFeN"),S=n("ofXK"),w=n("f0Cb"),E=n("znSr"),I=n("Qu3c"),O=n("bv9b"),T=n("kmnG"),M=n("qFsG"),F=n("c3m7"),P=n("1jcm");function D(t,e){1&t&&a["\u0275\u0275element"](0,"mat-progress-bar",21)}function k(t,e){1&t&&a["\u0275\u0275element"](0,"div",22)}function j(t,e){1&t&&(a["\u0275\u0275elementStart"](0,"mat-error"),a["\u0275\u0275text"](1),a["\u0275\u0275pipe"](2,"translate"),a["\u0275\u0275elementEnd"]()),2&t&&(a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](2,1,"entity.alias-required")," "))}function A(t,e){if(1&t){var n=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementStart"](0,"div",23),a["\u0275\u0275elementStart"](1,"span",9),a["\u0275\u0275text"](2),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](3,"div",24),a["\u0275\u0275elementStart"](4,"mat-form-field",25),a["\u0275\u0275element"](5,"mat-label"),a["\u0275\u0275element"](6,"input",26),a["\u0275\u0275pipe"](7,"translate"),a["\u0275\u0275template"](8,j,3,3,"mat-error",27),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](9,"tb-entity-filter-view",28),a["\u0275\u0275elementStart"](10,"section",29),a["\u0275\u0275element"](11,"mat-slide-toggle",30),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](12,"button",31),a["\u0275\u0275listener"]("click",(function(){a["\u0275\u0275restoreView"](n);var t=e.index;return a["\u0275\u0275nextContext"]().editAlias(t)})),a["\u0275\u0275pipe"](13,"async"),a["\u0275\u0275pipe"](14,"translate"),a["\u0275\u0275elementStart"](15,"mat-icon"),a["\u0275\u0275text"](16,"edit"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](17,"button",31),a["\u0275\u0275listener"]("click",(function(){a["\u0275\u0275restoreView"](n);var t=e.index;return a["\u0275\u0275nextContext"]().removeAlias(t)})),a["\u0275\u0275pipe"](18,"async"),a["\u0275\u0275pipe"](19,"translate"),a["\u0275\u0275elementStart"](20,"mat-icon"),a["\u0275\u0275text"](21,"close"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()}if(2&t){var i=e.$implicit,r=e.index,o=a["\u0275\u0275nextContext"]();a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate1"]("",r+1,"."),a["\u0275\u0275advance"](4),a["\u0275\u0275propertyInterpolate"]("placeholder",a["\u0275\u0275pipeBind1"](7,10,"entity.alias")),a["\u0275\u0275property"]("formControl",i.get("alias")),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("ngIf",i.get("alias").hasError("required")),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("formControl",i.get("filter")),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("formControl",i.get("resolveMultiple")),a["\u0275\u0275advance"](1),a["\u0275\u0275propertyInterpolate"]("matTooltip",a["\u0275\u0275pipeBind1"](14,14,"alias.edit")),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](13,12,o.isLoading$)),a["\u0275\u0275advance"](5),a["\u0275\u0275propertyInterpolate"]("matTooltip",a["\u0275\u0275pipeBind1"](19,18,"entity.remove-alias")),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](18,16,o.isLoading$))}}var _=function(t){function e(e,n,i,a,r,o,s,l,d,p){var u,f=t.call(this,e,n,r)||this;if(f.store=e,f.router=n,f.data=i,f.errorStateMatcher=a,f.dialogRef=r,f.fb=o,f.utils=s,f.translate=l,f.dialogs=d,f.dialog=p,f.aliasToWidgetsMap={},f.submitted=!1,f.title=i.customTitle?i.customTitle:"entity.aliases",f.disableAdd=f.data.disableAdd,f.allowedEntityTypes=f.data.allowedEntityTypes,i.widgets)if(f.data.isSingleWidget&&1===f.data.widgets.length){var h=f.data.widgets[0];u=[h.config.title];for(var g=0,y=Object.keys(f.data.entityAliases);g<y.length;g++){var b=y[g];f.aliasToWidgetsMap[b]=u}}else f.data.widgets.forEach((function(t){if(t.type===c.k.rpc){if(t.config.targetDeviceAliasIds&&t.config.targetDeviceAliasIds.length>0){var e=t.config.targetDeviceAliasIds[0];(u=f.aliasToWidgetsMap[e])||(u=[],f.aliasToWidgetsMap[e]=u),u.push(t.config.title)}}else f.utils.validateDatasources(t.config.datasources).forEach((function(e){e.type===c.a.entity&&e.entityAliasId&&((u=f.aliasToWidgetsMap[e.entityAliasId])||(u=[],f.aliasToWidgetsMap[e.entityAliasId]=u),u.push(t.config.title))}))}));for(var v=[],x=0,C=Object.keys(f.data.entityAliases);x<C.length;x++){b=C[x];var S=f.data.entityAliases[b];S.filter||(S.filter={resolveMultiple:!1}),Object(m.z)(S.filter.resolveMultiple)&&(S.filter.resolveMultiple=!1),v.push(f.createEntityAliasFormControl(b,S))}return f.entityAliasesFormGroup=f.fb.group({entityAliases:f.fb.array(v)}),f}return Object(i.d)(e,t),e.prototype.createEntityAliasFormControl=function(t,e){var n=this.fb.group({id:[t],alias:[e?e.alias:null,[s.Validators.required]],filter:[e?e.filter:null],resolveMultiple:[!!e&&e.filter.resolveMultiple]});return n.get("resolveMultiple").valueChanges.subscribe((function(t){n.get("filter").value.resolveMultiple=t})),n},e.prototype.entityAliasesFormArray=function(){return this.entityAliasesFormGroup.get("entityAliases")},e.prototype.ngOnInit=function(){},e.prototype.isErrorState=function(t,e){var n=this.errorStateMatcher.isErrorState(t,e),i=!!(t&&t.invalid&&this.submitted);return n||i},e.prototype.removeAlias=function(t){var e=this.entityAliasesFormGroup.get("entityAliases").value[t],n=this.aliasToWidgetsMap[e.id];if(n){for(var i="",a=0,r=n;a<r.length;a++){i+="<br/>'"+r[a]+"'"}var o=this.translate.instant("entity.unable-delete-entity-alias-text",{entityAlias:e.alias,widgetsList:i});this.dialogs.alert(this.translate.instant("entity.unable-delete-entity-alias-title"),o,this.translate.instant("action.close"),!0)}else this.entityAliasesFormGroup.get("entityAliases").removeAt(t),this.entityAliasesFormGroup.markAsDirty()},e.prototype.addAlias=function(){this.openAliasDialog(-1)},e.prototype.editAlias=function(t){this.openAliasDialog(t)},e.prototype.openAliasDialog=function(t){var e,n=this,i=-1===t,a=this.entityAliasesFormGroup.get("entityAliases").value;i||(e=a[t]),this.dialog.open(f.a,{disableClose:!0,panelClass:["tb-dialog","tb-fullscreen-dialog"],data:{isAdd:i,allowedEntityTypes:this.allowedEntityTypes,entityAliases:a,alias:i?null:Object(m.e)(e)}}).afterClosed().subscribe((function(e){if(e){if(i)n.entityAliasesFormGroup.get("entityAliases").push(n.createEntityAliasFormControl(e.id,e));else{var a=n.entityAliasesFormGroup.get("entityAliases").at(t);a.get("alias").patchValue(e.alias),a.get("filter").patchValue(e.filter),a.get("resolveMultiple").patchValue(e.filter.resolveMultiple)}n.entityAliasesFormGroup.markAsDirty()}}))},e.prototype.cancel=function(){this.dialogRef.close(null)},e.prototype.save=function(){this.submitted=!0;for(var t,e={},n={},i=!0,a=0,r=this.entityAliasesFormGroup.get("entityAliases").value;a<r.length;a++){var o=r[a],s=o.id,l=o.alias.trim(),c=o.filter;if(n[l]){i=!1,t=this.translate.instant("entity.duplicate-alias-error",{alias:l});break}if(!c||!c.type){i=!1,t=this.translate.instant("entity.missing-entity-filter-error",{alias:l});break}n[l]=l,e[s]={id:s,alias:l,filter:c}}i?this.dialogRef.close(e):this.store.dispatch(new p.b({message:t,type:"error"}))},e.\u0275fac=function(t){return new(t||e)(a["\u0275\u0275directiveInject"](h.Store),a["\u0275\u0275directiveInject"](g.Router),a["\u0275\u0275directiveInject"](o.MAT_DIALOG_DATA),a["\u0275\u0275directiveInject"](r.ErrorStateMatcher,4),a["\u0275\u0275directiveInject"](o.MatDialogRef),a["\u0275\u0275directiveInject"](s.FormBuilder),a["\u0275\u0275directiveInject"](d.a),a["\u0275\u0275directiveInject"](y.TranslateService),a["\u0275\u0275directiveInject"](u.a),a["\u0275\u0275directiveInject"](o.MatDialog))},e.\u0275cmp=a["\u0275\u0275defineComponent"]({type:e,selectors:[["tb-entity-aliases-dialog"]],features:[a["\u0275\u0275ProvidersFeature"]([{provide:r.ErrorStateMatcher,useExisting:e}]),a["\u0275\u0275InheritDefinitionFeature"]],decls:43,vars:36,consts:[[2,"width","700px",3,"formGroup","ngSubmit"],["color","primary"],["fxFlex",""],["mat-icon-button","","type","button",3,"click"],[1,"material-icons"],["color","warn","mode","indeterminate",4,"ngIf"],["style","height: 4px;",4,"ngIf"],["mat-dialog-content",""],["fxLayout","row","fxLayoutAlign","start center",1,"tb-aliases-header"],["fxFlex","5"],["fxFlex","95","fxLayout","row","fxLayoutAlign","start center"],["translate","","fxFlex","150px",1,"tb-header-label"],["translate","","fxFlex","",1,"tb-header-label",2,"padding-left","10px"],["translate","","fxFlex","120px",1,"tb-header-label",2,"padding-left","10px"],[2,"min-width","80px"],[3,"disabled"],["fxFlex","","fxLayout","row","fxLayoutAlign","start center","formArrayName","entityAliases",4,"ngFor","ngForOf"],["mat-dialog-actions",""],["mat-raised-button","","color","primary","type","button","matTooltipPosition","above",3,"fxShow","disabled","matTooltip","click"],["mat-button","","color","primary","type","button","cdkFocusInitial","",3,"disabled","click"],["mat-raised-button","","color","primary","type","submit",3,"disabled"],["color","warn","mode","indeterminate"],[2,"height","4px"],["fxFlex","","fxLayout","row","fxLayoutAlign","start center","formArrayName","entityAliases"],["fxFlex","95","fxLayout","row","fxLayoutAlign","start center",1,"mat-elevation-z4","tb-alias"],["floatLabel","always","hideRequiredMarker","","fxFlex","150px",1,"mat-block"],["matInput","","required","",3,"formControl","placeholder"],[4,"ngIf"],["fxFlex","",2,"padding-left","10px",3,"formControl"],["fxFlex","120px","fxLayout","column","fxLayoutAlign","center center",1,"tb-resolve-multiple-switch",2,"padding-left","10px"],[1,"resolve-multiple-switch",3,"formControl"],["mat-icon-button","","color","primary","type","button","matTooltipPosition","above",2,"min-width","40px",3,"disabled","matTooltip","click"]],template:function(t,e){1&t&&(a["\u0275\u0275elementStart"](0,"form",0),a["\u0275\u0275listener"]("ngSubmit",(function(){return e.save()})),a["\u0275\u0275elementStart"](1,"mat-toolbar",1),a["\u0275\u0275elementStart"](2,"h2"),a["\u0275\u0275text"](3),a["\u0275\u0275pipe"](4,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](5,"span",2),a["\u0275\u0275elementStart"](6,"button",3),a["\u0275\u0275listener"]("click",(function(){return e.cancel()})),a["\u0275\u0275elementStart"](7,"mat-icon",4),a["\u0275\u0275text"](8,"close"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275template"](9,D,1,0,"mat-progress-bar",5),a["\u0275\u0275pipe"](10,"async"),a["\u0275\u0275template"](11,k,1,0,"div",6),a["\u0275\u0275pipe"](12,"async"),a["\u0275\u0275elementStart"](13,"div",7),a["\u0275\u0275elementStart"](14,"div",8),a["\u0275\u0275element"](15,"span",9),a["\u0275\u0275elementStart"](16,"div",10),a["\u0275\u0275elementStart"](17,"span",11),a["\u0275\u0275text"](18,"alias.name"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](19,"span",12),a["\u0275\u0275text"](20,"alias.entity-filter"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](21,"span",13),a["\u0275\u0275text"](22,"alias.resolve-multiple"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](23,"span",14),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](24,"fieldset",15),a["\u0275\u0275pipe"](25,"async"),a["\u0275\u0275element"](26,"mat-divider"),a["\u0275\u0275template"](27,A,22,20,"div",16),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](28,"div",17),a["\u0275\u0275elementStart"](29,"button",18),a["\u0275\u0275listener"]("click",(function(){return e.addAlias()})),a["\u0275\u0275pipe"](30,"async"),a["\u0275\u0275pipe"](31,"translate"),a["\u0275\u0275text"](32),a["\u0275\u0275pipe"](33,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](34,"span",2),a["\u0275\u0275elementStart"](35,"button",19),a["\u0275\u0275listener"]("click",(function(){return e.cancel()})),a["\u0275\u0275pipe"](36,"async"),a["\u0275\u0275text"](37),a["\u0275\u0275pipe"](38,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](39,"button",20),a["\u0275\u0275pipe"](40,"async"),a["\u0275\u0275text"](41),a["\u0275\u0275pipe"](42,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()),2&t&&(a["\u0275\u0275property"]("formGroup",e.entityAliasesFormGroup),a["\u0275\u0275advance"](3),a["\u0275\u0275textInterpolate"](a["\u0275\u0275pipeBind1"](4,14,e.title)),a["\u0275\u0275advance"](6),a["\u0275\u0275property"]("ngIf",a["\u0275\u0275pipeBind1"](10,16,e.isLoading$)),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("ngIf",!a["\u0275\u0275pipeBind1"](12,18,e.isLoading$)),a["\u0275\u0275advance"](13),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](25,20,e.isLoading$)),a["\u0275\u0275advance"](3),a["\u0275\u0275property"]("ngForOf",e.entityAliasesFormArray().controls),a["\u0275\u0275advance"](2),a["\u0275\u0275propertyInterpolate"]("matTooltip",a["\u0275\u0275pipeBind1"](31,24,"alias.add")),a["\u0275\u0275property"]("fxShow",!e.disableAdd)("disabled",a["\u0275\u0275pipeBind1"](30,22,e.isLoading$)),a["\u0275\u0275advance"](3),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](33,26,"alias.add")," "),a["\u0275\u0275advance"](3),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](36,28,e.isLoading$)),a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](38,30,"action.cancel")," "),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](40,32,e.isLoading$)||e.entityAliasesFormGroup.invalid||!e.entityAliasesFormGroup.dirty),a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](42,34,"action.save")," "))},directives:[s["\u0275angular_packages_forms_forms_y"],s.NgControlStatusGroup,s.FormGroupDirective,b.MatToolbar,v.b,x.MatButton,C.MatIcon,S.NgIf,o.MatDialogContent,v.f,v.e,y.TranslateDirective,w.MatDivider,S.NgForOf,o.MatDialogActions,E.d,I.MatTooltip,O.MatProgressBar,s.FormArrayName,T.MatFormField,T.MatLabel,M.MatInput,s.DefaultValueAccessor,s.RequiredValidator,s.NgControlStatus,s.FormControlDirective,F.a,P.MatSlideToggle,T.MatError],pipes:[y.TranslatePipe,S.AsyncPipe],styles:["[_nghost-%COMP%]   .tb-aliases-header[_ngcontent-%COMP%]{min-height:40px;padding:0 11px;margin:5px}[_nghost-%COMP%]   .tb-aliases-header[_ngcontent-%COMP%]   .tb-header-label[_ngcontent-%COMP%]{font-size:14px;color:rgba(0,0,0,.570588)}[_nghost-%COMP%]   mat-divider[_ngcontent-%COMP%]{margin:-1px -24px}[_nghost-%COMP%]   .tb-alias[_ngcontent-%COMP%]{padding:0 0 0 10px;margin:5px}[_nghost-%COMP%]   .tb-alias[_ngcontent-%COMP%]   .tb-resolve-multiple-switch[_ngcontent-%COMP%]{padding-left:10px}[_nghost-%COMP%]   .tb-alias[_ngcontent-%COMP%]   .tb-resolve-multiple-switch[_ngcontent-%COMP%]   .resolve-multiple-switch[_ngcontent-%COMP%]{margin:0}[_nghost-%COMP%]     .mat-dialog-content{padding-top:0!important;padding-bottom:0!important}"]}),e}(l.a);!function(){a["\u0275setClassMetadata"](_,[{type:a.Component,args:[{selector:"tb-entity-aliases-dialog",templateUrl:"./entity-aliases-dialog.component.html",providers:[{provide:r.ErrorStateMatcher,useExisting:_}],styleUrls:["./entity-aliases-dialog.component.scss"]}]}],(function(){return[{type:h.Store},{type:g.Router},{type:void 0,decorators:[{type:a.Inject,args:[o.MAT_DIALOG_DATA]}]},{type:r.ErrorStateMatcher,decorators:[{type:a.SkipSelf}]},{type:o.MatDialogRef},{type:s.FormBuilder},{type:d.a},{type:y.TranslateService},{type:u.a},{type:o.MatDialog}]}),null)}()},EYOO:function(t,e,n){"use strict";n.d(e,"a",(function(){return v})),n.d(e,"b",(function(){return x}));var i=n("mrSG"),a=n("fXoL"),r=n("RxGS"),o=n("0lYY"),s=n("rDax"),l=n("l7P3"),c=n("3Pt+"),d=n("XiUz"),p=n("kmnG"),u=n("sYmb"),m=n("d3UM"),f=n("ofXK"),h=n("bSwM"),g=n("FKr1");function y(t,e){if(1&t&&(a["\u0275\u0275elementStart"](0,"mat-option",15),a["\u0275\u0275text"](1),a["\u0275\u0275pipe"](2,"translate"),a["\u0275\u0275elementEnd"]()),2&t){var n=e.$implicit,i=a["\u0275\u0275nextContext"]();a["\u0275\u0275property"]("value",n),a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](2,2,i.legendDirectionTranslations.get(i.legendDirection[n]))," ")}}function b(t,e){if(1&t&&(a["\u0275\u0275elementStart"](0,"mat-option",16),a["\u0275\u0275text"](1),a["\u0275\u0275pipe"](2,"translate"),a["\u0275\u0275elementEnd"]()),2&t){var n=e.$implicit,i=a["\u0275\u0275nextContext"]();a["\u0275\u0275property"]("value",n)("disabled",i.legendConfigForm.get("direction").value===i.legendDirection.row&&(n===i.legendPosition.left||n===i.legendPosition.right)),a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](2,3,i.legendPositionTranslations.get(i.legendPosition[n]))," ")}}var v=new a.InjectionToken("LegendConfigPanelData"),x=function(t){function e(e,n,i,a,r){var s=t.call(this,i)||this;return s.data=e,s.overlayRef=n,s.store=i,s.fb=a,s.viewContainerRef=r,s.legendDirection=o.b,s.legendDirections=Object.keys(o.b),s.legendDirectionTranslations=o.g,s.legendPosition=o.c,s.legendPositions=Object.keys(o.c),s.legendPositionTranslations=o.h,s}return Object(i.d)(e,t),e.prototype.ngOnInit=function(){var t=this;this.legendConfigForm=this.fb.group({direction:[this.data.legendConfig.direction,[]],position:[this.data.legendConfig.position,[]],sortDataKeys:[this.data.legendConfig.sortDataKeys,[]],showMin:[this.data.legendConfig.showMin,[]],showMax:[this.data.legendConfig.showMax,[]],showAvg:[this.data.legendConfig.showAvg,[]],showTotal:[this.data.legendConfig.showTotal,[]]}),this.legendConfigForm.get("direction").valueChanges.subscribe((function(e){t.onDirectionChanged(e)})),this.onDirectionChanged(this.data.legendConfig.direction),this.legendConfigForm.valueChanges.subscribe((function(){t.update()}))},e.prototype.onDirectionChanged=function(t){if(t===o.b.row){var e=this.legendConfigForm.get("position").value;e!==o.c.bottom&&e!==o.c.top&&(e=o.c.bottom),this.legendConfigForm.patchValue({position:e},{emitEvent:!1})}},e.prototype.update=function(){var t=this.legendConfigForm.value;this.data.legendConfigUpdated(t)},e.\u0275fac=function(t){return new(t||e)(a["\u0275\u0275directiveInject"](v),a["\u0275\u0275directiveInject"](s.OverlayRef),a["\u0275\u0275directiveInject"](l.Store),a["\u0275\u0275directiveInject"](c.FormBuilder),a["\u0275\u0275directiveInject"](a.ViewContainerRef))},e.\u0275cmp=a["\u0275\u0275defineComponent"]({type:e,selectors:[["tb-legend-config-panel"]],features:[a["\u0275\u0275InheritDefinitionFeature"]],decls:31,vars:21,consts:[[3,"formGroup"],[3,"disabled"],[1,"mat-content",2,"height","100%"],[1,"mat-padding"],["fxLayout","column"],["translate",""],["matInput","","formControlName","direction",2,"min-width","150px"],[3,"value",4,"ngFor","ngForOf"],["matInput","","formControlName","position",2,"min-width","150px"],[3,"value","disabled",4,"ngFor","ngForOf"],["formControlName","sortDataKeys"],["formControlName","showMin"],["formControlName","showMax"],["formControlName","showAvg"],["formControlName","showTotal"],[3,"value"],[3,"value","disabled"]],template:function(t,e){1&t&&(a["\u0275\u0275elementStart"](0,"form",0),a["\u0275\u0275elementStart"](1,"fieldset",1),a["\u0275\u0275pipe"](2,"async"),a["\u0275\u0275elementStart"](3,"div",2),a["\u0275\u0275elementStart"](4,"div",3),a["\u0275\u0275elementStart"](5,"section",4),a["\u0275\u0275elementStart"](6,"mat-form-field"),a["\u0275\u0275elementStart"](7,"mat-label",5),a["\u0275\u0275text"](8,"legend.direction"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](9,"mat-select",6),a["\u0275\u0275template"](10,y,3,4,"mat-option",7),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](11,"mat-form-field"),a["\u0275\u0275elementStart"](12,"mat-label",5),a["\u0275\u0275text"](13,"legend.position"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](14,"mat-select",8),a["\u0275\u0275template"](15,b,3,5,"mat-option",9),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](16,"mat-checkbox",10),a["\u0275\u0275text"](17),a["\u0275\u0275pipe"](18,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](19,"mat-checkbox",11),a["\u0275\u0275text"](20),a["\u0275\u0275pipe"](21,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](22,"mat-checkbox",12),a["\u0275\u0275text"](23),a["\u0275\u0275pipe"](24,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](25,"mat-checkbox",13),a["\u0275\u0275text"](26),a["\u0275\u0275pipe"](27,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](28,"mat-checkbox",14),a["\u0275\u0275text"](29),a["\u0275\u0275pipe"](30,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()),2&t&&(a["\u0275\u0275property"]("formGroup",e.legendConfigForm),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](2,9,e.isLoading$)),a["\u0275\u0275advance"](9),a["\u0275\u0275property"]("ngForOf",e.legendDirections),a["\u0275\u0275advance"](5),a["\u0275\u0275property"]("ngForOf",e.legendPositions),a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](18,11,"legend.sort-legend")," "),a["\u0275\u0275advance"](3),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](21,13,"legend.show-min")," "),a["\u0275\u0275advance"](3),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](24,15,"legend.show-max")," "),a["\u0275\u0275advance"](3),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](27,17,"legend.show-avg")," "),a["\u0275\u0275advance"](3),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](30,19,"legend.show-total")," "))},directives:[c["\u0275angular_packages_forms_forms_y"],c.NgControlStatusGroup,c.FormGroupDirective,d.f,p.MatFormField,p.MatLabel,u.TranslateDirective,m.MatSelect,c.NgControlStatus,c.FormControlName,f.NgForOf,h.MatCheckbox,g.MatOption],pipes:[f.AsyncPipe,u.TranslatePipe],styles:["[_nghost-%COMP%]{width:100%}[_nghost-%COMP%], [_nghost-%COMP%]   fieldset[_ngcontent-%COMP%], [_nghost-%COMP%]   form[_ngcontent-%COMP%]{height:100%}[_nghost-%COMP%]   .mat-content[_ngcontent-%COMP%]{overflow:hidden;background-color:#fff}[_nghost-%COMP%]   .mat-padding[_ngcontent-%COMP%]{padding:16px}"]}),e}(r.a);!function(){a["\u0275setClassMetadata"](x,[{type:a.Component,args:[{selector:"tb-legend-config-panel",templateUrl:"./legend-config-panel.component.html",styleUrls:["./legend-config-panel.component.scss"]}]}],(function(){return[{type:void 0,decorators:[{type:a.Inject,args:[v]}]},{type:s.OverlayRef},{type:l.Store},{type:c.FormBuilder},{type:a.ViewContainerRef}]}),null)}()},F4h8:function(t,e,n){"use strict";n.d(e,"a",(function(){return ve}));var i={};n.r(i),n.d(i,"MatBadge",(function(){return P})),n.d(i,"MatBadgeModule",(function(){return D}));var a={};n.r(a),n.d(a,"MAT_BOTTOM_SHEET_DATA",(function(){return N})),n.d(a,"MAT_BOTTOM_SHEET_DEFAULT_OPTIONS",(function(){return z})),n.d(a,"MatBottomSheet",(function(){return K})),n.d(a,"MatBottomSheetConfig",(function(){return G})),n.d(a,"MatBottomSheetContainer",(function(){return U})),n.d(a,"MatBottomSheetModule",(function(){return q})),n.d(a,"MatBottomSheetRef",(function(){return W})),n.d(a,"matBottomSheetAnimations",(function(){return B}));var r={};n.r(r),n.d(r,"MAT_BUTTON_TOGGLE_DEFAULT_OPTIONS",(function(){return X})),n.d(r,"MAT_BUTTON_TOGGLE_GROUP",(function(){return Y})),n.d(r,"MAT_BUTTON_TOGGLE_GROUP_VALUE_ACCESSOR",(function(){return J})),n.d(r,"MatButtonToggle",(function(){return nt})),n.d(r,"MatButtonToggleChange",(function(){return tt})),n.d(r,"MatButtonToggleGroup",(function(){return et})),n.d(r,"MatButtonToggleModule",(function(){return it}));var o={};n.r(o),n.d(o,"MatNestedTreeNode",(function(){return Zt})),n.d(o,"MatTree",(function(){return ie})),n.d(o,"MatTreeFlatDataSource",(function(){return ce})),n.d(o,"MatTreeFlattener",(function(){return le})),n.d(o,"MatTreeModule",(function(){return se})),n.d(o,"MatTreeNestedDataSource",(function(){return de})),n.d(o,"MatTreeNode",(function(){return Xt})),n.d(o,"MatTreeNodeDef",(function(){return Yt})),n.d(o,"MatTreeNodeOutlet",(function(){return ne})),n.d(o,"MatTreeNodePadding",(function(){return te})),n.d(o,"MatTreeNodeToggle",(function(){return re}));var s={};n.r(s),n.d(s,"HomeComponentsModule",(function(){return ye.a}));var l=n("R0Ic"),c=n("fXoL"),d=n("ofXK"),p=n("3Pt+"),u=n("YUcS"),m=n("jhN1"),f=n("tyNb"),h=n("8LU1"),g=n("0EQZ"),y=n("FtGj"),b=n("0MNC"),v=n("rDax"),x=n("+rOU"),C=n("/1cH"),S=n("vuIU"),w=n("Ji7U"),E=n("LK+K"),I=n("1OyB"),O=n("FKr1"),T=n("u47x"),M=n("R1ws"),F=0,P=function(t){Object(w.a)(n,t);var e=Object(E.a)(n);function n(t,i,a,r,o){var s;return Object(I.a)(this,n),(s=e.call(this))._ngZone=t,s._elementRef=i,s._ariaDescriber=a,s._renderer=r,s._animationMode=o,s._hasContent=!1,s._color="primary",s._overlap=!0,s.position="above after",s.size="medium",s._id=F++,0,s}return Object(S.a)(n,[{key:"isAbove",value:function(){return-1===this.position.indexOf("below")}},{key:"isAfter",value:function(){return-1===this.position.indexOf("before")}},{key:"ngOnChanges",value:function(t){var e=t.content;if(e){var n=e.currentValue;this._hasContent=null!=n&&"".concat(n).trim().length>0,this._updateTextContent()}}},{key:"ngOnDestroy",value:function(){var t=this._badgeElement;t&&(this.description&&this._ariaDescriber.removeDescription(t,this.description),this._renderer.destroyNode&&this._renderer.destroyNode(t))}},{key:"getBadgeElement",value:function(){return this._badgeElement}},{key:"_updateTextContent",value:function(){return this._badgeElement?this._badgeElement.textContent=this._stringifyContent():this._badgeElement=this._createBadgeElement(),this._badgeElement}},{key:"_createBadgeElement",value:function(){var t=this._renderer.createElement("span");return this._clearExistingBadges("mat-badge-content"),t.setAttribute("id","mat-badge-content-".concat(this._id)),t.classList.add("mat-badge-content"),t.textContent=this._stringifyContent(),"NoopAnimations"===this._animationMode&&t.classList.add("_mat-animation-noopable"),this.description&&t.setAttribute("aria-label",this.description),this._elementRef.nativeElement.appendChild(t),"function"==typeof requestAnimationFrame&&"NoopAnimations"!==this._animationMode?this._ngZone.runOutsideAngular((function(){requestAnimationFrame((function(){t.classList.add("mat-badge-active")}))})):t.classList.add("mat-badge-active"),t}},{key:"_updateHostAriaDescription",value:function(t,e){var n=this._updateTextContent();e&&this._ariaDescriber.removeDescription(n,e),t&&this._ariaDescriber.describe(n,t)}},{key:"_setColor",value:function(t){if(t!==this._color){var e=this._elementRef.nativeElement.classList;this._color&&e.remove("mat-badge-".concat(this._color)),t&&e.add("mat-badge-".concat(t))}}},{key:"_clearExistingBadges",value:function(t){for(var e=this._elementRef.nativeElement,n=e.children.length;n--;){var i=e.children[n];i.classList.contains(t)&&e.removeChild(i)}}},{key:"_stringifyContent",value:function(){var t=this.content;return null==t?"":"".concat(t)}},{key:"color",get:function(){return this._color},set:function(t){this._setColor(t),this._color=t}},{key:"overlap",get:function(){return this._overlap},set:function(t){this._overlap=Object(h.coerceBooleanProperty)(t)}},{key:"description",get:function(){return this._description},set:function(t){if(t!==this._description){var e=this._badgeElement;this._updateHostAriaDescription(t,this._description),this._description=t,e&&(t?e.setAttribute("aria-label",t):e.removeAttribute("aria-label"))}}},{key:"hidden",get:function(){return this._hidden},set:function(t){this._hidden=Object(h.coerceBooleanProperty)(t)}}]),n}(Object(O.mixinDisabled)((function t(){Object(I.a)(this,t)})));P.\u0275fac=function(t){return new(t||P)(c["\u0275\u0275directiveInject"](c.NgZone),c["\u0275\u0275directiveInject"](c.ElementRef),c["\u0275\u0275directiveInject"](T.c),c["\u0275\u0275directiveInject"](c.Renderer2),c["\u0275\u0275directiveInject"](M.a,8))},P.\u0275dir=c["\u0275\u0275defineDirective"]({type:P,selectors:[["","matBadge",""]],hostAttrs:[1,"mat-badge"],hostVars:20,hostBindings:function(t,e){2&t&&c["\u0275\u0275classProp"]("mat-badge-overlap",e.overlap)("mat-badge-above",e.isAbove())("mat-badge-below",!e.isAbove())("mat-badge-before",!e.isAfter())("mat-badge-after",e.isAfter())("mat-badge-small","small"===e.size)("mat-badge-medium","medium"===e.size)("mat-badge-large","large"===e.size)("mat-badge-hidden",e.hidden||!e._hasContent)("mat-badge-disabled",e.disabled)},inputs:{disabled:["matBadgeDisabled","disabled"],position:["matBadgePosition","position"],size:["matBadgeSize","size"],color:["matBadgeColor","color"],overlap:["matBadgeOverlap","overlap"],description:["matBadgeDescription","description"],hidden:["matBadgeHidden","hidden"],content:["matBadge","content"]},features:[c["\u0275\u0275InheritDefinitionFeature"],c["\u0275\u0275NgOnChangesFeature"]]}),P.ctorParameters=function(){return[{type:c.NgZone},{type:c.ElementRef},{type:T.c},{type:c.Renderer2},{type:String,decorators:[{type:c.Optional},{type:c.Inject,args:[M.a]}]}]},P.propDecorators={color:[{type:c.Input,args:["matBadgeColor"]}],overlap:[{type:c.Input,args:["matBadgeOverlap"]}],position:[{type:c.Input,args:["matBadgePosition"]}],content:[{type:c.Input,args:["matBadge"]}],description:[{type:c.Input,args:["matBadgeDescription"]}],size:[{type:c.Input,args:["matBadgeSize"]}],hidden:[{type:c.Input,args:["matBadgeHidden"]}]};var D=function t(){Object(I.a)(this,t)};D.\u0275mod=c["\u0275\u0275defineNgModule"]({type:D}),D.\u0275inj=c["\u0275\u0275defineInjector"]({factory:function(t){return new(t||D)},imports:[[T.a,O.MatCommonModule],O.MatCommonModule]}),("undefined"==typeof ngJitMode||ngJitMode)&&c["\u0275\u0275setNgModuleScope"](D,{declarations:function(){return[P]},imports:function(){return[T.a,O.MatCommonModule]},exports:function(){return[P,O.MatCommonModule]}});var k=n("cH1L"),j=n("XNiG"),A=n("VRyK"),_=n("LRne"),L=n("pLZG"),V=n("IzEk");function R(t,e){}var N=new c.InjectionToken("MatBottomSheetData"),G=function t(){Object(I.a)(this,t),this.data=null,this.hasBackdrop=!0,this.disableClose=!1,this.ariaLabel=null,this.closeOnNavigation=!0,this.autoFocus=!1,this.restoreFocus=!0},B={bottomSheetState:Object(l.trigger)("state",[Object(l.state)("void, hidden",Object(l.style)({transform:"translateY(100%)"})),Object(l.state)("visible",Object(l.style)({transform:"translateY(0%)"})),Object(l.transition)("visible => void, visible => hidden",Object(l.animate)("".concat(O.AnimationDurations.COMPLEX," ").concat(O.AnimationCurves.ACCELERATION_CURVE))),Object(l.transition)("void => visible",Object(l.animate)("".concat(O.AnimationDurations.EXITING," ").concat(O.AnimationCurves.DECELERATION_CURVE)))])},U=function(t){Object(w.a)(n,t);var e=Object(E.a)(n);function n(t,i,a,r,o,s){var l;return Object(I.a)(this,n),(l=e.call(this))._elementRef=t,l._changeDetectorRef=i,l._focusTrapFactory=a,l.bottomSheetConfig=s,l._animationState="void",l._animationStateChanged=new c.EventEmitter,l._elementFocusedBeforeOpened=null,l.attachDomPortal=function(t){return l._validatePortalAttached(),l._setPanelClass(),l._savePreviouslyFocusedElement(),l._portalOutlet.attachDomPortal(t)},l._document=o,l._breakpointSubscription=r.observe([b.Breakpoints.Medium,b.Breakpoints.Large,b.Breakpoints.XLarge]).subscribe((function(){l._toggleClass("mat-bottom-sheet-container-medium",r.isMatched(b.Breakpoints.Medium)),l._toggleClass("mat-bottom-sheet-container-large",r.isMatched(b.Breakpoints.Large)),l._toggleClass("mat-bottom-sheet-container-xlarge",r.isMatched(b.Breakpoints.XLarge))})),l}return Object(S.a)(n,[{key:"attachComponentPortal",value:function(t){return this._validatePortalAttached(),this._setPanelClass(),this._savePreviouslyFocusedElement(),this._portalOutlet.attachComponentPortal(t)}},{key:"attachTemplatePortal",value:function(t){return this._validatePortalAttached(),this._setPanelClass(),this._savePreviouslyFocusedElement(),this._portalOutlet.attachTemplatePortal(t)}},{key:"enter",value:function(){this._destroyed||(this._animationState="visible",this._changeDetectorRef.detectChanges())}},{key:"exit",value:function(){this._destroyed||(this._animationState="hidden",this._changeDetectorRef.markForCheck())}},{key:"ngOnDestroy",value:function(){this._breakpointSubscription.unsubscribe(),this._destroyed=!0}},{key:"_onAnimationDone",value:function(t){"hidden"===t.toState?this._restoreFocus():"visible"===t.toState&&this._trapFocus(),this._animationStateChanged.emit(t)}},{key:"_onAnimationStart",value:function(t){this._animationStateChanged.emit(t)}},{key:"_toggleClass",value:function(t,e){var n=this._elementRef.nativeElement.classList;e?n.add(t):n.remove(t)}},{key:"_validatePortalAttached",value:function(){if(this._portalOutlet.hasAttached()&&(0,0))throw Error("Attempting to attach bottom sheet content after content is already attached")}},{key:"_setPanelClass",value:function(){var t=this._elementRef.nativeElement,e=this.bottomSheetConfig.panelClass;Array.isArray(e)?e.forEach((function(e){return t.classList.add(e)})):e&&t.classList.add(e)}},{key:"_trapFocus",value:function(){var t=this._elementRef.nativeElement;if(this._focusTrap||(this._focusTrap=this._focusTrapFactory.create(t)),this.bottomSheetConfig.autoFocus)this._focusTrap.focusInitialElementWhenReady();else{var e=this._document.activeElement;e===t||t.contains(e)||t.focus()}}},{key:"_restoreFocus",value:function(){var t=this._elementFocusedBeforeOpened;if(this.bottomSheetConfig.restoreFocus&&t&&"function"==typeof t.focus){var e=this._document.activeElement,n=this._elementRef.nativeElement;e&&e!==this._document.body&&e!==n&&!n.contains(e)||t.focus()}this._focusTrap&&this._focusTrap.destroy()}},{key:"_savePreviouslyFocusedElement",value:function(){var t=this;this._elementFocusedBeforeOpened=this._document.activeElement,this._elementRef.nativeElement.focus&&Promise.resolve().then((function(){return t._elementRef.nativeElement.focus()}))}}]),n}(x.BasePortalOutlet);U.\u0275fac=function(t){return new(t||U)(c["\u0275\u0275directiveInject"](c.ElementRef),c["\u0275\u0275directiveInject"](c.ChangeDetectorRef),c["\u0275\u0275directiveInject"](T.i),c["\u0275\u0275directiveInject"](b.BreakpointObserver),c["\u0275\u0275directiveInject"](d.DOCUMENT,8),c["\u0275\u0275directiveInject"](G))},U.\u0275cmp=c["\u0275\u0275defineComponent"]({type:U,selectors:[["mat-bottom-sheet-container"]],viewQuery:function(t,e){var n;(1&t&&c["\u0275\u0275staticViewQuery"](x.CdkPortalOutlet,!0),2&t)&&(c["\u0275\u0275queryRefresh"](n=c["\u0275\u0275loadQuery"]())&&(e._portalOutlet=n.first))},hostAttrs:["tabindex","-1","role","dialog","aria-modal","true",1,"mat-bottom-sheet-container"],hostVars:2,hostBindings:function(t,e){1&t&&c["\u0275\u0275syntheticHostListener"]("@state.start",(function(t){return e._onAnimationStart(t)}))("@state.done",(function(t){return e._onAnimationDone(t)})),2&t&&(c["\u0275\u0275attribute"]("aria-label",null==e.bottomSheetConfig?null:e.bottomSheetConfig.ariaLabel),c["\u0275\u0275syntheticHostProperty"]("@state",e._animationState))},features:[c["\u0275\u0275InheritDefinitionFeature"]],decls:1,vars:0,consts:[["cdkPortalOutlet",""]],template:function(t,e){1&t&&c["\u0275\u0275template"](0,R,0,0,"ng-template",0)},directives:[x.CdkPortalOutlet],styles:[".mat-bottom-sheet-container{padding:8px 16px;min-width:100vw;box-sizing:border-box;display:block;outline:0;max-height:80vh;overflow:auto}.cdk-high-contrast-active .mat-bottom-sheet-container{outline:1px solid}.mat-bottom-sheet-container-xlarge,.mat-bottom-sheet-container-large,.mat-bottom-sheet-container-medium{border-top-left-radius:4px;border-top-right-radius:4px}.mat-bottom-sheet-container-medium{min-width:384px;max-width:calc(100vw - 128px)}.mat-bottom-sheet-container-large{min-width:512px;max-width:calc(100vw - 256px)}.mat-bottom-sheet-container-xlarge{min-width:576px;max-width:calc(100vw - 384px)}\n"],encapsulation:2,data:{animation:[B.bottomSheetState]},changeDetection:0}),U.ctorParameters=function(){return[{type:c.ElementRef},{type:c.ChangeDetectorRef},{type:T.i},{type:b.BreakpointObserver},{type:void 0,decorators:[{type:c.Optional},{type:c.Inject,args:[d.DOCUMENT]}]},{type:G}]},U.propDecorators={_portalOutlet:[{type:c.ViewChild,args:[x.CdkPortalOutlet,{static:!0}]}]};var q=function t(){Object(I.a)(this,t)};q.\u0275mod=c["\u0275\u0275defineNgModule"]({type:q}),q.\u0275inj=c["\u0275\u0275defineInjector"]({factory:function(t){return new(t||q)},imports:[[v.OverlayModule,O.MatCommonModule,x.PortalModule],O.MatCommonModule]}),("undefined"==typeof ngJitMode||ngJitMode)&&c["\u0275\u0275setNgModuleScope"](q,{declarations:function(){return[U]},imports:function(){return[v.OverlayModule,O.MatCommonModule,x.PortalModule]},exports:function(){return[U,O.MatCommonModule]}});var W=function(){function t(e,n,i){var a=this;Object(I.a)(this,t),this._overlayRef=n,this._afterDismissed=new j.b,this._afterOpened=new j.b,this.containerInstance=e,this.disableClose=e.bottomSheetConfig.disableClose,e._animationStateChanged.pipe(Object(L.a)((function(t){return"done"===t.phaseName&&"visible"===t.toState})),Object(V.a)(1)).subscribe((function(){a._afterOpened.next(),a._afterOpened.complete()})),e._animationStateChanged.pipe(Object(L.a)((function(t){return"done"===t.phaseName&&"hidden"===t.toState})),Object(V.a)(1)).subscribe((function(){clearTimeout(a._closeFallbackTimeout),n.dispose()})),n.detachments().pipe(Object(V.a)(1)).subscribe((function(){a._afterDismissed.next(a._result),a._afterDismissed.complete()})),Object(A.a)(n.backdropClick(),n.keydownEvents().pipe(Object(L.a)((function(t){return t.keyCode===y.ESCAPE})))).subscribe((function(t){a.disableClose||"keydown"===t.type&&Object(y.hasModifierKey)(t)||(t.preventDefault(),a.dismiss())}))}return Object(S.a)(t,[{key:"dismiss",value:function(t){var e=this;this._afterDismissed.closed||(this.containerInstance._animationStateChanged.pipe(Object(L.a)((function(t){return"start"===t.phaseName})),Object(V.a)(1)).subscribe((function(t){e._closeFallbackTimeout=setTimeout((function(){e._overlayRef.dispose()}),t.totalTime+100),e._overlayRef.detachBackdrop()})),this._result=t,this.containerInstance.exit())}},{key:"afterDismissed",value:function(){return this._afterDismissed}},{key:"afterOpened",value:function(){return this._afterOpened}},{key:"backdropClick",value:function(){return this._overlayRef.backdropClick()}},{key:"keydownEvents",value:function(){return this._overlayRef.keydownEvents()}}]),t}(),z=new c.InjectionToken("mat-bottom-sheet-default-options"),K=function(){function t(e,n,i,a,r){Object(I.a)(this,t),this._overlay=e,this._injector=n,this._parentBottomSheet=i,this._location=a,this._defaultOptions=r,this._bottomSheetRefAtThisLevel=null}return Object(S.a)(t,[{key:"open",value:function(t,e){var n=this,i=function(t,e){return Object.assign(Object.assign({},t),e)}(this._defaultOptions||new G,e),a=this._createOverlay(i),r=this._attachContainer(a,i),o=new W(r,a,this._location);if(t instanceof c.TemplateRef)r.attachTemplatePortal(new x.TemplatePortal(t,null,{$implicit:i.data,bottomSheetRef:o}));else{var s=new x.ComponentPortal(t,void 0,this._createInjector(i,o)),l=r.attachComponentPortal(s);o.instance=l.instance}return o.afterDismissed().subscribe((function(){n._openedBottomSheetRef==o&&(n._openedBottomSheetRef=null)})),this._openedBottomSheetRef?(this._openedBottomSheetRef.afterDismissed().subscribe((function(){return o.containerInstance.enter()})),this._openedBottomSheetRef.dismiss()):o.containerInstance.enter(),this._openedBottomSheetRef=o,o}},{key:"dismiss",value:function(t){this._openedBottomSheetRef&&this._openedBottomSheetRef.dismiss(t)}},{key:"ngOnDestroy",value:function(){this._bottomSheetRefAtThisLevel&&this._bottomSheetRefAtThisLevel.dismiss()}},{key:"_attachContainer",value:function(t,e){var n=e&&e.viewContainerRef&&e.viewContainerRef.injector,i=c.Injector.create({parent:n||this._injector,providers:[{provide:G,useValue:e}]}),a=new x.ComponentPortal(U,e.viewContainerRef,i);return t.attach(a).instance}},{key:"_createOverlay",value:function(t){var e=new v.OverlayConfig({direction:t.direction,hasBackdrop:t.hasBackdrop,disposeOnNavigation:t.closeOnNavigation,maxWidth:"100%",scrollStrategy:t.scrollStrategy||this._overlay.scrollStrategies.block(),positionStrategy:this._overlay.position().global().centerHorizontally().bottom("0")});return t.backdropClass&&(e.backdropClass=t.backdropClass),this._overlay.create(e)}},{key:"_createInjector",value:function(t,e){var n=t&&t.viewContainerRef&&t.viewContainerRef.injector,i=[{provide:W,useValue:e},{provide:N,useValue:t.data}];return!t.direction||n&&n.get(k.c,null)||i.push({provide:k.c,useValue:{value:t.direction,change:Object(_.a)()}}),c.Injector.create({parent:n||this._injector,providers:i})}},{key:"_openedBottomSheetRef",get:function(){var t=this._parentBottomSheet;return t?t._openedBottomSheetRef:this._bottomSheetRefAtThisLevel},set:function(t){this._parentBottomSheet?this._parentBottomSheet._openedBottomSheetRef=t:this._bottomSheetRefAtThisLevel=t}}]),t}();K.\u0275fac=function(t){return new(t||K)(c["\u0275\u0275inject"](v.Overlay),c["\u0275\u0275inject"](c.Injector),c["\u0275\u0275inject"](K,12),c["\u0275\u0275inject"](d.Location,8),c["\u0275\u0275inject"](z,8))},K.\u0275prov=Object(c["\u0275\u0275defineInjectable"])({factory:function(){return new K(Object(c["\u0275\u0275inject"])(v.Overlay),Object(c["\u0275\u0275inject"])(c.INJECTOR),Object(c["\u0275\u0275inject"])(K,12),Object(c["\u0275\u0275inject"])(d.Location,8),Object(c["\u0275\u0275inject"])(z,8))},token:K,providedIn:q}),K.ctorParameters=function(){return[{type:v.Overlay},{type:c.Injector},{type:K,decorators:[{type:c.Optional},{type:c.SkipSelf}]},{type:d.Location,decorators:[{type:c.Optional}]},{type:G,decorators:[{type:c.Optional},{type:c.Inject,args:[z]}]}]};var H=n("bTqV"),$=n("KQm4"),Q=["button"],X=new c.InjectionToken("MAT_BUTTON_TOGGLE_DEFAULT_OPTIONS"),Y=new c.InjectionToken("MatButtonToggleGroup"),J={provide:p.NG_VALUE_ACCESSOR,useExisting:Object(c.forwardRef)((function(){return et})),multi:!0},Z=0,tt=function t(e,n){Object(I.a)(this,t),this.source=e,this.value=n},et=function(){function t(e,n){Object(I.a)(this,t),this._changeDetector=e,this._vertical=!1,this._multiple=!1,this._disabled=!1,this._controlValueAccessorChangeFn=function(){},this._onTouched=function(){},this._name="mat-button-toggle-group-".concat(Z++),this.valueChange=new c.EventEmitter,this.change=new c.EventEmitter,this.appearance=n&&n.appearance?n.appearance:"standard"}return Object(S.a)(t,[{key:"ngOnInit",value:function(){this._selectionModel=new g.SelectionModel(this.multiple,void 0,!1)}},{key:"ngAfterContentInit",value:function(){var t;(t=this._selectionModel).select.apply(t,Object($.a)(this._buttonToggles.filter((function(t){return t.checked}))))}},{key:"writeValue",value:function(t){this.value=t,this._changeDetector.markForCheck()}},{key:"registerOnChange",value:function(t){this._controlValueAccessorChangeFn=t}},{key:"registerOnTouched",value:function(t){this._onTouched=t}},{key:"setDisabledState",value:function(t){this.disabled=t}},{key:"_emitChangeEvent",value:function(){var t=this.selected,e=Array.isArray(t)?t[t.length-1]:t,n=new tt(e,this.value);this._controlValueAccessorChangeFn(n.value),this.change.emit(n)}},{key:"_syncButtonToggle",value:function(t,e){var n=this,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];this.multiple||!this.selected||t.checked||(this.selected.checked=!1),this._selectionModel?e?this._selectionModel.select(t):this._selectionModel.deselect(t):a=!0,a?Promise.resolve().then((function(){return n._updateModelValue(i)})):this._updateModelValue(i)}},{key:"_isSelected",value:function(t){return this._selectionModel&&this._selectionModel.isSelected(t)}},{key:"_isPrechecked",value:function(t){return void 0!==this._rawValue&&(this.multiple&&Array.isArray(this._rawValue)?this._rawValue.some((function(e){return null!=t.value&&e===t.value})):t.value===this._rawValue)}},{key:"_setSelectionByValue",value:function(t){var e=this;if(this._rawValue=t,this._buttonToggles)if(this.multiple&&t){if(!Array.isArray(t)&&(0,0))throw Error("Value must be an array in multiple-selection mode.");this._clearSelection(),t.forEach((function(t){return e._selectValue(t)}))}else this._clearSelection(),this._selectValue(t)}},{key:"_clearSelection",value:function(){this._selectionModel.clear(),this._buttonToggles.forEach((function(t){return t.checked=!1}))}},{key:"_selectValue",value:function(t){var e=this._buttonToggles.find((function(e){return null!=e.value&&e.value===t}));e&&(e.checked=!0,this._selectionModel.select(e))}},{key:"_updateModelValue",value:function(t){t&&this._emitChangeEvent(),this.valueChange.emit(this.value)}},{key:"name",get:function(){return this._name},set:function(t){var e=this;this._name=t,this._buttonToggles&&this._buttonToggles.forEach((function(t){t.name=e._name,t._markForCheck()}))}},{key:"vertical",get:function(){return this._vertical},set:function(t){this._vertical=Object(h.coerceBooleanProperty)(t)}},{key:"value",get:function(){var t=this._selectionModel?this._selectionModel.selected:[];return this.multiple?t.map((function(t){return t.value})):t[0]?t[0].value:void 0},set:function(t){this._setSelectionByValue(t),this.valueChange.emit(this.value)}},{key:"selected",get:function(){var t=this._selectionModel?this._selectionModel.selected:[];return this.multiple?t:t[0]||null}},{key:"multiple",get:function(){return this._multiple},set:function(t){this._multiple=Object(h.coerceBooleanProperty)(t)}},{key:"disabled",get:function(){return this._disabled},set:function(t){this._disabled=Object(h.coerceBooleanProperty)(t),this._buttonToggles&&this._buttonToggles.forEach((function(t){return t._markForCheck()}))}}]),t}();et.\u0275fac=function(t){return new(t||et)(c["\u0275\u0275directiveInject"](c.ChangeDetectorRef),c["\u0275\u0275directiveInject"](X,8))},et.\u0275dir=c["\u0275\u0275defineDirective"]({type:et,selectors:[["mat-button-toggle-group"]],contentQueries:function(t,e,n){var i;(1&t&&c["\u0275\u0275contentQuery"](n,nt,!0),2&t)&&(c["\u0275\u0275queryRefresh"](i=c["\u0275\u0275loadQuery"]())&&(e._buttonToggles=i))},hostAttrs:["role","group",1,"mat-button-toggle-group"],hostVars:5,hostBindings:function(t,e){2&t&&(c["\u0275\u0275attribute"]("aria-disabled",e.disabled),c["\u0275\u0275classProp"]("mat-button-toggle-vertical",e.vertical)("mat-button-toggle-group-appearance-standard","standard"===e.appearance))},inputs:{appearance:"appearance",name:"name",vertical:"vertical",value:"value",multiple:"multiple",disabled:"disabled"},outputs:{valueChange:"valueChange",change:"change"},exportAs:["matButtonToggleGroup"],features:[c["\u0275\u0275ProvidersFeature"]([J,{provide:Y,useExisting:et}])]}),et.ctorParameters=function(){return[{type:c.ChangeDetectorRef},{type:void 0,decorators:[{type:c.Optional},{type:c.Inject,args:[X]}]}]},et.propDecorators={_buttonToggles:[{type:c.ContentChildren,args:[Object(c.forwardRef)((function(){return nt})),{descendants:!0}]}],appearance:[{type:c.Input}],name:[{type:c.Input}],vertical:[{type:c.Input}],value:[{type:c.Input}],valueChange:[{type:c.Output}],multiple:[{type:c.Input}],disabled:[{type:c.Input}],change:[{type:c.Output}]};var nt=function(t){Object(w.a)(n,t);var e=Object(E.a)(n);function n(t,i,a,r,o,s){var l;Object(I.a)(this,n),(l=e.call(this))._changeDetectorRef=i,l._elementRef=a,l._focusMonitor=r,l._isSingleSelector=!1,l._checked=!1,l.ariaLabelledby=null,l._disabled=!1,l.change=new c.EventEmitter;var d=Number(o);return l.tabIndex=d||0===d?d:null,l.buttonToggleGroup=t,l.appearance=s&&s.appearance?s.appearance:"standard",l}return Object(S.a)(n,[{key:"ngOnInit",value:function(){var t=this.buttonToggleGroup;this._isSingleSelector=t&&!t.multiple,this.id=this.id||"mat-button-toggle-".concat(Z++),this._isSingleSelector&&(this.name=t.name),t&&(t._isPrechecked(this)?this.checked=!0:t._isSelected(this)!==this._checked&&t._syncButtonToggle(this,this._checked))}},{key:"ngAfterViewInit",value:function(){this._focusMonitor.monitor(this._elementRef,!0)}},{key:"ngOnDestroy",value:function(){var t=this.buttonToggleGroup;this._focusMonitor.stopMonitoring(this._elementRef),t&&t._isSelected(this)&&t._syncButtonToggle(this,!1,!1,!0)}},{key:"focus",value:function(t){this._buttonElement.nativeElement.focus(t)}},{key:"_onButtonClick",value:function(){var t=!!this._isSingleSelector||!this._checked;t!==this._checked&&(this._checked=t,this.buttonToggleGroup&&(this.buttonToggleGroup._syncButtonToggle(this,this._checked,!0),this.buttonToggleGroup._onTouched())),this.change.emit(new tt(this,this.value))}},{key:"_markForCheck",value:function(){this._changeDetectorRef.markForCheck()}},{key:"buttonId",get:function(){return"".concat(this.id,"-button")}},{key:"appearance",get:function(){return this.buttonToggleGroup?this.buttonToggleGroup.appearance:this._appearance},set:function(t){this._appearance=t}},{key:"checked",get:function(){return this.buttonToggleGroup?this.buttonToggleGroup._isSelected(this):this._checked},set:function(t){var e=Object(h.coerceBooleanProperty)(t);e!==this._checked&&(this._checked=e,this.buttonToggleGroup&&this.buttonToggleGroup._syncButtonToggle(this,this._checked),this._changeDetectorRef.markForCheck())}},{key:"disabled",get:function(){return this._disabled||this.buttonToggleGroup&&this.buttonToggleGroup.disabled},set:function(t){this._disabled=Object(h.coerceBooleanProperty)(t)}}]),n}(Object(O.mixinDisableRipple)((function t(){Object(I.a)(this,t)})));nt.\u0275fac=function(t){return new(t||nt)(c["\u0275\u0275directiveInject"](Y,8),c["\u0275\u0275directiveInject"](c.ChangeDetectorRef),c["\u0275\u0275directiveInject"](c.ElementRef),c["\u0275\u0275directiveInject"](T.h),c["\u0275\u0275injectAttribute"]("tabindex"),c["\u0275\u0275directiveInject"](X,8))},nt.\u0275cmp=c["\u0275\u0275defineComponent"]({type:nt,selectors:[["mat-button-toggle"]],viewQuery:function(t,e){var n;(1&t&&c["\u0275\u0275viewQuery"](Q,!0),2&t)&&(c["\u0275\u0275queryRefresh"](n=c["\u0275\u0275loadQuery"]())&&(e._buttonElement=n.first))},hostAttrs:[1,"mat-button-toggle"],hostVars:11,hostBindings:function(t,e){1&t&&c["\u0275\u0275listener"]("focus",(function(){return e.focus()})),2&t&&(c["\u0275\u0275attribute"]("tabindex",-1)("id",e.id)("name",null),c["\u0275\u0275classProp"]("mat-button-toggle-standalone",!e.buttonToggleGroup)("mat-button-toggle-checked",e.checked)("mat-button-toggle-disabled",e.disabled)("mat-button-toggle-appearance-standard","standard"===e.appearance))},inputs:{disableRipple:"disableRipple",ariaLabelledby:["aria-labelledby","ariaLabelledby"],tabIndex:"tabIndex",appearance:"appearance",checked:"checked",disabled:"disabled",id:"id",name:"name",ariaLabel:["aria-label","ariaLabel"],value:"value"},outputs:{change:"change"},exportAs:["matButtonToggle"],features:[c["\u0275\u0275InheritDefinitionFeature"]],ngContentSelectors:["*"],decls:6,vars:9,consts:[["type","button",1,"mat-button-toggle-button","mat-focus-indicator",3,"id","disabled","click"],["button",""],[1,"mat-button-toggle-label-content"],[1,"mat-button-toggle-focus-overlay"],["matRipple","",1,"mat-button-toggle-ripple",3,"matRippleTrigger","matRippleDisabled"]],template:function(t,e){if(1&t&&(c["\u0275\u0275projectionDef"](),c["\u0275\u0275elementStart"](0,"button",0,1),c["\u0275\u0275listener"]("click",(function(){return e._onButtonClick()})),c["\u0275\u0275elementStart"](2,"span",2),c["\u0275\u0275projection"](3),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275element"](4,"span",3),c["\u0275\u0275element"](5,"span",4)),2&t){var n=c["\u0275\u0275reference"](1);c["\u0275\u0275property"]("id",e.buttonId)("disabled",e.disabled||null),c["\u0275\u0275attribute"]("tabindex",e.disabled?-1:e.tabIndex)("aria-pressed",e.checked)("name",e.name||null)("aria-label",e.ariaLabel)("aria-labelledby",e.ariaLabelledby),c["\u0275\u0275advance"](5),c["\u0275\u0275property"]("matRippleTrigger",n)("matRippleDisabled",e.disableRipple||e.disabled)}},directives:[O.MatRipple],styles:[".mat-button-toggle-standalone,.mat-button-toggle-group{position:relative;display:inline-flex;flex-direction:row;white-space:nowrap;overflow:hidden;border-radius:2px;-webkit-tap-highlight-color:transparent}.cdk-high-contrast-active .mat-button-toggle-standalone,.cdk-high-contrast-active .mat-button-toggle-group{outline:solid 1px}.mat-button-toggle-standalone.mat-button-toggle-appearance-standard,.mat-button-toggle-group-appearance-standard{border-radius:4px}.cdk-high-contrast-active .mat-button-toggle-standalone.mat-button-toggle-appearance-standard,.cdk-high-contrast-active .mat-button-toggle-group-appearance-standard{outline:0}.mat-button-toggle-vertical{flex-direction:column}.mat-button-toggle-vertical .mat-button-toggle-label-content{display:block}.mat-button-toggle{white-space:nowrap;position:relative}.mat-button-toggle .mat-icon svg{vertical-align:top}.mat-button-toggle.cdk-keyboard-focused .mat-button-toggle-focus-overlay{opacity:1}.cdk-high-contrast-active .mat-button-toggle.cdk-keyboard-focused .mat-button-toggle-focus-overlay{opacity:.5}.mat-button-toggle-appearance-standard:not(.mat-button-toggle-disabled):hover .mat-button-toggle-focus-overlay{opacity:.04}.mat-button-toggle-appearance-standard.cdk-keyboard-focused:not(.mat-button-toggle-disabled) .mat-button-toggle-focus-overlay{opacity:.12}.cdk-high-contrast-active .mat-button-toggle-appearance-standard.cdk-keyboard-focused:not(.mat-button-toggle-disabled) .mat-button-toggle-focus-overlay{opacity:.5}@media(hover: none){.mat-button-toggle-appearance-standard:not(.mat-button-toggle-disabled):hover .mat-button-toggle-focus-overlay{display:none}}.mat-button-toggle-label-content{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;display:inline-block;line-height:36px;padding:0 16px;position:relative}.mat-button-toggle-appearance-standard .mat-button-toggle-label-content{padding:0 12px}.mat-button-toggle-label-content>*{vertical-align:middle}.mat-button-toggle-focus-overlay{border-radius:inherit;pointer-events:none;opacity:0;top:0;left:0;right:0;bottom:0;position:absolute}.mat-button-toggle-checked .mat-button-toggle-focus-overlay{border-bottom:solid 36px}.cdk-high-contrast-active .mat-button-toggle-checked .mat-button-toggle-focus-overlay{opacity:.5;height:0}.cdk-high-contrast-active .mat-button-toggle-checked.mat-button-toggle-appearance-standard .mat-button-toggle-focus-overlay{border-bottom:solid 500px}.mat-button-toggle .mat-button-toggle-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-button-toggle-button{border:0;background:none;color:inherit;padding:0;margin:0;font:inherit;outline:none;width:100%;cursor:pointer}.mat-button-toggle-disabled .mat-button-toggle-button{cursor:default}.mat-button-toggle-button::-moz-focus-inner{border:0}\n"],encapsulation:2,changeDetection:0}),nt.ctorParameters=function(){return[{type:et,decorators:[{type:c.Optional},{type:c.Inject,args:[Y]}]},{type:c.ChangeDetectorRef},{type:c.ElementRef},{type:T.h},{type:String,decorators:[{type:c.Attribute,args:["tabindex"]}]},{type:void 0,decorators:[{type:c.Optional},{type:c.Inject,args:[X]}]}]},nt.propDecorators={ariaLabel:[{type:c.Input,args:["aria-label"]}],ariaLabelledby:[{type:c.Input,args:["aria-labelledby"]}],_buttonElement:[{type:c.ViewChild,args:["button"]}],id:[{type:c.Input}],name:[{type:c.Input}],value:[{type:c.Input}],tabIndex:[{type:c.Input}],appearance:[{type:c.Input}],checked:[{type:c.Input}],disabled:[{type:c.Input}],change:[{type:c.Output}]};var it=function t(){Object(I.a)(this,t)};it.\u0275mod=c["\u0275\u0275defineNgModule"]({type:it}),it.\u0275inj=c["\u0275\u0275defineInjector"]({factory:function(t){return new(t||it)},imports:[[O.MatCommonModule,O.MatRippleModule],O.MatCommonModule]}),("undefined"==typeof ngJitMode||ngJitMode)&&c["\u0275\u0275setNgModuleScope"](it,{declarations:function(){return[et,nt]},imports:function(){return[O.MatCommonModule,O.MatRippleModule]},exports:function(){return[O.MatCommonModule,et,nt]}});var at=n("Wp6s"),rt=n("bSwM"),ot=n("A5z7"),st=n("iadO"),lt=n("0IaG"),ct=n("f0Cb"),dt=n("7EHt"),pt=n("kmnG"),ut=n("zkoq"),mt=n("NFeN"),ft=n("qFsG"),ht=n("MutI"),gt=n("STbY"),yt=n("M9IT"),bt=n("bv9b"),vt=n("Xa2L"),xt=n("QibW"),Ct=n("d3UM"),St=n("XhcP"),wt=n("1jcm"),Et=n("5RNC"),It=n("dNgK"),Ot=n("Dh3D"),Tt=n("xHqg"),Mt=n("+0xr"),Ft=n("wZkO"),Pt=n("/t3+"),Dt=n("Qu3c"),kt=n("ReuC"),jt=n("foSv"),At=(n("uFwe"),n("7+OI")),_t=n("2Vo4"),Lt=n("1G5W"),Vt=new c.InjectionToken("CDK_TREE_NODE_OUTLET_NODE"),Rt=function t(e,n){Object(I.a)(this,t),this.viewContainer=e,this._node=n};Rt.\u0275fac=function(t){return new(t||Rt)(c["\u0275\u0275directiveInject"](c.ViewContainerRef),c["\u0275\u0275directiveInject"](Vt,8))},Rt.\u0275dir=c["\u0275\u0275defineDirective"]({type:Rt,selectors:[["","cdkTreeNodeOutlet",""]]}),Rt.ctorParameters=function(){return[{type:c.ViewContainerRef},{type:void 0,decorators:[{type:c.Inject,args:[Vt]},{type:c.Optional}]}]};var Nt=function t(e){Object(I.a)(this,t),this.$implicit=e},Gt=function t(e){Object(I.a)(this,t),this.template=e};function Bt(){return Error("Could not find functions for nested/flat tree in tree control.")}Gt.\u0275fac=function(t){return new(t||Gt)(c["\u0275\u0275directiveInject"](c.TemplateRef))},Gt.\u0275dir=c["\u0275\u0275defineDirective"]({type:Gt,selectors:[["","cdkTreeNodeDef",""]],inputs:{when:["cdkTreeNodeDefWhen","when"]}}),Gt.ctorParameters=function(){return[{type:c.TemplateRef}]};var Ut=function(){function t(e,n){Object(I.a)(this,t),this._differs=e,this._changeDetectorRef=n,this._onDestroy=new j.b,this._levels=new Map,this.viewChange=new _t.a({start:0,end:Number.MAX_VALUE})}return Object(S.a)(t,[{key:"ngOnInit",value:function(){if(this._dataDiffer=this._differs.find([]).create(this.trackBy),!this.treeControl&&(0,0))throw Error("Could not find a tree control for the tree.")}},{key:"ngOnDestroy",value:function(){this._nodeOutlet.viewContainer.clear(),this.viewChange.complete(),this._onDestroy.next(),this._onDestroy.complete(),this._dataSource&&"function"==typeof this._dataSource.disconnect&&this.dataSource.disconnect(this),this._dataSubscription&&(this._dataSubscription.unsubscribe(),this._dataSubscription=null)}},{key:"ngAfterContentChecked",value:function(){var t=this._nodeDefs.filter((function(t){return!t.when}));if(t.length>1&&(0,0))throw Error("There can only be one default row without a when predicate function.");this._defaultNodeDef=t[0],this.dataSource&&this._nodeDefs&&!this._dataSubscription&&this._observeRenderChanges()}},{key:"_switchDataSource",value:function(t){this._dataSource&&"function"==typeof this._dataSource.disconnect&&this.dataSource.disconnect(this),this._dataSubscription&&(this._dataSubscription.unsubscribe(),this._dataSubscription=null),t||this._nodeOutlet.viewContainer.clear(),this._dataSource=t,this._nodeDefs&&this._observeRenderChanges()}},{key:"_observeRenderChanges",value:function(){var t,e=this;Object(g.isDataSource)(this._dataSource)?t=this._dataSource.connect(this):Object(At.a)(this._dataSource)?t=this._dataSource:Array.isArray(this._dataSource)&&(t=Object(_.a)(this._dataSource)),t&&(this._dataSubscription=t.pipe(Object(Lt.a)(this._onDestroy)).subscribe((function(t){return e.renderNodeChanges(t)})))}},{key:"renderNodeChanges",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._dataDiffer,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this._nodeOutlet.viewContainer,a=arguments.length>3?arguments[3]:void 0,r=n.diff(t);r&&(r.forEachOperation((function(n,r,o){if(null==n.previousIndex)e.insertNode(t[o],o,i,a);else if(null==o)i.remove(r),e._levels.delete(n.item);else{var s=i.get(r);i.move(s,o)}})),this._changeDetectorRef.detectChanges())}},{key:"_getNodeDef",value:function(t,e){if(1===this._nodeDefs.length)return this._nodeDefs.first;var n=this._nodeDefs.find((function(n){return n.when&&n.when(e,t)}))||this._defaultNodeDef;if(0,!n,0)throw Error("Could not find a matching node definition for the provided node data.");return n}},{key:"insertNode",value:function(t,e,n,i){var a=this._getNodeDef(t,e),r=new Nt(t);this.treeControl.getLevel?r.level=this.treeControl.getLevel(t):void 0!==i&&this._levels.has(i)?r.level=this._levels.get(i)+1:r.level=0,this._levels.set(t,r.level),(n||this._nodeOutlet.viewContainer).createEmbeddedView(a.template,r,e),qt.mostRecentTreeNode&&(qt.mostRecentTreeNode.data=t)}},{key:"dataSource",get:function(){return this._dataSource},set:function(t){this._dataSource!==t&&this._switchDataSource(t)}}]),t}();Ut.\u0275fac=function(t){return new(t||Ut)(c["\u0275\u0275directiveInject"](c.IterableDiffers),c["\u0275\u0275directiveInject"](c.ChangeDetectorRef))},Ut.\u0275cmp=c["\u0275\u0275defineComponent"]({type:Ut,selectors:[["cdk-tree"]],contentQueries:function(t,e,n){var i;(1&t&&c["\u0275\u0275contentQuery"](n,Gt,!0),2&t)&&(c["\u0275\u0275queryRefresh"](i=c["\u0275\u0275loadQuery"]())&&(e._nodeDefs=i))},viewQuery:function(t,e){var n;(1&t&&c["\u0275\u0275staticViewQuery"](Rt,!0),2&t)&&(c["\u0275\u0275queryRefresh"](n=c["\u0275\u0275loadQuery"]())&&(e._nodeOutlet=n.first))},hostAttrs:["role","tree",1,"cdk-tree"],inputs:{dataSource:"dataSource",treeControl:"treeControl",trackBy:"trackBy"},exportAs:["cdkTree"],decls:1,vars:0,consts:[["cdkTreeNodeOutlet",""]],template:function(t,e){1&t&&c["\u0275\u0275elementContainer"](0,0)},directives:[Rt],encapsulation:2}),Ut.ctorParameters=function(){return[{type:c.IterableDiffers},{type:c.ChangeDetectorRef}]},Ut.propDecorators={dataSource:[{type:c.Input}],treeControl:[{type:c.Input}],trackBy:[{type:c.Input}],_nodeOutlet:[{type:c.ViewChild,args:[Rt,{static:!0}]}],_nodeDefs:[{type:c.ContentChildren,args:[Gt,{descendants:!0}]}]};var qt=function(){function t(e,n){Object(I.a)(this,t),this._elementRef=e,this._tree=n,this._destroyed=new j.b,this._dataChanges=new j.b,this.role="treeitem",t.mostRecentTreeNode=this}return Object(S.a)(t,[{key:"ngOnDestroy",value:function(){t.mostRecentTreeNode===this&&(t.mostRecentTreeNode=null),this._dataChanges.complete(),this._destroyed.next(),this._destroyed.complete()}},{key:"focus",value:function(){this._elementRef.nativeElement.focus()}},{key:"_setRoleFromData",value:function(){if(!this._tree.treeControl.isExpandable&&!this._tree.treeControl.getChildren&&(0,0))throw Bt();this.role="treeitem"}},{key:"data",get:function(){return this._data},set:function(t){t!==this._data&&(this._data=t,this._setRoleFromData(),this._dataChanges.next())}},{key:"isExpanded",get:function(){return this._tree.treeControl.isExpanded(this._data)}},{key:"level",get:function(){return this._tree.treeControl.getLevel?this._tree.treeControl.getLevel(this._data):0}}]),t}();qt.\u0275fac=function(t){return new(t||qt)(c["\u0275\u0275directiveInject"](c.ElementRef),c["\u0275\u0275directiveInject"](Ut))},qt.\u0275dir=c["\u0275\u0275defineDirective"]({type:qt,selectors:[["cdk-tree-node"]],hostAttrs:[1,"cdk-tree-node"],hostVars:3,hostBindings:function(t,e){2&t&&c["\u0275\u0275attribute"]("aria-expanded",e.isExpanded)("aria-level",e.level+1)("role",e.role)},inputs:{role:"role"},exportAs:["cdkTreeNode"]}),qt.mostRecentTreeNode=null,qt.ctorParameters=function(){return[{type:c.ElementRef},{type:Ut}]},qt.propDecorators={role:[{type:c.Input}]};var Wt=function(t){Object(w.a)(n,t);var e=Object(E.a)(n);function n(t,i,a){var r;return Object(I.a)(this,n),(r=e.call(this,t,i))._elementRef=t,r._tree=i,r._differs=a,r}return Object(S.a)(n,[{key:"ngAfterContentInit",value:function(){var t=this;if(this._dataDiffer=this._differs.find([]).create(this._tree.trackBy),!this._tree.treeControl.getChildren&&(0,0))throw Bt();var e=this._tree.treeControl.getChildren(this.data);Array.isArray(e)?this.updateChildrenNodes(e):Object(At.a)(e)&&e.pipe(Object(Lt.a)(this._destroyed)).subscribe((function(e){return t.updateChildrenNodes(e)})),this.nodeOutlet.changes.pipe(Object(Lt.a)(this._destroyed)).subscribe((function(){return t.updateChildrenNodes()}))}},{key:"ngOnDestroy",value:function(){this._clear(),Object(kt.a)(Object(jt.a)(n.prototype),"ngOnDestroy",this).call(this)}},{key:"updateChildrenNodes",value:function(t){var e=this._getNodeOutlet();if(t&&(this._children=t),e&&this._children){var n=e.viewContainer;this._tree.renderNodeChanges(this._children,this._dataDiffer,n,this._data)}else this._dataDiffer.diff([])}},{key:"_clear",value:function(){var t=this._getNodeOutlet();t&&(t.viewContainer.clear(),this._dataDiffer.diff([]))}},{key:"_getNodeOutlet",value:function(){var t=this,e=this.nodeOutlet;return e&&e.find((function(e){return!e._node||e._node===t}))}}]),n}(qt);Wt.\u0275fac=function(t){return new(t||Wt)(c["\u0275\u0275directiveInject"](c.ElementRef),c["\u0275\u0275directiveInject"](Ut),c["\u0275\u0275directiveInject"](c.IterableDiffers))},Wt.\u0275dir=c["\u0275\u0275defineDirective"]({type:Wt,selectors:[["cdk-nested-tree-node"]],contentQueries:function(t,e,n){var i;(1&t&&c["\u0275\u0275contentQuery"](n,Rt,!0),2&t)&&(c["\u0275\u0275queryRefresh"](i=c["\u0275\u0275loadQuery"]())&&(e.nodeOutlet=i))},hostAttrs:[1,"cdk-tree-node","cdk-nested-tree-node"],hostVars:2,hostBindings:function(t,e){2&t&&c["\u0275\u0275attribute"]("aria-expanded",e.isExpanded)("role",e.role)},exportAs:["cdkNestedTreeNode"],features:[c["\u0275\u0275ProvidersFeature"]([{provide:qt,useExisting:Wt},{provide:Vt,useExisting:Wt}]),c["\u0275\u0275InheritDefinitionFeature"]]}),Wt.ctorParameters=function(){return[{type:c.ElementRef},{type:Ut},{type:c.IterableDiffers}]},Wt.propDecorators={nodeOutlet:[{type:c.ContentChildren,args:[Rt,{descendants:!0}]}]};var zt=/([A-Za-z%]+)$/,Kt=function(){function t(e,n,i,a,r){var o=this;Object(I.a)(this,t),this._treeNode=e,this._tree=n,this._element=a,this._dir=r,this._destroyed=new j.b,this.indentUnits="px",this._indent=40,this._setPadding(),r&&r.change.pipe(Object(Lt.a)(this._destroyed)).subscribe((function(){return o._setPadding(!0)})),e._dataChanges.subscribe((function(){return o._setPadding()}))}return Object(S.a)(t,[{key:"ngOnDestroy",value:function(){this._destroyed.next(),this._destroyed.complete()}},{key:"_paddingIndent",value:function(){var t=this._treeNode.data&&this._tree.treeControl.getLevel?this._tree.treeControl.getLevel(this._treeNode.data):null,e=null==this._level?t:this._level;return"number"==typeof e?"".concat(e*this._indent).concat(this.indentUnits):null}},{key:"_setPadding",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=this._paddingIndent();if(e!==this._currentPadding||t){var n=this._element.nativeElement,i=this._dir&&"rtl"===this._dir.value?"paddingRight":"paddingLeft",a="paddingLeft"===i?"paddingRight":"paddingLeft";n.style[i]=e||"",n.style[a]="",this._currentPadding=e}}},{key:"_setLevelInput",value:function(t){this._level=Object(h.coerceNumberProperty)(t,null),this._setPadding()}},{key:"_setIndentInput",value:function(t){var e=t,n="px";if("string"==typeof t){var i=t.split(zt);e=i[0],n=i[1]||n}this.indentUnits=n,this._indent=Object(h.coerceNumberProperty)(e),this._setPadding()}},{key:"level",get:function(){return this._level},set:function(t){this._setLevelInput(t)}},{key:"indent",get:function(){return this._indent},set:function(t){this._setIndentInput(t)}}]),t}();Kt.\u0275fac=function(t){return new(t||Kt)(c["\u0275\u0275directiveInject"](qt),c["\u0275\u0275directiveInject"](Ut),c["\u0275\u0275directiveInject"](c.Renderer2),c["\u0275\u0275directiveInject"](c.ElementRef),c["\u0275\u0275directiveInject"](k.c,8))},Kt.\u0275dir=c["\u0275\u0275defineDirective"]({type:Kt,selectors:[["","cdkTreeNodePadding",""]],inputs:{level:["cdkTreeNodePadding","level"],indent:["cdkTreeNodePaddingIndent","indent"]}}),Kt.ctorParameters=function(){return[{type:qt},{type:Ut},{type:c.Renderer2},{type:c.ElementRef},{type:k.c,decorators:[{type:c.Optional}]}]},Kt.propDecorators={level:[{type:c.Input,args:["cdkTreeNodePadding"]}],indent:[{type:c.Input,args:["cdkTreeNodePaddingIndent"]}]};var Ht=function(){function t(e,n){Object(I.a)(this,t),this._tree=e,this._treeNode=n,this._recursive=!1}return Object(S.a)(t,[{key:"_toggle",value:function(t){this.recursive?this._tree.treeControl.toggleDescendants(this._treeNode.data):this._tree.treeControl.toggle(this._treeNode.data),t.stopPropagation()}},{key:"recursive",get:function(){return this._recursive},set:function(t){this._recursive=Object(h.coerceBooleanProperty)(t)}}]),t}();Ht.\u0275fac=function(t){return new(t||Ht)(c["\u0275\u0275directiveInject"](Ut),c["\u0275\u0275directiveInject"](qt))},Ht.\u0275dir=c["\u0275\u0275defineDirective"]({type:Ht,selectors:[["","cdkTreeNodeToggle",""]],hostBindings:function(t,e){1&t&&c["\u0275\u0275listener"]("click",(function(t){return e._toggle(t)}))},inputs:{recursive:["cdkTreeNodeToggleRecursive","recursive"]}}),Ht.ctorParameters=function(){return[{type:Ut},{type:qt}]},Ht.propDecorators={recursive:[{type:c.Input,args:["cdkTreeNodeToggleRecursive"]}],_toggle:[{type:c.HostListener,args:["click",["$event"]]}]};var $t=function t(){Object(I.a)(this,t)};$t.\u0275mod=c["\u0275\u0275defineNgModule"]({type:$t}),$t.\u0275inj=c["\u0275\u0275defineInjector"]({factory:function(t){return new(t||$t)}}),("undefined"==typeof ngJitMode||ngJitMode)&&c["\u0275\u0275setNgModuleScope"]($t,{declarations:[Wt,Gt,Kt,Ht,Ut,qt,Rt],exports:[Wt,Gt,Kt,Ht,Ut,qt,Rt]});var Qt=n("lJxs"),Xt=function(t){Object(w.a)(n,t);var e=Object(E.a)(n);function n(t,i,a){var r;return Object(I.a)(this,n),(r=e.call(this,t,i))._elementRef=t,r._tree=i,r.role="treeitem",r.tabIndex=Number(a)||0,r}return n}(Object(O.mixinTabIndex)(Object(O.mixinDisabled)(qt)));Xt.\u0275fac=function(t){return new(t||Xt)(c["\u0275\u0275directiveInject"](c.ElementRef),c["\u0275\u0275directiveInject"](Ut),c["\u0275\u0275injectAttribute"]("tabindex"))},Xt.\u0275dir=c["\u0275\u0275defineDirective"]({type:Xt,selectors:[["mat-tree-node"]],hostAttrs:[1,"mat-tree-node"],hostVars:3,hostBindings:function(t,e){2&t&&c["\u0275\u0275attribute"]("aria-expanded",e.isExpanded)("aria-level",e.level+1)("role",e.role)},inputs:{disabled:"disabled",tabIndex:"tabIndex",role:"role"},exportAs:["matTreeNode"],features:[c["\u0275\u0275ProvidersFeature"]([{provide:qt,useExisting:Xt}]),c["\u0275\u0275InheritDefinitionFeature"]]}),Xt.ctorParameters=function(){return[{type:c.ElementRef},{type:Ut},{type:String,decorators:[{type:c.Attribute,args:["tabindex"]}]}]},Xt.propDecorators={role:[{type:c.Input}]};var Yt=function(t){Object(w.a)(n,t);var e=Object(E.a)(n);function n(){return Object(I.a)(this,n),e.apply(this,arguments)}return n}(Gt);Yt.\u0275fac=function(t){return Jt(t||Yt)},Yt.\u0275dir=c["\u0275\u0275defineDirective"]({type:Yt,selectors:[["","matTreeNodeDef",""]],inputs:{when:["matTreeNodeDefWhen","when"],data:["matTreeNode","data"]},features:[c["\u0275\u0275ProvidersFeature"]([{provide:Gt,useExisting:Yt}]),c["\u0275\u0275InheritDefinitionFeature"]]}),Yt.propDecorators={data:[{type:c.Input,args:["matTreeNode"]}]};var Jt=c["\u0275\u0275getInheritedFactory"](Yt);!function(){c["\u0275setClassMetadata"](Yt,[{type:c.Directive,args:[{selector:"[matTreeNodeDef]",inputs:["when: matTreeNodeDefWhen"],providers:[{provide:Gt,useExisting:Yt}]}]}],null,{data:[{type:c.Input,args:["matTreeNode"]}]})}();var Zt=function(t){Object(w.a)(n,t);var e=Object(E.a)(n);function n(t,i,a,r){var o;return Object(I.a)(this,n),(o=e.call(this,t,i,a))._elementRef=t,o._tree=i,o._differs=a,o._disabled=!1,o.tabIndex=Number(r)||0,o}return Object(S.a)(n,[{key:"ngAfterContentInit",value:function(){Object(kt.a)(Object(jt.a)(n.prototype),"ngAfterContentInit",this).call(this)}},{key:"ngOnDestroy",value:function(){Object(kt.a)(Object(jt.a)(n.prototype),"ngOnDestroy",this).call(this)}},{key:"disabled",get:function(){return this._disabled},set:function(t){this._disabled=Object(h.coerceBooleanProperty)(t)}},{key:"tabIndex",get:function(){return this.disabled?-1:this._tabIndex},set:function(t){this._tabIndex=null!=t?t:0}}]),n}(Wt);Zt.\u0275fac=function(t){return new(t||Zt)(c["\u0275\u0275directiveInject"](c.ElementRef),c["\u0275\u0275directiveInject"](Ut),c["\u0275\u0275directiveInject"](c.IterableDiffers),c["\u0275\u0275injectAttribute"]("tabindex"))},Zt.\u0275dir=c["\u0275\u0275defineDirective"]({type:Zt,selectors:[["mat-nested-tree-node"]],hostAttrs:[1,"mat-nested-tree-node"],hostVars:2,hostBindings:function(t,e){2&t&&c["\u0275\u0275attribute"]("aria-expanded",e.isExpanded)("role",e.role)},inputs:{tabIndex:"tabIndex",disabled:"disabled",node:["matNestedTreeNode","node"]},exportAs:["matNestedTreeNode"],features:[c["\u0275\u0275ProvidersFeature"]([{provide:Wt,useExisting:Zt},{provide:qt,useExisting:Zt},{provide:Vt,useExisting:Zt}]),c["\u0275\u0275InheritDefinitionFeature"]]}),Zt.ctorParameters=function(){return[{type:c.ElementRef},{type:Ut},{type:c.IterableDiffers},{type:String,decorators:[{type:c.Attribute,args:["tabindex"]}]}]},Zt.propDecorators={node:[{type:c.Input,args:["matNestedTreeNode"]}],disabled:[{type:c.Input}],tabIndex:[{type:c.Input}]};var te=function(t){Object(w.a)(n,t);var e=Object(E.a)(n);function n(){return Object(I.a)(this,n),e.apply(this,arguments)}return Object(S.a)(n,[{key:"level",get:function(){return this._level},set:function(t){this._setLevelInput(t)}},{key:"indent",get:function(){return this._indent},set:function(t){this._setIndentInput(t)}}]),n}(Kt);te.\u0275fac=function(t){return ee(t||te)},te.\u0275dir=c["\u0275\u0275defineDirective"]({type:te,selectors:[["","matTreeNodePadding",""]],inputs:{level:["matTreeNodePadding","level"],indent:["matTreeNodePaddingIndent","indent"]},features:[c["\u0275\u0275ProvidersFeature"]([{provide:Kt,useExisting:te}]),c["\u0275\u0275InheritDefinitionFeature"]]}),te.propDecorators={level:[{type:c.Input,args:["matTreeNodePadding"]}],indent:[{type:c.Input,args:["matTreeNodePaddingIndent"]}]};var ee=c["\u0275\u0275getInheritedFactory"](te);!function(){c["\u0275setClassMetadata"](te,[{type:c.Directive,args:[{selector:"[matTreeNodePadding]",providers:[{provide:Kt,useExisting:te}]}]}],null,{level:[{type:c.Input,args:["matTreeNodePadding"]}],indent:[{type:c.Input,args:["matTreeNodePaddingIndent"]}]})}();var ne=function t(e,n){Object(I.a)(this,t),this.viewContainer=e,this._node=n};ne.\u0275fac=function(t){return new(t||ne)(c["\u0275\u0275directiveInject"](c.ViewContainerRef),c["\u0275\u0275directiveInject"](Vt,8))},ne.\u0275dir=c["\u0275\u0275defineDirective"]({type:ne,selectors:[["","matTreeNodeOutlet",""]],features:[c["\u0275\u0275ProvidersFeature"]([{provide:Rt,useExisting:ne}])]}),ne.ctorParameters=function(){return[{type:c.ViewContainerRef},{type:void 0,decorators:[{type:c.Inject,args:[Vt]},{type:c.Optional}]}]};var ie=function(t){Object(w.a)(n,t);var e=Object(E.a)(n);function n(){return Object(I.a)(this,n),e.apply(this,arguments)}return n}(Ut);ie.\u0275fac=function(t){return ae(t||ie)},ie.\u0275cmp=c["\u0275\u0275defineComponent"]({type:ie,selectors:[["mat-tree"]],viewQuery:function(t,e){var n;(1&t&&c["\u0275\u0275staticViewQuery"](ne,!0),2&t)&&(c["\u0275\u0275queryRefresh"](n=c["\u0275\u0275loadQuery"]())&&(e._nodeOutlet=n.first))},hostAttrs:["role","tree",1,"mat-tree"],exportAs:["matTree"],features:[c["\u0275\u0275ProvidersFeature"]([{provide:Ut,useExisting:ie}]),c["\u0275\u0275InheritDefinitionFeature"]],decls:1,vars:0,consts:[["matTreeNodeOutlet",""]],template:function(t,e){1&t&&c["\u0275\u0275elementContainer"](0,0)},directives:[ne],styles:[".mat-tree{display:block}.mat-tree-node{display:flex;align-items:center;flex:1;word-wrap:break-word}.mat-nested-tree-node{border-bottom-width:0}\n"],encapsulation:2}),ie.propDecorators={_nodeOutlet:[{type:c.ViewChild,args:[ne,{static:!0}]}]};var ae=c["\u0275\u0275getInheritedFactory"](ie);!function(){c["\u0275setClassMetadata"](ie,[{type:c.Component,args:[{selector:"mat-tree",exportAs:"matTree",template:"<ng-container matTreeNodeOutlet></ng-container>",host:{class:"mat-tree",role:"tree"},encapsulation:c.ViewEncapsulation.None,changeDetection:c.ChangeDetectionStrategy.Default,providers:[{provide:Ut,useExisting:ie}],styles:[".mat-tree{display:block}.mat-tree-node{display:flex;align-items:center;flex:1;word-wrap:break-word}.mat-nested-tree-node{border-bottom-width:0}\n"]}]}],null,{_nodeOutlet:[{type:c.ViewChild,args:[ne,{static:!0}]}]})}();var re=function(t){Object(w.a)(n,t);var e=Object(E.a)(n);function n(){return Object(I.a)(this,n),e.apply(this,arguments)}return Object(S.a)(n,[{key:"recursive",get:function(){return this._recursive},set:function(t){this._recursive=Object(h.coerceBooleanProperty)(t)}}]),n}(Ht);re.\u0275fac=function(t){return oe(t||re)},re.\u0275dir=c["\u0275\u0275defineDirective"]({type:re,selectors:[["","matTreeNodeToggle",""]],inputs:{recursive:["matTreeNodeToggleRecursive","recursive"]},features:[c["\u0275\u0275ProvidersFeature"]([{provide:Ht,useExisting:re}]),c["\u0275\u0275InheritDefinitionFeature"]]}),re.propDecorators={recursive:[{type:c.Input,args:["matTreeNodeToggleRecursive"]}]};var oe=c["\u0275\u0275getInheritedFactory"](re);!function(){c["\u0275setClassMetadata"](re,[{type:c.Directive,args:[{selector:"[matTreeNodeToggle]",providers:[{provide:Ht,useExisting:re}]}]}],null,{recursive:[{type:c.Input,args:["matTreeNodeToggleRecursive"]}]})}();var se=function t(){Object(I.a)(this,t)};se.\u0275mod=c["\u0275\u0275defineNgModule"]({type:se}),se.\u0275inj=c["\u0275\u0275defineInjector"]({factory:function(t){return new(t||se)},imports:[[$t,O.MatCommonModule],O.MatCommonModule]}),("undefined"==typeof ngJitMode||ngJitMode)&&c["\u0275\u0275setNgModuleScope"](se,{declarations:function(){return[Zt,Yt,te,re,ie,Xt,ne]},imports:function(){return[$t,O.MatCommonModule]},exports:function(){return[O.MatCommonModule,Zt,Yt,te,re,ie,Xt,ne]}});var le=function(){function t(e,n,i,a){Object(I.a)(this,t),this.transformFunction=e,this.getLevel=n,this.isExpandable=i,this.getChildren=a}return Object(S.a)(t,[{key:"_flattenNode",value:function(t,e,n,i){var a=this,r=this.transformFunction(t,e);if(n.push(r),this.isExpandable(r)){var o=this.getChildren(t);o&&(Array.isArray(o)?this._flattenChildren(o,e,n,i):o.pipe(Object(V.a)(1)).subscribe((function(t){a._flattenChildren(t,e,n,i)})))}return n}},{key:"_flattenChildren",value:function(t,e,n,i){var a=this;t.forEach((function(r,o){var s=i.slice();s.push(o!=t.length-1),a._flattenNode(r,e+1,n,s)}))}},{key:"flattenNodes",value:function(t){var e=this,n=[];return t.forEach((function(t){return e._flattenNode(t,0,n,[])})),n}},{key:"expandFlattenedNodes",value:function(t,e){var n=this,i=[],a=[];return a[0]=!0,t.forEach((function(t){for(var r=!0,o=0;o<=n.getLevel(t);o++)r=r&&a[o];r&&i.push(t),n.isExpandable(t)&&(a[n.getLevel(t)+1]=e.isExpanded(t))})),i}}]),t}(),ce=function(t){Object(w.a)(n,t);var e=Object(E.a)(n);function n(t,i){var a,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return Object(I.a)(this,n),(a=e.call(this))._treeControl=t,a._treeFlattener=i,a._flattenedData=new _t.a([]),a._expandedData=new _t.a([]),a._data=new _t.a(r),a}return Object(S.a)(n,[{key:"connect",value:function(t){var e=this,n=[t.viewChange,this._treeControl.expansionModel.changed,this._flattenedData];return A.a.apply(void 0,n).pipe(Object(Qt.a)((function(){return e._expandedData.next(e._treeFlattener.expandFlattenedNodes(e._flattenedData.value,e._treeControl)),e._expandedData.value})))}},{key:"disconnect",value:function(){}},{key:"data",get:function(){return this._data.value},set:function(t){this._data.next(t),this._flattenedData.next(this._treeFlattener.flattenNodes(this.data)),this._treeControl.dataNodes=this._flattenedData.value}}]),n}(g.DataSource),de=function(t){Object(w.a)(n,t);var e=Object(E.a)(n);function n(){var t;return Object(I.a)(this,n),(t=e.apply(this,arguments))._data=new _t.a([]),t}return Object(S.a)(n,[{key:"connect",value:function(t){var e=this;return A.a.apply(void 0,[t.viewChange,this._data]).pipe(Object(Qt.a)((function(){return e.data})))}},{key:"disconnect",value:function(){}},{key:"data",get:function(){return this._data.value},set:function(t){this._data.next(t)}}]),n}(g.DataSource),pe=n("l7P3"),ue=n("qCKp"),me=n("kU1M"),fe=n("sYmb"),he=n("GL+W"),ge=n("6C3e"),ye=n("G4cQ"),be=n("wd/R"),ve={"@angular/animations":SystemJS.newModule(l),"@angular/core":SystemJS.newModule(c),"@angular/common":SystemJS.newModule(d),"@angular/forms":SystemJS.newModule(p),"@angular/flex-layout":SystemJS.newModule(u),"@angular/platform-browser":SystemJS.newModule(m),"@angular/router":SystemJS.newModule(f),"@angular/cdk/coercion":SystemJS.newModule(h),"@angular/cdk/collections":SystemJS.newModule(g),"@angular/cdk/keycodes":SystemJS.newModule(y),"@angular/cdk/layout":SystemJS.newModule(b),"@angular/cdk/overlay":SystemJS.newModule(v),"@angular/cdk/portal":SystemJS.newModule(x),"@angular/material/autocomplete":SystemJS.newModule(C),"@angular/material/badge":SystemJS.newModule(i),"@angular/material/bottom-sheet":SystemJS.newModule(a),"@angular/material/button":SystemJS.newModule(H),"@angular/material/button-toggle":SystemJS.newModule(r),"@angular/material/card":SystemJS.newModule(at),"@angular/material/checkbox":SystemJS.newModule(rt),"@angular/material/chips":SystemJS.newModule(ot),"@angular/material/core":SystemJS.newModule(O),"@angular/material/datepicker":SystemJS.newModule(st),"@angular/material/dialog":SystemJS.newModule(lt),"@angular/material/divider":SystemJS.newModule(ct),"@angular/material/expansion":SystemJS.newModule(dt),"@angular/material/form-field":SystemJS.newModule(pt),"@angular/material/grid-list":SystemJS.newModule(ut),"@angular/material/icon":SystemJS.newModule(mt),"@angular/material/input":SystemJS.newModule(ft),"@angular/material/list":SystemJS.newModule(ht),"@angular/material/menu":SystemJS.newModule(gt),"@angular/material/paginator":SystemJS.newModule(yt),"@angular/material/progress-bar":SystemJS.newModule(bt),"@angular/material/progress-spinner":SystemJS.newModule(vt),"@angular/material/radio":SystemJS.newModule(xt),"@angular/material/select":SystemJS.newModule(Ct),"@angular/material/sidenav":SystemJS.newModule(St),"@angular/material/slide-toggle":SystemJS.newModule(wt),"@angular/material/slider":SystemJS.newModule(Et),"@angular/material/snack-bar":SystemJS.newModule(It),"@angular/material/sort":SystemJS.newModule(Ot),"@angular/material/stepper":SystemJS.newModule(Tt),"@angular/material/table":SystemJS.newModule(Mt),"@angular/material/tabs":SystemJS.newModule(Ft),"@angular/material/toolbar":SystemJS.newModule(Pt),"@angular/material/tooltip":SystemJS.newModule(Dt),"@angular/material/tree":SystemJS.newModule(o),"@ngrx/store":SystemJS.newModule(pe),rxjs:SystemJS.newModule(ue),"rxjs/operators":SystemJS.newModule(me),"@ngx-translate/core":SystemJS.newModule(fe),"@core/public-api":SystemJS.newModule(he),"@shared/public-api":SystemJS.newModule(ge),"@home/components/public-api":SystemJS.newModule(s),moment:SystemJS.newModule(be)}},"F97/":function(t,e,n){"use strict";function i(t,e){function n(){return!n.pred.apply(n.thisArg,arguments)}return n.pred=t,n.thisArg=e,n}n.d(e,"a",(function(){return i}))},FBAY:function(t,e,n){"use strict";n.d(e,"a",(function(){return m}));var i=n("fXoL"),a=n("0lYY"),r=n("4j5O"),o=n("//Q6"),s=n("OiFK"),l=n("z6cu"),c=n("LRne"),d=n("lJxs"),p=n("+5dr"),u=n("C4fA"),m=function(){function t(t,e,n){this.dashboardUtils=t,this.ruleChainService=e,this.utils=n,this.namespace="tbBufferStore",this.delimiter="."}return t.prototype.prepareWidgetItem=function(t,e,n,i){var r={datasourceAliases:{},targetDeviceAliases:{}},o={datasourceFilters:{}},s=this.getOriginalColumns(t,e,n),l=this.getOriginalSize(t,e,n,i);if(i.config&&t.configuration&&t.configuration.entityAliases){var c=void 0;if(i.config.datasources)for(var d=0;d<i.config.datasources.length;d++){(m=i.config.datasources[d]).type!==a.a.entity&&m.type!==a.a.entityCount||!m.entityAliasId||(c=t.configuration.entityAliases[m.entityAliasId])&&(r.datasourceAliases[d]=this.prepareAliasInfo(c))}if(i.config.targetDeviceAliasIds)for(d=0;d<i.config.targetDeviceAliasIds.length;d++){var p=i.config.targetDeviceAliasIds[d];p&&(c=t.configuration.entityAliases[p])&&(r.targetDeviceAliases[d]=this.prepareAliasInfo(c))}}if(i.config&&t.configuration&&t.configuration.filters){var u=void 0;if(i.config.datasources)for(d=0;d<i.config.datasources.length;d++){var m;(m=i.config.datasources[d]).type!==a.a.entity&&m.type!==a.a.entityCount||!m.filterId||(u=t.configuration.filters[m.filterId])&&(o.datasourceFilters[d]=this.prepareFilterInfo(u))}}return{widget:i,aliasesInfo:r,filtersInfo:o,originalSize:l,originalColumns:s}},t.prototype.copyWidget=function(t,e,n,i){var a=this.prepareWidgetItem(t,e,n,i);this.storeSet("widget_item",a)},t.prototype.copyWidgetReference=function(t,e,n,i){var a=this.prepareWidgetReference(t,e,n,i);this.storeSet("widget_reference",a)},t.prototype.hasWidget=function(){return this.storeHas("widget_item")},t.prototype.canPasteWidgetReference=function(t,e,n){var i=this.storeGet("widget_reference");return!(!i||i.dashboardId!==t.id.id||i.sourceState===e&&i.sourceLayout===n||!t.configuration.widgets[i.widgetId])},t.prototype.pasteWidget=function(t,e,n,i,a,r){var o=this.storeGet("widget_item");if(o){var s=o.widget,c=o.aliasesInfo,p=o.filtersInfo,u=o.originalColumns,m=o.originalSize,f=-1,h=-1;return i&&(f=i.row,h=i.column),s.id=this.utils.guid(),this.addWidgetToDashboard(t,e,n,s,c,p,a,r,u,m,f,h).pipe(Object(d.a)((function(){return s})))}return Object(l.a)("Failed to read widget from buffer!")},t.prototype.pasteWidgetReference=function(t,e,n,i){var a=this.storeGet("widget_reference");if(a){var r=t.configuration.widgets[a.widgetId];if(r){var o=a.originalColumns,s=a.originalSize,c=-1,p=-1;return i&&(c=i.row,p=i.column),this.addWidgetToDashboard(t,e,n,r,null,null,null,null,o,s,c,p).pipe(Object(d.a)((function(){return r})))}return Object(l.a)("Failed to read widget reference from buffer!")}return Object(l.a)("Failed to read widget reference from buffer!")},t.prototype.addWidgetToDashboard=function(t,e,n,i,a,r,s,l,d,p,u,m){var f;f=t||{},f=this.dashboardUtils.validateAndUpdateDashboard(f);var h=!1,g=!1;if(a){var y=this.updateAliases(f,i,a);!Object(o.r)(y,f.configuration.entityAliases)&&(f.configuration.entityAliases=y,s&&(h=!0))}if(r){var b=this.updateFilters(f,i,r);!Object(o.r)(b,f.configuration.filters)&&(f.configuration.filters=b,l&&(g=!0))}return this.dashboardUtils.addWidgetToLayout(f,e,n,i,d,p,u,m),h&&s(),g&&l(),Object(c.a)(f)},t.prototype.copyRuleNodes=function(t,e){for(var n={nodes:[],connections:[]},i=-1,a=-1,r=-1,o=-1,s=0;s<t.length;s++){var l=t[s],c={id:"",connectors:[],additionalInfo:l.additionalInfo,configuration:l.configuration,debugMode:l.debugMode,x:l.x,y:l.y,name:l.name,componentClazz:l.component.clazz};l.targetRuleChainId&&(c.targetRuleChainId=l.targetRuleChainId),l.error&&(c.error=l.error),n.nodes.push(c),0===s?(i=c.y,a=c.x,r=c.y+50,o=c.x+170):(i=Math.min(i,c.y),a=Math.min(a,c.x),r=Math.max(r,c.y+50),o=Math.max(o,c.x+170))}n.originX=a+(o-a)/2,n.originY=i+(r-i)/2,e.forEach((function(t){n.connections.push(t)})),this.storeSet("rule_nodes",n)},t.prototype.hasRuleNodes=function(){return this.storeHas("rule_nodes")},t.prototype.pasteRuleNodes=function(t,e){var n=this.storeGet("rule_nodes");if(n){for(var i=t-n.originX,a=e-n.originY,r=0,o=n.nodes;r<o.length;r++){var s=o[r],l=this.ruleChainService.getRuleNodeComponentByClazz(s.componentClazz);if(!l)return null;var c=p.f.get(l.type).icon,d=null;l.configurationDescriptor.nodeDefinition.icon&&(c=l.configurationDescriptor.nodeDefinition.icon),l.configurationDescriptor.nodeDefinition.iconUrl&&(d=l.configurationDescriptor.nodeDefinition.iconUrl),delete s.componentClazz,s.component=l,s.nodeClass=p.f.get(l.type).nodeClass,s.icon=c,s.iconUrl=d,s.connectors=[],s.x=Math.round(s.x+i),s.y=Math.round(s.y+a)}return n}return null},t.prototype.hasRuleChainImport=function(){return this.storeHas("rule_chain_import")},t.prototype.storeRuleChainImport=function(t){this.storeSet("rule_chain_import",t)},t.prototype.getRuleChainImport=function(){var t=this.storeGet("rule_chain_import");return this.storeRemove("rule_chain_import"),t},t.prototype.getOriginalColumns=function(t,e,n){var i=24,a=null,r=t.configuration.states[e],o=Object.keys(r.layouts).length;if(r){var s=r.layouts[n];s&&(a=s.gridSettings)}return a&&a.columns&&(i=a.columns),i*=o},t.prototype.getOriginalSize=function(t,e,n,i){var a=t.configuration.states[e].layouts[n].widgets[i.id];return{sizeX:a.sizeX,sizeY:a.sizeY}},t.prototype.prepareAliasInfo=function(t){return{alias:t.alias,filter:t.filter}},t.prototype.prepareFilterInfo=function(t){return{filter:t.filter,keyFilters:t.keyFilters,editable:t.editable}},t.prototype.prepareWidgetReference=function(t,e,n,i){var a=this.getOriginalColumns(t,e,n),r=this.getOriginalSize(t,e,n,i);return{dashboardId:t.id.id,sourceState:e,sourceLayout:n,widgetId:i.id,originalSize:r,originalColumns:a}},t.prototype.updateAliases=function(t,e,n){for(var i,a,r=Object(o.e)(t.configuration.entityAliases),s=0,l=Object.keys(n.datasourceAliases);s<l.length;s++){var c=l[s],d=Number(c);i=n.datasourceAliases[d],a=this.getEntityAliasId(r,i),e.config.datasources[d].entityAliasId=a}for(var p=0,u=Object.keys(n.targetDeviceAliases);p<u.length;p++){var m=u[p],f=Number(m);i=n.targetDeviceAliases[f],a=this.getEntityAliasId(r,i),e.config.targetDeviceAliasIds[f]=a}return r},t.prototype.updateFilters=function(t,e,n){for(var i,a,r=Object(o.e)(t.configuration.filters),s=0,l=Object.keys(n.datasourceFilters);s<l.length;s++){var c=l[s],d=Number(c);i=n.datasourceFilters[d],a=this.getFilterId(r,i),e.config.datasources[d].filterId=a}return r},t.prototype.isEntityAliasEqual=function(t,e){return Object(o.r)(t.filter,e.filter)},t.prototype.getEntityAliasId=function(t,e){for(var n,i=0,a=Object.keys(t);i<a.length;i++){var r=a[i];if(this.isEntityAliasEqual(t[r],e)){n=r;break}}if(!n){var o=this.createEntityAliasName(t,e.alias);t[n=this.utils.guid()]={id:n,alias:o,filter:e.filter}}return n},t.prototype.createEntityAliasName=function(t,e){for(var n=0,i=e,a=!1;!a;){a=!0;for(var r=0,o=Object.keys(t);r<o.length;r++){i===t[o[r]].alias&&(i=e+ ++n,a=!1)}}return i},t.prototype.isFilterEqual=function(t,e){return Object(o.r)(t.keyFilters,e.keyFilters)},t.prototype.getFilterId=function(t,e){for(var n,i=0,a=Object.keys(t);i<a.length;i++){var r=a[i];if(this.isFilterEqual(t[r],e)){n=r;break}}if(!n){var o=this.createFilterName(t,e.filter);t[n=this.utils.guid()]={id:n,filter:o,keyFilters:e.keyFilters,editable:e.editable}}return n},t.prototype.createFilterName=function(t,e){for(var n=0,i=e,a=!1;!a;){a=!0;for(var r=0,o=Object.keys(t);r<o.length;r++){i===t[o[r]].filter&&(i=e+ ++n,a=!1)}}return i},t.prototype.storeSet=function(t,e){localStorage.setItem(this.getNamespacedKey(t),JSON.stringify(e))},t.prototype.storeGet=function(t){var e=null,n=localStorage.getItem(this.getNamespacedKey(t));try{e=void 0===n||"undefined"===n?void 0:JSON.parse(n)}catch(i){this.storeRemove(t)}return e},t.prototype.storeHas=function(t){var e=localStorage.getItem(this.getNamespacedKey(t));return void 0!==e&&"undefined"!==e&&null!==e},t.prototype.storeRemove=function(t){localStorage.removeItem(this.getNamespacedKey(t))},t.prototype.getNamespacedKey=function(t){return[this.namespace,t].join(this.delimiter)},t.\u0275fac=function(e){return new(e||t)(i["\u0275\u0275inject"](r.a),i["\u0275\u0275inject"](u.a),i["\u0275\u0275inject"](s.a))},t.\u0275prov=i["\u0275\u0275defineInjectable"]({token:t,factory:t.\u0275fac,providedIn:"root"}),t}();!function(){i["\u0275setClassMetadata"](m,[{type:i.Injectable,args:[{providedIn:"root"}]}],(function(){return[{type:r.a},{type:u.a},{type:s.a}]}),null)}()},G4cQ:function(t,e,n){"use strict";n.d(e,"a",(function(){return da}));var i=n("fXoL"),a=n("ofXK"),r=n("PCNd"),o=n("LrsY"),s=n("UaJx"),l=n("aYVl"),c=n("mrSG"),d=n("RxGS"),p=(n("qxrw"),n("U3y+")),u=n("HnHJ"),m=n("wZkO"),f=n("//Q6"),h=n("l7P3"),g=n("XiUz"),y=n("kRCp"),b=n("znSr"),v=n("sYmb"),x=["entityDetailsForm"],C=["entityTabs"],S=function(t){return{"tb-headless":t}},w=function(t){function e(e,n,a,r){var o=t.call(this,e)||this;return o.store=e,o.injector=n,o.cd=a,o.componentFactoryResolver=r,o.closeEntityDetails=new i.EventEmitter,o.entityUpdated=new i.EventEmitter,o.entityAction=new i.EventEmitter,o.isEditValue=!1,o.selectedTab=0,o.entityTypes=p.b,o.subscriptions=[],o.viewInited=!1,o}return Object(c.d)(e,t),Object.defineProperty(e.prototype,"entityId",{set:function(t){t&&t!==this.currentEntityId&&(this.currentEntityId=t,this.reload())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"entitiesTableConfig",{get:function(){return this.entitiesTableConfigValue},set:function(t){this.entitiesTableConfigValue!==t&&(this.entitiesTableConfigValue=t,this.entitiesTableConfigValue&&(this.currentEntityId=null,this.isEdit=!1,this.entity=null,this.init()))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isEdit",{get:function(){return this.isEditValue},set:function(t){this.isEditValue=t,this.entityComponent&&(this.entityComponent.isEdit=t),this.entityTabsComponent&&(this.entityTabsComponent.isEdit=t)},enumerable:!1,configurable:!0}),e.prototype.init=function(){this.translations=this.entitiesTableConfig.entityTranslations,this.resources=this.entitiesTableConfig.entityResources,this.buildEntityComponent()},e.prototype.clearSubscriptions=function(){this.subscriptions.forEach((function(t){t.unsubscribe()})),this.subscriptions.length=0},e.prototype.ngOnDestroy=function(){t.prototype.ngOnDestroy.call(this),this.clearSubscriptions()},e.prototype.buildEntityComponent=function(){var t=this;this.clearSubscriptions(),this.entityComponentRef&&(this.entityComponentRef.destroy(),this.entityComponentRef=null);var e=this.componentFactoryResolver.resolveComponentFactory(this.entitiesTableConfig.entityComponent),n=this.entityDetailsFormAnchor.viewContainerRef;n.clear();var a=i.Injector.create({providers:[{provide:"entity",useValue:this.entity},{provide:"entitiesTableConfig",useValue:this.entitiesTableConfig}],parent:this.injector});this.entityComponentRef=n.createComponent(e,0,a),this.entityComponent=this.entityComponentRef.instance,this.entityComponent.isEdit=this.isEdit,this.detailsForm=this.entityComponent.entityForm,this.subscriptions.push(this.entityComponent.entityAction.subscribe((function(e){t.entityAction.emit(e)}))),this.buildEntityTabsComponent(),this.subscriptions.push(this.entityComponent.entityForm.valueChanges.subscribe((function(){t.cd.detectChanges()})))},e.prototype.buildEntityTabsComponent=function(){var t=this;this.entityTabsComponentRef&&(this.entityTabsComponentRef.destroy(),this.entityTabsComponentRef=null);var e=this.entityTabsAnchor.viewContainerRef;if(e.clear(),this.entityTabsComponent=null,this.entitiesTableConfig.entityTabsComponent){var n=this.componentFactoryResolver.resolveComponentFactory(this.entitiesTableConfig.entityTabsComponent);this.entityTabsComponentRef=e.createComponent(n),this.entityTabsComponent=this.entityTabsComponentRef.instance,this.entityTabsComponent.isEdit=this.isEdit,this.entityTabsComponent.entitiesTableConfig=this.entitiesTableConfig,this.entityTabsComponent.detailsForm=this.detailsForm,this.subscriptions.push(this.entityTabsComponent.entityTabsChanged.subscribe((function(e){e&&(t.viewInited?(t.matTabGroup._tabs.reset(Object(c.g)(t.inclusiveTabs.toArray(),e)),t.matTabGroup._tabs.notifyOnChanges()):t.pendingTabs=e)})))}},e.prototype.hideDetailsTabs=function(){return this.isEditValue&&this.entitiesTableConfig.hideDetailsTabsOnEdit},e.prototype.reload=function(){var t=this;this.isEdit=!1,this.entitiesTableConfig.loadEntity(this.currentEntityId).subscribe((function(e){t.entity=e,t.entityComponent.entity=e,t.entityTabsComponent&&(t.entityTabsComponent.entity=e)}))},e.prototype.onCloseEntityDetails=function(){this.closeEntityDetails.emit()},e.prototype.onToggleEditMode=function(t){t?(this.isEdit=t,this.editingEntity=Object(f.e)(this.entity),this.entityComponent.entity=this.editingEntity,this.entityTabsComponent&&(this.entityTabsComponent.entity=this.editingEntity),this.entitiesTableConfig.hideDetailsTabsOnEdit&&(this.selectedTab=0)):(this.entityComponent.entity=this.entity,this.entityTabsComponent&&(this.entityTabsComponent.entity=this.entity),this.isEdit=t)},e.prototype.helpLinkId=function(){return this.resources.helpLinkIdForEntity&&this.entityComponent.entityForm?this.resources.helpLinkIdForEntity(this.entityComponent.entityForm.getRawValue()):this.resources.helpLinkId},e.prototype.saveEntity=function(){var t,e=this;if(this.detailsForm.valid){var n=Object(c.a)(Object(c.a)({},this.editingEntity),this.entityComponent.entityFormValue());this.editingEntity.hasOwnProperty("additionalInfo")&&(n.additionalInfo=Object(f.B)(this.editingEntity.additionalInfo,null===(t=this.entityComponent.entityFormValue())||void 0===t?void 0:t.additionalInfo)),this.entitiesTableConfig.saveEntity(n).subscribe((function(t){e.entity=t,e.entityComponent.entity=t,e.entityTabsComponent&&(e.entityTabsComponent.entity=t),e.isEdit=!1,e.entityUpdated.emit(e.entity)}))}},e.prototype.ngAfterViewInit=function(){this.viewInited=!0,this.pendingTabs&&(this.matTabGroup._tabs.reset(Object(c.g)(this.inclusiveTabs.toArray(),this.pendingTabs)),this.matTabGroup._tabs.notifyOnChanges(),this.pendingTabs=null)},e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](h.Store),i["\u0275\u0275directiveInject"](i.Injector),i["\u0275\u0275directiveInject"](i.ChangeDetectorRef),i["\u0275\u0275directiveInject"](i.ComponentFactoryResolver))},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["tb-entity-details-panel"]],viewQuery:function(t,e){var n;(1&t&&(i["\u0275\u0275staticViewQuery"](x,!0),i["\u0275\u0275staticViewQuery"](C,!0),i["\u0275\u0275staticViewQuery"](m.MatTabGroup,!0),i["\u0275\u0275viewQuery"](m.MatTab,!0)),2&t)&&(i["\u0275\u0275queryRefresh"](n=i["\u0275\u0275loadQuery"]())&&(e.entityDetailsFormAnchor=n.first),i["\u0275\u0275queryRefresh"](n=i["\u0275\u0275loadQuery"]())&&(e.entityTabsAnchor=n.first),i["\u0275\u0275queryRefresh"](n=i["\u0275\u0275loadQuery"]())&&(e.matTabGroup=n.first),i["\u0275\u0275queryRefresh"](n=i["\u0275\u0275loadQuery"]())&&(e.inclusiveTabs=n))},inputs:{entityId:"entityId",entitiesTableConfig:"entitiesTableConfig"},outputs:{closeEntityDetails:"closeEntityDetails",entityUpdated:"entityUpdated",entityAction:"entityAction"},features:[i["\u0275\u0275InheritDefinitionFeature"]],decls:11,vars:15,consts:[["fxFlex","",3,"headerTitle","headerSubtitle","isReadOnly","isEdit","theForm","closeDetails","toggleDetailsEditMode","applyDetails"],[1,"details-buttons"],[3,"tb-help"],["fxFlex","",1,"tb-absolute-fill",3,"ngClass","selectedIndex","selectedIndexChange"],[3,"label"],["entityDetailsForm",""],["entityTabs",""]],template:function(t,e){1&t&&(i["\u0275\u0275elementStart"](0,"tb-details-panel",0),i["\u0275\u0275listener"]("closeDetails",(function(){return e.onCloseEntityDetails()}))("toggleDetailsEditMode",(function(t){return e.onToggleEditMode(t)}))("applyDetails",(function(){return e.saveEntity()})),i["\u0275\u0275pipe"](1,"translate"),i["\u0275\u0275elementStart"](2,"div",1),i["\u0275\u0275element"](3,"div",2),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](4,"mat-tab-group",3),i["\u0275\u0275listener"]("selectedIndexChange",(function(t){return e.selectedTab=t})),i["\u0275\u0275elementStart"](5,"mat-tab",4),i["\u0275\u0275pipe"](6,"translate"),i["\u0275\u0275element"](7,"tb-anchor",null,5),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](9,"tb-anchor",null,6),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()),2&t&&(i["\u0275\u0275propertyInterpolate"]("headerSubtitle",i["\u0275\u0275pipeBind1"](1,9,e.translations.details)),i["\u0275\u0275property"]("headerTitle",e.entitiesTableConfig.entityTitle(e.entity))("isReadOnly",e.entitiesTableConfig.detailsReadonly(e.entity))("isEdit",e.isEditValue)("theForm",e.detailsForm),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("tb-help",e.helpLinkId()),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngClass",i["\u0275\u0275pureFunction1"](13,S,e.hideDetailsTabs()))("selectedIndex",e.selectedTab),i["\u0275\u0275advance"](1),i["\u0275\u0275propertyInterpolate"]("label",i["\u0275\u0275pipeBind1"](6,11,"details.details")))},directives:[l.a,g.b,y.a,m.MatTabGroup,a.NgClass,b.b,m.MatTab,u.a],pipes:[v.TranslatePipe],styles:["[_nghost-%COMP%]{width:100%;height:100%;display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column}[_nghost-%COMP%]     tb-details-panel>.mat-content>.mat-tab-group>.mat-tab-body-wrapper{position:absolute;top:49px;left:0;right:0;bottom:0}[_nghost-%COMP%]     tb-details-panel>.mat-content>.mat-tab-group>.mat-tab-header .mat-tab-label{min-width:40px}"],changeDetection:0}),e}(d.a);!function(){i["\u0275setClassMetadata"](w,[{type:i.Component,args:[{selector:"tb-entity-details-panel",templateUrl:"./entity-details-panel.component.html",styleUrls:["./entity-details-panel.component.scss"],changeDetection:i.ChangeDetectionStrategy.OnPush}]}],(function(){return[{type:h.Store},{type:i.Injector},{type:i.ChangeDetectorRef},{type:i.ComponentFactoryResolver}]}),{closeEntityDetails:[{type:i.Output}],entityUpdated:[{type:i.Output}],entityAction:[{type:i.Output}],entityDetailsFormAnchor:[{type:i.ViewChild,args:["entityDetailsForm",{static:!0}]}],entityTabsAnchor:[{type:i.ViewChild,args:["entityTabs",{static:!0}]}],matTabGroup:[{type:i.ViewChild,args:[m.MatTabGroup,{static:!0}]}],inclusiveTabs:[{type:i.ViewChildren,args:[m.MatTab]}],entityId:[{type:i.Input}],entitiesTableConfig:[{type:i.Input}]})}();var E=n("5pw5"),I=n("igfJ"),O=n("dSnI"),T=n("mXAo"),M=n("enJx"),F=n("jkF6"),P=n("o3UX"),D=n("eOYM"),k=n("AAbs"),j=n("Mldr"),A=n("Rm96"),_=n("eeD6"),L=n("ncEg"),V=n("BOYq"),R=n("CRwc"),N=n("0dMK"),G=n("wIJ8"),B=n("fYjj"),U=n("EWcq"),q=n("c3m7"),W=n("hqxT"),z=n("0WnP"),K=n("+Xys"),H=n("JA3I"),$=n("O5Hl"),Q=n("jhTr"),X=n("leY2"),Y=n("EYOO"),J=n("9kgB"),Z=n("3bvz"),tt=n("P0tZ"),et=n("LqAV"),nt=n("Grun"),it=n("g8Nv"),at=n("txsh"),rt=n("9HAa"),ot=n("ou6H"),st=n("3MWt"),lt=n("XCsc"),ct=n("LpWh"),dt=n("GdA0"),pt=n("wst2"),ut=n("6opy"),mt=n("C6Vs"),ft=n("iOaI"),ht=n("RFBu"),gt=n("IfZf"),yt=n("qlrG"),bt=n("91qg"),vt=n("kN7V"),xt=n("HX6g"),Ct=n("mcsV"),St=n("ct/f"),wt=n("UGF7"),Et=n("HvOk"),It=n("kHY0"),Ot=n("pf+U"),Tt=n("x7Md"),Mt=n("xze0"),Ft=n("A1kC"),Pt=n("W1QD"),Dt=n("S0ZR"),kt=n("cXYG"),jt=n("Vbuf"),At=n("oook"),_t=n("Nw2X"),Lt=n("RX5c"),Vt=n("NPtW"),Rt=n("TpGD"),Nt=n("ec17"),Gt=n("QTrg"),Bt=n("8yrD"),Ut=n("6oqA"),qt=n("p4Q/"),Wt=n("Tu+t"),zt=n("3Pt+"),Kt=n("8LU1"),Ht=n("H3So"),$t=function(){function t(t,e){this.store=t,this.fb=e,this.propagateChange=function(t){}}return Object.defineProperty(t.prototype,"required",{get:function(){return this.requiredValue},set:function(t){this.requiredValue=Object(Kt.coerceBooleanProperty)(t)},enumerable:!1,configurable:!0}),t.prototype.registerOnChange=function(t){this.propagateChange=t},t.prototype.registerOnTouched=function(t){},t.prototype.ngOnInit=function(){var t=this;this.lwm2mDeviceProfileTransportConfigurationFormGroup=this.fb.group({configuration:[null,zt.Validators.required]}),this.lwm2mDeviceProfileTransportConfigurationFormGroup.valueChanges.subscribe((function(){t.updateModel()}))},t.prototype.setDisabledState=function(t){this.disabled=t,this.disabled?this.lwm2mDeviceProfileTransportConfigurationFormGroup.disable({emitEvent:!1}):this.lwm2mDeviceProfileTransportConfigurationFormGroup.enable({emitEvent:!1})},t.prototype.writeValue=function(t){this.lwm2mDeviceProfileTransportConfigurationFormGroup.patchValue({configuration:t},{emitEvent:!1})},t.prototype.updateModel=function(){var t=null;this.lwm2mDeviceProfileTransportConfigurationFormGroup.valid&&(t=this.lwm2mDeviceProfileTransportConfigurationFormGroup.getRawValue().configuration),this.propagateChange(t)},t.\u0275fac=function(e){return new(e||t)(i["\u0275\u0275directiveInject"](h.Store),i["\u0275\u0275directiveInject"](zt.FormBuilder))},t.\u0275cmp=i["\u0275\u0275defineComponent"]({type:t,selectors:[["tb-lwm2m-device-profile-transport-configuration"]],inputs:{required:"required",disabled:"disabled"},features:[i["\u0275\u0275ProvidersFeature"]([{provide:zt.NG_VALUE_ACCESSOR,useExisting:Object(i.forwardRef)((function(){return t})),multi:!0}])],decls:3,vars:5,consts:[[2,"padding-bottom","16px",3,"formGroup"],["formControlName","configuration",3,"required","label"]],template:function(t,e){1&t&&(i["\u0275\u0275elementStart"](0,"form",0),i["\u0275\u0275element"](1,"tb-json-object-edit",1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&t&&(i["\u0275\u0275property"]("formGroup",e.lwm2mDeviceProfileTransportConfigurationFormGroup),i["\u0275\u0275advance"](1),i["\u0275\u0275propertyInterpolate"]("label",i["\u0275\u0275pipeBind1"](2,3,"device-profile.transport-type-lwm2m")),i["\u0275\u0275property"]("required",e.required))},directives:[zt["\u0275angular_packages_forms_forms_y"],zt.NgControlStatusGroup,zt.FormGroupDirective,Ht.a,zt.NgControlStatus,zt.FormControlName,zt.RequiredValidator],pipes:[v.TranslatePipe],encapsulation:2}),t}();!function(){i["\u0275setClassMetadata"]($t,[{type:i.Component,args:[{selector:"tb-lwm2m-device-profile-transport-configuration",templateUrl:"./lwm2m-device-profile-transport-configuration.component.html",styleUrls:[],providers:[{provide:zt.NG_VALUE_ACCESSOR,useExisting:Object(i.forwardRef)((function(){return $t})),multi:!0}]}]}],(function(){return[{type:h.Store},{type:zt.FormBuilder}]}),{required:[{type:i.Input}],disabled:[{type:i.Input}]})}();var Qt=n("nc6G"),Xt=n("em8L"),Yt=n("gKbb"),Jt=n("96Yx"),Zt=n("z5iZ"),te=n("9joC"),ee=n("eIDA"),ne=n("eriv"),ie=n("E4Bx"),ae=n("xkYi"),re=n("V4k/"),oe=n("TRkj"),se=n("10n/"),le=n("4Nnk"),ce=n("Dgsq"),de=n("IVUU"),pe=n("lVMo"),ue=n("JoHb"),me=n("OUQ4"),fe=n("PWf0"),he=n("Mfyf"),ge=n("Yhx1"),ye=n("9Q2s"),be=n("Xbih"),ve=n("dmmb"),xe=n("Qrxw"),Ce=n("cp0P"),Se=n("LRne"),we=n("tyNb"),Ee=function(){function t(t,e,n,i){this.router=t,this.route=e,this.ngZone=n,this.statesControllerService=i,this.stateObject=[],this.rxSubscriptions=new Array,this.inited=!1}return Object.defineProperty(t.prototype,"isMobile",{get:function(){return this.isMobileValue},set:function(t){this.isMobileValue!==t&&(this.isMobileValue=t,this.inited&&this.onMobileChanged())},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"state",{get:function(){return this.stateValue},set:function(t){this.stateValue!==t&&(this.stateValue=t,this.inited&&this.onStateIdChanged())},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dashboardId",{get:function(){return this.dashboardIdValue},set:function(t){this.dashboardIdValue!==t&&(this.dashboardIdValue=t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"states",{get:function(){return this.statesValue},set:function(t){this.statesValue!==t&&(this.statesValue=t,this.inited&&this.onStatesChanged())},enumerable:!1,configurable:!0}),t.prototype.ngOnInit=function(){var t=this;this.syncStateWithQueryParam&&this.rxSubscriptions.push(this.route.queryParamMap.subscribe((function(e){var n=t.route.snapshot.params.dashboardId||"";if(t.dashboardId===n){var i=t.decodeStateParam(e.get("state"));t.currentState!==i&&(t.currentState=i,t.inited&&t.onStateChanged())}}))),this.init(),this.inited=!0},t.prototype.ngOnDestroy=function(){this.rxSubscriptions.forEach((function(t){t.unsubscribe()})),this.rxSubscriptions.length=0},t.prototype.updateStateParam=function(t){var e=this;if(this.currentState=t,this.syncStateWithQueryParam){var n={state:this.currentState};this.ngZone.run((function(){e.router.navigate([],{relativeTo:e.route,queryParams:n,queryParamsHandling:"merge"})}))}},t.prototype.openRightLayout=function(){this.dashboardCtrl.openRightLayout()},t.prototype.preserveState=function(){this.statesControllerService.preserveStateControllerState(this.stateControllerInstanceId,this.stateObject)},t.prototype.cleanupPreservedStates=function(){this.statesControllerService.cleanupPreservedStates()},t.prototype.reInit=function(){this.preservedState=null,this.currentState=this.decodeStateParam(this.route.snapshot.queryParamMap.get("state")),this.init()},t.prototype.decodeStateParam=function(t){return null!==t?decodeURIComponent(t):null},t.\u0275fac=function(e){return new(e||t)(i["\u0275\u0275directiveInject"](we.Router),i["\u0275\u0275directiveInject"](we.ActivatedRoute),i["\u0275\u0275directiveInject"](i.NgZone),i["\u0275\u0275directiveInject"](xe.a))},t.\u0275dir=i["\u0275\u0275defineDirective"]({type:t}),t}();!function(){i["\u0275setClassMetadata"](Ee,[{type:i.Directive}],(function(){return[{type:we.Router},{type:we.ActivatedRoute},{type:i.NgZone},{type:xe.a}]}),null)}();var Ie=n("OiFK"),Oe=n("4j5O"),Te=n("21Fy"),Me=n("vkgz"),Fe=n("lJxs"),Pe=n("d3UM"),De=n("FKr1"),ke=function(t,e){return{fontWeight:t,cursor:e}};function je(t,e){if(1&t){var n=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"span",5),i["\u0275\u0275listener"]("click",(function(){i["\u0275\u0275restoreView"](n);var t=e.index;return i["\u0275\u0275nextContext"](2).navigatePrevState(t)})),i["\u0275\u0275text"](1),i["\u0275\u0275elementStart"](2,"span",6),i["\u0275\u0275text"](3," > "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()}if(2&t){var a=e.index,r=e.last,o=i["\u0275\u0275nextContext"](2);i["\u0275\u0275property"]("ngStyle",i["\u0275\u0275pureFunction2"](3,ke,r?"bold":"normal",r?"default":"pointer")),i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",o.getStateName(a)," "),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("fxHide",r)}}function Ae(t,e){if(1&t&&(i["\u0275\u0275elementStart"](0,"div",3),i["\u0275\u0275template"](1,je,4,6,"span",4),i["\u0275\u0275elementEnd"]()),2&t){var n=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngForOf",n.stateObject)}}function _e(t,e){if(1&t&&(i["\u0275\u0275elementStart"](0,"mat-option",9),i["\u0275\u0275text"](1),i["\u0275\u0275elementEnd"]()),2&t){var n=e.index,a=i["\u0275\u0275nextContext"](2);i["\u0275\u0275property"]("value",n),i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",a.getStateName(n)," ")}}function Le(t,e){if(1&t){var n=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"mat-select",7),i["\u0275\u0275listener"]("ngModelChange",(function(t){return i["\u0275\u0275restoreView"](n),i["\u0275\u0275nextContext"]().selectedStateIndex=t}))("ngModelChange",(function(){return i["\u0275\u0275restoreView"](n),i["\u0275\u0275nextContext"]().selectedStateIndexChanged()})),i["\u0275\u0275template"](1,_e,2,2,"mat-option",8),i["\u0275\u0275elementEnd"]()}if(2&t){var a=i["\u0275\u0275nextContext"]();i["\u0275\u0275property"]("ngModel",a.selectedStateIndex),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngForOf",a.stateObject)}}var Ve=function(t){function e(e,n,i,a,r,o,s){var l=t.call(this,e,n,i,a)||this;return l.router=e,l.route=n,l.ngZone=i,l.statesControllerService=a,l.utils=r,l.entityService=o,l.dashboardUtils=s,l.selectedStateIndex=-1,l}return Object(c.d)(e,t),e.prototype.ngOnInit=function(){t.prototype.ngOnInit.call(this)},e.prototype.ngOnDestroy=function(){t.prototype.ngOnDestroy.call(this)},e.prototype.init=function(){var t=this;if(this.preservedState)this.stateObject=this.preservedState,this.selectedStateIndex=this.stateObject.length-1,setTimeout((function(){t.gotoState(t.stateObject[t.stateObject.length-1].id,!0)}),1);else{var e=this.currentState;this.stateObject=this.parseState(e),this.selectedStateIndex=this.stateObject.length-1,setTimeout((function(){t.gotoState(t.stateObject[t.stateObject.length-1].id,!1)}),1)}},e.prototype.onMobileChanged=function(){},e.prototype.onStateIdChanged=function(){},e.prototype.onStatesChanged=function(){},e.prototype.onStateChanged=function(){this.stateObject=this.parseState(this.currentState),this.selectedStateIndex=this.stateObject.length-1,this.gotoState(this.stateObject[this.stateObject.length-1].id,!1)},e.prototype.stateControllerId=function(){return"entity"},e.prototype.getStateParams=function(){return this.stateObject&&this.stateObject.length?this.stateObject[this.stateObject.length-1].params:{}},e.prototype.openState=function(t,e,n){var i=this;this.states&&this.states[t]&&this.resolveEntity(e).subscribe((function(){var a={id:t,params:e};i.stateObject.push(a),i.selectedStateIndex=i.stateObject.length-1,i.gotoState(i.stateObject[i.stateObject.length-1].id,!0,n)}))},e.prototype.pushAndOpenState=function(t,e){var n=this;if(this.states){for(var i=0,a=t;i<a.length;i++){var r=a[i];if(!this.states[r.id])return}Object(Ce.a)(t.map((function(t){return n.resolveEntity(t.params)}))).subscribe((function(){var i;(i=n.stateObject).push.apply(i,t),n.selectedStateIndex=n.stateObject.length-1,n.gotoState(n.stateObject[n.stateObject.length-1].id,!0,e)}))}},e.prototype.updateState=function(t,e,n){var i=this;t||(t=this.getStateId()),this.states&&this.states[t]&&this.resolveEntity(e).subscribe((function(){i.stateObject[i.stateObject.length-1]={id:t,params:e},i.gotoState(i.stateObject[i.stateObject.length-1].id,!0,n)}))},e.prototype.getEntityId=function(t){var e=this.getStateParams();return t&&t.length?e[t]?e[t].entityId:null:e.entityId},e.prototype.getStateId=function(){return this.stateObject&&this.stateObject.length?this.stateObject[this.stateObject.length-1].id:""},e.prototype.getStateIdAtIndex=function(t){return this.stateObject&&this.stateObject[t]?this.stateObject[t].id:""},e.prototype.getStateIndex=function(){return this.stateObject&&this.stateObject.length?this.stateObject.length-1:-1},e.prototype.getStateParamsByStateId=function(t){var e=this.getStateObjById(t);return e?e.params:null},e.prototype.navigatePrevState=function(t){t<this.stateObject.length-1&&(this.stateObject.splice(t+1,this.stateObject.length-t-1),this.selectedStateIndex=this.stateObject.length-1,this.gotoState(this.stateObject[this.stateObject.length-1].id,!0))},e.prototype.resetState=function(){var t=this.dashboardUtils.getRootStateId(this.states);this.stateObject=[{id:t,params:{}}],this.gotoState(t,!0)},e.prototype.getStateName=function(t){var e="",n=this.stateObject[t];if(n){var i=this.states[n.id];if(i){var a=i.name;a=this.utils.customTranslation(a,a);var r=this.stateObject[t].params,o=r&&r.entityName?r.entityName:"",s=r&&r.entityLabel?r.entityLabel:"";e=Object(f.m)(a,"entityName",o),e=Object(f.m)(e,"entityLabel",s);for(var l=0,c=Object.keys(r);l<c.length;l++){var d=c[l];r[d]&&r[d].entityName&&(e=Object(f.m)(e,d+":entityName",r[d].entityName)),r[d]&&r[d].entityLabel&&(e=Object(f.m)(e,d+":entityLabel",r[d].entityLabel))}}}return e},e.prototype.selectedStateIndexChanged=function(){this.navigatePrevState(this.selectedStateIndex)},e.prototype.parseState=function(t){var e;if(t)try{e=Object(f.b)(t)}catch(a){e=[{id:null,params:{}}]}e||(e=[]),e.length||(e[0]={id:null,params:{}});var n=this.dashboardUtils.getRootStateId(this.states);e[0].id||(e[0].id=n),this.states[e[0].id]||(e[0].id=n);for(var i=e.length;i--;)e[i].id&&this.states[e[i].id]||e.splice(i,1);return e},e.prototype.gotoState=function(t,e,n){this.dashboardCtrl.openDashboardState(t,n),e&&this.updateLocation()},e.prototype.updateLocation=function(){if(this.stateObject[this.stateObject.length-1].id){var t=void 0;t=this.isDefaultState()?null:Object(f.D)(this.stateObject),this.updateStateParam(t)}},e.prototype.isDefaultState=function(){if(1===this.stateObject.length){var t=this.stateObject[0],e=this.dashboardUtils.getRootStateId(this.states);if(t.id===e&&(!t.params||Object(f.p)(t.params)))return!0}return!1},e.prototype.resolveEntity=function(t){return t&&t.targetEntityParamName&&(t=t[t.targetEntityParamName]),t&&t.entityId&&t.entityId.id&&t.entityId.entityType?this.isEntityResolved(t)?Object(Se.a)(null):this.entityService.getEntity(t.entityId.entityType,t.entityId.id,{ignoreLoading:!0,ignoreErrors:!0}).pipe(Object(Me.a)((function(e){t.entityName=e.name,t.entityLabel=e.label})),Object(Fe.a)((function(){return null}))):Object(Se.a)(null)},e.prototype.isEntityResolved=function(t){return!(!t.entityName||!t.entityName.length)},e.prototype.getStateObjById=function(t){return this.stateObject.find((function(e){return e.id===t}))},e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](we.Router),i["\u0275\u0275directiveInject"](we.ActivatedRoute),i["\u0275\u0275directiveInject"](i.NgZone),i["\u0275\u0275directiveInject"](xe.a),i["\u0275\u0275directiveInject"](Ie.a),i["\u0275\u0275directiveInject"](Te.a),i["\u0275\u0275directiveInject"](Oe.a))},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["tb-entity-state-controller"]],features:[i["\u0275\u0275InheritDefinitionFeature"]],decls:3,vars:2,consts:[[1,"entity-state-controller"],["fxLayout","row","fxLayoutAlign","start center",4,"ngIf"],[3,"ngModel","ngModelChange",4,"ngIf"],["fxLayout","row","fxLayoutAlign","start center"],["class","state-entry",3,"ngStyle","click",4,"ngFor","ngForOf"],[1,"state-entry",3,"ngStyle","click"],[1,"state-divider",3,"fxHide"],[3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(t,e){1&t&&(i["\u0275\u0275elementStart"](0,"div",0),i["\u0275\u0275template"](1,Ae,2,1,"div",1),i["\u0275\u0275template"](2,Le,2,2,"mat-select",2),i["\u0275\u0275elementEnd"]()),2&t&&(i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",!e.isMobile||1===e.stateObject.length),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",e.isMobile&&e.stateObject.length>1))},directives:[a.NgIf,g.f,g.e,a.NgForOf,a.NgStyle,b.e,b.d,Pe.MatSelect,zt.NgControlStatus,zt.NgModel,De.MatOption],styles:["[_nghost-%COMP%]{overflow:hidden}[_nghost-%COMP%]   .entity-state-controller[_ngcontent-%COMP%]   .state-divider[_ngcontent-%COMP%]{padding:0 15px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;pointer-events:none}[_nghost-%COMP%]   .entity-state-controller[_ngcontent-%COMP%]   .state-entry[_ngcontent-%COMP%]{pointer-events:all;overflow:hidden;font-size:18px;text-overflow:ellipsis;white-space:nowrap;outline:none}[_nghost-%COMP%]   .entity-state-controller[_ngcontent-%COMP%]   mat-select[_ngcontent-%COMP%]{margin:0}[_nghost-%COMP%]     mat-select .mat-select-value{max-width:200px}[_nghost-%COMP%]     mat-select .mat-select-value .mat-select-value-text{font-size:18px;font-weight:700}"]}),e}(Ee);!function(){i["\u0275setClassMetadata"](Ve,[{type:i.Component,args:[{selector:"tb-entity-state-controller",templateUrl:"./entity-state-controller.component.html",styleUrls:["./entity-state-controller.component.scss"]}]}],(function(){return[{type:we.Router},{type:we.ActivatedRoute},{type:i.NgZone},{type:xe.a},{type:Ie.a},{type:Te.a},{type:Oe.a}]}),null)}();var Re=n("CUDX"),Ne=n("M0Qk");function Ge(t,e){if(1&t&&(i["\u0275\u0275elementStart"](0,"mat-option",2),i["\u0275\u0275text"](1),i["\u0275\u0275elementEnd"]()),2&t){var n=e.$implicit,a=i["\u0275\u0275nextContext"]();i["\u0275\u0275property"]("value",n.key),i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",a.getStateName(n.key,n.value)," ")}}var Be=function(t){function e(e,n,i,a,r,o,s){var l=t.call(this,e,n,i,a)||this;return l.router=e,l.route=n,l.ngZone=i,l.statesControllerService=a,l.utils=r,l.entityService=o,l.dashboardUtils=s,l}return Object(c.d)(e,t),e.prototype.ngOnInit=function(){t.prototype.ngOnInit.call(this)},e.prototype.ngOnDestroy=function(){t.prototype.ngOnDestroy.call(this)},e.prototype.init=function(){var t=this;if(this.preservedState)this.stateObject=this.preservedState,setTimeout((function(){t.gotoState(t.stateObject[0].id,!0)}),1);else{var e=this.currentState;this.stateObject=this.parseState(e),setTimeout((function(){t.gotoState(t.stateObject[0].id,!1)}),1)}},e.prototype.onMobileChanged=function(){},e.prototype.onStateIdChanged=function(){},e.prototype.onStatesChanged=function(){},e.prototype.onStateChanged=function(){this.stateObject=this.parseState(this.currentState),this.gotoState(this.stateObject[0].id,!1)},e.prototype.stateControllerId=function(){return"default"},e.prototype.getStateParams=function(){return this.stateObject&&this.stateObject.length?this.stateObject[this.stateObject.length-1].params:{}},e.prototype.openState=function(t,e,n){if(this.states&&this.states[t]){e||(e={});var i={id:t,params:e};this.stateObject[0]=i,this.gotoState(this.stateObject[0].id,!0,n)}},e.prototype.pushAndOpenState=function(t,e){var n=t[t.length-1];this.openState(n.id,n.params,e)},e.prototype.updateState=function(t,e,n){if(t||(t=this.getStateId()),this.states&&this.states[t]){e||(e={});var i={id:t,params:e};this.stateObject[0]=i,this.gotoState(this.stateObject[0].id,!0,n)}},e.prototype.getEntityId=function(t){return null},e.prototype.getStateId=function(){return this.stateObject&&this.stateObject.length?this.stateObject[this.stateObject.length-1].id:""},e.prototype.getStateIdAtIndex=function(t){return this.stateObject&&this.stateObject[t]?this.stateObject[t].id:""},e.prototype.getStateIndex=function(){return this.stateObject&&this.stateObject.length?this.stateObject.length-1:-1},e.prototype.getStateParamsByStateId=function(t){var e=this.getStateObjById(t);return e?e.params:null},e.prototype.navigatePrevState=function(t){t<this.stateObject.length-1&&(this.stateObject.splice(t+1,this.stateObject.length-t-1),this.gotoState(this.stateObject[this.stateObject.length-1].id,!0))},e.prototype.resetState=function(){var t=this.dashboardUtils.getRootStateId(this.states);this.stateObject=[{id:t,params:{}}],this.gotoState(t,!0)},e.prototype.getStateName=function(t,e){return this.utils.customTranslation(e.name,t)},e.prototype.displayStateSelection=function(){return this.states&&Object.keys(this.states).length>1},e.prototype.selectedStateIdChanged=function(){this.gotoState(this.stateObject[0].id,!0)},e.prototype.parseState=function(t){var e;if(t)try{e=Object(f.b)(t)}catch(r){e=[{id:null,params:{}}]}if(e||(e=[]),e.length){if(e.length>1){var n=[];n.push(e[e.length-1]),e=n}}else e[0]={id:null,params:{}};var i=this.dashboardUtils.getRootStateId(this.states);e[0].id||(e[0].id=i),this.states[e[0].id]||(e[0].id=i);for(var a=e.length;a--;)e[a].id&&this.states[e[a].id]||e.splice(a,1);return e},e.prototype.gotoState=function(t,e,n){this.dashboardCtrl.dashboardCtx.state!==t&&(this.dashboardCtrl.openDashboardState(t,n),e&&this.updateLocation())},e.prototype.updateLocation=function(){if(this.stateObject[0].id){var t=Object(f.D)(this.stateObject);this.updateStateParam(t)}},e.prototype.getStateObjById=function(t){return this.stateObject.find((function(e){return e.id===t}))},e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](we.Router),i["\u0275\u0275directiveInject"](we.ActivatedRoute),i["\u0275\u0275directiveInject"](i.NgZone),i["\u0275\u0275directiveInject"](xe.a),i["\u0275\u0275directiveInject"](Ie.a),i["\u0275\u0275directiveInject"](Te.a),i["\u0275\u0275directiveInject"](Oe.a))},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["tb-default-state-controller"]],features:[i["\u0275\u0275InheritDefinitionFeature"]],decls:3,vars:5,consts:[[1,"default-state-controller",3,"fxShow","ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(t,e){1&t&&(i["\u0275\u0275elementStart"](0,"mat-select",0),i["\u0275\u0275listener"]("ngModelChange",(function(t){return e.stateObject[0].id=t}))("ngModelChange",(function(){return e.selectedStateIdChanged()})),i["\u0275\u0275template"](1,Ge,2,2,"mat-option",1),i["\u0275\u0275pipe"](2,"keyvalue"),i["\u0275\u0275elementEnd"]()),2&t&&(i["\u0275\u0275property"]("fxShow",e.displayStateSelection())("ngModel",e.stateObject[0].id),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngForOf",i["\u0275\u0275pipeBind1"](2,3,e.states)))},directives:[Pe.MatSelect,b.d,zt.NgControlStatus,zt.NgModel,a.NgForOf,De.MatOption],pipes:[a.KeyValuePipe],styles:["[_nghost-%COMP%]{width:-webkit-min-content;width:-moz-min-content;width:min-content}[_nghost-%COMP%]   mat-select.default-state-controller[_ngcontent-%COMP%]{margin:0}[_nghost-%COMP%]     mat-select.default-state-controller .mat-select-value{max-width:200px}"]}),e}(Ee);!function(){i["\u0275setClassMetadata"](Be,[{type:i.Component,args:[{selector:"tb-default-state-controller",templateUrl:"./default-state-controller.component.html",styleUrls:["./default-state-controller.component.scss"]}]}],(function(){return[{type:we.Router},{type:we.ActivatedRoute},{type:i.NgZone},{type:xe.a},{type:Ie.a},{type:Te.a},{type:Oe.a}]}),null)}();var Ue=function(){function t(t){this.statesControllerService=t,this.statesControllerService.registerStatesController("default",Be),this.statesControllerService.registerStatesController("entity",Ve)}return t.\u0275mod=i["\u0275\u0275defineNgModule"]({type:t}),t.\u0275inj=i["\u0275\u0275defineInjector"]({factory:function(e){return new(e||t)(i["\u0275\u0275inject"](xe.a))},providers:[xe.a],imports:[[a.CommonModule,r.a,Ne.a]]}),t}();void(("undefined"==typeof ngJitMode||ngJitMode)&&i["\u0275\u0275setNgModuleScope"](Ue,{declarations:[Re.a,Be,Ve],imports:[a.CommonModule,r.a,Ne.a],exports:[Re.a]}));var qe=n("0AoA"),We=n("LwFc"),ze=n("xzJA"),Ke=n("fDYr"),He=n("aMoz"),$e=n("oPR/"),Qe=n("Absi"),Xe=n("LBt+"),Ye=n("0IaG"),Je=n("gmuX"),Ze=n("/t3+"),tn=n("bTqV"),en=n("NFeN"),nn=n("bv9b"),an=["dashboardContent"];function rn(t,e){1&t&&i["\u0275\u0275element"](0,"mat-progress-bar",11)}function on(t,e){1&t&&i["\u0275\u0275element"](0,"div",12)}var sn=function(t){function e(e,n,i,a){var r=t.call(this,e,n,a)||this;return r.store=e,r.router=n,r.data=i,r.dialogRef=a,r.dashboard=r.data.dashboard,r.state=r.data.state,r.title=r.data.title,r.hideToolbar=r.data.hideToolbar,r.dialogStyle={},r.data.width&&(r.dialogStyle.width=r.data.width+"vw"),r.data.height&&(r.dialogStyle.height=r.data.height+"vh"),r}return Object(c.d)(e,t),e.prototype.ngOnInit=function(){},e.prototype.close=function(){this.dialogRef.close(null)},e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](h.Store),i["\u0275\u0275directiveInject"](we.Router),i["\u0275\u0275directiveInject"](Ye.MAT_DIALOG_DATA),i["\u0275\u0275directiveInject"](Ye.MatDialogRef))},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["tb-embed-dashboard-dialog"]],viewQuery:function(t,e){var n;(1&t&&i["\u0275\u0275staticViewQuery"](an,!0,i.ViewContainerRef),2&t)&&(i["\u0275\u0275queryRefresh"](n=i["\u0275\u0275loadQuery"]())&&(e.dashboardContentContainer=n.first))},features:[i["\u0275\u0275InheritDefinitionFeature"]],decls:18,vars:16,consts:[["fxLayout","column",1,"dashboard-state-dialog",3,"ngStyle"],["color","primary"],["fxFlex",""],["mat-icon-button","","type","button",3,"click"],[1,"material-icons"],["color","warn","mode","indeterminate",4,"ngIf"],["style","height: 4px;",4,"ngIf"],["mat-dialog-content","","fxFlex","","fxLayout","column",1,"dashboard-state-dialog-content",2,"padding","8px"],[2,"width","100%","height","100%",3,"embedded","syncStateWithQueryParam","hideToolbar","currentState","dashboard"],["mat-dialog-actions","","fxLayoutAlign","end center"],["mat-button","","color","primary","type","button","cdkFocusInitial","",3,"disabled","click"],["color","warn","mode","indeterminate"],[2,"height","4px"]],template:function(t,e){1&t&&(i["\u0275\u0275elementStart"](0,"div",0),i["\u0275\u0275elementStart"](1,"mat-toolbar",1),i["\u0275\u0275elementStart"](2,"h2"),i["\u0275\u0275text"](3),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](4,"span",2),i["\u0275\u0275elementStart"](5,"button",3),i["\u0275\u0275listener"]("click",(function(){return e.close()})),i["\u0275\u0275elementStart"](6,"mat-icon",4),i["\u0275\u0275text"](7,"close"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](8,rn,1,0,"mat-progress-bar",5),i["\u0275\u0275pipe"](9,"async"),i["\u0275\u0275template"](10,on,1,0,"div",6),i["\u0275\u0275pipe"](11,"async"),i["\u0275\u0275elementStart"](12,"div",7),i["\u0275\u0275element"](13,"tb-dashboard-page",8),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](14,"div",9),i["\u0275\u0275elementStart"](15,"button",10),i["\u0275\u0275listener"]("click",(function(){return e.close()})),i["\u0275\u0275pipe"](16,"async"),i["\u0275\u0275text"](17," Close "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()),2&t&&(i["\u0275\u0275property"]("ngStyle",e.dialogStyle),i["\u0275\u0275advance"](3),i["\u0275\u0275textInterpolate"](e.title),i["\u0275\u0275advance"](5),i["\u0275\u0275property"]("ngIf",i["\u0275\u0275pipeBind1"](9,10,e.isLoading$)),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngIf",!i["\u0275\u0275pipeBind1"](11,12,e.isLoading$)),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("embedded",!0)("syncStateWithQueryParam",!1)("hideToolbar",e.hideToolbar)("currentState",e.state)("dashboard",e.dashboard),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("disabled",i["\u0275\u0275pipeBind1"](16,14,e.isLoading$)))},directives:[g.f,a.NgStyle,b.e,Ze.MatToolbar,g.b,tn.MatButton,en.MatIcon,a.NgIf,Ye.MatDialogContent,be.a,Ye.MatDialogActions,g.e,nn.MatProgressBar],pipes:[a.AsyncPipe],styles:["[_nghost-%COMP%]   .dashboard-state-dialog[_ngcontent-%COMP%]   .mat-dialog-content.dashboard-state-dialog-content[_ngcontent-%COMP%]{max-height:100%}@media screen and (max-width:599px){[_nghost-%COMP%]   .dashboard-state-dialog[_ngcontent-%COMP%]{width:100%!important;height:100%!important}}@media screen and (min-width:600px){[_nghost-%COMP%]   .dashboard-state-dialog[_ngcontent-%COMP%]{width:480px;height:600px}}@media screen and (min-width:960px){[_nghost-%COMP%]   .dashboard-state-dialog[_ngcontent-%COMP%]{width:768px;height:600px}}@media screen and (min-width:1280px){[_nghost-%COMP%]   .dashboard-state-dialog[_ngcontent-%COMP%]{width:1000px;height:800px}}"]}),e}(Je.a);!function(){i["\u0275setClassMetadata"](sn,[{type:i.Component,args:[{selector:"tb-embed-dashboard-dialog",templateUrl:"./embed-dashboard-dialog.component.html",styleUrls:["./embed-dashboard-dialog.component.scss"]}]}],(function(){return[{type:h.Store},{type:we.Router},{type:void 0,decorators:[{type:i.Inject,args:[Ye.MAT_DIALOG_DATA]}]},{type:Ye.MatDialogRef}]}),{dashboardContentContainer:[{type:i.ViewChild,args:["dashboardContent",{read:i.ViewContainerRef,static:!0}]}]})}();var ln=n("vY+p"),cn=n("0Dj+"),dn=n("HlBW"),pn=n("1wU7"),un=n("8RXW"),mn=n("rezs"),fn=n("8m5z"),hn=n("sjz8"),gn=n("2+wj"),yn=n("49Ji"),bn=n("Ww7o"),vn=n("0Miz"),xn=n("WEPN"),Cn=n("HKgb"),Sn=n("efJA"),wn=n("k81w"),En=n("j+T/"),In=n("Bwpe"),On=n("zhJb"),Tn=n("uxh+"),Mn=n("/NrD"),Fn=n("gl+N"),Pn=n("pd1A"),Dn=n("XMqU"),kn=n("6XAR"),jn=n("4bh6"),An=n("16lU"),_n=n("TSBb"),Ln=n("EdYI"),Vn=n("8lD5"),Rn=n("89S7"),Nn=n("rhBB"),Gn=n("91Tk"),Bn=n("wU4P"),Un=n("5U8l"),qn=n("IVsW"),Wn=n("5yRj"),zn=n("E9wx"),Kn=n("yAAm"),Hn=n("Rf0i"),$n=n("KEZ6"),Qn=n("4t+N"),Xn=n("cH1L"),Yn=n("bSwM"),Jn=n("Wp6s"),Zn=n("ihCf"),ti=n("kmnG"),ei=n("qFsG"),ni=n("dNgK"),ii=n("vxfF"),ai=n("XhcP"),ri=n("STbY"),oi=n("zkoq"),si=n("Qu3c"),li=n("+0xr"),ci=n("M9IT"),di=n("Dh3D"),pi=n("Xa2L"),ui=n("f0Cb"),mi=n("QibW"),fi=n("1jcm"),hi=n("iadO"),gi=n("xoCY"),yi=n("YhS8"),bi=n("5RNC"),vi=n("7EHt"),xi=n("xHqg"),Ci=n("/1cH"),Si=n("A5z7"),wi=n("MutI"),Ei=n("Ljk9"),Ii=n("Dvla"),Oi=n("zpSk"),Ti=n("rDax"),Mi=n("iQdX"),Fi=n("yl57"),Pi=n("R9Cn"),Di=n("joFe"),ki=n("+C6U"),ji=n("/Vd+"),Ai=n("oXES"),_i=n("jXr5"),Li=n("ikDa"),Vi=n("VYz+"),Ri=n("SReA"),Ni=n("nii4"),Gi=n("jy/V"),Bi=n("nfcV"),Ui=n("RQSP"),qi=n("0HhY"),Wi=n("XGqO"),zi=n("aiIW"),Ki=n("FEiE"),Hi=n("NOb7"),$i=n("B8ns"),Qi=n("HeHW"),Xi=n("dUlv"),Yi=n("4Th+"),Ji=n("hwpn"),Zi=n("bdDX"),ta=n("10j8"),ea=n("Ki3a"),na=n("z36O"),ia=n("fjw6"),aa=n("d5eY"),ra=n("T4sd"),oa=n("WKhm"),sa=n("EbnC"),la=n("9DSm"),ca=n("uKK+"),da=function(){function t(){}return t.\u0275mod=i["\u0275\u0275defineNgModule"]({type:t}),t.\u0275inj=i["\u0275\u0275defineInjector"]({factory:function(e){return new(e||t)},providers:[V.a,it.a,rt.a,{provide:ln.a,useValue:sn}],imports:[[a.CommonModule,r.a,pt.a,Ue]]}),t}();void(("undefined"==typeof ngJitMode||ngJitMode)&&i["\u0275\u0275setNgModuleScope"](da,{declarations:[s.a,o.a,l.a,w,I.a,E.a,dt.a,O.a,T.a,M.a,F.a,K.a,P.a,D.a,k.a,j.a,A.b,N.b,G.a,ft.a,U.a,W.a,_.a,L.a,R.a,B.a,q.a,z.a,H.a,$.a,X.a,Q.a,Y.b,J.a,Z.a,tt.a,et.a,nt.a,at.a,ot.a,lt.a,ut.a,mt.a,st.a,ct.a,ht.a,gt.a,yt.a,bt.a,St.a,vt.a,xt.a,Ct.a,wt.a,It.a,Et.a,Ot.a,ee.a,Tt.a,Mt.b,Ft.a,Pt.a,Dt.a,kt.a,jt.a,ue.a,me.a,Lt.a,At.a,_t.a,qt.a,Vt.a,Rt.a,Gt.a,Wt.a,$t,Qt.a,Bt.a,Jt.a,Zt.a,pe.a,te.a,Yt.a,Xt.a,Nt.a,Ut.a,ne.a,ie.a,le.a,ae.a,re.a,oe.a,se.a,ye.a,ce.a,de.a,fe.a,he.a,ge.a,ve.a,be.a,qe.a,We.a,ze.a,Ke.a,He.a,$e.a,Qe.a,Xe.a,sn,cn.b],imports:[a.CommonModule,r.a,pt.a,Ue],exports:[s.a,o.a,l.a,w,I.a,T.a,M.a,K.a,D.a,k.a,G.a,ft.a,U.a,W.a,_.a,L.a,R.a,B.a,q.a,z.a,H.a,$.a,X.a,Q.a,J.a,Z.a,tt.a,et.a,nt.a,at.a,ot.a,lt.a,ct.a,ut.a,mt.a,ht.a,gt.a,yt.a,bt.a,St.a,vt.a,xt.a,Ct.a,wt.a,It.a,Et.a,Ot.a,ee.a,Tt.a,Ft.a,jt.a,Lt.a,At.a,_t.a,qt.a,Vt.a,Rt.a,Gt.a,Wt.a,$t,Qt.a,Bt.a,Jt.a,Zt.a,pe.a,te.a,Yt.a,Xt.a,Nt.a,Ut.a,ne.a,ie.a,oe.a,se.a,ye.a,le.a,re.a,ce.a,de.a,ae.a,fe.a,he.a,ge.a,ve.a,be.a,qe.a,We.a,ze.a,Ke.a,He.a,$e.a,Qe.a,Xe.a,sn,cn.b]})),i["\u0275\u0275setComponentScope"](s.a,[a.NgClass,a.NgComponentOutlet,a.NgForOf,a.NgIf,a.NgTemplateOutlet,a.NgStyle,a.NgSwitch,a.NgSwitchCase,a.NgSwitchDefault,a.NgPlural,a.NgPluralCase,dn.a,pn.a,un.a,mn.b,fn.a,hn.a,gn.a,yn.a,u.a,y.a,bn.a,vn.a,xn.a,Cn.a,Sn.a,wn.a,En.b,In.a,On.a,Tn.a,Mn.a,Fn.a,Pn.a,Dn.a,kn.a,jn.a,An.a,_n.a,Ln.a,Vn.a,Rn.a,Nn.a,Gn.a,Bn.a,Un.a,qn.a,Wn.a,Ht.a,zn.a,Kn.a,Hn.c,Hn.a,Hn.b,$n.a,Qn.a,tn.MatButton,tn.MatAnchor,Xn.b,Yn.MatCheckbox,Yn.MatCheckboxRequiredValidator,en.MatIcon,Jn.MatCard,Jn.MatCardHeader,Jn.MatCardTitleGroup,Jn.MatCardContent,Jn.MatCardTitle,Jn.MatCardSubtitle,Jn.MatCardActions,Jn.MatCardFooter,Jn.MatCardSmImage,Jn.MatCardMdImage,Jn.MatCardLgImage,Jn.MatCardImage,Jn.MatCardXlImage,Jn.MatCardAvatar,nn.MatProgressBar,Zn.b,Zn.c,ti.MatError,ti.MatFormField,ti.MatHint,ti.MatLabel,ti.MatPlaceholder,ti.MatPrefix,ti.MatSuffix,ei.MatInput,ei.MatTextareaAutosize,ni.MatSnackBarContainer,ii.b,ai.MatDrawer,ai.MatDrawerContainer,ai.MatDrawerContent,ai.MatSidenav,ai.MatSidenavContainer,ai.MatSidenavContent,Ze.MatToolbar,Ze.MatToolbarRow,ri._MatMenu,ri.MatMenuItem,ri.MatMenuTrigger,ri.MatMenuContent,oi.MatGridList,oi.MatGridTile,oi.MatGridTileText,De.MatLine,oi.MatGridTileHeaderCssMatStyler,oi.MatGridTileFooterCssMatStyler,oi.MatGridAvatarCssMatStyler,Ye.MatDialogContainer,Ye.MatDialogClose,Ye.MatDialogTitle,Ye.MatDialogContent,Ye.MatDialogActions,Pe.MatSelect,Pe.MatSelectTrigger,De.MatOption,De.MatOptgroup,si.MatTooltip,si.TooltipComponent,li.MatTable,li.MatHeaderCellDef,li.MatHeaderRowDef,li.MatColumnDef,li.MatCellDef,li.MatRowDef,li.MatFooterCellDef,li.MatFooterRowDef,li.MatHeaderCell,li.MatCell,li.MatFooterCell,li.MatHeaderRow,li.MatRow,li.MatFooterRow,li.MatNoDataRow,li.MatTextColumn,ci.MatPaginator,di.MatSort,di.MatSortHeader,pi.MatProgressSpinner,pi.MatSpinner,ui.MatDivider,m.MatTabGroup,m.MatTabLabel,m.MatTab,m.MatTabNav,m.MatTabLink,m.MatTabContent,mi.MatRadioGroup,mi.MatRadioButton,fi.MatSlideToggleRequiredValidator,fi.MatSlideToggle,hi.MatCalendar,hi.MatCalendarBody,hi.MatDatepicker,hi.MatDatepickerContent,hi.MatDatepickerInput,hi.MatDatepickerToggle,hi.MatDatepickerToggleIcon,hi.MatMonthView,hi.MatYearView,hi.MatMultiYearView,hi.MatCalendarHeader,hi.MatDateRangeInput,hi.MatStartDate,hi.MatEndDate,hi.MatDateRangePicker,gi.b,gi.c,gi.d,gi.a,gi.i,gi.f,gi.e,gi.h,gi.j,gi.l,yi.a,yi.b,bi.MatSlider,vi.MatAccordion,vi.MatExpansionPanel,vi.MatExpansionPanelActionRow,vi.MatExpansionPanelHeader,vi.MatExpansionPanelTitle,vi.MatExpansionPanelDescription,vi.MatExpansionPanelContent,xi.MatHorizontalStepper,xi.MatVerticalStepper,xi.MatStep,xi.MatStepLabel,xi.MatStepper,xi.MatStepperNext,xi.MatStepperPrevious,xi.MatStepHeader,xi.MatStepperIcon,Ci.MatAutocomplete,Ci.MatAutocompleteTrigger,Ci.MatAutocompleteOrigin,Si.MatChipList,Si.MatChip,Si.MatChipInput,Si.MatChipRemove,Si.MatChipAvatar,Si.MatChipTrailingIcon,wi.MatList,wi.MatNavList,wi.MatListItem,wi.MatListAvatarCssMatStyler,wi.MatListIconCssMatStyler,wi.MatListSubheaderCssMatStyler,De.MatPseudoCheckbox,wi.MatSelectionList,wi.MatListOption,Ei.b,Ei.c,Ii.a,Ii.b,g.f,g.g,g.e,g.d,g.c,g.k,g.a,g.b,b.d,b.b,b.e,b.c,Oi.k,Oi.n,Oi.q,Oi.t,Oi.w,Oi.z,Oi.C,Oi.F,Oi.d,Oi.g,Oi.j,zt["\u0275angular_packages_forms_forms_y"],zt.NgSelectOption,zt["\u0275angular_packages_forms_forms_x"],zt.DefaultValueAccessor,zt.NumberValueAccessor,zt.RangeValueAccessor,zt.CheckboxControlValueAccessor,zt.SelectControlValueAccessor,zt.SelectMultipleControlValueAccessor,zt.RadioControlValueAccessor,zt.NgControlStatus,zt.NgControlStatusGroup,zt.RequiredValidator,zt.MinLengthValidator,zt.MaxLengthValidator,zt.PatternValidator,zt.CheckboxRequiredValidator,zt.EmailValidator,zt.NgModel,zt.NgModelGroup,zt.NgForm,zt.FormControlDirective,zt.FormGroupDirective,zt.FormControlName,zt.FormGroupName,zt.FormArrayName,Ti.CdkConnectedOverlay,Ti.CdkOverlayOrigin,ii.a,ii.d,ii.e,Mi.a,Fi.d,Fi.c,Pi.a,Di.a,Di.b,Di.c,ki.b,ki.c,ki.d,ki.f,ki.a,ji.g,ji.d,ji.c,ji.a,Ai.a,_i.a,Li.a,Vi.a,Ri.a,Ni.a,Gi.a,Bi.a,Ui.a,qi.a,Wi.a,zi.a,Ki.a,Hi.a,$i.a,v.TranslateDirective,Qi.a,Xi.a,Yi.a,Ji.a,Zi.a,ta.a,Re.a,s.a,o.a,l.a,w,I.a,E.a,dt.a,O.a,T.a,M.a,F.a,K.a,P.a,D.a,k.a,j.a,A.b,N.b,G.a,ft.a,U.a,W.a,_.a,L.a,R.a,B.a,q.a,z.a,H.a,$.a,X.a,Q.a,Y.b,J.a,Z.a,tt.a,et.a,nt.a,at.a,ot.a,lt.a,ut.a,mt.a,st.a,ct.a,ht.a,gt.a,yt.a,bt.a,St.a,vt.a,xt.a,Ct.a,wt.a,It.a,Et.a,Ot.a,ee.a,Tt.a,Mt.b,Ft.a,Pt.a,Dt.a,kt.a,jt.a,ue.a,me.a,Lt.a,At.a,_t.a,qt.a,Vt.a,Rt.a,Gt.a,Wt.a,$t,Qt.a,Bt.a,Jt.a,Zt.a,pe.a,te.a,Yt.a,Xt.a,Nt.a,Ut.a,ne.a,ie.a,le.a,ae.a,re.a,oe.a,se.a,ye.a,ce.a,de.a,fe.a,he.a,ge.a,ve.a,be.a,qe.a,We.a,ze.a,Ke.a,He.a,$e.a,Qe.a,Xe.a,sn,cn.b],[a.AsyncPipe,a.UpperCasePipe,a.LowerCasePipe,a.JsonPipe,a.SlicePipe,a.DecimalPipe,a.PercentPipe,a.TitleCasePipe,a.CurrencyPipe,a.DatePipe,a.I18nPluralPipe,a.I18nSelectPipe,a.KeyValuePipe,ea.a,na.a,ia.a,aa.a,ra.a,oa.a,sa.a,la.a,ca.a,v.TranslatePipe]),i["\u0275\u0275setComponentScope"](St.a,[a.NgClass,a.NgComponentOutlet,a.NgForOf,a.NgIf,a.NgTemplateOutlet,a.NgStyle,a.NgSwitch,a.NgSwitchCase,a.NgSwitchDefault,a.NgPlural,a.NgPluralCase,dn.a,pn.a,un.a,mn.b,fn.a,hn.a,gn.a,yn.a,u.a,y.a,bn.a,vn.a,xn.a,Cn.a,Sn.a,wn.a,En.b,In.a,On.a,Tn.a,Mn.a,Fn.a,Pn.a,Dn.a,kn.a,jn.a,An.a,_n.a,Ln.a,Vn.a,Rn.a,Nn.a,Gn.a,Bn.a,Un.a,qn.a,Wn.a,Ht.a,zn.a,Kn.a,Hn.c,Hn.a,Hn.b,$n.a,Qn.a,tn.MatButton,tn.MatAnchor,Xn.b,Yn.MatCheckbox,Yn.MatCheckboxRequiredValidator,en.MatIcon,Jn.MatCard,Jn.MatCardHeader,Jn.MatCardTitleGroup,Jn.MatCardContent,Jn.MatCardTitle,Jn.MatCardSubtitle,Jn.MatCardActions,Jn.MatCardFooter,Jn.MatCardSmImage,Jn.MatCardMdImage,Jn.MatCardLgImage,Jn.MatCardImage,Jn.MatCardXlImage,Jn.MatCardAvatar,nn.MatProgressBar,Zn.b,Zn.c,ti.MatError,ti.MatFormField,ti.MatHint,ti.MatLabel,ti.MatPlaceholder,ti.MatPrefix,ti.MatSuffix,ei.MatInput,ei.MatTextareaAutosize,ni.MatSnackBarContainer,ii.b,ai.MatDrawer,ai.MatDrawerContainer,ai.MatDrawerContent,ai.MatSidenav,ai.MatSidenavContainer,ai.MatSidenavContent,Ze.MatToolbar,Ze.MatToolbarRow,ri._MatMenu,ri.MatMenuItem,ri.MatMenuTrigger,ri.MatMenuContent,oi.MatGridList,oi.MatGridTile,oi.MatGridTileText,De.MatLine,oi.MatGridTileHeaderCssMatStyler,oi.MatGridTileFooterCssMatStyler,oi.MatGridAvatarCssMatStyler,Ye.MatDialogContainer,Ye.MatDialogClose,Ye.MatDialogTitle,Ye.MatDialogContent,Ye.MatDialogActions,Pe.MatSelect,Pe.MatSelectTrigger,De.MatOption,De.MatOptgroup,si.MatTooltip,si.TooltipComponent,li.MatTable,li.MatHeaderCellDef,li.MatHeaderRowDef,li.MatColumnDef,li.MatCellDef,li.MatRowDef,li.MatFooterCellDef,li.MatFooterRowDef,li.MatHeaderCell,li.MatCell,li.MatFooterCell,li.MatHeaderRow,li.MatRow,li.MatFooterRow,li.MatNoDataRow,li.MatTextColumn,ci.MatPaginator,di.MatSort,di.MatSortHeader,pi.MatProgressSpinner,pi.MatSpinner,ui.MatDivider,m.MatTabGroup,m.MatTabLabel,m.MatTab,m.MatTabNav,m.MatTabLink,m.MatTabContent,mi.MatRadioGroup,mi.MatRadioButton,fi.MatSlideToggleRequiredValidator,fi.MatSlideToggle,hi.MatCalendar,hi.MatCalendarBody,hi.MatDatepicker,hi.MatDatepickerContent,hi.MatDatepickerInput,hi.MatDatepickerToggle,hi.MatDatepickerToggleIcon,hi.MatMonthView,hi.MatYearView,hi.MatMultiYearView,hi.MatCalendarHeader,hi.MatDateRangeInput,hi.MatStartDate,hi.MatEndDate,hi.MatDateRangePicker,gi.b,gi.c,gi.d,gi.a,gi.i,gi.f,gi.e,gi.h,gi.j,gi.l,yi.a,yi.b,bi.MatSlider,vi.MatAccordion,vi.MatExpansionPanel,vi.MatExpansionPanelActionRow,vi.MatExpansionPanelHeader,vi.MatExpansionPanelTitle,vi.MatExpansionPanelDescription,vi.MatExpansionPanelContent,xi.MatHorizontalStepper,xi.MatVerticalStepper,xi.MatStep,xi.MatStepLabel,xi.MatStepper,xi.MatStepperNext,xi.MatStepperPrevious,xi.MatStepHeader,xi.MatStepperIcon,Ci.MatAutocomplete,Ci.MatAutocompleteTrigger,Ci.MatAutocompleteOrigin,Si.MatChipList,Si.MatChip,Si.MatChipInput,Si.MatChipRemove,Si.MatChipAvatar,Si.MatChipTrailingIcon,wi.MatList,wi.MatNavList,wi.MatListItem,wi.MatListAvatarCssMatStyler,wi.MatListIconCssMatStyler,wi.MatListSubheaderCssMatStyler,De.MatPseudoCheckbox,wi.MatSelectionList,wi.MatListOption,Ei.b,Ei.c,Ii.a,Ii.b,g.f,g.g,g.e,g.d,g.c,g.k,g.a,g.b,b.d,b.b,b.e,b.c,Oi.k,Oi.n,Oi.q,Oi.t,Oi.w,Oi.z,Oi.C,Oi.F,Oi.d,Oi.g,Oi.j,zt["\u0275angular_packages_forms_forms_y"],zt.NgSelectOption,zt["\u0275angular_packages_forms_forms_x"],zt.DefaultValueAccessor,zt.NumberValueAccessor,zt.RangeValueAccessor,zt.CheckboxControlValueAccessor,zt.SelectControlValueAccessor,zt.SelectMultipleControlValueAccessor,zt.RadioControlValueAccessor,zt.NgControlStatus,zt.NgControlStatusGroup,zt.RequiredValidator,zt.MinLengthValidator,zt.MaxLengthValidator,zt.PatternValidator,zt.CheckboxRequiredValidator,zt.EmailValidator,zt.NgModel,zt.NgModelGroup,zt.NgForm,zt.FormControlDirective,zt.FormGroupDirective,zt.FormControlName,zt.FormGroupName,zt.FormArrayName,Ti.CdkConnectedOverlay,Ti.CdkOverlayOrigin,ii.a,ii.d,ii.e,Mi.a,Fi.d,Fi.c,Pi.a,Di.a,Di.b,Di.c,ki.b,ki.c,ki.d,ki.f,ki.a,ji.g,ji.d,ji.c,ji.a,Ai.a,_i.a,Li.a,Vi.a,Ri.a,Ni.a,Gi.a,Bi.a,Ui.a,qi.a,Wi.a,zi.a,Ki.a,Hi.a,$i.a,v.TranslateDirective,Qi.a,Xi.a,Yi.a,Ji.a,Zi.a,ta.a,Re.a,s.a,o.a,l.a,w,I.a,E.a,dt.a,O.a,T.a,M.a,F.a,K.a,P.a,D.a,k.a,j.a,A.b,N.b,G.a,ft.a,U.a,W.a,_.a,L.a,R.a,B.a,q.a,z.a,H.a,$.a,X.a,Q.a,Y.b,J.a,Z.a,tt.a,et.a,nt.a,at.a,ot.a,lt.a,ut.a,mt.a,st.a,ct.a,ht.a,gt.a,yt.a,bt.a,St.a,vt.a,xt.a,Ct.a,wt.a,It.a,Et.a,Ot.a,ee.a,Tt.a,Mt.b,Ft.a,Pt.a,Dt.a,kt.a,jt.a,ue.a,me.a,Lt.a,At.a,_t.a,qt.a,Vt.a,Rt.a,Gt.a,Wt.a,$t,Qt.a,Bt.a,Jt.a,Zt.a,pe.a,te.a,Yt.a,Xt.a,Nt.a,Ut.a,ne.a,ie.a,le.a,ae.a,re.a,oe.a,se.a,ye.a,ce.a,de.a,fe.a,he.a,ge.a,ve.a,be.a,qe.a,We.a,ze.a,Ke.a,He.a,$e.a,Qe.a,Xe.a,sn,cn.b],[a.AsyncPipe,a.UpperCasePipe,a.LowerCasePipe,a.JsonPipe,a.SlicePipe,a.DecimalPipe,a.PercentPipe,a.TitleCasePipe,a.CurrencyPipe,a.DatePipe,a.I18nPluralPipe,a.I18nSelectPipe,a.KeyValuePipe,ea.a,na.a,ia.a,aa.a,ra.a,oa.a,sa.a,la.a,ca.a,v.TranslatePipe])},G8Aa:function(t,e,n){"use strict";n.d(e,"a",(function(){return c}));var i=n("mrSG"),a=n("RxGS"),r=n("fXoL"),o=n("//Q6"),s=n("l7P3"),l=n("3Pt+"),c=function(t){function e(e,n,i,a){var o=t.call(this,e)||this;return o.store=e,o.fb=n,o.entityValue=i,o.entitiesTableConfigValue=a,o.entityAction=new r.EventEmitter,o.entityForm=o.buildForm(o.entityValue),o}return Object(i.d)(e,t),Object.defineProperty(e.prototype,"entitiesTableConfig",{get:function(){return this.entitiesTableConfigValue},set:function(t){this.setEntitiesTableConfig(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isEdit",{get:function(){return this.isEditValue},set:function(t){this.isEditValue=t,this.updateFormState()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isAdd",{get:function(){return this.entityValue&&(!this.entityValue.id||!this.entityValue.id.id)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"entity",{get:function(){return this.entityValue},set:function(t){this.entityValue=t,this.entityForm&&(this.entityForm.markAsPristine(),this.updateForm(t))},enumerable:!1,configurable:!0}),e.prototype.ngOnInit=function(){},e.prototype.onEntityAction=function(t,e){var n={event:t,action:e,entity:this.entity},i=!1;this.entitiesTableConfig&&(i=this.entitiesTableConfig.onEntityAction(n)),i||this.entityAction.emit(n)},e.prototype.updateFormState=function(){this.entityForm&&(this.isEditValue?this.entityForm.enable({emitEvent:!1}):this.entityForm.disable({emitEvent:!1}))},e.prototype.entityFormValue=function(){var t=this.entityForm?Object(i.a)({},this.entityForm.getRawValue()):{};return this.prepareFormValue(t)},e.prototype.prepareFormValue=function(t){return Object(o.f)(t)},e.prototype.setEntitiesTableConfig=function(t){this.entitiesTableConfigValue=t},e.\u0275fac=function(t){r["\u0275\u0275invalidFactory"]()},e.\u0275dir=r["\u0275\u0275defineDirective"]({type:e,inputs:{entitiesTableConfig:"entitiesTableConfig",isEdit:"isEdit",entity:"entity"},outputs:{entityAction:"entityAction"},features:[r["\u0275\u0275InheritDefinitionFeature"]]}),e}(a.a);!function(){r["\u0275setClassMetadata"](c,[{type:r.Directive}],(function(){return[{type:s.Store},{type:l.FormBuilder},{type:void 0},{type:void 0}]}),{entitiesTableConfig:[{type:r.Input}],isEdit:[{type:r.Input}],entity:[{type:r.Input}],entityAction:[{type:r.Output}]})}()},"GL+W":function(t,e,n){"use strict";n.r(e),n.d(e,"AliasController",(function(){return i.a})),n.d(e,"DataAggregator",(function(){return a.a})),n.d(e,"EntityDataService",(function(){return r.a})),n.d(e,"EntityDataSubscription",(function(){return o.a})),n.d(e,"WidgetSubscriptionContext",(function(){return s.a})),n.d(e,"WidgetSubscription",(function(){return l.a})),n.d(e,"AdminService",(function(){return c.a})),n.d(e,"AlarmService",(function(){return d.a})),n.d(e,"AssetService",(function(){return p.a})),n.d(e,"AttributeService",(function(){return u.a})),n.d(e,"AuditLogService",(function(){return m.a})),n.d(e,"ComponentDescriptorService",(function(){return f.a})),n.d(e,"CustomerService",(function(){return h.a})),n.d(e,"DashboardService",(function(){return g.a})),n.d(e,"DeviceService",(function(){return y.a})),n.d(e,"EntityService",(function(){return b.a})),n.d(e,"EntityRelationService",(function(){return v.a})),n.d(e,"EntityViewService",(function(){return x.a})),n.d(e,"EventService",(function(){return C.a})),n.d(e,"defaultHttpOptionsFromConfig",(function(){return S.b})),n.d(e,"defaultHttpOptions",(function(){return S.a})),n.d(e,"OAuth2Service",(function(){return w.a})),n.d(e,"QueueService",(function(){return E.a})),n.d(e,"RuleChainService",(function(){return I.a})),n.d(e,"TenantService",(function(){return O.a})),n.d(e,"UserService",(function(){return T.a})),n.d(e,"WidgetService",(function(){return M.a})),n.d(e,"LocalStorageService",(function(){return F.a})),n.d(e,"NodeScriptTestService",(function(){return _})),n.d(e,"BroadcastService",(function(){return L.a})),n.d(e,"DashboardUtilsService",(function(){return V.a})),n.d(e,"DialogService",(function(){return R.a})),n.d(e,"DynamicComponentModule",(function(){return N.b})),n.d(e,"DynamicComponentFactoryService",(function(){return N.a})),n.d(e,"ItemBufferService",(function(){return G.a})),n.d(e,"MenuService",(function(){return B.a})),n.d(e,"NotificationService",(function(){return U.a})),n.d(e,"RafService",(function(){return q.a})),n.d(e,"ResourcesService",(function(){return W.a})),n.d(e,"TimeService",(function(){return z.a})),n.d(e,"TitleService",(function(){return K.a})),n.d(e,"UtilsService",(function(){return H.a})),n.d(e,"WINDOW",(function(){return $.b})),n.d(e,"WindowRef",(function(){return $.d})),n.d(e,"BrowserWindowRef",(function(){return $.a})),n.d(e,"windowFactory",(function(){return $.f})),n.d(e,"browserWindowProvider",(function(){return $.e})),n.d(e,"windowProvider",(function(){return $.g})),n.d(e,"WINDOW_PROVIDERS",(function(){return $.c})),n.d(e,"TelemetryWebsocketService",(function(){return Q.a})),n.d(e,"reducers",(function(){return X.c})),n.d(e,"metaReducers",(function(){return X.b})),n.d(e,"effects",(function(){return X.a})),n.d(e,"HttpLoaderFactory",(function(){return Y.b})),n.d(e,"CoreModule",(function(){return Y.a})),n.d(e,"onParentScrollOrWindowResize",(function(){return j.G})),n.d(e,"isLocalUrl",(function(){return j.t})),n.d(e,"animatedScroll",(function(){return j.a})),n.d(e,"isUndefined",(function(){return j.z})),n.d(e,"isUndefinedOrNull",(function(){return j.A})),n.d(e,"isDefined",(function(){return j.n})),n.d(e,"isDefinedAndNotNull",(function(){return j.o})),n.d(e,"isEmptyStr",(function(){return j.q})),n.d(e,"isNotEmptyStr",(function(){return j.u})),n.d(e,"isFunction",(function(){return j.s})),n.d(e,"isObject",(function(){return j.x})),n.d(e,"isNumber",(function(){return j.v})),n.d(e,"isNumeric",(function(){return j.w})),n.d(e,"isString",(function(){return j.y})),n.d(e,"isEmpty",(function(){return j.p})),n.d(e,"formatValue",(function(){return j.h})),n.d(e,"objectValues",(function(){return j.F})),n.d(e,"deleteNullProperties",(function(){return j.g})),n.d(e,"objToBase64",(function(){return j.C})),n.d(e,"objToBase64URI",(function(){return j.D})),n.d(e,"base64toObj",(function(){return j.b})),n.d(e,"hashCode",(function(){return j.l})),n.d(e,"objectHashCode",(function(){return j.E})),n.d(e,"deepClone",(function(){return j.e})),n.d(e,"isEqual",(function(){return j.r})),n.d(e,"mergeDeep",(function(){return j.B})),n.d(e,"guid",(function(){return j.k})),n.d(e,"snakeCase",(function(){return j.I})),n.d(e,"getDescendantProp",(function(){return j.j})),n.d(e,"insertVariable",(function(){return j.m})),n.d(e,"createLabelFromDatasource",(function(){return j.d})),n.d(e,"padValue",(function(){return j.H})),n.d(e,"baseUrl",(function(){return j.c})),n.d(e,"sortObjectKeys",(function(){return j.J})),n.d(e,"deepTrim",(function(){return j.f})),n.d(e,"generateSecret",(function(){return j.i})),n.d(e,"validateEntityId",(function(){return j.K}));var i=n("Xk9D"),a=n("9GfO"),r=n("lbPe"),o=n("Pmg/"),s=n("OMGm"),l=n("c6cM"),c=n("jKtI"),d=n("7ZKe"),p=n("1y+p"),u=n("BsGH"),m=n("Q7pZ"),f=n("9n8L"),h=n("ktVl"),g=n("YnEf"),y=n("DaoB"),b=n("21Fy"),v=n("Bjlt"),x=n("j37L"),C=n("mopS"),S=n("Y8nr"),w=n("wSoN"),E=n("IaQH"),I=n("C4fA"),O=n("WNjs"),T=n("9D3k"),M=n("5xOD"),F=n("EP1h"),P=n("fXoL"),D=n("eIep"),k=n("nfcV"),j=n("//Q6"),A=n("0IaG"),_=function(){function t(t,e){this.ruleChainService=t,this.dialog=e}return t.prototype.testNodeScript=function(t,e,n,i,a,r){var o=this;return r?this.ruleChainService.getLatestRuleNodeDebugInput(r).pipe(Object(D.a)((function(r){var s,l,c;return r&&(r.data&&(s=JSON.parse(r.data)),r.metadata&&(l=JSON.parse(r.metadata)),c=r.msgType),o.openTestScriptDialog(t,e,n,i,a,s,l,c)}))):this.openTestScriptDialog(t,e,n,i,a)},t.prototype.openTestScriptDialog=function(t,e,n,i,a,r,o,s){return r||(r={temperature:22.4,humidity:78}),o=o?Object(j.J)(o):{deviceName:"Test Device",deviceType:"default",ts:(new Date).getTime()+""},s||(s="POST_TELEMETRY_REQUEST"),this.dialog.open(k.a,{disableClose:!0,panelClass:["tb-dialog","tb-fullscreen-dialog","tb-fullscreen-dialog-gt-sm"],data:{msg:r,metadata:o,msgType:s,functionTitle:n,functionName:i,script:t,scriptType:e,argNames:a}}).afterClosed()},t.\u0275fac=function(e){return new(e||t)(P["\u0275\u0275inject"](I.a),P["\u0275\u0275inject"](A.MatDialog))},t.\u0275prov=P["\u0275\u0275defineInjectable"]({token:t,factory:t.\u0275fac,providedIn:"root"}),t}();!function(){P["\u0275setClassMetadata"](_,[{type:P.Injectable,args:[{providedIn:"root"}]}],(function(){return[{type:I.a},{type:A.MatDialog}]}),null)}();var L=n("gM18"),V=n("4j5O"),R=n("S+vS"),N=n("Z9d0"),G=n("FBAY"),B=n("/crD"),U=n("Y4+Y"),q=n("nhHW"),W=n("OCOE"),z=n("k9IB"),K=n("NXKV"),H=n("OiFK"),$=n("wtyh"),Q=n("2lgB"),X=n("Vz2p"),Y=n("pKmL")},GdA0:function(t,e,n){"use strict";n.d(e,"a",(function(){return x}));var i=n("mrSG"),a=n("fXoL"),r=n("0IaG"),o=n("gmuX"),s=n("he9t"),l=n("jCow"),c=n("Uj2l"),d=n("LRne"),p=n("l7P3"),u=n("tyNb"),m=n("/t3+"),f=n("XiUz"),h=n("sYmb"),g=n("bTqV"),y=n("NFeN"),b=n("ofXK"),v=["eventContentEditor"],x=function(t){function e(e,n,i,a,r){var o=t.call(this,e,n,a)||this;return o.store=e,o.router=n,o.data=i,o.dialogRef=a,o.renderer=r,o}return Object(i.d)(e,t),e.prototype.ngOnInit=function(){this.content=this.data.content,this.title=this.data.title,this.contentType=this.data.contentType,this.createEditor(this.eventContentEditorElmRef,this.content)},e.prototype.createEditor=function(t,e){var n=this,a=t.nativeElement,r="java",o=null;this.contentType&&(r=s.g.get(this.contentType).code,this.contentType===s.b.JSON&&e&&(o=Object(c.c)(e,{indent_size:4}))),o||(o=Object(d.a)(e)),o.subscribe((function(t){var e={mode:"ace/mode/"+r,theme:"ace/theme/github",showGutter:!1,showPrintMargin:!1,readOnly:!0};e=Object(i.a)(Object(i.a)({},e),{enableSnippets:!1,enableBasicAutocompletion:!1,enableLiveAutocompletion:!1}),Object(l.b)().subscribe((function(i){var r=i.edit(a,e);r.session.setUseWrapMode(!1),r.setValue(t,-1),n.updateEditorSize(a,t,r)}))}))},e.prototype.updateEditorSize=function(t,e,n){var i=400,a=600;if(e&&e.length>0){var r=e.split("\n");i=16*r.length+16;var o=0;r.forEach((function(t){var e=t.replace(/\t/g,"    ").replace(/\n/g,"").length;o=Math.max(o,e)})),a=8*o+16}this.renderer.setStyle(t,"minHeight",i.toString()+"px"),this.renderer.setStyle(t,"height",i.toString()+"px"),this.renderer.setStyle(t,"width",a.toString()+"px"),n.resize()},e.\u0275fac=function(t){return new(t||e)(a["\u0275\u0275directiveInject"](p.Store),a["\u0275\u0275directiveInject"](u.Router),a["\u0275\u0275directiveInject"](r.MAT_DIALOG_DATA),a["\u0275\u0275directiveInject"](r.MatDialogRef),a["\u0275\u0275directiveInject"](a.Renderer2))},e.\u0275cmp=a["\u0275\u0275defineComponent"]({type:e,selectors:[["tb-event-content-dialog"]],viewQuery:function(t,e){var n;(1&t&&a["\u0275\u0275staticViewQuery"](v,!0),2&t)&&(a["\u0275\u0275queryRefresh"](n=a["\u0275\u0275loadQuery"]())&&(e.eventContentEditorElmRef=n.first))},features:[a["\u0275\u0275InheritDefinitionFeature"]],decls:16,vars:9,consts:[["fxLayout","row","color","primary"],["translate",""],["fxFlex",""],["mat-button","","mat-icon-button","","type","button",3,"mat-dialog-close"],[1,"material-icons"],["mat-dialog-content","","fxLayout","column"],[1,"tb-event-content"],["eventContentEditor",""],["mat-dialog-actions","","fxLayout","row"],["mat-button","","color","primary","type","button","cdkFocusInitial","",3,"disabled","mat-dialog-close"]],template:function(t,e){1&t&&(a["\u0275\u0275elementStart"](0,"mat-toolbar",0),a["\u0275\u0275elementStart"](1,"h2",1),a["\u0275\u0275text"](2),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](3,"span",2),a["\u0275\u0275elementStart"](4,"button",3),a["\u0275\u0275elementStart"](5,"mat-icon",4),a["\u0275\u0275text"](6,"close"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](7,"div",5),a["\u0275\u0275element"](8,"div",6,7),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](10,"div",8),a["\u0275\u0275element"](11,"span",2),a["\u0275\u0275elementStart"](12,"button",9),a["\u0275\u0275pipe"](13,"async"),a["\u0275\u0275text"](14),a["\u0275\u0275pipe"](15,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()),2&t&&(a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate"](e.title),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("mat-dialog-close",!1),a["\u0275\u0275advance"](8),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](13,5,e.isLoading$))("mat-dialog-close",!1),a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](15,7,"action.close")," "))},directives:[m.MatToolbar,f.f,h.TranslateDirective,f.b,g.MatButton,r.MatDialogClose,y.MatIcon,r.MatDialogContent,r.MatDialogActions],pipes:[b.AsyncPipe,h.TranslatePipe],styles:["[_nghost-%COMP%]   .tb-event-content[_ngcontent-%COMP%]{width:100%;min-width:400px;height:100%;min-height:50px}"]}),e}(o.a);!function(){a["\u0275setClassMetadata"](x,[{type:a.Component,args:[{selector:"tb-event-content-dialog",templateUrl:"./event-content-dialog.component.html",styleUrls:["./event-content-dialog.component.scss"]}]}],(function(){return[{type:p.Store},{type:u.Router},{type:void 0,decorators:[{type:a.Inject,args:[r.MAT_DIALOG_DATA]}]},{type:r.MatDialogRef},{type:a.Renderer2}]}),{eventContentEditorElmRef:[{type:a.ViewChild,args:["eventContentEditor",{static:!0}]}]})}()},Grun:function(t,e,n){"use strict";n.d(e,"a",(function(){return M}));var i=n("mrSG"),a=n("fXoL"),r=n("3Pt+"),o=n("RxGS"),s=n("itXk"),l=n("gi3d"),c=n("l7P3"),d=n("8m5z"),p=n("XiUz"),u=n("ofXK"),m=n("znSr"),f=n("bTqV"),h=n("Qu3c"),g=n("NFeN"),y=n("sYmb"),b=n("LqAV"),v=n("yAAm"),x=["leftPanel"],C=["rightPanel"];function S(t,e){1&t&&(a["\u0275\u0275elementStart"](0,"span",7),a["\u0275\u0275text"](1,"widget.toggle-fullscreen"),a["\u0275\u0275elementEnd"]())}function w(t,e){if(1&t){var n=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementStart"](0,"div"),a["\u0275\u0275elementStart"](1,"tb-custom-action-pretty-resources-tabs",8),a["\u0275\u0275listener"]("actionUpdated",(function(t){return a["\u0275\u0275restoreView"](n),a["\u0275\u0275nextContext"]().onActionUpdated(!!t)})),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()}if(2&t){var i=a["\u0275\u0275nextContext"]();a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("hasCustomFunction",!0)("action",i.action)}}var E=function(){return["$event","widgetContext","entityId","entityName","htmlTemplate","additionalParams","entityLabel"]},I=function(){return[]};function O(t,e){if(1&t){var n=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementStart"](0,"div",9),a["\u0275\u0275elementStart"](1,"div",10,11),a["\u0275\u0275elementStart"](3,"tb-custom-action-pretty-resources-tabs",8),a["\u0275\u0275listener"]("actionUpdated",(function(t){return a["\u0275\u0275restoreView"](n),a["\u0275\u0275nextContext"]().onActionUpdated(!!t)})),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](4,"div",12,13),a["\u0275\u0275elementStart"](6,"tb-js-func",14),a["\u0275\u0275listener"]("ngModelChange",(function(t){return a["\u0275\u0275restoreView"](n),a["\u0275\u0275nextContext"]().action.customFunction=t}))("ngModelChange",(function(){return a["\u0275\u0275restoreView"](n),a["\u0275\u0275nextContext"]().onActionUpdated()})),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()}if(2&t){var i=a["\u0275\u0275nextContext"]();a["\u0275\u0275advance"](3),a["\u0275\u0275property"]("hasCustomFunction",!1)("action",i.action),a["\u0275\u0275advance"](3),a["\u0275\u0275property"]("ngModel",i.action.customFunction)("fillHeight",!0)("functionArgs",a["\u0275\u0275pureFunction0"](7,E))("validationArgs",a["\u0275\u0275pureFunction0"](8,I))("editorCompleter",i.customPrettyActionEditorCompleter)}}var T=function(t){return{"tb-fullscreen-editor":t}},M=function(t){function e(e){var n=t.call(this,e)||this;return n.store=e,n.fullscreen=!1,n.customPrettyActionEditorCompleter=l.b,n.propagateChange=function(t){},n}return Object(i.d)(e,t),e.prototype.ngOnInit=function(){},e.prototype.ngAfterViewInit=function(){var t=this;Object(s.b)(this.leftPanelElmRef.changes,this.rightPanelElmRef.changes).subscribe((function(){t.leftPanelElmRef.length&&t.rightPanelElmRef.length&&t.initSplitLayout(t.leftPanelElmRef.first.nativeElement,t.rightPanelElmRef.first.nativeElement)}))},e.prototype.initSplitLayout=function(t,e){Split([t,e],{sizes:[50,50],gutterSize:8,cursor:"col-resize"})},e.prototype.ngOnDestroy=function(){},e.prototype.registerOnChange=function(t){this.propagateChange=t},e.prototype.registerOnTouched=function(t){},e.prototype.setDisabledState=function(t){this.disabled=t},e.prototype.writeValue=function(t){this.action=t},e.prototype.onActionUpdated=function(t){void 0===t&&(t=!0),t?this.propagateChange(this.action):this.propagateChange(null)},e.\u0275fac=function(t){return new(t||e)(a["\u0275\u0275directiveInject"](c.Store))},e.\u0275cmp=a["\u0275\u0275defineComponent"]({type:e,selectors:[["tb-custom-action-pretty-editor"]],viewQuery:function(t,e){var n;(1&t&&(a["\u0275\u0275viewQuery"](x,!0),a["\u0275\u0275viewQuery"](C,!0)),2&t)&&(a["\u0275\u0275queryRefresh"](n=a["\u0275\u0275loadQuery"]())&&(e.leftPanelElmRef=n),a["\u0275\u0275queryRefresh"](n=a["\u0275\u0275loadQuery"]())&&(e.rightPanelElmRef=n))},inputs:{disabled:"disabled"},features:[a["\u0275\u0275ProvidersFeature"]([{provide:r.NG_VALUE_ACCESSOR,useExisting:Object(a.forwardRef)((function(){return e})),multi:!0}]),a["\u0275\u0275InheritDefinitionFeature"]],decls:11,vars:14,consts:[["tb-fullscreen","",1,"tb-custom-action-pretty","mat-elevation-z1",3,"fullscreen"],["fxLayout","row","fxLayoutAlign","end center",1,"tb-action-expand-button",3,"ngClass"],["mat-button","","fxHide.lt-md","","matTooltipPosition","above",3,"matTooltip","click"],["translate","",4,"ngIf"],[1,"tb-custom-action-editor",3,"ngClass"],[4,"ngIf","ngIfElse"],["fullscreenEditor",""],["translate",""],[3,"hasCustomFunction","action","actionUpdated"],["fxLayout","row",1,"tb-fullscreen-panel","tb-layout-fill"],[1,"tb-split","tb-content"],["leftPanel",""],[1,"tb-split","tb-content","right-panel"],["rightPanel",""],[3,"ngModel","fillHeight","functionArgs","validationArgs","editorCompleter","ngModelChange"]],template:function(t,e){if(1&t&&(a["\u0275\u0275elementStart"](0,"div",0),a["\u0275\u0275elementStart"](1,"div",1),a["\u0275\u0275elementStart"](2,"button",2),a["\u0275\u0275listener"]("click",(function(){return e.fullscreen=!e.fullscreen})),a["\u0275\u0275pipe"](3,"translate"),a["\u0275\u0275elementStart"](4,"mat-icon"),a["\u0275\u0275text"](5),a["\u0275\u0275elementEnd"](),a["\u0275\u0275template"](6,S,2,0,"span",3),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](7,"div",4),a["\u0275\u0275template"](8,w,2,2,"div",5),a["\u0275\u0275template"](9,O,7,9,"ng-template",null,6,a["\u0275\u0275templateRefExtractor"]),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()),2&t){var n=a["\u0275\u0275reference"](10);a["\u0275\u0275property"]("fullscreen",e.fullscreen),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngClass",a["\u0275\u0275pureFunction1"](10,T,e.fullscreen)),a["\u0275\u0275advance"](1),a["\u0275\u0275propertyInterpolate"]("matTooltip",a["\u0275\u0275pipeBind1"](3,8,"widget.toggle-fullscreen")),a["\u0275\u0275advance"](3),a["\u0275\u0275textInterpolate"](e.fullscreen?"fullscreen_exit":"fullscreen"),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",e.fullscreen),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngClass",a["\u0275\u0275pureFunction1"](12,T,e.fullscreen)),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",!e.fullscreen)("ngIfElse",n)}},directives:[d.a,p.f,p.e,u.NgClass,m.b,f.MatButton,m.d,h.MatTooltip,g.MatIcon,u.NgIf,y.TranslateDirective,b.a,v.a,r.NgControlStatus,r.NgModel],pipes:[y.TranslatePipe],styles:[".tb-custom-action-pretty{box-sizing:border-box;position:relative;padding:8px;background-color:#fff}.tb-custom-action-pretty .tb-fullscreen-panel .tb-custom-action-editor-container{height:calc(100% - 40px)}.tb-custom-action-pretty .tb-fullscreen-panel .right-panel{padding-top:8px;padding-left:3px}.tb-custom-action-pretty .tb-fullscreen-panel tb-js-func .tb-js-func-panel{box-sizing:border-box}.tb-custom-action-pretty .tb-fullscreen-panel mat-tab-group .mat-tab-body-wrapper,.tb-custom-action-pretty .tb-fullscreen-panel mat-tab-group .mat-tab-body-wrapper mat-tab-body,.tb-custom-action-pretty .tb-fullscreen-panel mat-tab-group .mat-tab-body-wrapper mat-tab-body>div{height:100%}.tb-custom-action-pretty .tb-split{box-sizing:border-box;overflow-x:hidden;overflow-y:auto}.tb-custom-action-pretty .tb-content{border:1px solid silver}.tb-custom-action-pretty .gutter{background-color:#eee;background-repeat:no-repeat;background-position:50%}.tb-custom-action-pretty .gutter.gutter-horizontal{cursor:col-resize;background-image:url(vertical.5e6d1df402c3bc10ecc6.png)}.tb-custom-action-pretty .gutter.gutter-horizontal,.tb-custom-action-pretty .tb-split.tb-split-horizontal{float:left;height:100%}.tb-custom-action-pretty .tb-action-expand-button{position:absolute;right:14px;z-index:2}.tb-custom-action-pretty .tb-action-expand-button.tb-fullscreen-editor{position:relative;right:0}.tb-custom-action-pretty .tb-action-expand-button.tb-fullscreen-editor .mat-button .mat-icon{margin-right:5px}.tb-custom-action-pretty .tb-action-expand-button .mat-button{min-width:36px;padding:0}.tb-custom-action-pretty .tb-action-expand-button .mat-button .mat-icon{margin-right:0}.tb-custom-action-pretty .tb-custom-action-editor.tb-fullscreen-editor{height:100%}"],encapsulation:2}),e}(o.a);!function(){a["\u0275setClassMetadata"](M,[{type:a.Component,args:[{selector:"tb-custom-action-pretty-editor",templateUrl:"./custom-action-pretty-editor.component.html",styleUrls:["./custom-action-pretty-editor.component.scss"],providers:[{provide:r.NG_VALUE_ACCESSOR,useExisting:Object(a.forwardRef)((function(){return M})),multi:!0}],encapsulation:a.ViewEncapsulation.None}]}],(function(){return[{type:c.Store}]}),{disabled:[{type:a.Input}],leftPanelElmRef:[{type:a.ViewChildren,args:["leftPanel"]}],rightPanelElmRef:[{type:a.ViewChildren,args:["rightPanel"]}]})}()},HUB6:function(t,e,n){"use strict";n.d(e,"a",(function(){return E}));var i=n("mrSG"),a=n("fXoL"),r=n("FKr1"),o=n("0IaG"),s=n("U3y+"),l=n("YnEf"),c=n("cp0P"),d=n("gmuX"),p=n("l7P3"),u=n("tyNb"),m=n("3Pt+"),f=n("/t3+"),h=n("XiUz"),g=n("bTqV"),y=n("NFeN"),b=n("ofXK"),v=n("EdYI"),x=n("bv9b"),C=n("sYmb");function S(t,e){1&t&&a["\u0275\u0275element"](0,"mat-progress-bar",13)}function w(t,e){1&t&&a["\u0275\u0275element"](0,"div",14)}var E=function(t){function e(e,n,i,a,r,o,l){var c=t.call(this,e,n,o)||this;switch(c.store=e,c.router=n,c.data=i,c.dashboardService=a,c.errorStateMatcher=r,c.dialogRef=o,c.fb=l,c.submitted=!1,c.entityType=s.b,c.assignedCustomersIds=i.assignedCustomersIds||[],i.actionType){case"assign":c.titleText="dashboard.assign-to-customers",c.labelText="dashboard.assign-to-customers-text",c.actionName="action.assign";break;case"manage":c.titleText="dashboard.manage-assigned-customers",c.labelText="dashboard.assigned-customers",c.actionName="action.update";break;case"unassign":c.titleText="dashboard.unassign-from-customers",c.labelText="dashboard.unassign-from-customers-text",c.actionName="action.unassign"}return c}return Object(i.d)(e,t),e.prototype.ngOnInit=function(){this.dashboardCustomersFormGroup=this.fb.group({assignedCustomerIds:[Object(i.g)(this.assignedCustomersIds)]})},e.prototype.isErrorState=function(t,e){var n=this.errorStateMatcher.isErrorState(t,e),i=!!(t&&t.invalid&&this.submitted);return n||i},e.prototype.cancel=function(){this.dialogRef.close(!1)},e.prototype.submit=function(){var t=this;this.submitted=!0;var e=this.dashboardCustomersFormGroup.get("assignedCustomerIds").value,n=[];this.data.dashboardIds.forEach((function(i){n.push(t.getManageDashboardCustomersTask(i,e))})),Object(c.a)(n).subscribe((function(){t.dialogRef.close(!0)}))},e.prototype.getManageDashboardCustomersTask=function(t,e){switch(this.data.actionType){case"assign":return this.dashboardService.addDashboardCustomers(t,e);case"manage":return this.dashboardService.updateDashboardCustomers(t,e);case"unassign":return this.dashboardService.removeDashboardCustomers(t,e)}},e.\u0275fac=function(t){return new(t||e)(a["\u0275\u0275directiveInject"](p.Store),a["\u0275\u0275directiveInject"](u.Router),a["\u0275\u0275directiveInject"](o.MAT_DIALOG_DATA),a["\u0275\u0275directiveInject"](l.a),a["\u0275\u0275directiveInject"](r.ErrorStateMatcher,4),a["\u0275\u0275directiveInject"](o.MatDialogRef),a["\u0275\u0275directiveInject"](m.FormBuilder))},e.\u0275cmp=a["\u0275\u0275defineComponent"]({type:e,selectors:[["tb-manage-dashboard-customers-dialog"]],features:[a["\u0275\u0275ProvidersFeature"]([{provide:r.ErrorStateMatcher,useExisting:e}]),a["\u0275\u0275InheritDefinitionFeature"]],decls:30,vars:30,consts:[[2,"width","600px",3,"formGroup","ngSubmit"],["fxLayout","row","color","primary"],["fxFlex",""],["mat-button","","mat-icon-button","","type","button",3,"click"],[1,"material-icons"],["color","warn","mode","indeterminate",4,"ngIf"],["style","height: 4px;",4,"ngIf"],["mat-dialog-content",""],[3,"disabled"],["formControlName","assignedCustomerIds",3,"required","entityType"],["mat-dialog-actions","","fxLayout","row"],["mat-button","","color","primary","type","button","cdkFocusInitial","",3,"disabled","click"],["mat-button","","mat-raised-button","","color","primary","type","submit",3,"disabled"],["color","warn","mode","indeterminate"],[2,"height","4px"]],template:function(t,e){1&t&&(a["\u0275\u0275elementStart"](0,"form",0),a["\u0275\u0275listener"]("ngSubmit",(function(){return e.submit()})),a["\u0275\u0275elementStart"](1,"mat-toolbar",1),a["\u0275\u0275elementStart"](2,"h2"),a["\u0275\u0275text"](3),a["\u0275\u0275pipe"](4,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](5,"span",2),a["\u0275\u0275elementStart"](6,"button",3),a["\u0275\u0275listener"]("click",(function(){return e.cancel()})),a["\u0275\u0275elementStart"](7,"mat-icon",4),a["\u0275\u0275text"](8,"close"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275template"](9,S,1,0,"mat-progress-bar",5),a["\u0275\u0275pipe"](10,"async"),a["\u0275\u0275template"](11,w,1,0,"div",6),a["\u0275\u0275pipe"](12,"async"),a["\u0275\u0275elementStart"](13,"div",7),a["\u0275\u0275elementStart"](14,"fieldset",8),a["\u0275\u0275pipe"](15,"async"),a["\u0275\u0275elementStart"](16,"span"),a["\u0275\u0275text"](17),a["\u0275\u0275pipe"](18,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](19,"tb-entity-list",9),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](20,"div",10),a["\u0275\u0275element"](21,"span",2),a["\u0275\u0275elementStart"](22,"button",11),a["\u0275\u0275listener"]("click",(function(){return e.cancel()})),a["\u0275\u0275pipe"](23,"async"),a["\u0275\u0275text"](24),a["\u0275\u0275pipe"](25,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](26,"button",12),a["\u0275\u0275pipe"](27,"async"),a["\u0275\u0275text"](28),a["\u0275\u0275pipe"](29,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()),2&t&&(a["\u0275\u0275property"]("formGroup",e.dashboardCustomersFormGroup),a["\u0275\u0275advance"](3),a["\u0275\u0275textInterpolate"](a["\u0275\u0275pipeBind1"](4,12,e.titleText)),a["\u0275\u0275advance"](6),a["\u0275\u0275property"]("ngIf",a["\u0275\u0275pipeBind1"](10,14,e.isLoading$)),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("ngIf",!a["\u0275\u0275pipeBind1"](12,16,e.isLoading$)),a["\u0275\u0275advance"](3),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](15,18,e.isLoading$)),a["\u0275\u0275advance"](3),a["\u0275\u0275textInterpolate"](a["\u0275\u0275pipeBind1"](18,20,e.labelText)),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("required","manage"!==e.data.actionType)("entityType",e.entityType.CUSTOMER),a["\u0275\u0275advance"](3),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](23,22,e.isLoading$)),a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](25,24,"action.cancel")," "),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](27,26,e.isLoading$)||e.dashboardCustomersFormGroup.invalid||!e.dashboardCustomersFormGroup.dirty),a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](29,28,e.actionName)," "))},directives:[m["\u0275angular_packages_forms_forms_y"],m.NgControlStatusGroup,m.FormGroupDirective,f.MatToolbar,h.f,h.b,g.MatButton,y.MatIcon,b.NgIf,o.MatDialogContent,v.a,m.NgControlStatus,m.FormControlName,m.RequiredValidator,o.MatDialogActions,x.MatProgressBar],pipes:[C.TranslatePipe,b.AsyncPipe],encapsulation:2}),e}(d.a);!function(){a["\u0275setClassMetadata"](E,[{type:a.Component,args:[{selector:"tb-manage-dashboard-customers-dialog",templateUrl:"./manage-dashboard-customers-dialog.component.html",providers:[{provide:r.ErrorStateMatcher,useExisting:E}],styleUrls:[]}]}],(function(){return[{type:p.Store},{type:u.Router},{type:void 0,decorators:[{type:a.Inject,args:[o.MAT_DIALOG_DATA]}]},{type:l.a},{type:r.ErrorStateMatcher,decorators:[{type:a.SkipSelf}]},{type:o.MatDialogRef},{type:m.FormBuilder}]}),null)}()},HX6g:function(t,e,n){"use strict";n.d(e,"a",(function(){return I}));var i=n("fXoL"),a=n("3Pt+"),r=n("LRne"),o=n("xw5a"),s=n("ct/f"),l=n("lJxs"),c=n("0IaG"),d=n("XiUz"),p=n("7EHt"),u=n("sYmb"),m=n("ofXK"),f=n("znSr"),h=n("f0Cb"),g=n("bTqV"),y=n("Qu3c"),b=n("kN7V"),v=n("NFeN");function x(t,e){1&t&&(i["\u0275\u0275elementStart"](0,"label",18),i["\u0275\u0275text"](1,"filter.ignore-case"),i["\u0275\u0275elementEnd"]())}function C(t,e){1&t&&(i["\u0275\u0275elementStart"](0,"label",19),i["\u0275\u0275text"](1,"filter.user-parameters"),i["\u0275\u0275elementEnd"]())}function S(t,e){if(1&t&&(i["\u0275\u0275elementStart"](0,"span"),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&t){var n=i["\u0275\u0275nextContext"](2);i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](2,1,n.complexOperationTranslations.get(n.operation)))}}function w(t,e){if(1&t){var n=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"div",20),i["\u0275\u0275elementStart"](1,"div",21),i["\u0275\u0275template"](2,S,3,3,"span",22),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](3,"div",23),i["\u0275\u0275elementStart"](4,"div",24),i["\u0275\u0275element"](5,"tb-filter-predicate",25),i["\u0275\u0275elementStart"](6,"button",26),i["\u0275\u0275listener"]("click",(function(){i["\u0275\u0275restoreView"](n);var t=e.index;return i["\u0275\u0275nextContext"]().removePredicate(t)})),i["\u0275\u0275pipe"](7,"translate"),i["\u0275\u0275elementStart"](8,"mat-icon"),i["\u0275\u0275text"](9,"close"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()}if(2&t){var a=e.$implicit,r=e.index,o=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngIf",r>0),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("valueType",o.valueType)("displayUserParameters",o.displayUserParameters)("allowUserDynamicSource",o.allowUserDynamicSource)("onlyUserDynamicSource",o.onlyUserDynamicSource)("key",o.key)("formControl",a),i["\u0275\u0275advance"](1),i["\u0275\u0275propertyInterpolate"]("matTooltip",i["\u0275\u0275pipeBind1"](7,9,"filter.remove-filter")),i["\u0275\u0275property"]("fxShow",!o.disabled)}}var E=function(t){return{disabled:t}},I=function(){function t(t,e){this.fb=t,this.dialog=e,this.operation=o.b.AND,this.displayUserParameters=!0,this.allowUserDynamicSource=!0,this.onlyUserDynamicSource=!1,this.valueTypeEnum=o.f,this.complexOperationTranslations=o.k,this.propagateChange=null,this.valueChangeSubscription=null}return t.prototype.ngOnInit=function(){this.filterListFormGroup=this.fb.group({}),this.filterListFormGroup.addControl("predicates",this.fb.array([]))},t.prototype.predicatesFormArray=function(){return this.filterListFormGroup.get("predicates")},t.prototype.registerOnChange=function(t){this.propagateChange=t},t.prototype.registerOnTouched=function(t){},t.prototype.setDisabledState=function(t){this.disabled=t,this.disabled?this.filterListFormGroup.disable({emitEvent:!1}):this.filterListFormGroup.enable({emitEvent:!1})},t.prototype.writeValue=function(t){var e=this;this.valueChangeSubscription&&this.valueChangeSubscription.unsubscribe();var n=[];if(t)for(var i=0,r=t;i<r.length;i++){var o=r[i];n.push(this.fb.control(o,[a.Validators.required]))}this.filterListFormGroup.setControl("predicates",this.fb.array(n)),this.valueChangeSubscription=this.filterListFormGroup.valueChanges.subscribe((function(){e.updateModel()})),this.disabled?this.filterListFormGroup.disable({emitEvent:!1}):this.filterListFormGroup.enable({emitEvent:!1})},t.prototype.removePredicate=function(t){this.filterListFormGroup.get("predicates").removeAt(t)},t.prototype.addPredicate=function(t){var e=this,n=this.filterListFormGroup.get("predicates"),i=Object(o.m)(this.valueType,t);(t?this.openComplexFilterDialog(i):Object(r.a)(i)).subscribe((function(t){t&&n.push(e.fb.control(t,[a.Validators.required]))}))},t.prototype.openComplexFilterDialog=function(t){return this.dialog.open(s.a,{disableClose:!0,panelClass:["tb-dialog","tb-fullscreen-dialog"],data:{complexPredicate:t.keyFilterPredicate,readonly:this.disabled,valueType:this.valueType,key:this.key,isAdd:!0,displayUserParameters:this.displayUserParameters,allowUserDynamicSource:this.allowUserDynamicSource,onlyUserDynamicSource:this.onlyUserDynamicSource}}).afterClosed().pipe(Object(l.a)((function(e){return e?(t.keyFilterPredicate=e,t):null})))},t.prototype.updateModel=function(){var t=this.filterListFormGroup.getRawValue().predicates;this.filterListFormGroup.valid&&t.length?this.propagateChange(t):this.propagateChange(null)},t.\u0275fac=function(e){return new(e||t)(i["\u0275\u0275directiveInject"](a.FormBuilder),i["\u0275\u0275directiveInject"](c.MatDialog))},t.\u0275cmp=i["\u0275\u0275defineComponent"]({type:t,selectors:[["tb-filter-predicate-list"]],inputs:{disabled:"disabled",valueType:"valueType",key:"key",operation:"operation",displayUserParameters:"displayUserParameters",allowUserDynamicSource:"allowUserDynamicSource",onlyUserDynamicSource:"onlyUserDynamicSource"},features:[i["\u0275\u0275ProvidersFeature"]([{provide:a.NG_VALUE_ACCESSOR,useExisting:Object(i.forwardRef)((function(){return t})),multi:!0}])],decls:33,vars:24,consts:[["fxLayout","column",3,"formGroup"],[3,"expanded"],["translate",""],["fxLayout","row"],["fxFlex","8"],["fxLayout","row","fxLayoutAlign","start center","fxLayoutGap","8px","fxFlex","92"],["fxFlex","","fxLayout","row","fxLayoutGap","8px"],["fxFlex","30","fxLayout","row","fxLayoutAlign","start center","fxLayoutGap","8px"],["fxFlex","","translate","",1,"tb-title","no-padding"],["translate","","class","tb-title no-padding","style","min-width: 70px;",4,"ngIf"],["fxFlex","70","translate","",1,"tb-title","no-padding"],["translate","","class","tb-title no-padding","style","width: 60px;",4,"ngIf"],[2,"min-width","40px",3,"fxShow"],[1,"predicate-list"],["fxLayout","row","fxLayoutAlign","start center","style","height: 45px;","formArrayName","predicates",4,"ngFor","ngForOf"],["fxLayoutAlign","center center","translate","",1,"no-data-found",3,"fxShow","ngClass"],["fxLayout","row","fxLayoutGap","8px",2,"margin-top","16px"],["mat-button","","mat-raised-button","","color","primary","type","button","matTooltipPosition","above",3,"fxShow","matTooltip","click"],["translate","",1,"tb-title","no-padding",2,"min-width","70px"],["translate","",1,"tb-title","no-padding",2,"width","60px"],["fxLayout","row","fxLayoutAlign","start center","formArrayName","predicates",2,"height","45px"],["fxFlex","8","fxLayout","row","fxLayoutAlign","center",1,"filters-operation"],[4,"ngIf"],["fxLayout","column","fxFlex","92"],["fxLayout","row","fxLayoutAlign","start center","fxLayoutGap","8px","fxFlex",""],["fxFlex","",3,"valueType","displayUserParameters","allowUserDynamicSource","onlyUserDynamicSource","key","formControl"],["mat-icon-button","","color","primary","type","button","matTooltipPosition","above",3,"fxShow","matTooltip","click"]],template:function(t,e){1&t&&(i["\u0275\u0275elementStart"](0,"section",0),i["\u0275\u0275elementStart"](1,"mat-expansion-panel",1),i["\u0275\u0275elementStart"](2,"mat-expansion-panel-header"),i["\u0275\u0275elementStart"](3,"mat-panel-title"),i["\u0275\u0275elementStart"](4,"div",2),i["\u0275\u0275text"](5,"filter.filters"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](6,"div",3),i["\u0275\u0275element"](7,"span",4),i["\u0275\u0275elementStart"](8,"div",5),i["\u0275\u0275elementStart"](9,"div",6),i["\u0275\u0275elementStart"](10,"div",7),i["\u0275\u0275elementStart"](11,"label",8),i["\u0275\u0275text"](12,"filter.operation.operation"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](13,x,2,0,"label",9),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](14,"label",10),i["\u0275\u0275text"](15,"filter.value"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](16,C,2,0,"label",11),i["\u0275\u0275elementStart"](17,"span",12),i["\u0275\u0275text"](18,"\xa0"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](19,"mat-divider"),i["\u0275\u0275elementStart"](20,"div",13),i["\u0275\u0275template"](21,w,10,11,"div",14),i["\u0275\u0275elementStart"](22,"span",15),i["\u0275\u0275text"](23,"filter.no-filters"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](24,"div",16),i["\u0275\u0275elementStart"](25,"button",17),i["\u0275\u0275listener"]("click",(function(){return e.addPredicate(!1)})),i["\u0275\u0275pipe"](26,"translate"),i["\u0275\u0275text"](27),i["\u0275\u0275pipe"](28,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](29,"button",17),i["\u0275\u0275listener"]("click",(function(){return e.addPredicate(!0)})),i["\u0275\u0275pipe"](30,"translate"),i["\u0275\u0275text"](31),i["\u0275\u0275pipe"](32,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()),2&t&&(i["\u0275\u0275property"]("formGroup",e.filterListFormGroup),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("expanded",!0),i["\u0275\u0275advance"](12),i["\u0275\u0275property"]("ngIf",e.valueType===e.valueTypeEnum.STRING),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("ngIf",e.displayUserParameters),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("fxShow",!e.disabled),i["\u0275\u0275advance"](4),i["\u0275\u0275property"]("ngForOf",e.predicatesFormArray().controls),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("fxShow",!e.predicatesFormArray().length)("ngClass",i["\u0275\u0275pureFunction1"](22,E,e.disabled)),i["\u0275\u0275advance"](3),i["\u0275\u0275propertyInterpolate"]("matTooltip",i["\u0275\u0275pipeBind1"](26,14,"filter.add-filter")),i["\u0275\u0275property"]("fxShow",!e.disabled),i["\u0275\u0275advance"](2),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](28,16,"action.add")," "),i["\u0275\u0275advance"](2),i["\u0275\u0275propertyInterpolate"]("matTooltip",i["\u0275\u0275pipeBind1"](30,18,"filter.add-complex-filter")),i["\u0275\u0275property"]("fxShow",!e.disabled),i["\u0275\u0275advance"](2),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](32,20,"filter.add-complex")," "))},directives:[d.f,a.NgControlStatusGroup,a.FormGroupDirective,p.MatExpansionPanel,p.MatExpansionPanelHeader,p.MatExpansionPanelTitle,u.TranslateDirective,d.b,d.e,d.g,m.NgIf,f.d,h.MatDivider,m.NgForOf,m.NgClass,f.b,g.MatButton,y.MatTooltip,a.FormArrayName,b.a,a.NgControlStatus,a.FormControlDirective,v.MatIcon],pipes:[u.TranslatePipe],styles:["[_nghost-%COMP%]   .predicate-list[_ngcontent-%COMP%]{overflow:auto;max-height:350px}[_nghost-%COMP%]   .predicate-list[_ngcontent-%COMP%]   .no-data-found[_ngcontent-%COMP%]{height:50px}[_nghost-%COMP%]   .filters-operation[_ngcontent-%COMP%]{margin-top:-40px;color:#666;font-weight:500}"]}),t}();!function(){i["\u0275setClassMetadata"](I,[{type:i.Component,args:[{selector:"tb-filter-predicate-list",templateUrl:"./filter-predicate-list.component.html",styleUrls:["./filter-predicate-list.component.scss"],providers:[{provide:a.NG_VALUE_ACCESSOR,useExisting:Object(i.forwardRef)((function(){return I})),multi:!0}]}]}],(function(){return[{type:a.FormBuilder},{type:c.MatDialog}]}),{disabled:[{type:i.Input}],valueType:[{type:i.Input}],key:[{type:i.Input}],operation:[{type:i.Input}],displayUserParameters:[{type:i.Input}],allowUserDynamicSource:[{type:i.Input}],onlyUserDynamicSource:[{type:i.Input}]})}()},Hl1W:function(t,e,n){"use strict";n.d(e,"a",(function(){return a})),n.d(e,"b",(function(){return i})),n.d(e,"c",(function(){return r})),n.d(e,"d",(function(){return o}));var i,a=8;!function(t){t.google="google-map",t.openstreet="openstreet-map",t.here="here",t.image="image-map",t.tencent="tencent-map"}(i||(i={}));var r={xPosKeyName:"xPos",yPosKeyName:"yPos",markerOffsetX:.5,markerOffsetY:1,latKeyName:"latitude",lngKeyName:"longitude",polygonKeyName:"coordinates",showLabel:!1,label:"${entityName}",showTooltip:!1,useDefaultCenterPosition:!1,showTooltipAction:"click",autocloseTooltip:!1,showPolygon:!1,labelColor:"#000000",color:"#FE7569",polygonColor:"#0000ff",polygonStrokeColor:"#fe0001",polygonOpacity:.5,polygonStrokeOpacity:1,polygonStrokeWeight:1,useLabelFunction:!1,markerImages:[],strokeWeight:2,strokeOpacity:1,initCallback:function(){},disableScrollZooming:!1,minZoomLevel:16,credentials:"",markerClusteringSetting:null,draggableMarker:!1,editablePolygon:!1,fitMapBounds:!0,mapPageSize:16384},o=["HERE.normalDay","HERE.normalNight","HERE.hybridDay","HERE.terrainDay"]},HvOk:function(t,e,n){"use strict";n.d(e,"a",(function(){return k}));var i=n("mrSG"),a=n("fXoL"),r=n("FKr1"),o=n("0IaG"),s=n("3Pt+"),l=n("gmuX"),c=n("0lYY"),d=n("OiFK"),p=n("xKAQ"),u=n("S+vS"),m=n("//Q6"),f=n("kHY0"),h=n("l7P3"),g=n("tyNb"),y=n("sYmb"),b=n("/t3+"),v=n("XiUz"),x=n("bTqV"),C=n("NFeN"),S=n("ofXK"),w=n("f0Cb"),E=n("znSr"),I=n("Qu3c"),O=n("bv9b"),T=n("kmnG"),M=n("1jcm");function F(t,e){1&t&&a["\u0275\u0275element"](0,"mat-progress-bar",20)}function P(t,e){1&t&&a["\u0275\u0275element"](0,"div",21)}function D(t,e){if(1&t){var n=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementStart"](0,"div",22),a["\u0275\u0275elementStart"](1,"span",9),a["\u0275\u0275text"](2),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](3,"div",23),a["\u0275\u0275elementStart"](4,"mat-label",2),a["\u0275\u0275text"](5),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](6,"section",24),a["\u0275\u0275element"](7,"mat-slide-toggle",25),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](8,"button",26),a["\u0275\u0275listener"]("click",(function(){a["\u0275\u0275restoreView"](n);var t=e.index;return a["\u0275\u0275nextContext"]().editFilter(t)})),a["\u0275\u0275pipe"](9,"async"),a["\u0275\u0275pipe"](10,"translate"),a["\u0275\u0275elementStart"](11,"mat-icon"),a["\u0275\u0275text"](12,"edit"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](13,"button",26),a["\u0275\u0275listener"]("click",(function(){a["\u0275\u0275restoreView"](n);var t=e.index;return a["\u0275\u0275nextContext"]().removeFilter(t)})),a["\u0275\u0275pipe"](14,"async"),a["\u0275\u0275pipe"](15,"translate"),a["\u0275\u0275elementStart"](16,"mat-icon"),a["\u0275\u0275text"](17,"close"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()}if(2&t){var i=e.$implicit,r=e.index,o=a["\u0275\u0275nextContext"]();a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate1"]("",r+1,"."),a["\u0275\u0275advance"](3),a["\u0275\u0275textInterpolate"](i.get("filter").value),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("formControl",i.get("editable")),a["\u0275\u0275advance"](1),a["\u0275\u0275propertyInterpolate"]("matTooltip",a["\u0275\u0275pipeBind1"](10,9,"filter.edit")),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](9,7,o.isLoading$)),a["\u0275\u0275advance"](5),a["\u0275\u0275propertyInterpolate"]("matTooltip",a["\u0275\u0275pipeBind1"](15,13,"filter.remove-filter")),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](14,11,o.isLoading$))}}var k=function(t){function e(e,n,i,a,r,o,s,l,d,p){var u,f=t.call(this,e,n,r)||this;if(f.store=e,f.router=n,f.data=i,f.errorStateMatcher=a,f.dialogRef=r,f.fb=o,f.utils=s,f.translate=l,f.dialogs=d,f.dialog=p,f.filterToWidgetsMap={},f.submitted=!1,f.title=i.customTitle?i.customTitle:"filter.filters",f.disableAdd=f.data.disableAdd,i.widgets)if(f.data.isSingleWidget&&1===f.data.widgets.length){var h=f.data.widgets[0];u=[h.config.title];for(var g=0,y=Object.keys(f.data.filters);g<y.length;g++){var b=y[g];f.filterToWidgetsMap[b]=u}}else f.data.widgets.forEach((function(t){f.utils.validateDatasources(t.config.datasources).forEach((function(e){e.type===c.a.entity&&e.filterId&&((u=f.filterToWidgetsMap[e.filterId])||(u=[],f.filterToWidgetsMap[e.filterId]=u),u.push(t.config.title))}))}));for(var v=[],x=0,C=Object.keys(f.data.filters);x<C.length;x++){b=C[x];var S=f.data.filters[b];Object(m.z)(S.editable)&&(S.editable=!0),v.push(f.createFilterFormControl(b,S))}return f.filtersFormGroup=f.fb.group({filters:f.fb.array(v)}),f}return Object(i.d)(e,t),e.prototype.createFilterFormControl=function(t,e){return this.fb.group({id:[t],filter:[e?e.filter:null,[s.Validators.required]],keyFilters:[e?e.keyFilters:[],[s.Validators.required]],editable:[!e||e.editable]})},e.prototype.filtersFormArray=function(){return this.filtersFormGroup.get("filters")},e.prototype.ngOnInit=function(){},e.prototype.isErrorState=function(t,e){var n=this.errorStateMatcher.isErrorState(t,e),i=!!(t&&t.invalid&&this.submitted);return n||i},e.prototype.removeFilter=function(t){var e=this.filtersFormGroup.get("filters").value[t],n=this.filterToWidgetsMap[e.id];if(n){for(var i="",a=0,r=n;a<r.length;a++){i+="<br/>'"+r[a]+"'"}var o=this.translate.instant("filter.unable-delete-filter-text",{filter:e.filter,widgetsList:i});this.dialogs.alert(this.translate.instant("filter.unable-delete-filter-title"),o,this.translate.instant("action.close"),!0)}else this.filtersFormGroup.get("filters").removeAt(t),this.filtersFormGroup.markAsDirty()},e.prototype.addFilter=function(){this.openFilterDialog(-1)},e.prototype.editFilter=function(t){this.openFilterDialog(t)},e.prototype.openFilterDialog=function(t){var e,n=this,i=-1===t,a=this.filtersFormGroup.get("filters").value;i||(e=a[t]),this.dialog.open(f.a,{disableClose:!0,panelClass:["tb-dialog","tb-fullscreen-dialog"],data:{isAdd:i,filters:a,filter:i?null:Object(m.e)(e)}}).afterClosed().subscribe((function(e){if(e){if(i)n.filtersFormGroup.get("filters").push(n.createFilterFormControl(e.id,e));else{var a=n.filtersFormGroup.get("filters").at(t);a.get("filter").patchValue(e.filter),a.get("editable").patchValue(e.editable),a.get("keyFilters").patchValue(e.keyFilters)}n.filtersFormGroup.markAsDirty()}}))},e.prototype.cancel=function(){this.dialogRef.close(null)},e.prototype.save=function(){this.submitted=!0;for(var t,e={},n={},i=!0,a=0,r=this.filtersFormGroup.get("filters").value;a<r.length;a++){var o=r[a],s=o.id,l=o.filter,c=o.keyFilters,d=o.editable;if(n[l]){i=!1,t=this.translate.instant("filter.duplicate-filter-error",{filter:l});break}if(!c||!c.length){i=!1,t=this.translate.instant("filter.missing-key-filters-error",{filter:l});break}n[l]=l,e[s]={id:s,filter:l,keyFilters:c,editable:d}}i?this.dialogRef.close(e):this.store.dispatch(new p.b({message:t,type:"error"}))},e.\u0275fac=function(t){return new(t||e)(a["\u0275\u0275directiveInject"](h.Store),a["\u0275\u0275directiveInject"](g.Router),a["\u0275\u0275directiveInject"](o.MAT_DIALOG_DATA),a["\u0275\u0275directiveInject"](r.ErrorStateMatcher,4),a["\u0275\u0275directiveInject"](o.MatDialogRef),a["\u0275\u0275directiveInject"](s.FormBuilder),a["\u0275\u0275directiveInject"](d.a),a["\u0275\u0275directiveInject"](y.TranslateService),a["\u0275\u0275directiveInject"](u.a),a["\u0275\u0275directiveInject"](o.MatDialog))},e.\u0275cmp=a["\u0275\u0275defineComponent"]({type:e,selectors:[["tb-filters-dialog"]],features:[a["\u0275\u0275ProvidersFeature"]([{provide:r.ErrorStateMatcher,useExisting:e}]),a["\u0275\u0275InheritDefinitionFeature"]],decls:41,vars:36,consts:[[2,"width","700px",3,"formGroup","ngSubmit"],["color","primary"],["fxFlex",""],["mat-icon-button","","type","button",3,"click"],[1,"material-icons"],["color","warn","mode","indeterminate",4,"ngIf"],["style","height: 4px;",4,"ngIf"],["mat-dialog-content",""],["fxLayout","row","fxLayoutAlign","start center",1,"tb-filters-header"],["fxFlex","5"],["fxFlex","95","fxLayout","row","fxLayoutAlign","start center"],["translate","","fxFlex","",1,"tb-header-label"],["translate","","fxFlex","120px","fxLayout","column","fxLayoutAlign","center center",1,"tb-header-label",2,"padding-left","30px"],[2,"min-width","80px"],[3,"disabled"],["fxFlex","","fxLayout","row","fxLayoutAlign","start center","formArrayName","filters",4,"ngFor","ngForOf"],["mat-dialog-actions",""],["mat-raised-button","","color","primary","type","button","matTooltipPosition","above",3,"fxShow","disabled","matTooltip","click"],["mat-button","","color","primary","type","button","cdkFocusInitial","",3,"disabled","click"],["mat-raised-button","","color","primary","type","submit",3,"disabled"],["color","warn","mode","indeterminate"],[2,"height","4px"],["fxFlex","","fxLayout","row","fxLayoutAlign","start center","formArrayName","filters"],["fxFlex","95","fxLayout","row","fxLayoutAlign","start center",1,"mat-elevation-z4","tb-filter"],["fxFlex","120px","fxLayout","column","fxLayoutAlign","center center",1,"tb-editable-switch",2,"padding-left","10px"],[1,"editable-switch",3,"formControl"],["mat-icon-button","","color","primary","type","button","matTooltipPosition","above",2,"min-width","40px",3,"disabled","matTooltip","click"]],template:function(t,e){1&t&&(a["\u0275\u0275elementStart"](0,"form",0),a["\u0275\u0275listener"]("ngSubmit",(function(){return e.save()})),a["\u0275\u0275elementStart"](1,"mat-toolbar",1),a["\u0275\u0275elementStart"](2,"h2"),a["\u0275\u0275text"](3),a["\u0275\u0275pipe"](4,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](5,"span",2),a["\u0275\u0275elementStart"](6,"button",3),a["\u0275\u0275listener"]("click",(function(){return e.cancel()})),a["\u0275\u0275elementStart"](7,"mat-icon",4),a["\u0275\u0275text"](8,"close"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275template"](9,F,1,0,"mat-progress-bar",5),a["\u0275\u0275pipe"](10,"async"),a["\u0275\u0275template"](11,P,1,0,"div",6),a["\u0275\u0275pipe"](12,"async"),a["\u0275\u0275elementStart"](13,"div",7),a["\u0275\u0275elementStart"](14,"div",8),a["\u0275\u0275element"](15,"span",9),a["\u0275\u0275elementStart"](16,"div",10),a["\u0275\u0275elementStart"](17,"div",11),a["\u0275\u0275text"](18,"filter.filter"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](19,"div",12),a["\u0275\u0275text"](20,"filter.editable"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](21,"div",13),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](22,"fieldset",14),a["\u0275\u0275pipe"](23,"async"),a["\u0275\u0275element"](24,"mat-divider"),a["\u0275\u0275template"](25,D,18,15,"div",15),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](26,"div",16),a["\u0275\u0275elementStart"](27,"button",17),a["\u0275\u0275listener"]("click",(function(){return e.addFilter()})),a["\u0275\u0275pipe"](28,"async"),a["\u0275\u0275pipe"](29,"translate"),a["\u0275\u0275text"](30),a["\u0275\u0275pipe"](31,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](32,"span",2),a["\u0275\u0275elementStart"](33,"button",18),a["\u0275\u0275listener"]("click",(function(){return e.cancel()})),a["\u0275\u0275pipe"](34,"async"),a["\u0275\u0275text"](35),a["\u0275\u0275pipe"](36,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](37,"button",19),a["\u0275\u0275pipe"](38,"async"),a["\u0275\u0275text"](39),a["\u0275\u0275pipe"](40,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()),2&t&&(a["\u0275\u0275property"]("formGroup",e.filtersFormGroup),a["\u0275\u0275advance"](3),a["\u0275\u0275textInterpolate"](a["\u0275\u0275pipeBind1"](4,14,e.title)),a["\u0275\u0275advance"](6),a["\u0275\u0275property"]("ngIf",a["\u0275\u0275pipeBind1"](10,16,e.isLoading$)),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("ngIf",!a["\u0275\u0275pipeBind1"](12,18,e.isLoading$)),a["\u0275\u0275advance"](11),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](23,20,e.isLoading$)),a["\u0275\u0275advance"](3),a["\u0275\u0275property"]("ngForOf",e.filtersFormArray().controls),a["\u0275\u0275advance"](2),a["\u0275\u0275propertyInterpolate"]("matTooltip",a["\u0275\u0275pipeBind1"](29,24,"filter.add")),a["\u0275\u0275property"]("fxShow",!e.disableAdd)("disabled",a["\u0275\u0275pipeBind1"](28,22,e.isLoading$)),a["\u0275\u0275advance"](3),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](31,26,"filter.add")," "),a["\u0275\u0275advance"](3),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](34,28,e.isLoading$)),a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](36,30,"action.cancel")," "),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](38,32,e.isLoading$)||e.filtersFormGroup.invalid||!e.filtersFormGroup.dirty),a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](40,34,"action.save")," "))},directives:[s["\u0275angular_packages_forms_forms_y"],s.NgControlStatusGroup,s.FormGroupDirective,b.MatToolbar,v.b,x.MatButton,C.MatIcon,S.NgIf,o.MatDialogContent,v.f,v.e,y.TranslateDirective,w.MatDivider,S.NgForOf,o.MatDialogActions,E.d,I.MatTooltip,O.MatProgressBar,s.FormArrayName,T.MatLabel,M.MatSlideToggle,s.NgControlStatus,s.FormControlDirective],pipes:[y.TranslatePipe,S.AsyncPipe],styles:["[_nghost-%COMP%]   .tb-filters-header[_ngcontent-%COMP%]{min-height:40px;padding:0 11px;margin:5px}[_nghost-%COMP%]   .tb-filters-header[_ngcontent-%COMP%]   .tb-header-label[_ngcontent-%COMP%]{font-size:14px;color:rgba(0,0,0,.570588)}[_nghost-%COMP%]   mat-divider[_ngcontent-%COMP%]{margin:-1px -24px}[_nghost-%COMP%]   .tb-filter[_ngcontent-%COMP%]{padding:0 0 0 10px;margin:5px}[_nghost-%COMP%]   .tb-filter[_ngcontent-%COMP%]   .tb-editable-switch[_ngcontent-%COMP%]{padding-left:10px}[_nghost-%COMP%]   .tb-filter[_ngcontent-%COMP%]   .tb-editable-switch[_ngcontent-%COMP%]   .editable-switch[_ngcontent-%COMP%]{margin:0}[_nghost-%COMP%]     .mat-dialog-content{padding-top:0!important;padding-bottom:0!important}"]}),e}(l.a);!function(){a["\u0275setClassMetadata"](k,[{type:a.Component,args:[{selector:"tb-filters-dialog",templateUrl:"./filters-dialog.component.html",providers:[{provide:r.ErrorStateMatcher,useExisting:k}],styleUrls:["./filters-dialog.component.scss"]}]}],(function(){return[{type:h.Store},{type:g.Router},{type:void 0,decorators:[{type:a.Inject,args:[o.MAT_DIALOG_DATA]}]},{type:r.ErrorStateMatcher,decorators:[{type:a.SkipSelf}]},{type:o.MatDialogRef},{type:s.FormBuilder},{type:d.a},{type:y.TranslateService},{type:u.a},{type:o.MatDialog}]}),null)}()},Hxax:function(t,e,n){"use strict";n.d(e,"c",(function(){return f})),n.d(e,"b",(function(){return h})),n.d(e,"a",(function(){return g}));var i=n("mrSG"),a=n("0lYY"),r=n("2Vo4"),o=n("jtHE"),s=n("LRne"),l=n("Duvn"),c=n("JIr8"),d=n("lJxs"),p=n("05l1"),u=n("x+ZX"),m=n("//Q6");function f(t){var e=Object(m.e)(t);return delete e.actionSourceId,delete e.actionSourceName,delete e.typeName,e}function h(t){var e;return(e=!t||Object(m.z)(t.customFunction)&&Object(m.z)(t.customHtml)&&Object(m.z)(t.customCss)?{customHtml:'\x3c!--=======================================================================--\x3e\r\n\x3c!--=====  There are two example templates: for edit and add entity   =====--\x3e\r\n\x3c!--=======================================================================--\x3e\r\n\x3c!--========================  Edit entity example  ========================--\x3e\r\n\x3c!--=======================================================================--\x3e\r\n\x3c!-- --\x3e\r\n\x3c!--<form #editEntityForm="ngForm" [formGroup]="editEntityFormGroup"--\x3e\r\n\x3c!--      (ngSubmit)="save()"  class="edit-entity-form">--\x3e\r\n\x3c!--    <mat-toolbar fxLayout="row" color="primary">--\x3e\r\n\x3c!--        <h2>Edit {{entityType.toLowerCase()}} {{entityName}}</h2>--\x3e\r\n\x3c!--        <span fxFlex></span>--\x3e\r\n\x3c!--        <button mat-icon-button (click)="cancel()" type="button">--\x3e\r\n\x3c!--            <mat-icon class="material-icons">close</mat-icon>--\x3e\r\n\x3c!--        </button>--\x3e\r\n\x3c!--    </mat-toolbar>--\x3e\r\n\x3c!--    <mat-progress-bar color="warn" mode="indeterminate" *ngIf="isLoading$ | async">--\x3e\r\n\x3c!--    </mat-progress-bar>--\x3e\r\n\x3c!--    <div style="height: 4px;" *ngIf="!(isLoading$ | async)"></div>--\x3e\r\n\x3c!--    <div mat-dialog-content fxLayout="column">--\x3e\r\n\x3c!--        <div fxLayout="row" fxLayoutGap="8px" fxLayout.xs="column"  fxLayoutGap.xs="0">--\x3e\r\n\x3c!--            <mat-form-field fxFlex class="mat-block">--\x3e\r\n\x3c!--                <mat-label>Entity Name</mat-label>--\x3e\r\n\x3c!--                <input matInput formControlName="entityName" required readonly="">--\x3e\r\n\x3c!--            </mat-form-field>--\x3e\r\n\x3c!--            <mat-form-field fxFlex class="mat-block">--\x3e\r\n\x3c!--                <mat-label>Entity Label</mat-label>--\x3e\r\n\x3c!--                <input matInput formControlName="entityLabel">--\x3e\r\n\x3c!--            </mat-form-field>--\x3e\r\n\x3c!--        </div>--\x3e\r\n\x3c!--        <div fxLayout="row" fxLayoutGap="8px" fxLayout.xs="column"  fxLayoutGap.xs="0">--\x3e\r\n\x3c!--            <mat-form-field fxFlex class="mat-block">--\x3e\r\n\x3c!--                <mat-label>Entity Type</mat-label>--\x3e\r\n\x3c!--                <input matInput formControlName="entityType" readonly>--\x3e\r\n\x3c!--            </mat-form-field>--\x3e\r\n\x3c!--            <mat-form-field fxFlex class="mat-block">--\x3e\r\n\x3c!--                <mat-label>Type</mat-label>--\x3e\r\n\x3c!--                <input matInput formControlName="type" readonly>--\x3e\r\n\x3c!--            </mat-form-field>--\x3e\r\n\x3c!--        </div>--\x3e\r\n\x3c!--        <div formGroupName="attributes" fxLayout="column">--\x3e\r\n\x3c!--            <div fxLayout="row" fxLayoutGap="8px" fxLayout.xs="column"  fxLayoutGap.xs="0">--\x3e\r\n\x3c!--                <mat-form-field fxFlex class="mat-block">--\x3e\r\n\x3c!--                    <mat-label>Latitude</mat-label>--\x3e\r\n\x3c!--                    <input type="number" step="any" matInput formControlName="latitude">--\x3e\r\n\x3c!--                </mat-form-field>--\x3e\r\n\x3c!--                <mat-form-field fxFlex class="mat-block">--\x3e\r\n\x3c!--                    <mat-label>Longitude</mat-label>--\x3e\r\n\x3c!--                    <input type="number" step="any" matInput formControlName="longitude">--\x3e\r\n\x3c!--                </mat-form-field>--\x3e\r\n\x3c!--            </div>--\x3e\r\n\x3c!--            <div fxLayout="row" fxLayoutGap="8px" fxLayout.xs="column"  fxLayoutGap.xs="0">--\x3e\r\n\x3c!--                <mat-form-field fxFlex class="mat-block">--\x3e\r\n\x3c!--                    <mat-label>Address</mat-label>--\x3e\r\n\x3c!--                    <input matInput formControlName="address">--\x3e\r\n\x3c!--                </mat-form-field>--\x3e\r\n\x3c!--                <mat-form-field fxFlex class="mat-block">--\x3e\r\n\x3c!--                    <mat-label>Owner</mat-label>--\x3e\r\n\x3c!--                    <input matInput formControlName="owner">--\x3e\r\n\x3c!--                </mat-form-field>--\x3e\r\n\x3c!--            </div>--\x3e\r\n\x3c!--            <div fxLayout="row" fxLayoutGap="8px" fxLayout.xs="column"  fxLayoutGap.xs="0">--\x3e\r\n\x3c!--                <mat-form-field fxFlex class="mat-block">--\x3e\r\n\x3c!--                    <mat-label>Integer Value</mat-label>--\x3e\r\n\x3c!--                    <input type="number" step="1" matInput formControlName="number">--\x3e\r\n\x3c!--                    <mat-error *ngIf="editEntityFormGroup.get(\'attributes.number\').hasError(\'pattern\')">--\x3e\r\n\x3c!--                        Invalid integer value.--\x3e\r\n\x3c!--                    </mat-error>--\x3e\r\n\x3c!--                </mat-form-field>--\x3e\r\n\x3c!--                <div class="boolean-value-input" fxLayout="column" fxLayoutAlign="center start" fxFlex>--\x3e\r\n\x3c!--                    <label class="checkbox-label">Boolean Value</label>--\x3e\r\n\x3c!--                    <mat-checkbox formControlName="booleanValue" style="margin-bottom: 40px;">--\x3e\r\n\x3c!--                        {{ (editEntityFormGroup.get(\'attributes.booleanValue\').value ? "value.true" : "value.false") | translate }}--\x3e\r\n\x3c!--                    </mat-checkbox>--\x3e\r\n\x3c!--                </div>--\x3e\r\n\x3c!--            </div>--\x3e\r\n\x3c!--        </div>--\x3e\r\n\x3c!--        <div class="relations-list old-relations">--\x3e\r\n\x3c!--            <div class="mat-body-1" style="padding-bottom: 10px; color: rgba(0,0,0,0.57);">Relations</div>--\x3e\r\n\x3c!--            <div class="body" [fxShow]="oldRelations().length">--\x3e\r\n\x3c!--                <div class="row" fxLayout="row" fxLayoutAlign="start center" formArrayName="oldRelations" --\x3e\r\n\x3c!--                     *ngFor="let relation of oldRelations().controls; let i = index;">--\x3e\r\n\x3c!--                    <div [formGroupName]="i" class="mat-elevation-z2" fxFlex fxLayout="row" style="padding: 5px 0 5px 5px;">--\x3e\r\n\x3c!--                        <div fxFlex fxLayout="column">--\x3e\r\n\x3c!--                            <div fxLayout="row" fxLayoutGap="8px" fxLayout.xs="column"  fxLayoutGap.xs="0">--\x3e\r\n\x3c!--                                <mat-form-field class="mat-block" style="min-width: 100px;">--\x3e\r\n\x3c!--                                    <mat-label>Direction</mat-label>--\x3e\r\n\x3c!--                                    <mat-select formControlName="direction" name="direction">--\x3e\r\n\x3c!--                                        <mat-option *ngFor="let direction of entitySearchDirection | keyvalue" [value]="direction.value">--\x3e\r\n\x3c!--                                            {{ ("relation.search-direction." + direction.value) | translate}}--\x3e\r\n\x3c!--                                        </mat-option>--\x3e\r\n\x3c!--                                    </mat-select>--\x3e\r\n\x3c!--                                    <mat-error *ngIf="relation.get(\'direction\').hasError(\'required\')">--\x3e\r\n\x3c!--                                        Relation direction is required.--\x3e\r\n\x3c!--                                    </mat-error>--\x3e\r\n\x3c!--                                </mat-form-field>--\x3e\r\n\x3c!--                                <tb-relation-type-autocomplete--\x3e\r\n\x3c!--                                        fxFlex class="mat-block"--\x3e\r\n\x3c!--                                        formControlName="relationType"--\x3e\r\n\x3c!--                                        required="true">--\x3e\r\n\x3c!--                                </tb-relation-type-autocomplete>--\x3e\r\n\x3c!--                            </div>--\x3e\r\n\x3c!--                            <div fxLayout="row" fxLayout.xs="column">--\x3e\r\n\x3c!--                                <tb-entity-select--\x3e\r\n\x3c!--                                        fxFlex class="mat-block"--\x3e\r\n\x3c!--                                        required="true"--\x3e\r\n\x3c!--                                        formControlName="relatedEntity">--\x3e\r\n\x3c!--                                </tb-entity-select>--\x3e\r\n\x3c!--                            </div>--\x3e\r\n\x3c!--                        </div>--\x3e\r\n\x3c!--                        <div fxLayout="column" fxLayoutAlign="center center">--\x3e\r\n\x3c!--                            <button mat-icon-button color="primary"--\x3e\r\n\x3c!--                                    aria-label="Remove"--\x3e\r\n\x3c!--                                    type="button"--\x3e\r\n\x3c!--                                    (click)="removeOldRelation(i)"--\x3e\r\n\x3c!--                                    matTooltip="Remove relation"--\x3e\r\n\x3c!--                                    matTooltipPosition="above">--\x3e\r\n\x3c!--                                <mat-icon>close</mat-icon>--\x3e\r\n\x3c!--                            </button>--\x3e\r\n\x3c!--                        </div>--\x3e\r\n\x3c!--                    </div>--\x3e\r\n\x3c!--                </div>--\x3e\r\n\x3c!--            </div>--\x3e\r\n\x3c!--        </div>--\x3e\r\n\x3c!--        <div class="relations-list">--\x3e\r\n\x3c!--            <div class="mat-body-1" style="padding-bottom: 10px; color: rgba(0,0,0,0.57);">New Relations</div>--\x3e\r\n\x3c!--            <div class="body" [fxShow]="relations().length">--\x3e\r\n\x3c!--                <div class="row" fxLayout="row" fxLayoutAlign="start center" formArrayName="relations" *ngFor="let relation of relations().controls; let i = index;">--\x3e\r\n\x3c!--                    <div [formGroupName]="i" class="mat-elevation-z2" fxFlex fxLayout="row" style="padding: 5px 0 5px 5px;">--\x3e\r\n\x3c!--                        <div fxFlex fxLayout="column">--\x3e\r\n\x3c!--                            <div fxLayout="row" fxLayoutGap="8px" fxLayout.xs="column"  fxLayoutGap.xs="0">--\x3e\r\n\x3c!--                                <mat-form-field class="mat-block" style="min-width: 100px;">--\x3e\r\n\x3c!--                                    <mat-label>Direction</mat-label>--\x3e\r\n\x3c!--                                    <mat-select formControlName="direction" name="direction">--\x3e\r\n\x3c!--                                        <mat-option *ngFor="let direction of entitySearchDirection | keyvalue" [value]="direction.value">--\x3e\r\n\x3c!--                                            {{ ("relation.search-direction." + direction.value) | translate}}--\x3e\r\n\x3c!--                                        </mat-option>--\x3e\r\n\x3c!--                                    </mat-select>--\x3e\r\n\x3c!--                                    <mat-error *ngIf="relation.get(\'direction\').hasError(\'required\')">--\x3e\r\n\x3c!--                                        Relation direction is required.--\x3e\r\n\x3c!--                                    </mat-error>--\x3e\r\n\x3c!--                                </mat-form-field>--\x3e\r\n\x3c!--                                <tb-relation-type-autocomplete--\x3e\r\n\x3c!--                                        fxFlex class="mat-block"--\x3e\r\n\x3c!--                                        formControlName="relationType"--\x3e\r\n\x3c!--                                        [required]="true">--\x3e\r\n\x3c!--                                </tb-relation-type-autocomplete>--\x3e\r\n\x3c!--                            </div>--\x3e\r\n\x3c!--                            <div fxLayout="row" fxLayout.xs="column">--\x3e\r\n\x3c!--                                <tb-entity-select--\x3e\r\n\x3c!--                                        fxFlex class="mat-block"--\x3e\r\n\x3c!--                                        [required]="true"--\x3e\r\n\x3c!--                                        formControlName="relatedEntity">--\x3e\r\n\x3c!--                                </tb-entity-select>--\x3e\r\n\x3c!--                            </div>--\x3e\r\n\x3c!--                        </div>--\x3e\r\n\x3c!--                        <div fxLayout="column" fxLayoutAlign="center center">--\x3e\r\n\x3c!--                            <button mat-icon-button color="primary"--\x3e\r\n\x3c!--                                    aria-label="Remove"--\x3e\r\n\x3c!--                                    type="button"--\x3e\r\n\x3c!--                                    (click)="removeRelation(i)"--\x3e\r\n\x3c!--                                    matTooltip="Remove relation"--\x3e\r\n\x3c!--                                    matTooltipPosition="above">--\x3e\r\n\x3c!--                                <mat-icon>close</mat-icon>--\x3e\r\n\x3c!--                            </button>--\x3e\r\n\x3c!--                        </div>--\x3e\r\n\x3c!--                    </div>--\x3e\r\n\x3c!--                </div>--\x3e\r\n\x3c!--            </div>--\x3e\r\n\x3c!--            <div>--\x3e\r\n\x3c!--                <button mat-raised-button color="primary"--\x3e\r\n\x3c!--                        type="button"--\x3e\r\n\x3c!--                        (click)="addRelation()"--\x3e\r\n\x3c!--                        matTooltip="Add Relation"--\x3e\r\n\x3c!--                        matTooltipPosition="above">--\x3e\r\n\x3c!--                    Add--\x3e\r\n\x3c!--                </button>--\x3e\r\n\x3c!--            </div>--\x3e\r\n\x3c!--        </div>--\x3e\r\n\x3c!--    </div>--\x3e\r\n\x3c!--    <div mat-dialog-actions fxLayout="row" fxLayoutAlign="end center">--\x3e\r\n\x3c!--        <button mat-button color="primary"--\x3e\r\n\x3c!--                type="button"--\x3e\r\n\x3c!--                [disabled]="(isLoading$ | async)"--\x3e\r\n\x3c!--                (click)="cancel()" cdkFocusInitial>--\x3e\r\n\x3c!--            Cancel--\x3e\r\n\x3c!--        </button>--\x3e\r\n\x3c!--        <button mat-button mat-raised-button color="primary"--\x3e\r\n\x3c!--                type="submit"--\x3e\r\n\x3c!--                [disabled]="(isLoading$ | async) || editEntityForm.invalid || !editEntityForm.dirty">--\x3e\r\n\x3c!--            Save--\x3e\r\n\x3c!--        </button>--\x3e\r\n\x3c!--    </div>--\x3e\r\n\x3c!--</form>--\x3e\r\n\x3c!----\x3e\r\n\x3c!--========================================================================--\x3e\r\n\x3c!--=========================  Add entity example  =========================--\x3e\r\n\x3c!--========================================================================--\x3e\r\n\x3c!----\x3e\r\n\x3c!--<form #addEntityForm="ngForm" [formGroup]="addEntityFormGroup"--\x3e\r\n\x3c!--      (ngSubmit)="save()" class="add-entity-form">--\x3e\r\n\x3c!--    <mat-toolbar fxLayout="row" color="primary">--\x3e\r\n\x3c!--        <h2>Add entity</h2>--\x3e\r\n\x3c!--        <span fxFlex></span>--\x3e\r\n\x3c!--        <button mat-icon-button (click)="cancel()" type="button">--\x3e\r\n\x3c!--            <mat-icon class="material-icons">close</mat-icon>--\x3e\r\n\x3c!--        </button>--\x3e\r\n\x3c!--    </mat-toolbar>--\x3e\r\n\x3c!--    <mat-progress-bar color="warn" mode="indeterminate" *ngIf="isLoading$ | async">--\x3e\r\n\x3c!--    </mat-progress-bar>--\x3e\r\n\x3c!--    <div style="height: 4px;" *ngIf="!(isLoading$ | async)"></div>--\x3e\r\n\x3c!--    <div mat-dialog-content fxLayout="column">--\x3e\r\n\x3c!--        <div fxLayout="row" fxLayoutGap="8px" fxLayout.xs="column"  fxLayoutGap.xs="0">--\x3e\r\n\x3c!--            <mat-form-field fxFlex class="mat-block">--\x3e\r\n\x3c!--                <mat-label>Entity Name</mat-label>--\x3e\r\n\x3c!--                <input matInput formControlName="entityName" required>--\x3e\r\n\x3c!--                <mat-error *ngIf="addEntityFormGroup.get(\'entityName\').hasError(\'required\')">--\x3e\r\n\x3c!--                    Entity name is required.--\x3e\r\n\x3c!--                </mat-error>--\x3e\r\n\x3c!--            </mat-form-field>--\x3e\r\n\x3c!--            <mat-form-field fxFlex class="mat-block">--\x3e\r\n\x3c!--                <mat-label>Entity Label</mat-label>--\x3e\r\n\x3c!--                <input matInput formControlName="entityLabel" >--\x3e\r\n\x3c!--            </mat-form-field>--\x3e\r\n\x3c!--        </div>--\x3e\r\n\x3c!--        <div fxLayout="row" fxLayoutGap="8px" fxLayout.xs="column"  fxLayoutGap.xs="0">--\x3e\r\n\x3c!--            <tb-entity-type-select--\x3e\r\n\x3c!--                    class="mat-block"--\x3e\r\n\x3c!--                    formControlName="entityType"--\x3e\r\n\x3c!--                    [showLabel]="true"--\x3e\r\n\x3c!--                    [allowedEntityTypes]="allowedEntityTypes"--\x3e\r\n\x3c!--            ></tb-entity-type-select>--\x3e\r\n\x3c!--            <tb-entity-subtype-autocomplete--\x3e\r\n\x3c!--                    fxFlex *ngIf="addEntityFormGroup.get(\'entityType\').value == \'ASSET\'"--\x3e\r\n\x3c!--                    class="mat-block"--\x3e\r\n\x3c!--                    formControlName="type"--\x3e\r\n\x3c!--                    [required]="true"--\x3e\r\n\x3c!--                    [entityType]="\'ASSET\'"--\x3e\r\n\x3c!--            ></tb-entity-subtype-autocomplete>--\x3e\r\n\x3c!--            <tb-entity-subtype-autocomplete--\x3e\r\n\x3c!--                    fxFlex *ngIf="addEntityFormGroup.get(\'entityType\').value != \'ASSET\'"--\x3e\r\n\x3c!--                    class="mat-block"--\x3e\r\n\x3c!--                    formControlName="type"--\x3e\r\n\x3c!--                    [required]="true"--\x3e\r\n\x3c!--                    [entityType]="\'DEVICE\'"--\x3e\r\n\x3c!--            ></tb-entity-subtype-autocomplete>--\x3e\r\n\x3c!--        </div>--\x3e\r\n\x3c!--        <div formGroupName="attributes" fxLayout="column">--\x3e\r\n\x3c!--            <div fxLayout="row" fxLayoutGap="8px" fxLayout.xs="column"  fxLayoutGap.xs="0">--\x3e\r\n\x3c!--                <mat-form-field fxFlex class="mat-block">--\x3e\r\n\x3c!--                    <mat-label>Latitude</mat-label>--\x3e\r\n\x3c!--                    <input type="number" step="any" matInput formControlName="latitude">--\x3e\r\n\x3c!--                </mat-form-field>--\x3e\r\n\x3c!--                <mat-form-field fxFlex class="mat-block">--\x3e\r\n\x3c!--                    <mat-label>Longitude</mat-label>--\x3e\r\n\x3c!--                    <input type="number" step="any" matInput formControlName="longitude">--\x3e\r\n\x3c!--                </mat-form-field>--\x3e\r\n\x3c!--            </div>--\x3e\r\n\x3c!--            <div fxLayout="row" fxLayoutGap="8px" fxLayout.xs="column"  fxLayoutGap.xs="0">--\x3e\r\n\x3c!--                <mat-form-field fxFlex class="mat-block">--\x3e\r\n\x3c!--                    <mat-label>Address</mat-label>--\x3e\r\n\x3c!--                    <input matInput formControlName="address">--\x3e\r\n\x3c!--                </mat-form-field>--\x3e\r\n\x3c!--                <mat-form-field fxFlex class="mat-block">--\x3e\r\n\x3c!--                    <mat-label>Owner</mat-label>--\x3e\r\n\x3c!--                    <input matInput formControlName="owner">--\x3e\r\n\x3c!--                </mat-form-field>--\x3e\r\n\x3c!--            </div>--\x3e\r\n\x3c!--            <div fxLayout="row" fxLayoutGap="8px" fxLayout.xs="column"  fxLayoutGap.xs="0">--\x3e\r\n\x3c!--                <mat-form-field fxFlex class="mat-block">--\x3e\r\n\x3c!--                    <mat-label>Integer Value</mat-label>--\x3e\r\n\x3c!--                    <input type="number" step="1" matInput formControlName="number">--\x3e\r\n\x3c!--                    <mat-error *ngIf="addEntityFormGroup.get(\'attributes.number\').hasError(\'pattern\')">--\x3e\r\n\x3c!--                        Invalid integer value.--\x3e\r\n\x3c!--                    </mat-error>--\x3e\r\n\x3c!--                </mat-form-field>--\x3e\r\n\x3c!--                <div class="boolean-value-input" fxLayout="column" fxLayoutAlign="center start" fxFlex>--\x3e\r\n\x3c!--                    <label class="checkbox-label">Boolean Value</label>--\x3e\r\n\x3c!--                    <mat-checkbox formControlName="booleanValue" style="margin-bottom: 40px;">--\x3e\r\n\x3c!--                        {{ (addEntityFormGroup.get(\'attributes.booleanValue\').value ? "value.true" : "value.false") | translate }}--\x3e\r\n\x3c!--                    </mat-checkbox>--\x3e\r\n\x3c!--                </div>--\x3e\r\n\x3c!--            </div>--\x3e\r\n\x3c!--        </div>--\x3e\r\n\x3c!--        <div class="relations-list">--\x3e\r\n\x3c!--            <div class="mat-body-1" style="padding-bottom: 10px; color: rgba(0,0,0,0.57);">Relations</div>--\x3e\r\n\x3c!--            <div class="body" [fxShow]="relations().length">--\x3e\r\n\x3c!--                <div class="row" fxLayout="row" fxLayoutAlign="start center" formArrayName="relations" *ngFor="let relation of relations().controls; let i = index;">--\x3e\r\n\x3c!--                    <div [formGroupName]="i" class="mat-elevation-z2" fxFlex fxLayout="row" style="padding: 5px 0 5px 5px;">--\x3e\r\n\x3c!--                        <div fxFlex fxLayout="column">--\x3e\r\n\x3c!--                            <div fxLayout="row" fxLayoutGap="8px" fxLayout.xs="column"  fxLayoutGap.xs="0">--\x3e\r\n\x3c!--                                <mat-form-field class="mat-block" style="min-width: 100px;">--\x3e\r\n\x3c!--                                    <mat-label>Direction</mat-label>--\x3e\r\n\x3c!--                                    <mat-select formControlName="direction" name="direction">--\x3e\r\n\x3c!--                                        <mat-option *ngFor="let direction of entitySearchDirection | keyvalue" [value]="direction.value">--\x3e\r\n\x3c!--                                            {{ ("relation.search-direction." + direction.value) | translate}}--\x3e\r\n\x3c!--                                        </mat-option>--\x3e\r\n\x3c!--                                    </mat-select>--\x3e\r\n\x3c!--                                    <mat-error *ngIf="relation.get(\'direction\').hasError(\'required\')">--\x3e\r\n\x3c!--                                        Relation direction is required.--\x3e\r\n\x3c!--                                    </mat-error>--\x3e\r\n\x3c!--                                </mat-form-field>--\x3e\r\n\x3c!--                                <tb-relation-type-autocomplete--\x3e\r\n\x3c!--                                        fxFlex class="mat-block"--\x3e\r\n\x3c!--                                        formControlName="relationType"--\x3e\r\n\x3c!--                                        [required]="true">--\x3e\r\n\x3c!--                                </tb-relation-type-autocomplete>--\x3e\r\n\x3c!--                            </div>--\x3e\r\n\x3c!--                            <div fxLayout="row" fxLayout.xs="column">--\x3e\r\n\x3c!--                                <tb-entity-select--\x3e\r\n\x3c!--                                        fxFlex class="mat-block"--\x3e\r\n\x3c!--                                        [required]="true"--\x3e\r\n\x3c!--                                        formControlName="relatedEntity">--\x3e\r\n\x3c!--                                </tb-entity-select>--\x3e\r\n\x3c!--                            </div>--\x3e\r\n\x3c!--                        </div>--\x3e\r\n\x3c!--                        <div fxLayout="column" fxLayoutAlign="center center">--\x3e\r\n\x3c!--                            <button mat-icon-button color="primary"--\x3e\r\n\x3c!--                                    aria-label="Remove"--\x3e\r\n\x3c!--                                    type="button"--\x3e\r\n\x3c!--                                    (click)="removeRelation(i)"--\x3e\r\n\x3c!--                                    matTooltip="Remove relation"--\x3e\r\n\x3c!--                                    matTooltipPosition="above">--\x3e\r\n\x3c!--                                <mat-icon>close</mat-icon>--\x3e\r\n\x3c!--                            </button>--\x3e\r\n\x3c!--                        </div>--\x3e\r\n\x3c!--                    </div>--\x3e\r\n\x3c!--                </div>--\x3e\r\n\x3c!--            </div>--\x3e\r\n\x3c!--            <div>--\x3e\r\n\x3c!--                <button mat-raised-button color="primary"--\x3e\r\n\x3c!--                        type="button"--\x3e\r\n\x3c!--                        (click)="addRelation()"--\x3e\r\n\x3c!--                        matTooltip="Add Relation"--\x3e\r\n\x3c!--                        matTooltipPosition="above">--\x3e\r\n\x3c!--                    Add--\x3e\r\n\x3c!--                </button>--\x3e\r\n\x3c!--            </div>--\x3e\r\n\x3c!--        </div>--\x3e\r\n\x3c!--    </div>--\x3e\r\n\x3c!--    <div mat-dialog-actions fxLayout="row" fxLayoutAlign="end center">--\x3e\r\n\x3c!--        <button mat-button color="primary"--\x3e\r\n\x3c!--                type="button"--\x3e\r\n\x3c!--                [disabled]="(isLoading$ | async)"--\x3e\r\n\x3c!--                (click)="cancel()" cdkFocusInitial>--\x3e\r\n\x3c!--            Cancel--\x3e\r\n\x3c!--        </button>--\x3e\r\n\x3c!--        <button mat-button mat-raised-button color="primary"--\x3e\r\n\x3c!--                type="submit"--\x3e\r\n\x3c!--                [disabled]="(isLoading$ | async) || addEntityForm.invalid || !addEntityForm.dirty">--\x3e\r\n\x3c!--            Create--\x3e\r\n\x3c!--        </button>--\x3e\r\n\x3c!--    </div>--\x3e\r\n\x3c!--</form>--\x3e\r\n',customCss:"/*=======================================================================*/\r\n/*==========  There are two examples: for edit and add entity  ==========*/\r\n/*=======================================================================*/\r\n/*========================  Edit entity example  ========================*/\r\n/*=======================================================================*/\r\n/*\r\n.edit-entity-form .boolean-value-input {\r\n    padding-left: 5px;\r\n}\r\n\r\n.edit-entity-form .boolean-value-input .checkbox-label {\r\n    margin-bottom: 8px;\r\n    color: rgba(0,0,0,0.54);\r\n    font-size: 12px;\r\n}\r\n\r\n.relations-list .header {\r\n    padding-right: 5px;\r\n    padding-bottom: 5px;\r\n    padding-left: 5px;\r\n}\r\n\r\n.relations-list .header .cell {\r\n    padding-right: 5px;\r\n    padding-left: 5px;\r\n    font-size: 12px;\r\n    font-weight: 700;\r\n    color: rgba(0, 0, 0, .54);\r\n    white-space: nowrap;\r\n}\r\n\r\n.relations-list .mat-form-field-infix {\r\n    width: auto !important;\r\n}\r\n\r\n.relations-list .body {\r\n    padding-right: 5px;\r\n    padding-bottom: 15px;\r\n    padding-left: 5px;\r\n}\r\n\r\n.relations-list .body .row {\r\n    padding-top: 5px;\r\n}\r\n\r\n.relations-list .body .cell {\r\n    padding-right: 5px;\r\n    padding-left: 5px;\r\n}\r\n\r\n.relations-list .body .md-button {\r\n    margin: 0;\r\n}\r\n*/\r\n/*========================================================================*/\r\n/*=========================  Add entity example  =========================*/\r\n/*========================================================================*/\r\n/*\r\n.add-entity-form .boolean-value-input {\r\n    padding-left: 5px;\r\n}\r\n\r\n.add-entity-form .boolean-value-input .checkbox-label {\r\n    margin-bottom: 8px;\r\n    color: rgba(0,0,0,0.54);\r\n    font-size: 12px;\r\n}\r\n\r\n.relations-list .header {\r\n    padding-right: 5px;\r\n    padding-bottom: 5px;\r\n    padding-left: 5px;\r\n}\r\n\r\n.relations-list .header .cell {\r\n    padding-right: 5px;\r\n    padding-left: 5px;\r\n    font-size: 12px;\r\n    font-weight: 700;\r\n    color: rgba(0, 0, 0, .54);\r\n    white-space: nowrap;\r\n}\r\n\r\n.relations-list .mat-form-field-infix {\r\n    width: auto !important;\r\n}\r\n\r\n.relations-list .body {\r\n    padding-right: 5px;\r\n    padding-bottom: 15px;\r\n    padding-left: 5px;\r\n}\r\n\r\n.relations-list .body .row {\r\n    padding-top: 5px;\r\n}\r\n\r\n.relations-list .body .cell {\r\n    padding-right: 5px;\r\n    padding-left: 5px;\r\n}\r\n\r\n.relations-list .body .md-button {\r\n    margin: 0;\r\n}\r\n*/\r\n",customFunction:"/*=======================================================================*/\r\n/*=====  There are three examples: for delete, edit and add entity  =====*/\r\n/*=======================================================================*/\r\n/*=======================  Delete entity example  =======================*/\r\n/*=======================================================================*/\r\n//\r\n//let $injector = widgetContext.$scope.$injector;\r\n//let dialogs = $injector.get(widgetContext.servicesMap.get('dialogs'));\r\n//let assetService = $injector.get(widgetContext.servicesMap.get('assetService'));\r\n//let deviceService = $injector.get(widgetContext.servicesMap.get('deviceService'));\r\n//\r\n//openDeleteEntityDialog();\r\n//\r\n//function openDeleteEntityDialog() {\r\n//    let title = 'Delete ' + entityId.entityType.toLowerCase() + ' ' +\r\n//                 entityName;\r\n//    let content = 'Are you sure you want to delete the ' +\r\n//                  entityId.entityType.toLowerCase() + ' ' + entityName + '?';\r\n//    dialogs.confirm(title, content, 'Cancel', 'Delete').subscribe(\r\n//        function(result) {\r\n//            if (result) {\r\n//                deleteEntity();\r\n//            }\r\n//        }\r\n//    );\r\n//}\r\n//\r\n//function deleteEntity() {\r\n//    deleteEntityObservable(entityId).subscribe(\r\n//        function success() {\r\n//            widgetContext.updateAliases();\r\n//        },\r\n//        function fail() {\r\n//            showErrorDialog();\r\n//        }\r\n//    );\r\n//}\r\n//\r\n//function deleteEntityObservable(entityId) {\r\n//    if (entityId.entityType == \"ASSET\") {\r\n//        return assetService.deleteAsset(entityId.id);\r\n//    } else if (entityId.entityType == \"DEVICE\") {\r\n//        return deviceService.deleteDevice(entityId.id);\r\n//    }\r\n//}\r\n//\r\n//function showErrorDialog() {\r\n//    let title = 'Error';\r\n//    let content = 'An error occurred while deleting the entity. Please try again.';\r\n//    dialogs.alert(title, content, 'CLOSE').subscribe(\r\n//        function(result) {}\r\n//    );\r\n//}\r\n//\r\n/*=======================================================================*/\r\n/*========================  Edit entity example  ========================*/\r\n/*=======================================================================*/\r\n//\r\n//let $injector = widgetContext.$scope.$injector;\r\n//let customDialog = $injector.get(widgetContext.servicesMap.get('customDialog'));\r\n//let entityService = $injector.get(widgetContext.servicesMap.get('entityService'));\r\n//let assetService = $injector.get(widgetContext.servicesMap.get('assetService'));\r\n//let deviceService = $injector.get(widgetContext.servicesMap.get('deviceService'));\r\n//let attributeService = $injector.get(widgetContext.servicesMap.get('attributeService'));\r\n//let entityRelationService = $injector.get(widgetContext.servicesMap.get('entityRelationService'));\r\n//\r\n//openEditEntityDialog();\r\n//\r\n//function openEditEntityDialog() {\r\n//    customDialog.customDialog(htmlTemplate, EditEntityDialogController).subscribe();\r\n//}\r\n//\r\n//function EditEntityDialogController(instance) {\r\n//    let vm = instance;\r\n//\r\n//    vm.entityName = entityName;\r\n//    vm.entityType = entityId.entityType;\r\n//    vm.entitySearchDirection = {\r\n//        from: \"FROM\",\r\n//        to: \"TO\"\r\n//    };\r\n//    vm.attributes = {};\r\n//    vm.oldRelationsData = [];\r\n//    vm.relationsToDelete = [];\r\n//    vm.entity = {};\r\n//\r\n//    vm.editEntityFormGroup = vm.fb.group({\r\n//        entityName: ['', [vm.validators.required]],\r\n//        entityType: [null],\r\n//        entityLabel: [null],\r\n//        type: ['', [vm.validators.required]],\r\n//        attributes: vm.fb.group({\r\n//            latitude: [null],\r\n//            longitude: [null],\r\n//            address: [null],\r\n//            owner: [null],\r\n//            number: [null, [vm.validators.pattern(/^-?[0-9]+$/)]],\r\n//            booleanValue: [false]\r\n//        }),\r\n//        oldRelations: vm.fb.array([]),\r\n//        relations: vm.fb.array([])\r\n//    });\r\n//\r\n//    getEntityInfo();\r\n//\r\n//    vm.cancel = function() {\r\n//        vm.dialogRef.close(null);\r\n//    };\r\n//\r\n//    vm.relations = function() {\r\n//        return vm.editEntityFormGroup.get('relations');\r\n//    };\r\n//\r\n//    vm.oldRelations = function() {\r\n//        return vm.editEntityFormGroup.get('oldRelations');\r\n//    };\r\n//\r\n//    vm.addRelation = function() {\r\n//        vm.relations().push(vm.fb.group({\r\n//            relatedEntity: [null, [vm.validators.required]],\r\n//            relationType: [null, [vm.validators.required]],\r\n//            direction: [null, [vm.validators.required]]\r\n//        }));\r\n//    };\r\n//\r\n//    function addOldRelation() {\r\n//        vm.oldRelations().push(vm.fb.group({\r\n//            relatedEntity: [{value: null, disabled: true}, [vm.validators.required]],\r\n//            relationType: [{value: null, disabled: true}, [vm.validators.required]],\r\n//            direction: [{value: null, disabled: true}, [vm.validators.required]]\r\n//        }));\r\n//    }\r\n//\r\n//    vm.removeRelation = function(index) {\r\n//        vm.relations().removeAt(index);\r\n//        vm.relations().markAsDirty();\r\n//    };\r\n//\r\n//    vm.removeOldRelation = function(index) {\r\n//        vm.oldRelations().removeAt(index);\r\n//        vm.relationsToDelete.push(vm.oldRelationsData[index]);\r\n//        vm.oldRelations().markAsDirty();\r\n//    };\r\n//\r\n//    vm.save = function() {\r\n//        vm.editEntityFormGroup.markAsPristine();\r\n//        widgetContext.rxjs.forkJoin([\r\n//            saveAttributes(entityId),\r\n//            saveRelations(entityId),\r\n//            saveEntity()\r\n//        ]).subscribe(\r\n//            function () {\r\n//                widgetContext.updateAliases();\r\n//                vm.dialogRef.close(null);\r\n//            }\r\n//        );\r\n//    };\r\n//\r\n//    function getEntityAttributes(attributes) {\r\n//        for (var i = 0; i < attributes.length; i++) {\r\n//            vm.attributes[attributes[i].key] = attributes[i].value;\r\n//        }\r\n//    }\r\n//\r\n//    function getEntityRelations(relations) {\r\n//        let relationsFrom = relations[0];\r\n//        let relationsTo = relations[1];\r\n//        for (let i=0; i < relationsFrom.length; i++) {\r\n//            let relation = {\r\n//                direction: 'FROM',\r\n//                relationType: relationsFrom[i].type,\r\n//                relatedEntity: relationsFrom[i].to\r\n//            };\r\n//            vm.oldRelationsData.push(relation);\r\n//            addOldRelation();\r\n//        }\r\n//        for (let i=0; i < relationsTo.length; i++) {\r\n//            let relation = {\r\n//                direction: 'TO',\r\n//                relationType: relationsTo[i].type,\r\n//                relatedEntity: relationsTo[i].from\r\n//            };\r\n//            vm.oldRelationsData.push(relation);\r\n//            addOldRelation();\r\n//        }\r\n//    }\r\n//\r\n//    function getEntityInfo() {\r\n//         widgetContext.rxjs.forkJoin([\r\n//             entityRelationService.findInfoByFrom(entityId),\r\n//             entityRelationService.findInfoByTo(entityId),\r\n//             attributeService.getEntityAttributes(entityId, 'SERVER_SCOPE'),\r\n//             entityService.getEntity(entityId.entityType, entityId.id)\r\n//         ]).subscribe(\r\n//             function (data) {\r\n//                 getEntityRelations(data.slice(0,2));\r\n//                 getEntityAttributes(data[2]);\r\n//                 vm.entity = data[3];\r\n//                 vm.editEntityFormGroup.patchValue({\r\n//                     entityName: vm.entity.name,\r\n//                     entityType: vm.entityType,\r\n//                     entityLabel: vm.entity.label,\r\n//                     type: vm.entity.type,\r\n//                     attributes: vm.attributes,\r\n//                     oldRelations: vm.oldRelationsData\r\n//                 }, {emitEvent: false});\r\n//             }\r\n//         );\r\n//     }\r\n//\r\n//    function saveEntity() {\r\n//        const formValues = vm.editEntityFormGroup.value;\r\n//        if (vm.entity.label !== formValues.entityLabel){\r\n//            vm.entity.label = formValues.entityLabel;\r\n//            if (formValues.entityType == 'ASSET') {\r\n//                return assetService.saveAsset(vm.entity);\r\n//            } else if (formValues.entityType == 'DEVICE') {\r\n//                return deviceService.saveDevice(vm.entity);\r\n//            }\r\n//        }\r\n//        return widgetContext.rxjs.of([]);\r\n//    }\r\n//\r\n//    function saveAttributes(entityId) {\r\n//        let attributes = vm.editEntityFormGroup.get('attributes').value;\r\n//        let attributesArray = [];\r\n//        for (let key in attributes) {\r\n//            if (attributes[key] !== vm.attributes[key]) {\r\n//                attributesArray.push({key: key, value: attributes[key]});\r\n//            }\r\n//        }\r\n//        if (attributesArray.length > 0) {\r\n//            return attributeService.saveEntityAttributes(entityId, \"SERVER_SCOPE\", attributesArray);\r\n//        }\r\n//        return widgetContext.rxjs.of([]);\r\n//    }\r\n//\r\n//    function saveRelations(entityId) {\r\n//        let relations = vm.editEntityFormGroup.get('relations').value;\r\n//        let tasks = [];\r\n//        for(let i=0; i < relations.length; i++) {\r\n//            let relation = {\r\n//                type: relations[i].relationType,\r\n//                typeGroup: 'COMMON'\r\n//            };\r\n//            if (relations[i].direction == 'FROM') {\r\n//                relation.to = relations[i].relatedEntity;\r\n//                relation.from = entityId;\r\n//            } else {\r\n//                relation.to = entityId;\r\n//                relation.from = relations[i].relatedEntity;\r\n//            }\r\n//            tasks.push(entityRelationService.saveRelation(relation));\r\n//        }\r\n//        for (let i=0; i < vm.relationsToDelete.length; i++) {\r\n//            let relation = {\r\n//                type: vm.relationsToDelete[i].relationType\r\n//            };\r\n//            if (vm.relationsToDelete[i].direction == 'FROM') {\r\n//                relation.to = vm.relationsToDelete[i].relatedEntity;\r\n//                relation.from = entityId;\r\n//            } else {\r\n//                relation.to = entityId;\r\n//                relation.from = vm.relationsToDelete[i].relatedEntity;\r\n//            }\r\n//            tasks.push(entityRelationService.deleteRelation(relation.from, relation.type, relation.to));\r\n//        }\r\n//        if (tasks.length > 0) {\r\n//            return widgetContext.rxjs.forkJoin(tasks);\r\n//        }\r\n//        return widgetContext.rxjs.of([]);\r\n//    }\r\n//}\r\n//\r\n/*========================================================================*/\r\n/*=========================  Add entity example  =========================*/\r\n/*========================================================================*/\r\n//\r\n//let $injector = widgetContext.$scope.$injector;\r\n//let customDialog = $injector.get(widgetContext.servicesMap.get('customDialog'));\r\n//let assetService = $injector.get(widgetContext.servicesMap.get('assetService'));\r\n//let deviceService = $injector.get(widgetContext.servicesMap.get('deviceService'));\r\n//let attributeService = $injector.get(widgetContext.servicesMap.get('attributeService'));\r\n//let entityRelationService = $injector.get(widgetContext.servicesMap.get('entityRelationService'));\r\n//\r\n//openAddEntityDialog();\r\n//\r\n//function openAddEntityDialog() {\r\n//    customDialog.customDialog(htmlTemplate, AddEntityDialogController).subscribe();\r\n//}\r\n//\r\n//function AddEntityDialogController(instance) {\r\n//    let vm = instance;\r\n//\r\n//    vm.allowedEntityTypes = ['ASSET', 'DEVICE'];\r\n//    vm.entitySearchDirection = {\r\n//        from: \"FROM\",\r\n//        to: \"TO\"\r\n//    }\r\n//\r\n//    vm.addEntityFormGroup = vm.fb.group({\r\n//      entityName: ['', [vm.validators.required]],\r\n//      entityType: ['DEVICE'],\r\n//      entityLabel: [null],\r\n//      type: ['', [vm.validators.required]],\r\n//      attributes: vm.fb.group({\r\n//          latitude: [null],\r\n//          longitude: [null],\r\n//          address: [null],\r\n//          owner: [null],\r\n//          number: [null, [vm.validators.pattern(/^-?[0-9]+$/)]],\r\n//          booleanValue: [null]\r\n//      }),\r\n//      relations: vm.fb.array([])\r\n//    });\r\n//\r\n//    vm.cancel = function() {\r\n//        vm.dialogRef.close(null);\r\n//    };\r\n//\r\n//    vm.relations = function() {\r\n//        return vm.addEntityFormGroup.get('relations');\r\n//    };\r\n//\r\n//    vm.addRelation = function() {\r\n//        vm.relations().push(vm.fb.group({\r\n//          relatedEntity: [null, [vm.validators.required]],\r\n//          relationType: [null, [vm.validators.required]],\r\n//          direction: [null, [vm.validators.required]]\r\n//        }));\r\n//    };\r\n//\r\n//    vm.removeRelation = function(index) {\r\n//        vm.relations().removeAt(index);\r\n//        vm.relations().markAsDirty();\r\n//    };\r\n//\r\n//    vm.save = function() {\r\n//        vm.addEntityFormGroup.markAsPristine();\r\n//        saveEntityObservable().subscribe(\r\n//            function (entity) {\r\n//                widgetContext.rxjs.forkJoin([\r\n//                    saveAttributes(entity.id),\r\n//                    saveRelations(entity.id)\r\n//                ]).subscribe(\r\n//                    function () {\r\n//                        widgetContext.updateAliases();\r\n//                        vm.dialogRef.close(null);\r\n//                    }\r\n//                );\r\n//            }\r\n//        );\r\n//    };\r\n//\r\n//    function saveEntityObservable() {\r\n//        const formValues = vm.addEntityFormGroup.value;\r\n//        let entity = {\r\n//            name: formValues.entityName,\r\n//            type: formValues.type,\r\n//            label: formValues.entityLabel\r\n//        };\r\n//        if (formValues.entityType == 'ASSET') {\r\n//            return assetService.saveAsset(entity);\r\n//        } else if (formValues.entityType == 'DEVICE') {\r\n//            return deviceService.saveDevice(entity);\r\n//        }\r\n//    }\r\n//\r\n//    function saveAttributes(entityId) {\r\n//        let attributes = vm.addEntityFormGroup.get('attributes').value;\r\n//        let attributesArray = [];\r\n//        for (let key in attributes) {\r\n//            if(attributes[key] !== null) {\r\n//                attributesArray.push({key: key, value: attributes[key]});\r\n//            }\r\n//        }\r\n//        if (attributesArray.length > 0) {\r\n//            return attributeService.saveEntityAttributes(entityId, \"SERVER_SCOPE\", attributesArray);\r\n//        }\r\n//        return widgetContext.rxjs.of([]);\r\n//    }\r\n//\r\n//    function saveRelations(entityId) {\r\n//        let relations = vm.addEntityFormGroup.get('relations').value;\r\n//        let tasks = [];\r\n//        for(let i=0; i < relations.length; i++) {\r\n//            let relation = {\r\n//                type: relations[i].relationType,\r\n//                typeGroup: 'COMMON'\r\n//            };\r\n//            if (relations[i].direction == 'FROM') {\r\n//                relation.to = relations[i].relatedEntity;\r\n//                relation.from = entityId;\r\n//            } else {\r\n//                relation.to = entityId;\r\n//                relation.from = relations[i].relatedEntity;\r\n//            }\r\n//            tasks.push(entityRelationService.saveRelation(relation));\r\n//        }\r\n//        if (tasks.length > 0) {\r\n//            return widgetContext.rxjs.forkJoin(tasks);\r\n//        }\r\n//        return widgetContext.rxjs.of([]);\r\n//    }\r\n//}\r\n"}:{customHtml:t.customHtml,customCss:t.customCss,customFunction:t.customFunction}).customResources=t&&Object(m.n)(t.customResources)?Object(m.e)(t.customResources):[],e}var g=function(){function t(t,e){this.translate=t,this.utils=e,this.actionsSubject=new r.a([]),this.pageDataSubject=new r.a(Object(l.a)()),this.pageData$=this.pageDataSubject.asObservable()}return t.prototype.connect=function(t){return this.actionsSubject.asObservable()},t.prototype.disconnect=function(t){this.actionsSubject.complete(),this.pageDataSubject.complete()},t.prototype.setActions=function(t){this.actionsMap=t.actionsMap,this.actionSources=t.actionSources},t.prototype.loadActions=function(t,e){var n=this;void 0===e&&(e=!1),e&&(this.allActions=null);var i=new o.a;return this.fetchActions(t).pipe(Object(c.a)((function(){return Object(s.a)(Object(l.a)())}))).subscribe((function(t){n.actionsSubject.next(t.data),n.pageDataSubject.next(t),i.next(t)})),i},t.prototype.fetchActions=function(t){return this.getAllActions().pipe(Object(d.a)((function(e){return t.filterData(e)})))},t.prototype.getAllActions=function(){var t=this;if(!this.allActions){for(var e=[],n=function(n){i.actionsMap[n].forEach((function(i){e.push(t.toWidgetActionDescriptorInfo(n,i))}))},i=this,a=0,r=Object.keys(this.actionsMap);a<r.length;a++){n(r[a])}this.allActions=Object(s.a)(e).pipe(Object(p.a)(1),Object(u.a)())}return this.allActions},t.prototype.toWidgetActionDescriptorInfo=function(t,e){var n=this.actionSources[t],r=n?this.utils.customTranslation(n.name,n.name):t,o=this.translate.instant(a.j.get(e.type));return Object(i.a)({actionSourceId:t,actionSourceName:r,typeName:o},e)},t.prototype.isEmpty=function(){return this.actionsSubject.pipe(Object(d.a)((function(t){return!t.length})))},t.prototype.total=function(){return this.pageDataSubject.pipe(Object(d.a)((function(t){return t.totalElements})))},t}()},IVUU:function(t,e,n){"use strict";n.d(e,"a",(function(){return w}));var i=n("mrSG"),a=n("fXoL"),r=n("FKr1"),o=n("0IaG"),s=n("gmuX"),l=n("OiFK"),c=n("l7P3"),d=n("tyNb"),p=n("3Pt+"),u=n("sYmb"),m=n("/t3+"),f=n("XiUz"),h=n("bTqV"),g=n("NFeN"),y=n("ofXK"),b=n("kmnG"),v=n("qFsG"),x=n("bv9b");function C(t,e){1&t&&a["\u0275\u0275element"](0,"mat-progress-bar",15)}function S(t,e){if(1&t&&(a["\u0275\u0275elementStart"](0,"button",16),a["\u0275\u0275pipe"](1,"async"),a["\u0275\u0275text"](2),a["\u0275\u0275pipe"](3,"translate"),a["\u0275\u0275elementEnd"]()),2&t){var n=a["\u0275\u0275nextContext"]();a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](1,2,n.isLoading$)||n.editDetailsFormGroup.invalid||!n.editDetailsFormGroup.dirty),a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](3,4,"action.save")," ")}}var w=function(t){function e(e,n,i,a,r,o,s,l){var c=t.call(this,e,n,r)||this;return c.store=e,c.router=n,c.data=i,c.errorStateMatcher=a,c.dialogRef=r,c.fb=o,c.utils=s,c.translate=l,c.alarmDetails=c.data.alarmDetails,c.submitted=!1,c.editDetailsFormGroup=c.fb.group({alarmDetails:[c.alarmDetails]}),c.data.readonly&&c.editDetailsFormGroup.disable(),c}return Object(i.d)(e,t),e.prototype.ngOnInit=function(){},e.prototype.isErrorState=function(t,e){var n=this.errorStateMatcher.isErrorState(t,e),i=!!(t&&t.invalid&&this.submitted);return n||i},e.prototype.cancel=function(){this.dialogRef.close(null)},e.prototype.save=function(){this.submitted=!0,this.alarmDetails=this.editDetailsFormGroup.get("alarmDetails").value,this.dialogRef.close(this.alarmDetails)},e.\u0275fac=function(t){return new(t||e)(a["\u0275\u0275directiveInject"](c.Store),a["\u0275\u0275directiveInject"](d.Router),a["\u0275\u0275directiveInject"](o.MAT_DIALOG_DATA),a["\u0275\u0275directiveInject"](r.ErrorStateMatcher,4),a["\u0275\u0275directiveInject"](o.MatDialogRef),a["\u0275\u0275directiveInject"](p.FormBuilder),a["\u0275\u0275directiveInject"](l.a),a["\u0275\u0275directiveInject"](u.TranslateService))},e.\u0275cmp=a["\u0275\u0275defineComponent"]({type:e,selectors:[["tb-edit-alarm-details-dialog"]],features:[a["\u0275\u0275ProvidersFeature"]([{provide:r.ErrorStateMatcher,useExisting:e}]),a["\u0275\u0275InheritDefinitionFeature"]],decls:25,vars:17,consts:[[2,"width","800px",3,"formGroup","ngSubmit"],["color","primary"],["fxFlex",""],["mat-icon-button","","type","button",3,"click"],[1,"material-icons"],["color","warn","mode","indeterminate",4,"ngIf"],["mat-dialog-content",""],[3,"disabled"],["fxFlex","","fxLayout","column"],[1,"mat-block"],["translate",""],["matInput","","formControlName","alarmDetails","rows","5"],["mat-dialog-actions","","fxLayoutAlign","end center"],["mat-button","","color","primary","type","button","cdkFocusInitial","",3,"disabled","click"],["mat-raised-button","","color","primary","type","submit",3,"disabled",4,"ngIf"],["color","warn","mode","indeterminate"],["mat-raised-button","","color","primary","type","submit",3,"disabled"]],template:function(t,e){1&t&&(a["\u0275\u0275elementStart"](0,"form",0),a["\u0275\u0275listener"]("ngSubmit",(function(){return e.save()})),a["\u0275\u0275elementStart"](1,"mat-toolbar",1),a["\u0275\u0275elementStart"](2,"h2"),a["\u0275\u0275text"](3),a["\u0275\u0275pipe"](4,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](5,"span",2),a["\u0275\u0275elementStart"](6,"button",3),a["\u0275\u0275listener"]("click",(function(){return e.cancel()})),a["\u0275\u0275elementStart"](7,"mat-icon",4),a["\u0275\u0275text"](8,"close"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275template"](9,C,1,0,"mat-progress-bar",5),a["\u0275\u0275pipe"](10,"async"),a["\u0275\u0275elementStart"](11,"div",6),a["\u0275\u0275elementStart"](12,"fieldset",7),a["\u0275\u0275pipe"](13,"async"),a["\u0275\u0275elementStart"](14,"div",8),a["\u0275\u0275elementStart"](15,"mat-form-field",9),a["\u0275\u0275elementStart"](16,"mat-label",10),a["\u0275\u0275text"](17,"device-profile.alarm-details"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](18,"textarea",11),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](19,"div",12),a["\u0275\u0275elementStart"](20,"button",13),a["\u0275\u0275listener"]("click",(function(){return e.cancel()})),a["\u0275\u0275pipe"](21,"async"),a["\u0275\u0275text"](22),a["\u0275\u0275pipe"](23,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275template"](24,S,4,6,"button",14),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()),2&t&&(a["\u0275\u0275property"]("formGroup",e.editDetailsFormGroup),a["\u0275\u0275advance"](3),a["\u0275\u0275textInterpolate"](a["\u0275\u0275pipeBind1"](4,7,"device-profile.alarm-rule-details")),a["\u0275\u0275advance"](6),a["\u0275\u0275property"]("ngIf",a["\u0275\u0275pipeBind1"](10,9,e.isLoading$)),a["\u0275\u0275advance"](3),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](13,11,e.isLoading$)),a["\u0275\u0275advance"](8),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](21,13,e.isLoading$)),a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](23,15,"action.cancel")," "),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("ngIf",!e.data.readonly))},directives:[p["\u0275angular_packages_forms_forms_y"],p.NgControlStatusGroup,p.FormGroupDirective,m.MatToolbar,f.b,h.MatButton,g.MatIcon,y.NgIf,o.MatDialogContent,f.f,b.MatFormField,b.MatLabel,u.TranslateDirective,v.MatInput,p.DefaultValueAccessor,p.NgControlStatus,p.FormControlName,o.MatDialogActions,f.e,x.MatProgressBar],pipes:[u.TranslatePipe,y.AsyncPipe],encapsulation:2}),e}(s.a);!function(){a["\u0275setClassMetadata"](w,[{type:a.Component,args:[{selector:"tb-edit-alarm-details-dialog",templateUrl:"./edit-alarm-details-dialog.component.html",providers:[{provide:r.ErrorStateMatcher,useExisting:w}],styleUrls:[]}]}],(function(){return[{type:c.Store},{type:d.Router},{type:void 0,decorators:[{type:a.Inject,args:[o.MAT_DIALOG_DATA]}]},{type:r.ErrorStateMatcher,decorators:[{type:a.SkipSelf}]},{type:o.MatDialogRef},{type:p.FormBuilder},{type:l.a},{type:u.TranslateService}]}),null)}()},IfZf:function(t,e,n){"use strict";n.d(e,"a",(function(){return h}));var i=n("fXoL"),a=n("3Pt+"),r=n("xw5a"),o=n("XiUz"),s=n("kmnG"),l=n("d3UM"),c=n("ofXK"),d=n("bSwM"),p=n("cXYG"),u=n("FKr1"),m=n("sYmb");function f(t,e){if(1&t&&(i["\u0275\u0275elementStart"](0,"mat-option",7),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&t){var n=e.$implicit,a=i["\u0275\u0275nextContext"]();i["\u0275\u0275property"]("value",n),i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,2,a.stringOperationTranslations.get(a.stringOperationEnum[n]))," ")}}var h=function(){function t(t){this.fb=t,this.allowUserDynamicSource=!0,this.onlyUserDynamicSource=!1,this.valueTypeEnum=r.f,this.stringOperations=Object.keys(r.i),this.stringOperationEnum=r.i,this.stringOperationTranslations=r.I,this.propagateChange=null}return t.prototype.ngOnInit=function(){var t=this;this.stringFilterPredicateFormGroup=this.fb.group({operation:[r.i.STARTS_WITH,[a.Validators.required]],value:[null,[a.Validators.required]],ignoreCase:[!1]}),this.stringFilterPredicateFormGroup.valueChanges.subscribe((function(){t.updateModel()}))},t.prototype.registerOnChange=function(t){this.propagateChange=t},t.prototype.registerOnTouched=function(t){},t.prototype.setDisabledState=function(t){this.disabled=t,this.disabled?this.stringFilterPredicateFormGroup.disable({emitEvent:!1}):this.stringFilterPredicateFormGroup.enable({emitEvent:!1})},t.prototype.writeValue=function(t){this.stringFilterPredicateFormGroup.get("operation").patchValue(t.operation,{emitEvent:!1}),this.stringFilterPredicateFormGroup.get("value").patchValue(t.value,{emitEvent:!1}),this.stringFilterPredicateFormGroup.get("ignoreCase").patchValue(t.ignoreCase,{emitEvent:!1})},t.prototype.updateModel=function(){var t=null;this.stringFilterPredicateFormGroup.valid&&((t=this.stringFilterPredicateFormGroup.getRawValue()).type=r.g.STRING),this.propagateChange(t)},t.\u0275fac=function(e){return new(e||t)(i["\u0275\u0275directiveInject"](a.FormBuilder))},t.\u0275cmp=i["\u0275\u0275defineComponent"]({type:t,selectors:[["tb-string-filter-predicate"]],inputs:{disabled:"disabled",allowUserDynamicSource:"allowUserDynamicSource",onlyUserDynamicSource:"onlyUserDynamicSource"},features:[i["\u0275\u0275ProvidersFeature"]([{provide:a.NG_VALUE_ACCESSOR,useExisting:Object(i.forwardRef)((function(){return t})),multi:!0}])],decls:9,vars:8,consts:[["fxFlex","","fxLayout","row","fxLayoutAlign","start start","fxLayoutGap","8px",3,"formGroup"],["fxFlex","30","fxLayout","row","fxLayoutAlign","start center","fxLayoutGap","8px"],["floatLabel","always","hideRequiredMarker","","fxFlex","",1,"mat-block"],["required","","formControlName","operation",3,"placeholder"],[3,"value",4,"ngFor","ngForOf"],["fxLayout","row","fxLayoutAlign","center","formControlName","ignoreCase",2,"min-width","70px"],["fxFlex","70","formControlName","value",3,"allowUserDynamicSource","onlyUserDynamicSource","valueType"],[3,"value"]],template:function(t,e){1&t&&(i["\u0275\u0275elementStart"](0,"div",0),i["\u0275\u0275elementStart"](1,"div",1),i["\u0275\u0275elementStart"](2,"mat-form-field",2),i["\u0275\u0275element"](3,"mat-label"),i["\u0275\u0275elementStart"](4,"mat-select",3),i["\u0275\u0275pipe"](5,"translate"),i["\u0275\u0275template"](6,f,3,4,"mat-option",4),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](7,"mat-checkbox",5),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](8,"tb-filter-predicate-value",6),i["\u0275\u0275elementEnd"]()),2&t&&(i["\u0275\u0275property"]("formGroup",e.stringFilterPredicateFormGroup),i["\u0275\u0275advance"](4),i["\u0275\u0275propertyInterpolate"]("placeholder",i["\u0275\u0275pipeBind1"](5,6,"filter.operation.operation")),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngForOf",e.stringOperations),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("allowUserDynamicSource",e.allowUserDynamicSource)("onlyUserDynamicSource",e.onlyUserDynamicSource)("valueType",e.valueTypeEnum.STRING))},directives:[o.b,o.f,o.e,o.g,a.NgControlStatusGroup,a.FormGroupDirective,s.MatFormField,s.MatLabel,l.MatSelect,a.RequiredValidator,a.NgControlStatus,a.FormControlName,c.NgForOf,d.MatCheckbox,p.a,u.MatOption],pipes:[m.TranslatePipe],styles:["[_nghost-%COMP%]   .tb-hint[_ngcontent-%COMP%], [_nghost-%COMP%]     mat-form-field .mat-form-field-wrapper{padding-bottom:0}[_nghost-%COMP%]     mat-form-field .mat-form-field-wrapper .mat-form-field-infix{border-top-width:.2em;width:auto;min-width:auto}[_nghost-%COMP%]     mat-form-field .mat-form-field-wrapper .mat-form-field-underline{bottom:0}"]}),t}();!function(){i["\u0275setClassMetadata"](h,[{type:i.Component,args:[{selector:"tb-string-filter-predicate",templateUrl:"./string-filter-predicate.component.html",styleUrls:["./filter-predicate.scss"],providers:[{provide:a.NG_VALUE_ACCESSOR,useExisting:Object(i.forwardRef)((function(){return h})),multi:!0}]}]}],(function(){return[{type:a.FormBuilder}]}),{disabled:[{type:i.Input}],allowUserDynamicSource:[{type:i.Input}],onlyUserDynamicSource:[{type:i.Input}]})}()},IktG:function(t,e,n){"use strict";function i(t){return!(!t||!t.assignedCustomers)&&t.assignedCustomers.filter((function(t){return t.public})).length>0}function a(t){return t&&t.assignedCustomers&&t.assignedCustomers.length>0?t.assignedCustomers.filter((function(t){return!t.public})).map((function(t){return t.title})).join(", "):""}function r(t,e){return!!(e&&t&&t.assignedCustomers)&&t.assignedCustomers.filter((function(t){return t.public&&e===t.customerId.id})).length>0}n.d(e,"c",(function(){return i})),n.d(e,"a",(function(){return a})),n.d(e,"b",(function(){return r}))},JA3I:function(t,e,n){"use strict";n.d(e,"a",(function(){return _}));var i=n("fXoL"),a=n("3Pt+"),r=n("LRne"),o=n("vkgz"),s=n("lJxs"),l=n("5+tZ"),c=n("w1tV"),d=n("21Fy"),p=n("8LU1"),u=n("T4sd"),m=n("/1cH"),f=n("FtGj"),h=n("FKr1"),g=n("l7P3"),y=n("sYmb"),b=n("kmnG"),v=n("ofXK"),x=n("qFsG"),C=n("bTqV"),S=n("NFeN"),w=n("d5eY"),E=["entityAliasAutocomplete"],I=["autocomplete"],O=["entityAliasInput"];function T(t,e){1&t&&i["\u0275\u0275element"](0,"mat-label")}function M(t,e){if(1&t){var n=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"button",9),i["\u0275\u0275listener"]("click",(function(){return i["\u0275\u0275restoreView"](n),i["\u0275\u0275nextContext"]().clear()})),i["\u0275\u0275elementStart"](1,"mat-icon",10),i["\u0275\u0275text"](2,"close"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()}}function F(t,e){if(1&t&&(i["\u0275\u0275elementStart"](0,"mat-option",11),i["\u0275\u0275element"](1,"span",12),i["\u0275\u0275pipe"](2,"highlight"),i["\u0275\u0275elementEnd"]()),2&t){var n=e.$implicit,a=i["\u0275\u0275nextContext"]();i["\u0275\u0275property"]("value",n),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("innerHTML",i["\u0275\u0275pipeBind2"](2,2,n.alias,a.searchText),i["\u0275\u0275sanitizeHtml"])}}function P(t,e){1&t&&(i["\u0275\u0275elementStart"](0,"div"),i["\u0275\u0275elementStart"](1,"span",18),i["\u0275\u0275text"](2,"entity.no-aliases-found"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]())}var D=function(t){return{alias:t}};function k(t,e){if(1&t&&(i["\u0275\u0275elementStart"](0,"span"),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"async"),i["\u0275\u0275elementEnd"]()),2&t){var n=i["\u0275\u0275nextContext"](2);i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,1,n.translate.get("entity.no-alias-matching",i["\u0275\u0275pureFunction1"](3,D,n.truncate.transform(n.searchText,!0,6,"..."))))," ")}}function j(t,e){if(1&t){var n=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"mat-option",13),i["\u0275\u0275elementStart"](1,"div",14),i["\u0275\u0275listener"]("click",(function(t){return i["\u0275\u0275restoreView"](n),t.stopPropagation()})),i["\u0275\u0275template"](2,P,3,0,"div",15),i["\u0275\u0275template"](3,k,3,5,"ng-template",null,16,i["\u0275\u0275templateRefExtractor"]),i["\u0275\u0275elementStart"](5,"span"),i["\u0275\u0275elementStart"](6,"a",17),i["\u0275\u0275listener"]("click",(function(t){i["\u0275\u0275restoreView"](n);var e=i["\u0275\u0275nextContext"]();return e.createEntityAlias(t,e.searchText)})),i["\u0275\u0275text"](7,"entity.create-new-alias"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()}if(2&t){var a=i["\u0275\u0275reference"](4),r=i["\u0275\u0275nextContext"]();i["\u0275\u0275property"]("value",null),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngIf",!r.textIsNotEmpty(r.searchText))("ngIfElse",a)}}function A(t,e){1&t&&(i["\u0275\u0275elementStart"](0,"mat-error"),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&t&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,1,"entity.alias-required")," "))}var _=function(){function t(t,e,n,i,a,r){this.store=t,this.errorStateMatcher=e,this.entityService=n,this.translate=i,this.truncate=a,this.fb=r,this.entityAliasList=[],this.searchText="",this.dirty=!1,this.creatingEntityAlias=!1,this.propagateChange=function(t){},this.selectEntityAliasFormGroup=this.fb.group({entityAlias:[null]})}return Object.defineProperty(t.prototype,"tbRequired",{get:function(){return this.requiredValue},set:function(t){this.requiredValue=Object(p.coerceBooleanProperty)(t)},enumerable:!1,configurable:!0}),t.prototype.registerOnChange=function(t){this.propagateChange=t},t.prototype.registerOnTouched=function(t){},t.prototype.ngOnInit=function(){for(var t=this,e=this.aliasController.getEntityAliases(),n=0,i=Object.keys(e);n<i.length;n++){var a=i[n];this.allowedEntityTypes&&this.allowedEntityTypes.length&&!this.entityService.filterAliasByEntityTypes(e[a],this.allowedEntityTypes)||this.entityAliasList.push(e[a])}this.filteredEntityAliases=this.selectEntityAliasFormGroup.get("entityAlias").valueChanges.pipe(Object(o.a)((function(e){var n;n="string"!=typeof e&&e?e:null,t.updateView(n),null===e&&t.clear()})),Object(s.a)((function(t){return t?"string"==typeof t?t:t.alias:""})),Object(l.b)((function(e){return t.fetchEntityAliases(e)})),Object(c.a)())},t.prototype.isErrorState=function(t,e){var n=this.errorStateMatcher.isErrorState(t,e),i=this.tbRequired&&!this.modelValue;return n||i},t.prototype.ngAfterViewInit=function(){},t.prototype.setDisabledState=function(t){this.disabled=t,this.disabled?this.selectEntityAliasFormGroup.disable({emitEvent:!1}):this.selectEntityAliasFormGroup.enable({emitEvent:!1})},t.prototype.writeValue=function(t){this.searchText="";var e=null;if(null!=t){var n=this.aliasController.getEntityAliases();n[t]&&(e=n[t])}null!=e?(this.modelValue=e.id,this.selectEntityAliasFormGroup.get("entityAlias").patchValue(e,{emitEvent:!1})):(this.modelValue=null,this.selectEntityAliasFormGroup.get("entityAlias").patchValue("",{emitEvent:!1})),this.dirty=!0},t.prototype.onFocus=function(){this.dirty&&(this.selectEntityAliasFormGroup.get("entityAlias").updateValueAndValidity({onlySelf:!0,emitEvent:!0}),this.dirty=!1)},t.prototype.updateView=function(t){var e=t?t.id:null;this.modelValue!==e&&(this.modelValue=e,this.propagateChange(this.modelValue))},t.prototype.displayEntityAliasFn=function(t){return t?t.alias:void 0},t.prototype.fetchEntityAliases=function(t){this.searchText=t;var e=this.entityAliasList;return t&&t.length&&(e=this.entityAliasList.filter((function(e){return e.alias.toLowerCase().includes(t.toLowerCase())}))),Object(r.a)(e)},t.prototype.clear=function(t){var e=this;void 0===t&&(t=""),this.entityAliasInput.nativeElement.value=t,this.selectEntityAliasFormGroup.get("entityAlias").patchValue(t,{emitEvent:!0}),setTimeout((function(){e.entityAliasInput.nativeElement.blur(),e.entityAliasInput.nativeElement.focus()}),0)},t.prototype.textIsNotEmpty=function(t){return!!(t&&null!=t&&t.length>0)},t.prototype.entityAliasEnter=function(t){t.keyCode===f.ENTER&&(t.preventDefault(),this.modelValue||this.createEntityAlias(t,this.searchText))},t.prototype.createEntityAlias=function(t,e){var n=this;t.preventDefault(),this.creatingEntityAlias=!0,this.callbacks&&this.callbacks.createEntityAlias&&this.callbacks.createEntityAlias(e,this.allowedEntityTypes).subscribe((function(t){t?(n.entityAliasList.push(t),n.modelValue=t.id,n.selectEntityAliasFormGroup.get("entityAlias").patchValue(t,{emitEvent:!0}),n.propagateChange(n.modelValue)):setTimeout((function(){n.entityAliasInput.nativeElement.blur(),n.entityAliasInput.nativeElement.focus()}),0)}))},t.\u0275fac=function(e){return new(e||t)(i["\u0275\u0275directiveInject"](g.Store),i["\u0275\u0275directiveInject"](h.ErrorStateMatcher,4),i["\u0275\u0275directiveInject"](d.a),i["\u0275\u0275directiveInject"](y.TranslateService),i["\u0275\u0275directiveInject"](u.a),i["\u0275\u0275directiveInject"](a.FormBuilder))},t.\u0275cmp=i["\u0275\u0275defineComponent"]({type:t,selectors:[["tb-entity-alias-select"]],viewQuery:function(t,e){var n;(1&t&&(i["\u0275\u0275viewQuery"](E,!0),i["\u0275\u0275viewQuery"](I,!0,m.MatAutocompleteTrigger),i["\u0275\u0275staticViewQuery"](O,!0)),2&t)&&(i["\u0275\u0275queryRefresh"](n=i["\u0275\u0275loadQuery"]())&&(e.entityAliasAutocomplete=n.first),i["\u0275\u0275queryRefresh"](n=i["\u0275\u0275loadQuery"]())&&(e.autoCompleteTrigger=n.first),i["\u0275\u0275queryRefresh"](n=i["\u0275\u0275loadQuery"]())&&(e.entityAliasInput=n.first))},inputs:{aliasController:"aliasController",allowedEntityTypes:"allowedEntityTypes",callbacks:"callbacks",showLabel:"showLabel",tbRequired:"tbRequired",disabled:"disabled"},features:[i["\u0275\u0275ProvidersFeature"]([{provide:a.NG_VALUE_ACCESSOR,useExisting:Object(i.forwardRef)((function(){return t})),multi:!0},{provide:h.ErrorStateMatcher,useExisting:t}])],decls:13,vars:18,consts:[[1,"mat-block",3,"floatLabel","hideRequiredMarker","formGroup"],[4,"ngIf"],["matInput","","type","text","formControlName","entityAlias",3,"placeholder","required","matAutocomplete","focusin","keydown","keypress"],["entityAliasInput",""],["type","button","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click",4,"ngIf"],[1,"tb-autocomplete",3,"displayWith"],["entityAliasAutocomplete","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],["class","tb-not-found",3,"value",4,"ngIf"],["type","button","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click"],[1,"material-icons"],[3,"value"],[3,"innerHTML"],[1,"tb-not-found",3,"value"],[1,"tb-not-found-content",3,"click"],[4,"ngIf","ngIfElse"],["searchNotEmpty",""],["translate","",3,"click"],["translate",""]],template:function(t,e){if(1&t&&(i["\u0275\u0275elementStart"](0,"mat-form-field",0),i["\u0275\u0275template"](1,T,1,0,"mat-label",1),i["\u0275\u0275elementStart"](2,"input",2,3),i["\u0275\u0275listener"]("focusin",(function(){return e.onFocus()}))("keydown",(function(t){return e.entityAliasEnter(t)}))("keypress",(function(t){return e.entityAliasEnter(t)})),i["\u0275\u0275pipe"](4,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](5,M,3,0,"button",4),i["\u0275\u0275elementStart"](6,"mat-autocomplete",5,6),i["\u0275\u0275template"](8,F,3,5,"mat-option",7),i["\u0275\u0275pipe"](9,"async"),i["\u0275\u0275template"](10,j,8,3,"mat-option",8),i["\u0275\u0275pipe"](11,"async"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](12,A,3,3,"mat-error",1),i["\u0275\u0275elementEnd"]()),2&t){var n,a=i["\u0275\u0275reference"](7);i["\u0275\u0275property"]("floatLabel",e.showLabel?"auto":"always")("hideRequiredMarker",!e.showLabel)("formGroup",e.selectEntityAliasFormGroup),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",!e.showLabel),i["\u0275\u0275advance"](1),i["\u0275\u0275propertyInterpolate"]("placeholder",i["\u0275\u0275pipeBind1"](4,12,"entity.entity-alias")),i["\u0275\u0275property"]("required",e.tbRequired)("matAutocomplete",a),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("ngIf",e.selectEntityAliasFormGroup.get("entityAlias").value&&!e.disabled),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("displayWith",e.displayEntityAliasFn),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngForOf",i["\u0275\u0275pipeBind1"](9,14,e.filteredEntityAliases)),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngIf",!(null!=(n=i["\u0275\u0275pipeBind1"](11,16,e.filteredEntityAliases))&&n.length)),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngIf",!e.modelValue&&e.tbRequired)}},directives:[b.MatFormField,a.NgControlStatusGroup,a.FormGroupDirective,v.NgIf,x.MatInput,a.DefaultValueAccessor,m.MatAutocompleteTrigger,a.NgControlStatus,a.FormControlName,a.RequiredValidator,m.MatAutocomplete,v.NgForOf,b.MatLabel,C.MatButton,b.MatSuffix,S.MatIcon,h.MatOption,y.TranslateDirective,b.MatError],pipes:[y.TranslatePipe,v.AsyncPipe,w.a],styles:["[_nghost-%COMP%]     .mat-form-field-infix{border-top:none}"]}),t}();!function(){i["\u0275setClassMetadata"](_,[{type:i.Component,args:[{selector:"tb-entity-alias-select",templateUrl:"./entity-alias-select.component.html",styleUrls:["./entity-alias-select.component.scss"],providers:[{provide:a.NG_VALUE_ACCESSOR,useExisting:Object(i.forwardRef)((function(){return _})),multi:!0},{provide:h.ErrorStateMatcher,useExisting:_}]}]}],(function(){return[{type:g.Store},{type:h.ErrorStateMatcher,decorators:[{type:i.SkipSelf}]},{type:d.a},{type:y.TranslateService},{type:u.a},{type:a.FormBuilder}]}),{aliasController:[{type:i.Input}],allowedEntityTypes:[{type:i.Input}],callbacks:[{type:i.Input}],showLabel:[{type:i.Input}],entityAliasAutocomplete:[{type:i.ViewChild,args:["entityAliasAutocomplete"]}],autoCompleteTrigger:[{type:i.ViewChild,args:["autocomplete",{read:m.MatAutocompleteTrigger}]}],tbRequired:[{type:i.Input}],disabled:[{type:i.Input}],entityAliasInput:[{type:i.ViewChild,args:["entityAliasInput",{static:!0}]}]})}()},JTB5:function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var i=n("mrSG"),a=n("RxGS"),r=n("fXoL"),o=n("l7P3"),s=function(t){function e(e){var n=t.call(this,e)||this;return n.store=e,n}return Object(i.d)(e,t),Object.defineProperty(e.prototype,"entitiesTableConfig",{get:function(){return this.entitiesTableConfigValue},set:function(t){this.setEntitiesTableConfig(t)},enumerable:!1,configurable:!0}),e.prototype.ngOnInit=function(){},e.prototype.setEntitiesTableConfig=function(t){this.entitiesTableConfigValue=t},e.\u0275fac=function(t){return new(t||e)(r["\u0275\u0275directiveInject"](o.Store))},e.\u0275dir=r["\u0275\u0275defineDirective"]({type:e,inputs:{entitiesTableConfig:"entitiesTableConfig"},features:[r["\u0275\u0275InheritDefinitionFeature"]]}),e}(a.a);!function(){r["\u0275setClassMetadata"](s,[{type:r.Directive}],(function(){return[{type:o.Store}]}),{entitiesTableConfig:[{type:r.Input}]})}()},JoHb:function(t,e,n){"use strict";n.d(e,"a",(function(){return q}));var i=n("fXoL"),a=n("3Pt+"),r=n("8LU1"),o=n("//Q6"),s=n("l7P3"),l=n("XiUz"),c=n("kmnG"),d=n("sYmb"),p=n("qFsG"),u=n("ofXK");function m(t,e){1&t&&(i["\u0275\u0275elementStart"](0,"mat-error"),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&t&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,1,"tenant-profile.maximum-devices-required")," "))}function f(t,e){1&t&&(i["\u0275\u0275elementStart"](0,"mat-error"),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&t&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,1,"tenant-profile.maximum-devices-range")," "))}function h(t,e){1&t&&(i["\u0275\u0275elementStart"](0,"mat-error"),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&t&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,1,"tenant-profile.maximum-assets-required")," "))}function g(t,e){1&t&&(i["\u0275\u0275elementStart"](0,"mat-error"),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&t&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,1,"tenant-profile.maximum-assets-range")," "))}function y(t,e){1&t&&(i["\u0275\u0275elementStart"](0,"mat-error"),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&t&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,1,"tenant-profile.maximum-customers-required")," "))}function b(t,e){1&t&&(i["\u0275\u0275elementStart"](0,"mat-error"),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&t&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,1,"tenant-profile.maximum-customers-range")," "))}function v(t,e){1&t&&(i["\u0275\u0275elementStart"](0,"mat-error"),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&t&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,1,"tenant-profile.maximum-users-required")," "))}function x(t,e){1&t&&(i["\u0275\u0275elementStart"](0,"mat-error"),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&t&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,1,"tenant-profile.maximum-users-range")," "))}function C(t,e){1&t&&(i["\u0275\u0275elementStart"](0,"mat-error"),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&t&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,1,"tenant-profile.maximum-dashboards-required")," "))}function S(t,e){1&t&&(i["\u0275\u0275elementStart"](0,"mat-error"),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&t&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,1,"tenant-profile.maximum-dashboards-range")," "))}function w(t,e){1&t&&(i["\u0275\u0275elementStart"](0,"mat-error"),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&t&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,1,"tenant-profile.maximum-rule-chains-required")," "))}function E(t,e){1&t&&(i["\u0275\u0275elementStart"](0,"mat-error"),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&t&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,1,"tenant-profile.maximum-rule-chains-range")," "))}function I(t,e){1&t&&(i["\u0275\u0275elementStart"](0,"mat-error"),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&t&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,1,"tenant-profile.max-transport-messages-range")," "))}function O(t,e){1&t&&(i["\u0275\u0275elementStart"](0,"mat-error"),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&t&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,1,"tenant-profile.max-transport-messages-required")," "))}function T(t,e){1&t&&(i["\u0275\u0275elementStart"](0,"mat-error"),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&t&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,1,"tenant-profile.max-transport-data-points-required")," "))}function M(t,e){1&t&&(i["\u0275\u0275elementStart"](0,"mat-error"),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&t&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,1,"tenant-profile.max-transport-data-points-range")," "))}function F(t,e){1&t&&(i["\u0275\u0275elementStart"](0,"mat-error"),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&t&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,1,"tenant-profile.max-r-e-executions-required")," "))}function P(t,e){1&t&&(i["\u0275\u0275elementStart"](0,"mat-error"),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&t&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,1,"tenant-profile.max-r-e-executions-range")," "))}function D(t,e){1&t&&(i["\u0275\u0275elementStart"](0,"mat-error"),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&t&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,1,"tenant-profile.max-j-s-executions-required")," "))}function k(t,e){1&t&&(i["\u0275\u0275elementStart"](0,"mat-error"),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&t&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,1,"tenant-profile.max-j-s-executions-range")," "))}function j(t,e){1&t&&(i["\u0275\u0275elementStart"](0,"mat-error"),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&t&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,1,"tenant-profile.max-d-p-storage-days-required")," "))}function A(t,e){1&t&&(i["\u0275\u0275elementStart"](0,"mat-error"),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&t&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,1,"tenant-profile.max-d-p-storage-days-range")," "))}function _(t,e){1&t&&(i["\u0275\u0275elementStart"](0,"mat-error"),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&t&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,1,"tenant-profile.default-storage-ttl-days-required")," "))}function L(t,e){1&t&&(i["\u0275\u0275elementStart"](0,"mat-error"),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&t&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,1,"tenant-profile.default-storage-ttl-days-range")," "))}function V(t,e){1&t&&(i["\u0275\u0275elementStart"](0,"mat-error"),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&t&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,1,"tenant-profile.max-rule-node-executions-per-message-required")," "))}function R(t,e){1&t&&(i["\u0275\u0275elementStart"](0,"mat-error"),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&t&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,1,"tenant-profile.max-rule-node-executions-per-message-range")," "))}function N(t,e){1&t&&(i["\u0275\u0275elementStart"](0,"mat-error"),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&t&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,1,"tenant-profile.max-emails-required")," "))}function G(t,e){1&t&&(i["\u0275\u0275elementStart"](0,"mat-error"),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&t&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,1,"tenant-profile.max-emails-range")," "))}function B(t,e){1&t&&(i["\u0275\u0275elementStart"](0,"mat-error"),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&t&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,1,"tenant-profile.max-sms-required")," "))}function U(t,e){1&t&&(i["\u0275\u0275elementStart"](0,"mat-error"),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&t&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,1,"tenant-profile.max-sms-range")," "))}var q=function(){function t(t,e){var n=this;this.store=t,this.fb=e,this.propagateChange=function(t){},this.defaultTenantProfileConfigurationFormGroup=this.fb.group({maxDevices:[null,[a.Validators.required,a.Validators.min(0)]],maxAssets:[null,[a.Validators.required,a.Validators.min(0)]],maxCustomers:[null,[a.Validators.required,a.Validators.min(0)]],maxUsers:[null,[a.Validators.required,a.Validators.min(0)]],maxDashboards:[null,[a.Validators.required,a.Validators.min(0)]],maxRuleChains:[null,[a.Validators.required,a.Validators.min(0)]],transportTenantMsgRateLimit:[null,[]],transportTenantTelemetryMsgRateLimit:[null,[]],transportTenantTelemetryDataPointsRateLimit:[null,[]],transportDeviceMsgRateLimit:[null,[]],transportDeviceTelemetryMsgRateLimit:[null,[]],transportDeviceTelemetryDataPointsRateLimit:[null,[]],maxTransportMessages:[null,[a.Validators.required,a.Validators.min(0)]],maxTransportDataPoints:[null,[a.Validators.required,a.Validators.min(0)]],maxREExecutions:[null,[a.Validators.required,a.Validators.min(0)]],maxJSExecutions:[null,[a.Validators.required,a.Validators.min(0)]],maxDPStorageDays:[null,[a.Validators.required,a.Validators.min(0)]],maxRuleNodeExecutionsPerMessage:[null,[a.Validators.required,a.Validators.min(0)]],maxEmails:[null,[a.Validators.required,a.Validators.min(0)]],maxSms:[null,[a.Validators.required,a.Validators.min(0)]],defaultStorageTtlDays:[null,[a.Validators.required,a.Validators.min(0)]]}),this.defaultTenantProfileConfigurationFormGroup.valueChanges.subscribe((function(){n.updateModel()}))}return Object.defineProperty(t.prototype,"required",{get:function(){return this.requiredValue},set:function(t){this.requiredValue=Object(r.coerceBooleanProperty)(t)},enumerable:!1,configurable:!0}),t.prototype.registerOnChange=function(t){this.propagateChange=t},t.prototype.registerOnTouched=function(t){},t.prototype.ngOnInit=function(){},t.prototype.setDisabledState=function(t){this.disabled=t,this.disabled?this.defaultTenantProfileConfigurationFormGroup.disable({emitEvent:!1}):this.defaultTenantProfileConfigurationFormGroup.enable({emitEvent:!1})},t.prototype.writeValue=function(t){Object(o.o)(t)&&this.defaultTenantProfileConfigurationFormGroup.patchValue(t,{emitEvent:!1})},t.prototype.updateModel=function(){var t=null;this.defaultTenantProfileConfigurationFormGroup.valid&&(t=this.defaultTenantProfileConfigurationFormGroup.getRawValue()),this.propagateChange(t)},t.\u0275fac=function(e){return new(e||t)(i["\u0275\u0275directiveInject"](s.Store),i["\u0275\u0275directiveInject"](a.FormBuilder))},t.\u0275cmp=i["\u0275\u0275defineComponent"]({type:t,selectors:[["tb-default-tenant-profile-configuration"]],inputs:{required:"required",disabled:"disabled"},features:[i["\u0275\u0275ProvidersFeature"]([{provide:a.NG_VALUE_ACCESSOR,useExisting:Object(i.forwardRef)((function(){return t})),multi:!0}])],decls:115,vars:31,consts:[["fxLayout","column",3,"formGroup"],[1,"mat-block"],["translate",""],["matInput","","required","","min","0","step","1","formControlName","maxDevices","type","number"],[4,"ngIf"],["matInput","","required","","min","0","step","1","formControlName","maxAssets","type","number"],["matInput","","required","","min","0","step","1","formControlName","maxCustomers","type","number"],["matInput","","required","","min","0","step","1","formControlName","maxUsers","type","number"],["matInput","","required","","min","0","step","1","formControlName","maxDashboards","type","number"],["matInput","","required","","min","0","step","1","formControlName","maxRuleChains","type","number"],["matInput","","required","","min","0","step","1","formControlName","maxTransportMessages","type","number"],["matInput","","required","","min","0","step","1","formControlName","maxTransportDataPoints","type","number"],["matInput","","required","","min","0","step","1","formControlName","maxREExecutions","type","number"],["matInput","","required","","min","0","step","1","formControlName","maxJSExecutions","type","number"],["matInput","","required","","min","0","step","1","formControlName","maxDPStorageDays","type","number"],["matInput","","required","","min","0","step","1","formControlName","defaultStorageTtlDays","type","number"],["matInput","","required","","min","0","step","1","formControlName","maxRuleNodeExecutionsPerMessage","type","number"],["matInput","","required","","min","0","step","1","formControlName","maxEmails","type","number"],["matInput","","required","","min","0","step","1","formControlName","maxSms","type","number"],["matInput","","formControlName","transportTenantMsgRateLimit"],["matInput","","formControlName","transportTenantTelemetryMsgRateLimit"],["matInput","","formControlName","transportTenantTelemetryDataPointsRateLimit"],["matInput","","formControlName","transportDeviceMsgRateLimit"],["matInput","","formControlName","transportDeviceTelemetryMsgRateLimit"],["matInput","","formControlName","transportDeviceTelemetryDataPointsRateLimit"]],template:function(t,e){1&t&&(i["\u0275\u0275elementStart"](0,"section",0),i["\u0275\u0275elementStart"](1,"mat-form-field",1),i["\u0275\u0275elementStart"](2,"mat-label",2),i["\u0275\u0275text"](3,"tenant-profile.maximum-devices"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](4,"input",3),i["\u0275\u0275template"](5,m,3,3,"mat-error",4),i["\u0275\u0275template"](6,f,3,3,"mat-error",4),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](7,"mat-form-field",1),i["\u0275\u0275elementStart"](8,"mat-label",2),i["\u0275\u0275text"](9,"tenant-profile.maximum-assets"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](10,"input",5),i["\u0275\u0275template"](11,h,3,3,"mat-error",4),i["\u0275\u0275template"](12,g,3,3,"mat-error",4),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](13,"mat-form-field",1),i["\u0275\u0275elementStart"](14,"mat-label",2),i["\u0275\u0275text"](15,"tenant-profile.maximum-customers"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](16,"input",6),i["\u0275\u0275template"](17,y,3,3,"mat-error",4),i["\u0275\u0275template"](18,b,3,3,"mat-error",4),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](19,"mat-form-field",1),i["\u0275\u0275elementStart"](20,"mat-label",2),i["\u0275\u0275text"](21,"tenant-profile.maximum-users"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](22,"input",7),i["\u0275\u0275template"](23,v,3,3,"mat-error",4),i["\u0275\u0275template"](24,x,3,3,"mat-error",4),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](25,"mat-form-field",1),i["\u0275\u0275elementStart"](26,"mat-label",2),i["\u0275\u0275text"](27,"tenant-profile.maximum-dashboards"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](28,"input",8),i["\u0275\u0275template"](29,C,3,3,"mat-error",4),i["\u0275\u0275template"](30,S,3,3,"mat-error",4),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](31,"mat-form-field",1),i["\u0275\u0275elementStart"](32,"mat-label",2),i["\u0275\u0275text"](33,"tenant-profile.maximum-rule-chains"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](34,"input",9),i["\u0275\u0275template"](35,w,3,3,"mat-error",4),i["\u0275\u0275template"](36,E,3,3,"mat-error",4),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](37,"mat-form-field",1),i["\u0275\u0275elementStart"](38,"mat-label",2),i["\u0275\u0275text"](39,"tenant-profile.max-transport-messages"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](40,"input",10),i["\u0275\u0275template"](41,I,3,3,"mat-error",4),i["\u0275\u0275template"](42,O,3,3,"mat-error",4),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](43,"mat-form-field",1),i["\u0275\u0275elementStart"](44,"mat-label",2),i["\u0275\u0275text"](45,"tenant-profile.max-transport-data-points"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](46,"input",11),i["\u0275\u0275template"](47,T,3,3,"mat-error",4),i["\u0275\u0275template"](48,M,3,3,"mat-error",4),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](49,"mat-form-field",1),i["\u0275\u0275elementStart"](50,"mat-label",2),i["\u0275\u0275text"](51,"tenant-profile.max-r-e-executions"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](52,"input",12),i["\u0275\u0275template"](53,F,3,3,"mat-error",4),i["\u0275\u0275template"](54,P,3,3,"mat-error",4),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](55,"mat-form-field",1),i["\u0275\u0275elementStart"](56,"mat-label",2),i["\u0275\u0275text"](57,"tenant-profile.max-j-s-executions"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](58,"input",13),i["\u0275\u0275template"](59,D,3,3,"mat-error",4),i["\u0275\u0275template"](60,k,3,3,"mat-error",4),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](61,"mat-form-field",1),i["\u0275\u0275elementStart"](62,"mat-label",2),i["\u0275\u0275text"](63,"tenant-profile.max-d-p-storage-days"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](64,"input",14),i["\u0275\u0275template"](65,j,3,3,"mat-error",4),i["\u0275\u0275template"](66,A,3,3,"mat-error",4),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](67,"mat-form-field",1),i["\u0275\u0275elementStart"](68,"mat-label",2),i["\u0275\u0275text"](69,"tenant-profile.default-storage-ttl-days"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](70,"input",15),i["\u0275\u0275template"](71,_,3,3,"mat-error",4),i["\u0275\u0275template"](72,L,3,3,"mat-error",4),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](73,"mat-form-field",1),i["\u0275\u0275elementStart"](74,"mat-label",2),i["\u0275\u0275text"](75,"tenant-profile.max-rule-node-executions-per-message"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](76,"input",16),i["\u0275\u0275template"](77,V,3,3,"mat-error",4),i["\u0275\u0275template"](78,R,3,3,"mat-error",4),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](79,"mat-form-field",1),i["\u0275\u0275elementStart"](80,"mat-label",2),i["\u0275\u0275text"](81,"tenant-profile.max-emails"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](82,"input",17),i["\u0275\u0275template"](83,N,3,3,"mat-error",4),i["\u0275\u0275template"](84,G,3,3,"mat-error",4),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](85,"mat-form-field",1),i["\u0275\u0275elementStart"](86,"mat-label",2),i["\u0275\u0275text"](87,"tenant-profile.max-sms"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](88,"input",18),i["\u0275\u0275template"](89,B,3,3,"mat-error",4),i["\u0275\u0275template"](90,U,3,3,"mat-error",4),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](91,"mat-form-field",1),i["\u0275\u0275elementStart"](92,"mat-label",2),i["\u0275\u0275text"](93,"tenant-profile.transport-tenant-msg-rate-limit"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](94,"input",19),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](95,"mat-form-field",1),i["\u0275\u0275elementStart"](96,"mat-label",2),i["\u0275\u0275text"](97,"tenant-profile.transport-tenant-telemetry-msg-rate-limit"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](98,"input",20),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](99,"mat-form-field",1),i["\u0275\u0275elementStart"](100,"mat-label",2),i["\u0275\u0275text"](101,"tenant-profile.transport-tenant-telemetry-data-points-rate-limit"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](102,"input",21),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](103,"mat-form-field",1),i["\u0275\u0275elementStart"](104,"mat-label",2),i["\u0275\u0275text"](105,"tenant-profile.transport-device-msg-rate-limit"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](106,"input",22),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](107,"mat-form-field",1),i["\u0275\u0275elementStart"](108,"mat-label",2),i["\u0275\u0275text"](109,"tenant-profile.transport-device-telemetry-msg-rate-limit"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](110,"input",23),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](111,"mat-form-field",1),i["\u0275\u0275elementStart"](112,"mat-label",2),i["\u0275\u0275text"](113,"tenant-profile.transport-device-telemetry-data-points-rate-limit"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](114,"input",24),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()),2&t&&(i["\u0275\u0275property"]("formGroup",e.defaultTenantProfileConfigurationFormGroup),i["\u0275\u0275advance"](5),i["\u0275\u0275property"]("ngIf",e.defaultTenantProfileConfigurationFormGroup.get("maxDevices").hasError("required")),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",e.defaultTenantProfileConfigurationFormGroup.get("maxDevices").hasError("min")),i["\u0275\u0275advance"](5),i["\u0275\u0275property"]("ngIf",e.defaultTenantProfileConfigurationFormGroup.get("maxAssets").hasError("required")),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",e.defaultTenantProfileConfigurationFormGroup.get("maxAssets").hasError("min")),i["\u0275\u0275advance"](5),i["\u0275\u0275property"]("ngIf",e.defaultTenantProfileConfigurationFormGroup.get("maxCustomers").hasError("required")),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",e.defaultTenantProfileConfigurationFormGroup.get("maxCustomers").hasError("min")),i["\u0275\u0275advance"](5),i["\u0275\u0275property"]("ngIf",e.defaultTenantProfileConfigurationFormGroup.get("maxUsers").hasError("required")),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",e.defaultTenantProfileConfigurationFormGroup.get("maxUsers").hasError("min")),i["\u0275\u0275advance"](5),i["\u0275\u0275property"]("ngIf",e.defaultTenantProfileConfigurationFormGroup.get("maxDashboards").hasError("required")),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",e.defaultTenantProfileConfigurationFormGroup.get("maxDashboards").hasError("min")),i["\u0275\u0275advance"](5),i["\u0275\u0275property"]("ngIf",e.defaultTenantProfileConfigurationFormGroup.get("maxRuleChains").hasError("required")),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",e.defaultTenantProfileConfigurationFormGroup.get("maxRuleChains").hasError("min")),i["\u0275\u0275advance"](5),i["\u0275\u0275property"]("ngIf",e.defaultTenantProfileConfigurationFormGroup.get("maxTransportMessages").hasError("required")),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",e.defaultTenantProfileConfigurationFormGroup.get("maxTransportMessages").hasError("min")),i["\u0275\u0275advance"](5),i["\u0275\u0275property"]("ngIf",e.defaultTenantProfileConfigurationFormGroup.get("maxTransportDataPoints").hasError("required")),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",e.defaultTenantProfileConfigurationFormGroup.get("maxTransportDataPoints").hasError("min")),i["\u0275\u0275advance"](5),i["\u0275\u0275property"]("ngIf",e.defaultTenantProfileConfigurationFormGroup.get("maxREExecutions").hasError("required")),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",e.defaultTenantProfileConfigurationFormGroup.get("maxREExecutions").hasError("min")),i["\u0275\u0275advance"](5),i["\u0275\u0275property"]("ngIf",e.defaultTenantProfileConfigurationFormGroup.get("maxJSExecutions").hasError("required")),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",e.defaultTenantProfileConfigurationFormGroup.get("maxJSExecutions").hasError("min")),i["\u0275\u0275advance"](5),i["\u0275\u0275property"]("ngIf",e.defaultTenantProfileConfigurationFormGroup.get("maxDPStorageDays").hasError("required")),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",e.defaultTenantProfileConfigurationFormGroup.get("maxDPStorageDays").hasError("min")),i["\u0275\u0275advance"](5),i["\u0275\u0275property"]("ngIf",e.defaultTenantProfileConfigurationFormGroup.get("defaultStorageTtlDays").hasError("required")),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",e.defaultTenantProfileConfigurationFormGroup.get("defaultStorageTtlDays").hasError("min")),i["\u0275\u0275advance"](5),i["\u0275\u0275property"]("ngIf",e.defaultTenantProfileConfigurationFormGroup.get("maxRuleNodeExecutionsPerMessage").hasError("required")),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",e.defaultTenantProfileConfigurationFormGroup.get("maxRuleNodeExecutionsPerMessage").hasError("min")),i["\u0275\u0275advance"](5),i["\u0275\u0275property"]("ngIf",e.defaultTenantProfileConfigurationFormGroup.get("maxEmails").hasError("required")),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",e.defaultTenantProfileConfigurationFormGroup.get("maxEmails").hasError("min")),i["\u0275\u0275advance"](5),i["\u0275\u0275property"]("ngIf",e.defaultTenantProfileConfigurationFormGroup.get("maxSms").hasError("required")),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",e.defaultTenantProfileConfigurationFormGroup.get("maxSms").hasError("min")))},directives:[l.f,a.NgControlStatusGroup,a.FormGroupDirective,c.MatFormField,c.MatLabel,d.TranslateDirective,p.MatInput,a.DefaultValueAccessor,a.NumberValueAccessor,a.RequiredValidator,a.NgControlStatus,a.FormControlName,u.NgIf,c.MatError],pipes:[d.TranslatePipe],encapsulation:2}),t}();!function(){i["\u0275setClassMetadata"](q,[{type:i.Component,args:[{selector:"tb-default-tenant-profile-configuration",templateUrl:"./default-tenant-profile-configuration.component.html",styleUrls:[],providers:[{provide:a.NG_VALUE_ACCESSOR,useExisting:Object(i.forwardRef)((function(){return q})),multi:!0}]}]}],(function(){return[{type:s.Store},{type:a.FormBuilder}]}),{required:[{type:i.Input}],disabled:[{type:i.Input}]})}()},KJJU:function(t,e,n){"use strict";var i;n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return a})),function(t){t.DISPLAY_ACTIVATION_LINK="DISPLAY_ACTIVATION_LINK",t.SEND_ACTIVATION_MAIL="SEND_ACTIVATION_MAIL"}(i||(i={}));var a=new Map([[i.DISPLAY_ACTIVATION_LINK,"user.display-activation-link"],[i.SEND_ACTIVATION_MAIL,"user.send-activation-mail"]])},"LBt+":function(t,e,n){"use strict";n.d(e,"a",(function(){return O}));var i=n("mrSG"),a=n("fXoL"),r=n("FKr1"),o=n("0IaG"),s=n("3Pt+"),l=n("gmuX"),c=n("4j5O"),d=n("l7P3"),p=n("tyNb"),u=n("sYmb"),m=n("/t3+"),f=n("XiUz"),h=n("bTqV"),g=n("NFeN"),y=n("ofXK"),b=n("kmnG"),v=n("qFsG"),x=n("bSwM"),C=n("bv9b");function S(t,e){1&t&&a["\u0275\u0275element"](0,"mat-progress-bar",17)}function w(t,e){1&t&&(a["\u0275\u0275elementStart"](0,"mat-error"),a["\u0275\u0275text"](1),a["\u0275\u0275pipe"](2,"translate"),a["\u0275\u0275elementEnd"]()),2&t&&(a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](2,1,"dashboard.state-name-required")," "))}function E(t,e){1&t&&(a["\u0275\u0275elementStart"](0,"mat-error"),a["\u0275\u0275text"](1),a["\u0275\u0275pipe"](2,"translate"),a["\u0275\u0275elementEnd"]()),2&t&&(a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](2,1,"dashboard.state-id-required")," "))}function I(t,e){1&t&&(a["\u0275\u0275elementStart"](0,"mat-error"),a["\u0275\u0275text"](1),a["\u0275\u0275pipe"](2,"translate"),a["\u0275\u0275elementEnd"]()),2&t&&(a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](2,1,"dashboard.state-id-exists")," "))}var O=function(t){function e(e,n,a,r,o,l,c,d){var p=t.call(this,e,n,o)||this;return p.store=e,p.router=n,p.data=a,p.errorStateMatcher=r,p.dialogRef=o,p.fb=l,p.translate=c,p.dashboardUtils=d,p.submitted=!1,p.states=p.data.states,p.isAdd=p.data.isAdd,p.isAdd?(p.state=Object(i.a)({id:""},p.dashboardUtils.createDefaultState("",!1)),p.prevStateId=""):(p.state=p.data.state,p.prevStateId=p.state.id),p.stateFormGroup=p.fb.group({name:[p.state.name,[s.Validators.required]],id:[p.state.id,[s.Validators.required,p.validateDuplicateStateId()]],root:[p.state.root,[]]}),p.stateFormGroup.get("name").valueChanges.subscribe((function(t){p.checkStateName(t)})),p.stateFormGroup.get("id").valueChanges.subscribe((function(t){p.stateIdTouched=!0})),p}return Object(i.d)(e,t),e.prototype.checkStateName=function(t){t&&!this.stateIdTouched&&this.isAdd&&this.stateFormGroup.get("id").setValue(t.toLowerCase().replace(/\W/g,"_"),{emitEvent:!1})},e.prototype.validateDuplicateStateId=function(){var t=this;return function(e){var n=e.value;if(n&&(t.states[n]&&n!==t.prevStateId))return{stateExists:!0};return null}},e.prototype.ngOnInit=function(){},e.prototype.isErrorState=function(t,e){var n=this.errorStateMatcher.isErrorState(t,e),i=!!(t&&t.invalid&&this.submitted);return n||i},e.prototype.cancel=function(){this.dialogRef.close(null)},e.prototype.save=function(){this.submitted=!0,this.state=Object(i.a)(Object(i.a)({},this.state),this.stateFormGroup.value),this.state.id=this.state.id.trim(),this.dialogRef.close(this.state)},e.\u0275fac=function(t){return new(t||e)(a["\u0275\u0275directiveInject"](d.Store),a["\u0275\u0275directiveInject"](p.Router),a["\u0275\u0275directiveInject"](o.MAT_DIALOG_DATA),a["\u0275\u0275directiveInject"](r.ErrorStateMatcher,4),a["\u0275\u0275directiveInject"](o.MatDialogRef),a["\u0275\u0275directiveInject"](s.FormBuilder),a["\u0275\u0275directiveInject"](u.TranslateService),a["\u0275\u0275directiveInject"](c.a))},e.\u0275cmp=a["\u0275\u0275defineComponent"]({type:e,selectors:[["tb-dashboard-state-dialog"]],features:[a["\u0275\u0275ProvidersFeature"]([{provide:r.ErrorStateMatcher,useExisting:e}]),a["\u0275\u0275InheritDefinitionFeature"]],decls:36,vars:26,consts:[[2,"min-width","480px",3,"formGroup","ngSubmit"],["color","primary"],["translate",""],["fxFlex",""],["mat-button","","mat-icon-button","","type","button",3,"click"],[1,"material-icons"],["color","warn","mode","indeterminate",4,"ngIf"],["mat-dialog-content",""],["fxLayout","column",3,"disabled"],[1,"mat-block"],["required","","matInput","","formControlName","name"],[4,"ngIf"],["required","","matInput","","formControlName","id"],["formControlName","root"],["mat-dialog-actions","","fxLayoutAlign","end center"],["mat-button","","color","primary","type","button","cdkFocusInitial","",3,"disabled","click"],["mat-raised-button","","color","primary","type","submit",3,"disabled"],["color","warn","mode","indeterminate"]],template:function(t,e){1&t&&(a["\u0275\u0275elementStart"](0,"form",0),a["\u0275\u0275listener"]("ngSubmit",(function(){return e.save()})),a["\u0275\u0275elementStart"](1,"mat-toolbar",1),a["\u0275\u0275elementStart"](2,"h2",2),a["\u0275\u0275text"](3),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](4,"span",3),a["\u0275\u0275elementStart"](5,"button",4),a["\u0275\u0275listener"]("click",(function(){return e.cancel()})),a["\u0275\u0275elementStart"](6,"mat-icon",5),a["\u0275\u0275text"](7,"close"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275template"](8,S,1,0,"mat-progress-bar",6),a["\u0275\u0275pipe"](9,"async"),a["\u0275\u0275elementStart"](10,"div",7),a["\u0275\u0275elementStart"](11,"fieldset",8),a["\u0275\u0275pipe"](12,"async"),a["\u0275\u0275elementStart"](13,"mat-form-field",9),a["\u0275\u0275elementStart"](14,"mat-label",2),a["\u0275\u0275text"](15,"dashboard.state-name"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](16,"input",10),a["\u0275\u0275template"](17,w,3,3,"mat-error",11),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](18,"mat-form-field",9),a["\u0275\u0275elementStart"](19,"mat-label",2),a["\u0275\u0275text"](20,"dashboard.state-id"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](21,"input",12),a["\u0275\u0275template"](22,E,3,3,"mat-error",11),a["\u0275\u0275template"](23,I,3,3,"mat-error",11),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](24,"mat-checkbox",13),a["\u0275\u0275text"](25),a["\u0275\u0275pipe"](26,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](27,"div",14),a["\u0275\u0275elementStart"](28,"button",15),a["\u0275\u0275listener"]("click",(function(){return e.cancel()})),a["\u0275\u0275pipe"](29,"async"),a["\u0275\u0275text"](30),a["\u0275\u0275pipe"](31,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](32,"button",16),a["\u0275\u0275pipe"](33,"async"),a["\u0275\u0275text"](34),a["\u0275\u0275pipe"](35,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()),2&t&&(a["\u0275\u0275property"]("formGroup",e.stateFormGroup),a["\u0275\u0275advance"](3),a["\u0275\u0275textInterpolate"](e.isAdd?"dashboard.add-state":"dashboard.edit-state"),a["\u0275\u0275advance"](5),a["\u0275\u0275property"]("ngIf",a["\u0275\u0275pipeBind1"](9,12,e.isLoading$)),a["\u0275\u0275advance"](3),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](12,14,e.isLoading$)),a["\u0275\u0275advance"](6),a["\u0275\u0275property"]("ngIf",e.stateFormGroup.get("name").hasError("required")),a["\u0275\u0275advance"](5),a["\u0275\u0275property"]("ngIf",e.stateFormGroup.get("id").hasError("required")),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",e.stateFormGroup.get("id").hasError("stateExists")),a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](26,16,"dashboard.is-root-state")," "),a["\u0275\u0275advance"](3),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](29,18,e.isLoading$)),a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](31,20,"action.cancel")," "),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](33,22,e.isLoading$)||e.stateFormGroup.invalid||!e.stateFormGroup.dirty),a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](35,24,e.isAdd?"action.add":"action.save")," "))},directives:[s["\u0275angular_packages_forms_forms_y"],s.NgControlStatusGroup,s.FormGroupDirective,m.MatToolbar,u.TranslateDirective,f.b,h.MatButton,g.MatIcon,y.NgIf,o.MatDialogContent,f.f,b.MatFormField,b.MatLabel,v.MatInput,s.DefaultValueAccessor,s.RequiredValidator,s.NgControlStatus,s.FormControlName,x.MatCheckbox,o.MatDialogActions,f.e,C.MatProgressBar,b.MatError],pipes:[y.AsyncPipe,u.TranslatePipe],encapsulation:2}),e}(l.a);!function(){a["\u0275setClassMetadata"](O,[{type:a.Component,args:[{selector:"tb-dashboard-state-dialog",templateUrl:"./dashboard-state-dialog.component.html",providers:[{provide:r.ErrorStateMatcher,useExisting:O}],styleUrls:[]}]}],(function(){return[{type:d.Store},{type:p.Router},{type:void 0,decorators:[{type:a.Inject,args:[o.MAT_DIALOG_DATA]}]},{type:r.ErrorStateMatcher,decorators:[{type:a.SkipSelf}]},{type:o.MatDialogRef},{type:s.FormBuilder},{type:u.TranslateService},{type:c.a}]}),null)}()},Lm6k:function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return o})),n.d(e,"c",(function(){return R}));var i='<a href="https://github.com/thingsboard/thingsboard/blob/13e6b10b7ab830e64d31b99614a9d95a1a25928a/ui-ngx/src/app/shared/models/id/entity-id.ts#L20">EntityId</a>',a='<a href="https://github.com/thingsboard/thingsboard/blob/13e6b10b7ab830e64d31b99614a9d95a1a25928a/ui-ngx/src/app/shared/models/base-data.ts#L22">Base data</a>',r='<a href="https://github.com/thingsboard/thingsboard/blob/13e6b10b7ab830e64d31b99614a9d95a1a25928a/ui-ngx/src/app/shared/models/telemetry/telemetry.models.ts#L37">Attribute scope</a>',o='<a href="https://github.com/thingsboard/thingsboard/blob/13e6b10b7ab830e64d31b99614a9d95a1a25928a/ui-ngx/src/app/shared/models/entity-type.models.ts#L36">EntityType</a>',s='<a href="https://github.com/thingsboard/thingsboard/blob/13e6b10b7ab830e64d31b99614a9d95a1a25928a/ui-ngx/src/app/shared/models/page/page-data.ts#L17">PageData</a>',l='<a href="https://github.com/thingsboard/thingsboard/blob/13e6b10b7ab830e64d31b99614a9d95a1a25928a/ui-ngx/src/app/shared/models/device.models.ts#L33">DeviceInfo</a>',c='<a href="https://github.com/thingsboard/thingsboard/blob/13e6b10b7ab830e64d31b99614a9d95a1a25928a/ui-ngx/src/app/shared/models/asset.models.ts#L32">AssetInfo</a>',d='<a href = "https://github.com/thingsboard/thingsboard/blob/13e6b10b7ab830e64d31b99614a9d95a1a25928a/ui-ngx/src/app/shared/models/entity-view.models.ts#L47">EntityViewInfo</a>',p='<a href="https://github.com/thingsboard/thingsboard/blob/13e6b10b7ab830e64d31b99614a9d95a1a25928a/ui-ngx/src/app/shared/models/relation.models.ts#L69">EntityRelationsQuery</a>',u='<a href="https://github.com/thingsboard/thingsboard/blob/13e6b10b7ab830e64d31b99614a9d95a1a25928a/ui-ngx/src/app/shared/models/relation.models.ts#L87">EntityRelationInfo</a>',m='<a href="https://github.com/thingsboard/thingsboard/blob/13e6b10b7ab830e64d31b99614a9d95a1a25928a/ui-ngx/src/app/shared/models/dashboard.models.ts#L25">DashboardInfo</a>',f='<a href="https://github.com/thingsboard/thingsboard/blob/13e6b10b7ab830e64d31b99614a9d95a1a25928a/ui-ngx/src/app/shared/models/device.models.ts#L24">Device</a>',h='<a href="https://github.com/thingsboard/thingsboard/blob/13e6b10b7ab830e64d31b99614a9d95a1a25928a/ui-ngx/src/app/shared/models/asset.models.ts#L23">Asset</a>',g='<a href="https://github.com/thingsboard/thingsboard/blob/13e6b10b7ab830e64d31b99614a9d95a1a25928a/ui-ngx/src/app/shared/models/entity-view.models.ts#L35">entityView</a>',y='<a href="https://github.com/thingsboard/thingsboard/blob/13e6b10b7ab830e64d31b99614a9d95a1a25928a/ui-ngx/src/app/shared/models/relation.models.ts#L79">Entity relation</a>',b='<a href="https://github.com/thingsboard/thingsboard/blob/13e6b10b7ab830e64d31b99614a9d95a1a25928a/ui-ngx/src/app/shared/models/dashboard.models.ts#L102">Dashboard</a>',v='<a href="https://github.com/thingsboard/thingsboard/blob/13e6b10b7ab830e64d31b99614a9d95a1a25928a/ui-ngx/src/app/shared/models/customer.model.ts#L21">Customer</a>',x='<a href="https://github.com/thingsboard/thingsboard/blob/13e6b10b7ab830e64d31b99614a9d95a1a25928a/ui-ngx/src/app/shared/models/telemetry/telemetry.models.ts#L76">Attribute Data</a>',C='<a href="https://github.com/thingsboard/thingsboard/blob/13e6b10b7ab830e64d31b99614a9d95a1a25928a/ui-ngx/src/app/shared/models/user.model.ts#L23">User</a>',S='<a href="https://github.com/thingsboard/thingsboard/blob/13e6b10b7ab830e64d31b99614a9d95a1a25928a/ui-ngx/src/app/shared/models/device.models.ts#L50">DeviceCredentials</a>',w='<a href="https://github.com/thingsboard/thingsboard/blob/master/ui-ngx/src/app/shared/models/query/query.models.ts#L487">Entity filter</a>',E='<a href="https://github.com/thingsboard/thingsboard/blob/master/ui-ngx/src/app/shared/models/entity.models.ts#L20">Entity info</a>',I='<a href="https://github.com/thingsboard/thingsboard/blob/master/ui-ngx/src/app/shared/models/entity-type.models.ts#L51">Alias Entity Type</a>',O='<a href="https://github.com/thingsboard/thingsboard/blob/master/ui-ngx/src/app/shared/models/entity-type.models.ts#L51">Alias filter type</a>',T='<a href="https://github.com/thingsboard/thingsboard/blob/master/ui-ngx/src/app/shared/models/alias.models.ts#L150">Entity alias</a>',M='<a href="https://github.com/thingsboard/thingsboard/blob/master/ui-ngx/src/app/shared/models/widget.models.ts#L257">Datasource</a>',F='<a href="https://github.com/thingsboard/thingsboard/blob/master/ui-ngx/src/app/core/api/widget-api.models.ts#L129">State params</a>',P='<a href="https://github.com/thingsboard/thingsboard/blob/master/ui-ngx/src/app/shared/models/entity.models.ts#L28">Import entity data</a>',D={name:"pageLink",type:'<a href="https://github.com/thingsboard/thingsboard/blob/13e6b10b7ab830e64d31b99614a9d95a1a25928a/ui-ngx/src/app/shared/models/page/page-link.ts#L68">PageLink</a>',description:"Page link object used to perform paginated request."},k={name:"config",type:'<a href="https://github.com/thingsboard/thingsboard/blob/13e6b10b7ab830e64d31b99614a9d95a1a25928a/ui-ngx/src/app/core/http/http-utils.ts#L21">RequestConfig</a>',description:"HTTP request configuration.",optional:!0};function j(t){return{type:"Observable&lt;"+t+"&gt;",description:"An <code>Observable</code> of <code>"+t+"</code> object."}}function A(t){return{type:"Observable&lt;"+t+"&gt;",description:"An <code>Observable</code> of <code>"+t+"</code> variable."}}function _(t){return{type:"Observable&lt;Array&lt;"+t+"&gt;&gt;",description:"An <code>Observable</code> of array of <code>"+t+"</code> objects."}}function L(){return{type:"Observable&lt;Array&lt;"+a+"&lt;"+i+"&gt;&gt;&gt;",description:"An <code>Observable</code> of array of <code>"+a+"</code> objects."}}function V(t){return{type:"Observable&lt;"+s+"&lt;"+t+"&gt;&gt;",description:"An <code>Observable</code> of page result as a <code>"+s+"</code> holding array of <code>"+t+"</code> objects."}}var R={deviceService:{description:'Device Service API<br>See <a href="https://github.com/thingsboard/thingsboard/blob/13e6b10b7ab830e64d31b99614a9d95a1a25928a/ui-ngx/src/app/core/http/device.service.ts#L37">DeviceService</a> for API reference.',meta:"service",type:'<a href="https://github.com/thingsboard/thingsboard/blob/13e6b10b7ab830e64d31b99614a9d95a1a25928a/ui-ngx/src/app/core/http/device.service.ts#L37">DeviceService</a>',children:{getTenantDeviceInfos:{description:"Get tenant devices",meta:"function",args:[D,{name:"type",type:"string",optional:!0,description:"Device type"},k],return:V(l)},getCustomerDeviceInfos:{description:"Get customer devices",meta:"function",args:[{name:"customerId",type:"string",description:"Id of the customer"},D,{name:"type",type:"string",optional:!0,description:"Device type"},k],return:V(l)},getDevice:{description:"Get device by id",meta:"function",args:[{name:"deviceId",type:"string",description:"Id of the device"},k],return:j(f)},getDevices:{description:"Get devices by ids",meta:"function",args:[{name:"deviceIds",type:"Array&lt;string&gt;",description:"List of device ids"},k],return:_(f)},getDeviceInfo:{description:"Get device info by id",meta:"function",args:[{name:"deviceId",type:"string",description:"Id of the device"},k],return:j(l)},saveDevice:{description:"Save device",meta:"function",args:[{name:"device",type:f,description:"Device object to save"},k],return:j(f)},deleteDevice:{description:"Delete device by id",meta:"function",args:[{name:"deviceId",type:"string",description:"Id of the device"},k],return:{type:"Observable&lt;void&gt;",description:"An <code>Observable</code>."}},getDeviceTypes:{description:"Get all available devices types",meta:"function",args:[k],return:_('<a href="https://github.com/thingsboard/thingsboard/blob/13e6b10b7ab830e64d31b99614a9d95a1a25928a/ui-ngx/src/app/shared/models/entity-type.models.ts#L295">EntitySubtype</a>')},getDeviceCredentials:{description:"Get device credentials by device id",meta:"function",args:[{name:"deviceId",type:"string",description:"Id of the device"},{name:"sync",type:"boolean",description:"Whether to execute HTTP request synchronously (false by default)",optional:!0},k],return:j(S)},saveDeviceCredentials:{description:"Save device credentials",meta:"function",args:[{name:"deviceCredentials",type:S,description:"Device credentials object to save"},k],return:j(S)},makeDevicePublic:{description:"Make device public (available from public dashboard)",meta:"function",args:[{name:"deviceId",type:"string",description:"Id of the device"},k],return:j(f)},assignDeviceToCustomer:{description:"Assign device to specific customer",meta:"function",args:[{name:"customerId",type:"string",description:"Id of the customer"},{name:"deviceId",type:"string",description:"Id of the device"},k],return:j(f)},unassignDeviceFromCustomer:{description:"Unassign device from any customer",meta:"function",args:[{name:"deviceId",type:"string",description:"Id of the device"},k],return:{type:"Observable&lt;void&gt;",description:"An <code>Observable</code>."}},sendOneWayRpcCommand:{description:"Send one way (without response) RPC command to the device.",meta:"function",args:[{name:"deviceId",type:"string",description:"Id of the device"},{name:"requestBody",type:"object",description:"Request body to be sent to device"},k],return:{type:"Observable&lt;any&gt;",description:"A command execution <code>Observable</code>."}},sendTwoWayRpcCommand:{description:"Sends two way (with response) RPC command to the device.",meta:"function",args:[{name:"deviceId",type:"string",description:"Id of the device"},{name:"requestBody",type:"object",description:"Request body to be sent to device"},k],return:{type:"Observable&lt;any&gt;",description:"A command execution <code>Observable</code> of response body."}},findByQuery:{description:"Find devices by search query",meta:"function",args:[{name:"query",type:'<a href="https://github.com/thingsboard/thingsboard/blob/13e6b10b7ab830e64d31b99614a9d95a1a25928a/ui-ngx/src/app/shared/models/device.models.ts#L57">DeviceSearchQuery</a>',description:"Device search query object"},k],return:_(f)},findByName:{description:"Find device by name",meta:"function",args:[{name:"deviceName",type:"string",description:"Search device name"},k],return:j(f)},claimDevice:{description:"Send claim device request",meta:"function",args:[{name:"deviceName",type:"string",description:"Claiming device name"},k],return:j('<a href="https://github.com/thingsboard/thingsboard/blob/13e6b10b7ab830e64d31b99614a9d95a1a25928a/ui-ngx/src/app/shared/models/device.models.ts#L71">ClaimResult</a>')},unclaimDevice:{description:"Send un-claim device request",meta:"function",args:[{name:"deviceName",type:"string",description:"Device name to un-claim"},k],return:{type:"Observable&lt;void&gt;",description:"An <code>Observable</code>."}}}},assetService:{description:'Asset Service API<br>See <a href="https://github.com/thingsboard/thingsboard/blob/13e6b10b7ab830e64d31b99614a9d95a1a25928a/ui-ngx/src/app/core/http/asset.service.ts#L29">AssetService</a> for API reference.',meta:"service",type:'<a href="https://github.com/thingsboard/thingsboard/blob/13e6b10b7ab830e64d31b99614a9d95a1a25928a/ui-ngx/src/app/core/http/asset.service.ts#L29">AssetService</a>',children:{getTenantAssetInfos:{description:"Get tenant assets",meta:"function",args:[D,{name:"type",type:"string",optional:!0,description:"Asset type"},k],return:V(c)},getCustomerAssetInfos:{description:"Get customer assets",meta:"function",args:[{name:"customerId",type:"string",description:"Id of the customer"},D,{name:"type",type:"string",optional:!0,description:"Asset type"},k],return:V(c)},getAsset:{description:"Get asset by id",meta:"function",args:[{name:"assetId",type:"string",description:"Id of the asset"},k],return:j(h)},getAssets:{description:"Get assets by ids",meta:"function",args:[{name:"assetIds",type:"Array&lt;string&gt;",description:"Ids of the assets"},k],return:_(h)},getAssetInfo:{description:"Get asset info by id",meta:"function",args:[{name:"assetId",type:"string",description:"Id of the assets"},k],return:j(c)},saveAsset:{description:"Save asset",meta:"function",args:[{name:"asset",type:h,description:"Asset object to save"},k],return:j(h)},deleteAsset:{description:"Delete asset by id",meta:"function",args:[{name:"assetId",type:"string",description:"Id of the asset"},k],return:{type:"Observable&lt;void&gt;",description:"An <code>Observable</code>."}},getAssetTypes:{description:"Get all available assets types",meta:"function",args:[k],return:_('<a href="https://github.com/thingsboard/thingsboard/blob/13e6b10b7ab830e64d31b99614a9d95a1a25928a/ui-ngx/src/app/shared/models/entity-type.models.ts#L295">EntitySubtype</a>')},makeAssetPublic:{description:"Make asset public (available from public dashboard)",meta:"function",args:[{name:"assetId",type:"string",description:"Id of the asset"},k],return:j(h)},assignAssetToCustomer:{description:"Assign asset to specific customer",meta:"function",args:[{name:"customerId",type:"string",description:"Id of the customer"},{name:"assetId",type:"string",description:"Id of the asset"},k],return:j(h)},unassignAssetFromCustomer:{description:"Unassign asset from any customer",meta:"function",args:[{name:"assetId",type:"string",description:"Id of the asset"},k],return:{type:"Observable&lt;void&gt;",description:"An <code>Observable</code>."}},findByQuery:{description:"Find assets by search query",meta:"function",args:[{name:"query",type:'<a href="https://github.com/thingsboard/thingsboard/blob/13e6b10b7ab830e64d31b99614a9d95a1a25928a/ui-ngx/src/app/shared/models/asset.models.ts#L37">AssetSearchQuery</a>',description:"Asset search query object"},k],return:_(h)},findByName:{description:"Find asset by name",meta:"function",args:[{name:"assetName",type:"string",description:"Search asset name"},k],return:j(h)}}},entityViewService:{description:'EntityView Service API<br>See <a href="https://github.com/thingsboard/thingsboard/blob/13e6b10b7ab830e64d31b99614a9d95a1a25928a/ui-ngx/src/app/core/http/entity-view.service.ts#L29">EntityViewService</a> for API reference.',meta:"service",type:'<a href="https://github.com/thingsboard/thingsboard/blob/13e6b10b7ab830e64d31b99614a9d95a1a25928a/ui-ngx/src/app/core/http/entity-view.service.ts#L29">EntityViewService</a>',children:{getTenantEntityViewInfos:{description:"Get tenant entity view infos",meta:"function",args:[D,{name:"type",type:"string",optional:!0,description:"Entity view type"},k],return:V(d)},getCustomerEntityViewInfos:{description:"Get customer entities view infos by id",meta:"function",args:[{name:"customerId",type:"string",description:"Id of the customer"},D,{name:"type",type:"string",optional:!0,description:"Entity view type"},k],return:V(d)},getEntityView:{description:"Get entity view by id",meta:"function",args:[{name:"entityViewId",type:"string",description:"Id of the entity view"},k],return:j(g)},getEntityViewInfo:{description:"Get entity view info by id",meta:"function",args:[{name:"entityViewId",type:"string",description:"Id of the entity view"},k],return:j(d)},saveEntityView:{description:"Save entity view",meta:"function",args:[{name:"entityView",type:g,description:"Entity view object to save"},k],return:j(g)},deleteEntityView:{description:"Delete entity view by id",meta:"function",args:[{name:"entityViewId",type:"string",description:"Id of the entity view"},k],return:{type:"Observable&lt;void&gt;",description:"An <code>Observable</code>."}},getEntityViewTypes:{description:"Get all available entity view types",meta:"function",args:[k],return:_('<a href="https://github.com/thingsboard/thingsboard/blob/13e6b10b7ab830e64d31b99614a9d95a1a25928a/ui-ngx/src/app/shared/models/entity-type.models.ts#L295">EntitySubtype</a>')},makeEntityViewPublic:{description:"Make entity view public (available from public dashboard)",meta:"function",args:[{name:"entityViewId",type:"string",description:"Id of the entity view"},k],return:j(g)},assignEntityViewToCustomer:{description:"Assign entity view to specific customer",meta:"function",args:[{name:"customerId",type:"string",description:"Id of the customer"},{name:"entityViewId",type:"string",description:"Id of the entity view"},k],return:j(g)},unassignEntityViewFromCustomer:{description:"Unassign entity view from any customer",meta:"function",args:[{name:"entityViewId",type:"string",description:"Id of the entity view"},k],return:{type:"Observable&lt;void&gt;",description:"An <code>Observable</code>."}},findByQuery:{description:"Find entities view by search query",meta:"function",args:[{name:"query",type:'<a href="https://github.com/thingsboard/thingsboard/blob/13e6b10b7ab830e64d31b99614a9d95a1a25928a/ui-ngx/src/app/shared/models/asset.models.ts#L37">AssetSearchQuery</a>',description:"Entity view search query object"},k],return:_(g)}}},customerService:{description:'Customer Service API<br>See <a href="https://github.com/thingsboard/thingsboard/blob/13e6b10b7ab830e64d31b99614a9d95a1a25928a/ui-ngx/src/app/core/http/customer.service.ts#L28">CustomerService</a> for API reference.',meta:"service",type:'<a href="https://github.com/thingsboard/thingsboard/blob/13e6b10b7ab830e64d31b99614a9d95a1a25928a/ui-ngx/src/app/core/http/customer.service.ts#L28">CustomerService</a>',children:{getCustomer:{description:"Get customer by id",meta:"function",args:[{name:"customerId",type:"string",description:"Id of the customer"},k],return:j(v)},getCustomers:{description:"Get customers by ids",meta:"function",args:[D,k],return:V(v)},saveCustomer:{description:"Save customer",meta:"function",args:[{name:"customer",type:v,description:"Customer object to save"},k],return:j(v)},deleteCustomer:{description:"Delete customer by id",meta:"function",args:[{name:"customerId",type:"string",description:"Id of the customer"},k],return:{type:"Observable&lt;void&gt;",description:"An <code>Observable</code>."}}}},dashboardService:{description:'Dashboard Service API<br>See <a href="https://github.com/thingsboard/thingsboard/blob/13e6b10b7ab830e64d31b99614a9d95a1a25928a/ui-ngx/src/app/core/http/dashboard.service.ts#L32">DashboardService</a> for API reference.',meta:"service",type:'<a href="https://github.com/thingsboard/thingsboard/blob/13e6b10b7ab830e64d31b99614a9d95a1a25928a/ui-ngx/src/app/core/http/dashboard.service.ts#L32">DashboardService</a>',children:{getTenantDashboards:{description:"Get tenant dashboards",meta:"function",args:[D,k],return:V(m)},getTenantDashboardsByTenantId:{description:"Get dashboards by tenant id",meta:"function",args:[{name:"tenantId",type:"string",description:"Id of the tenant"},D,k],return:V(m)},getCustomerDashboards:{description:"Get dashboards by customer id",meta:"function",args:[{name:"customerId",type:"string",description:"Id of the customer"},D,k],return:V(m)},getDashboard:{description:"Get dashboard by id",meta:"function",args:[{name:"dashboardId",type:"string",description:"Id of the dashboard"},k],return:j(b)},getDashboardInfo:{description:"Get dashboard info by id",meta:"function",args:[{name:"dashboardId",type:"string",description:"Id of the dashboard"},k],return:j(m)},saveDashboard:{description:"Save dashboard",meta:"function",args:[{name:"dashboard",type:b,description:"Dashboard object to save"},k],return:j(b)},deleteDashboard:{description:"Delete dashboard by id",meta:"function",args:[{name:"dashboardId",type:"string",description:"Id of the dashboard"},k],return:{type:"Observable&lt;void&gt;",description:"An <code>Observable</code>."}},assignDashboardToCustomer:{description:"Assign dashboard to specific customer",meta:"function",args:[{name:"customerId",type:"string",description:"Id of the customer"},{name:"dashboardId",type:"string",description:"Id of the dashboard"},k],return:j(b)},unassignDashboardFromCustomer:{description:"Unassign dashboard from specific customer",meta:"function",args:[{name:"customerId",type:"string",description:"Id of the customer"},{name:"dashboardId",type:"string",description:"Id of the dashboard"},k],return:{type:"Observable&lt;void&gt;",description:"An <code>Observable</code>."}},makeDashboardPublic:{description:"Make dashboard public by id",meta:"function",args:[{name:"dashboardId",type:"string",description:"Id of the dashboard"},k],return:j(b)},makeDashboardPrivate:{description:"Make dashboard private by id",meta:"function",args:[{name:"dashboardId",type:"string",description:"Id of the dashboard"},k],return:j(b)},updateDashboardCustomers:{description:"Update customers assigned to dashboard by ids",meta:"function",args:[{name:"dashboardId",type:"string",description:"Id of the dashboard"},{name:"customerIds",type:"Array&lt;string&gt;",description:"Ids of the customers"},k],return:j(b)},addDashboardCustomers:{description:"Assign (Add) customers to dashboard by ids",meta:"function",args:[{name:"dashboardId",type:"string",description:"Id of the dashboard"},{name:"customerIds",type:"Array&lt;string&gt;",description:"Ids of the customers"},k],return:j(b)},removeDashboardCustomers:{description:"Unassign (Remove) customers from dashboard by ids",meta:"function",args:[{name:"dashboardId",type:"string",description:"Id of the dashboard"},{name:"customerIds",type:"Array&lt;string&gt;",description:"Id of the customers"},k],return:j(b)},getPublicDashboardLink:{description:"Get public dashboard link",meta:"function",args:[{name:"dashboard",type:m,description:"dashboard info"}],return:{type:"string|null",description:"Returns dashboard url"}},getServerTimeDiff:{description:"Get time difference",meta:"function",args:[],return:A("number")}}},userService:{description:'User Service API<br>See <a href="https://github.com/thingsboard/thingsboard/blob/13e6b10b7ab830e64d31b99614a9d95a1a25928a/ui-ngx/src/app/core/http/user.service.ts#L29">UserService</a> for API reference.',meta:"service",type:'<a href="https://github.com/thingsboard/thingsboard/blob/13e6b10b7ab830e64d31b99614a9d95a1a25928a/ui-ngx/src/app/core/http/user.service.ts#L29">UserService</a>',children:{getUsers:{description:"Get  users",meta:"function",args:[D,k],return:V(C)},getTenantAdmins:{description:"Get tenant admins by id",meta:"function",args:[{name:"tenantId",type:"string",description:"Id of the tenant"},D,k],return:V(C)},getCustomerUsers:{description:"Get customer users by id",meta:"function",args:[{name:"customerId",type:"string",description:"Id of the customer"},D,k],return:V(C)},getUser:{description:"Get user by id",meta:"function",args:[{name:"userId",type:"string",description:"Id of the user"},k],return:j(C)},saveUser:{description:"Save user",meta:"function",args:[{name:"user",type:C,description:"User object to save"},{name:"sendActivationMail",type:"boolean",description:"Send activation email",optional:!0},k],return:j(C)},deleteUser:{description:"Delete user by id",meta:"function",args:[{name:"userId",type:"string",description:"Id of the user"},k],return:{type:"Observable&lt;void&gt;",description:"An <code>Observable</code>."}},setUserCredentialsEnabled:{description:"Set user credentials enabled by id",meta:"function",args:[{name:"userId",type:"string",description:"Id of the user"},{name:"userCredentialsEnabled",type:"boolean",description:"User credentials enabled"},k],return:A("any")},getActivationLink:{description:"Get activation link by id",meta:"function",args:[{name:"userId",type:"string",description:"Id of the user"},k],return:A("string")},sendActivationEmail:{description:"Send activation email",meta:"function",args:[{name:"email",type:"string",description:"Email of the user"},k],return:{type:"Observable&lt;void&gt;",description:"An <code>Observable</code>."}}}},entityRelationService:{description:'Entity Relation Service API<br>See <a href="https://github.com/thingsboard/thingsboard/blob/13e6b10b7ab830e64d31b99614a9d95a1a25928a/ui-ngx/src/app/core/http/entity-relation.service.ts#L27">EntityRelationService</a> for API reference.',meta:"service",type:'<a href="https://github.com/thingsboard/thingsboard/blob/13e6b10b7ab830e64d31b99614a9d95a1a25928a/ui-ngx/src/app/core/http/entity-relation.service.ts#L27">EntityRelationService</a>',children:{saveRelation:{description:"Save relation",meta:"function",args:[{name:"relation",type:y,description:"Relation object to save"},k],return:j(y)},deleteRelation:{description:"Delete relation by ids",meta:"function",args:[{name:"fromId",type:i,description:"From-id"},{name:"relationType",type:"string",description:"Relation type"},{name:"toId",type:i,description:"To-id"},k],return:{type:"Observable&lt;void&gt;",description:"An <code>Observable</code>."}},deleteRelations:{description:"Delete relations by entity id",meta:"function",args:[{name:"entityId",type:i,description:"Entity Id"},k],return:{type:"Observable&lt;void&gt;",description:"An <code>Observable</code>."}},getRelation:{description:"Get relation by ids",meta:"function",args:[{name:"fromId",type:i,description:"From-id"},{name:"relationType",type:"string",description:"Relation type"},{name:"toId",type:i,description:"To-id"},k],return:j(y)},findByFrom:{description:"Find by from-id",meta:"function",args:[{name:"fromId",type:i,description:"From-id"},k],return:_(y)},findInfoByFrom:{description:"Find info by from-id",meta:"function",args:[{name:"fromId",type:i,description:"From-id"},k],return:_(u)},findByFromAndType:{description:"Find by from-id and relation type",meta:"function",args:[{name:"fromId",type:i,description:"From-id"},{name:"relationType",type:"string",description:"Relation type"},k],return:_(y)},findByTo:{description:"Find by to-id",meta:"function",args:[{name:"toId",type:i,description:"To-id"},k],return:_(y)},findInfoByTo:{description:"Find info by to-id",meta:"function",args:[{name:"toId",type:i,description:"To-id"},k],return:_(u)},findByToAndType:{description:"Find by to-id and relation type",meta:"function",args:[{name:"toId",type:i,description:"To-id"},{name:"relationType",type:"string",description:"Relation type"},k],return:_(y)},findByQuery:{description:"Find by query",meta:"function",args:[{name:"query",type:p,description:"Entity relations query"},k],return:_(y)},findInfoByQuery:{description:"Find info by query",meta:"function",args:[{name:"query",type:p,description:"Entity relations query"},k],return:_(u)}}},attributeService:{description:'Attribute Service API<br>See <a href="https://github.com/thingsboard/thingsboard/blob/13e6b10b7ab830e64d31b99614a9d95a1a25928a/ui-ngx/src/app/core/http/attribute.service.ts#L28">AttributeService</a> for API reference.',meta:"service",type:'<a href="https://github.com/thingsboard/thingsboard/blob/13e6b10b7ab830e64d31b99614a9d95a1a25928a/ui-ngx/src/app/core/http/attribute.service.ts#L28">AttributeService</a>',children:{getEntityAttributes:{description:"Get entity attributes by id",meta:"function",args:[{name:"entityId",type:i,description:"Id of the entity"},{name:"attributeScope",type:r,description:"Attribute scope"},{name:"keys",type:"Array&lt;string&gt;",description:"Array of the keys"},k],return:_(x)},deleteEntityAttributes:{description:"Delete entity attributes by id",meta:"function",args:[{name:"entityId",type:i,description:"Id of the entity"},{name:"attributeScope",type:r,description:"Attribute scope"},{name:"attributes",type:"array&lt;"+x+"&gt;",description:"Array of the attributes data"},k],return:A("any")},deleteEntityTimeseries:{description:"Delete entity timeseries by id",meta:"function",args:[{name:"entityId",type:i,description:"Id of the entity"},{name:"timeseries",type:"Array&lt;"+x+"&gt;>",description:"Array of the timeseries data"},{name:"deleteAllDataForKeys",type:"boolean",optional:!0,description:"Delete all data for keys"},k],return:A("any")},saveEntityAttributes:{description:"Save entity attributes",meta:"function",args:[{name:"entityId",type:i,description:"Id of the entity"},{name:"attributeScope",type:r,description:"Attribute scope"},{name:"attributes",type:"Array&lt;${attributeDataHref}&gt;>",description:"Array of the attributes data"},k],return:A("any")},saveEntityTimeseries:{description:"Save entity timeseries",meta:"function",args:[{name:"entityId",type:i,description:"Id of the entity"},{name:"timeseriesScope",type:"string",description:"Timeseries scope"},{name:"timeseries",type:"Array&lt;attributeDataHref&gt;",description:"Array of the timeseries data"},k],return:A("any")},getEntityTimeseries:{description:"Get entity timeseries",meta:"function",args:[{name:"entityId",type:i,description:"Id of the entity"},{name:"keys",type:"Array&lt;string&gt;",description:"Array of the keys"},{name:"startTs",type:"number",description:"Start time in milliseconds"},{name:"endTs",type:"number",description:"End time in milliseconds"},{name:"limit",type:"number",description:"Limit of values to receive for each key"},{name:"agg",type:'<a href="https://github.com/thingsboard/thingsboard/blob/a8ea887eacf7729e603ace13ce2d7d89dae82931/ui-ngx/src/app/shared/models/time/time.models.ts#L54">Aggregation Type</a>',description:"Aggregation type"},{name:"interval",type:"number",description:"Aggregation interval"},{name:"orderBy",type:'<a href="https://github.com/thingsboard/thingsboard/blob/627c0577b08452308f925cecb3860e35292c649e/ui-ngx/src/app/shared/models/telemetry/telemetry.models.ts#L95">Data Sort Order</a>',description:"Data order by time"},{name:"useStrictDataTypes",type:"boolean",description:'If "false" all values will be returned as strings'},k],return:A('<a href="https://github.com/thingsboard/thingsboard/blob/627c0577b08452308f925cecb3860e35292c649e/ui-ngx/src/app/shared/models/telemetry/telemetry.models.ts#L91">Timeseries Data</a>')}}},entityService:{description:'Entity Service API<br>See <a href="https://github.com/thingsboard/thingsboard/blob/13e6b10b7ab830e64d31b99614a9d95a1a25928a/ui-ngx/src/app/core/http/entity.service.ts#L64">EntityService</a> for API reference.',meta:"service",type:'<a href="https://github.com/thingsboard/thingsboard/blob/13e6b10b7ab830e64d31b99614a9d95a1a25928a/ui-ngx/src/app/core/http/entity.service.ts#L64">EntityService</a>',children:{getEntity:{description:"Get entity by id",meta:"function",args:[{name:"entityType",type:o,description:"Entity type"},{name:"entityId",type:"string",description:"Id of the entity"},k],return:{type:"Observable&lt;"+a+"&lt;"+i+"&gt;&gt;",description:"An <code>Observable</code> of <code>"+a+"</code> object."}},getEntities:{description:"Get entities by ids",meta:"function",args:[{name:"entityType",type:o,description:"Entity type"},{name:"entityIds",type:"Array&lt;string&gt;",description:"Ids of the entities"},k],return:L()},getEntitiesByNameFilter:{description:"Get entities by name filter",meta:"function",args:[{name:"entityType",type:o,description:"Entity type"},{name:"entityNameFilter",type:"string",description:"Name filter for the entity"},{name:"pageSize",type:"number",description:"Size of the page"},{name:"subType",type:"string",optional:!0,description:"Subtype"},k],return:L()},findEntityDataByQuery:{description:"Find entity data by query",meta:"function",args:[{name:"query",type:'<a href="https://github.com/thingsboard/thingsboard/blob/master/ui-ngx/src/app/shared/models/query/query.models.ts#L555">Entity Data Query</a>',description:"Entity data query"},k],return:V('<a href="https://github.com/thingsboard/thingsboard/blob/master/ui-ngx/src/app/shared/models/query/query.models.ts#L567">Entity data</a>')},findAlarmDataByQuery:{description:"Find alarm data by query",meta:"function",args:[{name:"query",type:'<a href="https://github.com/thingsboard/thingsboard/blob/master/ui-ngx/src/app/shared/models/query/query.models.ts#L558">Alarm data query</a>',description:"Alarm data query"},k],return:V('<a href="https://github.com/thingsboard/thingsboard/blob/master/ui-ngx/src/app/shared/models/query/query.models.ts#L573">Alarm data</a>')},findEntityInfosByFilterAndName:{description:"Find entity infos by filter and name",meta:"function",args:[{name:"filter",type:w,description:"Filter for the entities"},{name:"searchText",type:"string",description:"Search text"},k],return:V(E)},findSingleEntityInfoByEntityFilter:{description:"Find single entity infos by filter",meta:"function",args:[{name:"filter",type:w,description:"Filter for the entity"},k],return:j(E)},getAliasFilterTypesByEntityTypes:{description:"Get alias filter types by entity types",meta:"function",args:[{name:"entityTypes",type:"Array&lt;"+o+"|"+I+"&gt;",description:"Entity types"}],return:{type:"Array&lt;"+O+"$gt;",description:"Array of "+O+" objects"}},filterAliasByEntityTypes:{description:"Filter alias by entity types",meta:"function",args:[{name:"entityAlias",type:T,description:"Alias of the entity"},{name:"entityTypes",type:"Array&lt;"+o+"|"+I+"&gt;",description:"Entity types"}],return:{type:"boolean",description:"Returns <code>boolean</code> variable based on the filter"}},prepareAllowedEntityTypesList:{description:"Prepare allowed entity types list",meta:"function",args:[{name:"allowedEntityTypes",type:"Array&lt;"+o+"|"+I+"&gt;",description:"Entity types"},{name:"useAliasEntityTypes",type:"boolean",description:"Use alias entity types"}],return:{type:"Array&lt;"+o+"|"+I+"&gt;",description:"Returns entity types array"}},getEntityKeys:{description:"Get entity keys by id",meta:"function",args:[{name:"entityId",type:i,description:"Id of the entity"},{name:"query",type:"string",description:"Key name starts with"},{name:"type",type:'<a href="https://github.com/thingsboard/thingsboard/blob/master/ui-ngx/src/app/shared/models/telemetry/telemetry.models.ts#L27">Data key type</a>',description:"Datakey type"},k],return:{type:"Observable&lt;Array&lt;string&gt;&gt;",description:"An <code>Observable</code> of array of <code>string</code> variables."}},createDatasourcesFromSubscriptionsInfo:{description:"Create datasources from subscriptions info",meta:"function",args:[{name:"subscriptionsInfo",type:"array<subscriptionInfoHref>",description:"Subscriptions info"}],return:{type:"Array&lt;"+M+"&gt;",description:"Array of <code>"+M+"</code> objects"}},createAlarmSourceFromSubscriptionInfo:{description:"Create alarm source from subscriptions info",meta:"function",args:[{name:"subscriptionInfo",type:'<a href="https://github.com/thingsboard/thingsboard/blob/master/ui-ngx/src/app/core/api/widget-api.models.ts#L155">Subscription info</a>',description:"Subscription info"}],return:{type:""+M,description:"<code>"+M+"</code> object"}},resolveAlias:{description:"Resolve alias",meta:"function",args:[{name:"entityAlias",type:T,description:"Entity alias"},{name:"stateParams",type:F,description:"State params"}],return:j('<a href="https://github.com/thingsboard/thingsboard/blob/master/ui-ngx/src/app/core/api/widget-api.models.ts#L88">Alias info</a>')},resolveAliasFilter:{description:"Resolve alias filter",meta:"function",args:[{name:"filter",type:'<a href="https://github.com/thingsboard/thingsboard/blob/master/ui-ngx/src/app/shared/models/alias.models.ts#L134">Entity alias filter</a>',description:"Entity alias filter"},{name:"stateParams",type:F,description:"State params"}],return:j('<a href="https://github.com/thingsboard/thingsboard/blob/master/ui-ngx/src/app/shared/models/alias.models.ts#L158">Entity alias filter result</a>')},checkEntityAlias:{description:"Check entity alias",meta:"function",args:[{name:"entityAlias",type:T,description:"Entity alias"}],return:A("boolean")},saveEntityParameters:{description:"Save entity parameters",meta:"function",args:[{name:"entityType",type:o,description:"Entity type"},{name:"entityData",type:P,description:"Entity data"},{name:"update",type:"boolean",description:"Update"},k],return:j('<a href="https://github.com/thingsboard/thingsboard/blob/master/ui-ngx/src/app/shared/models/entity.models.ts#L42">Import entities result info</a>')},saveEntityData:{description:"Save entity data",meta:"function",args:[{name:"entityId",type:i,description:"Id of the entity"},{name:"entityData",type:P,description:"Entity data"},k],return:A("any")}}},dialogs:{description:'Dialogs Service API<br>See <a href="https://github.com/thingsboard/thingsboard/blob/13e6b10b7ab830e64d31b99614a9d95a1a25928a/ui-ngx/src/app/core/services/dialog.service.ts#L39">DialogService</a> for API reference.',meta:"service",type:'<a href="https://github.com/thingsboard/thingsboard/blob/13e6b10b7ab830e64d31b99614a9d95a1a25928a/ui-ngx/src/app/core/services/dialog.service.ts#L39">DialogService</a>',children:{confirm:{description:"Confirm",meta:"function",args:[{name:"title",type:"string",description:"Title"},{name:"message",type:"string",description:"Message"},{name:"cancel",type:"string",optional:!0,description:"Cancel"},{name:"ok",type:"string",optional:!0,description:"Ok"},{name:"fullscreen",type:"boolean",optional:!0,description:"Fullscreen"}],return:A("boolean")},alert:{description:"Alert",meta:"function",args:[{name:"title",type:"string",description:"Title"},{name:"message",type:"string",description:"Message"},{name:"ok",type:"string",optional:!0,description:"Ok"},{name:"fullscreen",type:"boolean",optional:!0,description:"Fullscreen"}],return:A("boolean")},colorPicker:{description:"Color picker",meta:"function",args:[{name:"color",type:"string",description:"\u0421olor"}],return:A("string")},materialIconPicker:{description:"Material icon picker",meta:"function",args:[{name:"icon",type:"string",description:"Icon"}],return:A("string")},forbidden:{description:"Forbidden",meta:"function",args:[],return:A("boolean")},todo:{description:"To do",meta:"function",args:[],return:A("any")}}},customDialog:{description:'Custom Dialog Service API<br>See <a href="https://github.com/thingsboard/thingsboard/blob/13e6b10b7ab830e64d31b99614a9d95a1a25928a/ui-ngx/src/app/modules/home/components/widget/dialog/custom-dialog.service.ts#L33">CustomDialogService</a> for API reference.',meta:"service",type:'<a href="https://github.com/thingsboard/thingsboard/blob/13e6b10b7ab830e64d31b99614a9d95a1a25928a/ui-ngx/src/app/modules/home/components/widget/dialog/custom-dialog.service.ts#L33">CustomDialogService</a>',children:{customDialog:{description:"Custom Dialog",meta:"function",args:[{name:"template",type:"string",description:"Template"},{name:"controller",type:'<a href="https://github.com/thingsboard/thingsboard/blob/master/ui-ngx/src/app/modules/home/components/widget/dialog/custom-dialog.component.ts#L48">CustomDialogComponent</a>',description:"Controller"},{name:"data",type:"any",description:"Data",optional:!0}],return:A("any")}}},date:{description:'Date Pipe<br>Formats a date value according to locale rules.<br>See <a href="https://angular.io/api/common/DatePipe">DatePipe</a> for API reference.',meta:"service",type:'<a href="https://angular.io/api/common/DatePipe">DatePipe</a>'},translate:{description:'Translate Service API<br>See <a href="https://github.com/ngx-translate/core#translateservice">TranslateService</a> for API reference.',meta:"service",type:'<a href="https://github.com/ngx-translate/core#translateservice">TranslateService</a>'},http:{description:'HTTP Client Service<br>See <a href="https://angular.io/api/common/http/HttpClient">HttpClient</a> for API reference.',meta:"service",type:'<a href="https://angular.io/api/common/http/HttpClient">HttpClient</a>'},sanitizer:{description:'DomSanitizer Service<br>See <a href="https://angular.io/api/platform-browser/DomSanitizer">DomSanitizer</a> for API reference.',meta:"service",type:'<a href="https://angular.io/api/platform-browser/DomSanitizer">DomSanitizer</a>'},router:{description:'Router Service<br>See <a href="https://angular.io/api/router/Router">Router</a> for API reference.',meta:"service",type:'<a href="https://angular.io/api/router/Router">Router</a>'}}},LpWh:function(t,e,n){"use strict";n.d(e,"a",(function(){return F}));var i=n("fXoL"),a=n("3Pt+"),r=n("U3y+"),o=n("z3OR"),s=n("2Vo4"),l=n("l7P3"),c=n("+0xr"),d=n("f0Cb"),p=n("d3UM"),u=n("ofXK"),m=n("FKr1"),f=n("kmnG"),h=n("qFsG"),g=n("sYmb");function y(t,e){1&t&&i["\u0275\u0275element"](0,"mat-header-cell",12)}function b(t,e){if(1&t&&(i["\u0275\u0275elementStart"](0,"mat-cell"),i["\u0275\u0275text"](1),i["\u0275\u0275elementEnd"]()),2&t){var n=e.index;i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",n+1," ")}}function v(t,e){1&t&&(i["\u0275\u0275elementStart"](0,"mat-header-cell",13),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&t&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,1,"import.column-example")," "))}function x(t,e){if(1&t&&(i["\u0275\u0275elementStart"](0,"mat-cell"),i["\u0275\u0275text"](1),i["\u0275\u0275elementEnd"]()),2&t){var n=e.$implicit;i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",n.sampleData," ")}}function C(t,e){1&t&&(i["\u0275\u0275elementStart"](0,"mat-header-cell",14),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&t&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,1,"import.column-type.column-type")," "))}function S(t,e){if(1&t&&(i["\u0275\u0275elementStart"](0,"mat-option",17),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&t){var n=e.$implicit,a=i["\u0275\u0275nextContext"](2);i["\u0275\u0275property"]("value",n.value)("disabled",n.disabled),i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,3,a.columnTypesTranslations.get(n.value))," ")}}function w(t,e){if(1&t){var n=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"mat-cell"),i["\u0275\u0275elementStart"](1,"mat-select",15),i["\u0275\u0275listener"]("ngModelChange",(function(t){return i["\u0275\u0275restoreView"](n),e.$implicit.type=t}))("ngModelChange",(function(){return i["\u0275\u0275restoreView"](n),i["\u0275\u0275nextContext"]().columnsUpdated()})),i["\u0275\u0275template"](2,S,3,5,"mat-option",16),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()}if(2&t){var a=e.$implicit,r=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngModel",a.type),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngForOf",r.columnTypes)}}function E(t,e){1&t&&(i["\u0275\u0275elementStart"](0,"mat-header-cell",18),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&t&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,1,"import.column-key")," "))}function I(t,e){if(1&t){var n=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"mat-form-field",20),i["\u0275\u0275element"](1,"mat-label"),i["\u0275\u0275elementStart"](2,"input",21),i["\u0275\u0275listener"]("ngModelChange",(function(t){return i["\u0275\u0275restoreView"](n),i["\u0275\u0275nextContext"]().$implicit.key=t}))("ngModelChange",(function(){return i["\u0275\u0275restoreView"](n),i["\u0275\u0275nextContext"](2).columnsUpdated()})),i["\u0275\u0275pipe"](3,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()}if(2&t){var a=i["\u0275\u0275nextContext"]().$implicit;i["\u0275\u0275advance"](2),i["\u0275\u0275propertyInterpolate"]("placeholder",i["\u0275\u0275pipeBind1"](3,2,"import.column-value")),i["\u0275\u0275property"]("ngModel",a.key)}}function O(t,e){if(1&t&&(i["\u0275\u0275elementStart"](0,"mat-cell"),i["\u0275\u0275template"](1,I,4,4,"mat-form-field",19),i["\u0275\u0275elementEnd"]()),2&t){var n=e.$implicit,a=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",a.isColumnTypeDiffers(n.type))}}function T(t,e){1&t&&i["\u0275\u0275element"](0,"mat-header-row")}function M(t,e){1&t&&i["\u0275\u0275element"](0,"mat-row")}var F=function(){function t(t,e){this.elementRef=t,this.store=e,this.dataSource=new P,this.displayedColumns=["order","sampleData","type","key"],this.columnTypes=[],this.columnTypesTranslations=o.e,this.valid=!0,this.propagateChangePending=!1,this.propagateChange=null}return t.prototype.ngOnInit=function(){switch(this.columnTypes.push({value:o.a.name},{value:o.a.type},{value:o.a.label},{value:o.a.description}),this.entityType){case r.b.DEVICE:this.columnTypes.push({value:o.a.sharedAttribute},{value:o.a.serverAttribute},{value:o.a.timeseries},{value:o.a.accessToken},{value:o.a.isGateway});break;case r.b.ASSET:this.columnTypes.push({value:o.a.serverAttribute},{value:o.a.timeseries})}},t.prototype.registerOnChange=function(t){this.propagateChange=t,this.propagateChangePending&&(this.propagateChange(this.columns),this.propagateChangePending=!1)},t.prototype.registerOnTouched=function(t){},t.prototype.setDisabledState=function(t){this.disabled=t},t.prototype.columnsUpdated=function(){var t=this,e=this.columns.findIndex((function(t){return t.type===o.a.name}))>-1,n=this.columns.findIndex((function(t){return t.type===o.a.type}))>-1,i=this.columns.findIndex((function(t){return t.type===o.a.label}))>-1,a=this.columns.findIndex((function(t){return t.type===o.a.accessToken}))>-1,r=this.columns.findIndex((function(t){return t.type===o.a.isGateway}))>-1,s=this.columns.findIndex((function(t){return t.type===o.a.description}))>-1,l=this.columns.findIndex((function(e){return!t.columnValid(e)}))>-1;this.valid=e&&n&&!l,this.columnTypes.find((function(t){return t.value===o.a.name})).disabled=e,this.columnTypes.find((function(t){return t.value===o.a.type})).disabled=n,this.columnTypes.find((function(t){return t.value===o.a.label})).disabled=i,this.columnTypes.find((function(t){return t.value===o.a.description})).disabled=s;var c=this.columnTypes.find((function(t){return t.value===o.a.isGateway}));c&&(c.disabled=r);var d=this.columnTypes.find((function(t){return t.value===o.a.accessToken}));d&&(d.disabled=a),this.propagateChange?this.propagateChange(this.columns):this.propagateChangePending=!0},t.prototype.isColumnTypeDiffers=function(t){return t===o.a.clientAttribute||t===o.a.sharedAttribute||t===o.a.serverAttribute||t===o.a.timeseries},t.prototype.columnValid=function(t){return!!o.f.includes(t.type)||t.key&&t.key.trim().length>0},t.prototype.validate=function(t){return this.valid?null:{columnsInvalid:!0}},t.prototype.writeValue=function(t){this.columns=t,this.dataSource.setColumns(this.columns),this.columnsUpdated()},t.\u0275fac=function(e){return new(e||t)(i["\u0275\u0275directiveInject"](i.ElementRef),i["\u0275\u0275directiveInject"](l.Store))},t.\u0275cmp=i["\u0275\u0275defineComponent"]({type:t,selectors:[["tb-table-columns-assignment"]],inputs:{entityType:"entityType",disabled:"disabled"},features:[i["\u0275\u0275ProvidersFeature"]([{provide:a.NG_VALUE_ACCESSOR,useExisting:Object(i.forwardRef)((function(){return t})),multi:!0},{provide:a.NG_VALIDATORS,useExisting:Object(i.forwardRef)((function(){return t})),multi:!0}])],decls:16,vars:3,consts:[["mat-table","",3,"dataSource"],["matColumnDef","order"],["style","min-width: 40px; max-width: 40px; width: 40px",4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","sampleData"],["style","flex: 0 0 30%;","class","mat-column-sampleData",4,"matHeaderCellDef"],["matColumnDef","type"],["style","flex: 0 0 40%","class","mat-column-type",4,"matHeaderCellDef"],["matColumnDef","key"],["style","flex: 0 0 30%",4,"matHeaderCellDef"],[4,"matHeaderRowDef"],[4,"matRowDef","matRowDefColumns"],[2,"min-width","40px","max-width","40px","width","40px"],[1,"mat-column-sampleData",2,"flex","0 0 30%"],[1,"mat-column-type",2,"flex","0 0 40%"],["matInput","",3,"ngModel","ngModelChange"],[3,"value","disabled",4,"ngFor","ngForOf"],[3,"value","disabled"],[2,"flex","0 0 30%"],["floatLabel","always","hideRequiredMarker","",4,"ngIf"],["floatLabel","always","hideRequiredMarker",""],["matInput","","required","",3,"ngModel","placeholder","ngModelChange"]],template:function(t,e){1&t&&(i["\u0275\u0275elementStart"](0,"table",0),i["\u0275\u0275elementContainerStart"](1,1),i["\u0275\u0275template"](2,y,1,0,"mat-header-cell",2),i["\u0275\u0275template"](3,b,2,1,"mat-cell",3),i["\u0275\u0275elementContainerEnd"](),i["\u0275\u0275elementContainerStart"](4,4),i["\u0275\u0275template"](5,v,3,3,"mat-header-cell",5),i["\u0275\u0275template"](6,x,2,1,"mat-cell",3),i["\u0275\u0275elementContainerEnd"](),i["\u0275\u0275elementContainerStart"](7,6),i["\u0275\u0275template"](8,C,3,3,"mat-header-cell",7),i["\u0275\u0275template"](9,w,3,2,"mat-cell",3),i["\u0275\u0275elementContainerEnd"](),i["\u0275\u0275elementContainerStart"](10,8),i["\u0275\u0275template"](11,E,3,3,"mat-header-cell",9),i["\u0275\u0275template"](12,O,2,1,"mat-cell",3),i["\u0275\u0275elementContainerEnd"](),i["\u0275\u0275template"](13,T,1,0,"mat-header-row",10),i["\u0275\u0275template"](14,M,1,0,"mat-row",11),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](15,"mat-divider")),2&t&&(i["\u0275\u0275property"]("dataSource",e.dataSource),i["\u0275\u0275advance"](13),i["\u0275\u0275property"]("matHeaderRowDef",e.displayedColumns),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("matRowDefColumns",e.displayedColumns))},directives:[c.MatTable,c.MatColumnDef,c.MatHeaderCellDef,c.MatCellDef,c.MatHeaderRowDef,c.MatRowDef,d.MatDivider,c.MatHeaderCell,c.MatCell,p.MatSelect,a.NgControlStatus,a.NgModel,u.NgForOf,m.MatOption,u.NgIf,f.MatFormField,f.MatLabel,h.MatInput,a.DefaultValueAccessor,a.RequiredValidator,c.MatHeaderRow,c.MatRow],pipes:[g.TranslatePipe],styles:["[_nghost-%COMP%]   .mat-column-order[_ngcontent-%COMP%]{-ms-flex:0 0 40px;flex:0 0 40px}[_nghost-%COMP%]   .mat-column-sampleData[_ngcontent-%COMP%], [_nghost-%COMP%]   .mat-column-type[_ngcontent-%COMP%]{-ms-flex:0 0 120px;flex:0 0 120px;min-width:120px}"]}),t}();!function(){i["\u0275setClassMetadata"](F,[{type:i.Component,args:[{selector:"tb-table-columns-assignment",templateUrl:"./table-columns-assignment.component.html",styleUrls:["./table-columns-assignment.component.scss"],providers:[{provide:a.NG_VALUE_ACCESSOR,useExisting:Object(i.forwardRef)((function(){return F})),multi:!0},{provide:a.NG_VALIDATORS,useExisting:Object(i.forwardRef)((function(){return F})),multi:!0}]}]}],(function(){return[{type:i.ElementRef},{type:l.Store}]}),{entityType:[{type:i.Input}],disabled:[{type:i.Input}]})}();var P=function(){function t(){this.columnsSubject=new s.a([])}return t.prototype.connect=function(t){return this.columnsSubject.asObservable()},t.prototype.disconnect=function(t){this.columnsSubject.complete()},t.prototype.setColumns=function(t){this.columnsSubject.next(t)},t}()},LqAV:function(t,e,n){"use strict";n.d(e,"a",(function(){return j}));var i=n("mrSG"),a=n("fXoL"),r=n("RxGS"),o=n("nhHW"),s=n("HR/i"),l=n("gi3d"),c=n("cp0P"),d=n("vkgz"),p=n("lJxs"),u=n("jCow"),m=n("Uj2l"),f=n("l7P3"),h=n("sYmb"),g=n("wZkO"),y=n("ofXK"),b=n("bTqV"),v=n("Qu3c"),x=n("8m5z"),C=n("NFeN"),S=n("XiUz"),w=n("kmnG"),E=n("qFsG"),I=n("3Pt+"),O=n("yAAm"),T=["htmlInput"],M=["cssInput"];function F(t,e){if(1&t){var n=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementStart"](0,"div",17),a["\u0275\u0275elementStart"](1,"mat-form-field",18),a["\u0275\u0275elementStart"](2,"input",19),a["\u0275\u0275listener"]("ngModelChange",(function(t){return a["\u0275\u0275restoreView"](n),e.$implicit.url=t}))("ngModelChange",(function(){return a["\u0275\u0275restoreView"](n),a["\u0275\u0275nextContext"]().notifyActionUpdated()})),a["\u0275\u0275pipe"](3,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](4,"button",20),a["\u0275\u0275listener"]("click",(function(){a["\u0275\u0275restoreView"](n);var t=e.index;return a["\u0275\u0275nextContext"]().removeResource(t)})),a["\u0275\u0275pipe"](5,"async"),a["\u0275\u0275pipe"](6,"translate"),a["\u0275\u0275elementStart"](7,"mat-icon"),a["\u0275\u0275text"](8,"close"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()}if(2&t){var i=e.$implicit,r=a["\u0275\u0275nextContext"]();a["\u0275\u0275advance"](2),a["\u0275\u0275propertyInterpolate"]("placeholder",a["\u0275\u0275pipeBind1"](3,4,"widget.resource-url")),a["\u0275\u0275property"]("ngModel",i.url),a["\u0275\u0275advance"](2),a["\u0275\u0275propertyInterpolate"]("matTooltip",a["\u0275\u0275pipeBind1"](6,8,"widget.remove-resource")),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](5,6,r.isLoading$))}}var P=function(){return["$event","widgetContext","entityId","entityName","htmlTemplate","additionalParams","entityLabel"]},D=function(){return[]};function k(t,e){if(1&t){var n=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementStart"](0,"mat-tab",1),a["\u0275\u0275pipe"](1,"translate"),a["\u0275\u0275elementStart"](2,"tb-js-func",21),a["\u0275\u0275listener"]("ngModelChange",(function(t){return a["\u0275\u0275restoreView"](n),a["\u0275\u0275nextContext"]().action.customFunction=t}))("ngModelChange",(function(){return a["\u0275\u0275restoreView"](n),a["\u0275\u0275nextContext"]().notifyActionUpdated()})),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()}if(2&t){var i=a["\u0275\u0275nextContext"]();a["\u0275\u0275propertyInterpolate"]("label",a["\u0275\u0275pipeBind1"](1,5,"widget.js")),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("ngModel",i.action.customFunction)("functionArgs",a["\u0275\u0275pureFunction0"](7,P))("validationArgs",a["\u0275\u0275pureFunction0"](8,D))("editorCompleter",i.customPrettyActionEditorCompleter)}}var j=function(t){function e(e,n,i){var r=t.call(this,e)||this;return r.store=e,r.translate=n,r.raf=i,r.actionUpdated=new a.EventEmitter,r.htmlFullscreen=!1,r.cssFullscreen=!1,r.aceEditors=[],r.editorsResizeCafs={},r.setValuesPending=!1,r.customPrettyActionEditorCompleter=l.b,r}return Object(i.d)(e,t),e.prototype.ngOnInit=function(){var t=this;this.initAceEditors().subscribe((function(){t.setValuesPending&&(t.setAceEditorValues(),t.setValuesPending=!1)}))},e.prototype.ngOnDestroy=function(){this.aceResize$.disconnect()},e.prototype.ngOnChanges=function(t){for(var e=0,n=Object.keys(t);e<n.length;e++){"action"===n[e]&&(2===this.aceEditors.length?this.setAceEditorValues():this.setValuesPending=!0)}},e.prototype.notifyActionUpdated=function(){this.actionUpdated.emit(this.validate()?this.action:null)},e.prototype.validate=function(){if(this.action.customResources)for(var t=0,e=this.action.customResources;t<e.length;t++){if(!e[t].url)return!1}return!0},e.prototype.addResource=function(){this.action.customResources||(this.action.customResources=[]),this.action.customResources.push({url:""}),this.notifyActionUpdated()},e.prototype.removeResource=function(t){t>-1&&this.action.customResources.splice(t,1).length>0&&this.notifyActionUpdated()},e.prototype.beautifyCss=function(){var t=this;Object(m.a)(this.action.customCss,{indent_size:4}).subscribe((function(e){t.action.customCss!==e&&(t.action.customCss=e,t.cssEditor.setValue(t.action.customCss?t.action.customCss:"",-1),t.notifyActionUpdated())}))},e.prototype.beautifyHtml=function(){var t=this;Object(m.b)(this.action.customHtml,{indent_size:4,wrap_line_length:60}).subscribe((function(e){t.action.customHtml!==e&&(t.action.customHtml=e,t.htmlEditor.setValue(t.action.customHtml?t.action.customHtml:"",-1),t.notifyActionUpdated())}))},e.prototype.initAceEditors=function(){var t=this;this.aceResize$=new s.a((function(e){e.forEach((function(e){var n=t.aceEditors.find((function(t){return t.container===e.target}));t.onAceEditorResize(n)}))}));var e=[];return e.push(this.createAceEditor(this.htmlInputElmRef,"html").pipe(Object(d.a)((function(e){t.htmlEditor=e,t.htmlEditor.on("input",(function(){var e=t.htmlEditor.getValue();t.action.customHtml!==e&&(t.action.customHtml=e,t.notifyActionUpdated())}))})))),e.push(this.createAceEditor(this.cssInputElmRef,"css").pipe(Object(d.a)((function(e){t.cssEditor=e,t.cssEditor.on("input",(function(){var e=t.cssEditor.getValue();t.action.customCss!==e&&(t.action.customCss=e,t.notifyActionUpdated())}))})))),Object(c.a)(e)},e.prototype.createAceEditor=function(t,e){var n=this,a=t.nativeElement,r={mode:"ace/mode/"+e,showGutter:!0,showPrintMargin:!0};return r=Object(i.a)(Object(i.a)({},r),{enableSnippets:!0,enableBasicAutocompletion:!0,enableLiveAutocompletion:!0}),Object(u.b)().pipe(Object(p.a)((function(t){var e=t.edit(a,r);return e.session.setUseWrapMode(!0),n.aceEditors.push(e),n.aceResize$.observe(a),e})))},e.prototype.setAceEditorValues=function(){this.htmlEditor.setValue(this.action.customHtml?this.action.customHtml:"",-1),this.cssEditor.setValue(this.action.customCss?this.action.customCss:"",-1)},e.prototype.onAceEditorResize=function(t){this.editorsResizeCafs[t.id]&&(this.editorsResizeCafs[t.id](),delete this.editorsResizeCafs[t.id]),this.editorsResizeCafs[t.id]=this.raf.raf((function(){t.resize(),t.renderer.updateFull()}))},e.\u0275fac=function(t){return new(t||e)(a["\u0275\u0275directiveInject"](f.Store),a["\u0275\u0275directiveInject"](h.TranslateService),a["\u0275\u0275directiveInject"](o.a))},e.\u0275cmp=a["\u0275\u0275defineComponent"]({type:e,selectors:[["tb-custom-action-pretty-resources-tabs"]],viewQuery:function(t,e){var n;(1&t&&(a["\u0275\u0275staticViewQuery"](T,!0),a["\u0275\u0275staticViewQuery"](M,!0)),2&t)&&(a["\u0275\u0275queryRefresh"](n=a["\u0275\u0275loadQuery"]())&&(e.htmlInputElmRef=n.first),a["\u0275\u0275queryRefresh"](n=a["\u0275\u0275loadQuery"]())&&(e.cssInputElmRef=n.first))},inputs:{action:"action",hasCustomFunction:"hasCustomFunction"},outputs:{actionUpdated:"actionUpdated"},features:[a["\u0275\u0275InheritDefinitionFeature"],a["\u0275\u0275NgOnChangesFeature"]],decls:39,vars:34,consts:[["dynamicHeight","true",2,"width","100%","height","100%",3,"selectedIndex"],[2,"width","100%","height","100%",3,"label"],[1,"tb-custom-action-editor-container",2,"background-color","#fff"],[1,"mat-padding"],["fxFlex","","fxLayout","row","style","max-height: 40px;","fxLayoutAlign","start center",4,"ngFor","ngForOf"],[2,"margin-top","6px"],["mat-button","","mat-raised-button","","color","primary","type","button","matTooltipPosition","above",3,"disabled","matTooltip","click"],["translate",""],["tb-fullscreen","",1,"tb-custom-action-editor-container",3,"fullscreen"],[1,"tb-editor-area-title-panel"],["mat-button","","type","button",3,"click"],["mat-button","","type","button","mat-icon-button","","matTooltipPosition","above",1,"tb-mat-32",3,"matTooltip","click"],[1,"css-panel"],["cssInput",""],[1,"html-panel"],["htmlInput",""],["style","width: 100%; height: 100%;",3,"label",4,"ngIf"],["fxFlex","","fxLayout","row","fxLayoutAlign","start center",2,"max-height","40px"],["fxFlex","","floatLabel","never",1,"mat-block","resource-field",2,"margin","10px 0 0","max-height","40px"],["required","","matInput","",3,"ngModel","placeholder","ngModelChange"],["mat-icon-button","","color","primary","type","button","matTooltipPosition","above",3,"disabled","matTooltip","click"],[3,"ngModel","functionArgs","validationArgs","editorCompleter","ngModelChange"]],template:function(t,e){1&t&&(a["\u0275\u0275elementStart"](0,"mat-tab-group",0),a["\u0275\u0275elementStart"](1,"mat-tab",1),a["\u0275\u0275pipe"](2,"translate"),a["\u0275\u0275elementStart"](3,"div",2),a["\u0275\u0275elementStart"](4,"div",3),a["\u0275\u0275template"](5,F,9,10,"div",4),a["\u0275\u0275elementStart"](6,"div",5),a["\u0275\u0275elementStart"](7,"button",6),a["\u0275\u0275listener"]("click",(function(){return e.addResource()})),a["\u0275\u0275pipe"](8,"async"),a["\u0275\u0275pipe"](9,"translate"),a["\u0275\u0275elementStart"](10,"span",7),a["\u0275\u0275text"](11,"action.add"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](12,"mat-tab",1),a["\u0275\u0275pipe"](13,"translate"),a["\u0275\u0275elementStart"](14,"div",8),a["\u0275\u0275elementStart"](15,"div",9),a["\u0275\u0275elementStart"](16,"button",10),a["\u0275\u0275listener"]("click",(function(){return e.beautifyCss()})),a["\u0275\u0275text"](17),a["\u0275\u0275pipe"](18,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](19,"button",11),a["\u0275\u0275listener"]("click",(function(){return e.cssFullscreen=!e.cssFullscreen})),a["\u0275\u0275pipe"](20,"translate"),a["\u0275\u0275elementStart"](21,"mat-icon"),a["\u0275\u0275text"](22),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](23,"div",12,13),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](25,"mat-tab",1),a["\u0275\u0275pipe"](26,"translate"),a["\u0275\u0275elementStart"](27,"div",8),a["\u0275\u0275elementStart"](28,"div",9),a["\u0275\u0275elementStart"](29,"button",10),a["\u0275\u0275listener"]("click",(function(){return e.beautifyHtml()})),a["\u0275\u0275text"](30),a["\u0275\u0275pipe"](31,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](32,"button",11),a["\u0275\u0275listener"]("click",(function(){return e.htmlFullscreen=!e.htmlFullscreen})),a["\u0275\u0275pipe"](33,"translate"),a["\u0275\u0275elementStart"](34,"mat-icon"),a["\u0275\u0275text"](35),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](36,"div",14,15),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275template"](38,k,3,9,"mat-tab",16),a["\u0275\u0275elementEnd"]()),2&t&&(a["\u0275\u0275propertyInterpolate"]("selectedIndex",e.hasCustomFunction?3:2),a["\u0275\u0275advance"](1),a["\u0275\u0275propertyInterpolate"]("label",a["\u0275\u0275pipeBind1"](2,16,"widget.resources")),a["\u0275\u0275advance"](4),a["\u0275\u0275property"]("ngForOf",e.action.customResources),a["\u0275\u0275advance"](2),a["\u0275\u0275propertyInterpolate"]("matTooltip",a["\u0275\u0275pipeBind1"](9,20,"widget.add-resource")),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](8,18,e.isLoading$)),a["\u0275\u0275advance"](5),a["\u0275\u0275propertyInterpolate"]("label",a["\u0275\u0275pipeBind1"](13,22,"widget.css")),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("fullscreen",e.cssFullscreen),a["\u0275\u0275advance"](3),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](18,24,"widget.tidy")," "),a["\u0275\u0275advance"](2),a["\u0275\u0275propertyInterpolate"]("matTooltip",a["\u0275\u0275pipeBind1"](20,26,e.cssFullscreen?"fullscreen.exit":"fullscreen.expand")),a["\u0275\u0275advance"](3),a["\u0275\u0275textInterpolate"](e.cssFullscreen?"fullscreen_exit":"fullscreen"),a["\u0275\u0275advance"](3),a["\u0275\u0275propertyInterpolate"]("label",a["\u0275\u0275pipeBind1"](26,28,"widget.html")),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("fullscreen",e.htmlFullscreen),a["\u0275\u0275advance"](3),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](31,30,"widget.tidy")," "),a["\u0275\u0275advance"](2),a["\u0275\u0275propertyInterpolate"]("matTooltip",a["\u0275\u0275pipeBind1"](33,32,e.htmlFullscreen?"fullscreen.exit":"fullscreen.expand")),a["\u0275\u0275advance"](3),a["\u0275\u0275textInterpolate"](e.htmlFullscreen?"fullscreen_exit":"fullscreen"),a["\u0275\u0275advance"](3),a["\u0275\u0275property"]("ngIf",e.hasCustomFunction))},directives:[g.MatTabGroup,g.MatTab,y.NgForOf,b.MatButton,v.MatTooltip,h.TranslateDirective,x.a,C.MatIcon,y.NgIf,S.b,S.f,S.e,w.MatFormField,E.MatInput,I.DefaultValueAccessor,I.RequiredValidator,I.NgControlStatus,I.NgModel,O.a],pipes:[h.TranslatePipe,y.AsyncPipe],styles:[".tb-custom-action-editor-container mat-form-field.resource-field{max-height:40px;margin:10px 0 0}.tb-custom-action-editor-container mat-form-field.resource-field .mat-form-field-wrapper{padding-bottom:0}.tb-custom-action-editor-container mat-form-field.resource-field .mat-form-field-wrapper .mat-form-field-flex{max-height:40px}.tb-custom-action-editor-container mat-form-field.resource-field .mat-form-field-wrapper .mat-form-field-flex .mat-form-field-infix{border:0}.tb-custom-action-editor-container mat-form-field.resource-field .mat-form-field-wrapper .mat-form-field-underline{bottom:0}.tb-custom-action-editor-container .css-panel,.tb-custom-action-editor-container .html-panel{width:100%;min-width:200px;height:100%;min-height:200px}.tb-custom-action-editor-container div.tb-editor-area-title-panel{position:absolute;top:5px;right:20px;z-index:5;font-size:.8rem;font-weight:500}.tb-custom-action-editor-container div.tb-editor-area-title-panel label{padding:4px;color:#00acc1;background:hsla(0,0%,86.3%,.35);border-radius:5px}.tb-custom-action-editor-container div.tb-editor-area-title-panel label:not(:last-child){margin-right:4px}.tb-custom-action-editor-container div.tb-editor-area-title-panel button.mat-button,.tb-custom-action-editor-container div.tb-editor-area-title-panel button.mat-icon-button,.tb-custom-action-editor-container div.tb-editor-area-title-panel button.mat-icon-button.tb-mat-32{-ms-flex-align:center;align-items:center;vertical-align:middle;min-width:32px;min-height:15px;padding:4px;margin:0;font-size:.8rem;line-height:15px;color:#7b7b7b;background:hsla(0,0%,86.3%,.35)}.tb-custom-action-editor-container div.tb-editor-area-title-panel button.mat-button:not(:last-child),.tb-custom-action-editor-container div.tb-editor-area-title-panel button.mat-icon-button.tb-mat-32:not(:last-child),.tb-custom-action-editor-container div.tb-editor-area-title-panel button.mat-icon-button:not(:last-child){margin-right:4px}"],encapsulation:2}),e}(r.a);!function(){a["\u0275setClassMetadata"](j,[{type:a.Component,args:[{selector:"tb-custom-action-pretty-resources-tabs",templateUrl:"./custom-action-pretty-resources-tabs.component.html",styleUrls:["./custom-action-pretty-resources-tabs.component.scss"],encapsulation:a.ViewEncapsulation.None}]}],(function(){return[{type:f.Store},{type:h.TranslateService},{type:o.a}]}),{action:[{type:a.Input}],hasCustomFunction:[{type:a.Input}],actionUpdated:[{type:a.Output}],htmlInputElmRef:[{type:a.ViewChild,args:["htmlInput",{static:!0}]}],cssInputElmRef:[{type:a.ViewChild,args:["cssInput",{static:!0}]}]})}()},LrsY:function(t,e,n){"use strict";n.d(e,"a",(function(){return E}));var i=n("mrSG"),a=n("fXoL"),r=n("FKr1"),o=n("0IaG"),s=n("HnHJ"),l=n("gmuX"),c=n("l7P3"),d=n("tyNb"),p=n("3Pt+"),u=n("ofXK"),m=n("znSr"),f=n("/t3+"),h=n("sYmb"),g=n("XiUz"),y=n("kRCp"),b=n("bTqV"),v=n("NFeN"),x=n("bv9b"),C=["entityDetailsForm"];function S(t,e){1&t&&a["\u0275\u0275element"](0,"mat-progress-bar",14)}function w(t,e){1&t&&a["\u0275\u0275element"](0,"div",15)}var E=function(t){function e(e,n,i,a,r,o,s){var l=t.call(this,e,n,a)||this;return l.store=e,l.router=n,l.data=i,l.dialogRef=a,l.componentFactoryResolver=r,l.injector=o,l.errorStateMatcher=s,l.submitted=!1,l}return Object(i.d)(e,t),e.prototype.ngOnInit=function(){this.entitiesTableConfig=this.data.entitiesTableConfig,this.translations=this.entitiesTableConfig.entityTranslations,this.resources=this.entitiesTableConfig.entityResources,this.entity={};var t=this.componentFactoryResolver.resolveComponentFactory(this.entitiesTableConfig.entityComponent),e=this.entityDetailsFormAnchor.viewContainerRef;e.clear();var n=a.Injector.create({providers:[{provide:"entity",useValue:this.entity},{provide:"entitiesTableConfig",useValue:this.entitiesTableConfig}],parent:this.injector}),i=e.createComponent(t,0,n);this.entityComponent=i.instance,this.entityComponent.isEdit=!0,this.detailsForm=this.entityComponent.entityForm},e.prototype.helpLinkId=function(){return this.resources.helpLinkIdForEntity&&this.entityComponent.entityForm?this.resources.helpLinkIdForEntity(this.entityComponent.entityForm.getRawValue()):this.resources.helpLinkId},e.prototype.isErrorState=function(t,e){var n=this.errorStateMatcher.isErrorState(t,e),i=!!(t&&t.invalid&&this.submitted);return n||i},e.prototype.cancel=function(){this.dialogRef.close(null)},e.prototype.add=function(){var t=this;this.submitted=!0,this.detailsForm.valid&&(this.entity=Object(i.a)(Object(i.a)({},this.entity),this.entityComponent.entityFormValue()),this.entitiesTableConfig.saveEntity(this.entity).subscribe((function(e){t.dialogRef.close(e)})))},e.\u0275fac=function(t){return new(t||e)(a["\u0275\u0275directiveInject"](c.Store),a["\u0275\u0275directiveInject"](d.Router),a["\u0275\u0275directiveInject"](o.MAT_DIALOG_DATA),a["\u0275\u0275directiveInject"](o.MatDialogRef),a["\u0275\u0275directiveInject"](a.ComponentFactoryResolver),a["\u0275\u0275directiveInject"](a.Injector),a["\u0275\u0275directiveInject"](r.ErrorStateMatcher,4))},e.\u0275cmp=a["\u0275\u0275defineComponent"]({type:e,selectors:[["tb-add-entity-dialog"]],viewQuery:function(t,e){var n;(1&t&&a["\u0275\u0275staticViewQuery"](C,!0),2&t)&&(a["\u0275\u0275queryRefresh"](n=a["\u0275\u0275loadQuery"]())&&(e.entityDetailsFormAnchor=n.first))},features:[a["\u0275\u0275ProvidersFeature"]([{provide:r.ErrorStateMatcher,useExisting:e}]),a["\u0275\u0275InheritDefinitionFeature"]],decls:25,vars:21,consts:[[2,"min-width","400px",3,"ngStyle","ngSubmit"],["color","primary"],["translate",""],["fxFlex",""],[3,"tb-help"],["mat-icon-button","","type","button",3,"click"],[1,"material-icons"],["color","warn","mode","indeterminate",4,"ngIf"],["style","height: 4px;",4,"ngIf"],["mat-dialog-content",""],["entityDetailsForm",""],["mat-dialog-actions","","fxLayoutAlign","end center"],["mat-button","","color","primary","type","button","cdkFocusInitial","",3,"disabled","click"],["mat-raised-button","","color","primary","type","submit",3,"disabled"],["color","warn","mode","indeterminate"],[2,"height","4px"]],template:function(t,e){1&t&&(a["\u0275\u0275elementStart"](0,"form",0),a["\u0275\u0275listener"]("ngSubmit",(function(){return e.add()})),a["\u0275\u0275elementStart"](1,"mat-toolbar",1),a["\u0275\u0275elementStart"](2,"h2",2),a["\u0275\u0275text"](3),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](4,"span",3),a["\u0275\u0275element"](5,"div",4),a["\u0275\u0275elementStart"](6,"button",5),a["\u0275\u0275listener"]("click",(function(){return e.cancel()})),a["\u0275\u0275elementStart"](7,"mat-icon",6),a["\u0275\u0275text"](8,"close"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275template"](9,S,1,0,"mat-progress-bar",7),a["\u0275\u0275pipe"](10,"async"),a["\u0275\u0275template"](11,w,1,0,"div",8),a["\u0275\u0275pipe"](12,"async"),a["\u0275\u0275elementStart"](13,"div",9),a["\u0275\u0275element"](14,"tb-anchor",null,10),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](16,"div",11),a["\u0275\u0275elementStart"](17,"button",12),a["\u0275\u0275listener"]("click",(function(){return e.cancel()})),a["\u0275\u0275pipe"](18,"async"),a["\u0275\u0275text"](19),a["\u0275\u0275pipe"](20,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](21,"button",13),a["\u0275\u0275pipe"](22,"async"),a["\u0275\u0275text"](23),a["\u0275\u0275pipe"](24,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()),2&t&&(a["\u0275\u0275property"]("ngStyle",e.entitiesTableConfig.addDialogStyle),a["\u0275\u0275advance"](3),a["\u0275\u0275textInterpolate"](e.translations.add),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("tb-help",e.helpLinkId()),a["\u0275\u0275advance"](4),a["\u0275\u0275property"]("ngIf",a["\u0275\u0275pipeBind1"](10,9,e.isLoading$)),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("ngIf",!a["\u0275\u0275pipeBind1"](12,11,e.isLoading$)),a["\u0275\u0275advance"](6),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](18,13,e.isLoading$)),a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](20,15,"action.cancel")," "),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](22,17,e.isLoading$)||(null==e.detailsForm?null:e.detailsForm.invalid)||!(null!=e.detailsForm&&e.detailsForm.dirty)),a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](24,19,"action.add")," "))},directives:[p["\u0275angular_packages_forms_forms_y"],p.NgControlStatusGroup,p.NgForm,u.NgStyle,m.e,f.MatToolbar,h.TranslateDirective,g.b,y.a,b.MatButton,v.MatIcon,u.NgIf,o.MatDialogContent,s.a,o.MatDialogActions,g.e,x.MatProgressBar],pipes:[u.AsyncPipe,h.TranslatePipe],styles:["[_nghost-%COMP%]     .mat-padding{padding:0}"]}),e}(l.a);!function(){a["\u0275setClassMetadata"](E,[{type:a.Component,args:[{selector:"tb-add-entity-dialog",templateUrl:"./add-entity-dialog.component.html",providers:[{provide:r.ErrorStateMatcher,useExisting:E}],styleUrls:["./add-entity-dialog.component.scss"]}]}],(function(){return[{type:c.Store},{type:d.Router},{type:void 0,decorators:[{type:a.Inject,args:[o.MAT_DIALOG_DATA]}]},{type:o.MatDialogRef},{type:a.ComponentFactoryResolver},{type:a.Injector},{type:r.ErrorStateMatcher,decorators:[{type:a.SkipSelf}]}]}),{entityDetailsFormAnchor:[{type:a.ViewChild,args:["entityDetailsForm",{static:!0}]}]})}()},LwFc:function(t,e,n){"use strict";n.d(e,"a",(function(){return m}));var i=n("mrSG"),a=n("fXoL"),r=n("RxGS"),o=n("BOYq"),s=n("//Q6"),l=n("l7P3"),c=n("0IaG"),d=n("3Pt+"),p=n("fYjj"),u=n("ofXK"),m=function(t){function e(e,n,i,a){var r=t.call(this,e)||this;return r.store=e,r.dialog=n,r.fb=i,r.widgetComponentService=a,r.widgetFormGroup=r.fb.group({widgetConfig:[null]}),r}return Object(i.d)(e,t),e.prototype.ngOnInit=function(){this.loadWidgetConfig()},e.prototype.ngOnChanges=function(t){for(var e=!1,n=0,i=Object.keys(t);n<i.length;n++){var a=i[n],r=t[a];r.firstChange||r.currentValue===r.previousValue||["widget","widgetLayout"].includes(a)&&(e=!0)}e&&this.loadWidgetConfig()},e.prototype.loadWidgetConfig=function(){if(this.widget){var t,e,n=this.widgetComponentService.getInstantWidgetInfo(this.widget),i=n.typeSettingsSchema||n.settingsSchema,a=n.typeDataKeySettingsSchema||n.dataKeySettingsSchema,r=n.typeParameters,o=n.actionSources,l=!Object(s.n)(n.typeParameters)||!n.typeParameters.useCustomDatasources;t=i&&""!==i?Object(s.y)(i)?JSON.parse(i):i:{},e=a&&""!==a?Object(s.y)(a)?JSON.parse(a):a:{},this.widgetConfig={config:this.widget.config,layout:this.widgetLayout,widgetType:this.widget.type,typeParameters:r,actionSources:o,isDataEnabled:l,settingsSchema:t,dataKeySettingsSchema:e},this.widgetFormGroup.reset({widgetConfig:this.widgetConfig})}},e.\u0275fac=function(t){return new(t||e)(a["\u0275\u0275directiveInject"](l.Store),a["\u0275\u0275directiveInject"](c.MatDialog),a["\u0275\u0275directiveInject"](d.FormBuilder),a["\u0275\u0275directiveInject"](o.a))},e.\u0275cmp=a["\u0275\u0275defineComponent"]({type:e,selectors:[["tb-edit-widget"]],inputs:{dashboard:"dashboard",aliasController:"aliasController",widgetEditMode:"widgetEditMode",widget:"widget",widgetLayout:"widgetLayout"},features:[a["\u0275\u0275InheritDefinitionFeature"],a["\u0275\u0275NgOnChangesFeature"]],decls:4,vars:9,consts:[[3,"formGroup"],[3,"disabled"],["formControlName","widgetConfig",3,"aliasController","functionsOnly","entityAliases","filters","dashboardStates"]],template:function(t,e){1&t&&(a["\u0275\u0275elementStart"](0,"form",0),a["\u0275\u0275elementStart"](1,"fieldset",1),a["\u0275\u0275pipe"](2,"async"),a["\u0275\u0275element"](3,"tb-widget-config",2),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()),2&t&&(a["\u0275\u0275property"]("formGroup",e.widgetFormGroup),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](2,7,e.isLoading$)),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("aliasController",e.aliasController)("functionsOnly",e.widgetEditMode)("entityAliases",e.dashboard.configuration.entityAliases)("filters",e.dashboard.configuration.filters)("dashboardStates",e.dashboard.configuration.states))},directives:[d["\u0275angular_packages_forms_forms_y"],d.NgControlStatusGroup,d.FormGroupDirective,p.a,d.NgControlStatus,d.FormControlName],pipes:[u.AsyncPipe],encapsulation:2}),e}(r.a);!function(){a["\u0275setClassMetadata"](m,[{type:a.Component,args:[{selector:"tb-edit-widget",templateUrl:"./edit-widget.component.html",styleUrls:[]}]}],(function(){return[{type:l.Store},{type:c.MatDialog},{type:d.FormBuilder},{type:o.a}]}),{dashboard:[{type:a.Input}],aliasController:[{type:a.Input}],widgetEditMode:[{type:a.Input}],widget:[{type:a.Input}],widgetLayout:[{type:a.Input}]})}()},M0Qk:function(t,e,n){"use strict";n.d(e,"a",(function(){return c}));var i=n("fXoL"),a=n("ofXK"),r=n("PCNd"),o=n("uPsX"),s=n("tM37"),l=n("SZX/"),c=function(){function t(){}return t.\u0275mod=i["\u0275\u0275defineNgModule"]({type:t}),t.\u0275inj=i["\u0275\u0275defineInjector"]({factory:function(e){return new(e||t)},providers:[l.a],imports:[[a.CommonModule,r.a]]}),t}();void(("undefined"==typeof ngJitMode||ngJitMode)&&i["\u0275\u0275setNgModuleScope"](c,{declarations:[o.a,s.a],imports:[a.CommonModule,r.a],exports:[o.a,s.a]}))},Mfyf:function(t,e,n){"use strict";n.d(e,"a",(function(){return g}));var i=n("fXoL"),a=n("3Pt+"),r=n("8LU1"),o=n("//Q6"),s=n("c1Lj"),l=n("l7P3"),c=n("kmnG"),d=n("sYmb"),p=n("qFsG"),u=n("ofXK");function m(t,e){1&t&&(i["\u0275\u0275elementStart"](0,"mat-error"),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&t&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,1,"admin.aws-access-key-id-required")," "))}function f(t,e){1&t&&(i["\u0275\u0275elementStart"](0,"mat-error"),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&t&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,1,"admin.aws-secret-access-key-required")," "))}function h(t,e){1&t&&(i["\u0275\u0275elementStart"](0,"mat-error"),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&t&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,1,"admin.aws-region-required")," "))}var g=function(){function t(t,e){this.store=t,this.fb=e,this.propagateChange=function(t){}}return Object.defineProperty(t.prototype,"required",{get:function(){return this.requiredValue},set:function(t){this.requiredValue=Object(r.coerceBooleanProperty)(t)},enumerable:!1,configurable:!0}),t.prototype.registerOnChange=function(t){this.propagateChange=t},t.prototype.registerOnTouched=function(t){},t.prototype.ngOnInit=function(){var t=this;this.awsSnsProviderConfigurationFormGroup=this.fb.group({accessKeyId:[null,[a.Validators.required]],secretAccessKey:[null,[a.Validators.required]],region:[null,[a.Validators.required]]}),this.awsSnsProviderConfigurationFormGroup.valueChanges.subscribe((function(){t.updateModel()}))},t.prototype.setDisabledState=function(t){this.disabled=t,this.disabled?this.awsSnsProviderConfigurationFormGroup.disable({emitEvent:!1}):this.awsSnsProviderConfigurationFormGroup.enable({emitEvent:!1})},t.prototype.writeValue=function(t){Object(o.o)(t)&&this.awsSnsProviderConfigurationFormGroup.patchValue(t,{emitEvent:!1})},t.prototype.updateModel=function(){var t=null;this.awsSnsProviderConfigurationFormGroup.valid&&((t=this.awsSnsProviderConfigurationFormGroup.value).type=s.a.AWS_SNS),this.propagateChange(t)},t.\u0275fac=function(e){return new(e||t)(i["\u0275\u0275directiveInject"](l.Store),i["\u0275\u0275directiveInject"](a.FormBuilder))},t.\u0275cmp=i["\u0275\u0275defineComponent"]({type:t,selectors:[["tb-aws-sns-provider-configuration"]],inputs:{required:"required",disabled:"disabled"},features:[i["\u0275\u0275ProvidersFeature"]([{provide:a.NG_VALUE_ACCESSOR,useExisting:Object(i.forwardRef)((function(){return t})),multi:!0}])],decls:16,vars:4,consts:[[2,"padding-bottom","16px",3,"formGroup"],[1,"mat-block"],["translate",""],["required","","matInput","","formControlName","accessKeyId"],[4,"ngIf"],["required","","type","password","matInput","","formControlName","secretAccessKey"],["required","","matInput","","formControlName","region"]],template:function(t,e){1&t&&(i["\u0275\u0275elementStart"](0,"form",0),i["\u0275\u0275elementStart"](1,"mat-form-field",1),i["\u0275\u0275elementStart"](2,"mat-label",2),i["\u0275\u0275text"](3,"admin.aws-access-key-id"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](4,"input",3),i["\u0275\u0275template"](5,m,3,3,"mat-error",4),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](6,"mat-form-field",1),i["\u0275\u0275elementStart"](7,"mat-label",2),i["\u0275\u0275text"](8,"admin.aws-secret-access-key"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](9,"input",5),i["\u0275\u0275template"](10,f,3,3,"mat-error",4),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](11,"mat-form-field",1),i["\u0275\u0275elementStart"](12,"mat-label",2),i["\u0275\u0275text"](13,"admin.aws-region"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](14,"input",6),i["\u0275\u0275template"](15,h,3,3,"mat-error",4),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()),2&t&&(i["\u0275\u0275property"]("formGroup",e.awsSnsProviderConfigurationFormGroup),i["\u0275\u0275advance"](5),i["\u0275\u0275property"]("ngIf",e.awsSnsProviderConfigurationFormGroup.get("accessKeyId").hasError("required")),i["\u0275\u0275advance"](5),i["\u0275\u0275property"]("ngIf",e.awsSnsProviderConfigurationFormGroup.get("secretAccessKey").hasError("required")),i["\u0275\u0275advance"](5),i["\u0275\u0275property"]("ngIf",e.awsSnsProviderConfigurationFormGroup.get("region").hasError("required")))},directives:[a["\u0275angular_packages_forms_forms_y"],a.NgControlStatusGroup,a.FormGroupDirective,c.MatFormField,c.MatLabel,d.TranslateDirective,p.MatInput,a.DefaultValueAccessor,a.RequiredValidator,a.NgControlStatus,a.FormControlName,u.NgIf,c.MatError],pipes:[d.TranslatePipe],encapsulation:2}),t}();!function(){i["\u0275setClassMetadata"](g,[{type:i.Component,args:[{selector:"tb-aws-sns-provider-configuration",templateUrl:"./aws-sns-provider-configuration.component.html",styleUrls:[],providers:[{provide:a.NG_VALUE_ACCESSOR,useExisting:Object(i.forwardRef)((function(){return g})),multi:!0}]}]}],(function(){return[{type:l.Store},{type:a.FormBuilder}]}),{required:[{type:i.Input}],disabled:[{type:i.Input}]})}()},Mldr:function(t,e,n){"use strict";n.d(e,"a",(function(){return I}));var i=n("mrSG"),a=n("fXoL"),r=n("FKr1"),o=n("0IaG"),s=n("3Pt+"),l=n("gmuX"),c=n("BsGH"),d=n("l7P3"),p=n("tyNb"),u=n("/t3+"),m=n("XiUz"),f=n("bTqV"),h=n("NFeN"),g=n("ofXK"),y=n("kmnG"),b=n("sYmb"),v=n("qFsG"),x=n("4t+N"),C=n("bv9b");function S(t,e){1&t&&a["\u0275\u0275element"](0,"mat-progress-bar",17)}function w(t,e){1&t&&a["\u0275\u0275element"](0,"div",18)}function E(t,e){1&t&&(a["\u0275\u0275elementStart"](0,"mat-error"),a["\u0275\u0275text"](1),a["\u0275\u0275pipe"](2,"translate"),a["\u0275\u0275elementEnd"]()),2&t&&(a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](2,1,"attribute.key-required")," "))}var I=function(t){function e(e,n,i,a,r,o,s){var l=t.call(this,e,n,o)||this;return l.store=e,l.router=n,l.data=i,l.attributeService=a,l.errorStateMatcher=r,l.dialogRef=o,l.fb=s,l.submitted=!1,l}return Object(i.d)(e,t),e.prototype.ngOnInit=function(){this.attributeFormGroup=this.fb.group({key:["",[s.Validators.required]],value:[null,[s.Validators.required]]})},e.prototype.isErrorState=function(t,e){var n=this.errorStateMatcher.isErrorState(t,e),i=!!(t&&t.invalid&&this.submitted);return n||i},e.prototype.cancel=function(){this.dialogRef.close(!1)},e.prototype.add=function(){var t=this;this.submitted=!0;var e={lastUpdateTs:null,key:this.attributeFormGroup.get("key").value.trim(),value:this.attributeFormGroup.get("value").value};this.attributeService.saveEntityAttributes(this.data.entityId,this.data.attributeScope,[e]).subscribe((function(){t.dialogRef.close(!0)}))},e.\u0275fac=function(t){return new(t||e)(a["\u0275\u0275directiveInject"](d.Store),a["\u0275\u0275directiveInject"](p.Router),a["\u0275\u0275directiveInject"](o.MAT_DIALOG_DATA),a["\u0275\u0275directiveInject"](c.a),a["\u0275\u0275directiveInject"](r.ErrorStateMatcher,4),a["\u0275\u0275directiveInject"](o.MatDialogRef),a["\u0275\u0275directiveInject"](s.FormBuilder))},e.\u0275cmp=a["\u0275\u0275defineComponent"]({type:e,selectors:[["tb-add-attribute-dialog"]],features:[a["\u0275\u0275ProvidersFeature"]([{provide:r.ErrorStateMatcher,useExisting:e}]),a["\u0275\u0275InheritDefinitionFeature"]],decls:31,vars:26,consts:[[2,"min-width","400px",3,"formGroup","ngSubmit"],["color","primary"],["fxFlex",""],["mat-button","","mat-icon-button","","type","button",3,"click"],[1,"material-icons"],["color","warn","mode","indeterminate",4,"ngIf"],["style","height: 4px;",4,"ngIf"],["mat-dialog-content",""],[3,"disabled"],[1,"mat-block"],["translate",""],["matInput","","formControlName","key","required",""],[4,"ngIf"],["formControlName","value","requiredText","attribute.value-required"],["mat-dialog-actions","","fxLayoutAlign","end center"],["mat-button","","color","primary","type","button","cdkFocusInitial","",3,"disabled","click"],["mat-raised-button","","color","primary","type","submit",3,"disabled"],["color","warn","mode","indeterminate"],[2,"height","4px"]],template:function(t,e){1&t&&(a["\u0275\u0275elementStart"](0,"form",0),a["\u0275\u0275listener"]("ngSubmit",(function(){return e.add()})),a["\u0275\u0275elementStart"](1,"mat-toolbar",1),a["\u0275\u0275elementStart"](2,"h2"),a["\u0275\u0275text"](3),a["\u0275\u0275pipe"](4,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](5,"span",2),a["\u0275\u0275elementStart"](6,"button",3),a["\u0275\u0275listener"]("click",(function(){return e.cancel()})),a["\u0275\u0275elementStart"](7,"mat-icon",4),a["\u0275\u0275text"](8,"close"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275template"](9,S,1,0,"mat-progress-bar",5),a["\u0275\u0275pipe"](10,"async"),a["\u0275\u0275template"](11,w,1,0,"div",6),a["\u0275\u0275pipe"](12,"async"),a["\u0275\u0275elementStart"](13,"div",7),a["\u0275\u0275elementStart"](14,"fieldset",8),a["\u0275\u0275pipe"](15,"async"),a["\u0275\u0275elementStart"](16,"mat-form-field",9),a["\u0275\u0275elementStart"](17,"mat-label",10),a["\u0275\u0275text"](18,"attribute.key"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](19,"input",11),a["\u0275\u0275template"](20,E,3,3,"mat-error",12),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](21,"tb-value-input",13),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](22,"div",14),a["\u0275\u0275elementStart"](23,"button",15),a["\u0275\u0275listener"]("click",(function(){return e.cancel()})),a["\u0275\u0275pipe"](24,"async"),a["\u0275\u0275text"](25),a["\u0275\u0275pipe"](26,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](27,"button",16),a["\u0275\u0275pipe"](28,"async"),a["\u0275\u0275text"](29),a["\u0275\u0275pipe"](30,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()),2&t&&(a["\u0275\u0275property"]("formGroup",e.attributeFormGroup),a["\u0275\u0275advance"](3),a["\u0275\u0275textInterpolate"](a["\u0275\u0275pipeBind1"](4,10,"attribute.add")),a["\u0275\u0275advance"](6),a["\u0275\u0275property"]("ngIf",a["\u0275\u0275pipeBind1"](10,12,e.isLoading$)),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("ngIf",!a["\u0275\u0275pipeBind1"](12,14,e.isLoading$)),a["\u0275\u0275advance"](3),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](15,16,e.isLoading$)),a["\u0275\u0275advance"](6),a["\u0275\u0275property"]("ngIf",e.attributeFormGroup.get("key").hasError("required")),a["\u0275\u0275advance"](3),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](24,18,e.isLoading$)),a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](26,20,"action.cancel")," "),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](28,22,e.isLoading$)||e.attributeFormGroup.invalid||!e.attributeFormGroup.dirty),a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](30,24,"action.add")," "))},directives:[s["\u0275angular_packages_forms_forms_y"],s.NgControlStatusGroup,s.FormGroupDirective,u.MatToolbar,m.b,f.MatButton,h.MatIcon,g.NgIf,o.MatDialogContent,y.MatFormField,y.MatLabel,b.TranslateDirective,v.MatInput,s.DefaultValueAccessor,s.NgControlStatus,s.FormControlName,s.RequiredValidator,x.a,o.MatDialogActions,m.e,C.MatProgressBar,y.MatError],pipes:[b.TranslatePipe,g.AsyncPipe],encapsulation:2}),e}(l.a);!function(){a["\u0275setClassMetadata"](I,[{type:a.Component,args:[{selector:"tb-add-attribute-dialog",templateUrl:"./add-attribute-dialog.component.html",providers:[{provide:r.ErrorStateMatcher,useExisting:I}],styleUrls:[]}]}],(function(){return[{type:d.Store},{type:p.Router},{type:void 0,decorators:[{type:a.Inject,args:[o.MAT_DIALOG_DATA]}]},{type:c.a},{type:r.ErrorStateMatcher,decorators:[{type:a.SkipSelf}]},{type:o.MatDialogRef},{type:s.FormBuilder}]}),null)}()},NEMC:function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return r}));var i,a=n("mrSG");function r(t){var e=null;if(t)switch(t){case i.DEFAULT:e=Object(a.a)(Object(a.a)({},{maxDevices:0,maxAssets:0,maxCustomers:0,maxUsers:0,maxDashboards:0,maxRuleChains:0,maxTransportMessages:0,maxTransportDataPoints:0,maxREExecutions:0,maxJSExecutions:0,maxDPStorageDays:0,maxRuleNodeExecutionsPerMessage:0,maxEmails:0,maxSms:0,defaultStorageTtlDays:0}),{type:i.DEFAULT})}return e}!function(t){t.DEFAULT="DEFAULT"}(i||(i={}))},"NHP+":function(t,e,n){"use strict";n.d(e,"a",(function(){return p}));var i=n("1OyB"),a=n("vuIU"),r=n("ReuC"),o=n("foSv"),s=n("Ji7U"),l=n("LK+K"),c=n("XNiG"),d=n("quSY"),p=function(t){Object(s.a)(n,t);var e=Object(l.a)(n);function n(){var t;return Object(i.a)(this,n),(t=e.apply(this,arguments)).value=null,t.hasNext=!1,t.hasCompleted=!1,t}return Object(a.a)(n,[{key:"_subscribe",value:function(t){return this.hasError?(t.error(this.thrownError),d.a.EMPTY):this.hasCompleted&&this.hasNext?(t.next(this.value),t.complete(),d.a.EMPTY):Object(r.a)(Object(o.a)(n.prototype),"_subscribe",this).call(this,t)}},{key:"next",value:function(t){this.hasCompleted||(this.value=t,this.hasNext=!0)}},{key:"error",value:function(t){this.hasCompleted||Object(r.a)(Object(o.a)(n.prototype),"error",this).call(this,t)}},{key:"complete",value:function(){this.hasCompleted=!0,this.hasNext&&Object(r.a)(Object(o.a)(n.prototype),"next",this).call(this,this.value),Object(r.a)(Object(o.a)(n.prototype),"complete",this).call(this)}}]),n}(c.b)},NPtW:function(t,e,n){"use strict";n.d(e,"a",(function(){return l}));var i=n("fXoL"),a=n("3Pt+"),r=n("8LU1"),o=n("JIJk"),s=n("l7P3"),l=function(){function t(t,e){this.store=t,this.fb=e,this.propagateChange=function(t){}}return Object.defineProperty(t.prototype,"required",{get:function(){return this.requiredValue},set:function(t){this.requiredValue=Object(r.coerceBooleanProperty)(t)},enumerable:!1,configurable:!0}),t.prototype.registerOnChange=function(t){this.propagateChange=t},t.prototype.registerOnTouched=function(t){},t.prototype.ngOnInit=function(){var t=this;this.defaultDeviceProfileConfigurationFormGroup=this.fb.group({configuration:[null,a.Validators.required]}),this.defaultDeviceProfileConfigurationFormGroup.valueChanges.subscribe((function(){t.updateModel()}))},t.prototype.setDisabledState=function(t){this.disabled=t,this.disabled?this.defaultDeviceProfileConfigurationFormGroup.disable({emitEvent:!1}):this.defaultDeviceProfileConfigurationFormGroup.enable({emitEvent:!1})},t.prototype.writeValue=function(t){this.defaultDeviceProfileConfigurationFormGroup.patchValue({configuration:t},{emitEvent:!1})},t.prototype.updateModel=function(){var t=null;this.defaultDeviceProfileConfigurationFormGroup.valid&&((t=this.defaultDeviceProfileConfigurationFormGroup.getRawValue().configuration).type=o.h.DEFAULT),this.propagateChange(t)},t.\u0275fac=function(e){return new(e||t)(i["\u0275\u0275directiveInject"](s.Store),i["\u0275\u0275directiveInject"](a.FormBuilder))},t.\u0275cmp=i["\u0275\u0275defineComponent"]({type:t,selectors:[["tb-default-device-profile-configuration"]],inputs:{required:"required",disabled:"disabled"},features:[i["\u0275\u0275ProvidersFeature"]([{provide:a.NG_VALUE_ACCESSOR,useExisting:Object(i.forwardRef)((function(){return t})),multi:!0}])],decls:1,vars:1,consts:[[2,"padding-bottom","16px",3,"formGroup"]],template:function(t,e){1&t&&i["\u0275\u0275element"](0,"form",0),2&t&&i["\u0275\u0275property"]("formGroup",e.defaultDeviceProfileConfigurationFormGroup)},directives:[a["\u0275angular_packages_forms_forms_y"],a.NgControlStatusGroup,a.FormGroupDirective],encapsulation:2}),t}();!function(){i["\u0275setClassMetadata"](l,[{type:i.Component,args:[{selector:"tb-default-device-profile-configuration",templateUrl:"./default-device-profile-configuration.component.html",styleUrls:[],providers:[{provide:a.NG_VALUE_ACCESSOR,useExisting:Object(i.forwardRef)((function(){return l})),multi:!0}]}]}],(function(){return[{type:s.Store},{type:a.FormBuilder}]}),{required:[{type:i.Input}],disabled:[{type:i.Input}]})}()},Neop:function(t,e,n){"use strict";var i=function(){this.cssImportStatements=[],this.cssKeyframeStatements=[],this.cssRegex=new RegExp("([\\s\\S]*?){([\\s\\S]*?)}","gi"),this.cssMediaQueryRegex="((@media [\\s\\S]*?){([\\s\\S]*?}\\s*?)})",this.cssKeyframeRegex="((@.*?keyframes [\\s\\S]*?){([\\s\\S]*?}\\s*?)})",this.combinedCSSRegex="((\\s*?@media[\\s\\S]*?){([\\s\\S]*?)}\\s*?})|(([\\s\\S]*?){([\\s\\S]*?)})",this.cssCommentsRegex="(\\/\\*[\\s\\S]*?\\*\\/)",this.cssImportStatementRegex=new RegExp("@import .*?;","gi")};i.prototype.stripComments=function(t){var e=new RegExp(this.cssCommentsRegex,"gi");return t.replace(e,"")},i.prototype.parseCSS=function(t){if(void 0===t)return[];for(var e=[];;){var n=this.cssImportStatementRegex.exec(t);if(null===n)break;this.cssImportStatements.push(n[0]),e.push({selector:"@imports",type:"imports",styles:n[0]})}t=t.replace(this.cssImportStatementRegex,"");for(var i,a=new RegExp(this.cssKeyframeRegex,"gi");null!==(i=a.exec(t));)e.push({selector:"@keyframes",type:"keyframes",styles:i[0]});t=t.replace(a,"");for(var r=new RegExp(this.combinedCSSRegex,"gi");null!==(i=r.exec(t));){var o="";o=void 0===i[2]?i[5].split("\r\n").join("\n").trim():i[2].split("\r\n").join("\n").trim();var s=new RegExp(this.cssCommentsRegex,"gi"),l=s.exec(o);if(null!==l&&(o=o.replace(s,"").trim()),-1!==o.indexOf("@media")){var c={selector:o,type:"media",subStyles:this.parseCSS(i[3]+"\n}")};null!==l&&(c.comments=l[0]),e.push(c)}else{var d={selector:o,rules:this.parseRules(i[6])};"@font-face"===o&&(d.type="font-face"),null!==l&&(d.comments=l[0]),e.push(d)}}return e},i.prototype.parseRules=function(t){var e=[];t=(t=t.split("\r\n").join("\n")).split(/;(?![^\(]*\))/);for(var n=0;n<t.length;n++){var i=t[n];if(-1!==(i=i.trim()).indexOf(":")){var a=(i=i.split(":"))[0].trim(),r=i.slice(1).join(":").trim();if(a.length<1||r.length<1)continue;e.push({directive:a,value:r})}else"base64,"==i.trim().substr(0,7)?e[e.length-1].value+=i.trim():i.length>0&&e.push({directive:"",value:i,defective:!0})}return e},i.prototype.findCorrespondingRule=function(t,e,n){void 0===n&&(n=!1);for(var i=!1,a=0;a<t.length&&(t[a].directive!=e||(i=t[a],n!==t[a].value));a++);return i},i.prototype.findBySelector=function(t,e,n){void 0===n&&(n=!1);for(var i=[],a=0;a<t.length;a++)!1===n?t[a].selector===e&&i.push(t[a]):-1!==t[a].selector.indexOf(e)&&i.push(t[a]);if(i.length<2)return i;var r=i[0];for(a=1;a<i.length;a++)this.intelligentCSSPush([r],i[a]);return[r]},i.prototype.deleteBySelector=function(t,e){for(var n=[],i=0;i<t.length;i++)t[i].selector!==e&&n.push(t[i]);return n},i.prototype.compressCSS=function(t){for(var e=[],n={},i=0;i<t.length;i++){var a=t[i];if(!0!==n[a.selector]){var r=this.findBySelector(t,a.selector);0!==r.length&&(e.push(r[0]),n[a.selector]=!0)}}return e},i.prototype.cssDiff=function(t,e){if(t.selector!==e.selector)return!1;if("media"===t.type||"media"===e.type)return!1;for(var n,i,a={selector:t.selector,rules:[]},r=0;r<t.rules.length;r++)n=t.rules[r],(!1===(i=this.findCorrespondingRule(e.rules,n.directive,n.value))||n.value!==i.value)&&a.rules.push(n);for(var o=0;o<e.rules.length;o++)i=e.rules[o],!1===(n=this.findCorrespondingRule(t.rules,i.directive))&&(i.type="DELETED",a.rules.push(i));return 0!==a.rules.length&&a},i.prototype.intelligentMerge=function(t,e,n){void 0===n&&(n=!1);for(var i=0;i<e.length;i++)this.intelligentCSSPush(t,e[i],n);for(i=0;i<t.length;i++){var a=t[i];"media"!==a.type&&"keyframes"!==a.type&&(a.rules=this.compactRules(a.rules))}},i.prototype.intelligentCSSPush=function(t,e,n){e.selector;var i=!1;if(void 0===n&&(n=!1),!1===n){for(var a=0;a<t.length;a++)if(t[a].selector===e.selector){i=t[a];break}}else for(var r=t.length-1;r>-1;r--)if(t[r].selector===e.selector){i=t[r];break}if(!1===i)t.push(e);else if("media"!==e.type)for(var o=0;o<e.rules.length;o++){var s=e.rules[o],l=this.findCorrespondingRule(i.rules,s.directive);!1===l?i.rules.push(s):"DELETED"==s.type?l.type="DELETED":l.value=s.value}else i.subStyles=e.subStyles},i.prototype.compactRules=function(t){for(var e=[],n=0;n<t.length;n++)"DELETED"!==t[n].type&&e.push(t[n]);return e},i.prototype.getCSSForEditor=function(t,e){void 0===e&&(e=0);var n="";void 0===t&&(t=this.css);for(var i=0;i<t.length;i++)"imports"==t[i].type&&(n+=t[i].styles+"\n\n");for(i=0;i<t.length;i++){var a=t[i];if(void 0!==a.selector){var r="";void 0!==a.comments&&(r=a.comments+"\n"),"media"==a.type?(n+=r+a.selector+"{\n",n+=this.getCSSForEditor(a.subStyles,e+1),n+="}\n\n"):"keyframes"!==a.type&&"imports"!==a.type&&(n+=this.getSpaces(e)+r+a.selector+" {\n",n+=this.getCSSOfRules(a.rules,e+1),n+=this.getSpaces(e)+"}\n\n")}}for(i=0;i<t.length;i++)"keyframes"==t[i].type&&(n+=t[i].styles+"\n\n");return n},i.prototype.getImports=function(t){for(var e=[],n=0;n<t.length;n++)"imports"==t[n].type&&e.push(t[n].styles);return e},i.prototype.getCSSOfRules=function(t,e){for(var n="",i=0;i<t.length;i++)void 0!==t[i]&&(void 0===t[i].defective?n+=this.getSpaces(e)+t[i].directive+" : "+t[i].value+";\n":n+=this.getSpaces(e)+t[i].value+";\n");return n||"\n"},i.prototype.getSpaces=function(t){for(var e="",n=0;n<4*t;n++)e+=" ";return e},i.prototype.applyNamespacing=function(t,e){var n=t,i="."+this.cssPreviewNamespace;void 0!==e&&(i=e),"string"==typeof t&&(n=this.parseCSS(t));for(var a=0;a<n.length;a++){var r=n[a];if(!(r.selector.indexOf("@font-face")>-1||r.selector.indexOf("keyframes")>-1||r.selector.indexOf("@import")>-1||r.selector.indexOf(".form-all")>-1||r.selector.indexOf("#stage")>-1))if("media"!==r.type){for(var o=r.selector.split(","),s=[],l=0;l<o.length;l++)-1===o[l].indexOf(".supernova")?s.push(i+" "+o[l]):s.push(o[l]);r.selector=s.join(",")}else r.subStyles=this.applyNamespacing(r.subStyles,e)}return n},i.prototype.clearNamespacing=function(t,e){void 0===e&&(e=!1);var n=t,i="."+this.cssPreviewNamespace;"string"==typeof t&&(n=this.parseCSS(t));for(var a=0;a<n.length;a++){var r=n[a];if("media"!==r.type){for(var o=r.selector.split(","),s=[],l=0;l<o.length;l++)s.push(o[l].split(i+" ").join(""));r.selector=s.join(",")}else r.subStyles=this.clearNamespacing(r.subStyles,!0)}return!1===e?this.getCSSForEditor(n):n},i.prototype.createStyleElement=function(t,e,n){if(void 0===n&&(n=!1),!1===this.testMode&&"nonamespace"!==n&&(e=this.applyNamespacing(e)),"string"!=typeof e&&(e=this.getCSSForEditor(e)),!0===n&&(e=this.getCSSForEditor(this.parseCSS(e))),!1!==this.testMode)return this.testMode("create style #"+t,e);var i=document.getElementById(t);i&&i.parentNode.removeChild(i);var a=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.id=t,r.type="text/css",a.appendChild(r),r.styleSheet&&!r.sheet?r.styleSheet.cssText=e:r.appendChild(document.createTextNode(e))},e.a=i},Nv8m:function(t,e,n){"use strict";n.d(e,"a",(function(){return p}));var i=n("Ji7U"),a=n("LK+K"),r=n("1OyB"),o=n("vuIU"),s=n("DH7j"),l=n("yCtX"),c=n("l7GE"),d=n("ZUHj");function p(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];if(1===e.length){if(!Object(s.a)(e[0]))return e[0];e=e[0]}return Object(l.a)(e,void 0).lift(new u)}var u=function(){function t(){Object(r.a)(this,t)}return Object(o.a)(t,[{key:"call",value:function(t,e){return e.subscribe(new m(t))}}]),t}(),m=function(t){Object(i.a)(n,t);var e=Object(a.a)(n);function n(t){var i;return Object(r.a)(this,n),(i=e.call(this,t)).hasFirst=!1,i.observables=[],i.subscriptions=[],i}return Object(o.a)(n,[{key:"_next",value:function(t){this.observables.push(t)}},{key:"_complete",value:function(){var t=this.observables,e=t.length;if(0===e)this.destination.complete();else{for(var n=0;n<e&&!this.hasFirst;n++){var i=t[n],a=Object(d.a)(this,i,void 0,n);this.subscriptions&&this.subscriptions.push(a),this.add(a)}this.observables=null}}},{key:"notifyNext",value:function(t,e,n){if(!this.hasFirst){this.hasFirst=!0;for(var i=0;i<this.subscriptions.length;i++)if(i!==n){var a=this.subscriptions[i];a.unsubscribe(),this.remove(a)}this.subscriptions=null}this.destination.next(e)}}]),n}(c.a)},Nw2X:function(t,e,n){"use strict";n.d(e,"a",(function(){return w}));var i=n("mrSG"),a=n("fXoL"),r=n("FKr1"),o=n("0IaG"),s=n("gmuX"),l=n("oook"),c=n("vnPf"),d=n("l7P3"),p=n("tyNb"),u=n("3Pt+"),m=n("/t3+"),f=n("XiUz"),h=n("bTqV"),g=n("NFeN"),y=n("ofXK"),b=n("bv9b"),v=n("sYmb"),x=["tenantProfileComponent"];function C(t,e){1&t&&a["\u0275\u0275element"](0,"mat-progress-bar",13)}function S(t,e){1&t&&a["\u0275\u0275element"](0,"div",14)}var w=function(t){function e(e,n,i,a,r,o,s,l){var c=t.call(this,e,n,a)||this;return c.store=e,c.router=n,c.data=i,c.dialogRef=a,c.componentFactoryResolver=r,c.injector=o,c.errorStateMatcher=s,c.tenantProfileService=l,c.submitted=!1,c.isAdd=c.data.isAdd,c.tenantProfile=c.data.tenantProfile,c}return Object(i.d)(e,t),e.prototype.ngAfterViewInit=function(){var t=this;this.isAdd&&setTimeout((function(){t.tenantProfileComponent.entityForm.markAsDirty()}),0)},e.prototype.isErrorState=function(t,e){var n=this.errorStateMatcher.isErrorState(t,e),i=!!(t&&t.invalid&&this.submitted);return n||i},e.prototype.cancel=function(){this.dialogRef.close(null)},e.prototype.save=function(){var t=this;this.submitted=!0,this.tenantProfileComponent.entityForm.valid&&(this.tenantProfile=Object(i.a)(Object(i.a)({},this.tenantProfile),this.tenantProfileComponent.entityFormValue()),this.tenantProfileService.saveTenantProfile(this.tenantProfile).subscribe((function(e){t.dialogRef.close(e)})))},e.\u0275fac=function(t){return new(t||e)(a["\u0275\u0275directiveInject"](d.Store),a["\u0275\u0275directiveInject"](p.Router),a["\u0275\u0275directiveInject"](o.MAT_DIALOG_DATA),a["\u0275\u0275directiveInject"](o.MatDialogRef),a["\u0275\u0275directiveInject"](a.ComponentFactoryResolver),a["\u0275\u0275directiveInject"](a.Injector),a["\u0275\u0275directiveInject"](r.ErrorStateMatcher,4),a["\u0275\u0275directiveInject"](c.a))},e.\u0275cmp=a["\u0275\u0275defineComponent"]({type:e,selectors:[["tb-tenant-profile-dialog"]],viewQuery:function(t,e){var n;(1&t&&a["\u0275\u0275staticViewQuery"](x,!0),2&t)&&(a["\u0275\u0275queryRefresh"](n=a["\u0275\u0275loadQuery"]())&&(e.tenantProfileComponent=n.first))},features:[a["\u0275\u0275ProvidersFeature"]([{provide:r.ErrorStateMatcher,useExisting:e}]),a["\u0275\u0275InheritDefinitionFeature"]],decls:25,vars:24,consts:[[2,"width","600px",3,"ngSubmit"],["color","primary"],["fxFlex",""],["mat-icon-button","","type","button",3,"click"],[1,"material-icons"],["color","warn","mode","indeterminate",4,"ngIf"],["style","height: 4px;",4,"ngIf"],["mat-dialog-content",""],[3,"standalone","entity","isEdit"],["tenantProfileComponent",""],["mat-dialog-actions","","fxLayoutAlign","end center"],["mat-button","","color","primary","type","button","cdkFocusInitial","",3,"disabled","click"],["mat-raised-button","","color","primary","type","submit",3,"disabled"],["color","warn","mode","indeterminate"],[2,"height","4px"]],template:function(t,e){if(1&t&&(a["\u0275\u0275elementStart"](0,"form",0),a["\u0275\u0275listener"]("ngSubmit",(function(){return e.save()})),a["\u0275\u0275elementStart"](1,"mat-toolbar",1),a["\u0275\u0275elementStart"](2,"h2"),a["\u0275\u0275text"](3),a["\u0275\u0275pipe"](4,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](5,"span",2),a["\u0275\u0275elementStart"](6,"button",3),a["\u0275\u0275listener"]("click",(function(){return e.cancel()})),a["\u0275\u0275elementStart"](7,"mat-icon",4),a["\u0275\u0275text"](8,"close"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275template"](9,C,1,0,"mat-progress-bar",5),a["\u0275\u0275pipe"](10,"async"),a["\u0275\u0275template"](11,S,1,0,"div",6),a["\u0275\u0275pipe"](12,"async"),a["\u0275\u0275elementStart"](13,"div",7),a["\u0275\u0275element"](14,"tb-tenant-profile",8,9),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](16,"div",10),a["\u0275\u0275elementStart"](17,"button",11),a["\u0275\u0275listener"]("click",(function(){return e.cancel()})),a["\u0275\u0275pipe"](18,"async"),a["\u0275\u0275text"](19),a["\u0275\u0275pipe"](20,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](21,"button",12),a["\u0275\u0275pipe"](22,"async"),a["\u0275\u0275text"](23),a["\u0275\u0275pipe"](24,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()),2&t){var n=a["\u0275\u0275reference"](15);a["\u0275\u0275advance"](3),a["\u0275\u0275textInterpolate"](a["\u0275\u0275pipeBind1"](4,10,e.isAdd?"tenant-profile.add":"tenant-profile.edit")),a["\u0275\u0275advance"](6),a["\u0275\u0275property"]("ngIf",a["\u0275\u0275pipeBind1"](10,12,e.isLoading$)),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("ngIf",!a["\u0275\u0275pipeBind1"](12,14,e.isLoading$)),a["\u0275\u0275advance"](3),a["\u0275\u0275property"]("standalone",!0)("entity",e.tenantProfile)("isEdit",!0),a["\u0275\u0275advance"](3),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](18,16,e.isLoading$)),a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](20,18,"action.cancel")," "),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](22,20,e.isLoading$)||(null==n.entityForm?null:n.entityForm.invalid)||!(null!=n.entityForm&&n.entityForm.dirty)),a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](24,22,e.isAdd?"action.add":"action.save")," ")}},directives:[u["\u0275angular_packages_forms_forms_y"],u.NgControlStatusGroup,u.NgForm,m.MatToolbar,f.b,h.MatButton,g.MatIcon,y.NgIf,o.MatDialogContent,l.a,o.MatDialogActions,f.e,b.MatProgressBar],pipes:[v.TranslatePipe,y.AsyncPipe],encapsulation:2}),e}(s.a);!function(){a["\u0275setClassMetadata"](w,[{type:a.Component,args:[{selector:"tb-tenant-profile-dialog",templateUrl:"./tenant-profile-dialog.component.html",providers:[{provide:r.ErrorStateMatcher,useExisting:w}],styleUrls:[]}]}],(function(){return[{type:d.Store},{type:p.Router},{type:void 0,decorators:[{type:a.Inject,args:[o.MAT_DIALOG_DATA]}]},{type:o.MatDialogRef},{type:a.ComponentFactoryResolver},{type:a.Injector},{type:r.ErrorStateMatcher,decorators:[{type:a.SkipSelf}]},{type:c.a}]}),{tenantProfileComponent:[{type:a.ViewChild,args:["tenantProfileComponent",{static:!0}]}]})}()},O5Hl:function(t,e,n){"use strict";n.d(e,"a",(function(){return bt}));var i=n("mrSG"),a=n("FtGj"),r=n("fXoL"),o=n("3Pt+"),s=n("LRne"),l=n("vkgz"),c=n("pLZG"),d=n("lJxs"),p=n("5+tZ"),u=n("w1tV"),m=n("05l1"),f=n("x+ZX"),h=n("8LU1"),g=n("3Tyt"),y=n("0lYY"),b=n("UZbx"),v=n("OiFK"),x=n("FKr1"),C=n("T4sd"),S=n("S+vS"),w=n("jhTr"),E=n("//Q6"),I=n("l7P3"),O=n("sYmb"),T=n("0IaG"),M=n("kmnG"),F=n("A5z7"),P=n("2+wj"),D=n("ofXK"),k=n("qFsG"),j=n("/1cH"),A=n("XiUz"),_=n("znSr"),L=n("NFeN"),V=n("Qu3c"),R=n("bTqV"),N=n("d5eY"),G=["keyInput"],B=["keyAutocomplete"],U=["chipList"];function q(t,e){1&t&&(r["\u0275\u0275elementStart"](0,"div",24),r["\u0275\u0275elementStart"](1,"mat-icon",25),r["\u0275\u0275text"](2,"drag_handle"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]())}function W(t,e){1&t&&(r["\u0275\u0275elementStart"](0,"span",27),r["\u0275\u0275pipe"](1,"translate"),r["\u0275\u0275elementStart"](2,"mat-icon",25),r["\u0275\u0275text"](3,"notifications"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()),2&t&&r["\u0275\u0275propertyInterpolate"]("matTooltip",r["\u0275\u0275pipeBind1"](1,1,"datakey.alarm"))}function z(t,e){1&t&&(r["\u0275\u0275elementStart"](0,"span",27),r["\u0275\u0275pipe"](1,"translate"),r["\u0275\u0275element"](2,"mat-icon",28),r["\u0275\u0275elementEnd"]()),2&t&&r["\u0275\u0275propertyInterpolate"]("matTooltip",r["\u0275\u0275pipeBind1"](1,1,"datakey.attributes"))}function K(t,e){1&t&&(r["\u0275\u0275elementStart"](0,"span",27),r["\u0275\u0275pipe"](1,"translate"),r["\u0275\u0275element"](2,"mat-icon",29),r["\u0275\u0275elementEnd"]()),2&t&&r["\u0275\u0275propertyInterpolate"]("matTooltip",r["\u0275\u0275pipeBind1"](1,1,"datakey.entity-field"))}function H(t,e){1&t&&(r["\u0275\u0275elementStart"](0,"span",27),r["\u0275\u0275pipe"](1,"translate"),r["\u0275\u0275elementStart"](2,"mat-icon",25),r["\u0275\u0275text"](3,"timeline"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()),2&t&&r["\u0275\u0275propertyInterpolate"]("matTooltip",r["\u0275\u0275pipeBind1"](1,1,"datakey.timeseries"))}function $(t,e){if(1&t&&(r["\u0275\u0275elementStart"](0,"span"),r["\u0275\u0275template"](1,W,4,3,"span",26),r["\u0275\u0275template"](2,z,3,3,"span",26),r["\u0275\u0275template"](3,K,3,3,"span",26),r["\u0275\u0275template"](4,H,4,3,"span",26),r["\u0275\u0275elementEnd"]()),2&t){var n=r["\u0275\u0275nextContext"]().$implicit,i=r["\u0275\u0275nextContext"]();r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",n.type===i.dataKeyTypes.alarm),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",n.type===i.dataKeyTypes.attribute),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",n.type===i.dataKeyTypes.entityField),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",n.type===i.dataKeyTypes.timeseries)}}function Q(t,e){if(1&t&&(r["\u0275\u0275elementStart"](0,"strong"),r["\u0275\u0275text"](1),r["\u0275\u0275elementEnd"]()),2&t){var n=r["\u0275\u0275nextContext"]().$implicit;r["\u0275\u0275advance"](1),r["\u0275\u0275textInterpolate1"]("f(",n.name,")")}}function X(t,e){if(1&t&&(r["\u0275\u0275elementStart"](0,"strong"),r["\u0275\u0275text"](1),r["\u0275\u0275elementEnd"]()),2&t){var n=r["\u0275\u0275nextContext"]().$implicit;r["\u0275\u0275advance"](1),r["\u0275\u0275textInterpolate"](n.name)}}function Y(t,e){if(1&t){var n=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"button",30),r["\u0275\u0275listener"]("click",(function(){r["\u0275\u0275restoreView"](n);var t=r["\u0275\u0275nextContext"](),e=t.$implicit,i=t.index;return r["\u0275\u0275nextContext"]().editDataKey(e,i)})),r["\u0275\u0275elementStart"](1,"mat-icon",25),r["\u0275\u0275text"](2,"edit"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()}}function J(t,e){1&t&&(r["\u0275\u0275elementStart"](0,"mat-icon",31),r["\u0275\u0275text"](1,"close"),r["\u0275\u0275elementEnd"]())}var Z=function(t){return{background:t}};function tt(t,e){if(1&t){var n=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"mat-chip",12),r["\u0275\u0275listener"]("removed",(function(){r["\u0275\u0275restoreView"](n);var t=e.$implicit;return r["\u0275\u0275nextContext"]().remove(t)})),r["\u0275\u0275elementStart"](1,"div",13),r["\u0275\u0275template"](2,q,3,0,"div",14),r["\u0275\u0275elementStart"](3,"div",15),r["\u0275\u0275listener"]("click",(function(){r["\u0275\u0275restoreView"](n);var t=e.$implicit;return r["\u0275\u0275nextContext"]().showColorPicker(t)})),r["\u0275\u0275element"](4,"div",16),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](5,"div",17),r["\u0275\u0275elementStart"](6,"div",18),r["\u0275\u0275template"](7,$,5,4,"span",10),r["\u0275\u0275text"](8),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](9,"div",19),r["\u0275\u0275text"](10,": "),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](11,"div",18),r["\u0275\u0275template"](12,Q,2,1,"strong",20),r["\u0275\u0275template"](13,X,2,1,"ng-template",null,21,r["\u0275\u0275templateRefExtractor"]),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275template"](15,Y,3,0,"button",22),r["\u0275\u0275template"](16,J,2,0,"mat-icon",23),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()}if(2&t){var i=e.$implicit,a=r["\u0275\u0275reference"](14),o=r["\u0275\u0275nextContext"]();r["\u0275\u0275property"]("selectable",!o.disabled)("removable",!o.disabled&&!o.isEntityCountDatasource),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("ngIf",!o.disabled),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("ngStyle",r["\u0275\u0275pureFunction1"](10,Z,i.color)),r["\u0275\u0275advance"](3),r["\u0275\u0275property"]("ngIf",o.datasourceType===o.datasourceTypes.entity),r["\u0275\u0275advance"](1),r["\u0275\u0275textInterpolate1"](" ",i.label," "),r["\u0275\u0275advance"](4),r["\u0275\u0275property"]("ngIf",o.datasourceType!==o.datasourceTypes.function&&i.postFuncBody)("ngIfElse",a),r["\u0275\u0275advance"](3),r["\u0275\u0275property"]("ngIf",!o.disabled),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",!o.disabled&&!o.isEntityCountDatasource)}}function et(t,e){1&t&&(r["\u0275\u0275elementStart"](0,"span",27),r["\u0275\u0275pipe"](1,"translate"),r["\u0275\u0275elementStart"](2,"mat-icon",35),r["\u0275\u0275text"](3,"notifications"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()),2&t&&r["\u0275\u0275propertyInterpolate"]("matTooltip",r["\u0275\u0275pipeBind1"](1,1,"datakey.alarm"))}function nt(t,e){1&t&&(r["\u0275\u0275elementStart"](0,"span",27),r["\u0275\u0275pipe"](1,"translate"),r["\u0275\u0275element"](2,"mat-icon",36),r["\u0275\u0275elementEnd"]()),2&t&&r["\u0275\u0275propertyInterpolate"]("matTooltip",r["\u0275\u0275pipeBind1"](1,1,"datakey.attributes"))}function it(t,e){1&t&&(r["\u0275\u0275elementStart"](0,"span",27),r["\u0275\u0275pipe"](1,"translate"),r["\u0275\u0275element"](2,"mat-icon",37),r["\u0275\u0275elementEnd"]()),2&t&&r["\u0275\u0275propertyInterpolate"]("matTooltip",r["\u0275\u0275pipeBind1"](1,1,"datakey.entity-field"))}function at(t,e){1&t&&(r["\u0275\u0275elementStart"](0,"span",27),r["\u0275\u0275pipe"](1,"translate"),r["\u0275\u0275elementStart"](2,"mat-icon",35),r["\u0275\u0275text"](3,"timeline"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()),2&t&&r["\u0275\u0275propertyInterpolate"]("matTooltip",r["\u0275\u0275pipeBind1"](1,1,"datakey.timeseries"))}function rt(t,e){if(1&t&&(r["\u0275\u0275elementStart"](0,"span"),r["\u0275\u0275template"](1,et,4,3,"span",26),r["\u0275\u0275template"](2,nt,3,3,"span",26),r["\u0275\u0275template"](3,it,3,3,"span",26),r["\u0275\u0275template"](4,at,4,3,"span",26),r["\u0275\u0275elementEnd"]()),2&t){var n=r["\u0275\u0275nextContext"]().$implicit,i=r["\u0275\u0275nextContext"]();r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",n.type===i.dataKeyTypes.alarm),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",n.type===i.dataKeyTypes.attribute),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",n.type===i.dataKeyTypes.entityField),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",n.type===i.dataKeyTypes.timeseries)}}function ot(t,e){if(1&t&&(r["\u0275\u0275elementStart"](0,"mat-option",32),r["\u0275\u0275elementStart"](1,"span",33),r["\u0275\u0275template"](2,rt,5,4,"span",10),r["\u0275\u0275element"](3,"span",34),r["\u0275\u0275pipe"](4,"highlight"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()),2&t){var n=e.$implicit,i=r["\u0275\u0275nextContext"]();r["\u0275\u0275property"]("value",n),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("ngIf",i.datasourceType===i.datasourceTypes.entity),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("innerHTML",r["\u0275\u0275pipeBind2"](4,3,n.name,i.searchText),r["\u0275\u0275sanitizeHtml"])}}function st(t,e){1&t&&(r["\u0275\u0275elementStart"](0,"div"),r["\u0275\u0275elementStart"](1,"span",41),r["\u0275\u0275text"](2,"entity.no-keys-found"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]())}function lt(t,e){if(1&t){var n=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"span"),r["\u0275\u0275elementStart"](1,"a",43),r["\u0275\u0275listener"]("click",(function(){r["\u0275\u0275restoreView"](n);var t=r["\u0275\u0275nextContext"](3);return t.createKey(t.searchText)})),r["\u0275\u0275text"](2,"entity.create-new-key"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()}}function ct(t,e){if(1&t){var n=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"span",27),r["\u0275\u0275pipe"](1,"translate"),r["\u0275\u0275elementStart"](2,"mat-icon",44),r["\u0275\u0275listener"]("click",(function(){r["\u0275\u0275restoreView"](n);var t=r["\u0275\u0275nextContext"](4);return t.createKey(t.searchText,t.dataKeyTypes.alarm)})),r["\u0275\u0275text"](3,"notifications"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()}2&t&&r["\u0275\u0275propertyInterpolate"]("matTooltip",r["\u0275\u0275pipeBind1"](1,1,"datakey.alarm"))}function dt(t,e){if(1&t){var n=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"span",27),r["\u0275\u0275pipe"](1,"translate"),r["\u0275\u0275elementStart"](2,"mat-icon",45),r["\u0275\u0275listener"]("click",(function(){r["\u0275\u0275restoreView"](n);var t=r["\u0275\u0275nextContext"](4);return t.createKey(t.searchText,t.dataKeyTypes.attribute)})),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()}2&t&&r["\u0275\u0275propertyInterpolate"]("matTooltip",r["\u0275\u0275pipeBind1"](1,1,"datakey.attributes"))}function pt(t,e){if(1&t){var n=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"span",27),r["\u0275\u0275pipe"](1,"translate"),r["\u0275\u0275elementStart"](2,"mat-icon",46),r["\u0275\u0275listener"]("click",(function(){r["\u0275\u0275restoreView"](n);var t=r["\u0275\u0275nextContext"](4);return t.createKey(t.searchText,t.dataKeyTypes.entityField)})),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()}2&t&&r["\u0275\u0275propertyInterpolate"]("matTooltip",r["\u0275\u0275pipeBind1"](1,1,"datakey.entity-field"))}function ut(t,e){if(1&t){var n=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"span"),r["\u0275\u0275text"](1),r["\u0275\u0275pipe"](2,"translate"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275template"](3,ct,4,3,"span",26),r["\u0275\u0275template"](4,dt,3,3,"span",26),r["\u0275\u0275template"](5,pt,3,3,"span",26),r["\u0275\u0275elementStart"](6,"span",27),r["\u0275\u0275pipe"](7,"translate"),r["\u0275\u0275elementStart"](8,"mat-icon",44),r["\u0275\u0275listener"]("click",(function(){r["\u0275\u0275restoreView"](n);var t=r["\u0275\u0275nextContext"](3);return t.createKey(t.searchText,t.dataKeyTypes.timeseries)})),r["\u0275\u0275text"](9,"timeline"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()}if(2&t){var i=r["\u0275\u0275nextContext"](3);r["\u0275\u0275advance"](1),r["\u0275\u0275textInterpolate1"]("",r["\u0275\u0275pipeBind1"](2,5,"entity.create-new-key")," "),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("ngIf",i.widgetType==i.widgetTypes.alarm),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",i.widgetType==i.widgetTypes.latest||i.widgetType==i.widgetTypes.alarm),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",i.widgetType==i.widgetTypes.latest||i.widgetType==i.widgetTypes.alarm),r["\u0275\u0275advance"](1),r["\u0275\u0275propertyInterpolate"]("matTooltip",r["\u0275\u0275pipeBind1"](7,7,"datakey.timeseries"))}}var mt=function(t){return{key:t}};function ft(t,e){if(1&t&&(r["\u0275\u0275elementStart"](0,"span"),r["\u0275\u0275text"](1),r["\u0275\u0275pipe"](2,"async"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275template"](3,lt,3,0,"span",20),r["\u0275\u0275template"](4,ut,10,9,"ng-template",null,42,r["\u0275\u0275templateRefExtractor"])),2&t){var n=r["\u0275\u0275reference"](5),i=r["\u0275\u0275nextContext"](2);r["\u0275\u0275advance"](1),r["\u0275\u0275textInterpolate1"](" ",r["\u0275\u0275pipeBind1"](2,3,i.translate.get("entity.no-key-matching",r["\u0275\u0275pureFunction1"](5,mt,i.truncate.transform(i.searchText,!0,6,"..."))))," "),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("ngIf",i.datasourceType!==i.datasourceTypes.entity)("ngIfElse",n)}}function ht(t,e){if(1&t){var n=r["\u0275\u0275getCurrentView"]();r["\u0275\u0275elementStart"](0,"mat-option",38),r["\u0275\u0275elementStart"](1,"div",39),r["\u0275\u0275listener"]("click",(function(t){return r["\u0275\u0275restoreView"](n),t.stopPropagation()})),r["\u0275\u0275template"](2,st,3,0,"div",20),r["\u0275\u0275template"](3,ft,6,7,"ng-template",null,40,r["\u0275\u0275templateRefExtractor"]),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()}if(2&t){var i=r["\u0275\u0275reference"](4),a=r["\u0275\u0275nextContext"]();r["\u0275\u0275property"]("value",null),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("ngIf",!a.textIsNotEmpty(a.searchText))("ngIfElse",i)}}function gt(t,e){if(1&t&&(r["\u0275\u0275elementStart"](0,"mat-error"),r["\u0275\u0275text"](1),r["\u0275\u0275elementEnd"]()),2&t){var n=r["\u0275\u0275nextContext"]();r["\u0275\u0275advance"](1),r["\u0275\u0275textInterpolate1"](" ",n.requiredText," ")}}function yt(t,e){if(1&t&&(r["\u0275\u0275elementStart"](0,"div",47),r["\u0275\u0275text"](1),r["\u0275\u0275elementEnd"]()),2&t){var n=r["\u0275\u0275nextContext"]();r["\u0275\u0275advance"](1),r["\u0275\u0275textInterpolate1"](" ",n.maxDataKeysText(),"\n")}}var bt=function(){function t(t,e,n,i,r,o,s,l){this.store=t,this.errorStateMatcher=e,this.translate=n,this.utils=i,this.dialogs=r,this.dialog=o,this.fb=s,this.truncate=l,this.datasourceTypes=y.a,this.widgetTypes=y.k,this.dataKeyTypes=g.h,this.keys=[],this.separatorKeysCodes=[a.ENTER,a.COMMA,a.SEMICOLON],this.searchText="",this.latestSearchTextResult=null,this.fetchObservable$=null,this.dirty=!1,this.propagateChange=function(t){}}return Object.defineProperty(t.prototype,"maxDataKeys",{get:function(){return this.datasourceType===y.a.entityCount?1:this.maxDataKeysValue},set:function(t){this.maxDataKeysValue=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"required",{get:function(){return this.requiredValue||!this.optDataKeys||this.isEntityCountDatasource},set:function(t){this.requiredValue=Object(h.coerceBooleanProperty)(t)},enumerable:!1,configurable:!0}),t.prototype.updateValidators=function(){this.keysListFormGroup.get("keys").setValidators(this.required?[o.Validators.required]:[]),this.keysListFormGroup.get("keys").updateValueAndValidity()},t.prototype.registerOnChange=function(t){this.propagateChange=t},t.prototype.registerOnTouched=function(t){},t.prototype.ngOnInit=function(){var t=this;this.keysListFormGroup=this.fb.group({keys:[null,this.required?[o.Validators.required]:[]],key:[null]}),this.alarmKeys=[];for(var e=0,n=Object.keys(b.e);e<n.length;e++){var i=n[e];this.alarmKeys.push({name:i,type:g.h.alarm})}this.functionTypeKeys=[];for(var a=0,r=this.utils.getPredefinedFunctionsList();a<r.length;a++){var s=r[a];this.functionTypeKeys.push({name:s,type:g.h.function})}this.updateParams(),this.filteredKeys=this.keysListFormGroup.get("key").valueChanges.pipe(Object(l.a)((function(e){e&&"string"!=typeof e?t.addFromChipValue(e):null===e&&t.clear(t.keyInput.nativeElement.value)})),Object(c.a)((function(t){return"string"==typeof t})),Object(d.a)((function(t){return t?"string"==typeof t?t:t.name:""})),Object(p.b)((function(e){return t.fetchKeys(e)})),Object(u.a)())},t.prototype.maxDataKeysText=function(){return null!==this.maxDataKeys&&this.maxDataKeys>-1?this.datasourceType===y.a.function?this.translate.instant("datakey.maximum-function-types",{count:this.maxDataKeys}):this.isEntityCountDatasource?"":this.translate.instant("datakey.maximum-timeseries-or-attributes",{count:this.maxDataKeys}):""},t.prototype.updateParams=function(){this.datasourceType===y.a.function?(this.dataKeyType=g.h.function,this.placeholder=this.translate.instant("datakey.function-types"),this.requiredText=this.translate.instant("datakey.function-types-required")):(this.widgetType===y.k.latest?(this.dataKeyType=null,this.requiredText=this.translate.instant("datakey.timeseries-or-attributes-required")):this.widgetType===y.k.alarm?(this.dataKeyType=null,this.requiredText=this.translate.instant("datakey.alarm-fields-timeseries-or-attributes-required")):(this.dataKeyType=g.h.timeseries,this.requiredText=this.translate.instant("datakey.timeseries-required")),this.placeholder="")},t.prototype.reset=function(){this.widgetType===y.k.alarm?this.keys=this.utils.getDefaultAlarmDataKeys():this.isEntityCountDatasource?this.keys=[this.callbacks.generateDataKey("count",g.h.count)]:this.keys=[],this.keysListFormGroup.get("keys").setValue(this.keys),this.modelValue=this.keys.length?Object(i.g)(this.keys):null,this.keyInput&&(this.keyInput.nativeElement.value=""),this.keysListFormGroup.get("key").patchValue("",{emitEvent:!1}),this.propagateChange(this.modelValue),this.dirty=!0,this.latestSearchTextResult=null},t.prototype.ngOnChanges=function(t){for(var e=this,n=0,i=Object.keys(t);n<i.length;n++){var a=i[n],r=t[a];r.firstChange||r.currentValue===r.previousValue||("entityAliasId"===a?(this.clearSearchCache(),this.dirty=!0):["widgetType","datasourceType"].includes(a)?(this.clearSearchCache(),this.updateParams(),setTimeout((function(){e.reset()}),1)):["required","optDataKeys"].includes("propName")&&this.updateValidators())}},t.prototype.isErrorState=function(t,e){var n=this.errorStateMatcher.isErrorState(t,e),i=this.required&&!this.modelValue;return n||i},t.prototype.ngAfterViewInit=function(){},t.prototype.setDisabledState=function(t){this.disabled=t,this.disabled?this.keysListFormGroup.disable({emitEvent:!1}):this.keysListFormGroup.enable({emitEvent:!1})},t.prototype.writeValue=function(t){this.searchText="",null!=t&&t.length?(this.modelValue=Object(i.g)(t),this.keys=Object(i.g)(t),this.keysListFormGroup.get("keys").setValue(this.keys)):(this.keys=[],this.keysListFormGroup.get("keys").setValue(this.keys),this.modelValue=null),this.dirty=!0},t.prototype.onFocus=function(){this.dirty&&(this.keysListFormGroup.get("key").updateValueAndValidity({onlySelf:!0,emitEvent:!0}),this.dirty=!1)},t.prototype.addFromChipValue=function(t){var e=this.callbacks.generateDataKey(t.name,t.type);this.addKey(e)},t.prototype.addKey=function(t){(!this.maxDataKeys||this.maxDataKeys<0||!this.modelValue||this.modelValue.length<this.maxDataKeys)&&(this.modelValue||(this.modelValue=[]),this.modelValue.push(t),this.keys.push(t),this.keysListFormGroup.get("keys").setValue(this.keys)),this.propagateChange(this.modelValue),this.clear()},t.prototype.add=function(t){var e=t.value;(e||"").trim()&&this.dataKeyType&&this.addFromChipValue({name:e.trim(),type:this.dataKeyType}),this.clear()},t.prototype.remove=function(t){var e=this.keys.indexOf(t);e>=0&&(this.keys.splice(e,1),this.keysListFormGroup.get("keys").setValue(this.keys),this.modelValue.splice(e,1),this.modelValue.length||(this.modelValue=null),this.propagateChange(this.modelValue),this.clear())},t.prototype.onChipDrop=function(t){var e=t.from,n=t.to;this.keys.splice(n,0,this.keys.splice(e,1)[0]),this.keysListFormGroup.get("keys").setValue(this.keys),this.modelValue.splice(n,0,this.modelValue.splice(e,1)[0]),this.propagateChange(this.modelValue)},t.prototype.showColorPicker=function(t){var e=this;this.dialogs.colorPicker(t.color).subscribe((function(n){n&&t.color!==n&&(t.color=n,e.propagateChange(e.modelValue))}))},t.prototype.editDataKey=function(t,e){var n=this;this.dialog.open(w.a,{disableClose:!0,panelClass:["tb-dialog","tb-fullscreen-dialog"],data:{dataKey:Object(E.e)(t),dataKeySettingsSchema:this.datakeySettingsSchema,entityAliasId:this.entityAliasId,showPostProcessing:this.widgetType!==y.k.alarm,callbacks:this.callbacks}}).afterClosed().subscribe((function(t){t&&(n.keys[e]=t,n.keysListFormGroup.get("keys").setValue(n.keys),n.modelValue[e]=t,n.propagateChange(n.modelValue))}))},t.prototype.createKey=function(t,e){void 0===e&&(e=this.dataKeyType),this.addFromChipValue({name:t?t.trim():"",type:e})},t.prototype.displayKeyFn=function(t){return t?t.name:void 0},t.prototype.fetchKeys=function(t){var e=this;if(this.searchText!==t||null===this.latestSearchTextResult){this.searchText=t;var n=this.createDataKeyFilter(this.searchText);return this.getKeys().pipe(Object(d.a)((function(t){return t.filter(n)})),Object(l.a)((function(t){return e.latestSearchTextResult=t})))}return Object(s.a)(this.latestSearchTextResult)},t.prototype.getKeys=function(){if(null===this.fetchObservable$){var t=void 0;if(this.datasourceType===y.a.function){var e=this.widgetType===y.k.alarm?this.alarmKeys:this.functionTypeKeys;t=Object(s.a)(e)}else if(this.datasourceType===y.a.entity&&this.entityAliasId){var n=[g.h.timeseries];this.widgetType!==y.k.latest&&this.widgetType!==y.k.alarm||(n.push(g.h.attribute),n.push(g.h.entityField),this.widgetType===y.k.alarm&&n.push(g.h.alarm)),t=this.callbacks.fetchEntityKeys(this.entityAliasId,n)}else t=Object(s.a)([]);this.fetchObservable$=t.pipe(Object(m.a)(1),Object(f.a)())}return this.fetchObservable$},t.prototype.createDataKeyFilter=function(t){var e=t.toLowerCase();return function(t){return t.name.toLowerCase().startsWith(e)}},t.prototype.textIsNotEmpty=function(t){return!!(t&&null!=t&&t.length>0)},t.prototype.clear=function(t){var e=this;void 0===t&&(t=""),this.keyInput.nativeElement.value=t,this.keysListFormGroup.get("key").patchValue(t,{emitEvent:!0}),setTimeout((function(){e.keyInput.nativeElement.blur(),e.keyInput.nativeElement.focus()}),0)},Object.defineProperty(t.prototype,"isEntityCountDatasource",{get:function(){return this.datasourceType===y.a.entityCount},enumerable:!1,configurable:!0}),t.prototype.clearSearchCache=function(){this.searchText="",this.fetchObservable$=null,this.latestSearchTextResult=null},t.\u0275fac=function(e){return new(e||t)(r["\u0275\u0275directiveInject"](I.Store),r["\u0275\u0275directiveInject"](x.ErrorStateMatcher,4),r["\u0275\u0275directiveInject"](O.TranslateService),r["\u0275\u0275directiveInject"](v.a),r["\u0275\u0275directiveInject"](S.a),r["\u0275\u0275directiveInject"](T.MatDialog),r["\u0275\u0275directiveInject"](o.FormBuilder),r["\u0275\u0275directiveInject"](C.a))},t.\u0275cmp=r["\u0275\u0275defineComponent"]({type:t,selectors:[["tb-data-keys"]],viewQuery:function(t,e){var n;(1&t&&(r["\u0275\u0275viewQuery"](G,!0),r["\u0275\u0275viewQuery"](B,!0),r["\u0275\u0275viewQuery"](U,!0)),2&t)&&(r["\u0275\u0275queryRefresh"](n=r["\u0275\u0275loadQuery"]())&&(e.keyInput=n.first),r["\u0275\u0275queryRefresh"](n=r["\u0275\u0275loadQuery"]())&&(e.matAutocomplete=n.first),r["\u0275\u0275queryRefresh"](n=r["\u0275\u0275loadQuery"]())&&(e.chipList=n.first))},inputs:{widgetType:"widgetType",datasourceType:"datasourceType",maxDataKeys:"maxDataKeys",optDataKeys:"optDataKeys",aliasController:"aliasController",datakeySettingsSchema:"datakeySettingsSchema",callbacks:"callbacks",entityAliasId:"entityAliasId",required:"required",disabled:"disabled"},features:[r["\u0275\u0275ProvidersFeature"]([{provide:o.NG_VALUE_ACCESSOR,useExisting:Object(r.forwardRef)((function(){return t})),multi:!0},{provide:x.ErrorStateMatcher,useExisting:t}]),r["\u0275\u0275NgOnChangesFeature"]],decls:15,vars:18,consts:[["appearance","standard",1,"mat-block",3,"formGroup"],["formControlName","keys","tb-chip-draggable","",3,"chipDrop"],["chipList",""],[3,"selectable","removable","removed",4,"ngFor","ngForOf"],["matInput","","type","text","formControlName","key","matAutocompleteOrigin","",2,"max-width","200px",3,"placeholder","readonly","matAutocompleteConnectedTo","matAutocomplete","matAutocompleteDisabled","matChipInputFor","matChipInputSeparatorKeyCodes","focusin","matChipInputTokenEnd"],["keyInput","","origin","matAutocompleteOrigin"],[1,"tb-autocomplete",3,"displayWith"],["keyAutocomplete","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],["class","tb-not-found",3,"value",4,"ngIf"],[4,"ngIf"],["class","mat-caption","style","color: rgba(0,0,0,0.57);",4,"ngIf"],[3,"selectable","removable","removed"],["fxLayout","row","fxLayoutAlign","start center",1,"tb-attribute-chip"],["class","tb-chip-drag-handle","style","margin-right: 5px;",4,"ngIf"],[1,"tb-color-preview",2,"margin-right","5px",3,"click"],[1,"tb-color-result",3,"ngStyle"],[1,"tb-chip-labels"],[1,"tb-chip-label"],[1,"tb-chip-separator"],[4,"ngIf","ngIfElse"],["simpleChipLabel",""],["type","button","mat-button","","mat-icon-button","","class","tb-mat-32",3,"click",4,"ngIf"],["matChipRemove","",4,"ngIf"],[1,"tb-chip-drag-handle",2,"margin-right","5px"],[1,"tb-mat-20"],["matTooltipPosition","above",3,"matTooltip",4,"ngIf"],["matTooltipPosition","above",3,"matTooltip"],["svgIcon","alpha-a-circle-outline",1,"tb-mat-20"],["svgIcon","alpha-e-circle-outline",1,"tb-mat-20"],["type","button","mat-button","","mat-icon-button","",1,"tb-mat-32",3,"click"],["matChipRemove",""],[3,"value"],[2,"white-space","nowrap"],[3,"innerHTML"],[1,"tb-mat-16"],["svgIcon","alpha-a-circle-outline",1,"tb-mat-16"],["svgIcon","alpha-e-circle-outline",1,"tb-mat-16"],[1,"tb-not-found",3,"value"],[1,"tb-not-found-content",3,"click"],["searchNotEmpty",""],["translate",""],["createEntityKey",""],["translate","",3,"click"],[1,"tb-mat-16",3,"click"],["svgIcon","alpha-a-circle-outline",1,"tb-mat-16",3,"click"],["svgIcon","alpha-e-circle-outline",1,"tb-mat-16",3,"click"],[1,"mat-caption",2,"color","rgba(0,0,0,0.57)"]],template:function(t,e){if(1&t&&(r["\u0275\u0275elementStart"](0,"mat-form-field",0),r["\u0275\u0275elementStart"](1,"mat-chip-list",1,2),r["\u0275\u0275listener"]("chipDrop",(function(t){return e.onChipDrop(t)})),r["\u0275\u0275template"](3,tt,17,12,"mat-chip",3),r["\u0275\u0275elementStart"](4,"input",4,5),r["\u0275\u0275listener"]("focusin",(function(){return e.onFocus()}))("matChipInputTokenEnd",(function(t){return e.add(t)})),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](7,"mat-autocomplete",6,7),r["\u0275\u0275template"](9,ot,5,6,"mat-option",8),r["\u0275\u0275pipe"](10,"async"),r["\u0275\u0275template"](11,ht,5,3,"mat-option",9),r["\u0275\u0275pipe"](12,"async"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275template"](13,gt,2,1,"mat-error",10),r["\u0275\u0275elementEnd"](),r["\u0275\u0275template"](14,yt,2,1,"div",11)),2&t){var n,i=r["\u0275\u0275reference"](2),a=r["\u0275\u0275reference"](6),o=r["\u0275\u0275reference"](8);r["\u0275\u0275property"]("formGroup",e.keysListFormGroup),r["\u0275\u0275advance"](3),r["\u0275\u0275property"]("ngForOf",e.keys),r["\u0275\u0275advance"](1),r["\u0275\u0275propertyInterpolate"]("placeholder",e.disabled?"":e.placeholder),r["\u0275\u0275property"]("readonly",e.isEntityCountDatasource)("matAutocompleteConnectedTo",a)("matAutocomplete",o)("matAutocompleteDisabled",e.isEntityCountDatasource)("matChipInputFor",i)("matChipInputSeparatorKeyCodes",e.separatorKeysCodes),r["\u0275\u0275advance"](3),r["\u0275\u0275property"]("displayWith",e.displayKeyFn),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("ngForOf",r["\u0275\u0275pipeBind1"](10,14,e.filteredKeys)),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("ngIf",!(null!=(n=r["\u0275\u0275pipeBind1"](12,16,e.filteredKeys))&&n.length)),r["\u0275\u0275advance"](2),r["\u0275\u0275property"]("ngIf",e.keysListFormGroup.get("keys").hasError("required")),r["\u0275\u0275advance"](1),r["\u0275\u0275property"]("ngIf",null!==e.maxDataKeys&&e.maxDataKeys>-1)}},directives:[M.MatFormField,o.NgControlStatusGroup,o.FormGroupDirective,F.MatChipList,P.a,o.NgControlStatus,o.FormControlName,D.NgForOf,k.MatInput,o.DefaultValueAccessor,j.MatAutocompleteTrigger,F.MatChipInput,j.MatAutocompleteOrigin,j.MatAutocomplete,D.NgIf,F.MatChip,A.f,A.e,D.NgStyle,_.e,L.MatIcon,V.MatTooltip,R.MatButton,F.MatChipRemove,x.MatOption,O.TranslateDirective,M.MatError],pipes:[D.AsyncPipe,O.TranslatePipe,N.a],styles:["[_nghost-%COMP%]   .mat-chip.mat-standard-chip[_ngcontent-%COMP%]{overflow:hidden}[_nghost-%COMP%]   .mat-chip.mat-standard-chip[_ngcontent-%COMP%]   .tb-attribute-chip[_ngcontent-%COMP%]{max-width:100%;color:#424242;font-weight:400;font-size:16px}[_nghost-%COMP%]   .mat-chip.mat-standard-chip[_ngcontent-%COMP%]   .tb-attribute-chip[_ngcontent-%COMP%]   .tb-chip-drag-handle[_ngcontent-%COMP%]{cursor:move}[_nghost-%COMP%]   .mat-chip.mat-standard-chip[_ngcontent-%COMP%]   .tb-attribute-chip[_ngcontent-%COMP%]   .tb-chip-drag-handle[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{pointer-events:none}[_nghost-%COMP%]   .mat-chip.mat-standard-chip[_ngcontent-%COMP%]   .tb-attribute-chip[_ngcontent-%COMP%]   .tb-chip-labels[_ngcontent-%COMP%]{display:-ms-flexbox;display:flex;-ms-flex-direction:row;flex-direction:row;-ms-flex-align:end;align-items:flex-end;min-width:0}[_nghost-%COMP%]   .mat-chip.mat-standard-chip[_ngcontent-%COMP%]   .tb-attribute-chip[_ngcontent-%COMP%]   .tb-chip-labels[_ngcontent-%COMP%]   .tb-chip-label[_ngcontent-%COMP%]{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}[_nghost-%COMP%]   .mat-chip.mat-standard-chip[_ngcontent-%COMP%]   .tb-attribute-chip[_ngcontent-%COMP%]   .tb-chip-labels[_ngcontent-%COMP%]   .tb-chip-separator[_ngcontent-%COMP%]{white-space:pre}[_nghost-%COMP%]   .mat-chip.mat-standard-chip[_ngcontent-%COMP%]   .tb-attribute-chip[_ngcontent-%COMP%]   .mat-chip-remove.mat-icon[_ngcontent-%COMP%]{width:24px;height:24px;font-size:24px;margin-left:0;color:inherit;opacity:inherit}[_nghost-%COMP%]     .mat-form-field-flex{padding-top:0}[_nghost-%COMP%]     .mat-form-field-flex .mat-form-field-infix{border-top:0}"]}),t}();!function(){r["\u0275setClassMetadata"](bt,[{type:r.Component,args:[{selector:"tb-data-keys",templateUrl:"./data-keys.component.html",styleUrls:["./data-keys.component.scss"],providers:[{provide:o.NG_VALUE_ACCESSOR,useExisting:Object(r.forwardRef)((function(){return bt})),multi:!0},{provide:x.ErrorStateMatcher,useExisting:bt}]}]}],(function(){return[{type:I.Store},{type:x.ErrorStateMatcher,decorators:[{type:r.SkipSelf}]},{type:O.TranslateService},{type:v.a},{type:S.a},{type:T.MatDialog},{type:o.FormBuilder},{type:C.a}]}),{widgetType:[{type:r.Input}],datasourceType:[{type:r.Input}],maxDataKeys:[{type:r.Input}],optDataKeys:[{type:r.Input}],aliasController:[{type:r.Input}],datakeySettingsSchema:[{type:r.Input}],callbacks:[{type:r.Input}],entityAliasId:[{type:r.Input}],required:[{type:r.Input}],disabled:[{type:r.Input}],keyInput:[{type:r.ViewChild,args:["keyInput"]}],matAutocomplete:[{type:r.ViewChild,args:["keyAutocomplete"]}],chipList:[{type:r.ViewChild,args:["chipList"]}]})}()},OMGm:function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var i=function(){function t(t){this.dashboard=t,this.dashboardTimewindowApi={onResetTimewindow:this.dashboard.onResetTimewindow.bind(this.dashboard),onUpdateTimewindow:this.dashboard.onUpdateTimewindow.bind(this.dashboard)}}return Object.defineProperty(t.prototype,"aliasController",{get:function(){return this.dashboard.aliasController},enumerable:!1,configurable:!0}),t}()},OUQ4:function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));var i=n("fXoL"),a=n("3Pt+"),r=n("8LU1"),o=n("//Q6"),s=n("NEMC"),l=n("l7P3"),c=n("ofXK"),d=n("JoHb");function p(t,e){if(1&t&&i["\u0275\u0275element"](0,"tb-default-tenant-profile-configuration",3),2&t){var n=i["\u0275\u0275nextContext"]();i["\u0275\u0275property"]("required",n.required)}}var u=function(){function t(t,e){this.store=t,this.fb=e,this.tenantProfileType=s.a,this.propagateChange=function(t){}}return Object.defineProperty(t.prototype,"required",{get:function(){return this.requiredValue},set:function(t){this.requiredValue=Object(r.coerceBooleanProperty)(t)},enumerable:!1,configurable:!0}),t.prototype.registerOnChange=function(t){this.propagateChange=t},t.prototype.registerOnTouched=function(t){},t.prototype.ngOnInit=function(){var t=this;this.tenantProfileConfigurationFormGroup=this.fb.group({configuration:[null,a.Validators.required]}),this.tenantProfileConfigurationFormGroup.valueChanges.subscribe((function(){t.updateModel()}))},t.prototype.setDisabledState=function(t){this.disabled=t,this.disabled?this.tenantProfileConfigurationFormGroup.disable({emitEvent:!1}):this.tenantProfileConfigurationFormGroup.enable({emitEvent:!1})},t.prototype.writeValue=function(t){this.type=null==t?void 0:t.type;var e=Object(o.e)(t);e&&delete e.type,this.tenantProfileConfigurationFormGroup.patchValue({configuration:e},{emitEvent:!1})},t.prototype.updateModel=function(){var t=null;this.tenantProfileConfigurationFormGroup.valid&&((t=this.tenantProfileConfigurationFormGroup.getRawValue().configuration).type=this.type),this.propagateChange(t)},t.\u0275fac=function(e){return new(e||t)(i["\u0275\u0275directiveInject"](l.Store),i["\u0275\u0275directiveInject"](a.FormBuilder))},t.\u0275cmp=i["\u0275\u0275defineComponent"]({type:t,selectors:[["tb-tenant-profile-configuration"]],inputs:{required:"required",disabled:"disabled"},features:[i["\u0275\u0275ProvidersFeature"]([{provide:a.NG_VALUE_ACCESSOR,useExisting:Object(i.forwardRef)((function(){return t})),multi:!0}])],decls:3,vars:3,consts:[[3,"formGroup"],[3,"ngSwitch"],[3,"ngSwitchCase"],["formControlName","configuration",3,"required"]],template:function(t,e){1&t&&(i["\u0275\u0275elementStart"](0,"div",0),i["\u0275\u0275elementStart"](1,"div",1),i["\u0275\u0275template"](2,p,1,1,"ng-template",2),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()),2&t&&(i["\u0275\u0275property"]("formGroup",e.tenantProfileConfigurationFormGroup),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngSwitch",e.type),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngSwitchCase",e.tenantProfileType.DEFAULT))},directives:[a.NgControlStatusGroup,a.FormGroupDirective,c.NgSwitch,c.NgSwitchCase,d.a,a.NgControlStatus,a.FormControlName,a.RequiredValidator],encapsulation:2}),t}();!function(){i["\u0275setClassMetadata"](u,[{type:i.Component,args:[{selector:"tb-tenant-profile-configuration",templateUrl:"./tenant-profile-configuration.component.html",styleUrls:[],providers:[{provide:a.NG_VALUE_ACCESSOR,useExisting:Object(i.forwardRef)((function(){return u})),multi:!0}]}]}],(function(){return[{type:l.Store},{type:a.FormBuilder}]}),{required:[{type:i.Input}],disabled:[{type:i.Input}]})}()},P0tZ:function(t,e,n){"use strict";n.d(e,"a",(function(){return ft}));var i=n("mrSG"),a=n("fXoL"),r=n("FKr1"),o=n("0IaG"),s=n("3Pt+"),l=n("LRne"),c=n("gmuX"),d=n("Hxax"),p=n("OiFK"),u=n("0lYY"),m=n("vkgz"),f=n("5+tZ"),h=n("lJxs"),g=n("JX91"),y=n("YnEf"),b=n("4j5O"),v=n("gi3d"),x=n("//Q6"),C=n("l7P3"),S=n("tyNb"),w=n("/t3+"),E=n("XiUz"),I=n("bTqV"),O=n("NFeN"),T=n("ofXK"),M=n("kmnG"),F=n("sYmb"),P=n("d3UM"),D=n("qFsG"),k=n("jy/V"),j=n("bv9b"),A=n("XMqU"),_=n("/1cH"),L=n("bSwM"),V=n("yAAm"),R=n("Grun"),N=n("d5eY"),G=["dashboardStateInput"];function B(t,e){1&t&&a["\u0275\u0275element"](0,"mat-progress-bar",23)}function U(t,e){1&t&&a["\u0275\u0275element"](0,"div",24)}function q(t,e){if(1&t&&(a["\u0275\u0275elementStart"](0,"mat-option",25),a["\u0275\u0275text"](1),a["\u0275\u0275elementEnd"]()),2&t){var n=e.$implicit,i=a["\u0275\u0275nextContext"]();a["\u0275\u0275property"]("value",n.key),a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"](" ",i.actionSourceName(n.value)," ")}}function W(t,e){1&t&&(a["\u0275\u0275elementStart"](0,"mat-error"),a["\u0275\u0275text"](1),a["\u0275\u0275pipe"](2,"translate"),a["\u0275\u0275elementEnd"]()),2&t&&(a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](2,1,"widget-config.action-source-required")," "))}function z(t,e){1&t&&(a["\u0275\u0275elementStart"](0,"mat-error"),a["\u0275\u0275text"](1),a["\u0275\u0275pipe"](2,"translate"),a["\u0275\u0275elementEnd"]()),2&t&&(a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](2,1,"widget-config.action-name-required")," "))}function K(t,e){1&t&&(a["\u0275\u0275element"](0,"mat-error",26),a["\u0275\u0275pipe"](1,"translate")),2&t&&a["\u0275\u0275property"]("innerHTML",a["\u0275\u0275pipeBind1"](1,1,"widget-config.action-name-not-unique"),a["\u0275\u0275sanitizeHtml"])}function H(t,e){if(1&t&&(a["\u0275\u0275elementStart"](0,"mat-option",25),a["\u0275\u0275text"](1),a["\u0275\u0275pipe"](2,"translate"),a["\u0275\u0275elementEnd"]()),2&t){var n=e.$implicit,i=a["\u0275\u0275nextContext"]();a["\u0275\u0275property"]("value",n),a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](2,2,i.widgetActionTypeTranslations.get(i.widgetActionType[n]))," ")}}function $(t,e){1&t&&(a["\u0275\u0275elementStart"](0,"mat-error"),a["\u0275\u0275text"](1),a["\u0275\u0275pipe"](2,"translate"),a["\u0275\u0275elementEnd"]()),2&t&&(a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](2,1,"widget-config.action-type-required")," "))}function Q(t,e){1&t&&(a["\u0275\u0275elementStart"](0,"div",27),a["\u0275\u0275text"](1,"widget-action.target-dashboard"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](2,"tb-dashboard-autocomplete",28)),2&t&&(a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("selectFirstDashboard",!0))}function X(t,e){if(1&t){var n=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementStart"](0,"button",34),a["\u0275\u0275listener"]("click",(function(){return a["\u0275\u0275restoreView"](n),a["\u0275\u0275nextContext"](2).clearTargetDashboardState()})),a["\u0275\u0275elementStart"](1,"mat-icon",4),a["\u0275\u0275text"](2,"close"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()}}function Y(t,e){if(1&t&&(a["\u0275\u0275elementStart"](0,"mat-option",25),a["\u0275\u0275element"](1,"span",26),a["\u0275\u0275pipe"](2,"highlight"),a["\u0275\u0275elementEnd"]()),2&t){var n=e.$implicit,i=a["\u0275\u0275nextContext"](2);a["\u0275\u0275property"]("value",n),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("innerHTML",a["\u0275\u0275pipeBind2"](2,2,n,i.targetDashboardStateSearchText),a["\u0275\u0275sanitizeHtml"])}}function J(t,e){1&t&&(a["\u0275\u0275elementStart"](0,"mat-error"),a["\u0275\u0275text"](1),a["\u0275\u0275pipe"](2,"translate"),a["\u0275\u0275elementEnd"]()),2&t&&(a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](2,1,"widget-action.target-dashboard-state-required")," "))}function Z(t,e){if(1&t&&(a["\u0275\u0275elementStart"](0,"mat-form-field",9),a["\u0275\u0275element"](1,"input",29,30),a["\u0275\u0275pipe"](3,"translate"),a["\u0275\u0275template"](4,X,3,0,"button",31),a["\u0275\u0275elementStart"](5,"mat-autocomplete",32,33),a["\u0275\u0275template"](7,Y,3,5,"mat-option",12),a["\u0275\u0275pipe"](8,"async"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275template"](9,J,3,3,"mat-error",13),a["\u0275\u0275elementEnd"]()),2&t){var n=a["\u0275\u0275reference"](6),i=a["\u0275\u0275nextContext"]();a["\u0275\u0275advance"](1),a["\u0275\u0275propertyInterpolate"]("placeholder",a["\u0275\u0275pipeBind1"](3,6,"widget-action.target-dashboard-state")),a["\u0275\u0275property"]("required",i.widgetActionFormGroup.get("type").value===i.widgetActionType.openDashboardState)("matAutocomplete",n),a["\u0275\u0275advance"](3),a["\u0275\u0275property"]("ngIf",i.actionTypeFormGroup.get("targetDashboardStateId").value),a["\u0275\u0275advance"](3),a["\u0275\u0275property"]("ngForOf",a["\u0275\u0275pipeBind1"](8,8,i.filteredDashboardStates)),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("ngIf",i.actionTypeFormGroup.get("targetDashboardStateId").hasError("required"))}}function tt(t,e){1&t&&(a["\u0275\u0275elementStart"](0,"mat-checkbox",35),a["\u0275\u0275text"](1),a["\u0275\u0275pipe"](2,"translate"),a["\u0275\u0275elementEnd"]()),2&t&&(a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](2,1,"widget-action.open-right-layout")," "))}function et(t,e){1&t&&(a["\u0275\u0275elementStart"](0,"mat-checkbox",36),a["\u0275\u0275text"](1),a["\u0275\u0275pipe"](2,"translate"),a["\u0275\u0275elementEnd"]()),2&t&&(a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](2,1,"widget-action.open-new-browser-tab")," "))}function nt(t,e){1&t&&(a["\u0275\u0275elementStart"](0,"mat-form-field",39),a["\u0275\u0275elementStart"](1,"mat-label",10),a["\u0275\u0275text"](2,"alias.state-entity-parameter-name"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](3,"input",40),a["\u0275\u0275pipe"](4,"translate"),a["\u0275\u0275elementEnd"]()),2&t&&(a["\u0275\u0275advance"](3),a["\u0275\u0275propertyInterpolate"]("placeholder",a["\u0275\u0275pipeBind1"](4,1,"alias.default-entity-parameter-name")))}function it(t,e){if(1&t&&(a["\u0275\u0275elementStart"](0,"mat-checkbox",37),a["\u0275\u0275text"](1),a["\u0275\u0275pipe"](2,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275template"](3,nt,5,3,"mat-form-field",38)),2&t){var n=a["\u0275\u0275nextContext"]();a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](2,2,"widget-action.set-entity-from-widget")," "),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("ngIf",n.actionTypeFormGroup.get("setEntityId").value)}}function at(t,e){1&t&&(a["\u0275\u0275elementStart"](0,"mat-error"),a["\u0275\u0275text"](1),a["\u0275\u0275pipe"](2,"translate"),a["\u0275\u0275elementEnd"]()),2&t&&(a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](2,1,"widget-action.dialog-size-range-error")," "))}function rt(t,e){1&t&&(a["\u0275\u0275elementStart"](0,"mat-error"),a["\u0275\u0275text"](1),a["\u0275\u0275pipe"](2,"translate"),a["\u0275\u0275elementEnd"]()),2&t&&(a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](2,1,"widget-action.dialog-size-range-error")," "))}function ot(t,e){1&t&&(a["\u0275\u0275elementStart"](0,"mat-error"),a["\u0275\u0275text"](1),a["\u0275\u0275pipe"](2,"translate"),a["\u0275\u0275elementEnd"]()),2&t&&(a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](2,1,"widget-action.dialog-size-range-error")," "))}function st(t,e){1&t&&(a["\u0275\u0275elementStart"](0,"mat-error"),a["\u0275\u0275text"](1),a["\u0275\u0275pipe"](2,"translate"),a["\u0275\u0275elementEnd"]()),2&t&&(a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](2,1,"widget-action.dialog-size-range-error")," "))}function lt(t,e){if(1&t&&(a["\u0275\u0275elementStart"](0,"section"),a["\u0275\u0275elementStart"](1,"mat-form-field",9),a["\u0275\u0275elementStart"](2,"mat-label",10),a["\u0275\u0275text"](3,"widget-action.dialog-title"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](4,"input",42),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](5,"mat-checkbox",43),a["\u0275\u0275text"](6),a["\u0275\u0275pipe"](7,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](8,"mat-form-field",9),a["\u0275\u0275elementStart"](9,"mat-label",10),a["\u0275\u0275text"](10,"widget-action.dialog-width"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](11,"input",44),a["\u0275\u0275template"](12,at,3,3,"mat-error",13),a["\u0275\u0275template"](13,rt,3,3,"mat-error",13),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](14,"mat-form-field",9),a["\u0275\u0275elementStart"](15,"mat-label",10),a["\u0275\u0275text"](16,"widget-action.dialog-height"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](17,"input",45),a["\u0275\u0275template"](18,ot,3,3,"mat-error",13),a["\u0275\u0275template"](19,st,3,3,"mat-error",13),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()),2&t){var n=a["\u0275\u0275nextContext"](2);a["\u0275\u0275advance"](6),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](7,5,"widget-action.dialog-hide-dashboard-toolbar")," "),a["\u0275\u0275advance"](6),a["\u0275\u0275property"]("ngIf",n.actionTypeFormGroup.get("dialogWidth").hasError("min")),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",n.actionTypeFormGroup.get("dialogWidth").hasError("max")),a["\u0275\u0275advance"](5),a["\u0275\u0275property"]("ngIf",n.actionTypeFormGroup.get("dialogHeight").hasError("min")),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",n.actionTypeFormGroup.get("dialogHeight").hasError("max"))}}function ct(t,e){if(1&t&&(a["\u0275\u0275elementStart"](0,"mat-checkbox",41),a["\u0275\u0275text"](1),a["\u0275\u0275pipe"](2,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275template"](3,lt,20,7,"section",13)),2&t){var n=a["\u0275\u0275nextContext"]();a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](2,2,"widget-action.open-in-separate-dialog")," "),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("ngIf",n.actionTypeFormGroup.get("openInSeparateDialog").value)}}var dt=function(){return["$event","widgetContext","entityId","entityName","additionalParams","entityLabel"]},pt=function(){return[]};function ut(t,e){if(1&t&&a["\u0275\u0275element"](0,"tb-js-func",46),2&t){var n=a["\u0275\u0275nextContext"]();a["\u0275\u0275property"]("functionArgs",a["\u0275\u0275pureFunction0"](3,dt))("validationArgs",a["\u0275\u0275pureFunction0"](4,pt))("editorCompleter",n.customActionEditorCompleter)}}function mt(t,e){1&t&&a["\u0275\u0275element"](0,"tb-custom-action-pretty-editor",47)}var ft=function(t){function e(e,n,i,a,r,o,s,l,c){var d=t.call(this,e,n,l)||this;return d.store=e,d.router=n,d.utils=i,d.dashboardService=a,d.dashboardUtils=r,d.data=o,d.errorStateMatcher=s,d.dialogRef=l,d.fb=c,d.widgetActionTypes=Object.keys(u.d),d.widgetActionTypeTranslations=u.j,d.widgetActionType=u.d,d.targetDashboardStateSearchText="",d.customActionEditorCompleter=v.a,d.submitted=!1,d.isAdd=o.isAdd,d.isAdd?d.action={id:d.utils.guid(),name:"",icon:"more_horiz",type:null}:d.action=d.data.action,d}return Object(i.d)(e,t),e.prototype.ngOnInit=function(){var t=this;this.widgetActionFormGroup=this.fb.group({}),this.widgetActionFormGroup.addControl("actionSourceId",this.fb.control(this.action.actionSourceId,[s.Validators.required])),this.widgetActionFormGroup.addControl("name",this.fb.control(this.action.name,[this.validateActionName(),s.Validators.required])),this.widgetActionFormGroup.addControl("icon",this.fb.control(this.action.icon,[s.Validators.required])),this.widgetActionFormGroup.addControl("type",this.fb.control(this.action.type,[s.Validators.required])),this.updateActionTypeFormGroup(this.action.type,this.action),this.widgetActionFormGroup.get("type").valueChanges.subscribe((function(e){t.updateActionTypeFormGroup(e)})),this.widgetActionFormGroup.get("actionSourceId").valueChanges.subscribe((function(){t.widgetActionFormGroup.get("name").updateValueAndValidity()}))},e.prototype.updateActionTypeFormGroup=function(t,e){if(this.actionTypeFormGroup=this.fb.group({}),t)switch(t){case u.d.openDashboard:case u.d.openDashboardState:case u.d.updateDashboardState:this.actionTypeFormGroup.addControl("targetDashboardStateId",this.fb.control(e?e.targetDashboardStateId:null,t===u.d.openDashboardState?[s.Validators.required]:[])),this.actionTypeFormGroup.addControl("setEntityId",this.fb.control(!e||e.setEntityId,[])),this.actionTypeFormGroup.addControl("stateEntityParamName",this.fb.control(e?e.stateEntityParamName:null,[])),t===u.d.openDashboard?(this.actionTypeFormGroup.addControl("openNewBrowserTab",this.fb.control(!!e&&e.openNewBrowserTab,[])),this.actionTypeFormGroup.addControl("targetDashboardId",this.fb.control(e?e.targetDashboardId:null,[s.Validators.required])),this.setupSelectedDashboardStateIds(e?e.targetDashboardId:null)):(t===u.d.openDashboardState&&(this.actionTypeFormGroup.addControl("openInSeparateDialog",this.fb.control(!!e&&e.openInSeparateDialog,[])),this.actionTypeFormGroup.addControl("dialogTitle",this.fb.control(e?e.dialogTitle:"",[])),this.actionTypeFormGroup.addControl("dialogHideDashboardToolbar",this.fb.control(!e||!Object(x.o)(e.dialogHideDashboardToolbar)||e.dialogHideDashboardToolbar,[])),this.actionTypeFormGroup.addControl("dialogWidth",this.fb.control(e?e.dialogWidth:null,[s.Validators.min(1),s.Validators.max(100)])),this.actionTypeFormGroup.addControl("dialogHeight",this.fb.control(e?e.dialogHeight:null,[s.Validators.min(1),s.Validators.max(100)]))),this.actionTypeFormGroup.addControl("openRightLayout",this.fb.control(!!e&&e.openRightLayout,[]))),this.setupFilteredDashboardStates();break;case u.d.custom:this.actionTypeFormGroup.addControl("customFunction",this.fb.control(e?e.customFunction:null,[]));break;case u.d.customPretty:this.actionTypeFormGroup.addControl("customAction",this.fb.control(Object(d.b)(e),[s.Validators.required]))}},e.prototype.setupSelectedDashboardStateIds=function(t){var e=this;this.selectedDashboardStateIds=this.actionTypeFormGroup.get("targetDashboardId").valueChanges.pipe(Object(m.a)((function(){e.targetDashboardStateSearchText=""})),Object(f.b)((function(t){return t?e.dashboardService.getDashboard(t):Object(l.a)(null)})),Object(h.a)((function(t){if(t){var n=(t=e.dashboardUtils.validateAndUpdateDashboard(t)).configuration.states;return Object.keys(n)}return[]})))},e.prototype.setupFilteredDashboardStates=function(){var t=this;this.targetDashboardStateSearchText="",this.filteredDashboardStates=this.actionTypeFormGroup.get("targetDashboardStateId").valueChanges.pipe(Object(g.a)(""),Object(h.a)((function(t){return t||""})),Object(f.b)((function(e){return t.fetchDashboardStates(e)})))},e.prototype.fetchDashboardStates=function(t){var e=this;return this.targetDashboardStateSearchText=t,this.widgetActionFormGroup.get("type").value===u.d.openDashboard?this.selectedDashboardStateIds.pipe(Object(h.a)((function(n){var i=t?n.filter(e.createFilterForDashboardState(t)):n;return i&&i.length?i:[t]}))):Object(l.a)(this.data.callbacks.fetchDashboardStates(t))},e.prototype.createFilterForDashboardState=function(t){var e=t.toLowerCase();return function(t){return 0===t.toLowerCase().indexOf(e)}},e.prototype.clearTargetDashboardState=function(t){var e=this;void 0===t&&(t=""),this.dashboardStateInput.nativeElement.value=t,this.actionTypeFormGroup.get("targetDashboardStateId").patchValue(t,{emitEvent:!0}),setTimeout((function(){e.dashboardStateInput.nativeElement.blur(),e.dashboardStateInput.nativeElement.focus()}),0)},e.prototype.validateActionName=function(){var t=this;return function(e){var n=e.value;return t.checkActionName(n,t.widgetActionFormGroup.get("actionSourceId").value)?null:{actionNameNotUnique:!0}}},e.prototype.checkActionName=function(t,e){var n=!0;if(t&&e){var i=this.data.actionsData.actionsMap[e];if(i){var a=i.filter((function(e){return e.name===t}));a&&a.length&&a[0].id!==this.action.id&&(n=!1)}}return n},e.prototype.isErrorState=function(t,e){var n=this.errorStateMatcher.isErrorState(t,e),i=!!(t&&t.invalid&&this.submitted);return n||i},e.prototype.actionSourceName=function(t){return t?this.utils.customTranslation(t.name,t.name):""},e.prototype.cancel=function(){this.dialogRef.close(null)},e.prototype.save=function(){var t;this.submitted=!0,(t=this.widgetActionFormGroup.get("type").value===u.d.customPretty?Object(i.a)(Object(i.a)({},this.widgetActionFormGroup.value),this.actionTypeFormGroup.get("customAction").value):Object(i.a)(Object(i.a)({},this.widgetActionFormGroup.value),this.actionTypeFormGroup.value)).id=this.action.id,this.dialogRef.close(t)},e.\u0275fac=function(t){return new(t||e)(a["\u0275\u0275directiveInject"](C.Store),a["\u0275\u0275directiveInject"](S.Router),a["\u0275\u0275directiveInject"](p.a),a["\u0275\u0275directiveInject"](y.a),a["\u0275\u0275directiveInject"](b.a),a["\u0275\u0275directiveInject"](o.MAT_DIALOG_DATA),a["\u0275\u0275directiveInject"](r.ErrorStateMatcher,4),a["\u0275\u0275directiveInject"](o.MatDialogRef),a["\u0275\u0275directiveInject"](s.FormBuilder))},e.\u0275cmp=a["\u0275\u0275defineComponent"]({type:e,selectors:[["tb-widget-action-dialog"]],viewQuery:function(t,e){var n;(1&t&&a["\u0275\u0275viewQuery"](G,!0),2&t)&&(a["\u0275\u0275queryRefresh"](n=a["\u0275\u0275loadQuery"]())&&(e.dashboardStateInput=n.first))},features:[a["\u0275\u0275ProvidersFeature"]([{provide:r.ErrorStateMatcher,useExisting:e}]),a["\u0275\u0275InheritDefinitionFeature"]],decls:54,vars:43,consts:[[2,"min-width","480px",3,"formGroup","ngSubmit"],["color","primary"],["fxFlex",""],["mat-button","","mat-icon-button","","type","button",3,"click"],[1,"material-icons"],["color","warn","mode","indeterminate",4,"ngIf"],["style","height: 4px;",4,"ngIf"],["mat-dialog-content",""],[3,"disabled"],[1,"mat-block"],["translate",""],["required","","formControlName","actionSourceId"],[3,"value",4,"ngFor","ngForOf"],[4,"ngIf"],["required","","matInput","","formControlName","name"],[3,"innerHTML",4,"ngIf"],["formControlName","icon"],["required","","formControlName","type"],["fxLayout","column",3,"formGroup","ngSwitch"],[3,"ngSwitchCase"],["mat-dialog-actions","","fxLayoutAlign","end center"],["mat-button","","color","primary","type","button","cdkFocusInitial","",3,"disabled","click"],["mat-raised-button","","color","primary","type","submit",3,"disabled"],["color","warn","mode","indeterminate"],[2,"height","4px"],[3,"value"],[3,"innerHTML"],["translate","",1,"mat-caption","tb-required",2,"padding-left","3px","padding-bottom","10px","color","rgba(0,0,0,0.57)"],["formControlName","targetDashboardId","required","",3,"selectFirstDashboard"],["matInput","","type","text","formControlName","targetDashboardStateId",3,"placeholder","required","matAutocomplete"],["dashboardStateInput",""],["type","button","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click",4,"ngIf"],[1,"tb-autocomplete"],["targetDashboardStateAutocomplete","matAutocomplete"],["type","button","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click"],["formControlName","openRightLayout"],["formControlName","openNewBrowserTab"],["formControlName","setEntityId"],["floatLabel","always","class","mat-block",4,"ngIf"],["floatLabel","always",1,"mat-block"],["matInput","","formControlName","stateEntityParamName",3,"placeholder"],["formControlName","openInSeparateDialog"],["matInput","","formControlName","dialogTitle"],["formControlName","dialogHideDashboardToolbar"],["type","number","min","1","max","100","step","1","matInput","","formControlName","dialogWidth"],["type","number","min","1","max","100","step","1","matInput","","formControlName","dialogHeight"],["formControlName","customFunction",3,"functionArgs","validationArgs","editorCompleter"],["formControlName","customAction"]],template:function(t,e){1&t&&(a["\u0275\u0275elementStart"](0,"form",0),a["\u0275\u0275listener"]("ngSubmit",(function(){return e.save()})),a["\u0275\u0275elementStart"](1,"mat-toolbar",1),a["\u0275\u0275elementStart"](2,"h2"),a["\u0275\u0275text"](3),a["\u0275\u0275pipe"](4,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](5,"span",2),a["\u0275\u0275elementStart"](6,"button",3),a["\u0275\u0275listener"]("click",(function(){return e.cancel()})),a["\u0275\u0275elementStart"](7,"mat-icon",4),a["\u0275\u0275text"](8,"close"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275template"](9,B,1,0,"mat-progress-bar",5),a["\u0275\u0275pipe"](10,"async"),a["\u0275\u0275template"](11,U,1,0,"div",6),a["\u0275\u0275pipe"](12,"async"),a["\u0275\u0275elementStart"](13,"div",7),a["\u0275\u0275elementStart"](14,"fieldset",8),a["\u0275\u0275pipe"](15,"async"),a["\u0275\u0275elementStart"](16,"mat-form-field",9),a["\u0275\u0275elementStart"](17,"mat-label",10),a["\u0275\u0275text"](18,"widget-config.action-source"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](19,"mat-select",11),a["\u0275\u0275template"](20,q,2,2,"mat-option",12),a["\u0275\u0275pipe"](21,"keyvalue"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275template"](22,W,3,3,"mat-error",13),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](23,"mat-form-field",9),a["\u0275\u0275elementStart"](24,"mat-label",10),a["\u0275\u0275text"](25,"widget-config.action-name"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](26,"input",14),a["\u0275\u0275template"](27,z,3,3,"mat-error",13),a["\u0275\u0275template"](28,K,2,3,"mat-error",15),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](29,"tb-material-icon-select",16),a["\u0275\u0275elementStart"](30,"mat-form-field",9),a["\u0275\u0275elementStart"](31,"mat-label",10),a["\u0275\u0275text"](32,"widget-config.action-type"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](33,"mat-select",17),a["\u0275\u0275template"](34,H,3,4,"mat-option",12),a["\u0275\u0275elementEnd"](),a["\u0275\u0275template"](35,$,3,3,"mat-error",13),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](36,"section",18),a["\u0275\u0275template"](37,Q,3,1,"ng-template",19),a["\u0275\u0275template"](38,Z,10,10,"ng-template",19),a["\u0275\u0275template"](39,tt,3,3,"ng-template",19),a["\u0275\u0275template"](40,et,3,3,"ng-template",19),a["\u0275\u0275template"](41,it,4,4,"ng-template",19),a["\u0275\u0275template"](42,ct,4,4,"ng-template",19),a["\u0275\u0275template"](43,ut,1,5,"ng-template",19),a["\u0275\u0275template"](44,mt,1,0,"ng-template",19),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](45,"div",20),a["\u0275\u0275elementStart"](46,"button",21),a["\u0275\u0275listener"]("click",(function(){return e.cancel()})),a["\u0275\u0275pipe"](47,"async"),a["\u0275\u0275text"](48),a["\u0275\u0275pipe"](49,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](50,"button",22),a["\u0275\u0275pipe"](51,"async"),a["\u0275\u0275text"](52),a["\u0275\u0275pipe"](53,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()),2&t&&(a["\u0275\u0275property"]("formGroup",e.widgetActionFormGroup),a["\u0275\u0275advance"](3),a["\u0275\u0275textInterpolate"](a["\u0275\u0275pipeBind1"](4,25,e.isAdd?"widget-config.add-action":"widget-config.edit-action")),a["\u0275\u0275advance"](6),a["\u0275\u0275property"]("ngIf",a["\u0275\u0275pipeBind1"](10,27,e.isLoading$)),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("ngIf",!a["\u0275\u0275pipeBind1"](12,29,e.isLoading$)),a["\u0275\u0275advance"](3),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](15,31,e.isLoading$)),a["\u0275\u0275advance"](6),a["\u0275\u0275property"]("ngForOf",a["\u0275\u0275pipeBind1"](21,33,e.data.actionsData.actionSources)),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("ngIf",e.widgetActionFormGroup.get("actionSourceId").hasError("required")),a["\u0275\u0275advance"](5),a["\u0275\u0275property"]("ngIf",e.widgetActionFormGroup.get("name").hasError("required")),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",e.widgetActionFormGroup.get("name").hasError("actionNameNotUnique")),a["\u0275\u0275advance"](6),a["\u0275\u0275property"]("ngForOf",e.widgetActionTypes),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",e.widgetActionFormGroup.get("type").hasError("required")),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("formGroup",e.actionTypeFormGroup)("ngSwitch",e.widgetActionFormGroup.get("type").value),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngSwitchCase",e.widgetActionType.openDashboard),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngSwitchCase",e.widgetActionFormGroup.get("type").value===e.widgetActionType.openDashboardState||e.widgetActionFormGroup.get("type").value===e.widgetActionType.updateDashboardState||e.widgetActionFormGroup.get("type").value===e.widgetActionType.openDashboard?e.widgetActionFormGroup.get("type").value:""),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngSwitchCase",e.widgetActionFormGroup.get("type").value===e.widgetActionType.openDashboardState||e.widgetActionFormGroup.get("type").value===e.widgetActionType.updateDashboardState?e.widgetActionFormGroup.get("type").value:""),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngSwitchCase",e.widgetActionFormGroup.get("type").value===e.widgetActionType.openDashboard?e.widgetActionFormGroup.get("type").value:""),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngSwitchCase",e.widgetActionFormGroup.get("type").value===e.widgetActionType.openDashboardState||e.widgetActionFormGroup.get("type").value===e.widgetActionType.updateDashboardState||e.widgetActionFormGroup.get("type").value===e.widgetActionType.openDashboard?e.widgetActionFormGroup.get("type").value:""),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngSwitchCase",e.widgetActionFormGroup.get("type").value===e.widgetActionType.openDashboardState?e.widgetActionFormGroup.get("type").value:""),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngSwitchCase",e.widgetActionType.custom),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngSwitchCase",e.widgetActionType.customPretty),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](47,35,e.isLoading$)),a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](49,37,"action.cancel")," "),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](51,39,e.isLoading$)||e.widgetActionFormGroup.invalid||e.actionTypeFormGroup.invalid||!e.widgetActionFormGroup.dirty&&!e.actionTypeFormGroup.dirty),a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](53,41,e.isAdd?"action.add":"action.save")," "))},directives:[s["\u0275angular_packages_forms_forms_y"],s.NgControlStatusGroup,s.FormGroupDirective,w.MatToolbar,E.b,I.MatButton,O.MatIcon,T.NgIf,o.MatDialogContent,M.MatFormField,M.MatLabel,F.TranslateDirective,P.MatSelect,s.RequiredValidator,s.NgControlStatus,s.FormControlName,T.NgForOf,D.MatInput,s.DefaultValueAccessor,k.a,E.f,T.NgSwitch,T.NgSwitchCase,o.MatDialogActions,E.e,j.MatProgressBar,r.MatOption,M.MatError,A.a,_.MatAutocompleteTrigger,_.MatAutocomplete,M.MatSuffix,L.MatCheckbox,s.NumberValueAccessor,V.a,R.a],pipes:[F.TranslatePipe,T.AsyncPipe,T.KeyValuePipe,N.a],styles:["[_nghost-%COMP%]     .mat-checkbox-label{white-space:normal}"]}),e}(c.a);!function(){a["\u0275setClassMetadata"](ft,[{type:a.Component,args:[{selector:"tb-widget-action-dialog",templateUrl:"./widget-action-dialog.component.html",providers:[{provide:r.ErrorStateMatcher,useExisting:ft}],styleUrls:["./widget-action-dialog.component.scss"]}]}],(function(){return[{type:C.Store},{type:S.Router},{type:p.a},{type:y.a},{type:b.a},{type:void 0,decorators:[{type:a.Inject,args:[o.MAT_DIALOG_DATA]}]},{type:r.ErrorStateMatcher,decorators:[{type:a.SkipSelf}]},{type:o.MatDialogRef},{type:s.FormBuilder}]}),{dashboardStateInput:[{type:a.ViewChild,args:["dashboardStateInput"]}]})}()},PGJw:function(t,e,n){"use strict";var i;n.d(e,"b",(function(){return i})),n.d(e,"e",(function(){return s})),n.d(e,"c",(function(){return a})),n.d(e,"d",(function(){return r})),n.d(e,"a",(function(){return o})),function(t){t.HTTP="HTTP",t.HTTPS="HTTPS",t.MIXED="MIXED"}(i||(i={}));var a,r,o,s=new Map([[i.HTTP,"admin.oauth2.domain-schema-http"],[i.HTTPS,"admin.oauth2.domain-schema-https"],[i.MIXED,"admin.oauth2.domain-schema-mixed"]]);!function(t){t.BASIC="BASIC",t.CUSTOM="CUSTOM",t.GITHUB="GITHUB"}(a||(a={})),function(t){t.DOMAIN="DOMAIN",t.EMAIL="EMAIL",t.CUSTOM="CUSTOM"}(r||(r={})),function(t){t.BASIC="BASIC",t.POST="POST"}(o||(o={}))},PWf0:function(t,e,n){"use strict";n.d(e,"a",(function(){return x}));var i=n("fXoL"),a=n("3Pt+"),r=n("8LU1"),o=n("//Q6"),s=n("c1Lj"),l=n("l7P3"),c=n("kmnG"),d=n("sYmb"),p=n("d3UM"),u=n("ofXK"),m=n("FKr1"),f=n("Mfyf"),h=n("Yhx1");function g(t,e){if(1&t&&(i["\u0275\u0275elementStart"](0,"mat-option",8),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&t){var n=e.$implicit,a=i["\u0275\u0275nextContext"]();i["\u0275\u0275property"]("value",n),i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,2,a.smsProviderTypeTranslations.get(n))," ")}}function y(t,e){1&t&&(i["\u0275\u0275elementStart"](0,"mat-error"),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&t&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,1,"admin.sms-provider-type-required")," "))}function b(t,e){if(1&t&&i["\u0275\u0275element"](0,"tb-aws-sns-provider-configuration",9),2&t){var n=i["\u0275\u0275nextContext"]();i["\u0275\u0275property"]("required",n.required)}}function v(t,e){if(1&t&&i["\u0275\u0275element"](0,"tb-twilio-sms-provider-configuration",9),2&t){var n=i["\u0275\u0275nextContext"]();i["\u0275\u0275property"]("required",n.required)}}var x=function(){function t(t,e){this.store=t,this.fb=e,this.smsProviderType=s.a,this.smsProviderTypes=Object.keys(s.a),this.smsProviderTypeTranslations=s.f,this.propagateChange=function(t){}}return Object.defineProperty(t.prototype,"required",{get:function(){return this.requiredValue},set:function(t){this.requiredValue=Object(r.coerceBooleanProperty)(t)},enumerable:!1,configurable:!0}),t.prototype.registerOnChange=function(t){this.propagateChange=t},t.prototype.registerOnTouched=function(t){},t.prototype.ngOnInit=function(){var t=this;this.smsProviderConfigurationFormGroup=this.fb.group({type:[null,a.Validators.required],configuration:[null,Object(s.e)(!0)]}),this.smsProviderConfigurationFormGroup.valueChanges.subscribe((function(){t.updateModel()})),this.smsProviderConfigurationFormGroup.get("type").valueChanges.subscribe((function(){t.smsProviderTypeChanged()}))},t.prototype.setDisabledState=function(t){this.disabled=t,this.disabled?this.smsProviderConfigurationFormGroup.disable({emitEvent:!1}):this.smsProviderConfigurationFormGroup.enable({emitEvent:!1})},t.prototype.writeValue=function(t){var e=Object(o.e)(t),n=null==e?void 0:e.type;e&&delete e.type,this.smsProviderConfigurationFormGroup.patchValue({type:n},{emitEvent:!1}),this.smsProviderConfigurationFormGroup.patchValue({configuration:e},{emitEvent:!1})},t.prototype.smsProviderTypeChanged=function(){var t=this.smsProviderConfigurationFormGroup.get("type").value;this.smsProviderConfigurationFormGroup.patchValue({configuration:Object(s.b)(t)},{emitEvent:!1})},t.prototype.updateModel=function(){var t=null;this.smsProviderConfigurationFormGroup.valid&&((t=this.smsProviderConfigurationFormGroup.getRawValue().configuration).type=this.smsProviderConfigurationFormGroup.getRawValue().type),this.propagateChange(t)},t.\u0275fac=function(e){return new(e||t)(i["\u0275\u0275directiveInject"](l.Store),i["\u0275\u0275directiveInject"](a.FormBuilder))},t.\u0275cmp=i["\u0275\u0275defineComponent"]({type:t,selectors:[["tb-sms-provider-configuration"]],inputs:{required:"required",disabled:"disabled"},features:[i["\u0275\u0275ProvidersFeature"]([{provide:a.NG_VALUE_ACCESSOR,useExisting:Object(i.forwardRef)((function(){return t})),multi:!0}])],decls:10,vars:7,consts:[[3,"formGroup"],[1,"mat-block"],["translate",""],["formControlName","type",3,"required"],[3,"value",4,"ngFor","ngForOf"],[4,"ngIf"],[3,"ngSwitch"],[3,"ngSwitchCase"],[3,"value"],["formControlName","configuration",3,"required"]],template:function(t,e){1&t&&(i["\u0275\u0275elementStart"](0,"div",0),i["\u0275\u0275elementStart"](1,"mat-form-field",1),i["\u0275\u0275elementStart"](2,"mat-label",2),i["\u0275\u0275text"](3,"admin.sms-provider-type"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](4,"mat-select",3),i["\u0275\u0275template"](5,g,3,4,"mat-option",4),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](6,y,3,3,"mat-error",5),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](7,"div",6),i["\u0275\u0275template"](8,b,1,1,"ng-template",7),i["\u0275\u0275template"](9,v,1,1,"ng-template",7),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()),2&t&&(i["\u0275\u0275property"]("formGroup",e.smsProviderConfigurationFormGroup),i["\u0275\u0275advance"](4),i["\u0275\u0275property"]("required",e.required),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngForOf",e.smsProviderTypes),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",e.smsProviderConfigurationFormGroup.get("type").hasError("required")),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngSwitch",e.smsProviderConfigurationFormGroup.get("type").value),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngSwitchCase",e.smsProviderType.AWS_SNS),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngSwitchCase",e.smsProviderType.TWILIO))},directives:[a.NgControlStatusGroup,a.FormGroupDirective,c.MatFormField,c.MatLabel,d.TranslateDirective,p.MatSelect,a.NgControlStatus,a.FormControlName,a.RequiredValidator,u.NgForOf,u.NgIf,u.NgSwitch,u.NgSwitchCase,m.MatOption,c.MatError,f.a,h.a],pipes:[d.TranslatePipe],encapsulation:2}),t}();!function(){i["\u0275setClassMetadata"](x,[{type:i.Component,args:[{selector:"tb-sms-provider-configuration",templateUrl:"./sms-provider-configuration.component.html",styleUrls:[],providers:[{provide:a.NG_VALUE_ACCESSOR,useExisting:Object(i.forwardRef)((function(){return x})),multi:!0}]}]}],(function(){return[{type:l.Store},{type:a.FormBuilder}]}),{required:[{type:i.Input}],disabled:[{type:i.Input}]})}()},PdRd:function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));var i=n("0lYY"),a=n("fXoL"),r=n("2lgB"),o=n("mrSG"),s=n("3Tyt"),l=n("xw5a"),c=n("//Q6"),d=n("UZbx"),p=function(){function t(t,e){this.listener=t,this.telemetryService=e,this.alarmDataSubscriptionOptions=this.listener.alarmDataSubscriptionOptions,this.datasourceType=this.alarmDataSubscriptionOptions.datasourceType}return t.prototype.unsubscribe=function(){this.datasourceType===i.a.entity&&this.subscriber&&(this.subscriber.unsubscribe(),this.subscriber=null)},t.prototype.subscribe=function(){var t=this;if(this.subsTw=this.alarmDataSubscriptionOptions.subscriptionTimewindow,this.history=this.alarmDataSubscriptionOptions.subscriptionTimewindow&&Object(c.x)(this.alarmDataSubscriptionOptions.subscriptionTimewindow.fixedWindow),this.realtime=this.alarmDataSubscriptionOptions.subscriptionTimewindow&&Object(c.o)(this.alarmDataSubscriptionOptions.subscriptionTimewindow.realtimeWindowMs),this.datasourceType===i.a.entity){this.subscriber=new s.w(this.telemetryService),this.alarmDataCommand=new s.a;var e=this.alarmDataSubscriptionOptions.dataKeys.filter((function(t){return t.type===s.h.alarm})).map((function(t){return{type:l.e.ALARM_FIELD,key:t.name}})),n=this.alarmDataSubscriptionOptions.dataKeys.filter((function(t){return t.type===s.h.entityField})).map((function(t){return{type:l.e.ENTITY_FIELD,key:t.name}})),a=this.alarmDataSubscriptionOptions.dataKeys.filter((function(t){return t.type===s.h.attribute})).map((function(t){return{type:l.e.ATTRIBUTE,key:t.name}})),r=this.alarmDataSubscriptionOptions.dataKeys.filter((function(t){return t.type===s.h.timeseries})).map((function(t){return{type:l.e.TIME_SERIES,key:t.name}})),p=a.concat(r),u=this.alarmDataSubscriptionOptions.keyFilters;this.alarmDataSubscriptionOptions.additionalKeyFilters&&(u=u?u.concat(this.alarmDataSubscriptionOptions.additionalKeyFilters):this.alarmDataSubscriptionOptions.additionalKeyFilters),this.alarmDataCommand.query={entityFilter:this.alarmDataSubscriptionOptions.entityFilter,pageLink:Object(c.e)(this.alarmDataSubscriptionOptions.pageLink),keyFilters:u,alarmFields:e,entityFields:n,latestValues:p},this.history?(this.alarmDataCommand.query.pageLink.startTs=this.subsTw.fixedWindow.startTimeMs,this.alarmDataCommand.query.pageLink.endTs=this.subsTw.fixedWindow.endTimeMs):this.alarmDataCommand.query.pageLink.timeWindow=this.subsTw.realtimeWindowMs,this.subscriber.setTsOffset(this.subsTw.tsOffset),this.subscriber.subscriptionCommands.push(this.alarmDataCommand),this.subscriber.alarmData$.subscribe((function(e){e.data?t.onPageData(e.data,e.allowedEntities,e.totalEntities):e.update&&t.onDataUpdate(e.update)})),this.subscriber.subscribe()}else if(this.datasourceType===i.a.function){var m=Object(c.e)(d.j);m.createdTime+=this.subsTw.tsOffset,m.startTs+=this.subsTw.tsOffset;var f={data:[Object(o.a)(Object(o.a)({},m),{entityId:"1",latest:{}})],hasNext:!1,totalElements:1,totalPages:1};this.onPageData(f,1024,1)}},t.prototype.resetData=function(){this.alarmIdToDataIndex={};for(var t=0;t<this.pageData.data.length;t++){var e=this.pageData.data[t];this.alarmIdToDataIndex[e.id.id]=t}},t.prototype.onPageData=function(t,e,n){this.pageData=t,this.resetData(),this.listener.alarmsLoaded(t,e,n)},t.prototype.onDataUpdate=function(t){for(var e=0,n=t;e<n.length;e++){var i=n[e],a=this.alarmIdToDataIndex[i.id.id];Object(c.n)(a)&&a>=0&&(this.pageData.data[a]=i)}this.listener.alarmsUpdated(t,this.pageData)},t}(),u=function(){function t(t){this.telemetryService=t}return t.prototype.subscribeForAlarms=function(t,e,n){var a=t.alarmSource;if(t.alarmDataSubscriptionOptions=this.createAlarmSubscriptionOptions(t,e,n),a.type!==i.a.entity||a.entityFilter&&e)return t.subscription=new p(t,this.telemetryService),t.subscription.subscribe()},t.prototype.stopSubscription=function(t){t.subscription&&t.subscription.unsubscribe()},t.prototype.createAlarmSubscriptionOptions=function(t,e,n){var a=t.alarmSource,r=[];a.dataKeys.forEach((function(t){var e={name:t.name,type:t.type};r.push(e)}));var o={datasourceType:a.type,dataKeys:r,subscriptionTimewindow:Object(c.e)(t.subscriptionTimewindow)};return o.datasourceType===i.a.entity&&(o.entityFilter=a.entityFilter,o.pageLink=e,o.keyFilters=a.keyFilters,o.additionalKeyFilters=n),o},t.\u0275fac=function(e){return new(e||t)(a["\u0275\u0275inject"](r.a))},t.\u0275prov=a["\u0275\u0275defineInjectable"]({token:t,factory:t.\u0275fac,providedIn:"root"}),t}();!function(){a["\u0275setClassMetadata"](u,[{type:a.Injectable,args:[{providedIn:"root"}]}],(function(){return[{type:r.a}]}),null)}()},"Pmg/":function(t,e,n){"use strict";n.d(e,"a",(function(){return m}));var i=n("0lYY"),a=n("aX2P"),r=n("xw5a"),o=n("3Tyt"),s=n("//Q6"),l=n("9GfO"),c=n("oKkZ"),d=n("U3y+"),p=n("jtHE"),u=n("LRne"),m=function(){function t(t,e,n){this.listener=t,this.telemetryService=e,this.utils=n,this.entityDataSubscriptionOptions=this.listener.subscriptionOptions,this.datasourceType=this.entityDataSubscriptionOptions.datasourceType,this.dataKeys={},this.tickScheduledTime=0,this.tickElapsed=0,this.dataResolved=!1,this.started=!1,this.initializeSubscription()}return t.prototype.initializeSubscription=function(){for(var t=0;t<this.entityDataSubscriptionOptions.dataKeys.length;t++){var e=Object(s.e)(this.entityDataSubscriptionOptions.dataKeys[t]);e.index=t,this.datasourceType===i.a.function?e.func||(e.func=new Function("time","prevValue",e.funcBody)):e.postFuncBody&&!e.postFunc&&(e.postFunc=new Function("time","value","prevValue","timePrev","prevOrigValue",e.postFuncBody));var n=void 0;if(this.datasourceType===i.a.entity||this.datasourceType===i.a.entityCount||this.entityDataSubscriptionOptions.type===i.k.timeseries){n=this.datasourceType===i.a.function?e.name+"_"+e.index+"_"+e.type:e.name+"_"+e.type;var a=this.dataKeys[n];a||(a=[],this.dataKeys[n]=a),a.push(e)}else n=String(Object(s.E)(e)),this.dataKeys[n]=e;e.key=n}},t.prototype.unsubscribe=function(){this.timer&&(clearTimeout(this.timer),this.timer=null),this.datasourceType!==i.a.entity&&this.datasourceType!==i.a.entityCount||this.subscriber&&(this.subscriber.unsubscribe(),this.subscriber=null),this.dataAggregators&&(this.dataAggregators.forEach((function(t){t.destroy()})),this.dataAggregators=null),this.pageData=null},t.prototype.subscribe=function(){var t=this;if(this.entityDataResolveSubject=new p.a(1),this.entityDataSubscriptionOptions.isPaginatedDataSubscription&&(this.started=!0,this.dataResolved=!0,this.subsTw=this.entityDataSubscriptionOptions.subscriptionTimewindow,this.latestTsOffset=this.entityDataSubscriptionOptions.latestTsOffset,this.history=this.entityDataSubscriptionOptions.subscriptionTimewindow&&Object(s.x)(this.entityDataSubscriptionOptions.subscriptionTimewindow.fixedWindow),this.realtime=this.entityDataSubscriptionOptions.subscriptionTimewindow&&Object(s.o)(this.entityDataSubscriptionOptions.subscriptionTimewindow.realtimeWindowMs)),this.datasourceType===i.a.entity){var e=this.entityDataSubscriptionOptions.dataKeys.filter((function(t){return t.type===o.h.entityField})).map((function(t){return{type:r.e.ENTITY_FIELD,key:t.name}}));e.find((function(t){return"name"===t.key}))||e.push({type:r.e.ENTITY_FIELD,key:"name"}),e.find((function(t){return"label"===t.key}))||e.push({type:r.e.ENTITY_FIELD,key:"label"}),e.find((function(t){return"additionalInfo"===t.key}))||e.push({type:r.e.ENTITY_FIELD,key:"additionalInfo"}),this.attrFields=this.entityDataSubscriptionOptions.dataKeys.filter((function(t){return t.type===o.h.attribute})).map((function(t){return{type:r.e.ATTRIBUTE,key:t.name}})),this.tsFields=this.entityDataSubscriptionOptions.dataKeys.filter((function(t){return t.type===o.h.timeseries})).map((function(t){return{type:r.e.TIME_SERIES,key:t.name}})),this.latestValues=this.attrFields.concat(this.tsFields),this.subscriber=new o.w(this.telemetryService),this.dataCommand=new o.n;var n=this.entityDataSubscriptionOptions.keyFilters;this.entityDataSubscriptionOptions.additionalKeyFilters&&(n=n?n.concat(this.entityDataSubscriptionOptions.additionalKeyFilters):this.entityDataSubscriptionOptions.additionalKeyFilters),this.dataCommand.query={entityFilter:this.entityDataSubscriptionOptions.entityFilter,pageLink:this.entityDataSubscriptionOptions.pageLink,keyFilters:n,entityFields:e,latestValues:this.latestValues},this.entityDataSubscriptionOptions.isPaginatedDataSubscription&&(this.prepareSubscriptionCommands(this.dataCommand),this.entityDataSubscriptionOptions.type===i.k.timeseries?this.subscriber.setTsOffset(this.subsTw.tsOffset):this.subscriber.setTsOffset(this.latestTsOffset)),this.subscriber.subscriptionCommands.push(this.dataCommand),this.subscriber.entityData$.subscribe((function(e){e.data?t.onPageData(e.data):e.update&&t.onDataUpdate(e.update)})),this.subscriber.reconnect$.subscribe((function(){if(t.started){var e=t.entityDataSubscriptionOptions.isPaginatedDataSubscription?t.dataCommand:t.subsCommand;if(t.entityDataSubscriptionOptions.type===i.k.timeseries&&!t.history&&t.tsFields.length){var n=t.listener.updateRealtimeSubscription();t.subsTw=n,e.tsCmd.startTs=t.subsTw.startTs,e.tsCmd.timeWindow=t.subsTw.aggregation.timeWindow,e.tsCmd.interval=t.subsTw.aggregation.interval,e.tsCmd.limit=t.subsTw.aggregation.limit,e.tsCmd.agg=t.subsTw.aggregation.type,e.tsCmd.fetchLatestPreviousPoint=t.subsTw.aggregation.stateData,t.dataAggregators.forEach((function(t){t.reset(n)}))}t.entityDataSubscriptionOptions.type===i.k.timeseries?t.subscriber.setTsOffset(t.subsTw.tsOffset):t.subscriber.setTsOffset(t.latestTsOffset),e.query=t.dataCommand.query,t.subscriber.subscriptionCommands=[e]}else t.subscriber.subscriptionCommands=[t.dataCommand]})),this.subscriber.subscribe()}else if(this.datasourceType===i.a.function){var a=0;this.entityDataSubscriptionOptions.type===i.k.latest?a=this.entityDataSubscriptionOptions.latestTsOffset:this.entityDataSubscriptionOptions.subscriptionTimewindow&&(a=this.entityDataSubscriptionOptions.subscriptionTimewindow.tsOffset);var l={entityId:{id:c.a,entityType:d.b.DEVICE},timeseries:{},latest:{}},m=i.a.function;l.latest[r.e.ENTITY_FIELD]={name:{ts:Date.now()+a,value:m}};var f={data:[l],hasNext:!1,totalElements:1,totalPages:1};this.onPageData(f)}else if(this.datasourceType===i.a.entityCount){this.latestTsOffset=this.entityDataSubscriptionOptions.latestTsOffset,this.subscriber=new o.w(this.telemetryService),this.subscriber.setTsOffset(this.latestTsOffset),this.countCommand=new o.k;n=this.entityDataSubscriptionOptions.keyFilters;this.entityDataSubscriptionOptions.additionalKeyFilters&&(n=n?n.concat(this.entityDataSubscriptionOptions.additionalKeyFilters):this.entityDataSubscriptionOptions.additionalKeyFilters),this.countCommand.query={entityFilter:this.entityDataSubscriptionOptions.entityFilter,keyFilters:n},this.subscriber.subscriptionCommands.push(this.countCommand);var h={id:c.a,entityType:null},g=this.entityDataSubscriptionOptions.dataKeys[0],y=!1;this.subscriber.entityCount$.subscribe((function(e){var n,a,o,s;if(y){var l=[{entityId:h,latest:(o={},o[r.e.COUNT]=(s={},s[g.name]={ts:Date.now()+t.latestTsOffset,value:e.count+""},s),o),timeseries:{}}];t.onDataUpdate(l)}else{var c={data:[{entityId:h,latest:(n={},n[r.e.ENTITY_FIELD]={name:{ts:Date.now()+t.latestTsOffset,value:i.a.entityCount}},n[r.e.COUNT]=(a={},a[g.name]={ts:Date.now()+t.latestTsOffset,value:e.count+""},a),n),timeseries:{}}],hasNext:!1,totalElements:1,totalPages:1};t.onPageData(c),y=!0}})),this.subscriber.subscribe()}return this.entityDataSubscriptionOptions.isPaginatedDataSubscription?Object(u.a)(null):this.entityDataResolveSubject.asObservable()},t.prototype.start=function(){if(!this.entityDataSubscriptionOptions.isPaginatedDataSubscription){if(this.subsTw=this.entityDataSubscriptionOptions.subscriptionTimewindow,this.latestTsOffset=this.entityDataSubscriptionOptions.latestTsOffset,this.history=this.entityDataSubscriptionOptions.subscriptionTimewindow&&Object(s.x)(this.entityDataSubscriptionOptions.subscriptionTimewindow.fixedWindow),this.realtime=this.entityDataSubscriptionOptions.subscriptionTimewindow&&Object(s.o)(this.entityDataSubscriptionOptions.subscriptionTimewindow.realtimeWindowMs),this.prepareData(),this.datasourceType===i.a.entity){this.subsCommand=new o.n,this.subsCommand.cmdId=this.dataCommand.cmdId,this.prepareSubscriptionCommands(this.subsCommand);var t=!1;this.entityDataSubscriptionOptions.type===i.k.timeseries?this.subscriber.setTsOffset(this.subsTw.tsOffset):t=this.subscriber.setTsOffset(this.latestTsOffset),t?this.listener.forceReInit&&this.listener.forceReInit():this.subsCommand.isEmpty()||(this.subscriber.subscriptionCommands=[this.subsCommand],this.subscriber.update())}else this.datasourceType===i.a.entityCount?this.subscriber.setTsOffset(this.latestTsOffset)&&this.listener.forceReInit&&this.listener.forceReInit():this.datasourceType===i.a.function&&this.startFunction();this.started=!0}},t.prototype.prepareSubscriptionCommands=function(t){this.entityDataSubscriptionOptions.type===i.k.timeseries?this.tsFields.length>0&&(this.history?t.historyCmd={keys:this.tsFields.map((function(t){return t.key})),startTs:this.subsTw.fixedWindow.startTimeMs,endTs:this.subsTw.fixedWindow.endTimeMs,interval:this.subsTw.aggregation.interval,limit:this.subsTw.aggregation.limit,agg:this.subsTw.aggregation.type,fetchLatestPreviousPoint:this.subsTw.aggregation.stateData}:t.tsCmd={keys:this.tsFields.map((function(t){return t.key})),startTs:this.subsTw.startTs,timeWindow:this.subsTw.aggregation.timeWindow,interval:this.subsTw.aggregation.interval,limit:this.subsTw.aggregation.limit,agg:this.subsTw.aggregation.type,fetchLatestPreviousPoint:this.subsTw.aggregation.stateData}):this.entityDataSubscriptionOptions.type===i.k.latest&&this.latestValues.length>0&&(t.latestCmd={keys:this.latestValues})},t.prototype.startFunction=function(){this.frequency=1e3,this.entityDataSubscriptionOptions.type===i.k.timeseries&&(this.frequency=Math.min(this.entityDataSubscriptionOptions.subscriptionTimewindow.aggregation.interval,5e3)),this.tickScheduledTime=this.utils.currentPerfTime(),this.history?this.onTick(!0):this.timer=setTimeout(this.onTick.bind(this,!0),0)},t.prototype.prepareData=function(){if(this.timer&&(clearTimeout(this.timer),this.timer=null),this.dataAggregators&&this.dataAggregators.forEach((function(t){t.destroy()})),this.dataAggregators=[],this.resetData(),this.entityDataSubscriptionOptions.type===i.k.timeseries){var t=[];if(this.datasourceType===i.a.function)for(var e=0,n=Object.keys(this.dataKeys);e<n.length;e++){var a=n[e];this.dataKeys[a].forEach((function(e){t.push(e.name+"_"+e.index)}))}else t=this.tsFields?this.tsFields.map((function(t){return t.key})):[];for(var r=0;r<this.pageData.data.length;r++)this.datasourceType===i.a.function?this.dataAggregators[r]=this.createRealtimeDataAggregator(this.subsTw,t,o.h.function,r,this.notifyListener.bind(this)):t.length&&(this.dataAggregators[r]=this.createRealtimeDataAggregator(this.subsTw,t,o.h.timeseries,r,this.notifyListener.bind(this)))}},t.prototype.resetData=function(){this.datasourceData=[],this.entityIdToDataIndex={};for(var t=0;t<this.pageData.data.length;t++){var e=this.pageData.data[t];this.entityIdToDataIndex[e.entityId.id]=t,this.datasourceData[t]={};for(var n=0,a=Object.keys(this.dataKeys);n<a.length;n++){var r=a[n],o=this.dataKeys[r];if(this.datasourceType===i.a.entity||this.datasourceType===i.a.entityCount||this.entityDataSubscriptionOptions.type===i.k.timeseries)for(var l=o,c=0;c<l.length;c++)this.datasourceData[t][r+"_"+c]={data:[]};else this.datasourceData[t][r]={data:[]}}}if(this.datasourceOrigData=Object(s.e)(this.datasourceData),this.entityDataSubscriptionOptions.type===i.k.timeseries)for(var d=0,p=Object.keys(this.dataKeys);d<p.length;d++){r=p[d];this.dataKeys[r].forEach((function(t){delete t.lastUpdateTime}))}else if(this.entityDataSubscriptionOptions.type===i.k.latest)for(var u=0,m=Object.keys(this.dataKeys);u<m.length;u++){r=m[u];delete this.dataKeys[r].lastUpdateTime}},t.prototype.onPageData=function(t){var e=!this.pageData;if(!e&&!this.entityDataSubscriptionOptions.isPaginatedDataSubscription&&Object(r.y)(this.pageData,t))return this.listener.initialPageDataChanged&&this.listener.initialPageDataChanged(t),void 0;this.pageData=t,this.entityDataSubscriptionOptions.isPaginatedDataSubscription?this.prepareData():e&&this.resetData();for(var n=[],a=0;a<t.data.length;a++){var o=t.data[a];this.processEntityData(o,a,!1,(function(t,e,i){n[e]||(n[e]=[]),n[e][i]=t}))}this.dataResolved?((e||this.entityDataSubscriptionOptions.isPaginatedDataSubscription)&&this.listener.dataLoaded(t,n,this.listener.configDatasourceIndex,this.entityDataSubscriptionOptions.pageLink),this.entityDataSubscriptionOptions.isPaginatedDataSubscription&&e&&(this.datasourceType===i.a.function&&this.startFunction(),this.entityDataResolveSubject.next({pageData:t,data:n,datasourceIndex:this.listener.configDatasourceIndex,pageLink:this.entityDataSubscriptionOptions.pageLink}),this.entityDataResolveSubject.complete())):(this.dataResolved=!0,this.entityDataResolveSubject.next({pageData:t,data:n,datasourceIndex:this.listener.configDatasourceIndex,pageLink:this.entityDataSubscriptionOptions.pageLink}),this.entityDataResolveSubject.complete())},t.prototype.onDataUpdate=function(t){for(var e=0,n=t;e<n.length;e++){var i=n[e],a=this.entityIdToDataIndex[i.entityId.id];Object(s.n)(a)&&a>=0&&this.processEntityData(i,a,!0,this.notifyListener.bind(this))}},t.prototype.notifyListener=function(t,e,n,i){this.listener.dataUpdated(t,this.listener.configDatasourceIndex,e,n,i)},t.prototype.processEntityData=function(t,e,n,a){var s=this;if(this.entityDataSubscriptionOptions.type===i.k.latest&&t.latest)for(var l=0,c=Object.keys(t.latest);l<c.length;l++){var d=c[l],p=this.toSubscriptionData(t.latest[d],!1),u=Object(r.v)(r.e[d]);this.onData(p,u,e,!0,a)}if(this.entityDataSubscriptionOptions.type===i.k.timeseries&&t.timeseries){p=this.toSubscriptionData(t.timeseries,!0);if(this.dataAggregators&&this.dataAggregators[e]){var m=this.dataAggregators[e],f=void 0;n||(f=m.updateOnDataCb((function(t,n){s.onData(t,s.datasourceType===i.a.function?o.h.function:o.h.timeseries,e,n,a)}))),m.onData({data:p},!1,this.history,!0),f&&m.updateOnDataCb(f)}this.history||n||this.onData(p,o.h.timeseries,e,!0,a)}},t.prototype.onData=function(t,e,n,a,r){for(var o=this,s=0,l=Object.keys(t);s<l.length;s++)for(var c=l[s],d=t[c],p=c+"_"+e,u=this.dataKeys[p],m=function(t){var e=p+"_"+t;if(f.datasourceData[n][e].data){var s,l,c=u[t],m=[],h=void 0,g=void 0,y=!1;if(f.realtime?(h=[],g=[]):(h=f.datasourceData[n][e].data,g=f.datasourceOrigData[n][e].data),h.length>0?(s=h[h.length-1],l=g[g.length-1]):(s=[0,0],l=[0,0]),f.datasourceOrigData[n][e].data=[],f.entityDataSubscriptionOptions.type===i.k.timeseries)d.forEach((function(t){var i=t,a=i[0];o.datasourceOrigData[n][e].data.push(i);var r=o.convertValue(i[1]);c.postFunc&&(r=c.postFunc(a,r,s[1],l[0],l[1])),l=i,i=[a,r],m.push(i),s=i})),y=!0;else if(f.entityDataSubscriptionOptions.type===i.k.latest){if(d.length>0){var b=d[0],v=b[0];f.datasourceOrigData[n][e].data.push(b);var x=f.convertValue(b[1]);c.postFunc&&(x=c.postFunc(v,x,s[1],l[0],l[1])),b=[v,x],m.push(b)}y=!0}y&&(f.datasourceData[n][e].data=m,r(f.datasourceData[n][e],n,c.index,a))}},f=this,h=0;u&&h<u.length;h++)m(h)},t.prototype.isNumeric=function(t){return t-parseFloat(t)+1>=0},t.prototype.convertValue=function(t){return t&&this.isNumeric(t)&&Number(t).toString()===t?Number(t):t},t.prototype.toSubscriptionData=function(t,e){for(var n={},i=function(i){var a=t[i],r=[];if(e)a.forEach((function(t){r.push([t.ts,t.value])}));else{var o=a;r.push([o.ts,o.value])}n[i]=r},a=0,r=Object.keys(t);a<r.length;a++){i(r[a])}return n},t.prototype.createRealtimeDataAggregator=function(t,e,n,i,a){var r=this;return new l.a((function(t,e){r.onData(t,n,i,e,a)}),e,t,this.utils,this.entityDataSubscriptionOptions.ignoreDataUpdateOnIntervalTick)},t.prototype.generateSeries=function(t,e,n,i){var a,r=[],o=t.key+"_"+e,s=this.datasourceData[0][o].data;a=s.length>0?s[s.length-1]:[0,0];for(var l=n;l<i&&(this.timer||this.history);l+=this.frequency){var c=[l,t.func(l,a[1])];r.push(c),a=c}return r.length>0&&(t.lastUpdateTime=r[r.length-1][0]),r},t.prototype.generateLatest=function(t,e){var n,i=this.datasourceData[0][t.key].data;n=i.length>0?i[i.length-1]:[0,0];var a=Date.now()+this.latestTsOffset,r=[a,t.func(a,n[1])];this.datasourceData[0][t.key].data=[r],this.listener.dataUpdated(this.datasourceData[0][t.key],this.listener.configDatasourceIndex,0,t.index,e)},t.prototype.onTick=function(t){var e,n=this.utils.currentPerfTime();if(this.tickElapsed+=n-this.tickScheduledTime,this.tickScheduledTime=n,this.timer&&clearTimeout(this.timer),this.entityDataSubscriptionOptions.type===i.k.timeseries){var r=void 0,o=void 0,s=void 0,l={data:{}};this.history||(s=Math.floor(this.tickElapsed/this.frequency));var c=this.history?this.frequency:s*this.frequency;this.tickElapsed=this.tickElapsed-c;for(var d=0,p=Object.keys(this.dataKeys);d<p.length;d++){e=p[d];for(var u=this.dataKeys[e],m=0;m<u.length&&(this.timer||this.history);m++){var f=u[m];if(!r){if(this.realtime){if(f.lastUpdateTime)r=f.lastUpdateTime+this.frequency,o=f.lastUpdateTime+c;else if(o=(r=this.entityDataSubscriptionOptions.subscriptionTimewindow.startTs+this.entityDataSubscriptionOptions.subscriptionTimewindow.tsOffset)+this.entityDataSubscriptionOptions.subscriptionTimewindow.realtimeWindowMs+this.frequency,this.entityDataSubscriptionOptions.subscriptionTimewindow.aggregation.type===a.a.NONE){var h=o-this.frequency*this.entityDataSubscriptionOptions.subscriptionTimewindow.aggregation.limit;r=Math.max(h,r)}}else r=this.entityDataSubscriptionOptions.subscriptionTimewindow.fixedWindow.startTimeMs+this.entityDataSubscriptionOptions.subscriptionTimewindow.tsOffset,o=this.entityDataSubscriptionOptions.subscriptionTimewindow.fixedWindow.endTimeMs+this.entityDataSubscriptionOptions.subscriptionTimewindow.tsOffset;if(this.entityDataSubscriptionOptions.subscriptionTimewindow.quickInterval){var g=Object(a.z)().valueOf()+this.entityDataSubscriptionOptions.subscriptionTimewindow.tsOffset;o=Math.min(g,o)}}l.data[f.name+"_"+f.index]=this.generateSeries(f,m,r,o)}}this.dataAggregators&&this.dataAggregators.length&&this.dataAggregators[0].onData(l,!0,this.history,t)}else if(this.entityDataSubscriptionOptions.type===i.k.latest)for(var y=0,b=Object.keys(this.dataKeys);y<b.length;y++)e=b[y],this.generateLatest(this.dataKeys[e],t);this.history||(this.timer=setTimeout(this.onTick.bind(this,!0),this.frequency))},t}()},Q7pZ:function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var i=n("fXoL"),a=n("Y8nr"),r=n("tk/3"),o=function(){function t(t){this.http=t}return t.prototype.getAuditLogs=function(t,e){return this.http.get("/api/audit/logs"+t.toQuery(),Object(a.b)(e))},t.prototype.getAuditLogsByCustomerId=function(t,e,n){return this.http.get("/api/audit/logs/customer/"+t+e.toQuery(),Object(a.b)(n))},t.prototype.getAuditLogsByUserId=function(t,e,n){return this.http.get("/api/audit/logs/user/"+t+e.toQuery(),Object(a.b)(n))},t.prototype.getAuditLogsByEntityId=function(t,e,n){return this.http.get("/api/audit/logs/entity/"+t.entityType+"/"+t.id+e.toQuery(),Object(a.b)(n))},t.\u0275fac=function(e){return new(e||t)(i["\u0275\u0275inject"](r.b))},t.\u0275prov=i["\u0275\u0275defineInjectable"]({token:t,factory:t.\u0275fac,providedIn:"root"}),t}();!function(){i["\u0275setClassMetadata"](o,[{type:i.Injectable,args:[{providedIn:"root"}]}],(function(){return[{type:r.b}]}),null)}()},QTrg:function(t,e,n){"use strict";n.d(e,"a",(function(){return l}));var i=n("fXoL"),a=n("3Pt+"),r=n("8LU1"),o=n("JIJk"),s=n("l7P3"),l=function(){function t(t,e){this.store=t,this.fb=e,this.propagateChange=function(t){}}return Object.defineProperty(t.prototype,"required",{get:function(){return this.requiredValue},set:function(t){this.requiredValue=Object(r.coerceBooleanProperty)(t)},enumerable:!1,configurable:!0}),t.prototype.registerOnChange=function(t){this.propagateChange=t},t.prototype.registerOnTouched=function(t){},t.prototype.ngOnInit=function(){var t=this;this.defaultDeviceProfileTransportConfigurationFormGroup=this.fb.group({configuration:[null,a.Validators.required]}),this.defaultDeviceProfileTransportConfigurationFormGroup.valueChanges.subscribe((function(){t.updateModel()}))},t.prototype.setDisabledState=function(t){this.disabled=t,this.disabled?this.defaultDeviceProfileTransportConfigurationFormGroup.disable({emitEvent:!1}):this.defaultDeviceProfileTransportConfigurationFormGroup.enable({emitEvent:!1})},t.prototype.writeValue=function(t){this.defaultDeviceProfileTransportConfigurationFormGroup.patchValue({configuration:t},{emitEvent:!1})},t.prototype.updateModel=function(){var t=null;this.defaultDeviceProfileTransportConfigurationFormGroup.valid&&((t=this.defaultDeviceProfileTransportConfigurationFormGroup.getRawValue().configuration).type=o.j.DEFAULT),this.propagateChange(t)},t.\u0275fac=function(e){return new(e||t)(i["\u0275\u0275directiveInject"](s.Store),i["\u0275\u0275directiveInject"](a.FormBuilder))},t.\u0275cmp=i["\u0275\u0275defineComponent"]({type:t,selectors:[["tb-default-device-profile-transport-configuration"]],inputs:{required:"required",disabled:"disabled"},features:[i["\u0275\u0275ProvidersFeature"]([{provide:a.NG_VALUE_ACCESSOR,useExisting:Object(i.forwardRef)((function(){return t})),multi:!0}])],decls:1,vars:1,consts:[[2,"padding-bottom","16px",3,"formGroup"]],template:function(t,e){1&t&&i["\u0275\u0275element"](0,"form",0),2&t&&i["\u0275\u0275property"]("formGroup",e.defaultDeviceProfileTransportConfigurationFormGroup)},directives:[a["\u0275angular_packages_forms_forms_y"],a.NgControlStatusGroup,a.FormGroupDirective],encapsulation:2}),t}();!function(){i["\u0275setClassMetadata"](l,[{type:i.Component,args:[{selector:"tb-default-device-profile-transport-configuration",templateUrl:"./default-device-profile-transport-configuration.component.html",styleUrls:[],providers:[{provide:a.NG_VALUE_ACCESSOR,useExisting:Object(i.forwardRef)((function(){return l})),multi:!0}]}]}],(function(){return[{type:s.Store},{type:a.FormBuilder}]}),{required:[{type:i.Input}],disabled:[{type:i.Input}]})}()},QXrN:function(t,e,n){"use strict";n.d(e,"a",(function(){return O}));var i=n("mrSG"),a=n("RxGS"),r=n("fXoL"),o=n("l7P3"),s=n("0G7Z"),l=n("tk/3"),c=n("nhHW"),d=n("3Pt+"),p=n("DaoB"),u=n("1y+p"),m=n("j37L"),f=n("ktVl"),h=n("YnEf"),g=n("9D3k"),y=n("BsGH"),b=n("Bjlt"),v=n("21Fy"),x=n("S+vS"),C=n("g8Nv"),S=n("ofXK"),w=n("sYmb"),E=n("jhN1"),I=n("tyNb"),O=function(t){function e(e,n,i,a,r,o){var s=t.call(this,n)||this;return s.raf=e,s.store=n,s.fb=i,s.$injector=a,s.ctx=r,s.errorMessages=o,s.validators=d.Validators,s.ctx.$injector=a,s.ctx.deviceService=a.get(p.a),s.ctx.assetService=a.get(u.a),s.ctx.entityViewService=a.get(m.a),s.ctx.customerService=a.get(f.a),s.ctx.dashboardService=a.get(h.a),s.ctx.userService=a.get(g.a),s.ctx.attributeService=a.get(y.a),s.ctx.entityRelationService=a.get(b.a),s.ctx.entityService=a.get(v.a),s.ctx.dialogs=a.get(x.a),s.ctx.customDialog=a.get(C.a),s.ctx.date=a.get(S.DatePipe),s.ctx.translate=a.get(w.TranslateService),s.ctx.http=a.get(l.b),s.ctx.sanitizer=a.get(E.DomSanitizer),s.ctx.router=a.get(I.Router),s.ctx.$scope=s,s.ctx.defaultSubscription&&(s.executingRpcRequest=s.ctx.defaultSubscription.executingRpcRequest,s.rpcEnabled=s.ctx.defaultSubscription.rpcEnabled,s.rpcErrorText=s.ctx.defaultSubscription.rpcErrorText,s.rpcRejection=s.ctx.defaultSubscription.rpcRejection),s}return Object(i.d)(e,t),e.prototype.ngOnInit=function(){},e.prototype.ngOnDestroy=function(){},e.prototype.clearRpcError=function(){this.widgetContext.defaultSubscription&&this.widgetContext.defaultSubscription.clearRpcError()},e.prototype.showSuccessToast=function(t,e,n,i,a){void 0===e&&(e=1e3),void 0===n&&(n="bottom"),void 0===i&&(i="left"),this.ctx.showSuccessToast(t,e,n,i,a)},e.prototype.showErrorToast=function(t,e,n,i){void 0===e&&(e="bottom"),void 0===n&&(n="left"),this.ctx.showErrorToast(t,e,n,i)},e.prototype.showToast=function(t,e,n,i,a,r){void 0===i&&(i="bottom"),void 0===a&&(a="left"),this.ctx.showToast(t,e,n,i,a,r)},e.\u0275fac=function(t){return new(t||e)(r["\u0275\u0275directiveInject"](c.a),r["\u0275\u0275directiveInject"](o.Store),r["\u0275\u0275directiveInject"](d.FormBuilder),r["\u0275\u0275directiveInject"](r.Injector),r["\u0275\u0275directiveInject"]("widgetContext"),r["\u0275\u0275directiveInject"]("errorMessages"))},e.\u0275dir=r["\u0275\u0275defineDirective"]({type:e,features:[r["\u0275\u0275InheritDefinitionFeature"]]}),e}(a.a);!function(){r["\u0275setClassMetadata"](O,[{type:r.Directive}],(function(){return[{type:c.a,decorators:[{type:r.Inject,args:[c.a]}]},{type:o.Store,decorators:[{type:r.Inject,args:[o.Store]}]},{type:d.FormBuilder,decorators:[{type:r.Inject,args:[d.FormBuilder]}]},{type:r.Injector,decorators:[{type:r.Inject,args:[r.Injector]}]},{type:s.c,decorators:[{type:r.Inject,args:["widgetContext"]}]},{type:void 0,decorators:[{type:r.Inject,args:["errorMessages"]}]}]}),null)}()},Qrxw:function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var i=n("fXoL"),a=n("//Q6"),r=function(){function t(t){this.componentFactoryResolver=t,this.statesControllers={},this.statesControllerStates={}}return t.prototype.registerStatesController=function(t,e){var n=this.componentFactoryResolver.resolveComponentFactory(e);this.statesControllers[t]={factory:n}},t.prototype.getStateControllers=function(){return this.statesControllers},t.prototype.getStateController=function(t){return this.statesControllers[t]},t.prototype.preserveStateControllerState=function(t,e){this.statesControllerStates[t]=Object(a.e)(e)},t.prototype.withdrawStateControllerState=function(t){var e=this.statesControllerStates[t];return delete this.statesControllerStates[t],e},t.prototype.cleanupPreservedStates=function(){this.statesControllerStates={}},t.\u0275fac=function(e){return new(e||t)(i["\u0275\u0275inject"](i.ComponentFactoryResolver))},t.\u0275prov=i["\u0275\u0275defineInjectable"]({token:t,factory:t.\u0275fac}),t}();!function(){i["\u0275setClassMetadata"](r,[{type:i.Injectable}],(function(){return[{type:i.ComponentFactoryResolver}]}),null)}()},RFBu:function(t,e,n){"use strict";n.d(e,"a",(function(){return f}));var i=n("fXoL"),a=n("3Pt+"),r=n("xw5a"),o=n("XiUz"),s=n("kmnG"),l=n("d3UM"),c=n("ofXK"),d=n("cXYG"),p=n("FKr1"),u=n("sYmb");function m(t,e){if(1&t&&(i["\u0275\u0275elementStart"](0,"mat-option",5),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&t){var n=e.$implicit,a=i["\u0275\u0275nextContext"]();i["\u0275\u0275property"]("value",n),i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,2,a.booleanOperationTranslations.get(a.booleanOperationEnum[n]))," ")}}var f=function(){function t(t){this.fb=t,this.allowUserDynamicSource=!0,this.onlyUserDynamicSource=!1,this.valueTypeEnum=r.f,this.booleanOperations=Object.keys(r.a),this.booleanOperationEnum=r.a,this.booleanOperationTranslations=r.j,this.propagateChange=null}return t.prototype.ngOnInit=function(){var t=this;this.booleanFilterPredicateFormGroup=this.fb.group({operation:[r.a.EQUAL,[a.Validators.required]],value:[null,[a.Validators.required]]}),this.booleanFilterPredicateFormGroup.valueChanges.subscribe((function(){t.updateModel()}))},t.prototype.registerOnChange=function(t){this.propagateChange=t},t.prototype.registerOnTouched=function(t){},t.prototype.setDisabledState=function(t){this.disabled=t,this.disabled?this.booleanFilterPredicateFormGroup.disable({emitEvent:!1}):this.booleanFilterPredicateFormGroup.enable({emitEvent:!1})},t.prototype.writeValue=function(t){this.booleanFilterPredicateFormGroup.get("operation").patchValue(t.operation,{emitEvent:!1}),this.booleanFilterPredicateFormGroup.get("value").patchValue(t.value,{emitEvent:!1})},t.prototype.updateModel=function(){var t=null;this.booleanFilterPredicateFormGroup.valid&&((t=this.booleanFilterPredicateFormGroup.getRawValue()).type=r.g.BOOLEAN),this.propagateChange(t)},t.\u0275fac=function(e){return new(e||t)(i["\u0275\u0275directiveInject"](a.FormBuilder))},t.\u0275cmp=i["\u0275\u0275defineComponent"]({type:t,selectors:[["tb-boolean-filter-predicate"]],inputs:{disabled:"disabled",allowUserDynamicSource:"allowUserDynamicSource",onlyUserDynamicSource:"onlyUserDynamicSource"},features:[i["\u0275\u0275ProvidersFeature"]([{provide:a.NG_VALUE_ACCESSOR,useExisting:Object(i.forwardRef)((function(){return t})),multi:!0}])],decls:7,vars:8,consts:[["fxFlex","","fxLayout","row","fxLayoutAlign","start start","fxLayoutGap","8px",3,"formGroup"],["floatLabel","always","hideRequiredMarker","","fxFlex","30",1,"mat-block"],["required","","formControlName","operation",3,"placeholder"],[3,"value",4,"ngFor","ngForOf"],["fxFlex","70","formControlName","value",3,"allowUserDynamicSource","onlyUserDynamicSource","valueType"],[3,"value"]],template:function(t,e){1&t&&(i["\u0275\u0275elementStart"](0,"div",0),i["\u0275\u0275elementStart"](1,"mat-form-field",1),i["\u0275\u0275element"](2,"mat-label"),i["\u0275\u0275elementStart"](3,"mat-select",2),i["\u0275\u0275pipe"](4,"translate"),i["\u0275\u0275template"](5,m,3,4,"mat-option",3),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](6,"tb-filter-predicate-value",4),i["\u0275\u0275elementEnd"]()),2&t&&(i["\u0275\u0275property"]("formGroup",e.booleanFilterPredicateFormGroup),i["\u0275\u0275advance"](3),i["\u0275\u0275propertyInterpolate"]("placeholder",i["\u0275\u0275pipeBind1"](4,6,"filter.operation.operation")),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngForOf",e.booleanOperations),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("allowUserDynamicSource",e.allowUserDynamicSource)("onlyUserDynamicSource",e.onlyUserDynamicSource)("valueType",e.valueTypeEnum.BOOLEAN))},directives:[o.b,o.f,o.e,o.g,a.NgControlStatusGroup,a.FormGroupDirective,s.MatFormField,s.MatLabel,l.MatSelect,a.RequiredValidator,a.NgControlStatus,a.FormControlName,c.NgForOf,d.a,p.MatOption],pipes:[u.TranslatePipe],styles:["[_nghost-%COMP%]   .tb-hint[_ngcontent-%COMP%], [_nghost-%COMP%]     mat-form-field .mat-form-field-wrapper{padding-bottom:0}[_nghost-%COMP%]     mat-form-field .mat-form-field-wrapper .mat-form-field-infix{border-top-width:.2em;width:auto;min-width:auto}[_nghost-%COMP%]     mat-form-field .mat-form-field-wrapper .mat-form-field-underline{bottom:0}"]}),t}();!function(){i["\u0275setClassMetadata"](f,[{type:i.Component,args:[{selector:"tb-boolean-filter-predicate",templateUrl:"./boolean-filter-predicate.component.html",styleUrls:["./filter-predicate.scss"],providers:[{provide:a.NG_VALUE_ACCESSOR,useExisting:Object(i.forwardRef)((function(){return f})),multi:!0}]}]}],(function(){return[{type:a.FormBuilder}]}),{disabled:[{type:i.Input}],allowUserDynamicSource:[{type:i.Input}],onlyUserDynamicSource:[{type:i.Input}]})}()},RLvv:function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var i=n("mrSG"),a=n("Lm6k"),r={ctx:{description:"A reference to widget context that has all necessary API<br>and data used by widget instance.",meta:"object",type:'<a href="https://github.com/thingsboard/thingsboard/blob/13e6b10b7ab830e64d31b99614a9d95a1a25928a/ui-ngx/src/app/modules/home/models/widget-component.models.ts#L83">WidgetContext</a>',children:Object(i.a)({$container:{description:"Container element of the widget.<br>Can be used to dynamically access or modify widget DOM using jQuery API.",meta:"property",type:"jQuery Object"},$scope:{description:"Reference to the current widget component.<br>Can be used to access/modify component properties when widget is built using Angular approach.",meta:"property",type:'<a href="https://github.com/thingsboard/thingsboard/blob/13e6b10b7ab830e64d31b99614a9d95a1a25928a/ui-ngx/src/app/modules/home/models/widget-component.models.ts#L274">IDynamicWidgetComponent</a>'},width:{description:"Current width of widget container in pixels.",meta:"property",type:"number"},height:{description:"Current height of widget container in pixels.",meta:"property",type:"number"},isEdit:{description:"Indicates whether the dashboard is in in the view or editing state.",meta:"property",type:"boolean"},isMobile:{description:"Indicates whether the dashboard view is less then 960px width (default mobile breakpoint).",meta:"property",type:"boolean"},widgetConfig:{description:"Common widget configuration containing properties such as <code>color</code> (text color), <code>backgroundColor</code> (widget background color), etc.",meta:"property",type:'<a href="https://github.com/thingsboard/thingsboard/blob/13e6b10b7ab830e64d31b99614a9d95a1a25928a/ui-ngx/src/app/shared/models/widget.models.ts#L341">WidgetConfig</a>',children:{title:{description:"Widget title.",meta:"property",type:"string"},titleIcon:{description:"Widget title icon.",meta:"property",type:"string"},showTitle:{description:"Whether to show widget title.",meta:"property",type:"boolean"},showTitleIcon:{description:"Whether to show widget title icon.",meta:"property",type:"boolean"},iconColor:{description:"Widget title icon color.",meta:"property",type:"string"},iconSize:{description:"Widget title icon size.",meta:"property",type:"string"},titleTooltip:{description:"Widget title tooltip content.",meta:"property",type:"string"},dropShadow:{description:"Enable/disable widget card shadow.",meta:"property",type:"boolean"},enableFullscreen:{description:"Whether to enable fullscreen button on widget.",meta:"property",type:"boolean"},useDashboardTimewindow:{description:"Whether to use dashboard timewindow (applicable for timeseries widgets).",meta:"property",type:"boolean"},displayTimewindow:{description:"Whether to display timewindow (applicable for timeseries widgets).",meta:"property",type:"boolean"},showLegend:{description:"Whether to show legend.",meta:"property",type:"boolean"},legendConfig:{description:"Legend configuration.",meta:"property",type:'<a href="https://github.com/thingsboard/thingsboard/blob/13e6b10b7ab830e64d31b99614a9d95a1a25928a/ui-ngx/src/app/shared/models/widget.models.ts#L198">LegendConfig</a>',children:{position:{description:"Legend position. Possible values: <code>'top', 'bottom', 'left', 'right'</code>",meta:"property",type:'<a href="https://github.com/thingsboard/thingsboard/blob/13e6b10b7ab830e64d31b99614a9d95a1a25928a/ui-ngx/src/app/shared/models/widget.models.ts#L182">LegendPosition</a>'},direction:{description:"Legend direction. Possible values: <code>'column', 'row'</code>",meta:"property",type:'<a href="https://github.com/thingsboard/thingsboard/blob/13e6b10b7ab830e64d31b99614a9d95a1a25928a/ui-ngx/src/app/shared/models/widget.models.ts#L170">LegendDirection</a>'},showMin:{description:"Whether to display aggregated min values.",meta:"property",type:"boolean"},showMax:{description:"Whether to display aggregated max values.",meta:"property",type:"boolean"},showAvg:{description:"Whether to display aggregated average values.",meta:"property",type:"boolean"},showTotal:{description:"Whether to display aggregated total values.",meta:"property",type:"boolean"}}},timewindow:{description:"Timewindow configuration object",meta:"property",type:'<a href="https://github.com/thingsboard/thingsboard/blob/13e6b10b7ab830e64d31b99614a9d95a1a25928a/ui-ngx/src/app/shared/models/time/time.models.ts#L80">Timewindow</a>',children:{displayValue:{description:"Current timewindow display value.",meta:"property",type:"string"},hideInterval:{description:"Whether to hide interval selection in timewindow panel.",meta:"property",type:"boolean"},hideAggregation:{description:"Whether to hide aggregation selection in timewindow panel.",meta:"property",type:"boolean"},hideAggInterval:{description:"Whether to hide aggregation interval selection in timewindow panel.",meta:"property",type:"boolean"},selectedTab:{description:"Current selected timewindow type (0 - realtime, 1 - history).",meta:"property",type:"number"},realtime:{description:"Realtime timewindow configuration object.",meta:"property",type:'<a href="https://github.com/thingsboard/thingsboard/blob/13e6b10b7ab830e64d31b99614a9d95a1a25928a/ui-ngx/src/app/shared/models/time/time.models.ts#L39">IntervalWindow</a>',children:{interval:{description:"Timewindow aggregation interval in milliseconds",meta:"property",type:"number"},timewindowMs:{description:"Timewindow interval in milliseconds",meta:"property",type:"number"}}},history:{description:"History timewindow configuration object.",meta:"property",type:'<a href="https://github.com/thingsboard/thingsboard/blob/13e6b10b7ab830e64d31b99614a9d95a1a25928a/ui-ngx/src/app/shared/models/time/time.models.ts#L49">HistoryWindow</a>',children:{historyType:{description:"History timewindow type (0 - last interval, 1 - fixed)",meta:"property",type:"number"},interval:{description:"Timewindow aggregation interval in milliseconds",meta:"property",type:"number"},timewindowMs:{description:"Timewindow interval in milliseconds",meta:"property",type:"number"},fixedTimewindow:{description:"Fixed history timewindow configuration object",meta:"property",type:'<a href="https://github.com/thingsboard/thingsboard/blob/13e6b10b7ab830e64d31b99614a9d95a1a25928a/ui-ngx/src/app/shared/models/time/time.models.ts#L44">FixedWindow</a>',children:{startTimeMs:{description:"Timewindow start time in UTC milliseconds",meta:"property",type:"number"},endTimeMs:{description:"Timewindow end time in UTC milliseconds",meta:"property",type:"number"}}}}},aggregation:{description:"Timewindow aggregation configuration object.",meta:"property",type:'<a href="https://github.com/thingsboard/thingsboard/blob/13e6b10b7ab830e64d31b99614a9d95a1a25928a/ui-ngx/src/app/shared/models/time/time.models.ts#L74">Aggregation</a>',children:{interval:{description:"Aggregation interval in milliseconds",meta:"property",type:"number"},type:{description:"Aggregation type",meta:"property",type:'<a href="https://github.com/thingsboard/thingsboard/blob/13e6b10b7ab830e64d31b99614a9d95a1a25928a/ui-ngx/src/app/shared/models/time/time.models.ts#L54">AggregationType</a>'},limit:{description:"Maximum allowed datapoints when aggregation is disabled (<code>AggregationType == 'NONE'</code>)",meta:"property",type:"number"}}}}},mobileHeight:{description:"Widget height in mobile mode.",meta:"property",type:"number"},mobileOrder:{description:"Widget order in mobile mode.",meta:"property",type:"number"},color:{description:"Widget text color.",meta:"property",type:"string"},backgroundColor:{description:"Widget background color.",meta:"property",type:"string"},padding:{description:"Widget card padding.",meta:"property",type:"string"},margin:{description:"Widget card margin.",meta:"property",type:"string"},widgetStyle:{description:"Widget element style object.",meta:"property",type:"object"},titleStyle:{description:"Widget title element style object.",meta:"property",type:"object"},units:{description:"Optional property defining units text of values displayed by widget. Useful for simple widgets like cards or gauges.",meta:"property",type:"string"},decimals:{description:"Optional property defining how many positions should be used to display decimal part of the value number.",meta:"property",type:"number"},actions:{description:"Map of configured widget actions.",meta:"property",type:"object"},settings:{description:"Object holding widget settings according to widget type.",meta:"property",type:"object"},alarmSource:{description:"Configured alarm source for alarm widget type.",meta:"property",type:'<a href="https://github.com/thingsboard/thingsboard/blob/13e6b10b7ab830e64d31b99614a9d95a1a25928a/ui-ngx/src/app/shared/models/widget.models.ts#L250">Datasource</a>'},alarmSearchStatus:{description:"Configured default alarm search status for alarm widget type.",meta:"property",type:'<a href="https://github.com/thingsboard/thingsboard/blob/13e6b10b7ab830e64d31b99614a9d95a1a25928a/ui-ngx/src/app/shared/models/alarm.models.ts#L41">AlarmSearchStatus</a>'},alarmsPollingInterval:{description:"Configured alarms polling interval for alarm widget type.",meta:"property",type:"number"},alarmsMaxCountLoad:{description:"Configured maximum alarms to load for alarm widget type.",meta:"property",type:"number"},alarmsFetchSize:{description:"Configured alarms page size used to load alarms.",meta:"property",type:"number"},datasources:{description:"Array of configured widget datasources.",meta:"property",type:'Array&lt;<a href="https://github.com/thingsboard/thingsboard/blob/13e6b10b7ab830e64d31b99614a9d95a1a25928a/ui-ngx/src/app/shared/models/widget.models.ts#L250">Datasource</a>&gt;'}}},settings:{description:'Widget settings containing widget specific properties according to the defined <a href="https://thingsboard.io/docs/user-guide/contribution/widgets-development/#settings-schema-section">settings json schema</a>',meta:"property",type:"object"},datasources:{description:"Array of resolved widget datasources.",meta:"property",type:'Array&lt;<a href="https://github.com/thingsboard/thingsboard/blob/13e6b10b7ab830e64d31b99614a9d95a1a25928a/ui-ngx/src/app/shared/models/widget.models.ts#L250">Datasource</a>&gt;'},data:{description:"Array of latest datasources data.",meta:"property",type:'Array&lt;<a href="https://github.com/thingsboard/thingsboard/blob/13e6b10b7ab830e64d31b99614a9d95a1a25928a/ui-ngx/src/app/shared/models/widget.models.ts#L275">DatasourceData</a>&gt;'},timeWindow:{description:"Current widget timewindow (applicable for timeseries widgets).",meta:"property",type:'<a href="https://github.com/thingsboard/thingsboard/blob/13e6b10b7ab830e64d31b99614a9d95a1a25928a/ui-ngx/src/app/shared/models/time/time.models.ts#L104">WidgetTimewindow</a>'},units:{description:"Optional property defining units text of values displayed by widget. Useful for simple widgets like cards or gauges.",meta:"property",type:"string"},decimals:{description:"Optional property defining how many positions should be used to display decimal part of the value number.",meta:"property",type:"number"},hideTitlePanel:{description:"Manages visibility of widget title panel. Useful for widget with custom title panels or different states. <b>updateWidgetParams()</b> function must be called after this property change.",meta:"property",type:"boolean"},widgetTitle:{description:"If set, will override configured widget title text. <b>updateWidgetParams()</b> function must be called after this property change.",meta:"property",type:"string"},detectChanges:{description:"Trigger change detection for current widget. Must be invoked when widget HTML template bindings should be updated due to widget data changes.",meta:"function"},updateWidgetParams:{description:"Updates widget with runtime set properties such as <b>widgetTitle</b>, <b>hideTitlePanel</b>, etc. Must be invoked in order these properties changes take effect.",meta:"function"},defaultSubscription:{description:"Default widget subscription object contains all subscription information,<br>including current data, according to the widget type.",meta:"property",type:'<a href="https://github.com/thingsboard/thingsboard/blob/13e6b10b7ab830e64d31b99614a9d95a1a25928a/ui-ngx/src/app/core/api/widget-api.models.ts#L220">IWidgetSubscription</a>'},timewindowFunctions:{description:"Object with timewindow functions used to manage widget data time frame. Can by used by Time-series or Alarm widgets.",meta:"property",type:'<a href="https://github.com/thingsboard/thingsboard/blob/13e6b10b7ab830e64d31b99614a9d95a1a25928a/ui-ngx/src/app/core/api/widget-api.models.ts#L45">TimewindowFunctions</a>',children:{onUpdateTimewindow:{description:"This function can be used to update current subscription time frame<br>to historical one identified by <code>startTimeMs</code> and <code>endTimeMs</code> arguments.",meta:"function",args:[{name:"startTimeMs",description:"Timewindow start time in UTC milliseconds",type:"number"},{name:"endTimeMs",description:"Timewindow end time in UTC milliseconds",type:"number"}]},onResetTimewindow:{description:"Resets subscription time frame to default defined by widget timewindow component<br>or dashboard timewindow depending on widget settings.",meta:"function"}}},controlApi:{description:"Object that provides API functions for RPC (Control) widgets.",meta:"property",type:'<a href="https://github.com/thingsboard/thingsboard/blob/13e6b10b7ab830e64d31b99614a9d95a1a25928a/ui-ngx/src/app/core/api/widget-api.models.ts#L58">RpcApi</a>',children:{sendOneWayCommand:{description:"Sends one way (without response) RPC command to the device.",meta:"function",args:[{name:"method",description:"RPC method name",type:"string"},{name:"params",description:"RPC method params, custom json object",type:"object",optional:!0},{name:"timeout",description:"Maximum delay in milliseconds to wait until response/acknowledgement is received.",type:"number",optional:!0}],return:{description:"A command execution Observable.",type:"Observable&lt;any&gt;"}},sendTwoWayCommand:{description:"Sends two way (with response) RPC command to the device.",meta:"function",args:[{name:"method",description:"RPC method name",type:"string"},{name:"params",description:"RPC method params, custom json object",type:"object",optional:!0},{name:"timeout",description:"Maximum delay in milliseconds to wait until response/acknowledgement is received.",type:"number",optional:!0}],return:{description:"A command execution Observable of response body.",type:"Observable&lt;any&gt;"}}}},actionsApi:{description:"Set of API functions to work with user defined actions.",meta:"property",type:'<a href="https://github.com/thingsboard/thingsboard/blob/13e6b10b7ab830e64d31b99614a9d95a1a25928a/ui-ngx/src/app/core/api/widget-api.models.ts#L67">WidgetActionsApi</a>',children:{getActionDescriptors:{description:"Get list of action descriptors for provided <code>actionSourceId</code>.",meta:"function",args:[{name:"actionSourceId",description:"Id of widget action source",type:"string"}],return:{description:"The list of action descriptors",type:'Array&lt;<a href="https://github.com/thingsboard/thingsboard/blob/13e6b10b7ab830e64d31b99614a9d95a1a25928a/ui-ngx/src/app/shared/models/widget.models.ts#L323">WidgetActionDescriptor</a>&gt;'}},handleWidgetAction:{description:"Handle action produced by particular action source.",meta:"function",args:[{name:"$event",description:"DOM event object associated with action.",type:"Event"},{name:"descriptor",description:"An action descriptor.",type:'<a href="https://github.com/thingsboard/thingsboard/blob/13e6b10b7ab830e64d31b99614a9d95a1a25928a/ui-ngx/src/app/shared/models/widget.models.ts#L323">WidgetActionDescriptor</a>'},{name:"entityId",description:"Current entity id provided by action source if available.",type:a.a,optional:!0},{name:"entityName",description:"Current entity name provided by action source if available.",type:"string",optional:!0}]}}},stateController:{description:"Reference to Dashboard state controller, providing API to manage current dashboard state.",meta:"property",type:'<a href="https://github.com/thingsboard/thingsboard/blob/13e6b10b7ab830e64d31b99614a9d95a1a25928a/ui-ngx/src/app/core/api/widget-api.models.ts#L121">IStateController</a>',children:{openState:{description:"Navigate to new dashboard state.",meta:"function",args:[{name:"id",description:"An id of the target dashboard state.",type:"string"},{name:"params",description:"An object with state parameters to use by the new state.",type:'<a href="https://github.com/thingsboard/thingsboard/blob/13e6b10b7ab830e64d31b99614a9d95a1a25928a/ui-ngx/src/app/core/api/widget-api.models.ts#L111">StateParams</a>',optional:!0},{name:"openRightLayout",description:"An optional boolean argument to force open right dashboard layout if present in mobile view mode.",type:"boolean",optional:!0}]},pushAndOpenState:{description:"Navigate to new dashboard state and adding intermediate states.",meta:"function",args:[{name:"id",description:"An array state object of the target dashboard state.",type:'Array <a href="https://github.com/thingsboard/thingsboard/blob/13e6b10b7ab830e64d31b99614a9d95a1a25928a/ui-ngx/src/app/core/api/widget-api.models.ts#L140">StateObject</a>'},{name:"openRightLayout",description:"An optional boolean argument to force open right dashboard layout if present in mobile view mode.",type:"boolean",optional:!0}]},updateState:{description:"Updates current dashboard state.",meta:"function",args:[{name:"id",description:"An optional id of the target dashboard state to replace current state id.",type:"string",optional:!0},{name:"params",description:"An object with state parameters to update current state parameters.",type:'<a href="https://github.com/thingsboard/thingsboard/blob/13e6b10b7ab830e64d31b99614a9d95a1a25928a/ui-ngx/src/app/core/api/widget-api.models.ts#L111">StateParams</a>',optional:!0},{name:"openRightLayout",description:"An optional boolean argument to force open right dashboard layout if present in mobile view mode.",type:"boolean",optional:!0}]},getStateId:{description:"Get current dashboard state id.",meta:"function",return:{description:"current dashboard state id.",type:"string"}},getStateParams:{description:"Get current dashboard state parameters.",meta:"function",return:{description:"current dashboard state parameters.",type:'<a href="https://github.com/thingsboard/thingsboard/blob/13e6b10b7ab830e64d31b99614a9d95a1a25928a/ui-ngx/src/app/core/api/widget-api.models.ts#L111">StateParams</a>'}},getStateParamsByStateId:{description:"Get state parameters for particular dashboard state identified by <code>id</code>.",meta:"function",args:[{name:"id",description:"An id of the target dashboard state.",type:"string"}],return:{description:"current dashboard state parameters.",type:'<a href="https://github.com/thingsboard/thingsboard/blob/13e6b10b7ab830e64d31b99614a9d95a1a25928a/ui-ngx/src/app/core/api/widget-api.models.ts#L111">StateParams</a>'}}}}},a.c)}}},RX5c:function(t,e,n){"use strict";n.d(e,"a",(function(){return p}));var i=n("fXoL"),a=n("3Pt+"),r=n("8LU1"),o=n("l7P3"),s=n("7EHt"),l=n("sYmb"),c=n("OUQ4");function d(t,e){1&t&&i["\u0275\u0275element"](0,"tb-tenant-profile-configuration",4)}var p=function(){function t(t,e){this.store=t,this.fb=e,this.propagateChange=function(t){}}return Object.defineProperty(t.prototype,"required",{get:function(){return this.requiredValue},set:function(t){this.requiredValue=Object(r.coerceBooleanProperty)(t)},enumerable:!1,configurable:!0}),t.prototype.registerOnChange=function(t){this.propagateChange=t},t.prototype.registerOnTouched=function(t){},t.prototype.ngOnInit=function(){var t=this;this.tenantProfileDataFormGroup=this.fb.group({configuration:[null,a.Validators.required]}),this.tenantProfileDataFormGroup.valueChanges.subscribe((function(){t.updateModel()}))},t.prototype.setDisabledState=function(t){this.disabled=t,this.disabled?this.tenantProfileDataFormGroup.disable({emitEvent:!1}):this.tenantProfileDataFormGroup.enable({emitEvent:!1})},t.prototype.writeValue=function(t){this.tenantProfileDataFormGroup.patchValue({configuration:null==t?void 0:t.configuration},{emitEvent:!1})},t.prototype.updateModel=function(){var t=null;this.tenantProfileDataFormGroup.valid&&(t=this.tenantProfileDataFormGroup.getRawValue()),this.propagateChange(t)},t.\u0275fac=function(e){return new(e||t)(i["\u0275\u0275directiveInject"](o.Store),i["\u0275\u0275directiveInject"](a.FormBuilder))},t.\u0275cmp=i["\u0275\u0275defineComponent"]({type:t,selectors:[["tb-tenant-profile-data"]],inputs:{required:"required",disabled:"disabled"},features:[i["\u0275\u0275ProvidersFeature"]([{provide:a.NG_VALUE_ACCESSOR,useExisting:Object(i.forwardRef)((function(){return t})),multi:!0}])],decls:7,vars:2,consts:[[2,"padding-bottom","16px",3,"formGroup"],[3,"expanded"],["translate",""],["matExpansionPanelContent",""],["formControlName","configuration","required",""]],template:function(t,e){1&t&&(i["\u0275\u0275elementStart"](0,"form",0),i["\u0275\u0275elementStart"](1,"mat-expansion-panel",1),i["\u0275\u0275elementStart"](2,"mat-expansion-panel-header"),i["\u0275\u0275elementStart"](3,"mat-panel-title"),i["\u0275\u0275elementStart"](4,"div",2),i["\u0275\u0275text"](5,"tenant-profile.profile-configuration"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](6,d,1,0,"ng-template",3),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()),2&t&&(i["\u0275\u0275property"]("formGroup",e.tenantProfileDataFormGroup),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("expanded",!0))},directives:[a["\u0275angular_packages_forms_forms_y"],a.NgControlStatusGroup,a.FormGroupDirective,s.MatExpansionPanel,s.MatExpansionPanelHeader,s.MatExpansionPanelTitle,l.TranslateDirective,s.MatExpansionPanelContent,c.a,a.NgControlStatus,a.FormControlName,a.RequiredValidator],encapsulation:2}),t}();!function(){i["\u0275setClassMetadata"](p,[{type:i.Component,args:[{selector:"tb-tenant-profile-data",templateUrl:"./tenant-profile-data.component.html",styleUrls:[],providers:[{provide:a.NG_VALUE_ACCESSOR,useExisting:Object(i.forwardRef)((function(){return p})),multi:!0}]}]}],(function(){return[{type:o.Store},{type:a.FormBuilder}]}),{required:[{type:i.Input}],disabled:[{type:i.Input}]})}()},Rm96:function(t,e,n){"use strict";n.d(e,"a",(function(){return h})),n.d(e,"b",(function(){return g}));var i=n("mrSG"),a=n("fXoL"),r=n("FKr1"),o=n("3Pt+"),s=n("RxGS"),l=n("l7P3"),c=n("rDax"),d=n("4t+N"),p=n("XiUz"),u=n("bTqV"),m=n("ofXK"),f=n("sYmb"),h=new a.InjectionToken("EditAttributeValuePanelData"),g=function(t){function e(e,n,i,a,r){var o=t.call(this,e)||this;return o.store=e,o.data=n,o.errorStateMatcher=i,o.overlayRef=a,o.fb=r,o.result=null,o.submitted=!1,o}return Object(i.d)(e,t),e.prototype.ngOnInit=function(){this.attributeFormGroup=this.fb.group({value:[this.data.attributeValue,[o.Validators.required]]})},e.prototype.isErrorState=function(t,e){var n=this.errorStateMatcher.isErrorState(t,e),i=!!(t&&t.invalid&&this.submitted);return n||i},e.prototype.cancel=function(){this.overlayRef.dispose()},e.prototype.update=function(){this.submitted=!0,this.result=this.attributeFormGroup.get("value").value,this.overlayRef.dispose()},e.\u0275fac=function(t){return new(t||e)(a["\u0275\u0275directiveInject"](l.Store),a["\u0275\u0275directiveInject"](h),a["\u0275\u0275directiveInject"](r.ErrorStateMatcher,4),a["\u0275\u0275directiveInject"](c.OverlayRef),a["\u0275\u0275directiveInject"](o.FormBuilder))},e.\u0275cmp=a["\u0275\u0275defineComponent"]({type:e,selectors:[["tb-edit-attribute-value-panel"]],features:[a["\u0275\u0275ProvidersFeature"]([{provide:r.ErrorStateMatcher,useExisting:e}]),a["\u0275\u0275InheritDefinitionFeature"]],decls:14,vars:16,consts:[[1,"mat-elevation-z1",2,"width","400px","padding","5px",3,"formGroup","ngSubmit"],[3,"disabled"],["formControlName","value","requiredText","attribute.value-required"],["fxLayout","row",1,"tb-panel-actions"],["fxFlex",""],["mat-button","","color","primary","type","button","cdkFocusInitial","",3,"disabled","click"],["mat-button","","mat-raised-button","","color","primary","type","submit",3,"disabled"]],template:function(t,e){1&t&&(a["\u0275\u0275elementStart"](0,"form",0),a["\u0275\u0275listener"]("ngSubmit",(function(){return e.update()})),a["\u0275\u0275elementStart"](1,"fieldset",1),a["\u0275\u0275pipe"](2,"async"),a["\u0275\u0275element"](3,"tb-value-input",2),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](4,"div",3),a["\u0275\u0275element"](5,"span",4),a["\u0275\u0275elementStart"](6,"button",5),a["\u0275\u0275listener"]("click",(function(){return e.cancel()})),a["\u0275\u0275pipe"](7,"async"),a["\u0275\u0275text"](8),a["\u0275\u0275pipe"](9,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](10,"button",6),a["\u0275\u0275pipe"](11,"async"),a["\u0275\u0275text"](12),a["\u0275\u0275pipe"](13,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()),2&t&&(a["\u0275\u0275property"]("formGroup",e.attributeFormGroup),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](2,6,e.isLoading$)),a["\u0275\u0275advance"](5),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](7,8,e.isLoading$)),a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](9,10,"action.cancel")," "),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](11,12,e.isLoading$)||e.attributeFormGroup.invalid||!e.attributeFormGroup.dirty),a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](13,14,"action.update")," "))},directives:[o["\u0275angular_packages_forms_forms_y"],o.NgControlStatusGroup,o.FormGroupDirective,d.a,o.NgControlStatus,o.FormControlName,p.f,p.b,u.MatButton],pipes:[m.AsyncPipe,f.TranslatePipe],styles:["[_nghost-%COMP%]{background-color:#f9f9f9}"]}),e}(s.a);!function(){a["\u0275setClassMetadata"](g,[{type:a.Component,args:[{selector:"tb-edit-attribute-value-panel",templateUrl:"./edit-attribute-value-panel.component.html",providers:[{provide:r.ErrorStateMatcher,useExisting:g}],styleUrls:["./edit-attribute-value-panel.component.scss"]}]}],(function(){return[{type:l.Store},{type:void 0,decorators:[{type:a.Inject,args:[h]}]},{type:r.ErrorStateMatcher,decorators:[{type:a.SkipSelf}]},{type:c.OverlayRef},{type:o.FormBuilder}]}),null)}()},S0ZR:function(t,e,n){"use strict";n.d(e,"a",(function(){return S}));var i=n("mrSG"),a=n("fXoL"),r=n("FKr1"),o=n("0IaG"),s=n("gmuX"),l=n("xw5a"),c=n("l7P3"),d=n("tyNb"),p=n("3Pt+"),u=n("sYmb"),m=n("/t3+"),f=n("XiUz"),h=n("bTqV"),g=n("NFeN"),y=n("bSwM"),b=n("kmnG"),v=n("qFsG"),x=n("ofXK");function C(t,e){if(1&t&&(a["\u0275\u0275elementStart"](0,"button",18),a["\u0275\u0275pipe"](1,"async"),a["\u0275\u0275text"](2),a["\u0275\u0275pipe"](3,"translate"),a["\u0275\u0275elementEnd"]()),2&t){var n=a["\u0275\u0275nextContext"]();a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](1,2,n.isLoading$)||n.filterUserInfoFormGroup.invalid||!n.filterUserInfoFormGroup.dirty),a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](3,4,"action.update")," ")}}var S=function(t){function e(e,n,i,a,r,o,s){var c=t.call(this,e,n,r)||this;c.store=e,c.router=n,c.data=i,c.errorStateMatcher=a,c.dialogRef=r,c.fb=o,c.translate=s,c.submitted=!1;var d=c.data.keyFilterPredicateUserInfo||Object(l.n)();return c.filterUserInfoFormGroup=c.fb.group({editable:[d.editable],label:[d.label],autogeneratedLabel:[d.autogeneratedLabel],order:[d.order]}),c.onAutogeneratedLabelChange(),c.data.readonly?c.filterUserInfoFormGroup.disable({emitEvent:!1}):c.filterUserInfoFormGroup.get("autogeneratedLabel").valueChanges.subscribe((function(){c.onAutogeneratedLabelChange()})),c}return Object(i.d)(e,t),e.prototype.onAutogeneratedLabelChange=function(){if(this.filterUserInfoFormGroup.get("autogeneratedLabel").value){var t=Object(l.B)(this.data.key,this.data.valueType,this.data.operation,this.translate);this.filterUserInfoFormGroup.get("label").patchValue(t,{emitEvent:!1}),this.filterUserInfoFormGroup.get("label").disable({emitEvent:!1})}else this.filterUserInfoFormGroup.get("label").enable({emitEvent:!1})},e.prototype.ngOnInit=function(){},e.prototype.isErrorState=function(t,e){var n=this.errorStateMatcher.isErrorState(t,e),i=!!(t&&t.invalid&&this.submitted);return n||i},e.prototype.cancel=function(){this.dialogRef.close(null)},e.prototype.save=function(){if(this.submitted=!0,this.filterUserInfoFormGroup.valid){var t=this.filterUserInfoFormGroup.getRawValue();this.dialogRef.close(t)}},e.\u0275fac=function(t){return new(t||e)(a["\u0275\u0275directiveInject"](c.Store),a["\u0275\u0275directiveInject"](d.Router),a["\u0275\u0275directiveInject"](o.MAT_DIALOG_DATA),a["\u0275\u0275directiveInject"](r.ErrorStateMatcher,4),a["\u0275\u0275directiveInject"](o.MatDialogRef),a["\u0275\u0275directiveInject"](p.FormBuilder),a["\u0275\u0275directiveInject"](u.TranslateService))},e.\u0275cmp=a["\u0275\u0275defineComponent"]({type:e,selectors:[["tb-filter-user-info-dialog"]],features:[a["\u0275\u0275ProvidersFeature"]([{provide:r.ErrorStateMatcher,useExisting:e}]),a["\u0275\u0275InheritDefinitionFeature"]],decls:33,vars:20,consts:[[2,"width","500px",3,"formGroup","ngSubmit"],["color","primary"],["fxFlex",""],["mat-icon-button","","type","button",3,"click"],[1,"material-icons"],["mat-dialog-content",""],["fxLayout","column",3,"disabled"],["formControlName","editable",2,"margin-bottom","16px"],["fxLayout","row","fxLayoutAlign","start center","fxLayoutGap","8px"],["fxFlex","",1,"mat-block"],["translate",""],["matInput","","formControlName","label"],["formControlName","autogeneratedLabel"],[1,"mat-block"],["matInput","","type","number","formControlName","order"],["mat-dialog-actions","","fxLayoutAlign","end center"],["mat-button","","color","primary","type","button","cdkFocusInitial","",3,"disabled","click"],["mat-raised-button","","color","primary","type","submit",3,"disabled",4,"ngIf"],["mat-raised-button","","color","primary","type","submit",3,"disabled"]],template:function(t,e){1&t&&(a["\u0275\u0275elementStart"](0,"form",0),a["\u0275\u0275listener"]("ngSubmit",(function(){return e.save()})),a["\u0275\u0275elementStart"](1,"mat-toolbar",1),a["\u0275\u0275elementStart"](2,"h2"),a["\u0275\u0275text"](3),a["\u0275\u0275pipe"](4,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](5,"span",2),a["\u0275\u0275elementStart"](6,"button",3),a["\u0275\u0275listener"]("click",(function(){return e.cancel()})),a["\u0275\u0275elementStart"](7,"mat-icon",4),a["\u0275\u0275text"](8,"close"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](9,"div",5),a["\u0275\u0275elementStart"](10,"fieldset",6),a["\u0275\u0275pipe"](11,"async"),a["\u0275\u0275elementStart"](12,"mat-checkbox",7),a["\u0275\u0275text"](13),a["\u0275\u0275pipe"](14,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](15,"div",8),a["\u0275\u0275elementStart"](16,"mat-form-field",9),a["\u0275\u0275elementStart"](17,"mat-label",10),a["\u0275\u0275text"](18,"filter.display-label"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](19,"input",11),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](20,"mat-checkbox",12),a["\u0275\u0275text"](21),a["\u0275\u0275pipe"](22,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](23,"mat-form-field",13),a["\u0275\u0275elementStart"](24,"mat-label",10),a["\u0275\u0275text"](25,"filter.order-priority"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](26,"input",14),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](27,"div",15),a["\u0275\u0275elementStart"](28,"button",16),a["\u0275\u0275listener"]("click",(function(){return e.cancel()})),a["\u0275\u0275pipe"](29,"async"),a["\u0275\u0275text"](30),a["\u0275\u0275pipe"](31,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275template"](32,C,4,6,"button",17),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()),2&t&&(a["\u0275\u0275property"]("formGroup",e.filterUserInfoFormGroup),a["\u0275\u0275advance"](3),a["\u0275\u0275textInterpolate"](a["\u0275\u0275pipeBind1"](4,8,e.data.readonly?"filter.filter-user-params":"filter.edit-filter-user-params")),a["\u0275\u0275advance"](7),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](11,10,e.isLoading$)),a["\u0275\u0275advance"](3),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](14,12,"filter.editable")," "),a["\u0275\u0275advance"](8),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](22,14,"filter.autogenerated-label")," "),a["\u0275\u0275advance"](7),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](29,16,e.isLoading$)),a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](31,18,e.data.readonly?"action.close":"action.cancel")," "),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("ngIf",!e.data.readonly))},directives:[p["\u0275angular_packages_forms_forms_y"],p.NgControlStatusGroup,p.FormGroupDirective,m.MatToolbar,f.b,h.MatButton,g.MatIcon,o.MatDialogContent,f.f,y.MatCheckbox,p.NgControlStatus,p.FormControlName,f.e,f.g,b.MatFormField,b.MatLabel,u.TranslateDirective,v.MatInput,p.DefaultValueAccessor,p.NumberValueAccessor,o.MatDialogActions,x.NgIf],pipes:[u.TranslatePipe,x.AsyncPipe],encapsulation:2}),e}(s.a);!function(){a["\u0275setClassMetadata"](S,[{type:a.Component,args:[{selector:"tb-filter-user-info-dialog",templateUrl:"./filter-user-info-dialog.component.html",providers:[{provide:r.ErrorStateMatcher,useExisting:S}],styleUrls:[]}]}],(function(){return[{type:c.Store},{type:d.Router},{type:void 0,decorators:[{type:a.Inject,args:[o.MAT_DIALOG_DATA]}]},{type:r.ErrorStateMatcher,decorators:[{type:a.SkipSelf}]},{type:o.MatDialogRef},{type:p.FormBuilder},{type:u.TranslateService}]}),null)}()},"SZX/":function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var i=n("fXoL"),a=n("U3y+"),r=n("XCsc"),o=n("0IaG"),s=function(){function t(t){this.dialog=t}return t.prototype.importEntities=function(t){switch(t){case a.b.DEVICE:return this.openImportDialogCSV(t,"device.import","device.device-file");case a.b.ASSET:return this.openImportDialogCSV(t,"asset.import","asset.asset-file")}},t.prototype.openImportDialogCSV=function(t,e,n){return this.dialog.open(r.a,{disableClose:!0,panelClass:["tb-dialog","tb-fullscreen-dialog"],data:{entityType:t,importTitle:e,importFileLabel:n}}).afterClosed()},t.\u0275fac=function(e){return new(e||t)(i["\u0275\u0275inject"](o.MatDialog))},t.\u0275prov=i["\u0275\u0275defineInjectable"]({token:t,factory:t.\u0275fac}),t}();!function(){i["\u0275setClassMetadata"](s,[{type:i.Injectable}],(function(){return[{type:o.MatDialog}]}),null)}()},T7OX:function(t,e,n){"use strict";n.d(e,"f",(function(){return o})),n.d(e,"g",(function(){return s})),n.d(e,"e",(function(){return l})),n.d(e,"c",(function(){return c})),n.d(e,"a",(function(){return d})),n.d(e,"b",(function(){return p})),n.d(e,"d",(function(){return u}));var i=n("//Q6"),a=n("7JTo"),r=n("U3y+");function o(t,e){for(var n=[],a=2;a<arguments.length;a++)n[a-2]=arguments[a];var r=null;if(Object(i.n)(t)&&t.length)try{var o=(r=new Function(e,t)).apply(null,n);Object(i.z)(o)&&(r=null)}catch(s){r=null}return r}function s(t){return'<mat-icon class="node-icon material-icons" role="img" aria-hidden="false">'+t+"</mat-icon>"}function l(t){return'<div class="node-icon" style="background-image: url('+t+');">&nbsp;</div>'}var c=function(t){var e=t.entity;return{parameters:{rootId:e.id.id,rootType:e.id.entityType,direction:a.b.FROM,relationTypeGroup:a.d.COMMON,maxLevel:1},filters:[{relationType:"Contains",entityTypes:[]}]}},d=function(t){var e="insert_drive_file",n=t.entity;if(n&&n.id&&n.id.entityType)switch(n.id.entityType){case"function":e="functions";break;case r.b.DEVICE:e="devices_other";break;case r.b.ASSET:e="domain";break;case r.b.TENANT:case r.b.CUSTOMER:e="supervisor_account";break;case r.b.USER:e="account_circle";break;case r.b.DASHBOARD:e="dashboards";break;case r.b.ALARM:e="notifications_active";break;case r.b.ENTITY_VIEW:e="view_quilt"}return{materialIcon:e}},p=function(t){return t.level<=4},u=function(t,e){var n=0;return t.entity.id.entityType&&e.entity.id.entityType?n=t.entity.id.entityType.localeCompare(e.entity.id.entityType):t.entity.id.entityType?n=1:e.entity.id.entityType&&(n=-1),0===n&&(n=t.entity.name.localeCompare(e.entity.name)),n}},TRkj:function(t,e,n){"use strict";n.d(e,"a",(function(){return vt}));var i=n("mrSG"),a=n("fXoL"),r=n("0IaG"),o=n("3Pt+"),s=n("gmuX"),l=n("JIJk"),c=n("U3y+"),d=n("g+M/"),p=n("LRne"),u=n("z6cu"),m=n("5+tZ"),f=n("lJxs"),h=n("vkgz"),g=n("JIr8"),y=n("DaoB"),b=n("he9t"),v=n("APwO"),x=n("/3Pq"),C=n("//Q6"),S=n("l7P3"),w=n("tyNb"),E=n("FKr1"),I=n("0MNC"),O=n("/t3+"),T=n("sYmb"),M=n("XiUz"),F=n("bTqV"),P=n("NFeN"),D=n("ofXK"),k=n("xHqg"),j=n("kmnG"),A=n("qFsG"),_=n("d3UM"),L=n("QibW"),V=n("p4Q/"),R=n("znSr"),N=n("E4Bx"),G=n("5U8l"),B=n("bSwM"),U=n("10n/"),q=n("TSBb"),W=n("f0Cb"),z=n("bv9b"),K=n("8yrD"),H=n("em8L"),$=n("xkYi"),Q=["addDeviceWizardStepper"];function X(t,e){1&t&&a["\u0275\u0275element"](0,"mat-progress-bar",48)}function Y(t,e){1&t&&a["\u0275\u0275element"](0,"div",49)}function J(t,e){1&t&&(a["\u0275\u0275elementStart"](0,"mat-icon"),a["\u0275\u0275text"](1,"check"),a["\u0275\u0275elementEnd"]())}function Z(t,e){1&t&&(a["\u0275\u0275text"](0),a["\u0275\u0275pipe"](1,"translate")),2&t&&a["\u0275\u0275textInterpolate"](a["\u0275\u0275pipeBind1"](1,1,"device.wizard.device-details"))}function tt(t,e){1&t&&(a["\u0275\u0275elementStart"](0,"mat-error"),a["\u0275\u0275text"](1),a["\u0275\u0275pipe"](2,"translate"),a["\u0275\u0275elementEnd"]()),2&t&&(a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](2,1,"device.name-required")," "))}function et(t,e){if(1&t&&(a["\u0275\u0275elementStart"](0,"mat-option",50),a["\u0275\u0275text"](1),a["\u0275\u0275pipe"](2,"translate"),a["\u0275\u0275elementEnd"]()),2&t){var n=e.$implicit,i=a["\u0275\u0275nextContext"]();a["\u0275\u0275property"]("value",n),a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](2,2,i.deviceTransportTypeTranslations.get(n))," ")}}function nt(t,e){if(1&t&&(a["\u0275\u0275elementStart"](0,"mat-hint"),a["\u0275\u0275text"](1),a["\u0275\u0275pipe"](2,"translate"),a["\u0275\u0275elementEnd"]()),2&t){var n=a["\u0275\u0275nextContext"]();a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](2,1,n.deviceTransportTypeHints.get(n.deviceWizardFormGroup.get("transportType").value))," ")}}function it(t,e){1&t&&(a["\u0275\u0275elementStart"](0,"mat-error"),a["\u0275\u0275text"](1),a["\u0275\u0275pipe"](2,"translate"),a["\u0275\u0275elementEnd"]()),2&t&&(a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](2,1,"device-profile.transport-type-required")," "))}function at(t,e){1&t&&(a["\u0275\u0275elementStart"](0,"mat-error"),a["\u0275\u0275text"](1),a["\u0275\u0275pipe"](2,"translate"),a["\u0275\u0275elementEnd"]()),2&t&&(a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](2,1,"device-profile.new-device-profile-name-required")," "))}function rt(t,e){1&t&&(a["\u0275\u0275elementStart"](0,"mat-checkbox",51),a["\u0275\u0275text"](1),a["\u0275\u0275pipe"](2,"translate"),a["\u0275\u0275elementEnd"]()),2&t&&(a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](2,1,"device.overwrite-activity-time")," "))}function ot(t,e){1&t&&(a["\u0275\u0275text"](0),a["\u0275\u0275pipe"](1,"translate")),2&t&&a["\u0275\u0275textInterpolate"](a["\u0275\u0275pipeBind1"](1,1,"device-profile.transport-configuration"))}function st(t,e){if(1&t&&(a["\u0275\u0275elementStart"](0,"mat-step",11),a["\u0275\u0275elementStart"](1,"form",12),a["\u0275\u0275template"](2,ot,2,3,"ng-template",13),a["\u0275\u0275element"](3,"tb-device-profile-transport-configuration",52),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()),2&t){var n=a["\u0275\u0275nextContext"]();a["\u0275\u0275property"]("stepControl",n.transportConfigFormGroup),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("formGroup",n.transportConfigFormGroup)}}var lt=function(t){return{count:t}};function ct(t,e){if(1&t&&(a["\u0275\u0275text"](0),a["\u0275\u0275pipe"](1,"translate")),2&t){var n=a["\u0275\u0275nextContext"](2);a["\u0275\u0275textInterpolate"](a["\u0275\u0275pipeBind2"](1,1,"device-profile.alarm-rules-with-count",a["\u0275\u0275pureFunction1"](4,lt,n.alarmRulesFormGroup.get("alarms").value?n.alarmRulesFormGroup.get("alarms").value.length:0)))}}function dt(t,e){if(1&t&&(a["\u0275\u0275elementStart"](0,"mat-step",38),a["\u0275\u0275elementStart"](1,"form",12),a["\u0275\u0275template"](2,ct,2,6,"ng-template",13),a["\u0275\u0275element"](3,"tb-device-profile-alarms",53),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()),2&t){var n=a["\u0275\u0275nextContext"]();a["\u0275\u0275property"]("stepControl",n.alarmRulesFormGroup)("optional",!0),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("formGroup",n.alarmRulesFormGroup),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("deviceProfileId",null)}}function pt(t,e){1&t&&(a["\u0275\u0275text"](0),a["\u0275\u0275pipe"](1,"translate")),2&t&&a["\u0275\u0275textInterpolate"](a["\u0275\u0275pipeBind1"](1,1,"device-profile.device-provisioning"))}function ut(t,e){if(1&t&&(a["\u0275\u0275elementStart"](0,"mat-step",38),a["\u0275\u0275elementStart"](1,"form",12),a["\u0275\u0275template"](2,pt,2,3,"ng-template",13),a["\u0275\u0275element"](3,"tb-device-profile-provision-configuration",54),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()),2&t){var n=a["\u0275\u0275nextContext"]();a["\u0275\u0275property"]("stepControl",n.provisionConfigFormGroup)("optional",!0),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("formGroup",n.provisionConfigFormGroup)}}function mt(t,e){1&t&&(a["\u0275\u0275text"](0),a["\u0275\u0275pipe"](1,"translate")),2&t&&a["\u0275\u0275textInterpolate"](a["\u0275\u0275pipeBind1"](1,1,"device.credentials"))}function ft(t,e){1&t&&(a["\u0275\u0275text"](0),a["\u0275\u0275pipe"](1,"translate")),2&t&&a["\u0275\u0275textInterpolate"](a["\u0275\u0275pipeBind1"](1,1,"customer.customer"))}function ht(t,e){if(1&t){var n=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementStart"](0,"button",55),a["\u0275\u0275listener"]("click",(function(){return a["\u0275\u0275restoreView"](n),a["\u0275\u0275nextContext"]().previousStep()})),a["\u0275\u0275pipe"](1,"async"),a["\u0275\u0275text"](2),a["\u0275\u0275pipe"](3,"translate"),a["\u0275\u0275elementEnd"]()}if(2&t){var i=a["\u0275\u0275nextContext"]();a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](1,2,i.isLoading$)),a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate"](a["\u0275\u0275pipeBind1"](3,4,"action.back"))}}var gt=function(t){return{label:t}};function yt(t,e){if(1&t){var n=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementStart"](0,"button",56),a["\u0275\u0275listener"]("click",(function(){return a["\u0275\u0275restoreView"](n),a["\u0275\u0275nextContext"]().nextStep()})),a["\u0275\u0275pipe"](1,"async"),a["\u0275\u0275text"](2),a["\u0275\u0275pipe"](3,"translate"),a["\u0275\u0275pipe"](4,"translate"),a["\u0275\u0275elementEnd"]()}if(2&t){var i=a["\u0275\u0275nextContext"]();a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](1,2,i.isLoading$)),a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate"](a["\u0275\u0275pipeBind2"](3,4,"action.next-with-label",a["\u0275\u0275pureFunction1"](9,gt,a["\u0275\u0275pipeBind1"](4,7,i.getFormLabel(i.selectedIndex+1)))))}}var bt=function(t){return{invisible:t}},vt=function(t){function e(e,n,i,a,r,s,d,p,u){var m=t.call(this,e,n,r)||this;return m.store=e,m.router=n,m.data=i,m.errorStateMatcher=a,m.dialogRef=r,m.deviceProfileService=s,m.deviceService=d,m.breakpointObserver=p,m.fb=u,m.selectedIndex=0,m.showNext=!0,m.createProfile=!1,m.createTransportConfiguration=!1,m.entityType=c.b,m.deviceTransportTypes=Object.keys(l.j),m.deviceTransportTypeTranslations=l.B,m.deviceTransportTypeHints=l.A,m.labelPosition="end",m.serviceType=x.a.TB_RULE_ENGINE,m.subscriptions=[],m.deviceWizardFormGroup=m.fb.group({name:["",o.Validators.required],label:[""],gateway:[!1],overwriteActivityTime:[!1],transportType:[l.j.DEFAULT,o.Validators.required],addProfileType:[0],deviceProfileId:[null,o.Validators.required],newDeviceProfileTitle:[{value:null,disabled:!0}],defaultRuleChainId:[{value:null,disabled:!0}],defaultQueueName:[{value:null,disabled:!0}],description:[""]}),m.subscriptions.push(m.deviceWizardFormGroup.get("addProfileType").valueChanges.subscribe((function(t){0===t?(m.deviceWizardFormGroup.get("deviceProfileId").setValidators([o.Validators.required]),m.deviceWizardFormGroup.get("deviceProfileId").enable(),m.deviceWizardFormGroup.get("newDeviceProfileTitle").setValidators(null),m.deviceWizardFormGroup.get("newDeviceProfileTitle").disable(),m.deviceWizardFormGroup.get("defaultRuleChainId").disable(),m.deviceWizardFormGroup.get("defaultQueueName").disable(),m.deviceWizardFormGroup.updateValueAndValidity(),m.createProfile=!1,m.createTransportConfiguration=!1):(m.deviceWizardFormGroup.get("deviceProfileId").setValidators(null),m.deviceWizardFormGroup.get("deviceProfileId").disable(),m.deviceWizardFormGroup.get("newDeviceProfileTitle").setValidators([o.Validators.required]),m.deviceWizardFormGroup.get("newDeviceProfileTitle").enable(),m.deviceWizardFormGroup.get("defaultRuleChainId").enable(),m.deviceWizardFormGroup.get("defaultQueueName").enable(),m.deviceWizardFormGroup.updateValueAndValidity(),m.createProfile=!0,m.createTransportConfiguration=m.deviceWizardFormGroup.get("transportType").value&&l.z.get(m.deviceWizardFormGroup.get("transportType").value).hasProfileConfiguration)}))),m.transportConfigFormGroup=m.fb.group({transportConfiguration:[Object(l.p)(l.j.DEFAULT),o.Validators.required]}),m.subscriptions.push(m.deviceWizardFormGroup.get("transportType").valueChanges.subscribe((function(t){m.deviceProfileTransportTypeChanged(t)}))),m.alarmRulesFormGroup=m.fb.group({alarms:[null]}),m.provisionConfigFormGroup=m.fb.group({provisionConfiguration:[{type:l.i.DISABLED},[o.Validators.required]]}),m.credentialsFormGroup=m.fb.group({setCredential:[!1],credential:[{value:null,disabled:!0}]}),m.subscriptions.push(m.credentialsFormGroup.get("setCredential").valueChanges.subscribe((function(t){t?m.credentialsFormGroup.get("credential").enable():m.credentialsFormGroup.get("credential").disable()}))),m.customerFormGroup=m.fb.group({customerId:[null]}),m.labelPosition=m.breakpointObserver.isMatched(b.e["gt-sm"])?"end":"bottom",m.subscriptions.push(m.breakpointObserver.observe(b.e["gt-sm"]).subscribe((function(t){t.matches?m.labelPosition="end":m.labelPosition="bottom"}))),m}return Object(i.d)(e,t),e.prototype.ngOnDestroy=function(){t.prototype.ngOnDestroy.call(this),this.subscriptions.forEach((function(t){return t.unsubscribe()}))},e.prototype.isErrorState=function(t,e){var n=this.errorStateMatcher.isErrorState(t,e),i=!(!t||!t.invalid);return n||i},e.prototype.cancel=function(){this.dialogRef.close(null)},e.prototype.previousStep=function(){this.addDeviceWizardStepper.previous()},e.prototype.nextStep=function(){this.addDeviceWizardStepper.next()},e.prototype.getFormLabel=function(t){switch(t>0&&(this.createProfile?this.createTransportConfiguration||(t+=1):t+=3),t){case 0:return"device.wizard.device-details";case 1:return"device-profile.transport-configuration";case 2:return"device-profile.alarm-rules";case 3:return"device-profile.device-provisioning";case 4:return"device.credentials";case 5:return"customer.customer"}},Object.defineProperty(e.prototype,"maxStepperIndex",{get:function(){var t,e;return(null===(e=null===(t=this.addDeviceWizardStepper)||void 0===t?void 0:t._steps)||void 0===e?void 0:e.length)-1},enumerable:!1,configurable:!0}),e.prototype.deviceProfileTransportTypeChanged=function(t){this.transportConfigFormGroup.patchValue({transportConfiguration:Object(l.p)(t)}),this.createTransportConfiguration=this.createProfile&&t&&l.z.get(t).hasProfileConfiguration},e.prototype.add=function(){var t=this;this.allValid()&&this.createDeviceProfile().pipe(Object(m.b)((function(e){return t.createDevice(e)})),Object(m.b)((function(e){return t.saveCredentials(e)}))).subscribe((function(e){t.dialogRef.close(e)}))},e.prototype.createDeviceProfile=function(){var t=this;if(this.deviceWizardFormGroup.get("addProfileType").value){var e=this.provisionConfigFormGroup.get("provisionConfiguration").value,n=e.provisionDeviceKey;delete e.provisionDeviceKey;var i={name:this.deviceWizardFormGroup.get("newDeviceProfileTitle").value,type:l.h.DEFAULT,transportType:this.deviceWizardFormGroup.get("transportType").value,provisionType:e.type,provisionDeviceKey:n,profileData:{configuration:Object(l.o)(l.h.DEFAULT),transportConfiguration:this.transportConfigFormGroup.get("transportConfiguration").value,alarms:this.alarmRulesFormGroup.get("alarms").value,provisionConfiguration:e}};return this.deviceWizardFormGroup.get("defaultRuleChainId").value&&(i.defaultRuleChainId=new v.a(this.deviceWizardFormGroup.get("defaultRuleChainId").value)),this.deviceProfileService.saveDeviceProfile(Object(C.f)(i)).pipe(Object(f.a)((function(t){return t.id})),Object(h.a)((function(e){t.deviceWizardFormGroup.patchValue({deviceProfileId:e,addProfileType:0})})))}return Object(p.a)(this.deviceWizardFormGroup.get("deviceProfileId").value)},e.prototype.createDevice=function(t){var e={name:this.deviceWizardFormGroup.get("name").value,label:this.deviceWizardFormGroup.get("label").value,deviceProfileId:t,additionalInfo:{gateway:this.deviceWizardFormGroup.get("gateway").value,overwriteActivityTime:this.deviceWizardFormGroup.get("overwriteActivityTime").value,description:this.deviceWizardFormGroup.get("description").value},customerId:null};return this.customerFormGroup.get("customerId").value&&(e.customerId={entityType:c.b.CUSTOMER,id:this.customerFormGroup.get("customerId").value}),this.data.entitiesTableConfig.saveEntity(Object(C.f)(e))},e.prototype.saveCredentials=function(t){var e=this;return this.credentialsFormGroup.get("setCredential").value?this.deviceService.getDeviceCredentials(t.id.id).pipe(Object(m.b)((function(n){var a=Object(i.a)(Object(i.a)({},n),e.credentialsFormGroup.value.credential);return e.deviceService.saveDeviceCredentials(a).pipe(Object(g.a)((function(n){return e.deviceService.deleteDevice(t.id.id).pipe(Object(m.b)((function(){return Object(u.a)(n)})))})))})),Object(f.a)((function(){return!0}))):Object(p.a)(!0)},e.prototype.allValid=function(){var t=this;return!this.addDeviceWizardStepper.steps.find((function(e,n){return!!e.stepControl.invalid&&(e.interacted=!0,t.addDeviceWizardStepper.selectedIndex=n,!0)}))},e.prototype.changeStep=function(t){this.selectedIndex=t.selectedIndex,this.selectedIndex===this.maxStepperIndex?this.showNext=!1:this.showNext=!0},e.\u0275fac=function(t){return new(t||e)(a["\u0275\u0275directiveInject"](S.Store),a["\u0275\u0275directiveInject"](w.Router),a["\u0275\u0275directiveInject"](r.MAT_DIALOG_DATA),a["\u0275\u0275directiveInject"](E.ErrorStateMatcher,4),a["\u0275\u0275directiveInject"](r.MatDialogRef),a["\u0275\u0275directiveInject"](d.a),a["\u0275\u0275directiveInject"](y.a),a["\u0275\u0275directiveInject"](I.BreakpointObserver),a["\u0275\u0275directiveInject"](o.FormBuilder))},e.\u0275cmp=a["\u0275\u0275defineComponent"]({type:e,selectors:[["tb-device-wizard"]],viewQuery:function(t,e){var n;(1&t&&a["\u0275\u0275staticViewQuery"](Q,!0),2&t)&&(a["\u0275\u0275queryRefresh"](n=a["\u0275\u0275loadQuery"]())&&(e.addDeviceWizardStepper=n.first))},features:[a["\u0275\u0275ProvidersFeature"]([]),a["\u0275\u0275InheritDefinitionFeature"]],decls:93,vars:72,consts:[["color","primary"],["translate",""],["fxFlex",""],["mat-icon-button","","type","button",3,"click"],[1,"material-icons"],["color","warn","mode","indeterminate",4,"ngIf"],["style","height: 4px;",4,"ngIf"],["mat-dialog-content",""],[3,"linear","labelPosition","selectionChange"],["addDeviceWizardStepper",""],["matStepperIcon","edit"],[3,"stepControl"],[2,"padding-bottom","16px",3,"formGroup"],["matStepLabel",""],[3,"disabled"],[1,"mat-block"],["matInput","","formControlName","name","required",""],[4,"ngIf"],["matInput","","formControlName","label"],[1,"mat-block",2,"padding-bottom","14px"],["formControlName","transportType","required",""],[3,"value",4,"ngFor","ngForOf"],["fxLayout","row","fxLayoutGap","16px"],["fxLayout","column","formControlName","addProfileType","fxLayoutAlign","space-around"],["color","primary",3,"value"],["fxLayout","column"],["formControlName","deviceProfileId",3,"required","transportType","ngClass","addNewProfile","selectDefaultProfile","selectFirstProfile","editProfileEnabled","deviceProfileChanged"],["fxFlex","",1,"mat-block",3,"ngClass"],["matInput","","formControlName","newDeviceProfileTitle",3,"required"],["fxLayout","column","fxLayoutAlign","flex-end start"],["labelText","device-profile.default-rule-chain","formControlName","defaultRuleChainId",3,"ngClass"],["formControlName","defaultQueueName",3,"ngClass","queueType"],["fxLayout","row","fxLayoutGap","16px",2,"padding-bottom","16px"],["formControlName","gateway"],["formControlName","overwriteActivityTime",4,"ngIf"],["matInput","","formControlName","description","rows","2"],[3,"stepControl",4,"ngIf"],[3,"stepControl","optional",4,"ngIf"],[3,"stepControl","optional"],["formControlName","setCredential",2,"padding-bottom","16px"],["formControlName","credential",3,"fxShow"],["formControlName","customerId","labelText","device.wizard.customer-to-assign-device",3,"entityType"],["mat-dialog-actions","","fxLayout","row"],["mat-stroked-button","",3,"disabled","click",4,"ngIf"],["mat-stroked-button","","color","primary",3,"disabled","click",4,"ngIf"],["mat-dialog-actions","","fxLayout","row","fxLayoutGap","8px","fxLayoutAlign","end"],["mat-button","",3,"disabled","click"],["mat-raised-button","","color","primary",3,"disabled","click"],["color","warn","mode","indeterminate"],[2,"height","4px"],[3,"value"],["formControlName","overwriteActivityTime"],["formControlName","transportConfiguration","required",""],["formControlName","alarms",3,"deviceProfileId"],["formControlName","provisionConfiguration"],["mat-stroked-button","",3,"disabled","click"],["mat-stroked-button","","color","primary",3,"disabled","click"]],template:function(t,e){1&t&&(a["\u0275\u0275elementStart"](0,"div"),a["\u0275\u0275elementStart"](1,"mat-toolbar",0),a["\u0275\u0275elementStart"](2,"h2",1),a["\u0275\u0275text"](3,"device.add-device-text"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](4,"span",2),a["\u0275\u0275elementStart"](5,"button",3),a["\u0275\u0275listener"]("click",(function(){return e.cancel()})),a["\u0275\u0275elementStart"](6,"mat-icon",4),a["\u0275\u0275text"](7,"close"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275template"](8,X,1,0,"mat-progress-bar",5),a["\u0275\u0275pipe"](9,"async"),a["\u0275\u0275template"](10,Y,1,0,"div",6),a["\u0275\u0275pipe"](11,"async"),a["\u0275\u0275elementStart"](12,"div",7),a["\u0275\u0275elementStart"](13,"mat-horizontal-stepper",8,9),a["\u0275\u0275listener"]("selectionChange",(function(t){return e.changeStep(t)})),a["\u0275\u0275template"](15,J,2,0,"ng-template",10),a["\u0275\u0275elementStart"](16,"mat-step",11),a["\u0275\u0275elementStart"](17,"form",12),a["\u0275\u0275template"](18,Z,2,3,"ng-template",13),a["\u0275\u0275elementStart"](19,"fieldset",14),a["\u0275\u0275pipe"](20,"async"),a["\u0275\u0275elementStart"](21,"mat-form-field",15),a["\u0275\u0275elementStart"](22,"mat-label",1),a["\u0275\u0275text"](23,"device.name"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](24,"input",16),a["\u0275\u0275template"](25,tt,3,3,"mat-error",17),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](26,"mat-form-field",15),a["\u0275\u0275elementStart"](27,"mat-label",1),a["\u0275\u0275text"](28,"device.label"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](29,"input",18),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](30,"mat-form-field",19),a["\u0275\u0275elementStart"](31,"mat-label",1),a["\u0275\u0275text"](32,"device-profile.transport-type"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](33,"mat-select",20),a["\u0275\u0275template"](34,et,3,4,"mat-option",21),a["\u0275\u0275elementEnd"](),a["\u0275\u0275template"](35,nt,3,3,"mat-hint",17),a["\u0275\u0275template"](36,it,3,3,"mat-error",17),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](37,"div",22),a["\u0275\u0275elementStart"](38,"mat-radio-group",23),a["\u0275\u0275elementStart"](39,"mat-radio-button",24),a["\u0275\u0275elementStart"](40,"span",1),a["\u0275\u0275text"](41,"device.wizard.existing-device-profile"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](42,"mat-radio-button",24),a["\u0275\u0275elementStart"](43,"span",1),a["\u0275\u0275text"](44,"device.wizard.new-device-profile"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](45,"div",25),a["\u0275\u0275elementStart"](46,"tb-device-profile-autocomplete",26),a["\u0275\u0275listener"]("deviceProfileChanged",(function(t){return null!=t&&t.transportType?e.deviceWizardFormGroup.get("transportType").patchValue(null==t?null:t.transportType):{}})),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](47,"mat-form-field",27),a["\u0275\u0275elementStart"](48,"mat-label",1),a["\u0275\u0275text"](49,"device-profile.new-device-profile-name"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](50,"input",28),a["\u0275\u0275template"](51,at,3,3,"mat-error",17),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](52,"div",29),a["\u0275\u0275element"](53,"tb-rule-chain-autocomplete",30),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](54,"div",29),a["\u0275\u0275element"](55,"tb-queue-type-list",31),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](56,"div",32),a["\u0275\u0275elementStart"](57,"mat-checkbox",33),a["\u0275\u0275text"](58),a["\u0275\u0275pipe"](59,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275template"](60,rt,3,3,"mat-checkbox",34),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](61,"mat-form-field",15),a["\u0275\u0275elementStart"](62,"mat-label",1),a["\u0275\u0275text"](63,"device.description"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](64,"textarea",35),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275template"](65,st,4,2,"mat-step",36),a["\u0275\u0275template"](66,dt,4,4,"mat-step",37),a["\u0275\u0275template"](67,ut,4,3,"mat-step",37),a["\u0275\u0275elementStart"](68,"mat-step",38),a["\u0275\u0275template"](69,mt,2,3,"ng-template",13),a["\u0275\u0275elementStart"](70,"form",12),a["\u0275\u0275elementStart"](71,"mat-checkbox",39),a["\u0275\u0275text"](72),a["\u0275\u0275pipe"](73,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](74,"tb-device-credentials",40),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](75,"mat-step",38),a["\u0275\u0275template"](76,ft,2,3,"ng-template",13),a["\u0275\u0275elementStart"](77,"form",12),a["\u0275\u0275element"](78,"tb-entity-autocomplete",41),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](79,"div",42),a["\u0275\u0275template"](80,ht,4,6,"button",43),a["\u0275\u0275element"](81,"span",2),a["\u0275\u0275template"](82,yt,5,11,"button",44),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](83,"mat-divider"),a["\u0275\u0275elementStart"](84,"div",45),a["\u0275\u0275elementStart"](85,"button",46),a["\u0275\u0275listener"]("click",(function(){return e.cancel()})),a["\u0275\u0275pipe"](86,"async"),a["\u0275\u0275text"](87),a["\u0275\u0275pipe"](88,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](89,"button",47),a["\u0275\u0275listener"]("click",(function(){return e.add()})),a["\u0275\u0275pipe"](90,"async"),a["\u0275\u0275text"](91),a["\u0275\u0275pipe"](92,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()),2&t&&(a["\u0275\u0275advance"](8),a["\u0275\u0275property"]("ngIf",a["\u0275\u0275pipeBind1"](9,46,e.isLoading$)),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("ngIf",!a["\u0275\u0275pipeBind1"](11,48,e.isLoading$)),a["\u0275\u0275advance"](3),a["\u0275\u0275property"]("linear",!0)("labelPosition",e.labelPosition),a["\u0275\u0275advance"](3),a["\u0275\u0275property"]("stepControl",e.deviceWizardFormGroup),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("formGroup",e.deviceWizardFormGroup),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](20,50,e.isLoading$)),a["\u0275\u0275advance"](6),a["\u0275\u0275property"]("ngIf",e.deviceWizardFormGroup.get("name").hasError("required")),a["\u0275\u0275advance"](9),a["\u0275\u0275property"]("ngForOf",e.deviceTransportTypes),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",e.deviceWizardFormGroup.get("transportType").value),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",e.deviceWizardFormGroup.get("transportType").hasError("required")),a["\u0275\u0275advance"](3),a["\u0275\u0275property"]("value",0),a["\u0275\u0275advance"](3),a["\u0275\u0275property"]("value",1),a["\u0275\u0275advance"](4),a["\u0275\u0275property"]("required",!e.createProfile)("transportType",e.deviceWizardFormGroup.get("transportType").value)("ngClass",a["\u0275\u0275pureFunction1"](64,bt,0!==e.deviceWizardFormGroup.get("addProfileType").value))("addNewProfile",!1)("selectDefaultProfile",!0)("selectFirstProfile",!0)("editProfileEnabled",!1),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngClass",a["\u0275\u0275pureFunction1"](66,bt,1!==e.deviceWizardFormGroup.get("addProfileType").value)),a["\u0275\u0275advance"](3),a["\u0275\u0275property"]("required",e.createProfile),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",e.deviceWizardFormGroup.get("newDeviceProfileTitle").hasError("required")),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("ngClass",a["\u0275\u0275pureFunction1"](68,bt,1!==e.deviceWizardFormGroup.get("addProfileType").value)),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("ngClass",a["\u0275\u0275pureFunction1"](70,bt,1!==e.deviceWizardFormGroup.get("addProfileType").value))("queueType",e.serviceType),a["\u0275\u0275advance"](3),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](59,52,"device.is-gateway")," "),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("ngIf",e.deviceWizardFormGroup.get("gateway").value),a["\u0275\u0275advance"](5),a["\u0275\u0275property"]("ngIf",e.createTransportConfiguration),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",e.createProfile),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",e.createProfile),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("stepControl",e.credentialsFormGroup)("optional",!0),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("formGroup",e.credentialsFormGroup),a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate"](a["\u0275\u0275pipeBind1"](73,54,"device.wizard.add-credential")),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("fxShow",e.credentialsFormGroup.get("setCredential").value),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("stepControl",e.customerFormGroup)("optional",!0),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("formGroup",e.customerFormGroup),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("entityType",e.entityType.CUSTOMER),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("ngIf",e.selectedIndex>0),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("ngIf",e.showNext),a["\u0275\u0275advance"](3),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](86,56,e.isLoading$)),a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate"](a["\u0275\u0275pipeBind1"](88,58,"action.cancel")),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](90,60,e.isLoading$)),a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate"](a["\u0275\u0275pipeBind1"](92,62,"action.add")))},directives:[O.MatToolbar,T.TranslateDirective,M.b,F.MatButton,P.MatIcon,D.NgIf,r.MatDialogContent,k.MatHorizontalStepper,k.MatStepperIcon,k.MatStep,o["\u0275angular_packages_forms_forms_y"],o.NgControlStatusGroup,o.FormGroupDirective,k.MatStepLabel,j.MatFormField,j.MatLabel,A.MatInput,o.DefaultValueAccessor,o.NgControlStatus,o.FormControlName,o.RequiredValidator,_.MatSelect,D.NgForOf,M.f,M.g,L.MatRadioGroup,M.e,L.MatRadioButton,V.a,D.NgClass,R.b,N.a,G.a,B.MatCheckbox,U.a,R.d,q.a,r.MatDialogActions,W.MatDivider,z.MatProgressBar,j.MatError,E.MatOption,j.MatHint,K.a,H.a,$.a],pipes:[D.AsyncPipe,T.TranslatePipe],styles:["@media screen and (max-width:599px){.tb-fullscreen-dialog[_nghost-%COMP%]   .mat-dialog-container[_ngcontent-%COMP%]   .mat-dialog-content[_ngcontent-%COMP%], .tb-fullscreen-dialog   .mat-dialog-container   [_nghost-%COMP%]   .mat-dialog-content[_ngcontent-%COMP%]{max-height:75vh}}.tb-fullscreen-dialog[_nghost-%COMP%]   .mat-dialog-container[_ngcontent-%COMP%]   .invisible[_ngcontent-%COMP%], .tb-fullscreen-dialog   .mat-dialog-container   [_nghost-%COMP%]   .invisible[_ngcontent-%COMP%]{visibility:hidden}[_nghost-%COMP%]     .mat-dialog-content{display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;height:100%;padding:0!important}[_nghost-%COMP%]     .mat-dialog-content .mat-stepper-horizontal{display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;height:100%;overflow:hidden}@media screen and (max-width:599px){[_nghost-%COMP%]     .mat-dialog-content .mat-stepper-horizontal .mat-step-label{white-space:normal;overflow:visible}[_nghost-%COMP%]     .mat-dialog-content .mat-stepper-horizontal .mat-step-label .mat-step-text-label{overflow:visible}}[_nghost-%COMP%]     .mat-dialog-content .mat-stepper-horizontal .mat-horizontal-content-container{height:530px;max-height:100%;width:100%;overflow-y:auto}@media screen and (min-width:960px){[_nghost-%COMP%]     .mat-dialog-content .mat-stepper-horizontal .mat-horizontal-content-container{min-width:800px}}[_nghost-%COMP%]     .mat-dialog-content .mat-stepper-horizontal .mat-horizontal-stepper-content[aria-expanded=true], [_nghost-%COMP%]     .mat-dialog-content .mat-stepper-horizontal .mat-horizontal-stepper-content[aria-expanded=true] form{height:100%}[_nghost-%COMP%]     .mat-dialog-content .mat-stepper-horizontal tb-device-profile-autocomplete .mat-form-field-wrapper, [_nghost-%COMP%]     .mat-dialog-content .mat-stepper-horizontal tb-queue-type-list .mat-form-field-wrapper{width:180px!important}"]}),e}(s.a);!function(){a["\u0275setClassMetadata"](vt,[{type:a.Component,args:[{selector:"tb-device-wizard",templateUrl:"./device-wizard-dialog.component.html",providers:[],styleUrls:["./device-wizard-dialog.component.scss"]}]}],(function(){return[{type:S.Store},{type:w.Router},{type:void 0,decorators:[{type:a.Inject,args:[r.MAT_DIALOG_DATA]}]},{type:E.ErrorStateMatcher,decorators:[{type:a.SkipSelf}]},{type:r.MatDialogRef},{type:d.a},{type:y.a},{type:I.BreakpointObserver},{type:o.FormBuilder}]}),{addDeviceWizardStepper:[{type:a.ViewChild,args:["addDeviceWizardStepper",{static:!0}]}]})}()},TpGD:function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));var i=n("fXoL"),a=n("3Pt+"),r=n("8LU1"),o=n("JIJk"),s=n("//Q6"),l=n("l7P3"),c=n("ofXK"),d=n("NPtW");function p(t,e){if(1&t&&i["\u0275\u0275element"](0,"tb-default-device-profile-configuration",3),2&t){var n=i["\u0275\u0275nextContext"]();i["\u0275\u0275property"]("required",n.required)}}var u=function(){function t(t,e){this.store=t,this.fb=e,this.deviceProfileType=o.h,this.propagateChange=function(t){}}return Object.defineProperty(t.prototype,"required",{get:function(){return this.requiredValue},set:function(t){this.requiredValue=Object(r.coerceBooleanProperty)(t)},enumerable:!1,configurable:!0}),t.prototype.registerOnChange=function(t){this.propagateChange=t},t.prototype.registerOnTouched=function(t){},t.prototype.ngOnInit=function(){var t=this;this.deviceProfileConfigurationFormGroup=this.fb.group({configuration:[null,a.Validators.required]}),this.deviceProfileConfigurationFormGroup.valueChanges.subscribe((function(){t.updateModel()}))},t.prototype.setDisabledState=function(t){this.disabled=t,this.disabled?this.deviceProfileConfigurationFormGroup.disable({emitEvent:!1}):this.deviceProfileConfigurationFormGroup.enable({emitEvent:!1})},t.prototype.writeValue=function(t){this.type=null==t?void 0:t.type;var e=Object(s.e)(t);e&&delete e.type,this.deviceProfileConfigurationFormGroup.patchValue({configuration:e},{emitEvent:!1})},t.prototype.updateModel=function(){var t=null;this.deviceProfileConfigurationFormGroup.valid&&((t=this.deviceProfileConfigurationFormGroup.getRawValue().configuration).type=this.type),this.propagateChange(t)},t.\u0275fac=function(e){return new(e||t)(i["\u0275\u0275directiveInject"](l.Store),i["\u0275\u0275directiveInject"](a.FormBuilder))},t.\u0275cmp=i["\u0275\u0275defineComponent"]({type:t,selectors:[["tb-device-profile-configuration"]],inputs:{required:"required",disabled:"disabled"},features:[i["\u0275\u0275ProvidersFeature"]([{provide:a.NG_VALUE_ACCESSOR,useExisting:Object(i.forwardRef)((function(){return t})),multi:!0}])],decls:3,vars:3,consts:[[3,"formGroup"],[3,"ngSwitch"],[3,"ngSwitchCase"],["formControlName","configuration",3,"required"]],template:function(t,e){1&t&&(i["\u0275\u0275elementStart"](0,"div",0),i["\u0275\u0275elementStart"](1,"div",1),i["\u0275\u0275template"](2,p,1,1,"ng-template",2),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()),2&t&&(i["\u0275\u0275property"]("formGroup",e.deviceProfileConfigurationFormGroup),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngSwitch",e.type),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngSwitchCase",e.deviceProfileType.DEFAULT))},directives:[a.NgControlStatusGroup,a.FormGroupDirective,c.NgSwitch,c.NgSwitchCase,d.a,a.NgControlStatus,a.FormControlName,a.RequiredValidator],encapsulation:2}),t}();!function(){i["\u0275setClassMetadata"](u,[{type:i.Component,args:[{selector:"tb-device-profile-configuration",templateUrl:"./device-profile-configuration.component.html",styleUrls:[],providers:[{provide:a.NG_VALUE_ACCESSOR,useExisting:Object(i.forwardRef)((function(){return u})),multi:!0}]}]}],(function(){return[{type:l.Store},{type:a.FormBuilder}]}),{required:[{type:i.Input}],disabled:[{type:i.Input}]})}()},"Tu+t":function(t,e,n){"use strict";n.d(e,"a",(function(){return M}));var i=n("fXoL"),a=n("3Pt+"),r=n("8LU1"),o=n("JIJk"),s=n("//Q6"),l=n("l7P3"),c=n("sYmb"),d=n("XiUz"),p=n("kmnG"),u=n("qFsG"),m=n("ofXK"),f=n("d3UM"),h=n("FKr1");function g(t,e){1&t&&(i["\u0275\u0275elementStart"](0,"mat-error"),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&t&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,1,"device-profile.telemetry-topic-filter-required")," "))}function y(t,e){1&t&&(i["\u0275\u0275elementStart"](0,"mat-error"),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&t&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,1,"device-profile.not-valid-single-character")," "))}function b(t,e){1&t&&(i["\u0275\u0275elementStart"](0,"mat-error"),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&t&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,1,"device-profile.not-valid-multi-character")," "))}function v(t,e){1&t&&(i["\u0275\u0275elementStart"](0,"mat-error"),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&t&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,1,"device-profile.attributes-topic-filter-required")," "))}function x(t,e){1&t&&(i["\u0275\u0275elementStart"](0,"mat-error"),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&t&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,1,"device-profile.not-valid-single-character")," "))}function C(t,e){1&t&&(i["\u0275\u0275elementStart"](0,"mat-error"),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&t&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,1,"device-profile.not-valid-multi-character")," "))}function S(t,e){1&t&&(i["\u0275\u0275elementStart"](0,"mat-error"),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&t&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,1,"device-profile.mqtt-device-topic-filters-unique")," "))}function w(t,e){if(1&t&&(i["\u0275\u0275elementStart"](0,"mat-option",16),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&t){var n=e.$implicit,a=i["\u0275\u0275nextContext"]();i["\u0275\u0275property"]("value",n),i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,2,a.transportPayloadTypeTranslations.get(n))," ")}}function E(t,e){1&t&&(i["\u0275\u0275elementStart"](0,"mat-error"),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&t&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,1,"device-profile.mqtt-payload-type-required")," "))}function I(t,e){1&t&&(i["\u0275\u0275elementStart"](0,"mat-error"),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&t&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,1,"device-profile.telemetry-proto-schema-required")," "))}function O(t,e){1&t&&(i["\u0275\u0275elementStart"](0,"mat-error"),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&t&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,1,"device-profile.attributes-proto-schema-required")," "))}function T(t,e){if(1&t&&(i["\u0275\u0275elementStart"](0,"div",17),i["\u0275\u0275elementStart"](1,"mat-form-field",5),i["\u0275\u0275elementStart"](2,"mat-label",6),i["\u0275\u0275text"](3,"device-profile.telemetry-proto-schema"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](4,"textarea",18),i["\u0275\u0275template"](5,I,3,3,"mat-error",8),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](6,"mat-form-field",5),i["\u0275\u0275elementStart"](7,"mat-label",6),i["\u0275\u0275text"](8,"device-profile.attributes-proto-schema"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](9,"textarea",19),i["\u0275\u0275template"](10,O,3,3,"mat-error",8),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()),2&t){var n=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](5),i["\u0275\u0275property"]("ngIf",n.mqttDeviceProfileTransportConfigurationFormGroup.get("transportPayloadTypeConfiguration.deviceTelemetryProtoSchema").hasError("required")),i["\u0275\u0275advance"](5),i["\u0275\u0275property"]("ngIf",n.mqttDeviceProfileTransportConfigurationFormGroup.get("transportPayloadTypeConfiguration.deviceAttributesProtoSchema").hasError("required"))}}var M=function(){function t(t,e){this.store=t,this.fb=e,this.transportPayloadTypes=Object.keys(o.k),this.transportPayloadTypeTranslations=o.F,this.propagateChange=function(t){}}return Object.defineProperty(t.prototype,"required",{get:function(){return this.requiredValue},set:function(t){this.requiredValue=Object(r.coerceBooleanProperty)(t)},enumerable:!1,configurable:!0}),t.prototype.registerOnChange=function(t){this.propagateChange=t},t.prototype.registerOnTouched=function(t){},t.prototype.ngOnInit=function(){var t=this;this.mqttDeviceProfileTransportConfigurationFormGroup=this.fb.group({deviceAttributesTopic:[null,[a.Validators.required,this.validationMQTTTopic()]],deviceTelemetryTopic:[null,[a.Validators.required,this.validationMQTTTopic()]],transportPayloadTypeConfiguration:this.fb.group({transportPayloadType:[o.k.JSON,a.Validators.required],deviceTelemetryProtoSchema:[o.u,a.Validators.required],deviceAttributesProtoSchema:[o.t,a.Validators.required]})},{validator:this.uniqueDeviceTopicValidator}),this.mqttDeviceProfileTransportConfigurationFormGroup.get("transportPayloadTypeConfiguration.transportPayloadType").valueChanges.subscribe((function(e){t.updateTransportPayloadBasedControls(e,!0)})),this.mqttDeviceProfileTransportConfigurationFormGroup.valueChanges.subscribe((function(){t.updateModel()}))},t.prototype.setDisabledState=function(t){this.disabled=t,this.disabled?this.mqttDeviceProfileTransportConfigurationFormGroup.disable({emitEvent:!1}):this.mqttDeviceProfileTransportConfigurationFormGroup.enable({emitEvent:!1})},Object.defineProperty(t.prototype,"protoPayloadType",{get:function(){return this.mqttDeviceProfileTransportConfigurationFormGroup.get("transportPayloadTypeConfiguration.transportPayloadType").value===o.k.PROTOBUF},enumerable:!1,configurable:!0}),t.prototype.writeValue=function(t){var e;Object(s.o)(t)&&(this.mqttDeviceProfileTransportConfigurationFormGroup.patchValue(t,{emitEvent:!1}),this.updateTransportPayloadBasedControls(null===(e=t.transportPayloadTypeConfiguration)||void 0===e?void 0:e.transportPayloadType))},t.prototype.updateModel=function(){var t=null;this.mqttDeviceProfileTransportConfigurationFormGroup.valid&&((t=this.mqttDeviceProfileTransportConfigurationFormGroup.value).type=o.j.MQTT),this.propagateChange(t)},t.prototype.updateTransportPayloadBasedControls=function(t,e){void 0===e&&(e=!1);var n=this.mqttDeviceProfileTransportConfigurationFormGroup.get("transportPayloadTypeConfiguration");e&&n.patchValue({deviceTelemetryProtoSchema:o.u,deviceAttributesProtoSchema:o.t},{emitEvent:!1}),t!==o.k.PROTOBUF||this.disabled?(n.get("deviceTelemetryProtoSchema").disable({emitEvent:!1}),n.get("deviceAttributesProtoSchema").disable({emitEvent:!1})):(n.get("deviceTelemetryProtoSchema").enable({emitEvent:!1}),n.get("deviceAttributesProtoSchema").enable({emitEvent:!1}))},t.prototype.validationMQTTTopic=function(){return function(t){for(var e=t.value,n=/[#+]/g,i=n.exec(e);i;){var a=i.index,r=i[0],o=a>0?e[a-1]:null,s=a<e.length-1?e[a+1]:null;if("#"===r&&(a!==e.length-1||null!==o&&"/"!==o))return{invalidMultiTopicCharacter:{valid:!1}};if("+"===r&&(null!==o&&"/"!==o||null!==s&&"/"!==s))return{invalidSingleTopicCharacter:{valid:!1}};i=n.exec(e)}return null}},t.prototype.uniqueDeviceTopicValidator=function(t){if(t.value){var e=t.value;if(e.deviceAttributesTopic===e.deviceTelemetryTopic)return{unique:!0}}return null},t.\u0275fac=function(e){return new(e||t)(i["\u0275\u0275directiveInject"](l.Store),i["\u0275\u0275directiveInject"](a.FormBuilder))},t.\u0275cmp=i["\u0275\u0275defineComponent"]({type:t,selectors:[["tb-mqtt-device-profile-transport-configuration"]],inputs:{required:"required",disabled:"disabled"},features:[i["\u0275\u0275ProvidersFeature"]([{provide:a.NG_VALUE_ACCESSOR,useExisting:Object(i.forwardRef)((function(){return t})),multi:!0}])],decls:37,vars:20,consts:[[2,"padding-bottom","16px",3,"formGroup"],[1,"fields-group"],["translate","",1,"group-title"],["fxLayoutGap","8px","fxLayout","column"],["fxLayout","row","fxLayoutGap","8px","fxLayout.xs","column"],["fxFlex",""],["translate",""],["matInput","","required","","formControlName","deviceTelemetryTopic","type","text"],[4,"ngIf"],["matInput","","required","","formControlName","deviceAttributesTopic","type","text"],[1,"tb-hint",3,"innerHTML"],["formGroupName","transportPayloadTypeConfiguration"],[1,"mat-block"],["formControlName","transportPayloadType","required",""],[3,"value",4,"ngFor","ngForOf"],["fxLayout","column",4,"ngIf"],[3,"value"],["fxLayout","column"],["matInput","","required","","formControlName","deviceTelemetryProtoSchema","rows","5"],["matInput","","required","","formControlName","deviceAttributesProtoSchema","rows","5"]],template:function(t,e){1&t&&(i["\u0275\u0275elementStart"](0,"form",0),i["\u0275\u0275elementStart"](1,"fieldset",1),i["\u0275\u0275elementStart"](2,"legend",2),i["\u0275\u0275text"](3,"device-profile.mqtt-device-topic-filters"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](4,"div",3),i["\u0275\u0275elementStart"](5,"div",4),i["\u0275\u0275elementStart"](6,"mat-form-field",5),i["\u0275\u0275elementStart"](7,"mat-label",6),i["\u0275\u0275text"](8,"device-profile.telemetry-topic-filter"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](9,"input",7),i["\u0275\u0275template"](10,g,3,3,"mat-error",8),i["\u0275\u0275template"](11,y,3,3,"mat-error",8),i["\u0275\u0275template"](12,b,3,3,"mat-error",8),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](13,"mat-form-field",5),i["\u0275\u0275elementStart"](14,"mat-label",6),i["\u0275\u0275text"](15,"device-profile.attributes-topic-filter"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](16,"input",9),i["\u0275\u0275template"](17,v,3,3,"mat-error",8),i["\u0275\u0275template"](18,x,3,3,"mat-error",8),i["\u0275\u0275template"](19,C,3,3,"mat-error",8),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](20,S,3,3,"mat-error",8),i["\u0275\u0275element"](21,"div",10),i["\u0275\u0275pipe"](22,"translate"),i["\u0275\u0275element"](23,"div",10),i["\u0275\u0275pipe"](24,"translate"),i["\u0275\u0275element"](25,"div",10),i["\u0275\u0275pipe"](26,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](27,"section",11),i["\u0275\u0275elementStart"](28,"fieldset",1),i["\u0275\u0275elementStart"](29,"legend",2),i["\u0275\u0275text"](30,"device-profile.mqtt-device-payload-type"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](31,"div",3),i["\u0275\u0275elementStart"](32,"mat-form-field",12),i["\u0275\u0275elementStart"](33,"mat-select",13),i["\u0275\u0275template"](34,w,3,4,"mat-option",14),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](35,E,3,3,"mat-error",8),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](36,T,11,2,"div",15),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()),2&t&&(i["\u0275\u0275property"]("formGroup",e.mqttDeviceProfileTransportConfigurationFormGroup),i["\u0275\u0275advance"](10),i["\u0275\u0275property"]("ngIf",e.mqttDeviceProfileTransportConfigurationFormGroup.get("deviceTelemetryTopic").hasError("required")),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",e.mqttDeviceProfileTransportConfigurationFormGroup.get("deviceTelemetryTopic").hasError("invalidSingleTopicCharacter")),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",e.mqttDeviceProfileTransportConfigurationFormGroup.get("deviceTelemetryTopic").hasError("invalidMultiTopicCharacter")),i["\u0275\u0275advance"](5),i["\u0275\u0275property"]("ngIf",e.mqttDeviceProfileTransportConfigurationFormGroup.get("deviceAttributesTopic").hasError("required")),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",e.mqttDeviceProfileTransportConfigurationFormGroup.get("deviceAttributesTopic").hasError("invalidSingleTopicCharacter")),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",e.mqttDeviceProfileTransportConfigurationFormGroup.get("deviceAttributesTopic").hasError("invalidMultiTopicCharacter")),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",e.mqttDeviceProfileTransportConfigurationFormGroup.hasError("unique")),i["\u0275\u0275advance"](1),i["\u0275\u0275propertyInterpolate"]("innerHTML",i["\u0275\u0275pipeBind1"](22,14,"device-profile.support-level-wildcards"),i["\u0275\u0275sanitizeHtml"]),i["\u0275\u0275advance"](2),i["\u0275\u0275propertyInterpolate"]("innerHTML",i["\u0275\u0275pipeBind1"](24,16,"device-profile.single-level-wildcards-hint"),i["\u0275\u0275sanitizeHtml"]),i["\u0275\u0275advance"](2),i["\u0275\u0275propertyInterpolate"]("innerHTML",i["\u0275\u0275pipeBind1"](26,18,"device-profile.multi-level-wildcards-hint"),i["\u0275\u0275sanitizeHtml"]),i["\u0275\u0275advance"](9),i["\u0275\u0275property"]("ngForOf",e.transportPayloadTypes),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",e.mqttDeviceProfileTransportConfigurationFormGroup.get("transportPayloadTypeConfiguration.transportPayloadType").hasError("required")),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",e.protoPayloadType))},directives:[a["\u0275angular_packages_forms_forms_y"],a.NgControlStatusGroup,a.FormGroupDirective,c.TranslateDirective,d.g,d.f,p.MatFormField,d.b,p.MatLabel,u.MatInput,a.DefaultValueAccessor,a.RequiredValidator,a.NgControlStatus,a.FormControlName,m.NgIf,a.FormGroupName,f.MatSelect,m.NgForOf,p.MatError,h.MatOption],pipes:[c.TranslatePipe],styles:["[_nghost-%COMP%]   .fields-group[_ngcontent-%COMP%]{padding:8px;margin:10px 0;border:1px groove rgba(0,0,0,.25);border-radius:4px}[_nghost-%COMP%]   .fields-group[_ngcontent-%COMP%]   legend[_ngcontent-%COMP%]{color:rgba(0,0,0,.7)}[_nghost-%COMP%]   .fields-group[_ngcontent-%COMP%]   .tb-hint[_ngcontent-%COMP%]{padding:0}"]}),t}();!function(){i["\u0275setClassMetadata"](M,[{type:i.Component,args:[{selector:"tb-mqtt-device-profile-transport-configuration",templateUrl:"./mqtt-device-profile-transport-configuration.component.html",styleUrls:["./mqtt-device-profile-transport-configuration.component.scss"],providers:[{provide:a.NG_VALUE_ACCESSOR,useExisting:Object(i.forwardRef)((function(){return M})),multi:!0}]}]}],(function(){return[{type:l.Store},{type:a.FormBuilder}]}),{required:[{type:i.Input}],disabled:[{type:i.Input}]})}()},UGF7:function(t,e,n){"use strict";n.d(e,"a",(function(){return Z}));var i=n("mrSG"),a=n("fXoL"),r=n("FKr1"),o=n("0IaG"),s=n("3Pt+"),l=n("gmuX"),c=n("xw5a"),d=n("S+vS"),p=n("6OOC"),u=n("XNiG"),m=n("LRne"),f=n("1G5W"),h=n("JX91"),g=n("pLZG"),y=n("lJxs"),b=n("5+tZ"),v=n("05l1"),x=n("x+ZX"),C=n("//Q6"),S=n("g+M/"),w=n("l7P3"),E=n("tyNb"),I=n("sYmb"),O=n("/t3+"),T=n("XiUz"),M=n("bTqV"),F=n("NFeN"),P=n("kmnG"),D=n("d3UM"),k=n("ofXK"),j=n("qFsG"),A=n("/1cH"),_=n("gl+N"),L=n("bSwM"),V=n("HX6g"),R=n("d5eY"),N=["keyNameInput"];function G(t,e){if(1&t&&(a["\u0275\u0275elementStart"](0,"mat-option",28),a["\u0275\u0275text"](1),a["\u0275\u0275pipe"](2,"translate"),a["\u0275\u0275elementEnd"]()),2&t){var n=e.$implicit,i=a["\u0275\u0275nextContext"]();a["\u0275\u0275property"]("value",n),a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](2,2,i.entityKeyTypeTranslations.get(n))," ")}}function B(t,e){if(1&t){var n=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementStart"](0,"button",29),a["\u0275\u0275listener"]("click",(function(){return a["\u0275\u0275restoreView"](n),a["\u0275\u0275nextContext"]().clear()})),a["\u0275\u0275elementStart"](1,"mat-icon",4),a["\u0275\u0275text"](2,"close"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()}}function U(t,e){if(1&t&&(a["\u0275\u0275elementStart"](0,"mat-option",28),a["\u0275\u0275element"](1,"span",30),a["\u0275\u0275pipe"](2,"highlight"),a["\u0275\u0275elementEnd"]()),2&t){var n=e.$implicit,i=a["\u0275\u0275nextContext"]();a["\u0275\u0275property"]("value",n),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("innerHTML",a["\u0275\u0275pipeBind2"](2,2,n,i.searchText),a["\u0275\u0275sanitizeHtml"])}}function q(t,e){1&t&&(a["\u0275\u0275elementStart"](0,"mat-error"),a["\u0275\u0275text"](1),a["\u0275\u0275pipe"](2,"translate"),a["\u0275\u0275elementEnd"]()),2&t&&(a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](2,1,"filter.key-name-required")," "))}function W(t,e){if(1&t&&(a["\u0275\u0275elementStart"](0,"mat-option",28),a["\u0275\u0275element"](1,"mat-icon",22),a["\u0275\u0275elementStart"](2,"span"),a["\u0275\u0275text"](3),a["\u0275\u0275pipe"](4,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()),2&t){var n=e.$implicit,i=a["\u0275\u0275nextContext"]();a["\u0275\u0275property"]("value",n),a["\u0275\u0275advance"](1),a["\u0275\u0275propertyInterpolate"]("svgIcon",i.entityKeyValueTypes.get(i.entityKeyValueTypeEnum[n]).icon),a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate"](a["\u0275\u0275pipeBind1"](4,3,i.entityKeyValueTypes.get(i.entityKeyValueTypeEnum[n]).name))}}function z(t,e){1&t&&(a["\u0275\u0275elementStart"](0,"mat-error"),a["\u0275\u0275text"](1),a["\u0275\u0275pipe"](2,"translate"),a["\u0275\u0275elementEnd"]()),2&t&&(a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](2,1,"filter.value-type-required")," "))}function K(t,e){1&t&&(a["\u0275\u0275elementStart"](0,"mat-form-field",33),a["\u0275\u0275elementStart"](1,"mat-label",10),a["\u0275\u0275text"](2,"filter.value"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](3,"input",34),a["\u0275\u0275pipe"](4,"translate"),a["\u0275\u0275elementEnd"]()),2&t&&(a["\u0275\u0275advance"](3),a["\u0275\u0275propertyInterpolate"]("placeholder",a["\u0275\u0275pipeBind1"](4,1,"filter.value")))}function H(t,e){1&t&&(a["\u0275\u0275elementStart"](0,"mat-form-field",33),a["\u0275\u0275elementStart"](1,"mat-label",10),a["\u0275\u0275text"](2,"filter.value"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](3,"input",35),a["\u0275\u0275elementEnd"]())}function $(t,e){1&t&&a["\u0275\u0275element"](0,"tb-datetime",36)}function Q(t,e){if(1&t&&(a["\u0275\u0275elementStart"](0,"mat-checkbox",37),a["\u0275\u0275text"](1),a["\u0275\u0275pipe"](2,"translate"),a["\u0275\u0275elementEnd"]()),2&t){var n=a["\u0275\u0275nextContext"](2);a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](2,1,n.keyFilterFormGroup.get("value").value?"value.true":"value.false")," ")}}function X(t,e){if(1&t&&(a["\u0275\u0275elementStart"](0,"div",2),a["\u0275\u0275elementStart"](1,"div",31),a["\u0275\u0275template"](2,K,5,3,"ng-template",32),a["\u0275\u0275template"](3,H,4,0,"ng-template",32),a["\u0275\u0275template"](4,$,1,0,"ng-template",32),a["\u0275\u0275template"](5,Q,3,3,"ng-template",32),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()),2&t){var n=a["\u0275\u0275nextContext"]();a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngSwitch",n.keyFilterFormGroup.get("valueType").value),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngSwitchCase",n.entityKeyValueTypeEnum.STRING),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngSwitchCase",n.entityKeyValueTypeEnum.NUMERIC),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngSwitchCase",n.entityKeyValueTypeEnum.DATE_TIME),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngSwitchCase",n.entityKeyValueTypeEnum.BOOLEAN)}}function Y(t,e){if(1&t&&a["\u0275\u0275element"](0,"tb-filter-predicate-list",38),2&t){var n=a["\u0275\u0275nextContext"]();a["\u0275\u0275property"]("allowUserDynamicSource",n.data.allowUserDynamicSource)("onlyUserDynamicSource",n.isConstantKeyType)("displayUserParameters",n.data.displayUserParameters)("valueType",n.keyFilterFormGroup.get("valueType").value)("key",n.keyFilterFormGroup.get("key.key").value)}}function J(t,e){if(1&t&&(a["\u0275\u0275elementStart"](0,"button",39),a["\u0275\u0275pipe"](1,"async"),a["\u0275\u0275text"](2),a["\u0275\u0275pipe"](3,"translate"),a["\u0275\u0275elementEnd"]()),2&t){var n=a["\u0275\u0275nextContext"]();a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](1,2,n.isLoading$)||n.keyFilterFormGroup.invalid||!n.keyFilterFormGroup.dirty),a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](3,4,n.data.isAdd?"action.add":"action.update")," ")}}var Z=function(t){function e(e,n,i,a,r,o,l,d,m){var v=t.call(this,e,n,r)||this;return v.store=e,v.router=n,v.data=i,v.errorStateMatcher=a,v.dialogRef=r,v.deviceProfileService=o,v.dialogs=l,v.translate=d,v.fb=m,v.dirty=!1,v.destroy$=new u.b,v.entityKeyTypes=v.data.telemetryKeysOnly?[c.e.ATTRIBUTE,c.e.TIME_SERIES,c.e.CONSTANT]:[c.e.ENTITY_FIELD,c.e.ATTRIBUTE,c.e.TIME_SERIES],v.entityKeyTypeTranslations=c.w,v.entityKeyValueTypesKeys=Object.keys(c.f),v.entityKeyValueTypeEnum=c.f,v.entityKeyValueTypes=c.x,v.submitted=!1,v.showAutocomplete=!1,v.searchText="",v.keyFilterFormGroup=v.fb.group({key:v.fb.group({type:[v.data.keyFilter.key.type,[s.Validators.required]],key:[v.data.keyFilter.key.key,[s.Validators.required]]}),valueType:[v.data.keyFilter.valueType,[s.Validators.required]],predicates:[v.data.keyFilter.predicates,[s.Validators.required]]}),v.data.telemetryKeysOnly&&v.keyFilterFormGroup.addControl("value",v.fb.control(v.data.keyFilter.value)),v.data.readonly?v.keyFilterFormGroup.disable({emitEvent:!1}):(v.keyFilterFormGroup.get("valueType").valueChanges.pipe(Object(f.a)(v.destroy$)).subscribe((function(t){var e=v.keyFilterFormGroup.value.valueType,n=v.keyFilterFormGroup.get("predicates").value;e&&e!==t&&n&&n.length&&v.dialogs.confirm(v.translate.instant("filter.key-value-type-change-title"),v.translate.instant("filter.key-value-type-change-message")).subscribe((function(t){t?v.keyFilterFormGroup.get("predicates").setValue([]):v.keyFilterFormGroup.get("valueType").setValue(e,{emitEvent:!1})}))})),v.keyFilterFormGroup.get("key.type").valueChanges.pipe(Object(h.a)(v.data.keyFilter.key.type),Object(f.a)(v.destroy$)).subscribe((function(t){t===c.e.ENTITY_FIELD||Object(C.n)(v.data.entityId)?(v.entityKeysName=null,v.dirty=!1,v.showAutocomplete=!0):v.showAutocomplete=!1,v.data.telemetryKeysOnly&&(t===c.e.CONSTANT?(v.keyFilterFormGroup.get("value").setValidators(s.Validators.required),v.keyFilterFormGroup.get("value").updateValueAndValidity()):(v.keyFilterFormGroup.get("value").clearValidators(),v.keyFilterFormGroup.get("value").updateValueAndValidity()))})),v.keyFilterFormGroup.get("key.key").valueChanges.pipe(Object(g.a)((function(t){return v.keyFilterFormGroup.get("key.type").value===c.e.ENTITY_FIELD&&p.a.hasOwnProperty(t)})),Object(f.a)(v.destroy$)).subscribe((function(t){var e,n=v.keyFilterFormGroup.value.valueType,i=(null===(e=p.a[t])||void 0===e?void 0:e.time)?c.f.DATE_TIME:c.f.STRING;n!==i&&v.keyFilterFormGroup.get("valueType").patchValue(i,{emitEvent:!1})})),v.filteredKeysName=v.keyFilterFormGroup.get("key.key").valueChanges.pipe(Object(y.a)((function(t){return t||""})),Object(b.b)((function(t){return v.fetchEntityName(t)})),Object(f.a)(v.destroy$))),v}return Object(i.d)(e,t),e.prototype.ngOnDestroy=function(){t.prototype.ngOnDestroy.call(this),this.destroy$.next(),this.destroy$.complete()},e.prototype.isErrorState=function(t,e){var n=this.errorStateMatcher.isErrorState(t,e),i=!!(t&&t.invalid&&this.submitted);return n||i},e.prototype.cancel=function(){this.dialogRef.close(null)},e.prototype.clear=function(){var t=this;this.keyFilterFormGroup.get("key.key").patchValue("",{emitEvent:!0}),setTimeout((function(){t.keyNameInput.nativeElement.blur(),t.keyNameInput.nativeElement.focus()}),0)},e.prototype.onFocus=function(){!this.dirty&&this.showAutocomplete&&(this.keyFilterFormGroup.get("key.key").updateValueAndValidity({onlySelf:!0,emitEvent:!0}),this.dirty=!0)},e.prototype.save=function(){if(this.submitted=!0,this.keyFilterFormGroup.valid){var t=this.keyFilterFormGroup.getRawValue();this.dialogRef.close(t)}},Object.defineProperty(e.prototype,"isConstantKeyType",{get:function(){return this.keyFilterFormGroup.get("key.type").value===c.e.CONSTANT},enumerable:!1,configurable:!0}),e.prototype.fetchEntityName=function(t){return this.searchText=t,this.getEntityKeys().pipe(Object(y.a)((function(e){return t?e.filter((function(e){return e.toUpperCase().startsWith(t.toUpperCase())})):e})))},e.prototype.getEntityKeys=function(){var t,e;if(!this.entityKeysName){var n=void 0;switch(this.keyFilterFormGroup.get("key.type").value){case c.e.ENTITY_FIELD:n=Object(m.a)(Object.keys(p.a).map((function(t){return p.a[t]})).map((function(t){return t.keyName})).sort());break;case c.e.ATTRIBUTE:n=this.deviceProfileService.getDeviceProfileDevicesAttributesKeys(null===(t=this.data.entityId)||void 0===t?void 0:t.id,{ignoreLoading:!0});break;case c.e.TIME_SERIES:n=this.deviceProfileService.getDeviceProfileDevicesTimeseriesKeys(null===(e=this.data.entityId)||void 0===e?void 0:e.id,{ignoreLoading:!0});break;default:n=Object(m.a)([])}this.entityKeysName=n.pipe(Object(v.a)(1),Object(x.a)())}return this.entityKeysName},e.\u0275fac=function(t){return new(t||e)(a["\u0275\u0275directiveInject"](w.Store),a["\u0275\u0275directiveInject"](E.Router),a["\u0275\u0275directiveInject"](o.MAT_DIALOG_DATA),a["\u0275\u0275directiveInject"](r.ErrorStateMatcher,4),a["\u0275\u0275directiveInject"](o.MatDialogRef),a["\u0275\u0275directiveInject"](S.a),a["\u0275\u0275directiveInject"](d.a),a["\u0275\u0275directiveInject"](I.TranslateService),a["\u0275\u0275directiveInject"](s.FormBuilder))},e.\u0275cmp=a["\u0275\u0275defineComponent"]({type:e,selectors:[["tb-key-filter-dialog"]],viewQuery:function(t,e){var n;(1&t&&a["\u0275\u0275staticViewQuery"](N,!0),2&t)&&(a["\u0275\u0275queryRefresh"](n=a["\u0275\u0275loadQuery"]())&&(e.keyNameInput=n.first))},features:[a["\u0275\u0275ProvidersFeature"]([{provide:r.ErrorStateMatcher,useExisting:e}]),a["\u0275\u0275InheritDefinitionFeature"]],decls:49,vars:32,consts:[[2,"width","900px",3,"formGroup","ngSubmit"],["color","primary"],["fxFlex",""],["mat-icon-button","","type","button",3,"click"],[1,"material-icons"],["mat-dialog-content",""],["fxLayout","column",3,"disabled"],["fxLayout","row","fxLayoutGap","8px",1,"entity-key"],["fxLayout","row","formGroupName","key","fxLayoutGap","8px",3,"fxFlex"],["fxFlex","40",1,"mat-block"],["translate",""],["required","","formControlName","type"],[3,"value",4,"ngFor","ngForOf"],["fxFlex","60",1,"mat-block"],["matInput","","required","","formControlName","key",3,"matAutocomplete","matAutocompleteDisabled","focusin"],["keyNameInput",""],["type","button","matSuffix","","mat-button","","mat-icon-button","","aria-label","Clear",3,"click",4,"ngIf"],["autoActiveFirstOption",""],["keyName","matAutocomplete"],[4,"ngIf"],[1,"mat-block",3,"fxFlex"],["formControlName","valueType"],[1,"tb-mat-18",3,"svgIcon"],["fxFlex","",4,"ngIf"],["formControlName","predicates",3,"allowUserDynamicSource","onlyUserDynamicSource","displayUserParameters","valueType","key",4,"ngIf"],["mat-dialog-actions","","fxLayoutAlign","end center"],["mat-button","","color","primary","type","button","cdkFocusInitial","",3,"disabled","click"],["mat-raised-button","","color","primary","type","submit",3,"disabled",4,"ngIf"],[3,"value"],["type","button","matSuffix","","mat-button","","mat-icon-button","","aria-label","Clear",3,"click"],[3,"innerHTML"],["fxLayout","column",3,"ngSwitch"],[3,"ngSwitchCase"],[1,"mat-block"],["matInput","","required","","formControlName","value",3,"placeholder"],["required","","type","number","matInput","","formControlName","value"],["formControlName","value","dateText","filter.date","timeText","filter.time","required",""],["formControlName","value",2,"margin-top","20px"],["formControlName","predicates",3,"allowUserDynamicSource","onlyUserDynamicSource","displayUserParameters","valueType","key"],["mat-raised-button","","color","primary","type","submit",3,"disabled"]],template:function(t,e){if(1&t&&(a["\u0275\u0275elementStart"](0,"form",0),a["\u0275\u0275listener"]("ngSubmit",(function(){return e.save()})),a["\u0275\u0275elementStart"](1,"mat-toolbar",1),a["\u0275\u0275elementStart"](2,"h2"),a["\u0275\u0275text"](3),a["\u0275\u0275pipe"](4,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](5,"span",2),a["\u0275\u0275elementStart"](6,"button",3),a["\u0275\u0275listener"]("click",(function(){return e.cancel()})),a["\u0275\u0275elementStart"](7,"mat-icon",4),a["\u0275\u0275text"](8,"close"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](9,"div",5),a["\u0275\u0275elementStart"](10,"fieldset",6),a["\u0275\u0275pipe"](11,"async"),a["\u0275\u0275elementStart"](12,"section",7),a["\u0275\u0275elementStart"](13,"section",8),a["\u0275\u0275elementStart"](14,"mat-form-field",9),a["\u0275\u0275elementStart"](15,"mat-label",10),a["\u0275\u0275text"](16,"filter.key-type.key-type"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](17,"mat-select",11),a["\u0275\u0275template"](18,G,3,4,"mat-option",12),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](19,"mat-form-field",13),a["\u0275\u0275elementStart"](20,"mat-label",10),a["\u0275\u0275text"](21,"filter.key-name"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](22,"input",14,15),a["\u0275\u0275listener"]("focusin",(function(){return e.onFocus()})),a["\u0275\u0275elementEnd"](),a["\u0275\u0275template"](24,B,3,0,"button",16),a["\u0275\u0275elementStart"](25,"mat-autocomplete",17,18),a["\u0275\u0275template"](27,U,3,5,"mat-option",12),a["\u0275\u0275pipe"](28,"async"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275template"](29,q,3,3,"mat-error",19),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](30,"mat-form-field",20),a["\u0275\u0275elementStart"](31,"mat-label",10),a["\u0275\u0275text"](32,"filter.value-type.value-type"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](33,"mat-select",21),a["\u0275\u0275elementStart"](34,"mat-select-trigger"),a["\u0275\u0275element"](35,"mat-icon",22),a["\u0275\u0275elementStart"](36,"span"),a["\u0275\u0275text"](37),a["\u0275\u0275pipe"](38,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275template"](39,W,5,5,"mat-option",12),a["\u0275\u0275elementEnd"](),a["\u0275\u0275template"](40,z,3,3,"mat-error",19),a["\u0275\u0275elementEnd"](),a["\u0275\u0275template"](41,X,6,5,"div",23),a["\u0275\u0275elementEnd"](),a["\u0275\u0275template"](42,Y,1,5,"tb-filter-predicate-list",24),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](43,"div",25),a["\u0275\u0275elementStart"](44,"button",26),a["\u0275\u0275listener"]("click",(function(){return e.cancel()})),a["\u0275\u0275pipe"](45,"async"),a["\u0275\u0275text"](46),a["\u0275\u0275pipe"](47,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275template"](48,J,4,6,"button",27),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()),2&t){var n,i,r=a["\u0275\u0275reference"](26);a["\u0275\u0275property"]("formGroup",e.keyFilterFormGroup),a["\u0275\u0275advance"](3),a["\u0275\u0275textInterpolate"](a["\u0275\u0275pipeBind1"](4,20,e.data.isAdd?"filter.add-key-filter":e.data.readonly?"filter.key-filter":"filter.edit-key-filter")),a["\u0275\u0275advance"](7),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](11,22,e.isLoading$)),a["\u0275\u0275advance"](3),a["\u0275\u0275property"]("fxFlex",e.isConstantKeyType?45:70),a["\u0275\u0275advance"](5),a["\u0275\u0275property"]("ngForOf",e.entityKeyTypes),a["\u0275\u0275advance"](4),a["\u0275\u0275property"]("matAutocomplete",r)("matAutocompleteDisabled",!e.showAutocomplete),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("ngIf",e.keyFilterFormGroup.get("key.key").value&&e.showAutocomplete),a["\u0275\u0275advance"](3),a["\u0275\u0275property"]("ngForOf",a["\u0275\u0275pipeBind1"](28,24,e.filteredKeysName)),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("ngIf",e.keyFilterFormGroup.get("key.key").hasError("required")),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("fxFlex",e.isConstantKeyType?20:30),a["\u0275\u0275advance"](5),a["\u0275\u0275propertyInterpolate"]("svgIcon",null==(n=e.entityKeyValueTypes.get(e.keyFilterFormGroup.get("valueType").value))?null:n.icon),a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate"](a["\u0275\u0275pipeBind1"](38,26,null==(i=e.entityKeyValueTypes.get(e.keyFilterFormGroup.get("valueType").value))?null:i.name)),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("ngForOf",e.entityKeyValueTypesKeys),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",e.keyFilterFormGroup.get("valueType").hasError("required")),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",e.isConstantKeyType),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",e.keyFilterFormGroup.get("valueType").value),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](45,28,e.isLoading$)),a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](47,30,e.data.readonly?"action.close":"action.cancel")," "),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("ngIf",!e.data.readonly)}},directives:[s["\u0275angular_packages_forms_forms_y"],s.NgControlStatusGroup,s.FormGroupDirective,O.MatToolbar,T.b,M.MatButton,F.MatIcon,o.MatDialogContent,T.f,T.g,s.FormGroupName,P.MatFormField,P.MatLabel,I.TranslateDirective,D.MatSelect,s.RequiredValidator,s.NgControlStatus,s.FormControlName,k.NgForOf,j.MatInput,s.DefaultValueAccessor,A.MatAutocompleteTrigger,k.NgIf,A.MatAutocomplete,D.MatSelectTrigger,o.MatDialogActions,T.e,r.MatOption,P.MatSuffix,P.MatError,k.NgSwitch,k.NgSwitchCase,s.NumberValueAccessor,_.a,L.MatCheckbox,V.a],pipes:[I.TranslatePipe,k.AsyncPipe,R.a],styles:["[_nghost-%COMP%]     .entity-key mat-form-field .mat-form-field-wrapper .mat-form-field-infix{width:auto}"]}),e}(l.a);!function(){a["\u0275setClassMetadata"](Z,[{type:a.Component,args:[{selector:"tb-key-filter-dialog",templateUrl:"./key-filter-dialog.component.html",providers:[{provide:r.ErrorStateMatcher,useExisting:Z}],styleUrls:["./key-filter-dialog.component.scss"]}]}],(function(){return[{type:w.Store},{type:E.Router},{type:void 0,decorators:[{type:a.Inject,args:[o.MAT_DIALOG_DATA]}]},{type:r.ErrorStateMatcher,decorators:[{type:a.SkipSelf}]},{type:o.MatDialogRef},{type:S.a},{type:d.a},{type:I.TranslateService},{type:s.FormBuilder}]}),{keyNameInput:[{type:a.ViewChild,args:["keyNameInput",{static:!0}]}]})}()},UaJx:function(t,e,n){"use strict";n.d(e,"a",(function(){return pt}));var i=n("mrSG"),a=n("fXoL"),r=n("RxGS"),o=n("mbhL"),s=n("M9IT"),l=n("Dh3D"),c=n("Kj3r"),d=n("/uUt"),p=n("vkgz"),u=n("lJxs"),m=n("JIr8"),f=n("4r/P"),h=n("xgIS"),g=n("VRyK"),y=n("LRne"),b=n("cp0P"),v=n("qxrw"),x=n("S+vS"),C=n("LrsY"),S=n("aX2P"),w=(n("HnHJ"),n("//Q6")),E=n("l7P3"),I=n("tyNb"),O=n("sYmb"),T=n("0IaG"),M=n("jhN1"),F=["entityTableHeader"],P=["searchInput"];function D(t,e){if(1&t){var n=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementStart"](0,"mat-drawer",36,37),a["\u0275\u0275elementStart"](2,"tb-entity-details-panel",38),a["\u0275\u0275listener"]("closeEntityDetails",(function(){a["\u0275\u0275restoreView"](n);var t=a["\u0275\u0275nextContext"]();return t.isDetailsOpen=!1,t.detailsPanelOpened.emit(t.isDetailsOpen)}))("entityUpdated",(function(t){return a["\u0275\u0275restoreView"](n),a["\u0275\u0275nextContext"]().onEntityUpdated(t)}))("entityAction",(function(t){return a["\u0275\u0275restoreView"](n),a["\u0275\u0275nextContext"]().onEntityAction(t)})),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()}if(2&t){var i=a["\u0275\u0275nextContext"]();a["\u0275\u0275property"]("opened",i.isDetailsOpen),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("entitiesTableConfig",i.entitiesTableConfig)("entityId",null==i.dataSource.currentEntity?null:i.dataSource.currentEntity.id)}}function k(t,e){if(1&t&&(a["\u0275\u0275elementStart"](0,"span",39),a["\u0275\u0275text"](1),a["\u0275\u0275elementEnd"]()),2&t){var n=a["\u0275\u0275nextContext"]();a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate"](n.entitiesTableConfig.tableTitle)}}function j(t,e){if(1&t){var n=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementStart"](0,"tb-timewindow",40),a["\u0275\u0275listener"]("ngModelChange",(function(t){return a["\u0275\u0275restoreView"](n),a["\u0275\u0275nextContext"]().timewindow=t}))("ngModelChange",(function(){return a["\u0275\u0275restoreView"](n),a["\u0275\u0275nextContext"]().onTimewindowChange()})),a["\u0275\u0275elementEnd"]()}if(2&t){var i=a["\u0275\u0275nextContext"]();a["\u0275\u0275property"]("ngModel",i.timewindow)}}function A(t,e){if(1&t){var n=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementStart"](0,"button",15),a["\u0275\u0275listener"]("click",(function(t){return a["\u0275\u0275restoreView"](n),a["\u0275\u0275nextContext"]().addEntity(t)})),a["\u0275\u0275pipe"](1,"async"),a["\u0275\u0275pipe"](2,"translate"),a["\u0275\u0275elementStart"](3,"mat-icon"),a["\u0275\u0275text"](4,"add"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()}if(2&t){var i=a["\u0275\u0275nextContext"]();a["\u0275\u0275propertyInterpolate"]("matTooltip",a["\u0275\u0275pipeBind1"](2,4,i.translations.add)),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](1,2,i.isLoading$))}}function _(t,e){if(1&t){var n=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementStart"](0,"button",43),a["\u0275\u0275listener"]("click",(function(t){return a["\u0275\u0275restoreView"](n),a["\u0275\u0275nextContext"](2).entitiesTableConfig.addActionDescriptors[0].onAction(t)})),a["\u0275\u0275pipe"](1,"async"),a["\u0275\u0275elementStart"](2,"mat-icon"),a["\u0275\u0275text"](3),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()}if(2&t){var i=a["\u0275\u0275nextContext"](2);a["\u0275\u0275propertyInterpolate"]("matTooltip",i.entitiesTableConfig.addActionDescriptors[0].name),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](1,4,i.isLoading$))("fxShow",i.entitiesTableConfig.addActionDescriptors[0].isEnabled()),a["\u0275\u0275advance"](3),a["\u0275\u0275textInterpolate"](i.entitiesTableConfig.addActionDescriptors[0].icon)}}function L(t,e){if(1&t){var n=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementStart"](0,"button",48),a["\u0275\u0275listener"]("click",(function(t){return a["\u0275\u0275restoreView"](n),e.$implicit.onAction(t)})),a["\u0275\u0275pipe"](1,"async"),a["\u0275\u0275elementStart"](2,"mat-icon"),a["\u0275\u0275text"](3),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](4,"span"),a["\u0275\u0275text"](5),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()}if(2&t){var i=e.$implicit,r=a["\u0275\u0275nextContext"](3);a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](1,4,r.isLoading$))("fxShow",i.isEnabled()),a["\u0275\u0275advance"](3),a["\u0275\u0275textInterpolate"](i.icon),a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate"](i.name)}}function V(t,e){if(1&t&&(a["\u0275\u0275elementStart"](0,"button",44),a["\u0275\u0275pipe"](1,"async"),a["\u0275\u0275pipe"](2,"translate"),a["\u0275\u0275elementStart"](3,"mat-icon"),a["\u0275\u0275text"](4,"add"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](5,"mat-menu",45,46),a["\u0275\u0275template"](7,L,6,6,"button",47),a["\u0275\u0275elementEnd"]()),2&t){var n=a["\u0275\u0275reference"](6),i=a["\u0275\u0275nextContext"](2);a["\u0275\u0275propertyInterpolate"]("matTooltip",a["\u0275\u0275pipeBind1"](2,6,i.translations.add)),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](1,4,i.isLoading$))("matMenuTriggerFor",n),a["\u0275\u0275advance"](7),a["\u0275\u0275property"]("ngForOf",i.entitiesTableConfig.addActionDescriptors)}}function R(t,e){if(1&t&&(a["\u0275\u0275template"](0,_,4,6,"button",41),a["\u0275\u0275template"](1,V,8,8,"ng-template",null,42,a["\u0275\u0275templateRefExtractor"])),2&t){var n=a["\u0275\u0275reference"](2),i=a["\u0275\u0275nextContext"]();a["\u0275\u0275property"]("ngIf",1===i.entitiesTableConfig.addActionDescriptors.length)("ngIfElse",n)}}function N(t,e){if(1&t){var n=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementStart"](0,"button",43),a["\u0275\u0275listener"]("click",(function(t){return a["\u0275\u0275restoreView"](n),e.$implicit.onAction(t)})),a["\u0275\u0275pipe"](1,"async"),a["\u0275\u0275elementStart"](2,"mat-icon"),a["\u0275\u0275text"](3),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()}if(2&t){var i=e.$implicit,r=a["\u0275\u0275nextContext"]();a["\u0275\u0275propertyInterpolate"]("matTooltip",i.name),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](1,4,r.isLoading$))("fxShow",i.isEnabled()),a["\u0275\u0275advance"](3),a["\u0275\u0275textInterpolate"](i.icon)}}function G(t,e){if(1&t){var n=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementStart"](0,"button",15),a["\u0275\u0275listener"]("click",(function(){return a["\u0275\u0275restoreView"](n),a["\u0275\u0275nextContext"]().enterFilterMode()})),a["\u0275\u0275pipe"](1,"async"),a["\u0275\u0275pipe"](2,"translate"),a["\u0275\u0275elementStart"](3,"mat-icon"),a["\u0275\u0275text"](4,"search"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()}if(2&t){var i=a["\u0275\u0275nextContext"]();a["\u0275\u0275propertyInterpolate"]("matTooltip",a["\u0275\u0275pipeBind1"](2,4,i.translations.search)),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](1,2,i.isLoading$))}}function B(t,e){if(1&t){var n=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementStart"](0,"button",43),a["\u0275\u0275listener"]("click",(function(t){a["\u0275\u0275restoreView"](n);var i=e.$implicit,r=a["\u0275\u0275nextContext"](2);return i.onAction(t,r.dataSource.selection.selected)})),a["\u0275\u0275pipe"](1,"async"),a["\u0275\u0275elementStart"](2,"mat-icon"),a["\u0275\u0275text"](3),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()}if(2&t){var i=e.$implicit,r=a["\u0275\u0275nextContext"](2);a["\u0275\u0275propertyInterpolate"]("matTooltip",i.name),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](1,4,r.isLoading$))("fxShow",i.isEnabled),a["\u0275\u0275advance"](3),a["\u0275\u0275textInterpolate"](i.icon)}}var U=function(t){return{count:t}};function q(t,e){if(1&t&&(a["\u0275\u0275elementStart"](0,"mat-toolbar",49),a["\u0275\u0275elementStart"](1,"div",5),a["\u0275\u0275elementStart"](2,"span",50),a["\u0275\u0275text"](3),a["\u0275\u0275pipe"](4,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](5,"span",10),a["\u0275\u0275template"](6,B,4,6,"button",14),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()),2&t){var n=a["\u0275\u0275nextContext"]();a["\u0275\u0275property"]("fxShow",!n.dataSource.selection.isEmpty()),a["\u0275\u0275advance"](3),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind2"](4,3,n.translations.selectedEntities,a["\u0275\u0275pureFunction1"](6,U,n.dataSource.selection.selected.length))," "),a["\u0275\u0275advance"](3),a["\u0275\u0275property"]("ngForOf",n.groupActionDescriptors)}}function W(t,e){if(1&t){var n=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementStart"](0,"mat-header-cell",51),a["\u0275\u0275elementStart"](1,"mat-checkbox",52),a["\u0275\u0275listener"]("change",(function(t){a["\u0275\u0275restoreView"](n);var e=a["\u0275\u0275nextContext"]();return t?e.dataSource.masterToggle():null})),a["\u0275\u0275pipe"](2,"async"),a["\u0275\u0275pipe"](3,"async"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()}if(2&t){var i=a["\u0275\u0275nextContext"]();a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("checked",i.dataSource.selection.hasValue()&&a["\u0275\u0275pipeBind1"](2,2,i.dataSource.isAllSelected()))("indeterminate",i.dataSource.selection.hasValue()&&!a["\u0275\u0275pipeBind1"](3,4,i.dataSource.isAllSelected()))}}function z(t,e){if(1&t){var n=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementStart"](0,"mat-cell"),a["\u0275\u0275elementStart"](1,"mat-checkbox",53),a["\u0275\u0275listener"]("click",(function(t){return a["\u0275\u0275restoreView"](n),t.stopPropagation()}))("change",(function(t){a["\u0275\u0275restoreView"](n);var i=e.$implicit,r=a["\u0275\u0275nextContext"]();return t?r.dataSource.selection.toggle(i):null})),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()}if(2&t){var i=e.$implicit,r=a["\u0275\u0275nextContext"]();a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("fxShow",r.entitiesTableConfig.entitySelectionEnabled(i))("checked",r.dataSource.selection.isSelected(i))}}var K=function(t){return{"mat-number-cell":t}};function H(t,e){if(1&t&&(a["\u0275\u0275elementStart"](0,"mat-header-cell",57),a["\u0275\u0275text"](1),a["\u0275\u0275pipe"](2,"translate"),a["\u0275\u0275elementEnd"]()),2&t){var n=a["\u0275\u0275nextContext"]().$implicit,i=a["\u0275\u0275nextContext"]();a["\u0275\u0275property"]("ngClass",a["\u0275\u0275pureFunction1"](7,K,n.isNumberColumn))("fxHide.lt-lg",n.mobileHide)("ngStyle",i.headerCellStyle(n))("disabled",!n.sortable),a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"](" ",n.ignoreTranslate?n.title:a["\u0275\u0275pipeBind1"](2,5,n.title)," ")}}function $(t,e){if(1&t&&a["\u0275\u0275element"](0,"mat-cell",58),2&t){var n=e.$implicit,i=e.index,r=a["\u0275\u0275nextContext"]().$implicit,o=a["\u0275\u0275nextContext"]();a["\u0275\u0275property"]("ngClass",a["\u0275\u0275pureFunction1"](5,K,r.isNumberColumn))("fxHide.lt-lg",r.mobileHide)("matTooltip",o.cellTooltip(n,r,i))("innerHTML",o.cellContent(n,r,i),a["\u0275\u0275sanitizeHtml"])("ngStyle",o.cellStyle(n,r,i))}}function Q(t,e){if(1&t&&(a["\u0275\u0275elementContainerStart"](0,54),a["\u0275\u0275template"](1,H,3,9,"mat-header-cell",55),a["\u0275\u0275template"](2,$,1,7,"mat-cell",56),a["\u0275\u0275elementContainerEnd"]()),2&t){var n=e.$implicit;a["\u0275\u0275property"]("matColumnDef",n.key)}}function X(t,e){if(1&t&&(a["\u0275\u0275elementStart"](0,"mat-header-cell",61),a["\u0275\u0275text"](1),a["\u0275\u0275pipe"](2,"translate"),a["\u0275\u0275elementEnd"]()),2&t){var n=a["\u0275\u0275nextContext"]().$implicit,i=a["\u0275\u0275nextContext"]();a["\u0275\u0275property"]("ngStyle",i.headerCellStyle(n))("disabled",!n.sortable),a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](2,3,n.title)," ")}}function Y(t,e){if(1&t){var n=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementStart"](0,"mat-cell",62),a["\u0275\u0275elementStart"](1,"button",43),a["\u0275\u0275listener"]("click",(function(t){a["\u0275\u0275restoreView"](n);var i=e.$implicit;return a["\u0275\u0275nextContext"]().$implicit.actionDescriptor.onAction(t,i)})),a["\u0275\u0275pipe"](2,"async"),a["\u0275\u0275elementStart"](3,"mat-icon",63),a["\u0275\u0275text"](4),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()}if(2&t){var i=e.$implicit,r=e.index,o=a["\u0275\u0275nextContext"]().$implicit,s=a["\u0275\u0275nextContext"]();a["\u0275\u0275property"]("ngStyle",s.cellStyle(i,o,r)),a["\u0275\u0275advance"](1),a["\u0275\u0275propertyInterpolate"]("matTooltip",o.actionDescriptor.nameFunction?o.actionDescriptor.nameFunction(i):o.actionDescriptor.name),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](2,7,s.isLoading$))("fxShow",o.actionDescriptor.isEnabled(i)),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("svgIcon",o.actionDescriptor.mdiIcon)("ngStyle",o.actionDescriptor.style),a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"](" ",o.actionDescriptor.icon,"")}}function J(t,e){if(1&t&&(a["\u0275\u0275elementContainerStart"](0,54),a["\u0275\u0275template"](1,X,3,5,"mat-header-cell",59),a["\u0275\u0275template"](2,Y,5,9,"mat-cell",60),a["\u0275\u0275elementContainerEnd"]()),2&t){var n=e.$implicit;a["\u0275\u0275property"]("matColumnDef",n.key)}}var Z=function(t,e,n){return{minWidth:t,maxWidth:e,width:n}};function tt(t,e){if(1&t&&(a["\u0275\u0275elementStart"](0,"mat-header-cell",64),a["\u0275\u0275text"](1),a["\u0275\u0275pipe"](2,"translate"),a["\u0275\u0275elementEnd"]()),2&t){var n=a["\u0275\u0275nextContext"]();a["\u0275\u0275property"]("ngStyle.gt-md",a["\u0275\u0275pureFunction3"](4,Z,40*n.cellActionDescriptors.length+"px",40*n.cellActionDescriptors.length+"px",40*n.cellActionDescriptors.length+"px")),a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"](" ",n.entitiesTableConfig.actionsColumnTitle?a["\u0275\u0275pipeBind1"](2,2,n.entitiesTableConfig.actionsColumnTitle):""," ")}}function et(t,e){if(1&t){var n=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementStart"](0,"button",15),a["\u0275\u0275listener"]("click",(function(t){a["\u0275\u0275restoreView"](n);var i=e.$implicit,r=a["\u0275\u0275nextContext"]().$implicit;return i.onAction(t,r)})),a["\u0275\u0275pipe"](1,"async"),a["\u0275\u0275elementStart"](2,"mat-icon",63),a["\u0275\u0275text"](3),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()}if(2&t){var i=e.$implicit,r=a["\u0275\u0275nextContext"]().$implicit,o=a["\u0275\u0275nextContext"]();a["\u0275\u0275propertyInterpolate"]("matTooltip",i.nameFunction?i.nameFunction(r):i.name),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](1,5,o.isLoading$)||!i.isEnabled(r)),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("svgIcon",i.mdiIcon)("ngStyle",i.style),a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"](" ",i.icon,"")}}function nt(t,e){if(1&t){var n=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementStart"](0,"button",48),a["\u0275\u0275listener"]("click",(function(t){a["\u0275\u0275restoreView"](n);var i=e.$implicit,r=a["\u0275\u0275nextContext"](2).$implicit;return i.onAction(t,r)})),a["\u0275\u0275pipe"](1,"async"),a["\u0275\u0275elementStart"](2,"mat-icon",63),a["\u0275\u0275text"](3),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](4,"span"),a["\u0275\u0275text"](5),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()}if(2&t){var i=e.$implicit,r=a["\u0275\u0275nextContext"](2).$implicit,o=a["\u0275\u0275nextContext"]();a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](1,6,o.isLoading$))("fxShow",i.isEnabled(r)),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("svgIcon",i.mdiIcon)("ngStyle",i.style),a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"](" ",i.icon,""),a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate"](i.nameFunction?i.nameFunction(r):i.name)}}function it(t,e){if(1&t){var n=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementStart"](0,"div",68),a["\u0275\u0275elementStart"](1,"button",69),a["\u0275\u0275listener"]("click",(function(t){return a["\u0275\u0275restoreView"](n),t.stopPropagation()})),a["\u0275\u0275elementStart"](2,"mat-icon",70),a["\u0275\u0275text"](3,"more_vert"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](4,"mat-menu",45,71),a["\u0275\u0275template"](6,nt,6,8,"button",47),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()}if(2&t){var i=a["\u0275\u0275reference"](5),r=a["\u0275\u0275nextContext"](2);a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("matMenuTriggerFor",i),a["\u0275\u0275advance"](5),a["\u0275\u0275property"]("ngForOf",r.cellActionDescriptors)}}function at(t,e){if(1&t&&(a["\u0275\u0275elementStart"](0,"mat-cell",64),a["\u0275\u0275elementStart"](1,"div",65),a["\u0275\u0275template"](2,et,4,7,"button",66),a["\u0275\u0275elementEnd"](),a["\u0275\u0275template"](3,it,7,2,"div",67),a["\u0275\u0275elementEnd"]()),2&t){var n=a["\u0275\u0275nextContext"]();a["\u0275\u0275property"]("ngStyle.gt-md",a["\u0275\u0275pureFunction3"](3,Z,40*n.cellActionDescriptors.length+"px",40*n.cellActionDescriptors.length+"px",40*n.cellActionDescriptors.length+"px")),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("ngForOf",n.cellActionDescriptors),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",n.cellActionDescriptors.length)}}var rt=function(t){return{"mat-row-select":t}};function ot(t,e){if(1&t&&a["\u0275\u0275element"](0,"mat-header-row",72),2&t){var n=a["\u0275\u0275nextContext"]();a["\u0275\u0275property"]("ngClass",a["\u0275\u0275pureFunction1"](1,rt,n.selectionEnabled))}}var st=function(t,e,n){return{"mat-row-select":t,"mat-selected":e,"tb-current-entity":n}};function lt(t,e){if(1&t){var n=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementStart"](0,"mat-row",73),a["\u0275\u0275listener"]("click",(function(t){a["\u0275\u0275restoreView"](n);var i=e.$implicit;return a["\u0275\u0275nextContext"]().onRowClick(t,i)})),a["\u0275\u0275elementEnd"]()}if(2&t){var i=e.$implicit,r=a["\u0275\u0275nextContext"]();a["\u0275\u0275property"]("fxShow",!r.dataSource.dataLoading)("ngClass",a["\u0275\u0275pureFunction3"](2,st,r.selectionEnabled,r.dataSource.selection.isSelected(i),r.dataSource.isCurrentEntity(i)))}}function ct(t,e){1&t&&a["\u0275\u0275element"](0,"mat-divider")}function dt(t,e){if(1&t&&(a["\u0275\u0275element"](0,"mat-paginator",74),a["\u0275\u0275pipe"](1,"async")),2&t){var n=a["\u0275\u0275nextContext"]();a["\u0275\u0275property"]("length",a["\u0275\u0275pipeBind1"](1,4,n.dataSource.total()))("pageIndex",n.pageLink.page)("pageSize",n.pageLink.pageSize)("pageSizeOptions",n.pageSizeOptions)}}var pt=function(t){function e(e,n,i,r,o,s,l,c){var d=t.call(this,e)||this;return d.store=e,d.route=n,d.translate=i,d.dialog=r,d.dialogService=o,d.domSanitizer=s,d.cd=l,d.componentFactoryResolver=c,d.headerCellStyleCache=[],d.cellContentCache=[],d.cellTooltipCache=[],d.cellStyleCache=[],d.defaultPageSize=10,d.displayPagination=!0,d.textSearchMode=!1,d.isDetailsOpen=!1,d.detailsPanelOpened=new a.EventEmitter,d.viewInited=!1,d}return Object(i.d)(e,t),e.prototype.ngOnInit=function(){this.entitiesTableConfig?this.init(this.entitiesTableConfig):this.init(this.route.snapshot.data.entitiesTableConfig)},e.prototype.ngOnChanges=function(t){for(var e=0,n=Object.keys(t);e<n.length;e++){var i=n[e],a=t[i];a.firstChange||a.currentValue===a.previousValue||"entitiesTableConfig"===i&&a.currentValue&&this.init(a.currentValue)}},e.prototype.init=function(t){var e=this;if(this.isDetailsOpen=!1,this.entitiesTableConfig=t,this.entitiesTableConfig.headerComponent){var n=this.componentFactoryResolver.resolveComponentFactory(this.entitiesTableConfig.headerComponent),a=this.entityTableHeaderAnchor.viewContainerRef;a.clear(),a.createComponent(n).instance.entitiesTableConfig=this.entitiesTableConfig}this.entitiesTableConfig.table=this,this.translations=this.entitiesTableConfig.entityTranslations,this.headerActionDescriptors=Object(i.g)(this.entitiesTableConfig.headerActionDescriptors),this.groupActionDescriptors=Object(i.g)(this.entitiesTableConfig.groupActionDescriptors),this.cellActionDescriptors=Object(i.g)(this.entitiesTableConfig.cellActionDescriptors),this.entitiesTableConfig.entitiesDeleteEnabled&&(this.cellActionDescriptors.push({name:this.translate.instant("action.delete"),icon:"delete",isEnabled:function(t){return e.entitiesTableConfig.deleteEnabled(t)},onAction:function(t,n){return e.deleteEntity(t,n)}}),this.groupActionDescriptors.push({name:this.translate.instant("action.delete"),icon:"delete",isEnabled:!0,onAction:function(t,n){return e.deleteEntities(t,n)}}));var r=this.groupActionDescriptors.filter((function(t){return t.isEnabled}));this.selectionEnabled=this.entitiesTableConfig.selectionEnabled&&r.length,this.columnsUpdated();var s=null;if(this.entitiesTableConfig.defaultSortOrder&&(s={property:this.entitiesTableConfig.defaultSortOrder.property,direction:this.entitiesTableConfig.defaultSortOrder.direction}),this.displayPagination=this.entitiesTableConfig.displayPagination,this.defaultPageSize=this.entitiesTableConfig.defaultPageSize,this.pageSizeOptions=[this.defaultPageSize,2*this.defaultPageSize,3*this.defaultPageSize],this.entitiesTableConfig.useTimePageLink){this.timewindow=this.entitiesTableConfig.defaultTimewindowInterval;var l=Date.now();this.pageLink=new o.c(10,0,null,s,l-this.timewindow.history.timewindowMs,l)}else this.pageLink=new o.b(10,0,null,s);this.pageLink.pageSize=this.displayPagination?this.defaultPageSize:o.a,this.dataSource=this.entitiesTableConfig.dataSource(this.dataLoaded.bind(this)),this.entitiesTableConfig.onLoadAction&&this.entitiesTableConfig.onLoadAction(this.route),this.entitiesTableConfig.loadDataOnInit&&this.dataSource.loadEntities(this.pageLink),this.viewInited&&setTimeout((function(){e.updatePaginationSubscriptions()}),0)},e.prototype.ngAfterViewInit=function(){var t=this;Object(h.a)(this.searchInputField.nativeElement,"keyup").pipe(Object(c.a)(150),Object(d.a)(),Object(p.a)((function(){t.displayPagination&&(t.paginator.pageIndex=0),t.updateData()}))).subscribe(),this.updatePaginationSubscriptions(),this.viewInited=!0},e.prototype.updatePaginationSubscriptions=function(){var t=this;this.sortSubscription&&(this.sortSubscription.unsubscribe(),this.sortSubscription=null),this.updateDataSubscription&&(this.updateDataSubscription.unsubscribe(),this.updateDataSubscription=null),this.displayPagination&&(this.sortSubscription=this.sort.sortChange.subscribe((function(){return t.paginator.pageIndex=0}))),this.updateDataSubscription=(this.displayPagination?Object(g.a)(this.sort.sortChange,this.paginator.page):this.sort.sortChange).pipe(Object(p.a)((function(){return t.updateData()}))).subscribe()},e.prototype.addEnabled=function(){return this.entitiesTableConfig.addEnabled},e.prototype.clearSelection=function(){this.dataSource.selection.clear(),this.cd.detectChanges()},e.prototype.updateData=function(t){if(void 0===t&&(t=!0),t&&(this.isDetailsOpen=!1),this.displayPagination?(this.pageLink.page=this.paginator.pageIndex,this.pageLink.pageSize=this.paginator.pageSize):this.pageLink.page=0,this.sort.active?this.pageLink.sortOrder={property:this.sort.active,direction:f.a[this.sort.direction.toUpperCase()]}:this.pageLink.sortOrder=null,this.entitiesTableConfig.useTimePageLink){var e=this.pageLink;if(this.timewindow.history.historyType===S.d.LAST_INTERVAL){var n=Date.now();e.startTime=n-this.timewindow.history.timewindowMs,e.endTime=n}else if(this.timewindow.history.historyType===S.d.INTERVAL){var i=Object(S.r)(this.timewindow.history.quickInterval);e.startTime=i[0],e.endTime=i[1]}else e.startTime=this.timewindow.history.fixedTimewindow.startTimeMs,e.endTime=this.timewindow.history.fixedTimewindow.endTimeMs}this.dataSource.loadEntities(this.pageLink)},e.prototype.dataLoaded=function(t,e){isFinite(t)&&isFinite(e)?this.clearCellCache(t,e):(this.headerCellStyleCache.length=0,this.cellContentCache.length=0,this.cellTooltipCache.length=0,this.cellStyleCache.length=0)},e.prototype.onRowClick=function(t,e){this.entitiesTableConfig.handleRowClick(t,e)||this.toggleEntityDetails(t,e)},e.prototype.toggleEntityDetails=function(t,e){t&&t.stopPropagation(),this.dataSource.toggleCurrentEntity(e)?this.isDetailsOpen=!0:this.isDetailsOpen=!this.isDetailsOpen,this.detailsPanelOpened.emit(this.isDetailsOpen)},e.prototype.addEntity=function(t){var e=this;(this.entitiesTableConfig.addEntity?this.entitiesTableConfig.addEntity():this.dialog.open(C.a,{disableClose:!0,panelClass:["tb-dialog","tb-fullscreen-dialog"],data:{entitiesTableConfig:this.entitiesTableConfig}}).afterClosed()).subscribe((function(t){t&&(e.updateData(),e.entitiesTableConfig.entityAdded(t))}))},e.prototype.onEntityUpdated=function(t){this.updateData(!1),this.entitiesTableConfig.entityUpdated(t)},e.prototype.onEntityAction=function(t){"delete"===t.action&&this.deleteEntity(t.event,t.entity)},e.prototype.deleteEntity=function(t,e){var n=this;t&&t.stopPropagation(),this.dialogService.confirm(this.entitiesTableConfig.deleteEntityTitle(e),this.entitiesTableConfig.deleteEntityContent(e),this.translate.instant("action.no"),this.translate.instant("action.yes"),!0).subscribe((function(t){t&&n.entitiesTableConfig.deleteEntity(e.id).subscribe((function(){n.updateData(),n.entitiesTableConfig.entitiesDeleted([e.id])}))}))},e.prototype.deleteEntities=function(t,e){var n=this;t&&t.stopPropagation(),this.dialogService.confirm(this.entitiesTableConfig.deleteEntitiesTitle(e.length),this.entitiesTableConfig.deleteEntitiesContent(e.length),this.translate.instant("action.no"),this.translate.instant("action.yes"),!0).subscribe((function(t){if(t){var i=[];e.forEach((function(t){n.entitiesTableConfig.deleteEnabled(t)&&i.push(n.entitiesTableConfig.deleteEntity(t.id).pipe(Object(u.a)((function(){return t.id})),Object(m.a)((function(){return Object(y.a)(null)}))))})),Object(b.a)(i).subscribe((function(t){n.updateData(),n.entitiesTableConfig.entitiesDeleted(t.filter((function(t){return null!==t})))}))}}))},e.prototype.onTimewindowChange=function(){this.updateData()},e.prototype.enterFilterMode=function(){var t=this;this.textSearchMode=!0,this.pageLink.textSearch="",setTimeout((function(){t.searchInputField.nativeElement.focus(),t.searchInputField.nativeElement.setSelectionRange(0,0)}),10)},e.prototype.exitFilterMode=function(){this.textSearchMode=!1,this.pageLink.textSearch=null,this.displayPagination&&(this.paginator.pageIndex=0),this.updateData()},e.prototype.resetSortAndFilter=function(t,e){void 0===t&&(t=!0),void 0===e&&(e=!1),this.pageLink.textSearch=null,this.entitiesTableConfig.useTimePageLink&&!e&&(this.timewindow=this.entitiesTableConfig.defaultTimewindowInterval),this.displayPagination&&(this.paginator.pageIndex=0);var n=this.sort.sortables.get(this.entitiesTableConfig.defaultSortOrder.property);this.sort.active=n.id,this.sort.direction=this.entitiesTableConfig.defaultSortOrder.direction===f.a.ASC?"asc":"desc",t&&this.updateData()},e.prototype.columnsUpdated=function(t){var e=this;void 0===t&&(t=!1),this.entityColumns=this.entitiesTableConfig.columns.filter((function(t){return t instanceof v.c})).map((function(t){return t})),this.actionColumns=this.entitiesTableConfig.columns.filter((function(t){return t instanceof v.b})).map((function(t){return t})),this.displayedColumns=[],this.selectionEnabled&&this.displayedColumns.push("select"),this.entitiesTableConfig.columns.forEach((function(t){e.displayedColumns.push(t.key)})),this.displayedColumns.push("actions"),this.headerCellStyleCache.length=0,this.cellContentCache.length=0,this.cellTooltipCache.length=0,this.cellStyleCache.length=0,t&&this.dataSource.reset()},e.prototype.headerCellStyle=function(t){var e=this.entitiesTableConfig.columns.indexOf(t),n=this.headerCellStyleCache[e];if(!n){var a={width:t.width};"0px"!==t.width&&(a.minWidth=t.width,a.maxWidth=t.width),n=t instanceof v.c?Object(i.a)(Object(i.a)({},t.headerCellStyleFunction(t.key)),a):a,this.headerCellStyleCache[e]=n}return n},e.prototype.clearCellCache=function(t,e){var n=e*this.entitiesTableConfig.columns.length+t;this.cellContentCache[n]=void 0,this.cellTooltipCache[n]=void 0,this.cellStyleCache[n]=void 0},e.prototype.cellContent=function(t,e,n){if(e instanceof v.c){var i=this.entitiesTableConfig.columns.indexOf(e),a=n*this.entitiesTableConfig.columns.length+i,r=this.cellContentCache[a];return r||(r=this.domSanitizer.bypassSecurityTrustHtml(e.cellContentFunction(t,e.key)),this.cellContentCache[a]=r),r}return""},e.prototype.cellTooltip=function(t,e,n){if(e instanceof v.c){var i=this.entitiesTableConfig.columns.indexOf(e),a=n*this.entitiesTableConfig.columns.length+i,r=this.cellTooltipCache[a];if(!Object(w.z)(r))return null!==r?r:void 0;r=e.cellTooltipFunction(t,e.key),r=Object(w.n)(r)?r:null,this.cellTooltipCache[a]=r}},e.prototype.cellStyle=function(t,e,n){var a=this.entitiesTableConfig.columns.indexOf(e),r=n*this.entitiesTableConfig.columns.length+a,o=this.cellStyleCache[r];if(!o){var s={width:e.width};"0px"!==e.width&&(s.minWidth=e.width,s.maxWidth=e.width),o=e instanceof v.c?Object(i.a)(Object(i.a)({},e.cellStyleFunction(t,e.key)),s):s,this.cellStyleCache[r]=o}return o},e.prototype.trackByColumnKey=function(t,e){return e.key},e.prototype.trackByEntityId=function(t,e){return e.id.id},e.\u0275fac=function(t){return new(t||e)(a["\u0275\u0275directiveInject"](E.Store),a["\u0275\u0275directiveInject"](I.ActivatedRoute),a["\u0275\u0275directiveInject"](O.TranslateService),a["\u0275\u0275directiveInject"](T.MatDialog),a["\u0275\u0275directiveInject"](x.a),a["\u0275\u0275directiveInject"](M.DomSanitizer),a["\u0275\u0275directiveInject"](a.ChangeDetectorRef),a["\u0275\u0275directiveInject"](a.ComponentFactoryResolver))},e.\u0275cmp=a["\u0275\u0275defineComponent"]({type:e,selectors:[["tb-entities-table"]],viewQuery:function(t,e){var n;(1&t&&(a["\u0275\u0275staticViewQuery"](F,!0),a["\u0275\u0275viewQuery"](P,!0),a["\u0275\u0275viewQuery"](s.MatPaginator,!0),a["\u0275\u0275viewQuery"](l.MatSort,!0)),2&t)&&(a["\u0275\u0275queryRefresh"](n=a["\u0275\u0275loadQuery"]())&&(e.entityTableHeaderAnchor=n.first),a["\u0275\u0275queryRefresh"](n=a["\u0275\u0275loadQuery"]())&&(e.searchInputField=n.first),a["\u0275\u0275queryRefresh"](n=a["\u0275\u0275loadQuery"]())&&(e.paginator=n.first),a["\u0275\u0275queryRefresh"](n=a["\u0275\u0275loadQuery"]())&&(e.sort=n.first))},inputs:{entitiesTableConfig:"entitiesTableConfig"},features:[a["\u0275\u0275InheritDefinitionFeature"],a["\u0275\u0275NgOnChangesFeature"]],decls:63,vars:52,consts:[["hasBackdrop","false",1,"tb-absolute-fill"],["class","tb-details-drawer mat-elevation-z4","mode","over","position","end",3,"opened",4,"ngIf"],[1,"mat-padding","tb-entity-table","tb-absolute-fill"],["fxLayout","column",1,"mat-elevation-z1","tb-entity-table-content"],[1,"mat-table-toolbar",3,"fxShow"],[1,"mat-toolbar-tools"],["fxLayout","row","fxLayoutAlign","start center","fxLayout.xs","column","fxLayoutAlign.xs","center start",1,"title-container"],["class","tb-entity-table-title",4,"ngIf"],["entityTableHeader",""],["asButton","","historyOnly","",3,"ngModel","ngModelChange",4,"ngIf"],["fxFlex",""],[3,"fxShow"],["mat-icon-button","","matTooltipPosition","above",3,"disabled","matTooltip","click",4,"ngIf","ngIfElse"],["addActions",""],["mat-icon-button","","matTooltipPosition","above",3,"disabled","fxShow","matTooltip","click",4,"ngFor","ngForOf"],["mat-icon-button","","matTooltipPosition","above",3,"disabled","matTooltip","click"],["mat-icon-button","","matTooltipPosition","above",3,"disabled","matTooltip","click",4,"ngIf"],["mat-icon-button","","matTooltipPosition","above",3,"matTooltip"],["matInput","",3,"ngModel","placeholder","ngModelChange"],["searchInput",""],["mat-icon-button","","matTooltipPosition","above",3,"matTooltip","click"],["class","mat-table-toolbar","color","primary",3,"fxShow",4,"ngIf"],["fxFlex","",1,"table-container"],["mat-table","","matSort","","matSortDisableClear","",3,"dataSource","trackBy","matSortActive","matSortDirection"],["matColumnDef","select","sticky",""],["style","width: 30px;",4,"matHeaderCellDef"],[4,"matCellDef"],[3,"matColumnDef",4,"ngFor","ngForOf","ngForTrackBy"],["matColumnDef","actions","stickyEnd",""],[3,"ngStyle.gt-md",4,"matHeaderCellDef"],[3,"ngStyle.gt-md",4,"matCellDef"],[3,"ngClass",4,"matHeaderRowDef","matHeaderRowDefSticky"],[3,"fxShow","ngClass","click",4,"matRowDef","matRowDefColumns"],["fxLayoutAlign","center center",1,"no-data-found",3,"fxShow"],[4,"ngIf"],["showFirstLastButtons","",3,"length","pageIndex","pageSize","pageSizeOptions",4,"ngIf"],["mode","over","position","end",1,"tb-details-drawer","mat-elevation-z4",3,"opened"],["drawer",""],[3,"entitiesTableConfig","entityId","closeEntityDetails","entityUpdated","entityAction"],[1,"tb-entity-table-title"],["asButton","","historyOnly","",3,"ngModel","ngModelChange"],["mat-icon-button","","matTooltipPosition","above",3,"disabled","fxShow","matTooltip","click",4,"ngIf","ngIfElse"],["addActionsMenu",""],["mat-icon-button","","matTooltipPosition","above",3,"disabled","fxShow","matTooltip","click"],["mat-icon-button","","matTooltipPosition","above",3,"disabled","matTooltip","matMenuTriggerFor"],["xPosition","before"],["addActionsMenu","matMenu"],["mat-menu-item","",3,"disabled","fxShow","click",4,"ngFor","ngForOf"],["mat-menu-item","",3,"disabled","fxShow","click"],["color","primary",1,"mat-table-toolbar",3,"fxShow"],[1,"tb-entity-table-info"],[2,"width","30px"],[3,"checked","indeterminate","change"],[3,"fxShow","checked","click","change"],[3,"matColumnDef"],["mat-sort-header","",3,"ngClass","fxHide.lt-lg","ngStyle","disabled",4,"matHeaderCellDef"],["matTooltipPosition","above",3,"ngClass","fxHide.lt-lg","matTooltip","innerHTML","ngStyle",4,"matCellDef"],["mat-sort-header","",3,"ngClass","fxHide.lt-lg","ngStyle","disabled"],["matTooltipPosition","above",3,"ngClass","fxHide.lt-lg","matTooltip","innerHTML","ngStyle"],["mat-sort-header","",3,"ngStyle","disabled",4,"matHeaderCellDef"],[3,"ngStyle",4,"matCellDef"],["mat-sort-header","",3,"ngStyle","disabled"],[3,"ngStyle"],[3,"svgIcon","ngStyle"],[3,"ngStyle.gt-md"],["fxHide","","fxShow.gt-md","","fxFlex","","fxLayout","row","fxLayoutAlign","end"],["mat-icon-button","","matTooltipPosition","above",3,"disabled","matTooltip","click",4,"ngFor","ngForOf"],["fxHide","","fxShow.lt-lg","",4,"ngIf"],["fxHide","","fxShow.lt-lg",""],["mat-icon-button","",3,"matMenuTriggerFor","click"],[1,"material-icons"],["cellActionsMenu","matMenu"],[3,"ngClass"],[3,"fxShow","ngClass","click"],["showFirstLastButtons","",3,"length","pageIndex","pageSize","pageSizeOptions"]],template:function(t,e){if(1&t&&(a["\u0275\u0275elementStart"](0,"mat-drawer-container",0),a["\u0275\u0275template"](1,D,3,3,"mat-drawer",1),a["\u0275\u0275elementStart"](2,"mat-drawer-content"),a["\u0275\u0275elementStart"](3,"div",2),a["\u0275\u0275elementStart"](4,"div",3),a["\u0275\u0275elementStart"](5,"mat-toolbar",4),a["\u0275\u0275elementStart"](6,"div",5),a["\u0275\u0275elementStart"](7,"div",6),a["\u0275\u0275template"](8,k,2,1,"span",7),a["\u0275\u0275element"](9,"tb-anchor",null,8),a["\u0275\u0275template"](11,j,1,1,"tb-timewindow",9),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](12,"span",10),a["\u0275\u0275elementStart"](13,"div",11),a["\u0275\u0275template"](14,A,5,6,"button",12),a["\u0275\u0275template"](15,R,3,2,"ng-template",null,13,a["\u0275\u0275templateRefExtractor"]),a["\u0275\u0275elementEnd"](),a["\u0275\u0275template"](17,N,4,6,"button",14),a["\u0275\u0275elementStart"](18,"button",15),a["\u0275\u0275listener"]("click",(function(){return e.updateData()})),a["\u0275\u0275pipe"](19,"async"),a["\u0275\u0275pipe"](20,"translate"),a["\u0275\u0275elementStart"](21,"mat-icon"),a["\u0275\u0275text"](22,"refresh"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275template"](23,G,5,6,"button",16),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](24,"mat-toolbar",4),a["\u0275\u0275elementStart"](25,"div",5),a["\u0275\u0275elementStart"](26,"button",17),a["\u0275\u0275pipe"](27,"translate"),a["\u0275\u0275elementStart"](28,"mat-icon"),a["\u0275\u0275text"](29,"search"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](30,"mat-form-field",10),a["\u0275\u0275elementStart"](31,"mat-label"),a["\u0275\u0275text"](32,"\xa0"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](33,"input",18,19),a["\u0275\u0275listener"]("ngModelChange",(function(t){return e.pageLink.textSearch=t})),a["\u0275\u0275pipe"](35,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](36,"button",20),a["\u0275\u0275listener"]("click",(function(){return e.exitFilterMode()})),a["\u0275\u0275pipe"](37,"translate"),a["\u0275\u0275elementStart"](38,"mat-icon"),a["\u0275\u0275text"](39,"close"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275template"](40,q,7,8,"mat-toolbar",21),a["\u0275\u0275elementStart"](41,"div",22),a["\u0275\u0275elementStart"](42,"table",23),a["\u0275\u0275elementContainerStart"](43,24),a["\u0275\u0275template"](44,W,4,6,"mat-header-cell",25),a["\u0275\u0275template"](45,z,2,2,"mat-cell",26),a["\u0275\u0275elementContainerEnd"](),a["\u0275\u0275template"](46,Q,3,1,"ng-container",27),a["\u0275\u0275template"](47,J,3,1,"ng-container",27),a["\u0275\u0275elementContainerStart"](48,28),a["\u0275\u0275template"](49,tt,3,8,"mat-header-cell",29),a["\u0275\u0275template"](50,at,4,7,"mat-cell",30),a["\u0275\u0275elementContainerEnd"](),a["\u0275\u0275template"](51,ot,1,3,"mat-header-row",31),a["\u0275\u0275template"](52,lt,1,6,"mat-row",32),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](53,"span",33),a["\u0275\u0275pipe"](54,"async"),a["\u0275\u0275pipe"](55,"async"),a["\u0275\u0275text"](56),a["\u0275\u0275pipe"](57,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](58,"span",33),a["\u0275\u0275text"](59),a["\u0275\u0275pipe"](60,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275template"](61,ct,1,0,"mat-divider",34),a["\u0275\u0275template"](62,dt,2,6,"mat-paginator",35),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()),2&t){var n=a["\u0275\u0275reference"](16);a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",e.entitiesTableConfig.detailsPanelEnabled),a["\u0275\u0275advance"](4),a["\u0275\u0275property"]("fxShow",!e.textSearchMode&&e.dataSource.selection.isEmpty()),a["\u0275\u0275advance"](3),a["\u0275\u0275property"]("ngIf",e.entitiesTableConfig.tableTitle),a["\u0275\u0275advance"](3),a["\u0275\u0275property"]("ngIf",e.entitiesTableConfig.useTimePageLink),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("fxShow",e.addEnabled()),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",!e.entitiesTableConfig.addActionDescriptors.length)("ngIfElse",n),a["\u0275\u0275advance"](3),a["\u0275\u0275property"]("ngForOf",e.headerActionDescriptors),a["\u0275\u0275advance"](1),a["\u0275\u0275propertyInterpolate"]("matTooltip",a["\u0275\u0275pipeBind1"](20,36,"action.refresh")),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](19,34,e.isLoading$)),a["\u0275\u0275advance"](5),a["\u0275\u0275property"]("ngIf",e.entitiesTableConfig.searchEnabled),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("fxShow",e.textSearchMode&&e.dataSource.selection.isEmpty()),a["\u0275\u0275advance"](2),a["\u0275\u0275propertyInterpolate"]("matTooltip",a["\u0275\u0275pipeBind1"](27,38,e.translations.search)),a["\u0275\u0275advance"](7),a["\u0275\u0275propertyInterpolate"]("placeholder",a["\u0275\u0275pipeBind1"](35,40,e.translations.search)),a["\u0275\u0275property"]("ngModel",e.pageLink.textSearch),a["\u0275\u0275advance"](3),a["\u0275\u0275propertyInterpolate"]("matTooltip",a["\u0275\u0275pipeBind1"](37,42,"action.close")),a["\u0275\u0275advance"](4),a["\u0275\u0275property"]("ngIf",e.entitiesTableConfig.selectionEnabled),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("dataSource",e.dataSource)("trackBy",e.trackByEntityId)("matSortActive",null==e.pageLink.sortOrder?null:e.pageLink.sortOrder.property)("matSortDirection",e.pageLink.sortDirection()),a["\u0275\u0275advance"](4),a["\u0275\u0275property"]("ngForOf",e.entityColumns)("ngForTrackBy",e.trackByColumnKey),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngForOf",e.actionColumns)("ngForTrackBy",e.trackByColumnKey),a["\u0275\u0275advance"](4),a["\u0275\u0275property"]("matHeaderRowDef",e.displayedColumns)("matHeaderRowDefSticky",!0),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("matRowDefColumns",e.displayedColumns),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("fxShow",!a["\u0275\u0275pipeBind1"](54,44,e.isLoading$)&&a["\u0275\u0275pipeBind1"](55,46,e.dataSource.isEmpty())&&!e.dataSource.dataLoading),a["\u0275\u0275advance"](3),a["\u0275\u0275textInterpolate"](a["\u0275\u0275pipeBind1"](57,48,e.translations.noEntities)),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("fxShow",e.dataSource.dataLoading),a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate"](a["\u0275\u0275pipeBind1"](60,50,"common.loading")),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("ngIf",e.displayPagination),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",e.displayPagination)}},styles:["[_nghost-%COMP%]{width:100%;height:100%}[_nghost-%COMP%]   .tb-entity-table[_ngcontent-%COMP%]   .tb-entity-table-content[_ngcontent-%COMP%]{width:100%;height:100%;background:#fff}[_nghost-%COMP%]   .tb-entity-table[_ngcontent-%COMP%]   .tb-entity-table-content[_ngcontent-%COMP%]   .mat-toolbar-tools[_ngcontent-%COMP%]{min-height:auto}[_nghost-%COMP%]   .tb-entity-table[_ngcontent-%COMP%]   .tb-entity-table-content[_ngcontent-%COMP%]   .title-container[_ngcontent-%COMP%]{overflow:hidden}[_nghost-%COMP%]   .tb-entity-table[_ngcontent-%COMP%]   .tb-entity-table-content[_ngcontent-%COMP%]   .tb-entity-table-title[_ngcontent-%COMP%]{padding-right:20px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}[_nghost-%COMP%]   .tb-entity-table[_ngcontent-%COMP%]   .tb-entity-table-content[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]{overflow:auto}[_nghost-%COMP%]   .tb-entity-table[_ngcontent-%COMP%]   .tb-entity-table-content[_ngcontent-%COMP%]   .tb-entity-table-info[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}@media screen and (max-width:599px){[_nghost-%COMP%]   .mat-toolbar[_ngcontent-%COMP%]{height:auto;min-height:100px}[_nghost-%COMP%]   .mat-toolbar[_ngcontent-%COMP%]   .tb-entity-table-title[_ngcontent-%COMP%]{padding-bottom:5px;width:100%}}[_nghost-%COMP%]     .mat-sort-header-sorted .mat-sort-header-arrow{opacity:1!important}"],changeDetection:0}),e}(r.a);!function(){a["\u0275setClassMetadata"](pt,[{type:a.Component,args:[{selector:"tb-entities-table",templateUrl:"./entities-table.component.html",styleUrls:["./entities-table.component.scss"],changeDetection:a.ChangeDetectionStrategy.OnPush}]}],(function(){return[{type:E.Store},{type:I.ActivatedRoute},{type:O.TranslateService},{type:T.MatDialog},{type:x.a},{type:M.DomSanitizer},{type:a.ChangeDetectorRef},{type:a.ComponentFactoryResolver}]}),{entitiesTableConfig:[{type:a.Input}],entityTableHeaderAnchor:[{type:a.ViewChild,args:["entityTableHeader",{static:!0}]}],searchInputField:[{type:a.ViewChild,args:["searchInput"]}],paginator:[{type:a.ViewChild,args:[s.MatPaginator]}],sort:[{type:a.ViewChild,args:[l.MatSort]}]})}()},"V4k/":function(t,e,n){"use strict";n.d(e,"a",(function(){return M}));var i=n("mrSG"),a=n("fXoL"),r=n("3Pt+"),o=n("JIJk"),s=n("//Q6"),l=n("aX2P"),c=n("XiUz"),d=n("kmnG"),p=n("d3UM"),u=n("ofXK"),m=n("FKr1"),f=n("pd1A"),h=n("sYmb"),g=n("0Miz"),y=n("xoCY"),b=n("qFsG"),v=n("bSwM");function x(t,e){if(1&t&&(a["\u0275\u0275elementStart"](0,"mat-option",5),a["\u0275\u0275text"](1),a["\u0275\u0275pipe"](2,"translate"),a["\u0275\u0275elementEnd"]()),2&t){var n=e.$implicit,i=a["\u0275\u0275nextContext"]();a["\u0275\u0275property"]("value",n),a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](2,2,i.alarmScheduleTypeTranslate.get(n))," ")}}function C(t,e){1&t&&(a["\u0275\u0275elementStart"](0,"mat-error"),a["\u0275\u0275text"](1),a["\u0275\u0275pipe"](2,"translate"),a["\u0275\u0275elementEnd"]()),2&t&&(a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](2,1,"device-profile.schedule-type-required")," "))}function S(t,e){if(1&t&&(a["\u0275\u0275elementStart"](0,"mat-checkbox",24),a["\u0275\u0275text"](1),a["\u0275\u0275pipe"](2,"translate"),a["\u0275\u0275elementEnd"]()),2&t){var n=e.$implicit,i=a["\u0275\u0275nextContext"](3);a["\u0275\u0275property"]("formControl",i.weeklyRepeatControl(n)),a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](2,2,i.dayOfWeekTranslationsArray[n])," ")}}function w(t,e){if(1&t&&(a["\u0275\u0275elementStart"](0,"mat-checkbox",24),a["\u0275\u0275text"](1),a["\u0275\u0275pipe"](2,"translate"),a["\u0275\u0275elementEnd"]()),2&t){var n=e.$implicit,i=a["\u0275\u0275nextContext"](3);a["\u0275\u0275property"]("formControl",i.weeklyRepeatControl(n)),a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](2,2,i.dayOfWeekTranslationsArray[n])," ")}}function E(t,e){if(1&t&&(a["\u0275\u0275elementStart"](0,"section"),a["\u0275\u0275elementStart"](1,"div",7),a["\u0275\u0275text"](2,"device-profile.schedule-days"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](3,"div",8),a["\u0275\u0275elementStart"](4,"div",9),a["\u0275\u0275template"](5,S,3,4,"mat-checkbox",10),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](6,"div",9),a["\u0275\u0275template"](7,w,3,4,"mat-checkbox",10),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](8,"tb-error",11),a["\u0275\u0275pipe"](9,"translate"),a["\u0275\u0275elementStart"](10,"div",7),a["\u0275\u0275text"](11,"device-profile.schedule-time"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](12,"div",12),a["\u0275\u0275elementStart"](13,"div",13),a["\u0275\u0275elementStart"](14,"mat-form-field",14),a["\u0275\u0275elementStart"](15,"mat-label",15),a["\u0275\u0275text"](16,"device-profile.schedule-time-from"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](17,"mat-datetimepicker-toggle",16),a["\u0275\u0275element"](18,"mat-datetimepicker",17,18),a["\u0275\u0275element"](20,"input",19),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](21,"mat-form-field",14),a["\u0275\u0275elementStart"](22,"mat-label",15),a["\u0275\u0275text"](23,"device-profile.schedule-time-to"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](24,"mat-datetimepicker-toggle",16),a["\u0275\u0275element"](25,"mat-datetimepicker",17,20),a["\u0275\u0275element"](27,"input",21),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](28,"div",22),a["\u0275\u0275element"](29,"div",23),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()),2&t){var n=a["\u0275\u0275reference"](19),i=a["\u0275\u0275reference"](26),r=a["\u0275\u0275nextContext"](2);a["\u0275\u0275advance"](5),a["\u0275\u0275property"]("ngForOf",r.firstRowDays),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("ngForOf",r.secondRowDays),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("error",r.alarmScheduleForm.get("daysOfWeek").hasError("dayOfWeeks")?a["\u0275\u0275pipeBind1"](9,8,"device-profile.schedule-days-of-week-required"):""),a["\u0275\u0275advance"](9),a["\u0275\u0275property"]("for",n),a["\u0275\u0275advance"](3),a["\u0275\u0275property"]("matDatetimepicker",n),a["\u0275\u0275advance"](4),a["\u0275\u0275property"]("for",i),a["\u0275\u0275advance"](3),a["\u0275\u0275property"]("matDatetimepicker",i),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("innerHTML",r.getSchedulerRangeText(r.alarmScheduleForm),a["\u0275\u0275sanitizeHtml"])}}function I(t,e){if(1&t){var n=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementStart"](0,"div",26),a["\u0275\u0275elementStart"](1,"div",27),a["\u0275\u0275elementStart"](2,"mat-checkbox",28),a["\u0275\u0275listener"]("change",(function(t){a["\u0275\u0275restoreView"](n);var i=e.$implicit;return a["\u0275\u0275nextContext"](3).changeCustomScheduler(t,i)})),a["\u0275\u0275text"](3),a["\u0275\u0275pipe"](4,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](5,"div",29),a["\u0275\u0275elementStart"](6,"mat-form-field",30),a["\u0275\u0275elementStart"](7,"mat-label",15),a["\u0275\u0275text"](8,"device-profile.schedule-time-from"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](9,"mat-datetimepicker-toggle",16),a["\u0275\u0275element"](10,"mat-datetimepicker",17,18),a["\u0275\u0275element"](12,"input",19),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](13,"mat-form-field",30),a["\u0275\u0275elementStart"](14,"mat-label",15),a["\u0275\u0275text"](15,"device-profile.schedule-time-to"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](16,"mat-datetimepicker-toggle",16),a["\u0275\u0275element"](17,"mat-datetimepicker",17,20),a["\u0275\u0275element"](19,"input",21),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](20,"div",31),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()}if(2&t){var i=e.$implicit,r=a["\u0275\u0275reference"](11),o=a["\u0275\u0275reference"](18),s=a["\u0275\u0275nextContext"](3);a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("formGroupName",""+i),a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](4,7,s.dayOfWeekTranslationsArray[i])," "),a["\u0275\u0275advance"](6),a["\u0275\u0275property"]("for",r),a["\u0275\u0275advance"](3),a["\u0275\u0275property"]("matDatetimepicker",r),a["\u0275\u0275advance"](4),a["\u0275\u0275property"]("for",o),a["\u0275\u0275advance"](3),a["\u0275\u0275property"]("matDatetimepicker",o),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("innerHTML",s.getSchedulerRangeText(s.itemsSchedulerForm.at(i)),a["\u0275\u0275sanitizeHtml"])}}function O(t,e){if(1&t&&(a["\u0275\u0275elementStart"](0,"section"),a["\u0275\u0275elementStart"](1,"div",7),a["\u0275\u0275text"](2,"device-profile.schedule-days"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275template"](3,I,21,9,"div",25),a["\u0275\u0275element"](4,"tb-error",11),a["\u0275\u0275pipe"](5,"translate"),a["\u0275\u0275elementEnd"]()),2&t){var n=a["\u0275\u0275nextContext"](2);a["\u0275\u0275advance"](3),a["\u0275\u0275property"]("ngForOf",n.allDays),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("error",n.alarmScheduleForm.get("items").hasError("dayOfWeeks")?a["\u0275\u0275pipeBind1"](5,2,"device-profile.schedule-days-of-week-required"):"")}}function T(t,e){if(1&t&&(a["\u0275\u0275elementStart"](0,"div"),a["\u0275\u0275element"](1,"tb-timezone-select",6),a["\u0275\u0275template"](2,E,30,10,"section",4),a["\u0275\u0275template"](3,O,6,4,"section",4),a["\u0275\u0275elementEnd"]()),2&t){var n=a["\u0275\u0275nextContext"]();a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("ngIf",n.alarmScheduleForm.get("type").value===n.alarmScheduleType.SPECIFIC_TIME),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",n.alarmScheduleForm.get("type").value===n.alarmScheduleType.CUSTOM)}}var M=function(){function t(t){this.fb=t,this.alarmScheduleTypes=Object.keys(o.c),this.alarmScheduleType=o.c,this.alarmScheduleTypeTranslate=o.d,this.dayOfWeekTranslationsArray=o.s,this.allDays=Array(7).fill(0).map((function(t,e){return e})),this.firstRowDays=Array(4).fill(0).map((function(t,e){return e})),this.secondRowDays=Array(3).fill(0).map((function(t,e){return e+4})),this.defaultItems=Array.from({length:7},(function(t,e){return{enabled:!0,dayOfWeek:e+1}})),this.propagateChange=function(t){}}return t.prototype.ngOnInit=function(){var t=this;this.alarmScheduleForm=this.fb.group({type:[o.c.ANY_TIME,r.Validators.required],timezone:[null,r.Validators.required],daysOfWeek:this.fb.array(new Array(7).fill(!1),this.validateDayOfWeeks),startsOn:[0,r.Validators.required],endsOn:[0,r.Validators.required],items:this.fb.array(Array.from({length:7},(function(e,n){return t.defaultItemsScheduler(n)})),this.validateItems)}),this.alarmScheduleForm.get("type").valueChanges.subscribe((function(e){var n=Object(l.B)();t.alarmScheduleForm.reset({type:e,items:t.defaultItems,timezone:n},{emitEvent:!1}),t.updateValidators(e,!0),t.alarmScheduleForm.updateValueAndValidity()})),this.alarmScheduleForm.valueChanges.subscribe((function(){t.updateModel()}))},t.prototype.validateDayOfWeeks=function(t){var e=t.value;return e&&e.length&&e.find((function(t){return!0===t}))?null:{dayOfWeeks:!0}},t.prototype.validateItems=function(t){var e=t.value;return e&&e.length&&e.find((function(t){return!0===t.enabled}))?null:{dayOfWeeks:!0}},t.prototype.registerOnChange=function(t){this.propagateChange=t},t.prototype.registerOnTouched=function(t){},t.prototype.setDisabledState=function(t){this.disabled=t,this.disabled?this.alarmScheduleForm.disable({emitEvent:!1}):this.alarmScheduleForm.enable({emitEvent:!1})},t.prototype.writeValue=function(t){var e=this;switch(this.modelValue=t,Object(s.o)(this.modelValue)||(this.modelValue={type:o.c.ANY_TIME}),this.modelValue.type){case o.c.SPECIFIC_TIME:var n=new Array(7).fill(!1);Object(s.n)(this.modelValue.daysOfWeek)&&(n=n.map((function(t,n){return e.modelValue.daysOfWeek.indexOf(n+1)>-1}))),this.alarmScheduleForm.patchValue({type:this.modelValue.type,timezone:this.modelValue.timezone,daysOfWeek:n,startsOn:Object(o.G)(this.modelValue.startsOn),endsOn:Object(o.G)(this.modelValue.endsOn)},{emitEvent:!1});break;case o.c.CUSTOM:if(this.modelValue.items){var i=[];this.modelValue.items.sort((function(t,e){return t.dayOfWeek-e.dayOfWeek})).forEach((function(t,n){e.disabledSelectedTime(t.enabled,n),i.push({enabled:t.enabled,startsOn:Object(o.G)(t.startsOn),endsOn:Object(o.G)(t.endsOn)})})),this.alarmScheduleForm.patchValue({type:this.modelValue.type,timezone:this.modelValue.timezone,items:i},{emitEvent:!1})}break;default:this.alarmScheduleForm.patchValue(this.modelValue||void 0,{emitEvent:!1})}this.updateValidators(this.modelValue.type)},t.prototype.validate=function(t){return this.alarmScheduleForm.valid?null:{alarmScheduler:{valid:!1}}},t.prototype.weeklyRepeatControl=function(t){return this.alarmScheduleForm.get("daysOfWeek").at(t)},t.prototype.updateValidators=function(t,e){switch(void 0===e&&(e=!1),t){case o.c.ANY_TIME:this.alarmScheduleForm.get("timezone").disable({emitEvent:!1}),this.alarmScheduleForm.get("daysOfWeek").disable({emitEvent:!1}),this.alarmScheduleForm.get("startsOn").disable({emitEvent:!1}),this.alarmScheduleForm.get("endsOn").disable({emitEvent:!1}),this.alarmScheduleForm.get("items").disable({emitEvent:!1});break;case o.c.SPECIFIC_TIME:this.alarmScheduleForm.get("timezone").enable({emitEvent:!1}),this.alarmScheduleForm.get("daysOfWeek").enable({emitEvent:!1}),this.alarmScheduleForm.get("startsOn").enable({emitEvent:!1}),this.alarmScheduleForm.get("endsOn").enable({emitEvent:!1}),this.alarmScheduleForm.get("items").disable({emitEvent:!1});break;case o.c.CUSTOM:this.alarmScheduleForm.get("timezone").enable({emitEvent:!1}),this.alarmScheduleForm.get("daysOfWeek").disable({emitEvent:!1}),this.alarmScheduleForm.get("startsOn").disable({emitEvent:!1}),this.alarmScheduleForm.get("endsOn").disable({emitEvent:!1}),e&&this.alarmScheduleForm.get("items").enable({emitEvent:!1})}},t.prototype.updateModel=function(){var t=this.alarmScheduleForm.value;this.modelValue&&(Object(s.n)(t.daysOfWeek)&&(t.daysOfWeek=t.daysOfWeek.map((function(t,e){return t?e+1:null})).filter((function(t){return!!t}))),Object(s.n)(t.startsOn)&&0!==t.startsOn&&(t.startsOn=Object(o.E)(t.startsOn)),Object(s.n)(t.endsOn)&&0!==t.endsOn&&(t.endsOn=Object(o.E)(t.endsOn)),Object(s.n)(t.items)&&(t.items=this.alarmScheduleForm.getRawValue().items,t.items=t.items.map((function(t){return Object(i.a)(Object(i.a)({},t),{startsOn:Object(o.E)(t.startsOn),endsOn:Object(o.E)(t.endsOn)})}))),this.modelValue=t,this.propagateChange(this.modelValue))},t.prototype.defaultItemsScheduler=function(t){return this.fb.group({enabled:[!0],dayOfWeek:[t+1],startsOn:[0,r.Validators.required],endsOn:[0,r.Validators.required]})},t.prototype.changeCustomScheduler=function(t,e){var n=t.checked;this.disabledSelectedTime(n,e,!0)},t.prototype.disabledSelectedTime=function(t,e,n){void 0===n&&(n=!1),t?(this.itemsSchedulerForm.at(e).get("startsOn").enable({emitEvent:!1}),this.itemsSchedulerForm.at(e).get("endsOn").enable({emitEvent:n})):(this.itemsSchedulerForm.at(e).get("startsOn").disable({emitEvent:!1}),this.itemsSchedulerForm.at(e).get("endsOn").disable({emitEvent:n}))},t.prototype.getSchedulerRangeText=function(t){return Object(o.C)(t.get("startsOn").value,t.get("endsOn").value)},Object.defineProperty(t.prototype,"itemsSchedulerForm",{get:function(){return this.alarmScheduleForm.get("items")},enumerable:!1,configurable:!0}),t.\u0275fac=function(e){return new(e||t)(a["\u0275\u0275directiveInject"](r.FormBuilder))},t.\u0275cmp=a["\u0275\u0275defineComponent"]({type:t,selectors:[["tb-alarm-schedule"]],inputs:{disabled:"disabled"},features:[a["\u0275\u0275ProvidersFeature"]([{provide:r.NG_VALUE_ACCESSOR,useExisting:Object(a.forwardRef)((function(){return t})),multi:!0},{provide:r.NG_VALIDATORS,useExisting:Object(a.forwardRef)((function(){return t})),multi:!0}])],decls:8,vars:7,consts:[["fxLayout","column",3,"formGroup"],["hideRequiredMarker","","floatLabel","always",1,"mat-block"],["formControlName","type","required","",3,"placeholder"],[3,"value",4,"ngFor","ngForOf"],[4,"ngIf"],[3,"value"],["userTimezoneByDefault","","required","","formControlName","timezone"],["translate","",1,"tb-small",2,"margin-bottom","0.5em"],["fxLayout","column","fxLayout.gt-md","row","fxLayoutGap","16px"],["fxLayout","row","fxLayoutGap","16px"],[3,"formControl",4,"ngFor","ngForOf"],[2,"display","block",3,"error"],["fxLayout","row","fxLayout.xs","column","fxLayoutGap.gt-xs","8px"],["fxLayout","row","fxLayoutGap","8px","fxFlex.gt-md",""],["fxFlex.xs","","fxFlex.sm","150px","fxFlex.md","150px","fxFlex.gt-md",""],["translate",""],["matPrefix","",3,"for"],["type","time","openOnFocus","true"],["startTimePicker",""],["required","","matInput","","formControlName","startsOn",3,"matDatetimepicker"],["endTimePicker",""],["required","","matInput","","formControlName","endsOn",3,"matDatetimepicker"],["fxFlex","","fxLayoutAlign","center center",2,"margin","auto"],[2,"text-align","center",3,"innerHTML"],[3,"formControl"],["fxLayout","column","formArrayName","items","fxLayoutGap","1em",4,"ngFor","ngForOf"],["fxLayout","column","formArrayName","items","fxLayoutGap","1em"],["fxLayout.xs","column","fxLayout","row","fxLayoutGap","8px","fxLayoutAlign","start center","fxLayoutAlign.xs","center start",3,"formGroupName"],["formControlName","enabled","fxFlex","17",3,"change"],["fxLayout","row","fxLayoutGap","8px","fxFlex",""],["fxFlex.xs","","fxFlex.sm","100px","fxFlex.md","100px"],["fxFlex","","fxLayoutAlign","center center",2,"text-align","center",3,"innerHTML"]],template:function(t,e){1&t&&(a["\u0275\u0275elementStart"](0,"section",0),a["\u0275\u0275elementStart"](1,"mat-form-field",1),a["\u0275\u0275element"](2,"mat-label"),a["\u0275\u0275elementStart"](3,"mat-select",2),a["\u0275\u0275pipe"](4,"translate"),a["\u0275\u0275template"](5,x,3,4,"mat-option",3),a["\u0275\u0275elementEnd"](),a["\u0275\u0275template"](6,C,3,3,"mat-error",4),a["\u0275\u0275elementEnd"](),a["\u0275\u0275template"](7,T,4,2,"div",4),a["\u0275\u0275elementEnd"]()),2&t&&(a["\u0275\u0275property"]("formGroup",e.alarmScheduleForm),a["\u0275\u0275advance"](3),a["\u0275\u0275propertyInterpolate"]("placeholder",a["\u0275\u0275pipeBind1"](4,5,"device-profile.schedule-type")),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("ngForOf",e.alarmScheduleTypes),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",e.alarmScheduleForm.get("type").hasError("required")),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",e.alarmScheduleForm.get("type").value!==e.alarmScheduleType.ANY_TIME))},directives:[c.f,r.NgControlStatusGroup,r.FormGroupDirective,d.MatFormField,d.MatLabel,p.MatSelect,r.NgControlStatus,r.FormControlName,r.RequiredValidator,u.NgForOf,u.NgIf,m.MatOption,d.MatError,f.a,h.TranslateDirective,c.g,g.a,c.b,y.i,d.MatPrefix,y.a,b.MatInput,r.DefaultValueAccessor,y.f,c.e,v.MatCheckbox,r.FormControlDirective,r.FormArrayName,r.FormGroupName],pipes:[h.TranslatePipe],styles:[".nowrap{white-space:nowrap}"]}),t}();!function(){a["\u0275setClassMetadata"](M,[{type:a.Component,args:[{selector:"tb-alarm-schedule",templateUrl:"./alarm-schedule.component.html",styleUrls:["./alarm-schedule.component.scss"],providers:[{provide:r.NG_VALUE_ACCESSOR,useExisting:Object(a.forwardRef)((function(){return M})),multi:!0},{provide:r.NG_VALIDATORS,useExisting:Object(a.forwardRef)((function(){return M})),multi:!0}]}]}],(function(){return[{type:r.FormBuilder}]}),{disabled:[{type:a.Input}]})}()},Vbuf:function(t,e,n){"use strict";n.d(e,"a",(function(){return N}));var i=n("fXoL"),a=n("3Pt+"),r=n("mbhL"),o=n("4r/P"),s=n("vkgz"),l=n("lJxs"),c=n("5+tZ"),d=n("w1tV"),p=n("8LU1"),u=n("XW0v"),m=n("vnPf"),f=n("WeLn"),h=n("T4sd"),g=n("FtGj"),y=n("Nw2X"),b=n("l7P3"),v=n("sYmb"),x=n("0IaG"),C=n("kmnG"),S=n("qFsG"),w=n("/1cH"),E=n("ofXK"),I=n("bTqV"),O=n("NFeN"),T=n("Qu3c"),M=n("FKr1"),F=n("d5eY"),P=["tenantProfileInput"];function D(t,e){if(1&t){var n=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"button",10),i["\u0275\u0275listener"]("click",(function(){return i["\u0275\u0275restoreView"](n),i["\u0275\u0275nextContext"]().clear()})),i["\u0275\u0275elementStart"](1,"mat-icon",11),i["\u0275\u0275text"](2,"close"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()}}function k(t,e){if(1&t){var n=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"button",12),i["\u0275\u0275listener"]("click",(function(t){return i["\u0275\u0275restoreView"](n),i["\u0275\u0275nextContext"]().editTenantProfile(t)})),i["\u0275\u0275pipe"](1,"translate"),i["\u0275\u0275elementStart"](2,"mat-icon",11),i["\u0275\u0275text"](3,"edit"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()}2&t&&i["\u0275\u0275propertyInterpolate"]("matTooltip",i["\u0275\u0275pipeBind1"](1,1,"tenant-profile.edit"))}function j(t,e){if(1&t&&(i["\u0275\u0275elementStart"](0,"mat-option",13),i["\u0275\u0275element"](1,"span",14),i["\u0275\u0275pipe"](2,"highlight"),i["\u0275\u0275elementEnd"]()),2&t){var n=e.$implicit,a=i["\u0275\u0275nextContext"]();i["\u0275\u0275property"]("value",n),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("innerHTML",i["\u0275\u0275pipeBind2"](2,2,n.name,a.searchText),i["\u0275\u0275sanitizeHtml"])}}function A(t,e){1&t&&(i["\u0275\u0275elementStart"](0,"div"),i["\u0275\u0275elementStart"](1,"span",20),i["\u0275\u0275text"](2,"tenant-profile.no-tenant-profiles-found"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]())}var _=function(t){return{entity:t}};function L(t,e){if(1&t&&(i["\u0275\u0275elementStart"](0,"span"),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"async"),i["\u0275\u0275elementEnd"]()),2&t){var n=i["\u0275\u0275nextContext"](2);i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,1,n.translate.get("tenant-profile.no-tenant-profiles-matching",i["\u0275\u0275pureFunction1"](3,_,n.truncate.transform(n.searchText,!0,6,"..."))))," ")}}function V(t,e){if(1&t){var n=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"mat-option",15),i["\u0275\u0275elementStart"](1,"div",16),i["\u0275\u0275listener"]("click",(function(t){return i["\u0275\u0275restoreView"](n),t.stopPropagation()})),i["\u0275\u0275template"](2,A,3,0,"div",17),i["\u0275\u0275template"](3,L,3,5,"ng-template",null,18,i["\u0275\u0275templateRefExtractor"]),i["\u0275\u0275elementStart"](5,"span"),i["\u0275\u0275elementStart"](6,"a",19),i["\u0275\u0275listener"]("click",(function(t){i["\u0275\u0275restoreView"](n);var e=i["\u0275\u0275nextContext"]();return e.createTenantProfile(t,e.searchText)})),i["\u0275\u0275text"](7,"tenant-profile.create-new-tenant-profile"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()}if(2&t){var a=i["\u0275\u0275reference"](4),r=i["\u0275\u0275nextContext"]();i["\u0275\u0275property"]("value",null),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngIf",!r.textIsNotEmpty(r.searchText))("ngIfElse",a)}}function R(t,e){1&t&&(i["\u0275\u0275elementStart"](0,"mat-error"),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&t&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,1,"tenant-profile.tenant-profile-required")," "))}var N=function(){function t(t,e,n,a,r,o){this.store=t,this.translate=e,this.truncate=n,this.tenantProfileService=a,this.fb=r,this.dialog=o,this.selectDefaultProfile=!1,this.tenantProfileUpdated=new i.EventEmitter,this.searchText="",this.dirty=!1,this.propagateChange=function(t){},this.selectTenantProfileFormGroup=this.fb.group({tenantProfile:[null]})}return Object.defineProperty(t.prototype,"required",{get:function(){return this.requiredValue},set:function(t){this.requiredValue=Object(p.coerceBooleanProperty)(t)},enumerable:!1,configurable:!0}),t.prototype.registerOnChange=function(t){this.propagateChange=t},t.prototype.registerOnTouched=function(t){},t.prototype.ngOnInit=function(){var t=this;this.filteredTenantProfiles=this.selectTenantProfileFormGroup.get("tenantProfile").valueChanges.pipe(Object(s.a)((function(e){var n;n="string"!=typeof e&&e?new u.a(e.id.id):null,t.updateView(n)})),Object(l.a)((function(t){return t?"string"==typeof t?t:t.name:""})),Object(c.b)((function(e){return t.fetchTenantProfiles(e)})),Object(d.a)())},t.prototype.selectDefaultTenantProfileIfNeeded=function(){var t=this;this.selectDefaultProfile&&!this.modelValue&&this.tenantProfileService.getDefaultTenantProfileInfo().subscribe((function(e){e&&(t.modelValue=new u.a(e.id.id),t.selectTenantProfileFormGroup.get("tenantProfile").patchValue(e,{emitEvent:!1}),t.propagateChange(t.modelValue))}))},t.prototype.setDisabledState=function(t){this.disabled=t},t.prototype.writeValue=function(t){var e=this;this.searchText="",null!=t?this.tenantProfileService.getTenantProfileInfo(t.id).subscribe((function(t){e.modelValue=new u.a(t.id.id),e.selectTenantProfileFormGroup.get("tenantProfile").patchValue(t,{emitEvent:!1})})):(this.modelValue=null,this.selectTenantProfileFormGroup.get("tenantProfile").patchValue(null,{emitEvent:!1}),this.selectDefaultTenantProfileIfNeeded()),this.dirty=!0},t.prototype.onFocus=function(){this.dirty&&(this.selectTenantProfileFormGroup.get("tenantProfile").updateValueAndValidity({onlySelf:!0,emitEvent:!0}),this.dirty=!1)},t.prototype.updateView=function(t){Object(f.a)(this.modelValue,t)||(this.modelValue=t,this.propagateChange(this.modelValue))},t.prototype.displayTenantProfileFn=function(t){return t?t.name:void 0},t.prototype.fetchTenantProfiles=function(t){this.searchText=t;var e=new r.b(10,0,t,{property:"name",direction:o.a.ASC});return this.tenantProfileService.getTenantProfileInfos(e,{ignoreLoading:!0}).pipe(Object(l.a)((function(t){return t.data})))},t.prototype.clear=function(){var t=this;this.selectTenantProfileFormGroup.get("tenantProfile").patchValue(null,{emitEvent:!0}),setTimeout((function(){t.tenantProfileInput.nativeElement.blur(),t.tenantProfileInput.nativeElement.focus()}),0)},t.prototype.textIsNotEmpty=function(t){return t&&t.length>0},t.prototype.tenantProfileEnter=function(t){t.keyCode===g.ENTER&&(t.preventDefault(),this.modelValue||this.createTenantProfile(t,this.searchText))},t.prototype.createTenantProfile=function(t,e){t.preventDefault();var n={name:e};this.openTenantProfileDialog(n,!0)},t.prototype.editTenantProfile=function(t){var e=this;t.preventDefault(),this.tenantProfileService.getTenantProfile(this.modelValue.id).subscribe((function(t){e.openTenantProfileDialog(t,!1)}))},t.prototype.openTenantProfileDialog=function(t,e){var n=this;this.dialog.open(y.a,{disableClose:!0,panelClass:["tb-dialog","tb-fullscreen-dialog"],data:{isAdd:e,tenantProfile:t}}).afterClosed().subscribe((function(t){t?n.tenantProfileService.getTenantProfileInfo(t.id.id).subscribe((function(i){n.modelValue=new u.a(i.id.id),n.selectTenantProfileFormGroup.get("tenantProfile").patchValue(i,{emitEvent:!0}),e?n.propagateChange(n.modelValue):n.tenantProfileUpdated.next(t.id)})):setTimeout((function(){n.tenantProfileInput.nativeElement.blur(),n.tenantProfileInput.nativeElement.focus()}),0)}))},t.\u0275fac=function(e){return new(e||t)(i["\u0275\u0275directiveInject"](b.Store),i["\u0275\u0275directiveInject"](v.TranslateService),i["\u0275\u0275directiveInject"](h.a),i["\u0275\u0275directiveInject"](m.a),i["\u0275\u0275directiveInject"](a.FormBuilder),i["\u0275\u0275directiveInject"](x.MatDialog))},t.\u0275cmp=i["\u0275\u0275defineComponent"]({type:t,selectors:[["tb-tenant-profile-autocomplete"]],viewQuery:function(t,e){var n;(1&t&&i["\u0275\u0275staticViewQuery"](P,!0),2&t)&&(i["\u0275\u0275queryRefresh"](n=i["\u0275\u0275loadQuery"]())&&(e.tenantProfileInput=n.first))},inputs:{selectDefaultProfile:"selectDefaultProfile",required:"required",disabled:"disabled"},outputs:{tenantProfileUpdated:"tenantProfileUpdated"},features:[i["\u0275\u0275ProvidersFeature"]([{provide:a.NG_VALUE_ACCESSOR,useExisting:Object(i.forwardRef)((function(){return t})),multi:!0}])],decls:13,vars:16,consts:[[1,"mat-block",3,"formGroup"],["matInput","","type","text","formControlName","tenantProfile",3,"placeholder","required","matAutocomplete","focusin","keydown","keypress"],["tenantProfileInput",""],["type","button","matSuffix","","mat-button","","mat-icon-button","","aria-label","Clear",3,"click",4,"ngIf"],["type","button","matSuffix","","mat-button","","mat-icon-button","","aria-label","Edit","matTooltipPosition","above",3,"matTooltip","click",4,"ngIf"],[1,"tb-autocomplete",3,"displayWith"],["tenantProfileAutocomplete","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],["class","tb-not-found",3,"value",4,"ngIf"],[4,"ngIf"],["type","button","matSuffix","","mat-button","","mat-icon-button","","aria-label","Clear",3,"click"],[1,"material-icons"],["type","button","matSuffix","","mat-button","","mat-icon-button","","aria-label","Edit","matTooltipPosition","above",3,"matTooltip","click"],[3,"value"],[3,"innerHTML"],[1,"tb-not-found",3,"value"],[1,"tb-not-found-content",3,"click"],[4,"ngIf","ngIfElse"],["searchNotEmpty",""],["translate","",3,"click"],["translate",""]],template:function(t,e){if(1&t&&(i["\u0275\u0275elementStart"](0,"mat-form-field",0),i["\u0275\u0275elementStart"](1,"input",1,2),i["\u0275\u0275listener"]("focusin",(function(){return e.onFocus()}))("keydown",(function(t){return e.tenantProfileEnter(t)}))("keypress",(function(t){return e.tenantProfileEnter(t)})),i["\u0275\u0275pipe"](3,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](4,D,3,0,"button",3),i["\u0275\u0275template"](5,k,4,3,"button",4),i["\u0275\u0275elementStart"](6,"mat-autocomplete",5,6),i["\u0275\u0275template"](8,j,3,5,"mat-option",7),i["\u0275\u0275pipe"](9,"async"),i["\u0275\u0275template"](10,V,8,3,"mat-option",8),i["\u0275\u0275pipe"](11,"async"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](12,R,3,3,"mat-error",9),i["\u0275\u0275elementEnd"]()),2&t){var n,a=i["\u0275\u0275reference"](7);i["\u0275\u0275property"]("formGroup",e.selectTenantProfileFormGroup),i["\u0275\u0275advance"](1),i["\u0275\u0275propertyInterpolate"]("placeholder",i["\u0275\u0275pipeBind1"](3,10,"tenant-profile.tenant-profile")),i["\u0275\u0275property"]("required",e.required)("matAutocomplete",a),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("ngIf",e.selectTenantProfileFormGroup.get("tenantProfile").value&&!e.disabled),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",e.selectTenantProfileFormGroup.get("tenantProfile").value&&!e.disabled),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("displayWith",e.displayTenantProfileFn),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngForOf",i["\u0275\u0275pipeBind1"](9,12,e.filteredTenantProfiles)),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngIf",!(null!=(n=i["\u0275\u0275pipeBind1"](11,14,e.filteredTenantProfiles))&&n.length)),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngIf",e.selectTenantProfileFormGroup.get("tenantProfile").hasError("required"))}},directives:[C.MatFormField,a.NgControlStatusGroup,a.FormGroupDirective,S.MatInput,a.DefaultValueAccessor,w.MatAutocompleteTrigger,a.NgControlStatus,a.FormControlName,a.RequiredValidator,E.NgIf,w.MatAutocomplete,E.NgForOf,I.MatButton,C.MatSuffix,O.MatIcon,T.MatTooltip,M.MatOption,v.TranslateDirective,C.MatError],pipes:[v.TranslatePipe,E.AsyncPipe,F.a],encapsulation:2}),t}();!function(){i["\u0275setClassMetadata"](N,[{type:i.Component,args:[{selector:"tb-tenant-profile-autocomplete",templateUrl:"./tenant-profile-autocomplete.component.html",styleUrls:[],providers:[{provide:a.NG_VALUE_ACCESSOR,useExisting:Object(i.forwardRef)((function(){return N})),multi:!0}]}]}],(function(){return[{type:b.Store},{type:v.TranslateService},{type:h.a},{type:m.a},{type:a.FormBuilder},{type:x.MatDialog}]}),{selectDefaultProfile:[{type:i.Input}],required:[{type:i.Input}],disabled:[{type:i.Input}],tenantProfileUpdated:[{type:i.Output}],tenantProfileInput:[{type:i.ViewChild,args:["tenantProfileInput",{static:!0}]}]})}()},W1QD:function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));var i=n("fXoL"),a=n("3Pt+"),r=(n("xw5a"),n("S0ZR")),o=n("//Q6"),s=n("0IaG"),l=n("bTqV"),c=n("Qu3c"),d=n("NFeN"),p=n("sYmb"),u=function(){function t(t){this.dialog=t,this.propagateChange=null}return t.prototype.ngOnInit=function(){},t.prototype.registerOnChange=function(t){this.propagateChange=t},t.prototype.registerOnTouched=function(t){},t.prototype.setDisabledState=function(t){this.disabled=t},t.prototype.writeValue=function(t){this.keyFilterPredicateUserInfo=t},t.prototype.openFilterUserInfoDialog=function(){var t=this;this.dialog.open(r.a,{disableClose:!0,panelClass:["tb-dialog","tb-fullscreen-dialog"],data:{keyFilterPredicateUserInfo:Object(o.e)(this.keyFilterPredicateUserInfo),valueType:this.valueType,key:this.key,operation:this.operation,readonly:this.disabled}}).afterClosed().subscribe((function(e){e&&(t.keyFilterPredicateUserInfo=e,t.updateModel())}))},t.prototype.updateModel=function(){this.propagateChange(this.keyFilterPredicateUserInfo)},t.\u0275fac=function(e){return new(e||t)(i["\u0275\u0275directiveInject"](s.MatDialog))},t.\u0275cmp=i["\u0275\u0275defineComponent"]({type:t,selectors:[["tb-filter-user-info"]],inputs:{disabled:"disabled",key:"key",operation:"operation",valueType:"valueType"},features:[i["\u0275\u0275ProvidersFeature"]([{provide:a.NG_VALUE_ACCESSOR,useExisting:Object(i.forwardRef)((function(){return t})),multi:!0}])],decls:4,vars:3,consts:[["mat-icon-button","","color","primary","type","button","matTooltipPosition","above",1,"tb-mat-32",3,"matTooltip","click"]],template:function(t,e){1&t&&(i["\u0275\u0275elementStart"](0,"button",0),i["\u0275\u0275listener"]("click",(function(){return e.openFilterUserInfoDialog()})),i["\u0275\u0275pipe"](1,"translate"),i["\u0275\u0275elementStart"](2,"mat-icon"),i["\u0275\u0275text"](3,"settings"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()),2&t&&i["\u0275\u0275propertyInterpolate"]("matTooltip",i["\u0275\u0275pipeBind1"](1,1,e.disabled?"filter.filter-user-params":"filter.edit-filter-user-params"))},directives:[l.MatButton,c.MatTooltip,d.MatIcon],pipes:[p.TranslatePipe],encapsulation:2}),t}();!function(){i["\u0275setClassMetadata"](u,[{type:i.Component,args:[{selector:"tb-filter-user-info",templateUrl:"./filter-user-info.component.html",styleUrls:[],providers:[{provide:a.NG_VALUE_ACCESSOR,useExisting:Object(i.forwardRef)((function(){return u})),multi:!0}]}]}],(function(){return[{type:s.MatDialog}]}),{disabled:[{type:i.Input}],key:[{type:i.Input}],operation:[{type:i.Input}],valueType:[{type:i.Input}]})}()},WeLn:function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var i=n("//Q6");function a(t,e){return Object(i.o)(t)&&Object(i.o)(e)?t.id===e.id&&t.entityType===e.entityType:t===e}},XCsc:function(t,e,n){"use strict";n.d(e,"a",(function(){return G}));var i=n("mrSG"),a=n("fXoL"),r=n("0IaG"),o=n("3Pt+"),s=n("gmuX"),l=n("xKAQ"),c=n("z3OR"),d=n("9HAa"),p=n("l7P3"),u=n("tyNb"),m=n("sYmb"),f=n("/t3+"),h=n("XiUz"),g=n("kRCp"),y=n("bTqV"),b=n("NFeN"),v=n("ofXK"),x=n("xHqg"),C=n("XGqO"),S=n("kmnG"),w=n("d3UM"),E=n("bSwM"),I=n("LpWh"),O=n("bv9b"),T=n("FKr1"),M=["importStepper"];function F(t,e){1&t&&a["\u0275\u0275element"](0,"mat-progress-bar",31)}function P(t,e){1&t&&(a["\u0275\u0275text"](0),a["\u0275\u0275pipe"](1,"translate")),2&t&&a["\u0275\u0275textInterpolate"](a["\u0275\u0275pipeBind1"](1,1,"import.stepper-text.select-file"))}function D(t,e){1&t&&(a["\u0275\u0275text"](0),a["\u0275\u0275pipe"](1,"translate")),2&t&&a["\u0275\u0275textInterpolate"](a["\u0275\u0275pipeBind1"](1,1,"import.stepper-text.configuration"))}function k(t,e){if(1&t&&(a["\u0275\u0275elementStart"](0,"mat-option",32),a["\u0275\u0275text"](1),a["\u0275\u0275elementEnd"]()),2&t){var n=e.$implicit;a["\u0275\u0275property"]("value",n.key),a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"](" ",n.value," ")}}function j(t,e){1&t&&(a["\u0275\u0275text"](0),a["\u0275\u0275pipe"](1,"translate")),2&t&&a["\u0275\u0275textInterpolate"](a["\u0275\u0275pipeBind1"](1,1,"import.stepper-text.column-type"))}function A(t,e){1&t&&(a["\u0275\u0275text"](0),a["\u0275\u0275pipe"](1,"translate")),2&t&&a["\u0275\u0275textInterpolate"](a["\u0275\u0275pipeBind1"](1,1,"import.stepper-text.creat-entities"))}function _(t,e){1&t&&(a["\u0275\u0275text"](0),a["\u0275\u0275pipe"](1,"translate")),2&t&&a["\u0275\u0275textInterpolate"](a["\u0275\u0275pipeBind1"](1,1,"import.stepper-text.done"))}var L=function(t){return{count:t}};function V(t,e){if(1&t&&(a["\u0275\u0275elementStart"](0,"p",33),a["\u0275\u0275text"](1),a["\u0275\u0275elementEnd"]()),2&t){var n=a["\u0275\u0275nextContext"]();a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"](" ",n.translate.instant("import.message.create-entities",a["\u0275\u0275pureFunction1"](1,L,n.statistical.create.entity))," ")}}function R(t,e){if(1&t&&(a["\u0275\u0275elementStart"](0,"p",33),a["\u0275\u0275text"](1),a["\u0275\u0275elementEnd"]()),2&t){var n=a["\u0275\u0275nextContext"]();a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"](" ",n.translate.instant("import.message.update-entities",a["\u0275\u0275pureFunction1"](1,L,n.statistical.update.entity))," ")}}function N(t,e){if(1&t&&(a["\u0275\u0275elementStart"](0,"p",33),a["\u0275\u0275text"](1),a["\u0275\u0275elementEnd"]()),2&t){var n=a["\u0275\u0275nextContext"]();a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"](" ",n.translate.instant("import.message.error-entities",a["\u0275\u0275pureFunction1"](1,L,n.statistical.error.entity))," ")}}var G=function(t){function e(e,n,i,a,r,s,l){var c=t.call(this,e,n,a)||this;return c.store=e,c.router=n,c.data=i,c.dialogRef=a,c.translate=r,c.importExport=s,c.fb=l,c.delimiters=[{key:",",value:","},{key:";",value:";"},{key:"|",value:"|"},{key:"\t",value:"Tab"}],c.selectedIndex=0,c.isImportData=!1,c.progressCreate=0,c.entityType=i.entityType,c.importTitle=i.importTitle,c.importFileLabel=i.importFileLabel,c.selectFileFormGroup=c.fb.group({importData:[null,[o.Validators.required]]}),c.importParametersFormGroup=c.fb.group({delim:[",",[o.Validators.required]],isHeader:[!0,[]],isUpdate:[!0,[]]}),c.columnTypesFormGroup=c.fb.group({columnsParam:[[],[]]}),c}return Object(i.d)(e,t),e.prototype.ngOnInit=function(){},e.prototype.cancel=function(){this.dialogRef.close(!1)},e.prototype.previousStep=function(){this.importStepper.previous()},e.prototype.nextStep=function(t){switch(t){case 2:this.importStepper.next();break;case 3:var e=this.selectFileFormGroup.get("importData").value,n=this.parseCSV(e);if(-1===n)this.importStepper.previous(),this.importStepper.selected.reset();else{this.parseData=n;var i=this.createColumnsData();this.columnTypesFormGroup.patchValue({columnsParam:i},{emitEvent:!0}),this.importStepper.next()}break;case 4:this.importStepper.next(),this.isImportData=!0,this.addEntities();break;case 6:this.dialogRef.close(!0)}},e.prototype.parseCSV=function(t){var e=this,n={delim:this.importParametersFormGroup.get("delim").value,header:this.importParametersFormGroup.get("isHeader").value};return Object(c.d)(t,n,(function(t,n){e.store.dispatch(new l.b({message:e.translate.instant(t,n),type:"error"}))}))},e.prototype.createColumnsData=function(){for(var t=[],e=this.importParametersFormGroup.get("isHeader").value,n=0;n<this.parseData.headers.length;n++){var i=void 0;i=e&&0===this.parseData.headers[n].search(/^(name|type|label)$/im)?{type:c.a[this.parseData.headers[n].toLowerCase()],key:this.parseData.headers[n].toLowerCase(),sampleData:this.parseData.rows[0][n]}:{type:c.a.serverAttribute,key:e?this.parseData.headers[n]:"",sampleData:this.parseData.rows[0][n]},t.push(i)}return t},e.prototype.addEntities=function(){for(var t=this,e=this.parseData,n=this.columnTypesFormGroup.get("columnsParam").value,i=[],a=0,r=0;r<e.rows.length;r++){for(var o={name:"",type:"",description:"",gateway:null,label:"",accessToken:"",attributes:{server:[],shared:[]},timeseries:[]},s=r,l=0;l<n.length;l++)switch(n[l].type){case c.a.serverAttribute:o.attributes.server.push({key:n[l].key,value:e.rows[s][l]});break;case c.a.timeseries:o.timeseries.push({key:n[l].key,value:e.rows[s][l]});break;case c.a.sharedAttribute:o.attributes.shared.push({key:n[l].key,value:e.rows[s][l]});break;case c.a.accessToken:o.accessToken=e.rows[s][l];break;case c.a.name:o.name=e.rows[s][l];break;case c.a.type:o.type=e.rows[s][l];break;case c.a.label:o.label=e.rows[s][l];break;case c.a.isGateway:o.gateway=e.rows[s][l];break;case c.a.description:o.description=e.rows[s][l]}i.push(o)}var d=this.importParametersFormGroup.get("isUpdate").value;this.importExport.importEntities(i,this.entityType,d,(function(){a++,t.progressCreate=Math.round(a/e.rows.length*100)}),{ignoreErrors:!0,resendRequest:!0}).subscribe((function(e){t.statistical=e,t.isImportData=!1,t.importStepper.next()}))},e.\u0275fac=function(t){return new(t||e)(a["\u0275\u0275directiveInject"](p.Store),a["\u0275\u0275directiveInject"](u.Router),a["\u0275\u0275directiveInject"](r.MAT_DIALOG_DATA),a["\u0275\u0275directiveInject"](r.MatDialogRef),a["\u0275\u0275directiveInject"](m.TranslateService),a["\u0275\u0275directiveInject"](d.a),a["\u0275\u0275directiveInject"](o.FormBuilder))},e.\u0275cmp=a["\u0275\u0275defineComponent"]({type:e,selectors:[["tb-import-csv-dialog"]],viewQuery:function(t,e){var n;(1&t&&a["\u0275\u0275staticViewQuery"](M,!0),2&t)&&(a["\u0275\u0275queryRefresh"](n=a["\u0275\u0275loadQuery"]())&&(e.importStepper=n.first))},features:[a["\u0275\u0275ProvidersFeature"]([]),a["\u0275\u0275InheritDefinitionFeature"]],decls:94,vars:94,consts:[["fxLayout","row","color","primary"],["translate",""],["fxFlex",""],[3,"tb-help"],["mat-button","","mat-icon-button","","type","button",3,"disabled","click"],[1,"material-icons"],["color","warn","mode","indeterminate",4,"ngIf"],["mat-dialog-content",""],[3,"linear","selectedIndex"],["importStepper",""],[3,"stepControl"],[3,"formGroup"],["matStepLabel",""],[3,"disabled"],["formControlName","importData","required","",3,"label","allowedExtensions","accept","dropLabel"],["fxLayout","row","fxLayoutAlign","end center","fxLayoutGap","20px"],["mat-button","",3,"disabled","click"],["mat-raised-button","","color","primary",3,"disabled","click"],["fxLayout","column",3,"disabled"],[1,"mat-block"],["required","","formControlName","delim"],[3,"value",4,"ngFor","ngForOf"],["fxLayout","column","fxLayoutGap","12px"],["formControlName","isHeader"],["formControlName","isUpdate"],["fxLayout","row wrap","fxLayoutAlign","space-between center"],["fxLayout","row wrap","fxLayoutGap","20px"],["formControlName","columnsParam",3,"entityType"],["color","warn","mode","determinate",1,"tb-import-progress",3,"value"],["fxLayout","column"],["class","mat-body-1",4,"ngIf"],["color","warn","mode","indeterminate"],[3,"value"],[1,"mat-body-1"]],template:function(t,e){1&t&&(a["\u0275\u0275elementStart"](0,"form"),a["\u0275\u0275elementStart"](1,"mat-toolbar",0),a["\u0275\u0275elementStart"](2,"h2",1),a["\u0275\u0275text"](3),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](4,"span",2),a["\u0275\u0275element"](5,"div",3),a["\u0275\u0275elementStart"](6,"button",4),a["\u0275\u0275listener"]("click",(function(){return e.cancel()})),a["\u0275\u0275elementStart"](7,"mat-icon",5),a["\u0275\u0275text"](8,"close"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275template"](9,F,1,0,"mat-progress-bar",6),a["\u0275\u0275pipe"](10,"async"),a["\u0275\u0275elementStart"](11,"div",7),a["\u0275\u0275elementStart"](12,"mat-vertical-stepper",8,9),a["\u0275\u0275elementStart"](14,"mat-step",10),a["\u0275\u0275elementStart"](15,"form",11),a["\u0275\u0275template"](16,P,2,3,"ng-template",12),a["\u0275\u0275elementStart"](17,"fieldset",13),a["\u0275\u0275pipe"](18,"async"),a["\u0275\u0275element"](19,"tb-file-input",14),a["\u0275\u0275pipe"](20,"translate"),a["\u0275\u0275pipe"](21,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](22,"div",15),a["\u0275\u0275elementStart"](23,"button",16),a["\u0275\u0275listener"]("click",(function(){return e.cancel()})),a["\u0275\u0275pipe"](24,"async"),a["\u0275\u0275text"](25),a["\u0275\u0275pipe"](26,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](27,"button",17),a["\u0275\u0275listener"]("click",(function(){return e.nextStep(2)})),a["\u0275\u0275pipe"](28,"async"),a["\u0275\u0275text"](29),a["\u0275\u0275pipe"](30,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](31,"mat-step",10),a["\u0275\u0275elementStart"](32,"form",11),a["\u0275\u0275template"](33,D,2,3,"ng-template",12),a["\u0275\u0275elementStart"](34,"fieldset",18),a["\u0275\u0275pipe"](35,"async"),a["\u0275\u0275elementStart"](36,"mat-form-field",19),a["\u0275\u0275elementStart"](37,"mat-label",1),a["\u0275\u0275text"](38,"import.csv-delimiter"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](39,"mat-select",20),a["\u0275\u0275template"](40,k,2,2,"mat-option",21),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](41,"div",22),a["\u0275\u0275elementStart"](42,"mat-checkbox",23),a["\u0275\u0275text"](43),a["\u0275\u0275pipe"](44,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](45,"mat-checkbox",24),a["\u0275\u0275text"](46),a["\u0275\u0275pipe"](47,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](48,"div",25),a["\u0275\u0275elementStart"](49,"button",16),a["\u0275\u0275listener"]("click",(function(){return e.previousStep()})),a["\u0275\u0275pipe"](50,"async"),a["\u0275\u0275text"](51),a["\u0275\u0275pipe"](52,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](53,"div",26),a["\u0275\u0275elementStart"](54,"button",16),a["\u0275\u0275listener"]("click",(function(){return e.cancel()})),a["\u0275\u0275pipe"](55,"async"),a["\u0275\u0275text"](56),a["\u0275\u0275pipe"](57,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](58,"button",17),a["\u0275\u0275listener"]("click",(function(){return e.nextStep(3)})),a["\u0275\u0275pipe"](59,"async"),a["\u0275\u0275text"](60),a["\u0275\u0275pipe"](61,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](62,"mat-step",10),a["\u0275\u0275elementStart"](63,"form",11),a["\u0275\u0275template"](64,j,2,3,"ng-template",12),a["\u0275\u0275element"](65,"tb-table-columns-assignment",27),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](66,"div",25),a["\u0275\u0275elementStart"](67,"button",16),a["\u0275\u0275listener"]("click",(function(){return e.previousStep()})),a["\u0275\u0275pipe"](68,"async"),a["\u0275\u0275text"](69),a["\u0275\u0275pipe"](70,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](71,"div",26),a["\u0275\u0275elementStart"](72,"button",16),a["\u0275\u0275listener"]("click",(function(){return e.cancel()})),a["\u0275\u0275pipe"](73,"async"),a["\u0275\u0275text"](74),a["\u0275\u0275pipe"](75,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](76,"button",17),a["\u0275\u0275listener"]("click",(function(){return e.nextStep(4)})),a["\u0275\u0275pipe"](77,"async"),a["\u0275\u0275text"](78),a["\u0275\u0275pipe"](79,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](80,"mat-step"),a["\u0275\u0275template"](81,A,2,3,"ng-template",12),a["\u0275\u0275element"](82,"mat-progress-bar",28),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](83,"mat-step"),a["\u0275\u0275template"](84,_,2,3,"ng-template",12),a["\u0275\u0275elementStart"](85,"div",29),a["\u0275\u0275template"](86,V,2,3,"p",30),a["\u0275\u0275template"](87,R,2,3,"p",30),a["\u0275\u0275template"](88,N,2,3,"p",30),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](89,"div",15),a["\u0275\u0275elementStart"](90,"button",17),a["\u0275\u0275listener"]("click",(function(){return e.nextStep(6)})),a["\u0275\u0275pipe"](91,"async"),a["\u0275\u0275text"](92),a["\u0275\u0275pipe"](93,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()),2&t&&(a["\u0275\u0275advance"](3),a["\u0275\u0275textInterpolate"](e.importTitle),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("tb-help","entitiesImport"),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("disabled",e.isImportData),a["\u0275\u0275advance"](3),a["\u0275\u0275property"]("ngIf",a["\u0275\u0275pipeBind1"](10,44,e.isLoading$)),a["\u0275\u0275advance"](3),a["\u0275\u0275property"]("linear",!0)("selectedIndex",e.selectedIndex),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("stepControl",e.selectFileFormGroup),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("formGroup",e.selectFileFormGroup),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](18,46,e.isLoading$)),a["\u0275\u0275advance"](2),a["\u0275\u0275propertyInterpolate"]("label",a["\u0275\u0275pipeBind1"](20,48,e.importFileLabel)),a["\u0275\u0275propertyInterpolate"]("dropLabel",a["\u0275\u0275pipeBind1"](21,50,"import.drop-file-csv")),a["\u0275\u0275property"]("allowedExtensions","csv,txt")("accept",".csv,application/csv,text/csv,.txt,text/plain"),a["\u0275\u0275advance"](4),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](24,52,e.isLoading$)),a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate"](a["\u0275\u0275pipeBind1"](26,54,"action.cancel")),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](28,56,e.isLoading$)||e.selectFileFormGroup.invalid||!e.selectFileFormGroup.dirty),a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate"](a["\u0275\u0275pipeBind1"](30,58,"action.continue")),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("stepControl",e.importParametersFormGroup),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("formGroup",e.importParametersFormGroup),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](35,60,e.isLoading$)),a["\u0275\u0275advance"](6),a["\u0275\u0275property"]("ngForOf",e.delimiters),a["\u0275\u0275advance"](3),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](44,62,"import.csv-first-line-header")," "),a["\u0275\u0275advance"](3),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](47,64,"import.csv-update-data")," "),a["\u0275\u0275advance"](3),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](50,66,e.isLoading$)),a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate"](a["\u0275\u0275pipeBind1"](52,68,"action.back")),a["\u0275\u0275advance"](3),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](55,70,e.isLoading$)),a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate"](a["\u0275\u0275pipeBind1"](57,72,"action.cancel")),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](59,74,e.isLoading$)),a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate"](a["\u0275\u0275pipeBind1"](61,76,"action.continue")),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("stepControl",e.columnTypesFormGroup),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("formGroup",e.columnTypesFormGroup),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("entityType",e.entityType),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](68,78,e.isLoading$)),a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate"](a["\u0275\u0275pipeBind1"](70,80,"action.back")),a["\u0275\u0275advance"](3),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](73,82,e.isLoading$)),a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate"](a["\u0275\u0275pipeBind1"](75,84,"action.cancel")),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](77,86,e.isLoading$)||e.columnTypesFormGroup.invalid||!e.columnTypesFormGroup.dirty),a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate"](a["\u0275\u0275pipeBind1"](79,88,"action.continue")),a["\u0275\u0275advance"](4),a["\u0275\u0275property"]("value",e.progressCreate),a["\u0275\u0275advance"](4),a["\u0275\u0275property"]("ngIf",(null==e.statistical?null:e.statistical.create)&&(null==e.statistical?null:e.statistical.create.entity)),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",(null==e.statistical?null:e.statistical.update)&&(null==e.statistical?null:e.statistical.update.entity)),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",(null==e.statistical?null:e.statistical.error)&&(null==e.statistical?null:e.statistical.error.entity)),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](91,90,e.isLoading$)),a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate"](a["\u0275\u0275pipeBind1"](93,92,"action.ok")))},directives:[o["\u0275angular_packages_forms_forms_y"],o.NgControlStatusGroup,o.NgForm,f.MatToolbar,h.f,m.TranslateDirective,h.b,g.a,y.MatButton,b.MatIcon,v.NgIf,r.MatDialogContent,x.MatVerticalStepper,x.MatStep,o.FormGroupDirective,x.MatStepLabel,C.a,o.NgControlStatus,o.FormControlName,o.RequiredValidator,h.e,h.g,S.MatFormField,S.MatLabel,w.MatSelect,v.NgForOf,E.MatCheckbox,I.a,O.MatProgressBar,T.MatOption],pipes:[v.AsyncPipe,m.TranslatePipe],styles:["[_nghost-%COMP%]     .mat-dialog-content .mat-vertical-content form{padding-bottom:12px}[_nghost-%COMP%]     .mat-dialog-content .mat-vertical-stepper-header{pointer-events:none!important}[_nghost-%COMP%]     .mat-dialog-content .tb-import-progress{margin:7px 0}"]}),e}(s.a);!function(){a["\u0275setClassMetadata"](G,[{type:a.Component,args:[{selector:"tb-import-csv-dialog",templateUrl:"./import-dialog-csv.component.html",providers:[],styleUrls:["./import-dialog-csv.component.scss"]}]}],(function(){return[{type:p.Store},{type:u.Router},{type:void 0,decorators:[{type:a.Inject,args:[r.MAT_DIALOG_DATA]}]},{type:r.MatDialogRef},{type:m.TranslateService},{type:d.a},{type:o.FormBuilder}]}),{importStepper:[{type:a.ViewChild,args:["importStepper",{static:!0}]}]})}()},XOa3:function(t,e,n){"use strict";var i,a,r;n.d(e,"c",(function(){return i})),n.d(e,"b",(function(){return a})),n.d(e,"a",(function(){return r})),n.d(e,"e",(function(){return o})),n.d(e,"d",(function(){return s})),function(t){t[t.TENANT=0]="TENANT",t[t.ENTITY=1]="ENTITY",t[t.USER=2]="USER",t[t.CUSTOMER=3]="CUSTOMER"}(i||(i={})),function(t){t.ADDED="ADDED",t.DELETED="DELETED",t.UPDATED="UPDATED",t.ATTRIBUTES_UPDATED="ATTRIBUTES_UPDATED",t.ATTRIBUTES_DELETED="ATTRIBUTES_DELETED",t.RPC_CALL="RPC_CALL",t.CREDENTIALS_UPDATED="CREDENTIALS_UPDATED",t.ASSIGNED_TO_CUSTOMER="ASSIGNED_TO_CUSTOMER",t.UNASSIGNED_FROM_CUSTOMER="UNASSIGNED_FROM_CUSTOMER",t.ACTIVATED="ACTIVATED",t.SUSPENDED="SUSPENDED",t.CREDENTIALS_READ="CREDENTIALS_READ",t.ATTRIBUTES_READ="ATTRIBUTES_READ",t.RELATION_ADD_OR_UPDATE="RELATION_ADD_OR_UPDATE",t.RELATION_DELETED="RELATION_DELETED",t.RELATIONS_DELETED="RELATIONS_DELETED",t.ALARM_ACK="ALARM_ACK",t.ALARM_CLEAR="ALARM_CLEAR",t.LOGIN="LOGIN",t.LOGOUT="LOGOUT",t.LOCKOUT="LOCKOUT",t.ASSIGNED_FROM_TENANT="ASSIGNED_FROM_TENANT",t.ASSIGNED_TO_TENANT="ASSIGNED_TO_TENANT",t.PROVISION_SUCCESS="PROVISION_SUCCESS",t.PROVISION_FAILURE="PROVISION_FAILURE",t.TIMESERIES_UPDATED="TIMESERIES_UPDATED",t.TIMESERIES_DELETED="TIMESERIES_DELETED"}(a||(a={})),function(t){t.SUCCESS="SUCCESS",t.FAILURE="FAILURE"}(r||(r={}));var o=new Map([[a.ADDED,"audit-log.type-added"],[a.DELETED,"audit-log.type-deleted"],[a.UPDATED,"audit-log.type-updated"],[a.ATTRIBUTES_UPDATED,"audit-log.type-attributes-updated"],[a.ATTRIBUTES_DELETED,"audit-log.type-attributes-deleted"],[a.RPC_CALL,"audit-log.type-rpc-call"],[a.CREDENTIALS_UPDATED,"audit-log.type-credentials-updated"],[a.ASSIGNED_TO_CUSTOMER,"audit-log.type-assigned-to-customer"],[a.UNASSIGNED_FROM_CUSTOMER,"audit-log.type-unassigned-from-customer"],[a.ACTIVATED,"audit-log.type-activated"],[a.SUSPENDED,"audit-log.type-suspended"],[a.CREDENTIALS_READ,"audit-log.type-credentials-read"],[a.ATTRIBUTES_READ,"audit-log.type-attributes-read"],[a.RELATION_ADD_OR_UPDATE,"audit-log.type-relation-add-or-update"],[a.RELATION_DELETED,"audit-log.type-relation-delete"],[a.RELATIONS_DELETED,"audit-log.type-relations-delete"],[a.ALARM_ACK,"audit-log.type-alarm-ack"],[a.ALARM_CLEAR,"audit-log.type-alarm-clear"],[a.LOGIN,"audit-log.type-login"],[a.LOGOUT,"audit-log.type-logout"],[a.LOCKOUT,"audit-log.type-lockout"],[a.ASSIGNED_FROM_TENANT,"audit-log.type-assigned-from-tenant"],[a.ASSIGNED_TO_TENANT,"audit-log.type-assigned-to-tenant"],[a.PROVISION_SUCCESS,"audit-log.type-provision-success"],[a.PROVISION_FAILURE,"audit-log.type-provision-failure"],[a.TIMESERIES_UPDATED,"audit-log.type-timeseries-updated"],[a.TIMESERIES_DELETED,"audit-log.type-timeseries-deleted"]]),s=new Map([[r.SUCCESS,"audit-log.status-success"],[r.FAILURE,"audit-log.status-failure"]])},XW0v:function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var i=n("U3y+"),a=function(t){this.entityType=i.b.TENANT_PROFILE,this.id=t}},Xbih:function(t,e,n){"use strict";n.d(e,"a",(function(){return At}));var i=n("mrSG"),a=n("fXoL"),r=n("RxGS"),o=n("OiFK"),s=n("Vurf"),l=n("wtyh"),c=n("//Q6"),d=function(){function t(t){this.dashboardCtx=t,this.widgetIds=[],this.loaded=!1}return t.prototype.size=function(){return this.widgetIds.length},t.prototype.isLoading=function(){return!this.loaded},t.prototype.isEmpty=function(){return this.loaded&&0===this.widgetIds.length},t.prototype.setWidgetIds=function(t){this.widgetIds=t,this.loaded=!0},t.prototype.addWidgetId=function(t){this.widgetIds.push(t)},t.prototype.removeWidgetId=function(t){var e=this.widgetIds.indexOf(t);return e>-1&&(this.widgetIds.splice(e,1),!0)},t.prototype[Symbol.iterator]=function(){var t=0,e=this.widgetIds,n=this.dashboardCtx.getDashboard();return{next:function(i){if(t<e.length){var a=e[t++];return{done:!1,value:n.configuration.widgets[a]}}return{done:!0,value:null}}}},t.prototype.widgetByIndex=function(t){var e=this.widgetIds[t];return e?this.widgetById(e):null},t.prototype.widgetById=function(t){return this.dashboardCtx.getDashboard().configuration.widgets[t]},t}(),p=n("he9t"),u=n("C/rb"),m=n("0lYY"),f=n("AytR"),h=n("zp9Z"),g=n("S+vS"),y=n("21Fy"),b=n("Xk9D"),v=n("LRne"),x=n("4j5O"),C=n("YnEf"),S=n("BOYq"),w=n("FBAY"),E=n("EWcq"),I=n("LwFc"),O=n("fDYr"),T=n("aMoz"),M=n("6opy"),F=n("oPR/"),P=n("Absi"),D=n("9HAa"),k=n("HvOk"),j=n("rDax"),A=n("+rOU"),_=n("0Dj+"),L=n("xzJA"),V=n("l7P3"),R=n("0MNC"),N=n("tyNb"),G=n("3Pt+"),B=n("0IaG"),U=n("sYmb"),q=n("XiUz"),W=n("8m5z"),z=n("WEPN"),K=n("ofXK"),H=n("znSr"),$=n("dmmb"),Q=n("bTqV"),X=n("Qu3c"),Y=n("NFeN"),J=n("CUDX"),Z=n("k81w"),tt=n("x7Md"),et=n("wIJ8"),nt=n("uxh+"),it=n("XhcP"),at=n("0AoA"),rt=n("efJA"),ot=n("kmnG"),st=n("qFsG"),lt=n("8RXW"),ct=n("aYVl"),dt=n("kRCp"),pt=n("bdDX"),ut=["tbEditWidget"],mt=["dashboardWidgetSelect"];function ft(t,e){1&t&&a["\u0275\u0275element"](0,"tb-user-menu",33)}function ht(t,e){1&t&&a["\u0275\u0275element"](0,"tb-user-menu",34)}var gt=function(t){return{color:t}};function yt(t,e){if(1&t){var n=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementStart"](0,"section",35),a["\u0275\u0275elementStart"](1,"h3",36),a["\u0275\u0275text"](2),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](3,"mat-form-field",37),a["\u0275\u0275elementStart"](4,"mat-label",38),a["\u0275\u0275text"](5,"dashboard.title"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](6,"input",39),a["\u0275\u0275listener"]("ngModelChange",(function(t){return a["\u0275\u0275restoreView"](n),a["\u0275\u0275nextContext"]().dashboard.title=t})),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()}if(2&t){var i=a["\u0275\u0275nextContext"]();a["\u0275\u0275property"]("ngStyle",a["\u0275\u0275pureFunction1"](7,gt,i.dashboard.configuration.settings.titleColor)),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("fxShow",!i.isEdit&&i.displayTitle()),a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate"](i.dashboard.title),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("fxShow",i.isEdit),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngStyle",a["\u0275\u0275pureFunction1"](9,gt,i.dashboard.configuration.settings.titleColor)),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("ngStyle",a["\u0275\u0275pureFunction1"](11,gt,i.dashboard.configuration.settings.titleColor))("ngModel",i.dashboard.title)}}var bt=function(t,e,n){return{minWidth:t,maxWidth:e,height:n,borderLeft:"none"}};function vt(t,e){if(1&t){var n=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementStart"](0,"mat-drawer",40),a["\u0275\u0275listener"]("openedChange",(function(t){return a["\u0275\u0275restoreView"](n),a["\u0275\u0275nextContext"]().rightLayoutOpened=t})),a["\u0275\u0275element"](1,"tb-dashboard-layout",41),a["\u0275\u0275elementEnd"]()}if(2&t){var i=a["\u0275\u0275nextContext"](),r=a["\u0275\u0275reference"](2);a["\u0275\u0275property"]("ngStyle",a["\u0275\u0275pureFunction3"](11,bt,i.rightLayoutWidth(),i.rightLayoutWidth(),i.rightLayoutHeight()))("@.disabled",!i.isMobile)("mode",i.isMobile?"over":"side")("opened",i.rightLayoutOpened),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("dashboardCheatSheet",r)("layoutCtx",i.layouts.right.layoutCtx)("dashboardCtx",i.dashboardCtx)("isEdit",i.isEdit)("isEditingWidget",i.isEditingWidget)("isMobile",i.forceDashboardMobileMode)("widgetEditMode",i.widgetEditMode)}}function xt(t,e){if(1&t&&a["\u0275\u0275element"](0,"tb-footer-fab-buttons",42),2&t){var n=a["\u0275\u0275nextContext"]();a["\u0275\u0275property"]("fxShow",!n.isAddingWidget&&n.isEdit&&!n.widgetEditMode)("footerFabButtons",n.addWidgetFabButtons)}}var Ct=function(t){return{"tb-hide":t}};function St(t,e){if(1&t){var n=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementStart"](0,"button",43),a["\u0275\u0275listener"]("click",(function(){return a["\u0275\u0275restoreView"](n),a["\u0275\u0275nextContext"]().saveDashboard()})),a["\u0275\u0275pipe"](1,"async"),a["\u0275\u0275pipe"](2,"translate"),a["\u0275\u0275elementStart"](3,"mat-icon"),a["\u0275\u0275text"](4,"done"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()}if(2&t){var i=a["\u0275\u0275nextContext"]();a["\u0275\u0275propertyInterpolate"]("matTooltip",a["\u0275\u0275pipeBind1"](2,5,"action.apply-changes")),a["\u0275\u0275property"]("ngClass",a["\u0275\u0275pureFunction1"](7,Ct,!i.isEdit||i.isAddingWidget))("disabled",a["\u0275\u0275pipeBind1"](1,3,i.isLoading$))}}function wt(t,e){if(1&t){var n=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementStart"](0,"button",43),a["\u0275\u0275listener"]("click",(function(){return a["\u0275\u0275restoreView"](n),a["\u0275\u0275nextContext"]().toggleDashboardEditMode()})),a["\u0275\u0275pipe"](1,"async"),a["\u0275\u0275pipe"](2,"async"),a["\u0275\u0275pipe"](3,"translate"),a["\u0275\u0275elementStart"](4,"mat-icon"),a["\u0275\u0275text"](5),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()}if(2&t){var i=a["\u0275\u0275nextContext"]();a["\u0275\u0275propertyInterpolate"]("matTooltip",a["\u0275\u0275pipeBind1"](3,8,i.isEdit?"action.decline-changes":"action.enter-edit-mode")),a["\u0275\u0275property"]("ngClass",a["\u0275\u0275pureFunction1"](10,Ct,i.isAddingWidget||a["\u0275\u0275pipeBind1"](1,4,i.isLoading$)))("disabled",a["\u0275\u0275pipeBind1"](2,6,i.isLoading$)),a["\u0275\u0275advance"](5),a["\u0275\u0275textInterpolate"](i.isEdit?"close":"edit")}}function Et(t,e){if(1&t){var n=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementStart"](0,"tb-details-panel",44),a["\u0275\u0275listener"]("closeDetails",(function(){return a["\u0275\u0275restoreView"](n),a["\u0275\u0275nextContext"]().onEditWidgetClosed()}))("toggleDetailsEditMode",(function(){return a["\u0275\u0275restoreView"](n),a["\u0275\u0275nextContext"]().onRevertWidgetEdit()}))("applyDetails",(function(){return a["\u0275\u0275restoreView"](n),a["\u0275\u0275nextContext"]().saveWidget()})),a["\u0275\u0275elementStart"](1,"div",45),a["\u0275\u0275element"](2,"div",46),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](3,"tb-edit-widget",47,48),a["\u0275\u0275elementEnd"]()}if(2&t){var i=a["\u0275\u0275reference"](4),r=a["\u0275\u0275nextContext"]();a["\u0275\u0275propertyInterpolate"]("headerTitle",null==r.editingWidget?null:r.editingWidget.config.title),a["\u0275\u0275propertyInterpolate"]("headerSubtitle",r.editingWidgetSubtitle),a["\u0275\u0275property"]("isReadOnly",!1)("isAlwaysEdit",!0)("theForm",i.widgetFormGroup),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("tb-help",r.helpLinkIdForWidgetType()),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("dashboard",r.dashboard)("aliasController",r.dashboardCtx.aliasController)("widgetEditMode",r.widgetEditMode)("widget",r.editingWidget)("widgetLayout",r.editingWidgetLayout)}}function It(t,e){if(1&t){var n=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementStart"](0,"div",55),a["\u0275\u0275elementStart"](1,"tb-widgets-bundle-search",56),a["\u0275\u0275listener"]("ngModelChange",(function(t){return a["\u0275\u0275restoreView"](n),a["\u0275\u0275nextContext"](2).searchBundle=t}))("ngModelChange",(function(t){return a["\u0275\u0275restoreView"](n),a["\u0275\u0275nextContext"](2).searchBundle=t})),a["\u0275\u0275pipe"](2,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()}if(2&t){var i=a["\u0275\u0275nextContext"](2);a["\u0275\u0275advance"](1),a["\u0275\u0275propertyInterpolate"]("placeholder",a["\u0275\u0275pipeBind1"](2,2,null!=i.dashboardWidgetSelectComponent&&i.dashboardWidgetSelectComponent.widgetsBundle?"widget.search":"widgets-bundle.search")),a["\u0275\u0275property"]("ngModel",i.searchBundle)}}function Ot(t,e){if(1&t){var n=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementStart"](0,"button",58),a["\u0275\u0275listener"]("click",(function(t){return a["\u0275\u0275restoreView"](n),a["\u0275\u0275nextContext"](3).editWidgetsTypesToDisplay(t)})),a["\u0275\u0275pipe"](1,"translate"),a["\u0275\u0275elementStart"](2,"mat-icon"),a["\u0275\u0275text"](3,"filter_list"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()}2&t&&a["\u0275\u0275propertyInterpolate"]("matTooltip",a["\u0275\u0275pipeBind1"](1,1,"widget.filter"))}function Tt(t,e){if(1&t&&(a["\u0275\u0275elementStart"](0,"div",45),a["\u0275\u0275template"](1,Ot,4,3,"button",57),a["\u0275\u0275elementEnd"]()),2&t){var n=a["\u0275\u0275nextContext"](2);a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",(null==n.dashboardWidgetSelectComponent?null:n.dashboardWidgetSelectComponent.widgetTypes.size)>1)}}function Mt(t,e){if(1&t){var n=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementStart"](0,"tb-dashboard-widget-select",59,60),a["\u0275\u0275listener"]("widgetsBundleSelected",(function(){return a["\u0275\u0275restoreView"](n),a["\u0275\u0275nextContext"](2).widgetBundleSelected()}))("widgetSelected",(function(t){return a["\u0275\u0275restoreView"](n),a["\u0275\u0275nextContext"](2).addWidgetFromType(t)})),a["\u0275\u0275elementEnd"]()}if(2&t){var i=a["\u0275\u0275nextContext"](2);a["\u0275\u0275property"]("aliasController",i.dashboardCtx.aliasController)("searchBundle",i.searchBundle)("filterWidgetTypes",i.filterWidgetTypes)}}function Ft(t,e){if(1&t){var n=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementStart"](0,"tb-details-panel",49),a["\u0275\u0275listener"]("closeDetails",(function(){return a["\u0275\u0275restoreView"](n),a["\u0275\u0275nextContext"]().onAddWidgetClosed()}))("closeSearch",(function(){return a["\u0275\u0275restoreView"](n),a["\u0275\u0275nextContext"]().onCloseSearchBundle()})),a["\u0275\u0275pipe"](1,"translate"),a["\u0275\u0275elementStart"](2,"div",50),a["\u0275\u0275elementStart"](3,"button",51),a["\u0275\u0275listener"]("click",(function(){return a["\u0275\u0275restoreView"](n),a["\u0275\u0275nextContext"]().clearSelectedWidgetBundle()})),a["\u0275\u0275elementStart"](4,"mat-icon"),a["\u0275\u0275text"](5,"arrow_back"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275template"](6,It,3,4,"div",52),a["\u0275\u0275template"](7,Tt,2,1,"div",53),a["\u0275\u0275template"](8,Mt,2,3,"tb-dashboard-widget-select",54),a["\u0275\u0275elementEnd"]()}if(2&t){var i=a["\u0275\u0275nextContext"]();a["\u0275\u0275propertyInterpolate"]("headerTitle",i.isAddingWidget?a["\u0275\u0275pipeBind2"](1,8,null!=i.dashboardWidgetSelectComponent&&i.dashboardWidgetSelectComponent.widgetsBundle?"dashboard.select-widget-value":"widget.select-widgets-bundle",null==i.dashboardWidgetSelectComponent?null:i.dashboardWidgetSelectComponent.widgetsBundle):""),a["\u0275\u0275property"]("isShowSearch",!0)("isReadOnly",!0)("isEdit",!1),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("fxShow",!(!i.isAddingWidget||null==i.dashboardWidgetSelectComponent||!i.dashboardWidgetSelectComponent.widgetsBundle)),a["\u0275\u0275advance"](4),a["\u0275\u0275property"]("ngIf",i.isAddingWidget),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",i.isAddingWidget),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",i.isAddingWidget)}}var Pt=function(t,e){return{"tb-dashboard-toolbar-opened":t,"tb-dashboard-toolbar-closed":e}},Dt=function(t,e,n,i){return{"is-fullscreen":t,"tb-dashboard-toolbar-opened":e,"tb-dashboard-toolbar-animated":n,"tb-dashboard-toolbar-closed":i}},kt=function(t){return{"tb-shrinked":t}},jt=function(t,e){return{width:t,height:e}},At=function(t){function e(e,n,i,a,r,o,s,l,c,d,m,h,g,y,b,v,x,C,S,w,E){var I=t.call(this,e)||this;return I.store=e,I.window=n,I.breakpointObserver=i,I.route=a,I.router=r,I.utils=o,I.dashboardUtils=s,I.authService=l,I.entityService=c,I.dialogService=d,I.widgetComponentService=m,I.dashboardService=h,I.itembuffer=g,I.importExport=y,I.fb=b,I.dialog=v,I.translate=x,I.ngZone=C,I.overlay=S,I.viewContainerRef=w,I.cd=E,I.authState=Object(u.a)(I.store),I.authUser=I.authState.authUser,I.embedded=!1,I.syncStateWithQueryParam=!0,I.iframeMode=I.utils.iframeMode,I.forceFullscreen=I.authState.forceFullscreen,I.isFullscreen=!1,I.isEdit=!1,I.isEditingWidget=!1,I.isEditingWidgetClosed=!0,I.isMobile=!I.breakpointObserver.isMatched(p.e["gt-sm"]),I.forceDashboardMobileMode=!1,I.isAddingWidget=!1,I.isAddingWidgetClosed=!0,I.searchBundle="",I.filterWidgetTypes=null,I.isToolbarOpened=!1,I.isToolbarOpenedAnimate=!1,I.isRightLayoutOpened=!1,I.editingWidget=null,I.editingWidgetLayout=null,I.editingWidgetOriginal=null,I.editingWidgetLayoutOriginal=null,I.editingWidgetSubtitle=null,I.editingLayoutCtx=null,I.thingsboardVersion=f.a.tbVersion,I.dashboardCtx={instanceId:I.utils.guid(),getDashboard:function(){return I.dashboard},dashboardTimewindow:null,state:null,stateController:null,aliasController:null,runChangeDetection:I.runChangeDetection.bind(I)},I.layouts={main:{show:!1,layoutCtx:{id:"main",widgets:null,widgetLayouts:{},gridSettings:{},ignoreLoading:!0,ctrl:null,dashboardCtrl:I}},right:{show:!1,layoutCtx:{id:"right",widgets:null,widgetLayouts:{},gridSettings:{},ignoreLoading:!0,ctrl:null,dashboardCtrl:I}}},I.addWidgetFabButtons={fabTogglerName:"dashboard.add-widget",fabTogglerIcon:"add",buttons:[{name:"dashboard.create-new-widget",icon:"insert_drive_file",onAction:function(t){I.addWidget(t)}},{name:"dashboard.import-widget",icon:"file_upload",onAction:function(t){I.importWidget(t)}}]},I.rxSubscriptions=new Array,I}return Object(i.d)(e,t),Object.defineProperty(e.prototype,"toolbarOpened",{get:function(){return!this.widgetEditMode&&!this.hideToolbar&&(this.toolbarAlwaysOpen()||this.isToolbarOpened||this.isEdit||this.showRightLayoutSwitch())},set:function(t){},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rightLayoutOpened",{get:function(){return!this.isMobile||this.isRightLayoutOpened},set:function(t){},enumerable:!1,configurable:!0}),e.prototype.ngOnInit=function(){var t=this;this.rxSubscriptions.push(this.route.data.subscribe((function(e){t.embedded?(e.dashboard=t.dashboardUtils.validateAndUpdateDashboard(t.dashboard),e.currentDashboardId=t.dashboard.id?t.dashboard.id.id:null,e.widgetEditMode=!1,e.singlePageMode=!1):e.currentDashboardId=t.route.snapshot.params.dashboardId,t.init(e),t.runChangeDetection()}))),this.rxSubscriptions.push(this.breakpointObserver.observe(p.e["gt-sm"]).subscribe((function(e){t.isMobile=!e.matches})))},e.prototype.init=function(t){var e=this;if(this.reset(),this.currentDashboardId=t.currentDashboardId,this.route.snapshot.params.customerId?(this.currentCustomerId=this.route.snapshot.params.customerId,this.currentDashboardScope="customer"):(this.currentDashboardScope=this.authUser.authority===h.a.TENANT_ADMIN?"tenant":"customer",this.currentCustomerId=this.authUser.customerId),this.dashboard=t.dashboard,this.dashboardConfiguration=this.dashboard.configuration,this.dashboardCtx.dashboardTimewindow=this.dashboardConfiguration.timewindow,this.layouts.main.layoutCtx.widgets=new d(this.dashboardCtx),this.layouts.right.layoutCtx.widgets=new d(this.dashboardCtx),this.widgetEditMode=t.widgetEditMode,this.singlePageMode=t.singlePageMode,this.dashboardCtx.aliasController=new b.a(this.utils,this.entityService,this.translate,(function(){return e.dashboardCtx.stateController}),this.dashboardConfiguration.entityAliases,this.dashboardConfiguration.filters),this.widgetEditMode){this.window.parent.postMessage(JSON.stringify({type:"widgetEditModeInited"}),"*")}},e.prototype.reset=function(){this.dashboard=null,this.dashboardConfiguration=null,this.prevDashboard=null,this.widgetEditMode=!1,this.singlePageMode=!1,this.isFullscreen=!1,this.isEdit=!1,this.isEditingWidget=!1,this.isEditingWidgetClosed=!0,this.forceDashboardMobileMode=!1,this.isAddingWidget=!1,this.isAddingWidgetClosed=!0,this.isToolbarOpened=!1,this.isToolbarOpenedAnimate=!1,this.isRightLayoutOpened=!1,this.editingWidget=null,this.editingWidgetLayout=null,this.editingWidgetOriginal=null,this.editingWidgetLayoutOriginal=null,this.editingWidgetSubtitle=null,this.editingLayoutCtx=null,this.currentDashboardId=null,this.currentCustomerId=null,this.currentDashboardScope=null,this.dashboardCtx.state=null},e.prototype.ngOnDestroy=function(){this.rxSubscriptions.forEach((function(t){t.unsubscribe()})),this.rxSubscriptions.length=0},e.prototype.runChangeDetection=function(){},e.prototype.openToolbar=function(){this.isToolbarOpenedAnimate=!0,this.isToolbarOpened=!0},e.prototype.closeToolbar=function(){this.isToolbarOpenedAnimate=!0,this.isToolbarOpened=!1},e.prototype.showCloseToolbar=function(){return!this.toolbarAlwaysOpen()&&!this.isEdit&&!this.showRightLayoutSwitch()},e.prototype.hideFullscreenButton=function(){return this.widgetEditMode||this.iframeMode||this.forceFullscreen||this.singlePageMode},e.prototype.toolbarAlwaysOpen=function(){return!this.dashboard.configuration.settings||!Object(c.n)(this.dashboard.configuration.settings.toolbarAlwaysOpen)||this.dashboard.configuration.settings.toolbarAlwaysOpen},e.prototype.displayTitle=function(){return!(!this.dashboard.configuration.settings||!Object(c.n)(this.dashboard.configuration.settings.showTitle))&&this.dashboard.configuration.settings.showTitle},e.prototype.displayExport=function(){return!this.dashboard.configuration.settings||!Object(c.n)(this.dashboard.configuration.settings.showDashboardExport)||this.dashboard.configuration.settings.showDashboardExport},e.prototype.displayDashboardTimewindow=function(){return!this.dashboard.configuration.settings||!Object(c.n)(this.dashboard.configuration.settings.showDashboardTimewindow)||this.dashboard.configuration.settings.showDashboardTimewindow},e.prototype.displayDashboardsSelect=function(){return!this.dashboard.configuration.settings||!Object(c.n)(this.dashboard.configuration.settings.showDashboardsSelect)||this.dashboard.configuration.settings.showDashboardsSelect},e.prototype.displayEntitiesSelect=function(){return!this.dashboard.configuration.settings||!Object(c.n)(this.dashboard.configuration.settings.showEntitiesSelect)||this.dashboard.configuration.settings.showEntitiesSelect},e.prototype.displayFilters=function(){return!this.dashboard.configuration.settings||!Object(c.n)(this.dashboard.configuration.settings.showFilters)||this.dashboard.configuration.settings.showFilters},e.prototype.showRightLayoutSwitch=function(){return this.isMobile&&this.layouts.right.show},e.prototype.toggleLayouts=function(){this.isRightLayoutOpened=!this.isRightLayoutOpened},e.prototype.openRightLayout=function(){this.isRightLayoutOpened=!0},e.prototype.mainLayoutWidth=function(){return this.isEditingWidget&&"main"===this.editingLayoutCtx.id?"100%":this.layouts.right.show&&!this.isMobile?"50%":"100%"},e.prototype.mainLayoutHeight=function(){return this.isEditingWidget&&"main"!==this.editingLayoutCtx.id?"0px":"100%"},e.prototype.rightLayoutWidth=function(){return this.isEditingWidget&&"right"===this.editingLayoutCtx.id||this.isMobile?"100%":"50%"},e.prototype.rightLayoutHeight=function(){return this.isEditingWidget&&"right"!==this.editingLayoutCtx.id?"0px":"100%"},e.prototype.isPublicUser=function(){return this.authUser.isPublic},e.prototype.isTenantAdmin=function(){return this.authUser.authority===h.a.TENANT_ADMIN},e.prototype.isSystemAdmin=function(){return this.authUser.authority===h.a.SYS_ADMIN},e.prototype.exportDashboard=function(t){t&&t.stopPropagation(),this.importExport.exportDashboard(this.currentDashboardId)},e.prototype.openEntityAliases=function(t){var e=this;t&&t.stopPropagation(),this.dialog.open(E.a,{disableClose:!0,panelClass:["tb-dialog","tb-fullscreen-dialog"],data:{entityAliases:Object(c.e)(this.dashboard.configuration.entityAliases),widgets:this.dashboardUtils.getWidgetsArray(this.dashboard),isSingleEntityAlias:!1}}).afterClosed().subscribe((function(t){t&&(e.dashboard.configuration.entityAliases=t,e.entityAliasesUpdated())}))},e.prototype.openFilters=function(t){var e=this;t&&t.stopPropagation(),this.dialog.open(k.a,{disableClose:!0,panelClass:["tb-dialog","tb-fullscreen-dialog"],data:{filters:Object(c.e)(this.dashboard.configuration.filters),widgets:this.dashboardUtils.getWidgetsArray(this.dashboard),isSingleFilter:!1}}).afterClosed().subscribe((function(t){t&&(e.dashboard.configuration.filters=t,e.filtersUpdated())}))},e.prototype.openDashboardSettings=function(t){var e=this;t&&t.stopPropagation();var n=null,i=this.dashboardUtils.isSingleLayoutDashboard(this.dashboard);i&&(n=Object(c.e)(this.dashboard.configuration.states[i.state].layouts[i.layout].gridSettings)),this.dialog.open(F.a,{disableClose:!0,panelClass:["tb-dialog","tb-fullscreen-dialog"],data:{settings:Object(c.e)(this.dashboard.configuration.settings),gridSettings:n}}).afterClosed().subscribe((function(t){if(t){e.dashboard.configuration.settings=t.settings;var n=t.gridSettings;if(n){var a=e.dashboard.configuration.states[i.state].layouts[i.layout];e.dashboardUtils.updateLayoutSettings(a,n),e.updateLayouts()}}}))},e.prototype.manageDashboardStates=function(t){var e=this;t&&t.stopPropagation(),this.dialog.open(P.a,{disableClose:!0,panelClass:["tb-dialog","tb-fullscreen-dialog"],data:{states:Object(c.e)(this.dashboard.configuration.states)}}).afterClosed().subscribe((function(t){t&&e.updateStates(t)}))},e.prototype.manageDashboardLayouts=function(t){var e=this;t&&t.stopPropagation(),this.dialog.open(T.a,{disableClose:!0,panelClass:["tb-dialog","tb-fullscreen-dialog"],data:{layouts:Object(c.e)(this.dashboard.configuration.states[this.dashboardCtx.state].layouts)}}).afterClosed().subscribe((function(t){t&&e.updateDashboardLayouts(t)}))},e.prototype.updateDashboardLayouts=function(t){this.dashboardUtils.setLayouts(this.dashboard,this.dashboardCtx.state,t),this.updateLayouts()},e.prototype.updateStates=function(t){this.dashboard.configuration.states=t,this.dashboardUtils.removeUnusedWidgets(this.dashboard);var e=this.dashboardCtx.state;this.dashboard.configuration.states[e]||(e=this.dashboardUtils.getRootStateId(this.dashboardConfiguration.states)),this.openDashboardState(e)},e.prototype.importWidget=function(t){var e=this;t&&t.stopPropagation(),this.importExport.importWidget(this.dashboard,this.dashboardCtx.state,this.selectTargetLayout.bind(this),this.entityAliasesUpdated.bind(this),this.filtersUpdated.bind(this)).subscribe((function(t){if(t){var n=t.widget,i=t.layoutId;e.layouts[i].layoutCtx.widgets.addWidgetId(n.id)}}))},e.prototype.currentDashboardIdChanged=function(t){this.widgetEditMode||(this.dashboardCtx.stateController.cleanupPreservedStates(),"customer"===this.currentDashboardScope&&this.authUser.authority===h.a.TENANT_ADMIN?this.router.navigateByUrl("customers/"+this.currentCustomerId+"/dashboards/"+t):this.singlePageMode?this.router.navigateByUrl("dashboard/"+t):this.router.navigateByUrl("dashboards/"+t))},e.prototype.toggleDashboardEditMode=function(){this.setEditMode(!this.isEdit,!0)},e.prototype.saveDashboard=function(){this.setEditMode(!1,!1),this.notifyDashboardUpdated()},e.prototype.openDashboardState=function(t,e){var n=this.dashboardUtils.getStateLayoutsData(this.dashboard,t);n&&(this.dashboardCtx.state=t,this.dashboardCtx.aliasController.dashboardStateChanged(),this.isRightLayoutOpened=!!e,this.updateLayouts(n))},e.prototype.updateLayouts=function(t){t||(t=this.dashboardUtils.getStateLayoutsData(this.dashboard,this.dashboardCtx.state));for(var e=0,n=Object.keys(this.layouts);e<n.length;e++){var i=n[e],a=this.layouts[i];if(t[i]){a.show=!0;var r=t[i];this.updateLayout(a,r)}else a.show=!1,this.updateLayout(a,{widgetIds:[],widgetLayouts:{},gridSettings:null})}},e.prototype.updateLayout=function(t,e){e.gridSettings&&(t.layoutCtx.gridSettings=e.gridSettings),t.layoutCtx.widgets.setWidgetIds(e.widgetIds),t.layoutCtx.widgetLayouts=e.widgetLayouts,t.show&&t.layoutCtx.ctrl&&t.layoutCtx.ctrl.reload(),t.layoutCtx.ignoreLoading=!0},e.prototype.setEditMode=function(t,e){this.isEdit=t,this.isEdit?(this.dashboardCtx.stateController.preserveState(),this.prevDashboard=Object(c.e)(this.dashboard)):this.widgetEditMode?e&&(this.dashboard=this.prevDashboard):(this.resetHighlight(),e?(this.dashboard=this.prevDashboard,this.dashboardConfiguration=this.dashboard.configuration,this.dashboardCtx.dashboardTimewindow=this.dashboardConfiguration.timewindow,this.entityAliasesUpdated(),this.filtersUpdated(),this.updateLayouts()):this.dashboard.configuration.timewindow=this.dashboardCtx.dashboardTimewindow)},e.prototype.resetHighlight=function(){for(var t=0,e=Object.keys(this.layouts);t<e.length;t++){var n=e[t];this.layouts[n].layoutCtx&&this.layouts[n].layoutCtx.ctrl&&this.layouts[n].layoutCtx.ctrl.resetHighlight()}},e.prototype.entityAliasesUpdated=function(){this.dashboardCtx.aliasController.updateEntityAliases(this.dashboard.configuration.entityAliases)},e.prototype.filtersUpdated=function(){this.dashboardCtx.aliasController.updateFilters(this.dashboard.configuration.filters)},e.prototype.notifyDashboardUpdated=function(){if(this.widgetEditMode){var t=this.layouts.main.layoutCtx.widgets.widgetByIndex(0),e=this.layouts.main.layoutCtx.widgetLayouts[t.id];t.sizeX=e.sizeX,t.sizeY=e.sizeY;var n={type:"widgetEditUpdated",data:t};this.window.parent.postMessage(JSON.stringify(n),"*")}else this.dashboardService.saveDashboard(this.dashboard).subscribe()},e.prototype.helpLinkIdForWidgetType=function(){var t="widgetsConfig";return this.editingWidget&&this.editingWidget.type&&(t=m.l.get(this.editingWidget.type).configHelpLinkId),t},e.prototype.addWidget=function(t,e){t&&t.stopPropagation(),this.isAddingWidget=!0,this.addingLayoutCtx=e},e.prototype.onAddWidgetClosed=function(){this.isAddingWidget=!1},e.prototype.detailsDrawerOpenedStart=function(){var t=this;this.isEditingWidget?this.isEditingWidgetClosed=!1:this.isAddingWidget&&(this.isAddingWidgetClosed=!1),setTimeout((function(){t.cd.detach()}),0)},e.prototype.detailsDrawerOpened=function(){this.cd.reattach()},e.prototype.detailsDrawerClosedStart=function(){this.cd.detach()},e.prototype.detailsDrawerClosed=function(){this.isEditingWidgetClosed=!0,this.isAddingWidgetClosed=!0,this.cd.reattach()},e.prototype.addWidgetToLayout=function(t,e){this.dashboardUtils.addWidgetToLayout(this.dashboard,this.dashboardCtx.state,e,t),this.layouts[e].layoutCtx.widgets.addWidgetId(t.id)},e.prototype.selectTargetLayout=function(){var t=this.dashboardConfiguration.states[this.dashboardCtx.state].layouts,e=Object.keys(t);return e.length>1?this.dialog.open(M.a,{disableClose:!0,panelClass:["tb-dialog","tb-fullscreen-dialog"]}).afterClosed():Object(v.a)(e[0])},e.prototype.addWidgetToDashboard=function(t){var e=this;this.addingLayoutCtx?(this.addWidgetToLayout(t,this.addingLayoutCtx.id),this.addingLayoutCtx=null):this.selectTargetLayout().subscribe((function(n){n&&e.addWidgetToLayout(t,n)}))},e.prototype.addWidgetFromType=function(t){var e=this;this.onAddWidgetClosed(),this.searchBundle="",this.widgetComponentService.getWidgetInfo(t.bundleAlias,t.typeAlias,t.isSystemType).subscribe((function(n){var i=JSON.parse(n.defaultConfig);i.title="New "+n.widgetName,i.datasources=[],Object(c.o)(i.alarmSource)&&(i.alarmSource={type:m.a.entity,dataKeys:i.alarmSource.dataKeys||[]});var a={isSystemType:t.isSystemType,bundleAlias:t.bundleAlias,typeAlias:n.alias,type:n.type,title:"New widget",image:null,description:null,sizeX:n.sizeX,sizeY:n.sizeY,config:i,row:0,col:0};n.typeParameters.useCustomDatasources?e.addWidgetToDashboard(a):e.dialog.open(O.a,{disableClose:!0,panelClass:["tb-dialog","tb-fullscreen-dialog"],data:{dashboard:e.dashboard,aliasController:e.dashboardCtx.aliasController,widget:a,widgetInfo:n}}).afterClosed().subscribe((function(t){t&&e.addWidgetToDashboard(t)}))}))},e.prototype.onRevertWidgetEdit=function(){this.editWidgetComponent.widgetFormGroup.dirty&&(this.editWidgetComponent.widgetFormGroup.markAsPristine(),this.editingWidget=Object(c.e)(this.editingWidgetOriginal),this.editingWidgetLayout=Object(c.e)(this.editingWidgetLayoutOriginal))},e.prototype.saveWidget=function(){var t=this;this.editWidgetComponent.widgetFormGroup.markAsPristine();var e=Object(c.e)(this.editingWidget),n=Object(c.e)(this.editingWidgetLayout),i=this.editingWidgetOriginal.id;this.dashboardConfiguration.widgets[i]=e,this.editingWidgetOriginal=e,this.editingWidgetLayoutOriginal=n,this.editingLayoutCtx.widgetLayouts[e.id]=n,setTimeout((function(){t.editingLayoutCtx.ctrl.highlightWidget(e.id,0)}),0)},e.prototype.onEditWidgetClosed=function(){this.editingWidgetOriginal=null,this.editingWidget=null,this.editingWidgetLayoutOriginal=null,this.editingWidgetLayout=null,this.editingLayoutCtx=null,this.editingWidgetSubtitle=null,this.isEditingWidget=!1,this.resetHighlight(),this.forceDashboardMobileMode=!1},e.prototype.editWidget=function(t,e,n){if(t.stopPropagation(),this.editingWidgetOriginal===n)this.onEditWidgetClosed();else{var i=!this.forceDashboardMobileMode;if(this.editingWidgetOriginal=n,this.editingWidgetLayoutOriginal=e.widgetLayouts[n.id],this.editingWidget=Object(c.e)(this.editingWidgetOriginal),this.editingWidgetLayout=Object(c.e)(this.editingWidgetLayoutOriginal),this.editingLayoutCtx=e,this.editingWidgetSubtitle=this.widgetComponentService.getInstantWidgetInfo(this.editingWidget).widgetName,this.forceDashboardMobileMode=!0,this.isEditingWidget=!0,e){var a=i?400:300;setTimeout((function(){e.ctrl.highlightWidget(n.id,a)}),i?350:0)}}},e.prototype.copyWidget=function(t,e,n){this.itembuffer.copyWidget(this.dashboard,this.dashboardCtx.state,e.id,n)},e.prototype.copyWidgetReference=function(t,e,n){this.itembuffer.copyWidgetReference(this.dashboard,this.dashboardCtx.state,e.id,n)},e.prototype.pasteWidget=function(t,e,n){this.itembuffer.pasteWidget(this.dashboard,this.dashboardCtx.state,e.id,n,this.entityAliasesUpdated.bind(this),this.filtersUpdated.bind(this)).subscribe((function(t){e.widgets.addWidgetId(t.id)}))},e.prototype.pasteWidgetReference=function(t,e,n){this.itembuffer.pasteWidgetReference(this.dashboard,this.dashboardCtx.state,e.id,n).subscribe((function(t){e.widgets.addWidgetId(t.id)}))},e.prototype.removeWidget=function(t,e,n){var i=this,a=n.config.title;a&&0!==a.length||(a=this.widgetComponentService.getInstantWidgetInfo(n).widgetName);var r=this.translate.instant("widget.remove-widget-title",{widgetTitle:a}),o=this.translate.instant("widget.remove-widget-text");this.dialogService.confirm(r,o,this.translate.instant("action.no"),this.translate.instant("action.yes")).subscribe((function(t){t&&e.widgets.removeWidgetId(n.id)&&i.dashboardUtils.removeWidgetFromLayout(i.dashboard,i.dashboardCtx.state,e.id,n.id)}))},e.prototype.exportWidget=function(t,e,n){t.stopPropagation(),this.importExport.exportWidget(this.dashboard,this.dashboardCtx.state,e.id,n)},e.prototype.widgetClicked=function(t,e,n){this.isEditingWidget&&this.editWidget(t,e,n)},e.prototype.widgetMouseDown=function(t,e,n){this.isEdit&&!this.isEditingWidget&&e.ctrl.selectWidget(n.id,0)},e.prototype.prepareDashboardContextMenu=function(t){var e=[];return!this.isEdit||this.isEditingWidget||this.widgetEditMode||(e.push({action:this.openDashboardSettings.bind(this),enabled:!0,value:"dashboard.settings",icon:"settings"}),e.push({action:this.openEntityAliases.bind(this),enabled:!0,value:"entity.aliases",icon:"devices_other"}),e.push({action:function(e){t.ctrl.pasteWidget(e)},enabled:this.itembuffer.hasWidget(),value:"action.paste",icon:"content_paste",shortcut:"M-V"}),e.push({action:function(e){t.ctrl.pasteWidgetReference(e)},enabled:this.itembuffer.canPasteWidgetReference(this.dashboard,this.dashboardCtx.state,t.id),value:"action.paste-reference",icon:"content_paste",shortcut:"M-I"})),e},e.prototype.prepareWidgetContextMenu=function(t,e){var n=this,i=[];return this.isEdit&&!this.isEditingWidget&&(i.push({action:function(e,i){n.editWidget(e,t,i)},enabled:!0,value:"action.edit",icon:"edit"}),this.widgetEditMode||(i.push({action:function(e,i){n.copyWidget(e,t,i)},enabled:!0,value:"action.copy",icon:"content_copy",shortcut:"M-C"}),i.push({action:function(e,i){n.copyWidgetReference(e,t,i)},enabled:!0,value:"action.copy-reference",icon:"content_copy",shortcut:"M-R"}),i.push({action:function(e,i){n.removeWidget(e,t,i)},enabled:!0,value:"action.delete",icon:"clear",shortcut:"M-X"}))),i},e.prototype.widgetBundleSelected=function(){this.searchBundle=""},e.prototype.clearSelectedWidgetBundle=function(){this.searchBundle="",this.dashboardWidgetSelectComponent.widgetsBundle=null},e.prototype.editWidgetsTypesToDisplay=function(t){var e=this;t&&t.stopPropagation();var n=t.target||t.currentTarget,i=new j.OverlayConfig;i.backdropClass="cdk-overlay-transparent-backdrop",i.hasBackdrop=!0;i.positionStrategy=this.overlay.position().flexibleConnectedTo(n).withPositions([{originX:"end",originY:"bottom",overlayX:"end",overlayY:"top"}]);var r=this.overlay.create(i);r.backdropClick().subscribe((function(){r.dispose()}));var o=[{provide:_.a,useValue:{types:Array.from(this.dashboardWidgetSelectComponent.widgetTypes.values()).map((function(t){return{type:t,display:!0}})),typesUpdated:function(t){e.filterWidgetTypes=t.filter((function(t){return t.display})).map((function(t){return t.type}))}}},{provide:j.OverlayRef,useValue:r}],s=a.Injector.create({parent:this.viewContainerRef.injector,providers:o});r.attach(new A.ComponentPortal(_.b,this.viewContainerRef,s)),this.cd.detectChanges()},e.prototype.onCloseSearchBundle=function(){this.searchBundle=""},e.\u0275fac=function(t){return new(t||e)(a["\u0275\u0275directiveInject"](V.Store),a["\u0275\u0275directiveInject"](l.b),a["\u0275\u0275directiveInject"](R.BreakpointObserver),a["\u0275\u0275directiveInject"](N.ActivatedRoute),a["\u0275\u0275directiveInject"](N.Router),a["\u0275\u0275directiveInject"](o.a),a["\u0275\u0275directiveInject"](x.a),a["\u0275\u0275directiveInject"](s.a),a["\u0275\u0275directiveInject"](y.a),a["\u0275\u0275directiveInject"](g.a),a["\u0275\u0275directiveInject"](S.a),a["\u0275\u0275directiveInject"](C.a),a["\u0275\u0275directiveInject"](w.a),a["\u0275\u0275directiveInject"](D.a),a["\u0275\u0275directiveInject"](G.FormBuilder),a["\u0275\u0275directiveInject"](B.MatDialog),a["\u0275\u0275directiveInject"](U.TranslateService),a["\u0275\u0275directiveInject"](a.NgZone),a["\u0275\u0275directiveInject"](j.Overlay),a["\u0275\u0275directiveInject"](a.ViewContainerRef),a["\u0275\u0275directiveInject"](a.ChangeDetectorRef))},e.\u0275cmp=a["\u0275\u0275defineComponent"]({type:e,selectors:[["tb-dashboard-page"]],viewQuery:function(t,e){var n;(1&t&&(a["\u0275\u0275viewQuery"](ut,!0),a["\u0275\u0275viewQuery"](mt,!0)),2&t)&&(a["\u0275\u0275queryRefresh"](n=a["\u0275\u0275loadQuery"]())&&(e.editWidgetComponent=n.first),a["\u0275\u0275queryRefresh"](n=a["\u0275\u0275loadQuery"]())&&(e.dashboardWidgetSelectComponent=n.first))},inputs:{embedded:"embedded",currentState:"currentState",hideToolbar:"hideToolbar",syncStateWithQueryParam:"syncStateWithQueryParam",dashboard:"dashboard"},features:[a["\u0275\u0275InheritDefinitionFeature"]],decls:72,vars:99,consts:[["fxFlex","","tb-fullscreen","",1,"tb-dashboard-page","mat-content",2,"padding-top","150px",3,"fullscreen"],["cheatSheetComponent",""],[1,"tb-dashboard-toolbar",3,"ngClass"],[3,"fxShow","forceFullscreen","toolbarOpened","triggerClick"],["fxLayout","column","fxLayout.gt-sm","row","fxLayoutAlign","center stretch","fxLayoutAlign.gt-sm","space-between center",1,"tb-dashboard-action-panels"],["fxFlex","auto","fxLayout","row-reverse","fxLayoutAlign.gt-sm","end center","fxLayoutAlign","space-between center","fxLayoutGap","12px",1,"tb-dashboard-action-panel"],["fxHide.gt-sm","","displayUserInfo","true",4,"ngIf"],["fxFlex.lt-md","","fxLayout","row","fxLayoutAlign.gt-sm","start center","fxLayoutAlign","end center","fxLayoutGap","12px",3,"fxShow"],["mat-icon-button","","matTooltipPosition","below",3,"matTooltip","click"],["fxFlex.lt-md","",3,"statesControllerId","dashboardCtrl","dashboardId","isMobile","state","currentState","syncStateWithQueryParam","states"],["fxFlex","1 0 auto","fxLayout","row-reverse","fxLayoutAlign.gt-sm","start center","fxLayoutAlign","space-between center","fxLayoutGap","12px",1,"tb-dashboard-action-panel"],["mat-icon-button","","matTooltipPosition","below",1,"close-action",3,"fxShow","matTooltip","click"],["fxHide.lt-md","","displayUserInfo","true",4,"ngIf"],["mat-icon-button","","matTooltipPosition","below",3,"fxShow","matTooltip","click"],["isToolbar","true","direction","left","tooltipPosition","below","aggregation","true","timezone","true",3,"fxShow","isEdit","ngModel","ngModelChange"],["tooltipPosition","below",3,"fxShow","aliasController"],[3,"fxShow","ngModel","customerId","dashboardsScope","ngModelChange"],[1,"tb-dashboard-container","tb-absolute-fill",3,"ngClass"],["hasBackdrop","false",1,"tb-absolute-fill","tb-dashboard-drawer-container"],["fxLayout","column","fxLayoutAlign","center start"],["class","tb-dashboard-title",3,"ngStyle",4,"ngIf"],["fxFlex","",1,"tb-dashboard-layouts",3,"ngClass"],["id","tb-right-layout","disableClose","true","position","end",3,"ngStyle","mode","opened","openedChange",4,"ngIf"],["id","tb-main-layout",3,"fxShow","ngStyle"],[3,"dashboardCheatSheet","layoutCtx","dashboardCtx","isEdit","isEditingWidget","isMobile","widgetEditMode"],["fxLayout","row","fxLayoutAlign","start end",1,"layout-wrap","tb-footer-buttons"],["relative","",3,"fxShow","footerFabButtons",4,"ngIf"],["mat-fab","","color","accent","class","tb-btn-footer","matTooltipPosition","above",3,"ngClass","disabled","matTooltip","click",4,"ngIf"],[1,"tb-powered-by-footer",3,"ngStyle"],["href","https://thingsboard.io","target","_blank"],["mode","over","position","end",1,"tb-details-drawer",3,"opened","openedStart","closedStart","closed"],["fxFlex","",3,"headerTitle","headerSubtitle","isReadOnly","isAlwaysEdit","theForm","closeDetails","toggleDetailsEditMode","applyDetails",4,"ngIf"],["fxFlex","","headerHeightPx","64","backgroundColor","#cfd8dc",3,"headerTitle","isShowSearch","isReadOnly","isEdit","closeDetails","closeSearch",4,"ngIf"],["fxHide.gt-sm","","displayUserInfo","true"],["fxHide.lt-md","","displayUserInfo","true"],[1,"tb-dashboard-title",3,"ngStyle"],[3,"fxShow"],[1,"mat-block",3,"fxShow"],["translate","",3,"ngStyle"],["matInput","","required","","name","title",1,"tb-dashboard-title",3,"ngStyle","ngModel","ngModelChange"],["id","tb-right-layout","disableClose","true","position","end",3,"ngStyle","mode","opened","openedChange"],[2,"height","100%",3,"dashboardCheatSheet","layoutCtx","dashboardCtx","isEdit","isEditingWidget","isMobile","widgetEditMode"],["relative","",3,"fxShow","footerFabButtons"],["mat-fab","","color","accent","matTooltipPosition","above",1,"tb-btn-footer",3,"ngClass","disabled","matTooltip","click"],["fxFlex","",3,"headerTitle","headerSubtitle","isReadOnly","isAlwaysEdit","theForm","closeDetails","toggleDetailsEditMode","applyDetails"],[1,"details-buttons"],[3,"tb-help"],[3,"dashboard","aliasController","widgetEditMode","widget","widgetLayout"],["tbEditWidget",""],["fxFlex","","headerHeightPx","64","backgroundColor","#cfd8dc",3,"headerTitle","isShowSearch","isReadOnly","isEdit","closeDetails","closeSearch"],[1,"prefix-title-buttons",2,"height","28px","margin-right","12px",3,"fxShow"],["mat-icon-button","","type","button",1,"tb-mat-28",3,"click"],["class","search-pane","fxLayout","row",4,"ngIf"],["class","details-buttons",4,"ngIf"],[3,"aliasController","searchBundle","filterWidgetTypes","widgetsBundleSelected","widgetSelected",4,"ngIf"],["fxLayout","row",1,"search-pane"],["fxFlex","",3,"ngModel","placeholder","ngModelChange"],["mat-button","","mat-icon-button","","type","button","matTooltipPosition","above",3,"matTooltip","click",4,"ngIf"],["mat-button","","mat-icon-button","","type","button","matTooltipPosition","above",3,"matTooltip","click"],[3,"aliasController","searchBundle","filterWidgetTypes","widgetsBundleSelected","widgetSelected"],["dashboardWidgetSelect",""]],template:function(t,e){if(1&t&&(a["\u0275\u0275elementStart"](0,"div",0),a["\u0275\u0275element"](1,"tb-hotkeys-cheatsheet",null,1),a["\u0275\u0275elementStart"](3,"section",2),a["\u0275\u0275elementStart"](4,"tb-dashboard-toolbar",3),a["\u0275\u0275listener"]("triggerClick",(function(){return e.openToolbar()})),a["\u0275\u0275elementStart"](5,"div",4),a["\u0275\u0275elementStart"](6,"div",5),a["\u0275\u0275template"](7,ft,1,0,"tb-user-menu",6),a["\u0275\u0275elementStart"](8,"div",7),a["\u0275\u0275elementStart"](9,"button",8),a["\u0275\u0275listener"]("click",(function(t){return e.manageDashboardStates(t)})),a["\u0275\u0275pipe"](10,"translate"),a["\u0275\u0275elementStart"](11,"mat-icon"),a["\u0275\u0275text"](12,"layers"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](13,"button",8),a["\u0275\u0275listener"]("click",(function(t){return e.manageDashboardLayouts(t)})),a["\u0275\u0275pipe"](14,"translate"),a["\u0275\u0275elementStart"](15,"mat-icon"),a["\u0275\u0275text"](16,"view_compact"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](17,"tb-states-component",9),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](18,"div",10),a["\u0275\u0275elementStart"](19,"button",11),a["\u0275\u0275listener"]("click",(function(){return e.closeToolbar()})),a["\u0275\u0275pipe"](20,"translate"),a["\u0275\u0275elementStart"](21,"mat-icon"),a["\u0275\u0275text"](22,"arrow_forward"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275template"](23,ht,1,0,"tb-user-menu",12),a["\u0275\u0275elementStart"](24,"button",13),a["\u0275\u0275listener"]("click",(function(){return e.toggleLayouts()})),a["\u0275\u0275pipe"](25,"translate"),a["\u0275\u0275elementStart"](26,"mat-icon"),a["\u0275\u0275text"](27),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](28,"button",13),a["\u0275\u0275listener"]("click",(function(){return e.isFullscreen=!e.isFullscreen})),a["\u0275\u0275pipe"](29,"translate"),a["\u0275\u0275elementStart"](30,"mat-icon"),a["\u0275\u0275text"](31),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](32,"button",13),a["\u0275\u0275listener"]("click",(function(t){return e.exportDashboard(t)})),a["\u0275\u0275pipe"](33,"translate"),a["\u0275\u0275elementStart"](34,"mat-icon"),a["\u0275\u0275text"](35,"file_download"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](36,"tb-timewindow",14),a["\u0275\u0275listener"]("ngModelChange",(function(t){return e.dashboardCtx.dashboardTimewindow=t})),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](37,"tb-filters-edit",15),a["\u0275\u0275element"](38,"tb-aliases-entity-select",15),a["\u0275\u0275elementStart"](39,"button",13),a["\u0275\u0275listener"]("click",(function(t){return e.openFilters(t)})),a["\u0275\u0275pipe"](40,"translate"),a["\u0275\u0275elementStart"](41,"mat-icon"),a["\u0275\u0275text"](42,"filter_list"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](43,"button",13),a["\u0275\u0275listener"]("click",(function(t){return e.openEntityAliases(t)})),a["\u0275\u0275pipe"](44,"translate"),a["\u0275\u0275elementStart"](45,"mat-icon"),a["\u0275\u0275text"](46,"devices_other"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](47,"button",13),a["\u0275\u0275listener"]("click",(function(t){return e.openDashboardSettings(t)})),a["\u0275\u0275pipe"](48,"translate"),a["\u0275\u0275elementStart"](49,"mat-icon"),a["\u0275\u0275text"](50,"settings"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](51,"tb-dashboard-select",16),a["\u0275\u0275listener"]("ngModelChange",(function(t){return e.currentDashboardId=t}))("ngModelChange",(function(){return e.currentDashboardIdChanged(e.currentDashboardId)})),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](52,"section",17),a["\u0275\u0275elementStart"](53,"mat-drawer-container",18),a["\u0275\u0275elementStart"](54,"mat-drawer-content",19),a["\u0275\u0275template"](55,yt,7,13,"section",20),a["\u0275\u0275elementStart"](56,"mat-drawer-container",21),a["\u0275\u0275template"](57,vt,2,15,"mat-drawer",22),a["\u0275\u0275elementStart"](58,"mat-drawer-content",23),a["\u0275\u0275element"](59,"tb-dashboard-layout",24),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](60,"section",25),a["\u0275\u0275template"](61,xt,1,2,"tb-footer-fab-buttons",26),a["\u0275\u0275template"](62,St,5,9,"button",27),a["\u0275\u0275template"](63,wt,6,12,"button",27),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](64,"section",28),a["\u0275\u0275elementStart"](65,"span"),a["\u0275\u0275text"](66,"Powered by "),a["\u0275\u0275elementStart"](67,"a",29),a["\u0275\u0275text"](68),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](69,"mat-drawer",30),a["\u0275\u0275listener"]("openedStart",(function(){return e.detailsDrawerOpenedStart()}))("opened",(function(){return e.detailsDrawerOpened()}))("closedStart",(function(){return e.detailsDrawerClosedStart()}))("closed",(function(){return e.detailsDrawerClosed()})),a["\u0275\u0275template"](70,Et,5,11,"tb-details-panel",31),a["\u0275\u0275template"](71,Ft,9,11,"tb-details-panel",32),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()),2&t){var n=a["\u0275\u0275reference"](2);a["\u0275\u0275property"]("fullscreen",e.widgetEditMode||e.iframeMode||e.forceFullscreen||e.isFullscreen),a["\u0275\u0275advance"](3),a["\u0275\u0275property"]("ngClass",a["\u0275\u0275pureFunction2"](84,Pt,e.toolbarOpened,!e.toolbarOpened)),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("fxShow",!e.widgetEditMode&&!e.hideToolbar)("forceFullscreen",e.forceFullscreen)("toolbarOpened",e.toolbarOpened),a["\u0275\u0275advance"](3),a["\u0275\u0275property"]("ngIf",!e.isPublicUser()&&e.forceFullscreen),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("fxShow",e.isEdit),a["\u0275\u0275advance"](1),a["\u0275\u0275propertyInterpolate"]("matTooltip",a["\u0275\u0275pipeBind1"](10,66,"dashboard.manage-states")),a["\u0275\u0275advance"](4),a["\u0275\u0275propertyInterpolate"]("matTooltip",a["\u0275\u0275pipeBind1"](14,68,"layout.manage")),a["\u0275\u0275advance"](4),a["\u0275\u0275property"]("statesControllerId",e.isEdit?"default":e.dashboardConfiguration.settings.stateControllerId)("dashboardCtrl",e)("dashboardId",!e.embedded&&e.dashboard.id?e.dashboard.id.id:"")("isMobile",e.isMobile)("state",e.dashboardCtx.state)("currentState",e.currentState)("syncStateWithQueryParam",e.syncStateWithQueryParam)("states",e.dashboardConfiguration.states),a["\u0275\u0275advance"](2),a["\u0275\u0275propertyInterpolate"]("matTooltip",a["\u0275\u0275pipeBind1"](20,70,"dashboard.close-toolbar")),a["\u0275\u0275property"]("fxShow",e.showCloseToolbar()),a["\u0275\u0275advance"](4),a["\u0275\u0275property"]("ngIf",!e.isPublicUser()&&e.forceFullscreen),a["\u0275\u0275advance"](1),a["\u0275\u0275propertyInterpolate"]("matTooltip",a["\u0275\u0275pipeBind1"](25,72,e.isRightLayoutOpened?"dashboard.hide-details":"dashboard.show-details")),a["\u0275\u0275property"]("fxShow",e.showRightLayoutSwitch()),a["\u0275\u0275advance"](3),a["\u0275\u0275textInterpolate"](e.isRightLayoutOpened?"arrow_back":"menu"),a["\u0275\u0275advance"](1),a["\u0275\u0275propertyInterpolate"]("matTooltip",a["\u0275\u0275pipeBind1"](29,74,e.isFullscreen?"fullscreen.exit":"fullscreen.expand")),a["\u0275\u0275property"]("fxShow",!e.hideFullscreenButton()),a["\u0275\u0275advance"](3),a["\u0275\u0275textInterpolate"](e.isFullscreen?"fullscreen_exit":"fullscreen"),a["\u0275\u0275advance"](1),a["\u0275\u0275propertyInterpolate"]("matTooltip",a["\u0275\u0275pipeBind1"](33,76,"dashboard.export")),a["\u0275\u0275property"]("fxShow",e.currentDashboardId&&(e.isEdit||e.displayExport())),a["\u0275\u0275advance"](4),a["\u0275\u0275property"]("fxShow",e.isEdit||e.displayDashboardTimewindow())("isEdit",e.isEdit)("ngModel",e.dashboardCtx.dashboardTimewindow),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("fxShow",!e.isEdit&&e.displayFilters())("aliasController",e.dashboardCtx.aliasController),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("fxShow",!e.isEdit&&e.displayEntitiesSelect())("aliasController",e.dashboardCtx.aliasController),a["\u0275\u0275advance"](1),a["\u0275\u0275propertyInterpolate"]("matTooltip",a["\u0275\u0275pipeBind1"](40,78,"filter.filters")),a["\u0275\u0275property"]("fxShow",e.isEdit),a["\u0275\u0275advance"](4),a["\u0275\u0275propertyInterpolate"]("matTooltip",a["\u0275\u0275pipeBind1"](44,80,"entity.aliases")),a["\u0275\u0275property"]("fxShow",e.isEdit),a["\u0275\u0275advance"](4),a["\u0275\u0275propertyInterpolate"]("matTooltip",a["\u0275\u0275pipeBind1"](48,82,"dashboard.settings")),a["\u0275\u0275property"]("fxShow",e.isEdit),a["\u0275\u0275advance"](4),a["\u0275\u0275property"]("fxShow",!e.isEdit&&!e.widgetEditMode&&!e.embedded&&e.displayDashboardsSelect())("ngModel",e.currentDashboardId)("customerId",e.currentCustomerId)("dashboardsScope",e.currentDashboardScope),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngClass",a["\u0275\u0275pureFunction4"](87,Dt,e.forceFullscreen,e.toolbarOpened,e.isToolbarOpenedAnimate,!e.toolbarOpened)),a["\u0275\u0275advance"](3),a["\u0275\u0275property"]("ngIf",!e.widgetEditMode),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngClass",a["\u0275\u0275pureFunction1"](92,kt,e.isEditingWidget)),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",e.layouts.right.show),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("fxShow",e.layouts.main.show)("ngStyle",a["\u0275\u0275pureFunction2"](94,jt,e.mainLayoutWidth(),e.mainLayoutHeight())),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("dashboardCheatSheet",n)("layoutCtx",e.layouts.main.layoutCtx)("dashboardCtx",e.dashboardCtx)("isEdit",e.isEdit)("isEditingWidget",e.isEditingWidget)("isMobile",e.forceDashboardMobileMode)("widgetEditMode",e.widgetEditMode),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("ngIf",!e.embedded),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",(e.isTenantAdmin()||e.isSystemAdmin())&&!e.forceFullscreen&&!e.embedded),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",(e.isTenantAdmin()||e.isSystemAdmin())&&!e.forceFullscreen&&!e.embedded),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngStyle",a["\u0275\u0275pureFunction1"](97,gt,e.dashboard.configuration.settings.titleColor)),a["\u0275\u0275advance"](4),a["\u0275\u0275textInterpolate1"]("Thingsboard v.",e.thingsboardVersion,""),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("opened",e.isEditingWidget||e.isAddingWidget),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",!e.isEditingWidgetClosed),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",!e.isAddingWidgetClosed&&!e.widgetEditMode)}},directives:[q.b,W.a,z.a,K.NgClass,H.b,$.a,H.d,q.f,q.e,q.g,K.NgIf,Q.MatButton,X.MatTooltip,Y.MatIcon,J.a,Z.a,G.NgControlStatus,G.NgModel,tt.a,et.a,nt.a,it.MatDrawerContainer,it.MatDrawerContent,K.NgStyle,H.e,at.a,it.MatDrawer,rt.a,ot.MatFormField,ot.MatLabel,U.TranslateDirective,st.MatInput,G.DefaultValueAccessor,G.RequiredValidator,lt.a,ct.a,dt.a,I.a,pt.a,L.a],pipes:[U.TranslatePipe,K.AsyncPipe],styles:["tb-dashboard-page{display:-ms-flexbox;display:flex;width:100%;height:100%}div.tb-dashboard-page.mat-content{overflow:hidden;background-color:#eee}div.tb-dashboard-page section.tb-dashboard-title{position:relative;padding-left:20px;max-height:60px}div.tb-dashboard-page section.tb-dashboard-title mat-form-field .mat-form-field-infix{width:100%}div.tb-dashboard-page section.tb-dashboard-title input.tb-dashboard-title{height:38px;font-size:2rem;font-weight:500;letter-spacing:.005em}div.tb-dashboard-page section.tb-dashboard-toolbar{position:absolute;top:0;left:0;z-index:13;pointer-events:none}div.tb-dashboard-page section.tb-dashboard-toolbar.tb-dashboard-toolbar-opened{right:0}div.tb-dashboard-page section.tb-dashboard-toolbar.tb-dashboard-toolbar-closed{right:18px;transition:right .3s cubic-bezier(.55,0,.55,.2) .2s}div.tb-dashboard-page .tb-dashboard-container.tb-dashboard-toolbar-opened.is-fullscreen{margin-top:84px}@media screen and (min-width:960px){div.tb-dashboard-page .tb-dashboard-container.tb-dashboard-toolbar-opened.is-fullscreen{margin-top:64px}}div.tb-dashboard-page .tb-dashboard-container.tb-dashboard-toolbar-opened:not(.is-fullscreen){margin-top:84px}@media screen and (min-width:960px){div.tb-dashboard-page .tb-dashboard-container.tb-dashboard-toolbar-opened:not(.is-fullscreen){margin-top:50px}}div.tb-dashboard-page .tb-dashboard-container.tb-dashboard-toolbar-opened:not(.is-fullscreen).tb-dashboard-toolbar-animated{transition:margin-top .3s cubic-bezier(.55,0,.55,.2)}div.tb-dashboard-page .tb-dashboard-container.tb-dashboard-toolbar-closed{margin-top:0}div.tb-dashboard-page .tb-dashboard-container.tb-dashboard-toolbar-closed.tb-dashboard-toolbar-animated{transition:margin-top .3s cubic-bezier(.55,0,.55,.2) .2s}div.tb-dashboard-page mat-drawer-container.tb-dashboard-drawer-container mat-drawer-container.tb-dashboard-layouts{width:100%}div.tb-dashboard-page mat-drawer-container.tb-dashboard-drawer-container mat-drawer-container.tb-dashboard-layouts.tb-shrinked{width:40%}@media screen and (min-width:960px){div.tb-dashboard-page mat-drawer-container.tb-dashboard-drawer-container mat-drawer.tb-details-drawer{width:85%!important}}@media screen and (min-width:1280px){div.tb-dashboard-page mat-drawer-container.tb-dashboard-drawer-container mat-drawer.tb-details-drawer{width:75%!important}}@media screen and (min-width:1920px){div.tb-dashboard-page mat-drawer-container.tb-dashboard-drawer-container mat-drawer.tb-details-drawer{width:60%!important}}div.tb-dashboard-page section.tb-powered-by-footer{position:absolute;right:25px;bottom:5px;z-index:30;pointer-events:none}div.tb-dashboard-page section.tb-powered-by-footer span{font-size:12px}div.tb-dashboard-page section.tb-powered-by-footer span a{font-weight:700;text-decoration:none;pointer-events:all;border:none}"],encapsulation:2}),e}(r.a);!function(){a["\u0275setClassMetadata"](At,[{type:a.Component,args:[{selector:"tb-dashboard-page",templateUrl:"./dashboard-page.component.html",styleUrls:["./dashboard-page.component.scss"],encapsulation:a.ViewEncapsulation.None}]}],(function(){return[{type:V.Store},{type:Window,decorators:[{type:a.Inject,args:[l.b]}]},{type:R.BreakpointObserver},{type:N.ActivatedRoute},{type:N.Router},{type:o.a},{type:x.a},{type:s.a},{type:y.a},{type:g.a},{type:S.a},{type:C.a},{type:w.a},{type:D.a},{type:G.FormBuilder},{type:B.MatDialog},{type:U.TranslateService},{type:a.NgZone},{type:j.Overlay},{type:a.ViewContainerRef},{type:a.ChangeDetectorRef}]}),{embedded:[{type:a.Input}],currentState:[{type:a.Input}],hideToolbar:[{type:a.Input}],syncStateWithQueryParam:[{type:a.Input}],dashboard:[{type:a.Input}],editWidgetComponent:[{type:a.ViewChild,args:["tbEditWidget"]}],dashboardWidgetSelectComponent:[{type:a.ViewChild,args:["dashboardWidgetSelect"]}]})}()},Xk9D:function(t,e,n){"use strict";n.d(e,"a",(function(){return m}));var i=n("XNiG"),a=n("cp0P"),r=n("LRne"),o=n("jtHE"),s=n("0lYY"),l=n("//Q6"),c=n("MBk6"),d=n("5+tZ"),p=n("lJxs"),u=n("xw5a"),m=function(){function t(t,e,n,a,r,o){this.utils=t,this.entityService=e,this.translate=n,this.stateControllerHolder=a,this.origEntityAliases=r,this.origFilters=o,this.entityAliasesChangedSubject=new i.b,this.entityAliasesChanged=this.entityAliasesChangedSubject.asObservable(),this.filtersChangedSubject=new i.b,this.filtersChanged=this.filtersChangedSubject.asObservable(),this.entityAliasResolvedSubject=new i.b,this.entityAliasResolved=this.entityAliasResolvedSubject.asObservable(),this.resolvedAliases={},this.resolvedAliasesObservable={},this.resolvedAliasesToStateEntities={},this.entityAliases=Object(l.e)(this.origEntityAliases)||{},this.filters=Object(l.e)(this.origFilters)||{},this.userFilters={}}return t.prototype.updateEntityAliases=function(t){for(var e=[],n=0,i=Object.keys(t);n<i.length;n++){var a=t[c=i[n]],r=this.entityAliases[c];Object(l.r)(a,r)||(e.push(c),this.setAliasUnresolved(c))}for(var o=0,s=Object.keys(this.entityAliases);o<s.length;o++){var c;t[c=s[o]]||(e.push(c),this.setAliasUnresolved(c))}this.entityAliases=Object(l.e)(t),e.length&&this.entityAliasesChangedSubject.next(e)},t.prototype.updateFilters=function(t){for(var e=[],n=0,i=Object.keys(t);n<i.length;n++){var a=t[p=i[n]],r=this.filters[p];Object(l.r)(a,r)||e.push(p)}for(var o=0,s=Object.keys(this.filters);o<s.length;o++){t[p=s[o]]||e.push(p)}if(this.filters=Object(l.e)(t),e.length){for(var c=0,d=e;c<d.length;c++){var p=d[c];delete this.userFilters[p]}this.filtersChangedSubject.next(e)}},t.prototype.updateAliases=function(t){var e=this;if(!t){t=[];for(var n=0,i=Object.keys(this.resolvedAliases);n<i.length;n++){var r=i[n];t.push(r)}}for(var o=[],s=0,l=t;s<l.length;s++){r=l[s];this.setAliasUnresolved(r),o.push(this.getAliasInfo(r))}Object(a.a)(o).subscribe((function(){e.entityAliasesChangedSubject.next(t)}))},t.prototype.dashboardStateChanged=function(){for(var t=[],e=0,n=Object.keys(this.resolvedAliasesToStateEntities);e<n.length;e++){var i=n[e],a=this.resolvedAliasesToStateEntities[i],r=this.stateControllerHolder().getEntityId(a.entityParamName),o=a.entityId;Object(l.r)(r,o)||(t.push(i),this.setAliasUnresolved(i))}t.length&&this.entityAliasesChangedSubject.next(t)},t.prototype.setAliasUnresolved=function(t){delete this.resolvedAliases[t],delete this.resolvedAliasesObservable[t],delete this.resolvedAliasesToStateEntities[t]},t.prototype.getEntityAliases=function(){return this.entityAliases},t.prototype.getFilters=function(){return this.filters},t.prototype.getFilterInfo=function(t){return this.userFilters[t]?this.userFilters[t]:this.filters[t]},t.prototype.getKeyFilters=function(t){var e=this.getFilterInfo(t);return e?Object(u.z)(e):[]},t.prototype.getEntityAliasId=function(t){for(var e=0,n=Object.keys(this.entityAliases);e<n.length;e++){var i=n[e];if(this.entityAliases[i].alias===t)return i}return null},t.prototype.getAliasInfo=function(t){var e=this,n=this.resolvedAliases[t];if(n)return Object(r.a)(n);if(this.resolvedAliasesObservable[t])return this.resolvedAliasesObservable[t];var i=new o.a;this.resolvedAliasesObservable[t]=i.asObservable();var a=this.entityAliases[t];if(!a){i.error(null);var s=this.resolvedAliasesObservable[t];return delete this.resolvedAliasesObservable[t],s}return this.entityService.resolveAlias(a,this.stateControllerHolder().getStateParams()).subscribe((function(n){e.resolvedAliases[t]=n,delete e.resolvedAliasesObservable[t],n.stateEntity&&(e.resolvedAliasesToStateEntities[t]={entityParamName:n.entityParamName,entityId:e.stateControllerHolder().getEntityId(n.entityParamName)}),e.entityAliasResolvedSubject.next(t),i.next(n),i.complete()}),(function(){i.error(null),delete e.resolvedAliasesObservable[t]})),(n=this.resolvedAliases[t])?Object(r.a)(n):this.resolvedAliasesObservable[t]},t.prototype.resolveSingleEntityInfo=function(t){var e=this;return this.getAliasInfo(t).pipe(Object(d.b)((function(t){return t.resolveMultiple?t.entityFilter?e.entityService.findSingleEntityInfoByEntityFilter(t.entityFilter,{ignoreLoading:!0,ignoreErrors:!0}):Object(r.a)(null):Object(r.a)(t.currentEntity)})))},t.prototype.resolveDatasource=function(t,e){var n=this;void 0===e&&(e=!1);var i=Object(l.e)(t);return i.type===s.a.entity||i.type===s.a.entityCount?(i.filterId&&(i.keyFilters=this.getKeyFilters(i.filterId)),i.entityAliasId?this.getAliasInfo(i.entityAliasId).pipe(Object(d.b)((function(t){return i.aliasName=t.alias,t.entityFilter?t.resolveMultiple?(i.entityFilter=t.entityFilter,e?n.entityService.findSingleEntityInfoByEntityFilter(t.entityFilter,{ignoreLoading:!0,ignoreErrors:!0}).pipe(Object(p.a)((function(t){return t&&Object(u.J)(i,t,!0),i}))):Object(r.a)(i)):(t.currentEntity?Object(u.J)(i,t.currentEntity,!0):t.stateEntity&&(i.unresolvedStateEntity=!0,i.name="Unresolved",i.entityName="Unresolved"),Object(r.a)(i)):(i.unresolvedStateEntity=!0,i.name="Unresolved",i.entityName="Unresolved",Object(r.a)(i))}))):i.entityId&&!i.entityFilter?(i.entityFilter={singleEntity:{id:i.entityId,entityType:i.entityType},type:c.a.singleEntity},Object(r.a)(i)):(i.aliasName=i.entityName,i.name=i.entityName,Object(r.a)(i))):Object(r.a)(i)},t.prototype.resolveAlarmSource=function(t){return this.resolveDatasource(t).pipe(Object(p.a)((function(t){var e;t.type===s.a.function&&(e=t.name&&t.name.length?t.name:s.a.function,t.name=e,t.aliasName=e,t.entityName=e);return t})))},t.prototype.resolveDatasources=function(t,e){var n=this,i=e?[t[0]]:t,r=new Array;return i.forEach((function(t){r.push(n.resolveDatasource(t))})),Object(a.a)(r).pipe(Object(p.a)((function(t){var i=0,a=0;return t.forEach((function(t){var r;t.type===s.a.function||t.type===s.a.entityCount?(t.name&&t.name.length?r=t.name:(t.type===s.a.function?i++:a++,r=n.translate.instant(s.e.get(t.type)),t.type===s.a.function&&i>1?r+=" "+i:t.type===s.a.entityCount&&a>1&&(r+=" "+a)),t.name=r,t.aliasName=r,t.entityName=r):e?t.pageLink=Object(l.e)(u.H):t.pageLink||(t.pageLink=Object(l.e)(u.q))})),t})))},t.prototype.getInstantAliasInfo=function(t){return this.resolvedAliases[t]},t.prototype.updateCurrentAliasEntity=function(t,e){var n=this.resolvedAliases[t];if(n){var i=n.currentEntity;Object(l.r)(e,i)||(n.currentEntity=e,this.entityAliasesChangedSubject.next([t]))}},t.prototype.updateUserFilter=function(t){var e=this.userFilters[t.id];e||(e=this.filters[t.id]),e&&!Object(l.r)(e,t)&&(this.userFilters[t.id]=t,this.filtersChangedSubject.next([t.id]))},t}()},Yhx1:function(t,e,n){"use strict";n.d(e,"a",(function(){return y}));var i=n("fXoL"),a=n("3Pt+"),r=n("8LU1"),o=n("//Q6"),s=n("c1Lj"),l=n("l7P3"),c=n("kmnG"),d=n("sYmb"),p=n("qFsG"),u=n("ofXK");function m(t,e){1&t&&(i["\u0275\u0275elementStart"](0,"mat-error"),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&t&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,1,"admin.number-from-required")," "))}function f(t,e){1&t&&(i["\u0275\u0275elementStart"](0,"mat-error"),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&t&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,1,"admin.phone-number-pattern-twilio")," "))}function h(t,e){1&t&&(i["\u0275\u0275elementStart"](0,"mat-error"),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&t&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,1,"admin.twilio-account-sid-required")," "))}function g(t,e){1&t&&(i["\u0275\u0275elementStart"](0,"mat-error"),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&t&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,1,"admin.twilio-account-token-required")," "))}var y=function(){function t(t,e){this.store=t,this.fb=e,this.phoneNumberPatternTwilio=s.d,this.propagateChange=function(t){}}return Object.defineProperty(t.prototype,"required",{get:function(){return this.requiredValue},set:function(t){this.requiredValue=Object(r.coerceBooleanProperty)(t)},enumerable:!1,configurable:!0}),t.prototype.registerOnChange=function(t){this.propagateChange=t},t.prototype.registerOnTouched=function(t){},t.prototype.ngOnInit=function(){var t=this;this.twilioSmsProviderConfigurationFormGroup=this.fb.group({numberFrom:[null,[a.Validators.required,a.Validators.pattern(s.d)]],accountSid:[null,a.Validators.required],accountToken:[null,a.Validators.required]}),this.twilioSmsProviderConfigurationFormGroup.valueChanges.subscribe((function(){t.updateModel()}))},t.prototype.setDisabledState=function(t){this.disabled=t,this.disabled?this.twilioSmsProviderConfigurationFormGroup.disable({emitEvent:!1}):this.twilioSmsProviderConfigurationFormGroup.enable({emitEvent:!1})},t.prototype.writeValue=function(t){Object(o.o)(t)&&this.twilioSmsProviderConfigurationFormGroup.patchValue(t,{emitEvent:!1})},t.prototype.updateModel=function(){var t=null;this.twilioSmsProviderConfigurationFormGroup.valid&&((t=this.twilioSmsProviderConfigurationFormGroup.value).type=s.a.TWILIO),this.propagateChange(t)},t.\u0275fac=function(e){return new(e||t)(i["\u0275\u0275directiveInject"](l.Store),i["\u0275\u0275directiveInject"](a.FormBuilder))},t.\u0275cmp=i["\u0275\u0275defineComponent"]({type:t,selectors:[["tb-twilio-sms-provider-configuration"]],inputs:{required:"required",disabled:"disabled"},features:[i["\u0275\u0275ProvidersFeature"]([{provide:a.NG_VALUE_ACCESSOR,useExisting:Object(i.forwardRef)((function(){return t})),multi:!0}])],decls:19,vars:9,consts:[[2,"padding-bottom","16px",3,"formGroup"],[1,"mat-block"],["translate",""],["type","tel","required","","matInput","","formControlName","numberFrom",3,"pattern"],[4,"ngIf"],[3,"innerHTML"],["required","","matInput","","formControlName","accountSid"],["required","","type","password","autocomplete","new-password","matInput","","formControlName","accountToken"]],template:function(t,e){1&t&&(i["\u0275\u0275elementStart"](0,"form",0),i["\u0275\u0275elementStart"](1,"mat-form-field",1),i["\u0275\u0275elementStart"](2,"mat-label",2),i["\u0275\u0275text"](3,"admin.number-from"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](4,"input",3),i["\u0275\u0275template"](5,m,3,3,"mat-error",4),i["\u0275\u0275template"](6,f,3,3,"mat-error",4),i["\u0275\u0275element"](7,"mat-hint",5),i["\u0275\u0275pipe"](8,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](9,"mat-form-field",1),i["\u0275\u0275elementStart"](10,"mat-label",2),i["\u0275\u0275text"](11,"admin.twilio-account-sid"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](12,"input",6),i["\u0275\u0275template"](13,h,3,3,"mat-error",4),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](14,"mat-form-field",1),i["\u0275\u0275elementStart"](15,"mat-label",2),i["\u0275\u0275text"](16,"admin.twilio-account-token"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](17,"input",7),i["\u0275\u0275template"](18,g,3,3,"mat-error",4),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()),2&t&&(i["\u0275\u0275property"]("formGroup",e.twilioSmsProviderConfigurationFormGroup),i["\u0275\u0275advance"](4),i["\u0275\u0275property"]("pattern",e.phoneNumberPatternTwilio),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",e.twilioSmsProviderConfigurationFormGroup.get("numberFrom").hasError("required")),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",e.twilioSmsProviderConfigurationFormGroup.get("numberFrom").hasError("pattern")),i["\u0275\u0275advance"](1),i["\u0275\u0275propertyInterpolate"]("innerHTML",i["\u0275\u0275pipeBind1"](8,7,"admin.phone-number-hint-twilio"),i["\u0275\u0275sanitizeHtml"]),i["\u0275\u0275advance"](6),i["\u0275\u0275property"]("ngIf",e.twilioSmsProviderConfigurationFormGroup.get("accountSid").hasError("required")),i["\u0275\u0275advance"](5),i["\u0275\u0275property"]("ngIf",e.twilioSmsProviderConfigurationFormGroup.get("accountToken").hasError("required")))},directives:[a["\u0275angular_packages_forms_forms_y"],a.NgControlStatusGroup,a.FormGroupDirective,c.MatFormField,c.MatLabel,d.TranslateDirective,p.MatInput,a.DefaultValueAccessor,a.RequiredValidator,a.NgControlStatus,a.FormControlName,a.PatternValidator,u.NgIf,c.MatHint,c.MatError],pipes:[d.TranslatePipe],encapsulation:2}),t}();!function(){i["\u0275setClassMetadata"](y,[{type:i.Component,args:[{selector:"tb-twilio-sms-provider-configuration",templateUrl:"./twilio-sms-provider-configuration.component.html",styleUrls:[],providers:[{provide:a.NG_VALUE_ACCESSOR,useExisting:Object(i.forwardRef)((function(){return y})),multi:!0}]}]}],(function(){return[{type:l.Store},{type:a.FormBuilder}]}),{required:[{type:i.Input}],disabled:[{type:i.Input}]})}()},YjEJ:function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var i=n("U3y+"),a=function(t){this.entityType=i.b.DASHBOARD,this.id=t}},Z9d0:function(t,e,n){"use strict";n.d(e,"b",(function(){return s})),n.d(e,"a",(function(){return l}));var i=n("mrSG"),a=n("fXoL"),r=n("jtHE"),o=n("ofXK"),s=function(){function t(){}return t.prototype.ngOnDestroy=function(){},t.\u0275mod=a["\u0275\u0275defineNgModule"]({type:t}),t.\u0275inj=a["\u0275\u0275defineInjector"]({factory:function(e){return new(e||t)}}),t}();!function(){a["\u0275setClassMetadata"](s,[{type:a.NgModule}],null,null)}();var l=function(){function t(t,e){this.compiler=t,this.injector=e,this.dynamicComponentModulesMap=new Map}return t.prototype.createDynamicComponentFactory=function(t,e,l){var c=this,d=new r.a;return n.e(4).then(n.bind(null,"1uSB")).then((function(){var n=c.createDynamicComponent(t,e),r=[o.CommonModule];l&&(r=Object(i.g)(r,l));var p=Object(a.NgModule)({declarations:[n],imports:r})(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(i.d)(e,t),e}(s));try{c.compiler.compileModuleAsync(p).then((function(t){var e=t.create(c.injector),i=e.componentFactoryResolver.resolveComponentFactory(n);c.dynamicComponentModulesMap.set(i,{moduleRef:e,moduleType:t.moduleType}),d.next(i),d.complete()})).catch((function(t){d.error(t)}))}catch(u){d.error(u)}})),d.asObservable()},t.prototype.destroyDynamicComponentFactory=function(t){var e=this.dynamicComponentModulesMap.get(t);e&&(e.moduleRef.destroy(),this.compiler.clearCacheFor(e.moduleType),this.dynamicComponentModulesMap.delete(t))},t.prototype.createDynamicComponent=function(t,e){return Object(a.Component)({template:e})(t)},t.\u0275fac=function(e){return new(e||t)(a["\u0275\u0275inject"](a.Compiler),a["\u0275\u0275inject"](a.Injector))},t.\u0275prov=a["\u0275\u0275defineInjectable"]({token:t,factory:t.\u0275fac,providedIn:"root"}),t}();!function(){a["\u0275setClassMetadata"](l,[{type:a.Injectable,args:[{providedIn:"root"}]}],(function(){return[{type:a.Compiler},{type:a.Injector}]}),null)}()},aMoz:function(t,e,n){"use strict";n.d(e,"a",(function(){return I}));var i=n("mrSG"),a=n("fXoL"),r=n("FKr1"),o=n("0IaG"),s=n("gmuX"),l=n("OiFK"),c=n("//Q6"),d=n("4j5O"),p=n("oPR/"),u=n("l7P3"),m=n("tyNb"),f=n("3Pt+"),h=n("sYmb"),g=n("/t3+"),y=n("XiUz"),b=n("bTqV"),v=n("NFeN"),x=n("ofXK"),C=n("bSwM"),S=n("znSr"),w=n("bv9b");function E(t,e){1&t&&a["\u0275\u0275element"](0,"mat-progress-bar",17)}var I=function(t){function e(e,n,i,a,r,o,s,l,d,p){var u=t.call(this,e,n,r)||this;u.store=e,u.router=n,u.data=i,u.errorStateMatcher=a,u.dialogRef=r,u.fb=o,u.utils=s,u.dashboardUtils=l,u.translate=d,u.dialog=p,u.submitted=!1,u.layouts=u.data.layouts,u.layoutsFormGroup=u.fb.group({main:[{value:Object(c.n)(u.layouts.main),disabled:!0},[]],right:[Object(c.n)(u.layouts.right),[]]});for(var m=0,f=Object.keys(u.layoutsFormGroup.controls);m<f.length;m++){var h=f[m];u.layoutsFormGroup.controls[h];u.layouts[h]||(u.layouts[h]=u.dashboardUtils.createDefaultLayoutData())}return u}return Object(i.d)(e,t),e.prototype.ngOnInit=function(){},e.prototype.isErrorState=function(t,e){var n=this.errorStateMatcher.isErrorState(t,e),i=!!(t&&t.invalid&&this.submitted);return n||i},e.prototype.openLayoutSettings=function(t){var e=this,n=Object(c.e)(this.layouts[t].gridSettings);this.dialog.open(p.a,{disableClose:!0,panelClass:["tb-dialog","tb-fullscreen-dialog"],data:{settings:null,gridSettings:n}}).afterClosed().subscribe((function(n){n&&n.gridSettings&&(e.dashboardUtils.updateLayoutSettings(e.layouts[t],n.gridSettings),e.layoutsFormGroup.markAsDirty())}))},e.prototype.cancel=function(){this.dialogRef.close(null)},e.prototype.save=function(){this.submitted=!0;for(var t=0,e=Object.keys(this.layoutsFormGroup.controls);t<e.length;t++){var n=e[t];this.layoutsFormGroup.controls[n].value||delete this.layouts[n]}this.dialogRef.close(this.layouts)},e.\u0275fac=function(t){return new(t||e)(a["\u0275\u0275directiveInject"](u.Store),a["\u0275\u0275directiveInject"](m.Router),a["\u0275\u0275directiveInject"](o.MAT_DIALOG_DATA),a["\u0275\u0275directiveInject"](r.ErrorStateMatcher,4),a["\u0275\u0275directiveInject"](o.MatDialogRef),a["\u0275\u0275directiveInject"](f.FormBuilder),a["\u0275\u0275directiveInject"](l.a),a["\u0275\u0275directiveInject"](d.a),a["\u0275\u0275directiveInject"](h.TranslateService),a["\u0275\u0275directiveInject"](o.MatDialog))},e.\u0275cmp=a["\u0275\u0275defineComponent"]({type:e,selectors:[["tb-manage-dashboard-layouts-dialog"]],features:[a["\u0275\u0275ProvidersFeature"]([{provide:r.ErrorStateMatcher,useExisting:e}]),a["\u0275\u0275InheritDefinitionFeature"]],decls:36,vars:26,consts:[[3,"formGroup","ngSubmit"],["color","primary"],["translate",""],["fxFlex",""],["mat-button","","mat-icon-button","","type","button",3,"click"],[1,"material-icons"],["color","warn","mode","indeterminate",4,"ngIf"],["mat-dialog-content",""],["fxLayout","column","fxLayoutGap","8px",3,"disabled"],["fxLayout","row","fxLayoutAlign","start center","fxLayoutGap","8px"],["fxFlex","","formControlName","main"],["fxFlex","","formControlName","right"],["fxFlex","","type","button","mat-raised-button","","color","primary",1,"tb-layout-button",3,"click"],["fxFlex","","type","button","mat-raised-button","","color","primary",1,"tb-layout-button",3,"fxShow","click"],["mat-dialog-actions","","fxLayoutAlign","end center"],["mat-button","","color","primary","type","button","cdkFocusInitial","",3,"disabled","click"],["mat-raised-button","","color","primary","type","submit",3,"disabled"],["color","warn","mode","indeterminate"]],template:function(t,e){1&t&&(a["\u0275\u0275elementStart"](0,"form",0),a["\u0275\u0275listener"]("ngSubmit",(function(){return e.save()})),a["\u0275\u0275elementStart"](1,"mat-toolbar",1),a["\u0275\u0275elementStart"](2,"h2",2),a["\u0275\u0275text"](3,"layout.manage"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](4,"span",3),a["\u0275\u0275elementStart"](5,"button",4),a["\u0275\u0275listener"]("click",(function(){return e.cancel()})),a["\u0275\u0275elementStart"](6,"mat-icon",5),a["\u0275\u0275text"](7,"close"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275template"](8,E,1,0,"mat-progress-bar",6),a["\u0275\u0275pipe"](9,"async"),a["\u0275\u0275elementStart"](10,"div",7),a["\u0275\u0275elementStart"](11,"fieldset",8),a["\u0275\u0275pipe"](12,"async"),a["\u0275\u0275elementStart"](13,"div",9),a["\u0275\u0275elementStart"](14,"mat-checkbox",10),a["\u0275\u0275text"](15),a["\u0275\u0275pipe"](16,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](17,"mat-checkbox",11),a["\u0275\u0275text"](18),a["\u0275\u0275pipe"](19,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](20,"div",9),a["\u0275\u0275elementStart"](21,"button",12),a["\u0275\u0275listener"]("click",(function(){return e.openLayoutSettings("main")})),a["\u0275\u0275elementStart"](22,"span",2),a["\u0275\u0275text"](23,"layout.main"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](24,"button",13),a["\u0275\u0275listener"]("click",(function(){return e.openLayoutSettings("right")})),a["\u0275\u0275elementStart"](25,"span",2),a["\u0275\u0275text"](26,"layout.right"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](27,"div",14),a["\u0275\u0275elementStart"](28,"button",15),a["\u0275\u0275listener"]("click",(function(){return e.cancel()})),a["\u0275\u0275pipe"](29,"async"),a["\u0275\u0275text"](30),a["\u0275\u0275pipe"](31,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](32,"button",16),a["\u0275\u0275pipe"](33,"async"),a["\u0275\u0275text"](34),a["\u0275\u0275pipe"](35,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()),2&t&&(a["\u0275\u0275property"]("formGroup",e.layoutsFormGroup),a["\u0275\u0275advance"](8),a["\u0275\u0275property"]("ngIf",a["\u0275\u0275pipeBind1"](9,10,e.isLoading$)),a["\u0275\u0275advance"](3),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](12,12,e.isLoading$)),a["\u0275\u0275advance"](4),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](16,14,"layout.main")," "),a["\u0275\u0275advance"](3),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](19,16,"layout.right")," "),a["\u0275\u0275advance"](6),a["\u0275\u0275property"]("fxShow",e.layoutsFormGroup.get("right").value),a["\u0275\u0275advance"](4),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](29,18,e.isLoading$)),a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](31,20,"action.cancel")," "),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](33,22,e.isLoading$)||e.layoutsFormGroup.invalid||!e.layoutsFormGroup.dirty),a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](35,24,"action.save")," "))},directives:[f["\u0275angular_packages_forms_forms_y"],f.NgControlStatusGroup,f.FormGroupDirective,g.MatToolbar,h.TranslateDirective,y.b,b.MatButton,v.MatIcon,x.NgIf,o.MatDialogContent,y.f,y.g,y.e,C.MatCheckbox,f.NgControlStatus,f.FormControlName,S.d,o.MatDialogActions,w.MatProgressBar],pipes:[x.AsyncPipe,h.TranslatePipe],styles:["[_nghost-%COMP%]   button.tb-layout-button[_ngcontent-%COMP%]{width:100%;height:100%;padding:40px 20px}[_nghost-%COMP%]  .mat-button-wrapper{line-height:18px}[_nghost-%COMP%]  .mat-button-wrapper span{font-size:18px;font-weight:400;white-space:normal}"]}),e}(s.a);!function(){a["\u0275setClassMetadata"](I,[{type:a.Component,args:[{selector:"tb-manage-dashboard-layouts-dialog",templateUrl:"./manage-dashboard-layouts-dialog.component.html",providers:[{provide:r.ErrorStateMatcher,useExisting:I}],styleUrls:["../../../components/dashboard/layout-button.scss"]}]}],(function(){return[{type:u.Store},{type:m.Router},{type:void 0,decorators:[{type:a.Inject,args:[o.MAT_DIALOG_DATA]}]},{type:r.ErrorStateMatcher,decorators:[{type:a.SkipSelf}]},{type:o.MatDialogRef},{type:f.FormBuilder},{type:l.a},{type:d.a},{type:h.TranslateService},{type:o.MatDialog}]}),null)}()},aYVl:function(t,e,n){"use strict";n.d(e,"a",(function(){return w}));var i=n("mrSG"),a=n("fXoL"),r=n("RxGS"),o=n("l7P3"),s=n("/t3+"),l=n("ofXK"),c=n("znSr"),d=n("XiUz"),p=n("bTqV"),u=n("NFeN"),m=n("Qu3c"),f=n("sYmb");function h(t,e){if(1&t){var n=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementStart"](0,"div",12),a["\u0275\u0275elementStart"](1,"button",8),a["\u0275\u0275listener"]("click",(function(){return a["\u0275\u0275restoreView"](n),a["\u0275\u0275nextContext"]().onToggleSearch()})),a["\u0275\u0275elementStart"](2,"mat-icon",9),a["\u0275\u0275text"](3,"arrow_back"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](4,"div",13),a["\u0275\u0275projection"](5,4),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()}if(2&t){var i=a["\u0275\u0275nextContext"]();a["\u0275\u0275property"]("fxHide",!i.showSearchPane)}}function g(t,e){if(1&t){var n=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementStart"](0,"button",8),a["\u0275\u0275listener"]("click",(function(){return a["\u0275\u0275restoreView"](n),a["\u0275\u0275nextContext"]().onToggleSearch()})),a["\u0275\u0275elementStart"](1,"mat-icon",9),a["\u0275\u0275text"](2,"search"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()}}var y=function(t){return{"tb-hide":t}};function b(t,e){if(1&t){var n=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementStart"](0,"section",14),a["\u0275\u0275elementStart"](1,"button",15),a["\u0275\u0275listener"]("click",(function(){return a["\u0275\u0275restoreView"](n),a["\u0275\u0275nextContext"]().onApplyDetails()})),a["\u0275\u0275pipe"](2,"async"),a["\u0275\u0275pipe"](3,"translate"),a["\u0275\u0275elementStart"](4,"mat-icon",9),a["\u0275\u0275text"](5,"done"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](6,"button",16),a["\u0275\u0275listener"]("click",(function(){return a["\u0275\u0275restoreView"](n),a["\u0275\u0275nextContext"]().onToggleDetailsEditMode()})),a["\u0275\u0275pipe"](7,"async"),a["\u0275\u0275pipe"](8,"translate"),a["\u0275\u0275elementStart"](9,"mat-icon",9),a["\u0275\u0275text"](10),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()}if(2&t){var i=a["\u0275\u0275nextContext"]();a["\u0275\u0275advance"](1),a["\u0275\u0275propertyInterpolate"]("matTooltip",a["\u0275\u0275pipeBind1"](3,8,"action.apply-changes")),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](2,6,i.isLoading$)||(null==i.theForm?null:i.theForm.invalid)||!(null!=i.theForm&&i.theForm.dirty))("ngClass",a["\u0275\u0275pureFunction1"](14,y,!i.isEdit)),a["\u0275\u0275advance"](5),a["\u0275\u0275propertyInterpolate"]("matTooltip",a["\u0275\u0275pipeBind1"](8,12,i.isAlwaysEdit?"action.decline-changes":"details.toggle-edit-mode")),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](7,10,i.isLoading$)||i.isAlwaysEdit&&!(null!=i.theForm&&i.theForm.dirty)),a["\u0275\u0275advance"](4),a["\u0275\u0275textInterpolate"](i.isEdit?"close":"edit")}}var v=[[["",8,"prefix-title-buttons"]],[["",8,"header-pane"]],[["",8,"details-buttons"]],"*",[["",8,"search-pane"]]],x=function(t){return{height:t}},C=function(t){return{backgroundColor:t}},S=[".prefix-title-buttons",".header-pane",".details-buttons","*",".search-pane"],w=function(t){function e(e){var n=t.call(this,e)||this;return n.store=e,n.headerHeightPx=100,n.headerTitle="",n.headerSubtitle="",n.isReadOnly=!1,n.isAlwaysEdit=!1,n.isShowSearch=!1,n.backgroundColor="#FFF",n.closeDetails=new a.EventEmitter,n.toggleDetailsEditMode=new a.EventEmitter,n.applyDetails=new a.EventEmitter,n.closeSearch=new a.EventEmitter,n.isEditValue=!1,n.showSearchPane=!1,n.isEditChange=new a.EventEmitter,n}return Object(i.d)(e,t),Object.defineProperty(e.prototype,"theForm",{get:function(){return this.theFormValue},set:function(t){this.theFormValue=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isEdit",{get:function(){return this.isAlwaysEdit||this.isEditValue},set:function(t){this.isEditValue=t,this.isEditChange.emit(this.isEditValue)},enumerable:!1,configurable:!0}),e.prototype.onCloseDetails=function(){this.closeDetails.emit()},e.prototype.onToggleDetailsEditMode=function(){this.isAlwaysEdit||(this.isEdit=!this.isEdit),this.toggleDetailsEditMode.emit(this.isEditValue)},e.prototype.onApplyDetails=function(){this.theForm&&this.theForm.valid&&this.applyDetails.emit()},e.prototype.onToggleSearch=function(){this.showSearchPane=!this.showSearchPane,this.showSearchPane||this.closeSearch.emit()},e.\u0275fac=function(t){return new(t||e)(a["\u0275\u0275directiveInject"](o.Store))},e.\u0275cmp=a["\u0275\u0275defineComponent"]({type:e,selectors:[["tb-details-panel"]],inputs:{headerHeightPx:"headerHeightPx",headerTitle:"headerTitle",headerSubtitle:"headerSubtitle",isReadOnly:"isReadOnly",isAlwaysEdit:"isAlwaysEdit",isShowSearch:"isShowSearch",backgroundColor:"backgroundColor",theForm:"theForm",isEdit:"isEdit"},outputs:{closeDetails:"closeDetails",toggleDetailsEditMode:"toggleDetailsEditMode",applyDetails:"applyDetails",closeSearch:"closeSearch",isEditChange:"isEditChange"},features:[a["\u0275\u0275InheritDefinitionFeature"]],ngContentSelectors:S,decls:21,vars:12,consts:[["color","primary",1,"details-toolbar",3,"ngStyle"],["fxLayout","row","fxLayoutAlign","start center",1,"mat-toolbar-tools",2,"height","100%"],["fxFlex","","fxLayout","column","fxLayoutAlign","start start",1,"mat-toolbar-tools","tb-details-title-header",3,"fxHide"],["fxLayout","row","fxLayoutAlign","start center",1,"tb-details-title"],[1,"tb-details-subtitle"],[2,"width","100%"],["fxLayout","row","fxLayoutAlign","start center","style","width: 100%;",3,"fxHide",4,"ngIf"],["mat-button","","mat-icon-button","",3,"click",4,"ngIf"],["mat-button","","mat-icon-button","",3,"click"],[1,"material-icons"],["fxLayout","row","class","layout-wrap tb-header-buttons",4,"ngIf"],["fxFlex","",1,"mat-content",3,"ngStyle"],["fxLayout","row","fxLayoutAlign","start center",2,"width","100%",3,"fxHide"],[2,"width","100%","margin","0 20px"],["fxLayout","row",1,"layout-wrap","tb-header-buttons"],["mat-fab","","matTooltipPosition","above","color","accent",1,"tb-btn-header","mat-fab-bottom-right",3,"disabled","matTooltip","ngClass","click"],["mat-fab","","matTooltipPosition","above","color","accent",1,"tb-btn-header","mat-fab-bottom-right",3,"disabled","matTooltip","click"]],template:function(t,e){1&t&&(a["\u0275\u0275projectionDef"](v),a["\u0275\u0275elementStart"](0,"header"),a["\u0275\u0275elementStart"](1,"mat-toolbar",0),a["\u0275\u0275elementStart"](2,"div",1),a["\u0275\u0275elementStart"](3,"div",2),a["\u0275\u0275elementStart"](4,"div",3),a["\u0275\u0275projection"](5),a["\u0275\u0275elementStart"](6,"span"),a["\u0275\u0275text"](7),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](8,"span",4),a["\u0275\u0275text"](9),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](10,"span",5),a["\u0275\u0275projection"](11,1),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275template"](12,h,6,1,"div",6),a["\u0275\u0275template"](13,g,3,0,"button",7),a["\u0275\u0275projection"](14,2),a["\u0275\u0275elementStart"](15,"button",8),a["\u0275\u0275listener"]("click",(function(){return e.onCloseDetails()})),a["\u0275\u0275elementStart"](16,"mat-icon",9),a["\u0275\u0275text"](17,"close"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275template"](18,b,11,16,"section",10),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](19,"div",11),a["\u0275\u0275projection"](20,3),a["\u0275\u0275elementEnd"]()),2&t&&(a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngStyle",a["\u0275\u0275pureFunction1"](8,x,e.headerHeightPx+"px")),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("fxHide",e.showSearchPane),a["\u0275\u0275advance"](4),a["\u0275\u0275textInterpolate"](e.headerTitle),a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate"](e.headerSubtitle),a["\u0275\u0275advance"](3),a["\u0275\u0275property"]("ngIf",e.isShowSearch),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",e.isShowSearch&&!e.showSearchPane),a["\u0275\u0275advance"](5),a["\u0275\u0275property"]("ngIf",!e.isReadOnly),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngStyle",a["\u0275\u0275pureFunction1"](10,C,e.backgroundColor)))},directives:[s.MatToolbar,l.NgStyle,c.e,d.f,d.e,d.b,c.d,l.NgIf,p.MatButton,u.MatIcon,m.MatTooltip,l.NgClass,c.b],pipes:[l.AsyncPipe,f.TranslatePipe],styles:["[_nghost-%COMP%]{width:100%;height:100%;display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column}[_nghost-%COMP%]   .mat-toolbar.details-toolbar[_ngcontent-%COMP%]{padding:0}[_nghost-%COMP%]     .mat-toolbar-tools{height:100%;min-height:60px;max-height:120px}[_nghost-%COMP%]     .mat-toolbar-tools.tb-details-title-header{min-width:0}[_nghost-%COMP%]     .tb-details-title{width:inherit;margin:20px 8px 0 0;overflow:hidden;font-size:1rem;font-weight:400;text-overflow:ellipsis;white-space:nowrap}@media screen and (min-width:960px){[_nghost-%COMP%]     .tb-details-title{font-size:1.5rem}}[_nghost-%COMP%]     .tb-details-subtitle{width:inherit;margin:10px 0;overflow:hidden;font-size:1rem;text-overflow:ellipsis;white-space:nowrap;opacity:.8}[_nghost-%COMP%]     tb-dashboard .tb-dashboard-content{background-color:#cfd8dc!important}"]}),e}(r.a);!function(){a["\u0275setClassMetadata"](w,[{type:a.Component,args:[{selector:"tb-details-panel",templateUrl:"./details-panel.component.html",styleUrls:["./details-panel.component.scss"]}]}],(function(){return[{type:o.Store}]}),{headerHeightPx:[{type:a.Input}],headerTitle:[{type:a.Input}],headerSubtitle:[{type:a.Input}],isReadOnly:[{type:a.Input}],isAlwaysEdit:[{type:a.Input}],isShowSearch:[{type:a.Input}],backgroundColor:[{type:a.Input}],theForm:[{type:a.Input}],closeDetails:[{type:a.Output}],toggleDetailsEditMode:[{type:a.Output}],applyDetails:[{type:a.Output}],closeSearch:[{type:a.Output}],isEditChange:[{type:a.Output}],isEdit:[{type:a.Input}]})}()},bHFI:function(t,e,n){"use strict";n.d(e,"d",(function(){return a})),n.d(e,"b",(function(){return r})),n.d(e,"c",(function(){return o})),n.d(e,"e",(function(){return s})),n.d(e,"a",(function(){return l}));var i=n("mrSG");function a(){return{schema:{type:"object",properties:{},required:[]},form:[],groupInfoes:[]}}function r(t,e){var n;t.groupInfoes.push({formIndex:(null===(n=t.groupInfoes)||void 0===n?void 0:n.length)||0,GroupTitle:e})}function o(t,e){Object.assign(t.schema.properties,e.schema.properties),t.schema.required=t.schema.required.concat(e.schema.required),t.form.push(e.form)}function s(t){return t.reduce((function(t,e){return{schema:{properties:Object(i.a)(Object(i.a)({},t.schema.properties),e.schema.properties),required:Object(i.g)(t.schema.required,e.schema.required)},form:Object(i.g)(t.form,e.form)}}),{schema:{type:"object",properties:{},required:[]},form:[],groupInfoes:[]})}function l(t,e,n){return void 0===n&&(n=[]),t.form=t.form.map((function(t){if(!n.includes(t)&&!n.includes(t.key)){if("string"==typeof t)return{key:t,condition:e};"object"==typeof t&&(t.condition?t.condition+=" && "+e:t.condition=e)}return t})),t}},bkji:function(t,e,n){"use strict";(function(t){n.d(e,"a",(function(){return j}));var i=n("mrSG"),a=n("fXoL"),r=n("RxGS"),o=(n("0G7Z"),n("0lYY")),s=n("OiFK"),l=n("Neop"),c=n("xgIS"),d=n("Kj3r"),p=n("/uUt"),u=n("vkgz"),m=n("fr2l"),f=n("U3y+"),h=n("//Q6"),g=n("T7OX"),y=n("MBk6"),b=n("l7P3"),v=n("rDax"),x=n("rezs"),C=n("XiUz"),S=n("/t3+"),w=n("znSr"),E=n("bTqV"),I=n("Qu3c"),O=n("NFeN"),T=n("kmnG"),M=n("qFsG"),F=n("3Pt+"),P=n("NOb7"),D=n("sYmb"),k=["searchInput"],j=function(e){function n(t,n,i,a,r){var s=e.call(this,t)||this;return s.store=t,s.elementRef=n,s.overlay=i,s.viewContainerRef=a,s.utils=r,s.toastTargetId="entities-hierarchy-"+s.utils.guid(),s.textSearchMode=!1,s.textSearch=null,s.nodeEditCallbacks={},s.nodesMap={},s.pendingUpdateNodeTasks={},s.nodeIdCounter=0,s.searchAction={name:"action.search",show:!0,icon:"search",onAction:function(){s.enterFilterMode()}},s.loadNodes=function(t,e){if("#"===t.id){var n=[],i=0;s.datasources.forEach((function(t,e){var a=s.subscription.data.slice(i);n.push(s.datasourceToNode(t,a)),i+=t.dataKeys.length})),e(s.prepareNodes(n))}else t.data&&t.data.nodeCtx.entity&&t.data.nodeCtx.entity.id&&t.data.datasource.type===o.a.entity&&"function"!==t.data.nodeCtx.entity.id.entityType?s.loadChildren(t,t.data.datasource,e):e([])},s.onNodeSelected=function(t,e){var n;if(-1!==(n=t?t.id:-1)){var i=s.nodesMap[n];if(i){var a=s.ctx.actionsApi.getActionDescriptors("nodeSelected");if(a.length){var r=i.data.nodeCtx.entity;s.ctx.actionsApi.handleWidgetAction(e,a[0],r.id,r.name,{nodeCtx:i.data.nodeCtx})}}}},s.onNodesInserted=function(t){t&&t.forEach((function(t){var e=s.pendingUpdateNodeTasks[t];e&&(e(),delete s.pendingUpdateNodeTasks[t])}))},s.searchCallback=function(t,e){var n=s.nodesMap[e.id];return!(!n||!n.data.searchText)&&n.data.searchText.includes(t.toLowerCase())},s}return Object(i.d)(n,e),n.prototype.ngOnInit=function(){this.ctx.$scope.entitiesHierarchyWidget=this,this.settings=this.ctx.settings,this.widgetConfig=this.ctx.widgetConfig,this.subscription=this.ctx.defaultSubscription,this.datasources=this.subscription.datasources,this.initializeConfig(),this.ctx.updateWidgetParams()},n.prototype.ngAfterViewInit=function(){var t=this;Object(c.a)(this.searchInputField.nativeElement,"keyup").pipe(Object(d.a)(150),Object(p.a)(),Object(u.a)((function(){t.updateSearchNodes()}))).subscribe()},n.prototype.onDataUpdated=function(){this.updateNodeData(this.subscription.data)},n.prototype.initializeConfig=function(){this.ctx.widgetActions=[this.searchAction];var e={entity:{id:{entityType:f.b.DEVICE,id:"123"},name:"TEST DEV1"},data:{},level:2},n=Object(h.e)(e);n.level=1,e.parentNodeCtx=n,this.nodeRelationQueryFunction=Object(g.f)(this.settings.nodeRelationQueryFunction,"nodeCtx",e),this.nodeIconFunction=Object(g.f)(this.settings.nodeIconFunction,"nodeCtx",e),this.nodeTextFunction=Object(g.f)(this.settings.nodeTextFunction,"nodeCtx",e),this.nodeDisabledFunction=Object(g.f)(this.settings.nodeDisabledFunction,"nodeCtx",e),this.nodeOpenedFunction=Object(g.f)(this.settings.nodeOpenedFunction,"nodeCtx",e),this.nodeHasChildrenFunction=Object(g.f)(this.settings.nodeHasChildrenFunction,"nodeCtx",e);var i=Object(h.e)(e);i.entity.name="TEST DEV2",this.nodesSortFunction=Object(g.f)(this.settings.nodesSortFunction,"nodeCtx1,nodeCtx2",e,i),this.nodeRelationQueryFunction=this.nodeRelationQueryFunction||g.c,this.nodeIconFunction=this.nodeIconFunction||g.a,this.nodeTextFunction=this.nodeTextFunction||function(t){return t.entity.name},this.nodeDisabledFunction=this.nodeDisabledFunction||function(){return!1},this.nodeOpenedFunction=this.nodeOpenedFunction||g.b,this.nodeHasChildrenFunction=this.nodeHasChildrenFunction||function(){return!0},this.nodesSortFunction=this.nodesSortFunction||g.d;var a=Object(m.a)(this.widgetConfig),r=new l.a;r.testMode=!1;var o="entities-hierarchy-"+Object(h.l)(a);r.cssPreviewNamespace=o,r.createStyleElement(o,a),t(this.elementRef.nativeElement).addClass(o)},n.prototype.enterFilterMode=function(){var t=this;this.textSearchMode=!0,this.textSearch="",this.ctx.hideTitlePanel=!0,this.ctx.detectChanges(!0),setTimeout((function(){t.searchInputField.nativeElement.focus(),t.searchInputField.nativeElement.setSelectionRange(0,0)}),10)},n.prototype.exitFilterMode=function(){this.textSearchMode=!1,this.textSearch=null,this.updateSearchNodes(),this.ctx.hideTitlePanel=!1,this.ctx.detectChanges(!0)},n.prototype.updateSearchNodes=function(){null!=this.textSearch?this.nodeEditCallbacks.search(this.textSearch):this.nodeEditCallbacks.clearSearch()},n.prototype.updateNodeData=function(t){var e=this,n=[];t&&t.forEach((function(t){var i=t.datasource;if(i.nodeId){var a=e.nodesMap[i.nodeId],r=t.dataKey.label,o=void 0;t.data&&t.data.length&&(o=t.data[0][1]),a.data.nodeCtx.data[r]!==o&&(-1===n.indexOf(i.nodeId)&&n.push(i.nodeId),a.data.nodeCtx.data[r]=o)}})),n.forEach((function(t){e.nodeEditCallbacks.getNode(t)?e.updateNodeStyle(e.nodesMap[t]):e.pendingUpdateNodeTasks[t]=function(){e.updateNodeStyle(e.nodesMap[t])}}))},n.prototype.updateNodeStyle=function(t){var e=this.prepareNodeText(t);t.text!==e&&(t.text=e,this.nodeEditCallbacks.updateNode(t.id,t.text));var n=this.nodeDisabledFunction(t.data.nodeCtx);t.state.disabled!==n&&(t.state.disabled=n,t.state.disabled?this.nodeEditCallbacks.disableNode(t.id):this.nodeEditCallbacks.enableNode(t.id));var i=this.nodeHasChildrenFunction(t.data.nodeCtx);t.children!==i&&(t.children=i,this.nodeEditCallbacks.setNodeHasChildren(t.id,t.children))},n.prototype.prepareNodes=function(t){var e=this;return(t=t.filter((function(t){return null!==t}))).sort((function(t,n){return e.nodesSortFunction(t.data.nodeCtx,n.data.nodeCtx)})),t},n.prototype.prepareNodeText=function(t){var e=this.prepareNodeIcon(t.data.nodeCtx),n=this.nodeTextFunction(t.data.nodeCtx);return t.data.searchText=n?n.replace(/<[^>]+>/g,"").toLowerCase():"",e+n},n.prototype.prepareNodeIcon=function(t){var e=this.nodeIconFunction(t);return e?("default"===e&&(e=Object(g.a)(t)),e&&"default"!==e&&(e.iconUrl||e.materialIcon)?e.materialIcon?Object(g.g)(e.materialIcon):Object(g.e)(e.iconUrl):""):""},n.prototype.datasourceToNode=function(t,e,n){var i={id:++this.nodeIdCounter+""};this.nodesMap[i.id]=i,t.nodeId=i.id,i.icon=!1;var a={parentNodeCtx:n,entity:{id:{id:t.entityId,entityType:t.entityType},name:t.entityName,label:t.entityLabel?t.entityLabel:t.entityName},data:{}};return t.dataKeys.forEach((function(t,n){var i=e[n].data;i&&i.length&&i[0].length>1?a.data[t.label]=i[0][1]:a.data[t.label]=""})),a.level=n?n.level+1:1,i.data={datasource:t,nodeCtx:a},i.state={disabled:this.nodeDisabledFunction(i.data.nodeCtx),opened:this.nodeOpenedFunction(i.data.nodeCtx)},i.text=this.prepareNodeText(i),i.children=this.nodeHasChildrenFunction(i.data.nodeCtx),i},n.prototype.loadChildren=function(t,e,n){var i=this,a=t.data.nodeCtx;a.childrenNodesLoaded=!1;var r=this.prepareNodeRelationsQueryFilter(a),s={dataKeys:e.dataKeys,type:o.a.entity,filterId:e.filterId,entityFilter:r},l={type:o.k.latest,datasources:[s],callbacks:{onSubscriptionMessage:function(t,e){i.ctx.showToast(e.severity,e.message,void 0,"bottom","left",i.toastTargetId)},onInitialPageDataChanged:function(e){i.ctx.subscriptionApi.removeSubscription(e.id),i.nodeEditCallbacks.refreshNode(t.id)},onDataUpdated:function(t){if(a.childrenNodesLoaded)i.updateNodeData(t.data);else{var e=t.datasourcePages[0],r=t.dataPages[0],o=[];e.data.forEach((function(t,e){o.push(i.datasourceToNode(t,r.data[e]))})),a.childrenNodesLoaded=!0,n(i.prepareNodes(o))}}}};this.ctx.subscriptionApi.createSubscription(l,!0)},n.prototype.prepareNodeRelationQuery=function(t){var e=this.nodeRelationQueryFunction(t);return e&&"default"===e&&(e=Object(g.c)(t)),e},n.prototype.prepareNodeRelationsQueryFilter=function(t){var e=this.prepareNodeRelationQuery(t);return{rootEntity:{id:e.parameters.rootId,entityType:e.parameters.rootType},direction:e.parameters.direction,filters:e.filters,maxLevel:e.parameters.maxLevel,fetchLastLevelOnly:e.parameters.fetchLastLevelOnly,type:y.a.relationsQuery}},n.\u0275fac=function(t){return new(t||n)(a["\u0275\u0275directiveInject"](b.Store),a["\u0275\u0275directiveInject"](a.ElementRef),a["\u0275\u0275directiveInject"](v.Overlay),a["\u0275\u0275directiveInject"](a.ViewContainerRef),a["\u0275\u0275directiveInject"](s.a))},n.\u0275cmp=a["\u0275\u0275defineComponent"]({type:n,selectors:[["tb-entities-hierarchy-widget"]],viewQuery:function(t,e){var n;(1&t&&a["\u0275\u0275viewQuery"](k,!0),2&t)&&(a["\u0275\u0275queryRefresh"](n=a["\u0275\u0275loadQuery"]())&&(e.searchInputField=n.first))},inputs:{ctx:"ctx"},features:[a["\u0275\u0275InheritDefinitionFeature"]],decls:20,vars:17,consts:[["tb-toast","",1,"tb-entities-hierarchy","tb-absolute-fill",3,"toastTarget"],["fxFlex","","fxLayout","column",1,"tb-absolute-fill"],[1,"mat-table-toolbar",3,"fxShow"],[1,"mat-toolbar-tools"],["mat-button","","mat-icon-button","","matTooltipPosition","above",3,"matTooltip"],["fxFlex",""],["matInput","",3,"ngModel","placeholder","ngModelChange"],["searchInput",""],["mat-button","","mat-icon-button","","matTooltipPosition","above",3,"matTooltip","click"],["fxFlex","",1,"tb-entities-nav-tree-panel"],["enableSearch","true",3,"loadNodes","onNodeSelected","onNodesInserted","editCallbacks","searchCallback"]],template:function(t,e){1&t&&(a["\u0275\u0275elementStart"](0,"div",0),a["\u0275\u0275elementStart"](1,"div",1),a["\u0275\u0275elementStart"](2,"mat-toolbar",2),a["\u0275\u0275elementStart"](3,"div",3),a["\u0275\u0275elementStart"](4,"button",4),a["\u0275\u0275pipe"](5,"translate"),a["\u0275\u0275elementStart"](6,"mat-icon"),a["\u0275\u0275text"](7,"search"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](8,"mat-form-field",5),a["\u0275\u0275elementStart"](9,"mat-label"),a["\u0275\u0275text"](10,"\xa0"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](11,"input",6,7),a["\u0275\u0275listener"]("ngModelChange",(function(t){return e.textSearch=t})),a["\u0275\u0275pipe"](13,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](14,"button",8),a["\u0275\u0275listener"]("click",(function(){return e.exitFilterMode()})),a["\u0275\u0275pipe"](15,"translate"),a["\u0275\u0275elementStart"](16,"mat-icon"),a["\u0275\u0275text"](17,"close"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](18,"div",9),a["\u0275\u0275element"](19,"tb-nav-tree",10),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()),2&t&&(a["\u0275\u0275propertyInterpolate"]("toastTarget",e.toastTargetId),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("fxShow",e.textSearchMode),a["\u0275\u0275advance"](2),a["\u0275\u0275propertyInterpolate"]("matTooltip",a["\u0275\u0275pipeBind1"](5,11,"action.search")),a["\u0275\u0275advance"](7),a["\u0275\u0275propertyInterpolate"]("placeholder",a["\u0275\u0275pipeBind1"](13,13,"entity.search")),a["\u0275\u0275property"]("ngModel",e.textSearch),a["\u0275\u0275advance"](3),a["\u0275\u0275propertyInterpolate"]("matTooltip",a["\u0275\u0275pipeBind1"](15,15,"action.close")),a["\u0275\u0275advance"](5),a["\u0275\u0275property"]("loadNodes",e.loadNodes)("onNodeSelected",e.onNodeSelected)("onNodesInserted",e.onNodesInserted)("editCallbacks",e.nodeEditCallbacks)("searchCallback",e.searchCallback))},directives:[x.b,C.b,C.f,S.MatToolbar,w.d,E.MatButton,I.MatTooltip,O.MatIcon,T.MatFormField,T.MatLabel,M.MatInput,F.DefaultValueAccessor,F.NgControlStatus,F.NgModel,P.a],pipes:[D.TranslatePipe],styles:[".tb-has-timewindow[_nghost-%COMP%]   .tb-entities-hierarchy[_ngcontent-%COMP%]   mat-toolbar[_ngcontent-%COMP%], .tb-has-timewindow   [_nghost-%COMP%]   .tb-entities-hierarchy[_ngcontent-%COMP%]   mat-toolbar[_ngcontent-%COMP%], .tb-has-timewindow[_nghost-%COMP%]   .tb-entities-hierarchy[_ngcontent-%COMP%]   mat-toolbar[_ngcontent-%COMP%]   .mat-toolbar-tools[_ngcontent-%COMP%], .tb-has-timewindow   [_nghost-%COMP%]   .tb-entities-hierarchy[_ngcontent-%COMP%]   mat-toolbar[_ngcontent-%COMP%]   .mat-toolbar-tools[_ngcontent-%COMP%]{height:60px;max-height:60px}[_nghost-%COMP%]   .tb-entities-hierarchy[_ngcontent-%COMP%]   mat-toolbar.mat-table-toolbar[_ngcontent-%COMP%]:not([color=primary]){background:transparent}[_nghost-%COMP%]   .tb-entities-hierarchy[_ngcontent-%COMP%]   mat-toolbar[_ngcontent-%COMP%], [_nghost-%COMP%]   .tb-entities-hierarchy[_ngcontent-%COMP%]   mat-toolbar[_ngcontent-%COMP%]   .mat-toolbar-tools[_ngcontent-%COMP%]{min-height:39px;max-height:39px}[_nghost-%COMP%]   .tb-entities-hierarchy[_ngcontent-%COMP%]   .tb-entities-nav-tree-panel[_ngcontent-%COMP%]{overflow-x:auto;overflow-y:auto}[_nghost-%COMP%]     .tb-nav-tree-container.jstree-proton .jstree-anchor div.node-icon{display:inline-block;width:22px;height:22px;margin-right:2px;margin-bottom:2px;background-color:transparent;background-repeat:no-repeat;background-attachment:scroll;background-position:50%;background-size:18px 18px}[_nghost-%COMP%]     .tb-nav-tree-container.jstree-proton .jstree-anchor mat-icon.node-icon{width:22px;min-width:22px;height:22px;min-height:22px;margin-right:2px;margin-bottom:2px;color:inherit;vertical-align:middle}[_nghost-%COMP%]     .tb-nav-tree-container.jstree-proton .jstree-anchor mat-icon.node-icon.material-icons{font-size:18px;line-height:22px;text-align:center}[_nghost-%COMP%]     .tb-nav-tree-container.jstree-proton .jstree-anchor.jstree-disabled div.node-icon, [_nghost-%COMP%]     .tb-nav-tree-container.jstree-proton .jstree-anchor.jstree-hovered:not(.jstree-clicked) div.node-icon{opacity:.5}@media (max-width:768px){[_nghost-%COMP%]     .tb-nav-tree-container.jstree-proton-responsive .jstree-anchor div.node-icon{width:40px;height:40px;margin:0;background-size:24px 24px}[_nghost-%COMP%]     .tb-nav-tree-container.jstree-proton-responsive .jstree-anchor mat-icon.node-icon{width:40px;min-width:40px;height:40px;min-height:40px;margin:0}[_nghost-%COMP%]     .tb-nav-tree-container.jstree-proton-responsive .jstree-anchor mat-icon.node-icon.material-icons{font-size:24px;line-height:40px}}"]}),n}(r.a);!function(){a["\u0275setClassMetadata"](j,[{type:a.Component,args:[{selector:"tb-entities-hierarchy-widget",templateUrl:"./entities-hierarchy-widget.component.html",styleUrls:["./entities-hierarchy-widget.component.scss"]}]}],(function(){return[{type:b.Store},{type:a.ElementRef},{type:v.Overlay},{type:a.ViewContainerRef},{type:s.a}]}),{ctx:[{type:a.Input}],searchInputField:[{type:a.ViewChild,args:["searchInput"]}]})}()}).call(this,n("xexB"))},c1Lj:function(t,e,n){"use strict";n.d(e,"g",(function(){return o})),n.d(e,"c",(function(){return s})),n.d(e,"d",(function(){return l})),n.d(e,"a",(function(){return i})),n.d(e,"f",(function(){return c})),n.d(e,"e",(function(){return d})),n.d(e,"b",(function(){return p}));var i,a=n("mrSG"),r=n("//Q6"),o=/^([0-9]{1,4}|[1-5][0-9]{4}|6[0-4][0-9]{3}|65[0-4][0-9]{2}|655[0-2][0-9]|6553[0-5])$/,s=/^\+[1-9]\d{1,14}$/,l=/^\+[1-9]\d{1,14}$|^(MG|PN).*$/;!function(t){t.AWS_SNS="AWS_SNS",t.TWILIO="TWILIO"}(i||(i={}));var c=new Map([[i.AWS_SNS,"admin.sms-provider-type-aws-sns"],[i.TWILIO,"admin.sms-provider-type-twilio"]]);function d(t){return function(e){var n=e.value,a=null;if(t){var o=!1;if(n&&n.type)switch(n.type){case i.AWS_SNS:var s=n;o=Object(r.u)(s.accessKeyId)&&Object(r.u)(s.secretAccessKey)&&Object(r.u)(s.region);break;case i.TWILIO:var l=n;o=Object(r.u)(l.numberFrom)&&Object(r.u)(l.accountSid)&&Object(r.u)(l.accountToken)}o||(a={invalid:!0})}return a}}function p(t){var e;if(t)switch(t){case i.AWS_SNS:e=Object(a.a)(Object(a.a)({},{accessKeyId:"",secretAccessKey:"",region:"us-east-1"}),{type:i.AWS_SNS});break;case i.TWILIO:e=Object(a.a)(Object(a.a)({},{numberFrom:"",accountSid:"",accountToken:""}),{type:i.TWILIO})}return e}},c3m7:function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));var i=n("fXoL"),a=n("3Pt+"),r=n("MBk6"),o=n("U3y+"),s=n("sYmb"),l=n("XiUz"),c=n("ofXK");function d(t,e){1&t&&(i["\u0275\u0275elementStart"](0,"div",3),i["\u0275\u0275text"](1,"alias.no-entity-filter-specified"),i["\u0275\u0275elementEnd"]())}function p(t,e){if(1&t&&(i["\u0275\u0275elementStart"](0,"div",4),i["\u0275\u0275elementStart"](1,"div",5),i["\u0275\u0275text"](2),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()),2&t){var n=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](2),i["\u0275\u0275textInterpolate"](n.filterDisplayValue)}}var u=function(){function t(t){this.translate=t}return t.prototype.registerOnChange=function(t){},t.prototype.registerOnTouched=function(t){},t.prototype.setDisabledState=function(t){},t.prototype.writeValue=function(t){var e=this;if(this.filter=t,this.filter&&this.filter.type){var n,i,a,s,l,c=void 0,d=void 0;switch(this.filter.type){case r.a.singleEntity:c=this.filter.singleEntity.entityType,this.filterDisplayValue=this.translate.instant(o.d.get(c).list,{count:1});break;case r.a.entityList:c=this.filter.entityType;var p=this.filter.entityList.length;this.filterDisplayValue=this.translate.instant(o.d.get(c).list,{count:p});break;case r.a.entityName:c=this.filter.entityType,d=this.filter.entityNameFilter,this.filterDisplayValue=this.translate.instant(o.d.get(c).nameStartsWith,{prefix:d});break;case r.a.entityType:c=this.filter.entityType,this.filterDisplayValue=this.translate.instant(o.d.get(c).typePlural);break;case r.a.stateEntity:this.filterDisplayValue=this.translate.instant("alias.filter-type-state-entity-description");break;case r.a.assetType:var u=this.filter.assetType;(d=this.filter.assetNameFilter)&&d.length?this.filterDisplayValue=this.translate.instant("alias.filter-type-asset-type-and-name-description",{assetType:u,prefix:d}):this.filterDisplayValue=this.translate.instant("alias.filter-type-asset-type-description",{assetType:u});break;case r.a.deviceType:var m=this.filter.deviceType;(d=this.filter.deviceNameFilter)&&d.length?this.filterDisplayValue=this.translate.instant("alias.filter-type-device-type-and-name-description",{deviceType:m,prefix:d}):this.filterDisplayValue=this.translate.instant("alias.filter-type-device-type-description",{deviceType:m});break;case r.a.entityViewType:var f=this.filter.entityViewType;(d=this.filter.entityViewNameFilter)&&d.length?this.filterDisplayValue=this.translate.instant("alias.filter-type-entity-view-type-and-name-description",{entityView:f,prefix:d}):this.filterDisplayValue=this.translate.instant("alias.filter-type-entity-view-type-description",{entityView:f});break;case r.a.relationsQuery:n=this.translate.instant("alias.all-entities"),i=this.translate.instant("alias.any-relation"),s=this.filter.rootStateEntity?this.translate.instant("alias.state-entity"):this.translate.instant(o.d.get(this.filter.rootEntity.entityType).type),l=this.translate.instant("relation.direction-type."+this.filter.direction);var h=this.filter.filters;if(h&&h.length){var g=[];h.forEach((function(t){var r;if(t.entityTypes&&t.entityTypes.length){var c=[];t.entityTypes.forEach((function(t){c.push(e.translate.instant(o.d.get(t).typePlural))})),r=c.join(", ")}else r=n;a=t.relationType&&t.relationType.length?"'"+t.relationType+"'":i;var d=e.translate.instant("alias.filter-type-relations-query-description",{entities:r,relationType:a,direction:l,rootEntity:s});g.push(d)})),this.filterDisplayValue=g.join(", ")}else this.filterDisplayValue=this.translate.instant("alias.filter-type-relations-query-description",{entities:n,relationType:i,direction:l,rootEntity:s});break;case r.a.assetSearchQuery:case r.a.deviceSearchQuery:case r.a.entityViewSearchQuery:n=this.translate.instant("alias.all-entities"),i=this.translate.instant("alias.any-relation"),s=this.filter.rootStateEntity?this.translate.instant("alias.state-entity"):this.translate.instant(o.d.get(this.filter.rootEntity.entityType).type),l=this.translate.instant("relation.direction-type."+this.filter.direction);var y={relationType:a=this.filter.relationType&&this.filter.relationType.length?"'"+t.relationType+"'":i,direction:l,rootEntity:s};if(this.filter.type===r.a.assetSearchQuery){var b=[];this.filter.assetTypes.forEach((function(t){b.push("'"+t+"'")}));var v=b.join(", ");y.assetTypes=v,this.filterDisplayValue=this.translate.instant("alias.filter-type-asset-search-query-description",y)}else if(this.filter.type===r.a.deviceSearchQuery){var x=[];this.filter.deviceTypes.forEach((function(t){x.push("'"+t+"'")}));var C=x.join(", ");y.deviceTypes=C,this.filterDisplayValue=this.translate.instant("alias.filter-type-device-search-query-description",y)}else if(this.filter.type===r.a.entityViewSearchQuery){var S=[];this.filter.entityViewTypes.forEach((function(t){S.push("'"+t+"'")}));var w=S.join(", ");y.entityViewTypes=w,this.filterDisplayValue=this.translate.instant("alias.filter-type-entity-view-search-query-description",y)}break;default:this.filterDisplayValue=this.filter.type}}else this.filterDisplayValue=""},t.\u0275fac=function(e){return new(e||t)(i["\u0275\u0275directiveInject"](s.TranslateService))},t.\u0275cmp=i["\u0275\u0275defineComponent"]({type:t,selectors:[["tb-entity-filter-view"]],features:[i["\u0275\u0275ProvidersFeature"]([{provide:a.NG_VALUE_ACCESSOR,useExisting:Object(i.forwardRef)((function(){return t})),multi:!0}])],decls:4,vars:2,consts:[["fxLayout","column",1,"tb-entity-filter-view"],["class","entity-filter-empty","translate","",4,"ngIf","ngIfElse"],["filterView",""],["translate","",1,"entity-filter-empty"],["fxLayout","column"],[1,"entity-filter-value"]],template:function(t,e){if(1&t&&(i["\u0275\u0275elementStart"](0,"div",0),i["\u0275\u0275template"](1,d,2,0,"div",1),i["\u0275\u0275template"](2,p,3,1,"ng-template",null,2,i["\u0275\u0275templateRefExtractor"]),i["\u0275\u0275elementEnd"]()),2&t){var n=i["\u0275\u0275reference"](3);i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",!e.filter||!e.filter.type)("ngIfElse",n)}},directives:[l.f,c.NgIf,s.TranslateDirective],styles:["[_nghost-%COMP%]   .tb-entity-filter-view[_ngcontent-%COMP%]   .entity-filter-empty[_ngcontent-%COMP%]{font-size:14px;line-height:16px;color:rgba(221,44,0,.87)}[_nghost-%COMP%]   .tb-entity-filter-view[_ngcontent-%COMP%]   .entity-filter-type[_ngcontent-%COMP%], [_nghost-%COMP%]   .tb-entity-filter-view[_ngcontent-%COMP%]   .entity-filter-value[_ngcontent-%COMP%]{font-size:14px;line-height:16px;color:rgba(0,0,0,.570588)}"]}),t}();!function(){i["\u0275setClassMetadata"](u,[{type:i.Component,args:[{selector:"tb-entity-filter-view",templateUrl:"./entity-filter-view.component.html",styleUrls:["./entity-filter-view.component.scss"],providers:[{provide:a.NG_VALUE_ACCESSOR,useExisting:Object(i.forwardRef)((function(){return u})),multi:!0}]}]}],(function(){return[{type:s.TranslateService}]}),null)}()},c6cM:function(t,e,n){"use strict";n.d(e,"a",(function(){return g}));var i=n("0lYY"),a=n("aX2P"),r=n("jtHE"),o=n("LRne"),s=n("cp0P"),l=n("z6cu"),c=n("U3y+"),d=n("//Q6"),p=n("wd/R"),u=n("Duvn"),m=n("xw5a"),f=n("lJxs"),h=p,g=function(){function t(t,e){var n=this;this.options=e,this.tsOffset=0,this.cafs={},this.hasResolvedData=!1,this.subscribed=!1;var o=new r.a;this.init$=o.asObservable(),this.ctx=t,this.type=e.type,this.id=this.ctx.utils.guid(),this.callbacks=e.callbacks,this.type===i.k.rpc?(this.callbacks.rpcStateChanged=this.callbacks.rpcStateChanged||function(){},this.callbacks.onRpcSuccess=this.callbacks.onRpcSuccess||function(){},this.callbacks.onRpcFailed=this.callbacks.onRpcFailed||function(){},this.callbacks.onRpcErrorCleared=this.callbacks.onRpcErrorCleared||function(){},this.targetDeviceAliasIds=e.targetDeviceAliasIds,this.targetDeviceIds=e.targetDeviceIds,this.targetDeviceAliasId=null,this.targetDeviceId=null,this.rpcRejection=null,this.rpcErrorText=null,this.rpcEnabled=!1,this.executingRpcRequest=!1,this.executingSubjects=[],this.initRpc().subscribe((function(){o.next(n),o.complete()}))):this.type===i.k.alarm?(this.callbacks.onDataUpdated=this.callbacks.onDataUpdated||function(){},this.callbacks.onDataUpdateError=this.callbacks.onDataUpdateError||function(){},this.callbacks.onSubscriptionMessage=this.callbacks.onSubscriptionMessage||function(){},this.callbacks.dataLoading=this.callbacks.dataLoading||function(){},this.callbacks.timeWindowUpdated=this.callbacks.timeWindowUpdated||function(){},this.alarmSource=e.alarmSource,this.alarmDataListener=null,this.alarms=Object(u.a)(),this.originalTimewindow=null,this.timeWindow={},this.useDashboardTimewindow=e.useDashboardTimewindow,this.useDashboardTimewindow?this.timeWindowConfig=Object(d.e)(e.dashboardTimewindow):this.timeWindowConfig=Object(d.e)(e.timeWindowConfig),this.subscriptionTimewindow=null,this.loadingData=!1,this.displayLegend=!1,this.initAlarmSubscription().subscribe((function(){o.next(n),o.complete()}),(function(){o.error(null)}))):(this.callbacks.onDataUpdated=this.callbacks.onDataUpdated||function(){},this.callbacks.onDataUpdateError=this.callbacks.onDataUpdateError||function(){},this.callbacks.onSubscriptionMessage=this.callbacks.onSubscriptionMessage||function(){},this.callbacks.onInitialPageDataChanged=this.callbacks.onInitialPageDataChanged||function(){},this.callbacks.forceReInit=this.callbacks.forceReInit||function(){},this.callbacks.dataLoading=this.callbacks.dataLoading||function(){},this.callbacks.legendDataUpdated=this.callbacks.legendDataUpdated||function(){},this.callbacks.timeWindowUpdated=this.callbacks.timeWindowUpdated||function(){},this.configuredDatasources=this.ctx.utils.validateDatasources(e.datasources),this.entityDataListeners=[],this.hasDataPageLink=e.hasDataPageLink,this.singleEntity=e.singleEntity,this.warnOnPageDataOverflow=e.warnOnPageDataOverflow,this.ignoreDataUpdateOnIntervalTick=e.ignoreDataUpdateOnIntervalTick,this.datasourcePages=[],this.datasources=[],this.dataPages=[],this.data=[],this.hiddenData=[],this.originalTimewindow=null,this.timeWindow={},this.useDashboardTimewindow=e.useDashboardTimewindow,this.stateData=e.stateData,this.type===i.k.latest&&(this.timezone=e.dashboardTimewindow.timezone,this.updateTsOffset()),this.useDashboardTimewindow?this.timeWindowConfig=Object(d.e)(e.dashboardTimewindow):this.timeWindowConfig=Object(d.e)(e.timeWindowConfig),this.subscriptionTimewindow=null,this.comparisonEnabled=e.comparisonEnabled&&Object(a.J)(this.timeWindowConfig),this.comparisonEnabled&&(this.timeForComparison=e.timeForComparison,this.comparisonTimeWindow={},this.timewindowForComparison=null),this.units=e.units||"",this.decimals=Object(d.n)(e.decimals)?e.decimals:2,this.loadingData=!1,e.legendConfig?(this.legendConfig=e.legendConfig,this.legendData={keys:[],data:[]},this.displayLegend=!0):this.displayLegend=!1,this.caulculateLegendData=this.displayLegend&&this.type===i.k.timeseries&&(!0===this.legendConfig.showMin||!0===this.legendConfig.showMax||!0===this.legendConfig.showAvg||!0===this.legendConfig.showTotal),this.initDataSubscription().subscribe((function(){o.next(n),o.complete()}),(function(t){o.error(t)})))}return t.prototype.initRpc=function(){var t=this,e=new r.a;return this.targetDeviceAliasIds&&this.targetDeviceAliasIds.length>0?(this.targetDeviceAliasId=this.targetDeviceAliasIds[0],this.ctx.aliasController.resolveSingleEntityInfo(this.targetDeviceAliasId).subscribe((function(n){n&&n.entityType===c.b.DEVICE?(t.targetDeviceId=n.id,t.targetDeviceName=n.name,t.targetDeviceId?t.rpcEnabled=!0:t.rpcEnabled=t.ctx.utils.widgetEditMode,t.hasResolvedData=t.rpcEnabled,t.callbacks.rpcStateChanged(t),e.next(),e.complete()):(t.rpcEnabled=!1,t.callbacks.rpcStateChanged(t),e.next(),e.complete())}),(function(){t.rpcEnabled=!1,t.callbacks.rpcStateChanged(t),e.next(),e.complete()}))):(this.targetDeviceIds&&this.targetDeviceIds.length>0&&(this.targetDeviceId=this.targetDeviceIds[0]),this.targetDeviceId?this.rpcEnabled=!0:this.rpcEnabled=this.ctx.utils.widgetEditMode,this.hasResolvedData=!0,this.callbacks.rpcStateChanged(this),e.next(),e.complete()),e.asObservable()},t.prototype.initAlarmSubscription=function(){var t=this,e=new r.a(1);return this.loadStDiff().subscribe((function(){t.ctx.aliasController?t.ctx.aliasController.resolveAlarmSource(t.alarmSource).subscribe((function(n){t.alarmSource=n,n&&(t.hasResolvedData=!0),t.configureAlarmsData(),e.next(),e.complete()}),(function(t){e.error(t)})):(t.hasResolvedData=!0,t.configureAlarmsData(),e.next(),e.complete())})),e.asObservable()},t.prototype.configureAlarmsData=function(){this.notifyDataLoaded()},t.prototype.initDataSubscription=function(){var t=this;this.notifyDataLoading();var e=new r.a(1);return this.loadStDiff().subscribe((function(){t.ctx.aliasController?t.ctx.aliasController.resolveDatasources(t.configuredDatasources,t.singleEntity).subscribe((function(n){t.configuredDatasources=n,t.prepareDataSubscriptions().subscribe((function(){e.next(),e.complete()}))}),(function(n){t.notifyDataLoaded(),e.error(n)})):(t.hasResolvedData=!0,t.prepareDataSubscriptions().subscribe((function(){e.next(),e.complete()})))})),e.asObservable()},t.prototype.prepareDataSubscriptions=function(){var t=this;if(this.hasDataPageLink)return this.hasResolvedData=!0,this.notifyDataLoaded(),Object(o.a)(null);if(this.comparisonEnabled){var e=[];this.configuredDatasources.forEach((function(t,n){var i=[];if(t.dataKeys.forEach((function(t,e){if(t.settings.comparisonSettings&&t.settings.comparisonSettings.showValuesForComparison){var n=Object(d.e)(t);n.isAdditional=!0,n.origDataKeyIndex=e,i.push(n)}})),i.length){var a=Object(d.e)(t);a.dataKeys=i,a.isAdditional=!0,a.origDatasourceIndex=n,e.push(a)}})),this.configuredDatasources=this.configuredDatasources.concat(e)}var n=this.configuredDatasources.map((function(e,n){var i={subscriptionType:t.type,configDatasource:e,configDatasourceIndex:n,dataLoaded:function(e,n,i,a){t.dataLoaded(e,n,i,a,!0)},initialPageDataChanged:t.initialPageDataChanged.bind(t),forceReInit:t.forceReInit.bind(t),dataUpdated:t.dataUpdated.bind(t),updateRealtimeSubscription:function(){return t.updateRealtimeSubscription()},setRealtimeSubscription:function(e){t.updateRealtimeSubscription(Object(d.e)(e))}};return t.entityDataListeners.push(i),t.ctx.entityDataService.prepareSubscription(i,t.ignoreDataUpdateOnIntervalTick)}));return Object(s.a)(n).pipe(Object(f.a)((function(e){e.forEach((function(e){e&&t.dataLoaded(e.pageData,e.data,e.datasourceIndex,e.pageLink,!1)})),t.configureLoadedData(),t.hasResolvedData=t.datasources.length>0,t.updateDataTimewindow(),t.notifyDataLoaded(),t.onDataUpdated(!0)})))},t.prototype.resetData=function(){this.data.length=0,this.hiddenData.length=0,this.displayLegend&&(this.legendData.keys.length=0,this.legendData.data.length=0),this.onDataUpdated()},t.prototype.getFirstEntityInfo=function(){var t,e,n,a;if(this.type===i.k.rpc)this.targetDeviceId&&(t={entityType:c.b.DEVICE,id:this.targetDeviceId},e=this.targetDeviceName);else if(this.type===i.k.alarm){if(this.alarmSource&&this.alarmSource.entityType&&this.alarmSource.entityId)t={entityType:this.alarmSource.entityType,id:this.alarmSource.entityId},e=this.alarmSource.entityName,n=this.alarmSource.entityLabel,a=this.alarmSource.entityDescription;else if(this.alarms&&this.alarms.data.length){var r=this.alarms.data[0];if(t=r.originator,e=r.originatorName,r.latest&&r.latest[m.e.ENTITY_FIELD]){var o=r.latest[m.e.ENTITY_FIELD],s=o.label;s&&(n=s.value);var l=o.additionalInfo;if(l){var d=l.value;if(d&&d.length)try{var p=JSON.parse(d);p&&p.description&&(a=p.description)}catch(g){}}}}}else for(var u=0,f=this.datasources;u<f.length;u++){var h=f[u];if(h&&h.entityType&&h.entityId){t={entityType:h.entityType,id:h.entityId},e=h.entityName,n=h.entityLabel,a=h.entityDescription;break}}return t?{entityId:t,entityName:e,entityLabel:n,entityDescription:a}:null},t.prototype.onAliasesChanged=function(t){return this.type===i.k.rpc?this.checkRpcTarget(t):this.type===i.k.alarm?this.checkAlarmSource(t):this.checkSubscriptions(t)},t.prototype.onFiltersChanged=function(t){return this.type!==i.k.rpc&&(this.type===i.k.alarm?this.checkAlarmSourceFilters(t):this.checkSubscriptionsFilters(t))},t.prototype.onDataUpdated=function(t){var e=this;this.cafs.dataUpdated&&(this.cafs.dataUpdated(),this.cafs.dataUpdated=null),this.cafs.dataUpdated=this.ctx.raf.raf((function(){try{e.callbacks.onDataUpdated(e,t)}catch(n){e.callbacks.onDataUpdateError(e,n)}}))},t.prototype.onSubscriptionMessage=function(t){var e=this;this.cafs.message&&(this.cafs.message(),this.cafs.message=null),this.cafs.message=this.ctx.raf.raf((function(){e.callbacks.onSubscriptionMessage(e,t)}))},t.prototype.onDashboardTimewindowChanged=function(t){if(this.type===i.k.timeseries||this.type===i.k.alarm){if(this.useDashboardTimewindow&&!Object(d.r)(this.timeWindowConfig,t)&&t){var e=Object(a.M)(this.timeWindowConfig,t);this.timeWindowConfig=Object(d.e)(t),this.update(e)}}else this.type===i.k.latest&&t&&this.timezone!==t.timezone&&(this.timezone=t.timezone,this.updateTsOffset()&&this.update())},t.prototype.updateDataVisibility=function(t){this.displayLegend&&(this.legendData.keys.find((function(e){return e.dataIndex===t})).dataKey.hidden?(this.hiddenData[t].data=this.data[t].data,this.data[t].data=[]):(this.data[t].data=this.hiddenData[t].data,this.hiddenData[t].data=[]),this.onDataUpdated())},t.prototype.updateTimewindowConfig=function(t){if(!this.useDashboardTimewindow){var e=Object(a.M)(this.timeWindowConfig,t);this.timeWindowConfig=t,this.update(e)}},t.prototype.onResetTimewindow=function(){if(this.useDashboardTimewindow)this.ctx.dashboardTimewindowApi.onResetTimewindow();else if(this.originalTimewindow){var t=Object(a.M)(this.timeWindowConfig,this.originalTimewindow);this.timeWindowConfig=Object(d.e)(this.originalTimewindow),this.originalTimewindow=null,this.callbacks.timeWindowUpdated(this,this.timeWindowConfig),this.update(t)}},t.prototype.onUpdateTimewindow=function(t,e,n){if(this.useDashboardTimewindow)this.ctx.dashboardTimewindowApi.onUpdateTimewindow(t,e);else{this.originalTimewindow||(this.originalTimewindow=Object(d.e)(this.timeWindowConfig)),this.timeWindowConfig=Object(a.N)(this.timeWindowConfig,t,e,n,this.ctx.timeService),this.callbacks.timeWindowUpdated(this,this.timeWindowConfig);var i=Object(a.M)(this.timeWindowConfig,this.originalTimewindow);this.update(i)}},t.prototype.sendOneWayCommand=function(t,e,n){return this.sendCommand(!0,t,e,n)},t.prototype.sendTwoWayCommand=function(t,e,n){return this.sendCommand(!1,t,e,n)},t.prototype.clearRpcError=function(){this.rpcRejection=null,this.rpcErrorText=null,this.callbacks.onRpcErrorCleared(this)},t.prototype.sendCommand=function(t,e,n,i){var a=this;if(this.rpcEnabled){this.rpcRejection&&408!==this.rpcRejection.status&&(this.rpcRejection=null,this.rpcErrorText=null,this.callbacks.onRpcErrorCleared(this));var o={method:e,params:n};i&&i>0&&(o.timeout=i);var s=new r.a;return this.executingRpcRequest=!0,this.callbacks.rpcStateChanged(this),this.ctx.utils.widgetEditMode?setTimeout((function(){a.executingRpcRequest=!1,a.callbacks.rpcStateChanged(a),t?(s.next(),s.complete()):(s.next(o),s.complete())}),500):(this.executingSubjects.push(s),(t?this.ctx.deviceService.sendOneWayRpcCommand(this.targetDeviceId,o):this.ctx.deviceService.sendTwoWayRpcCommand(this.targetDeviceId,o)).subscribe((function(t){a.rpcRejection=null,a.rpcErrorText=null;var e=a.executingSubjects.indexOf(s);e>=0&&a.executingSubjects.splice(e,1),a.executingRpcRequest=a.executingSubjects.length>0,a.callbacks.onRpcSuccess(a),s.next(t),s.complete()}),(function(t){var e=a.executingSubjects.indexOf(s);if(e>=0&&a.executingSubjects.splice(e,1),a.executingRpcRequest=a.executingSubjects.length>0,a.callbacks.rpcStateChanged(a),!a.executingRpcRequest||408===t.status){if(a.rpcRejection=t,408===t.status)a.rpcErrorText="Request Timeout.";else if(409===t.status)a.rpcErrorText="Device is offline.";else{a.rpcErrorText="Error : "+t.status+" - "+t.statusText;var n=a.extractRejectionErrorText(t);n&&(a.rpcErrorText+="</br>",a.rpcErrorText+=n)}a.callbacks.onRpcFailed(a)}s.error(t)}))),s.asObservable()}return Object(l.a)(new Error("Rpc disabled!"))},t.prototype.extractRejectionErrorText=function(t){var e=null;if(t.error){e=t.error;try{e=t.error?JSON.parse(t.error):null}catch(n){}}return e&&!e.message?e=this.prepareMessageFromData(e):e&&e.message&&(e=e.message),e},t.prototype.prepareMessageFromData=function(t){if("object"!=typeof t||t.constructor!==ArrayBuffer)return t;var e=String.fromCharCode.apply(null,new Uint8Array(t));try{var n=JSON.parse(e);return n.message?n.message:e}catch(i){return e}},t.prototype.update=function(t){void 0===t&&(t=!1),this.type!==i.k.rpc&&(this.type===i.k.alarm?this.updateAlarmDataSubscription():this.type===i.k.timeseries&&this.options.comparisonEnabled&&t?this.forceReInit():this.hasDataPageLink?this.updateDataSubscriptions():(this.notifyDataLoading(),this.dataSubscribe()))},t.prototype.subscribe=function(){var t=this;this.subscribed||(this.subscribed=!0,this.cafs.subscribe&&(this.cafs.subscribe(),this.cafs.subscribe=null),this.cafs.subscribe=this.ctx.raf.raf((function(){t.doSubscribe()})))},t.prototype.subscribeAllForPaginatedData=function(t,e){var n=this,i=[];return this.configuredDatasources.forEach((function(a,r){i.push(n.subscribeForPaginatedData(r,t,e))})),i.length?Object(s.a)(i):Object(o.a)(null)},t.prototype.subscribeForPaginatedData=function(t,e,n){var a=this,r=this.entityDataListeners[t];r&&this.ctx.entityDataService.stopSubscription(r);var s=this.configuredDatasources[t];return s?(this.type===i.k.timeseries&&this.timeWindowConfig&&this.updateRealtimeSubscription(),r={subscriptionType:this.type,configDatasource:s,configDatasourceIndex:t,subscriptionTimewindow:this.subscriptionTimewindow,latestTsOffset:this.tsOffset,dataLoaded:function(t,e,n,i){a.dataLoaded(t,e,n,i,!0)},dataUpdated:this.dataUpdated.bind(this),updateRealtimeSubscription:function(){return a.updateRealtimeSubscription()},setRealtimeSubscription:function(t){a.updateRealtimeSubscription(Object(d.e)(t))}},this.entityDataListeners[t]=r,this.ctx.entityDataService.subscribeForPaginatedData(r,e,n,this.ignoreDataUpdateOnIntervalTick)):Object(o.a)(null)},t.prototype.subscribeForAlarms=function(t,e){this.alarmDataListener&&this.ctx.alarmDataService.stopSubscription(this.alarmDataListener),this.timeWindowConfig&&this.updateRealtimeSubscription(),this.alarmDataListener={subscriptionTimewindow:this.subscriptionTimewindow,alarmSource:this.alarmSource,alarmsLoaded:this.alarmsLoaded.bind(this),alarmsUpdated:this.alarmsUpdated.bind(this)},this.alarms=Object(u.a)(),this.ctx.alarmDataService.subscribeForAlarms(this.alarmDataListener,t,e);var n=!1;this.alarmSource.unresolvedStateEntity&&(n=!0),n&&this.onDataUpdated()},t.prototype.doSubscribe=function(){this.type!==i.k.rpc&&this.type!==i.k.alarm&&this.dataSubscribe()},t.prototype.updateDataTimewindow=function(){this.hasDataPageLink||this.type===i.k.timeseries&&this.timeWindowConfig&&(this.updateRealtimeSubscription(),this.comparisonEnabled&&this.updateSubscriptionForComparison())},t.prototype.dataSubscribe=function(){var t=this;if(this.updateDataTimewindow(),!this.hasDataPageLink){this.type===i.k.timeseries&&this.timeWindowConfig&&this.subscriptionTimewindow.fixedWindow&&this.onDataUpdated();var e=!this.datasources.length,n=!this.entityDataListeners.filter((function(t){return!!t.subscription})).length;this.entityDataListeners.forEach((function(e){t.comparisonEnabled&&e.configDatasource.isAdditional?e.subscriptionTimewindow=t.timewindowForComparison:(e.subscriptionTimewindow=t.subscriptionTimewindow,e.latestTsOffset=t.tsOffset),t.ctx.entityDataService.startSubscription(e)})),e&&this.onDataUpdated(),n&&this.notifyDataLoaded()}},t.prototype.unsubscribe=function(){var t=this;this.type!==i.k.rpc&&(this.type===i.k.alarm?this.alarmsUnsubscribe():(this.entityDataListeners.forEach((function(e){null!=e&&t.ctx.entityDataService.stopSubscription(e)})),this.entityDataListeners.length=0,this.resetData())),this.subscribed=!1},t.prototype.alarmsUnsubscribe=function(){this.alarmDataListener&&(this.ctx.alarmDataService.stopSubscription(this.alarmDataListener),this.alarmDataListener=null)},t.prototype.checkRpcTarget=function(t){return t.indexOf(this.targetDeviceAliasId)>-1},t.prototype.checkAlarmSource=function(t){return this.options.alarmSource&&this.options.alarmSource.entityAliasId&&t.indexOf(this.options.alarmSource.entityAliasId)>-1&&this.updateAlarmSubscription(),!1},t.prototype.checkAlarmSourceFilters=function(t){return this.options.alarmSource&&this.options.alarmSource.filterId&&t.indexOf(this.options.alarmSource.filterId)>-1&&this.updateAlarmSubscription(),!1},t.prototype.updateAlarmSubscription=function(){var t=this;this.alarmSource=this.options.alarmSource,this.ctx.aliasController?this.ctx.aliasController.resolveAlarmSource(this.alarmSource).subscribe((function(e){t.alarmSource=e,e&&(t.hasResolvedData=!0),t.configureAlarmsData(),t.updateAlarmDataSubscription()}),(function(){t.notifyDataLoaded()})):(this.hasResolvedData=!0,this.configureAlarmsData(),this.updateAlarmDataSubscription())},t.prototype.updateAlarmDataSubscription=function(){if(this.alarmDataListener){var t=this.alarmDataListener.alarmDataSubscriptionOptions.pageLink,e=this.alarmDataListener.alarmDataSubscriptionOptions.additionalKeyFilters;this.subscribeForAlarms(t,e)}},t.prototype.checkSubscriptions=function(t){var e=!1,n=this.options.datasources;if(n)for(var i=0,a=n;i<a.length;i++){var r=a[i];if(r.entityAliasId&&t.indexOf(r.entityAliasId)>-1){e=!0;break}}return e&&this.hasDataPageLink&&(e=!1,this.updateDataSubscriptions()),e},t.prototype.checkSubscriptionsFilters=function(t){var e=!1,n=this.options.datasources;if(n)for(var i=0,a=n;i<a.length;i++){var r=a[i];if(r.filterId&&t.indexOf(r.filterId)>-1){e=!0;break}}return e&&this.hasDataPageLink&&(e=!1,this.updateDataSubscriptions()),e},t.prototype.updateDataSubscriptions=function(){var t=this;this.configuredDatasources=this.ctx.utils.validateDatasources(this.options.datasources),this.ctx.aliasController?this.ctx.aliasController.resolveDatasources(this.configuredDatasources,this.singleEntity).subscribe((function(e){t.configuredDatasources=e,t.prepareDataSubscriptions().subscribe((function(){t.updatePaginatedDataSubscriptions()}))}),(function(){t.notifyDataLoaded()})):(this.hasResolvedData=!0,this.prepareDataSubscriptions().subscribe((function(){t.updatePaginatedDataSubscriptions()})))},t.prototype.updatePaginatedDataSubscriptions=function(){for(var t=0;t<this.entityDataListeners.length;t++){var e=this.entityDataListeners[t];if(e){var n=e.subscriptionOptions.pageLink,i=e.subscriptionOptions.additionalKeyFilters;this.subscribeForPaginatedData(t,n,i)}}},t.prototype.isDataResolved=function(){return this.hasResolvedData},t.prototype.destroy=function(){this.unsubscribe();for(var t=0,e=Object.keys(this.cafs);t<e.length;t++){var n=e[t];this.cafs[n]&&(this.cafs[n](),this.cafs[n]=null)}},t.prototype.notifyDataLoading=function(){this.loadingData=!0,this.callbacks.dataLoading(this)},t.prototype.notifyDataLoaded=function(){this.loadingData=!1,this.callbacks.dataLoading(this)},t.prototype.updateTimewindow=function(){if(this.timeWindow.interval=this.subscriptionTimewindow.aggregation.interval||1e3,this.timeWindow.timezone=this.subscriptionTimewindow.timezone,this.subscriptionTimewindow.realtimeWindowMs)if(this.subscriptionTimewindow.quickInterval){var t=Object(a.r)(this.subscriptionTimewindow.quickInterval,this.subscriptionTimewindow.timezone);this.timeWindow.maxTime=t[1]+this.subscriptionTimewindow.tsOffset,this.timeWindow.minTime=t[0]+this.subscriptionTimewindow.tsOffset}else this.timeWindow.maxTime=h().valueOf()+this.subscriptionTimewindow.tsOffset+this.timeWindow.stDiff,this.timeWindow.minTime=this.timeWindow.maxTime-this.subscriptionTimewindow.realtimeWindowMs;else this.subscriptionTimewindow.fixedWindow&&(this.timeWindow.maxTime=this.subscriptionTimewindow.fixedWindow.endTimeMs+this.subscriptionTimewindow.tsOffset,this.timeWindow.minTime=this.subscriptionTimewindow.fixedWindow.startTimeMs+this.subscriptionTimewindow.tsOffset)},t.prototype.updateTsOffset=function(){var t=Object(a.t)(this.timezone);return this.tsOffset!==t&&(this.tsOffset=t,!0)},t.prototype.updateRealtimeSubscription=function(t){return this.subscriptionTimewindow=t||Object(a.v)(this.timeWindowConfig,this.timeWindow.stDiff,this.stateData,this.ctx.timeService),this.updateTimewindow(),this.subscriptionTimewindow},t.prototype.updateComparisonTimewindow=function(){this.comparisonTimeWindow.interval=this.timewindowForComparison.aggregation.interval||1e3,this.comparisonTimeWindow.timezone=this.timewindowForComparison.timezone,this.timewindowForComparison.fixedWindow&&(this.comparisonTimeWindow.maxTime=this.timewindowForComparison.fixedWindow.endTimeMs+this.timewindowForComparison.tsOffset,this.comparisonTimeWindow.minTime=this.timewindowForComparison.fixedWindow.startTimeMs+this.timewindowForComparison.tsOffset)},t.prototype.updateSubscriptionForComparison=function(){return this.timewindowForComparison=Object(a.w)(this.subscriptionTimewindow,this.timeForComparison),this.updateComparisonTimewindow(),this.timewindowForComparison},t.prototype.initialPageDataChanged=function(t){this.callbacks.onInitialPageDataChanged(this,t)},t.prototype.forceReInit=function(){this.callbacks.forceReInit()},t.prototype.dataLoaded=function(t,e,n,a,r){var o=this,s=this.configuredDatasources[n];s.dataReceived=!0;var l=t.data.map((function(t,e){return o.entityDataToDatasource(s,t,e)}));this.datasourcePages[n]={data:l,hasNext:t.hasNext,totalElements:t.totalElements,totalPages:t.totalPages};var c=l.map((function(t,n){return o.entityDataToDatasourceData(t,e[n])}));if(this.dataPages[n]={data:c,hasNext:t.hasNext,totalElements:t.totalElements,totalPages:t.totalPages},s.type===i.a.entity&&t.hasNext&&a.pageSize>1&&this.warnOnPageDataOverflow){var d=this.ctx.translate.instant("widget.data-overflow",{count:t.data.length,total:t.totalElements});this.onSubscriptionMessage({severity:"warn",message:d})}r&&(this.configureLoadedData(),this.onDataUpdated(!0))},t.prototype.configureLoadedData=function(){var t=this;this.datasources.length=0,this.data.length=0,this.hiddenData.length=0,this.displayLegend&&(this.legendData.keys.length=0,this.legendData.data.length=0);var e=0;this.configuredDatasources.forEach((function(n,i){n.dataKeyStartIndex=e;var a=t.datasourcePages[i],r=t.dataPages[i];a&&a.data.forEach((function(n,i){n.dataKeys.forEach((function(n,a){var o=r.data[i][a];if(t.data.push(o),t.hiddenData.push({data:[]}),t.displayLegend){var s={dataKey:n,dataIndex:e};t.legendData.keys.push(s);t.legendData.data.push({min:null,max:null,avg:null,total:null,hidden:!1})}e++})),t.datasources.push(n)}))}));var n=0;this.datasources.forEach((function(e){e.dataKeys.forEach((function(i){(e.generated||e.isAdditional)&&(i._hash=Math.random(),i.color=t.ctx.utils.getMaterialColor(n)),n++}))})),this.comparisonEnabled&&this.datasourcePages.forEach((function(e){e.data.forEach((function(e,n){if(e.isAdditional){var i=t.datasourcePages[e.origDatasourceIndex].data[n];e.dataKeys.forEach((function(t){t.settings.comparisonSettings.color&&(t.color=t.settings.comparisonSettings.color),i.dataKeys[t.origDataKeyIndex].settings.comparisonSettings.color=t.color}))}}))})),this.caulculateLegendData&&(this.data.forEach((function(e,n){t.updateLegend(n,e.data,!1)})),this.callbacks.legendDataUpdated(this,!0))},t.prototype.entityDataToDatasourceData=function(t,e){var n=this;return t.dataKeys.map((function(i,a){i.hidden=!!i.settings.hideDataByDefault,i.inLegend=!i.settings.removeFromLegend,i.label=n.ctx.utils.customTranslation(i.label,i.label),n.comparisonEnabled&&i.isAdditional&&i.settings.comparisonSettings.comparisonValuesLabel?i.label=Object(d.d)(t,i.settings.comparisonSettings.comparisonValuesLabel):(n.comparisonEnabled&&i.isAdditional&&(i.label=i.label+" "+n.ctx.translate.instant("legend.comparison-time-ago."+n.timeForComparison)),i.pattern=i.label,i.label=Object(d.d)(t,i.pattern));var r={datasource:t,dataKey:i,data:[]};return e&&e[a]&&e[a].data&&(r.data=e[a].data),r}))},t.prototype.entityDataToDatasource=function(t,e,n){var i=Object(d.e)(t),a=Object(m.t)(e);return Object(m.J)(i,a),i.generated=n>0,i},t.prototype.dataUpdated=function(t,e,n,a,r){var o,s=this.configuredDatasources[e],l=s.dataKeyStartIndex+n*s.dataKeys.length+a,c=!0;if(o=this.displayLegend&&this.legendData.keys.find((function(t){return t.dataIndex===l})).dataKey.hidden?this.hiddenData[l]:this.data[l],this.type===i.k.latest){var d=o.data;if(t.data.length){if(d&&d[0]&&d[0].length>1&&t.data.length>0){var p=d[0][0],u=d[0][1];p===t.data[0][0]&&u===t.data[0][1]&&(c=!1)}}else c=!1}c&&(this.subscriptionTimewindow&&this.subscriptionTimewindow.realtimeWindowMs&&(this.updateTimewindow(),this.timewindowForComparison&&this.timewindowForComparison.realtimeWindowMs&&this.updateComparisonTimewindow()),o.data=t.data,this.caulculateLegendData&&this.updateLegend(l,t.data,r),this.notifyDataLoaded(),this.onDataUpdated(r))},t.prototype.alarmsLoaded=function(t,e,n){if(this.alarms=t,n>e){var i=this.ctx.translate.instant("widget.alarm-data-overflow",{allowedEntities:e,totalEntities:n});this.onSubscriptionMessage({severity:"warn",message:i})}this.subscriptionTimewindow&&this.subscriptionTimewindow.realtimeWindowMs&&this.updateTimewindow(),this.onDataUpdated()},t.prototype.alarmsUpdated=function(t,e){this.alarmsLoaded(e,0,0)},t.prototype.updateLegend=function(t,e,n){var i=this.legendData.keys.find((function(e){return e.dataIndex===t})).dataKey,a=Object(d.o)(i.decimals)?i.decimals:this.decimals,r=i.units&&i.units.length?i.units:this.units,o=this.legendData.data[t];this.legendConfig.showMin&&(o.min=this.ctx.widgetUtils.formatValue(function(t){if(t.length>0){for(var e=Number(t[0][1]),n=1;n<t.length;n++)e=Math.min(e,Number(t[n][1]));return e}return null}(e),a,r)),this.legendConfig.showMax&&(o.max=this.ctx.widgetUtils.formatValue(function(t){if(t.length>0){for(var e=Number(t[0][1]),n=1;n<t.length;n++)e=Math.max(e,Number(t[n][1]));return e}return null}(e),a,r)),this.legendConfig.showAvg&&(o.avg=this.ctx.widgetUtils.formatValue(function(t){return t.length>0?y(t)/t.length:null}(e),a,r)),this.legendConfig.showTotal&&(o.total=this.ctx.widgetUtils.formatValue(y(e),a,r)),this.callbacks.legendDataUpdated(this,!1!==n)},t.prototype.loadStDiff=function(){var t=this,e=new r.a(1);return this.ctx.getServerTimeDiff&&this.timeWindow?this.ctx.getServerTimeDiff().subscribe((function(n){t.timeWindow.stDiff=n,e.next(),e.complete()}),(function(){t.timeWindow.stDiff=0,e.next(),e.complete()})):(this.timeWindow&&(this.timeWindow.stDiff=0),e.next(),e.complete()),e.asObservable()},t}();function y(t){if(t.length>0){var e=0;return t.forEach((function(t){e+=Number(t[1])})),e}return null}},cX0b:function(t,e,n){"use strict";n.d(e,"a",(function(){return F}));var i=n("fXoL"),a=n("qxrw"),r=n("U3y+"),o=n("LRne"),s=n("cp0P"),l=n("l7P3"),c=n("C/rb"),d=n("IzEk"),p=n("vkgz"),u=n("5+tZ"),m=n("lJxs"),f=n("zp9Z"),h=n("ktVl"),g=n("S+vS"),y=n("tM37"),b=n("IktG"),v=n("YnEf"),x=n("p0+G"),C=n("HUB6"),S=n("p/3Z"),w=n("yOwA"),E=n("9HAa"),I=n("sYmb"),O=n("ofXK"),T=n("tyNb"),M=n("0IaG"),F=function(){function t(t,e,n,i,o,s,l,c,d){var p=this;this.store=t,this.dashboardService=e,this.customerService=n,this.dialogService=i,this.importExport=o,this.translate=s,this.datePipe=l,this.router=c,this.dialog=d,this.config=new a.d,this.config.entityType=r.b.DASHBOARD,this.config.entityComponent=x.a,this.config.entityTabsComponent=w.a,this.config.entityTranslations=r.d.get(r.b.DASHBOARD),this.config.entityResources=r.c.get(r.b.DASHBOARD),this.config.deleteEntityTitle=function(t){return p.translate.instant("dashboard.delete-dashboard-title",{dashboardTitle:t.title})},this.config.deleteEntityContent=function(){return p.translate.instant("dashboard.delete-dashboard-text")},this.config.deleteEntitiesTitle=function(t){return p.translate.instant("dashboard.delete-dashboards-title",{count:t})},this.config.deleteEntitiesContent=function(){return p.translate.instant("dashboard.delete-dashboards-text")},this.config.loadEntity=function(t){return p.dashboardService.getDashboard(t.id)},this.config.saveEntity=function(t){return p.dashboardService.saveDashboard(t)},this.config.onEntityAction=function(t){return p.onDashboardAction(t)},this.config.detailsReadonly=function(){return"customer_user"===p.config.componentsData.dashboardScope}}return t.prototype.resolve=function(t){var e=this,n=t.params;return this.config.componentsData={dashboardScope:t.data.dashboardsType,customerId:n.customerId},this.store.pipe(Object(l.select)(c.d),Object(d.a)(1)).pipe(Object(p.a)((function(t){t.authority===f.a.CUSTOMER_USER&&(e.config.componentsData.dashboardScope="customer_user",e.config.componentsData.customerId=t.customerId)})),Object(u.b)((function(){return e.config.componentsData.customerId?e.customerService.getCustomer(e.config.componentsData.customerId):Object(o.a)(null)})),Object(m.a)((function(t){return t?t.additionalInfo&&t.additionalInfo.isPublic?e.config.tableTitle=e.translate.instant("customer.public-dashboards"):e.config.tableTitle=t.title+": "+e.translate.instant("dashboard.dashboards"):e.config.tableTitle=e.translate.instant("dashboard.dashboards"),e.config.columns=e.configureColumns(e.config.componentsData.dashboardScope),e.configureEntityFunctions(e.config.componentsData.dashboardScope),e.config.cellActionDescriptors=e.configureCellActions(e.config.componentsData.dashboardScope),e.config.groupActionDescriptors=e.configureGroupActions(e.config.componentsData.dashboardScope),e.config.addActionDescriptors=e.configureAddActions(e.config.componentsData.dashboardScope),e.config.addEnabled="customer_user"!==e.config.componentsData.dashboardScope,e.config.entitiesDeleteEnabled="tenant"===e.config.componentsData.dashboardScope,e.config.deleteEnabled=function(){return"tenant"===e.config.componentsData.dashboardScope},e.config})))},t.prototype.configureColumns=function(t){var e=[new a.a("createdTime","common.created-time",this.datePipe,"150px"),new a.c("title","dashboard.title","50%")];return"tenant"===t&&e.push(new a.c("customersTitle","dashboard.assignedToCustomers","50%",(function(t){return Object(b.a)(t)}),(function(){return{}}),!1),new a.c("dashboardIsPublic","dashboard.public","60px",(function(t){return Object(a.e)(Object(b.c)(t))}),(function(){return{}}),!1)),e},t.prototype.configureEntityFunctions=function(t){var e=this;"tenant"===t?(this.config.entitiesFetchFunction=function(t){return e.dashboardService.getTenantDashboards(t)},this.config.deleteEntity=function(t){return e.dashboardService.deleteDashboard(t.id)}):(this.config.entitiesFetchFunction=function(t){return e.dashboardService.getCustomerDashboards(e.config.componentsData.customerId,t)},this.config.deleteEntity=function(t){return e.dashboardService.unassignDashboardFromCustomer(e.config.componentsData.customerId,t.id)})},t.prototype.configureCellActions=function(t){var e=this,n=[];return n.push({name:this.translate.instant("dashboard.open-dashboard"),icon:"dashboard",isEnabled:function(){return!0},onAction:function(t,n){return e.openDashboard(t,n)}}),"tenant"===t&&n.push({name:this.translate.instant("dashboard.export"),icon:"file_download",isEnabled:function(){return!0},onAction:function(t,n){return e.exportDashboard(t,n)}},{name:this.translate.instant("dashboard.make-public"),icon:"share",isEnabled:function(t){return!Object(b.c)(t)},onAction:function(t,n){return e.makePublic(t,n)}},{name:this.translate.instant("dashboard.make-private"),icon:"reply",isEnabled:function(t){return Object(b.c)(t)},onAction:function(t,n){return e.makePrivate(t,n)}},{name:this.translate.instant("dashboard.manage-assigned-customers"),icon:"assignment_ind",isEnabled:function(){return!0},onAction:function(t,n){return e.manageAssignedCustomers(t,n)}}),"customer"===t&&n.push({name:this.translate.instant("dashboard.export"),icon:"file_download",isEnabled:function(){return!0},onAction:function(t,n){return e.exportDashboard(t,n)}},{name:this.translate.instant("dashboard.make-private"),icon:"reply",isEnabled:function(t){return Object(b.b)(t,e.config.componentsData.customerId)},onAction:function(t,n){return e.makePrivate(t,n)}},{name:this.translate.instant("dashboard.unassign-from-customer"),icon:"assignment_return",isEnabled:function(t){return!Object(b.b)(t,e.config.componentsData.customerId)},onAction:function(t,n){return e.unassignFromCustomer(t,n,e.config.componentsData.customerId)}}),n},t.prototype.configureGroupActions=function(t){var e=this,n=[];return"tenant"===t&&(n.push({name:this.translate.instant("dashboard.assign-dashboards"),icon:"assignment_ind",isEnabled:!0,onAction:function(t,n){return e.assignDashboardsToCustomers(t,n.map((function(t){return t.id.id})))}}),n.push({name:this.translate.instant("dashboard.unassign-dashboards"),icon:"assignment_return",isEnabled:!0,onAction:function(t,n){return e.unassignDashboardsFromCustomers(t,n.map((function(t){return t.id.id})))}})),"customer"===t&&n.push({name:this.translate.instant("dashboard.unassign-dashboards"),icon:"assignment_return",isEnabled:!0,onAction:function(t,n){return e.unassignDashboardsFromCustomer(t,n.map((function(t){return t.id.id})),e.config.componentsData.customerId)}}),n},t.prototype.configureAddActions=function(t){var e=this,n=[];return"tenant"===t&&n.push({name:this.translate.instant("dashboard.create-new-dashboard"),icon:"insert_drive_file",isEnabled:function(){return!0},onAction:function(t){return e.config.table.addEntity(t)}},{name:this.translate.instant("dashboard.import"),icon:"file_upload",isEnabled:function(){return!0},onAction:function(t){return e.importDashboard(t)}}),"customer"===t&&n.push({name:this.translate.instant("dashboard.assign-new-dashboard"),icon:"add",isEnabled:function(){return!0},onAction:function(t){return e.addDashboardsToCustomer(t)}}),n},t.prototype.openDashboard=function(t,e){t&&t.stopPropagation(),"customer"===this.config.componentsData.dashboardScope?this.router.navigateByUrl("customers/"+this.config.componentsData.customerId+"/dashboards/"+e.id.id):this.router.navigateByUrl("dashboards/"+e.id.id)},t.prototype.importDashboard=function(t){var e=this;this.importExport.importDashboard().subscribe((function(t){t&&e.config.table.updateData()}))},t.prototype.exportDashboard=function(t,e){t&&t.stopPropagation(),this.importExport.exportDashboard(e.id.id)},t.prototype.addDashboardsToCustomer=function(t){var e=this;t&&t.stopPropagation(),this.dialog.open(y.a,{disableClose:!0,panelClass:["tb-dialog","tb-fullscreen-dialog"],data:{customerId:this.config.componentsData.customerId,entityType:r.b.DASHBOARD}}).afterClosed().subscribe((function(t){t&&e.config.table.updateData()}))},t.prototype.makePublic=function(t,e){var n=this;t&&t.stopPropagation(),this.dashboardService.makeDashboardPublic(e.id.id).subscribe((function(t){n.dialog.open(S.a,{disableClose:!0,panelClass:["tb-dialog","tb-fullscreen-dialog"],data:{dashboard:t}}).afterClosed().subscribe((function(){n.config.table.updateData()}))}))},t.prototype.makePrivate=function(t,e){var n=this;t&&t.stopPropagation(),this.dialogService.confirm(this.translate.instant("dashboard.make-private-dashboard-title",{dashboardTitle:e.title}),this.translate.instant("dashboard.make-private-dashboard-text"),this.translate.instant("action.no"),this.translate.instant("action.yes"),!0).subscribe((function(t){t&&n.dashboardService.makeDashboardPrivate(e.id.id).subscribe((function(){n.config.table.updateData()}))}))},t.prototype.manageAssignedCustomers=function(t,e){var n=e.assignedCustomers?e.assignedCustomers.map((function(t){return t.customerId.id})):[];this.showManageAssignedCustomersDialog(t,[e.id.id],"manage",n)},t.prototype.assignDashboardsToCustomers=function(t,e){this.showManageAssignedCustomersDialog(t,e,"assign")},t.prototype.unassignDashboardsFromCustomers=function(t,e){this.showManageAssignedCustomersDialog(t,e,"unassign")},t.prototype.showManageAssignedCustomersDialog=function(t,e,n,i){var a=this;t&&t.stopPropagation(),this.dialog.open(C.a,{disableClose:!0,panelClass:["tb-dialog","tb-fullscreen-dialog"],data:{dashboardIds:e,actionType:n,assignedCustomersIds:i}}).afterClosed().subscribe((function(t){t&&a.config.table.updateData()}))},t.prototype.unassignFromCustomer=function(t,e,n){var i=this;t&&t.stopPropagation(),this.dialogService.confirm(this.translate.instant("dashboard.unassign-dashboard-title",{dashboardTitle:e.title}),this.translate.instant("dashboard.unassign-dashboard-text"),this.translate.instant("action.no"),this.translate.instant("action.yes"),!0).subscribe((function(t){t&&i.dashboardService.unassignDashboardFromCustomer(n,e.id.id).subscribe((function(){i.config.table.updateData()}))}))},t.prototype.unassignDashboardsFromCustomer=function(t,e,n){var i=this;t&&t.stopPropagation(),this.dialogService.confirm(this.translate.instant("dashboard.unassign-dashboards-title",{count:e.length}),this.translate.instant("dashboard.unassign-dashboards-text"),this.translate.instant("action.no"),this.translate.instant("action.yes"),!0).subscribe((function(t){if(t){var a=[];e.forEach((function(t){a.push(i.dashboardService.unassignDashboardFromCustomer(n,t))})),Object(s.a)(a).subscribe((function(){i.config.table.updateData()}))}}))},t.prototype.onDashboardAction=function(t){switch(t.action){case"open":return this.openDashboard(t.event,t.entity),!0;case"export":return this.exportDashboard(t.event,t.entity),!0;case"makePublic":return this.makePublic(t.event,t.entity),!0;case"makePrivate":return this.makePrivate(t.event,t.entity),!0;case"manageAssignedCustomers":return this.manageAssignedCustomers(t.event,t.entity),!0;case"unassignFromCustomer":return this.unassignFromCustomer(t.event,t.entity,this.config.componentsData.customerId),!0}return!1},t.\u0275fac=function(e){return new(e||t)(i["\u0275\u0275inject"](l.Store),i["\u0275\u0275inject"](v.a),i["\u0275\u0275inject"](h.a),i["\u0275\u0275inject"](g.a),i["\u0275\u0275inject"](E.a),i["\u0275\u0275inject"](I.TranslateService),i["\u0275\u0275inject"](O.DatePipe),i["\u0275\u0275inject"](T.Router),i["\u0275\u0275inject"](M.MatDialog))},t.\u0275prov=i["\u0275\u0275defineInjectable"]({token:t,factory:t.\u0275fac}),t}();!function(){i["\u0275setClassMetadata"](F,[{type:i.Injectable}],(function(){return[{type:l.Store},{type:v.a},{type:h.a},{type:g.a},{type:E.a},{type:I.TranslateService},{type:O.DatePipe},{type:T.Router},{type:M.MatDialog}]}),null)}()},cXYG:function(t,e,n){"use strict";n.d(e,"a",(function(){return O}));var i=n("fXoL"),a=n("3Pt+"),r=n("xw5a"),o=n("XiUz"),s=n("znSr"),l=n("ofXK"),c=n("sYmb"),d=n("kmnG"),p=n("d3UM"),u=n("FKr1"),m=n("qFsG"),f=n("gl+N"),h=n("bSwM"),g=n("bTqV"),y=n("Qu3c"),b=n("NFeN");function v(t,e){1&t&&(i["\u0275\u0275elementStart"](0,"mat-form-field",7),i["\u0275\u0275element"](1,"mat-label"),i["\u0275\u0275element"](2,"input",15),i["\u0275\u0275pipe"](3,"translate"),i["\u0275\u0275elementEnd"]()),2&t&&(i["\u0275\u0275advance"](2),i["\u0275\u0275propertyInterpolate"]("placeholder",i["\u0275\u0275pipeBind1"](3,1,"filter.value")))}function x(t,e){1&t&&(i["\u0275\u0275elementStart"](0,"mat-form-field",7),i["\u0275\u0275element"](1,"mat-label"),i["\u0275\u0275element"](2,"input",16),i["\u0275\u0275pipe"](3,"translate"),i["\u0275\u0275elementEnd"]()),2&t&&(i["\u0275\u0275advance"](2),i["\u0275\u0275propertyInterpolate"]("placeholder",i["\u0275\u0275pipeBind1"](3,1,"filter.value")))}function C(t,e){1&t&&i["\u0275\u0275element"](0,"tb-datetime",17),2&t&&i["\u0275\u0275property"]("showLabel",!1)}function S(t,e){if(1&t&&(i["\u0275\u0275elementStart"](0,"mat-checkbox",18),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&t){var n=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,1,n.filterPredicateValueFormGroup.get("defaultValue").value?"value.true":"value.false")," ")}}function w(t,e){if(1&t&&(i["\u0275\u0275elementStart"](0,"mat-option",9),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&t){var n=e.$implicit,a=i["\u0275\u0275nextContext"]();i["\u0275\u0275property"]("value",n),i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,2,a.dynamicValueSourceTypeTranslations.get(n))," ")}}function E(t,e){1&t&&(i["\u0275\u0275elementStart"](0,"div",19),i["\u0275\u0275elementStart"](1,"mat-checkbox",20),i["\u0275\u0275text"](2),i["\u0275\u0275pipe"](3,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](4,"div",4),i["\u0275\u0275text"](5,"filter.source-attribute-not-set"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()),2&t&&(i["\u0275\u0275advance"](2),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](3,1,"filter.inherit-owner")," "))}function I(t,e){if(1&t){var n=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"button",21),i["\u0275\u0275listener"]("click",(function(){i["\u0275\u0275restoreView"](n);var t=i["\u0275\u0275nextContext"]();return t.dynamicMode=!t.dynamicMode})),i["\u0275\u0275pipe"](1,"translate"),i["\u0275\u0275element"](2,"mat-icon",22),i["\u0275\u0275elementEnd"]()}if(2&t){var a=i["\u0275\u0275nextContext"]();i["\u0275\u0275propertyInterpolate"]("matTooltip",i["\u0275\u0275pipeBind1"](1,2,a.dynamicMode?"filter.switch-to-default-value":"filter.switch-to-dynamic-value")),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("svgIcon",a.dynamicMode?"mdi:numeric":"mdi:variable")}}var O=function(){function t(t){this.fb=t,this.inheritModeForSources=[r.d.CURRENT_CUSTOMER,r.d.CURRENT_DEVICE],this.onlyUserDynamicSource=!1,this.valueTypeEnum=r.f,this.dynamicValueSourceTypes=[r.d.CURRENT_TENANT,r.d.CURRENT_CUSTOMER,r.d.CURRENT_USER],this.dynamicValueSourceTypeTranslations=r.r,this.dynamicMode=!1,this.inheritMode=!1,this.allow=!0,this.propagateChange=null}return Object.defineProperty(t.prototype,"allowUserDynamicSource",{set:function(t){this.dynamicValueSourceTypes=[r.d.CURRENT_TENANT,r.d.CURRENT_CUSTOMER],this.allow=t,t?this.dynamicValueSourceTypes.push(r.d.CURRENT_USER):this.dynamicValueSourceTypes.push(r.d.CURRENT_DEVICE)},enumerable:!1,configurable:!0}),t.prototype.ngOnInit=function(){var t,e,n=this;switch(this.valueType){case r.f.STRING:t="",e=[];break;case r.f.NUMERIC:t=0,e=[a.Validators.required];break;case r.f.BOOLEAN:t=!1,e=[];break;case r.f.DATE_TIME:t=Date.now(),e=[a.Validators.required]}this.filterPredicateValueFormGroup=this.fb.group({defaultValue:[t,e],dynamicValue:this.fb.group({sourceType:[null],sourceAttribute:[null],inherit:[!1]})}),this.filterPredicateValueFormGroup.get("dynamicValue").get("sourceType").valueChanges.subscribe((function(t){t||n.filterPredicateValueFormGroup.get("dynamicValue").get("sourceAttribute").patchValue(null,{emitEvent:!1}),n.updateShowInheritMode(t)})),this.filterPredicateValueFormGroup.valueChanges.subscribe((function(){n.updateModel()}))},t.prototype.registerOnChange=function(t){this.propagateChange=t},t.prototype.registerOnTouched=function(t){},t.prototype.setDisabledState=function(t){this.disabled=t,this.disabled?this.filterPredicateValueFormGroup.disable({emitEvent:!1}):this.filterPredicateValueFormGroup.enable({emitEvent:!1})},t.prototype.writeValue=function(t){var e;this.filterPredicateValueFormGroup.get("defaultValue").patchValue(t.defaultValue,{emitEvent:!1}),this.filterPredicateValueFormGroup.get("dynamicValue.sourceType").patchValue(t.dynamicValue?t.dynamicValue.sourceType:null,{emitEvent:!1}),this.filterPredicateValueFormGroup.get("dynamicValue.sourceAttribute").patchValue(t.dynamicValue?t.dynamicValue.sourceAttribute:null,{emitEvent:!1}),this.filterPredicateValueFormGroup.get("dynamicValue.inherit").patchValue(!!t.dynamicValue&&t.dynamicValue.inherit,{emitEvent:!1}),this.updateShowInheritMode(null===(e=null==t?void 0:t.dynamicValue)||void 0===e?void 0:e.sourceType)},t.prototype.updateModel=function(){var t=null;this.filterPredicateValueFormGroup.valid&&(t=this.filterPredicateValueFormGroup.getRawValue()).dynamicValue&&(t.dynamicValue.sourceType&&t.dynamicValue.sourceAttribute||(t.dynamicValue=null)),this.propagateChange(t)},t.prototype.updateShowInheritMode=function(t){this.inheritModeForSources.includes(t)?this.inheritMode=!0:(this.filterPredicateValueFormGroup.get("dynamicValue.inherit").patchValue(!1,{emitEvent:!1}),this.inheritMode=!1)},t.\u0275fac=function(e){return new(e||t)(i["\u0275\u0275directiveInject"](a.FormBuilder))},t.\u0275cmp=i["\u0275\u0275defineComponent"]({type:t,selectors:[["tb-filter-predicate-value"]],inputs:{disabled:"disabled",allowUserDynamicSource:"allowUserDynamicSource",onlyUserDynamicSource:"onlyUserDynamicSource",valueType:"valueType"},features:[i["\u0275\u0275ProvidersFeature"]([{provide:a.NG_VALUE_ACCESSOR,useExisting:Object(i.forwardRef)((function(){return t})),multi:!0}])],decls:31,vars:21,consts:[["fxFlex","","fxLayout","row","fxLayoutAlign","start center","fxLayoutGap","8px",3,"formGroup"],["fxFlex","","fxLayout","column",3,"fxShow"],["fxLayout","column",3,"ngSwitch"],[3,"ngSwitchCase"],["translate","",1,"tb-hint"],["formGroupName","dynamicValue","fxLayout","row","fxLayoutAlign","start center","fxLayoutGap","8px"],["fxFlex","35","fxLayout","column"],["floatLabel","always","hideRequiredMarker","",1,"mat-block"],["formControlName","sourceType",3,"placeholder"],[3,"value"],[3,"value",4,"ngFor","ngForOf"],["fxFlex","","fxLayout","column"],["matInput","","formControlName","sourceAttribute",3,"placeholder"],["fxLayout","column","style","padding-top: 6px",4,"ngIf"],["mat-icon-button","","class","mat-elevation-z1 tb-mat-32","color","primary","type","button","matTooltipPosition","above",3,"matTooltip","click",4,"ngIf"],["matInput","","formControlName","defaultValue",3,"placeholder"],["required","","type","number","matInput","","formControlName","defaultValue",3,"placeholder"],["formControlName","defaultValue","dateText","filter.date","timeText","filter.time","required","",3,"showLabel"],["formControlName","defaultValue"],["fxLayout","column",2,"padding-top","6px"],["formControlName","inherit"],["mat-icon-button","","color","primary","type","button","matTooltipPosition","above",1,"mat-elevation-z1","tb-mat-32",3,"matTooltip","click"],[1,"tb-mat-20",3,"svgIcon"]],template:function(t,e){1&t&&(i["\u0275\u0275elementStart"](0,"div",0),i["\u0275\u0275elementStart"](1,"div",1),i["\u0275\u0275elementStart"](2,"div",2),i["\u0275\u0275template"](3,v,4,3,"ng-template",3),i["\u0275\u0275template"](4,x,4,3,"ng-template",3),i["\u0275\u0275template"](5,C,1,1,"ng-template",3),i["\u0275\u0275template"](6,S,3,3,"ng-template",3),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](7,"div",4),i["\u0275\u0275text"](8,"filter.default-value"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](9,"div",1),i["\u0275\u0275elementStart"](10,"div",5),i["\u0275\u0275elementStart"](11,"div",6),i["\u0275\u0275elementStart"](12,"mat-form-field",7),i["\u0275\u0275element"](13,"mat-label"),i["\u0275\u0275elementStart"](14,"mat-select",8),i["\u0275\u0275pipe"](15,"translate"),i["\u0275\u0275elementStart"](16,"mat-option",9),i["\u0275\u0275text"](17),i["\u0275\u0275pipe"](18,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](19,w,3,4,"mat-option",10),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](20,"div",4),i["\u0275\u0275text"](21,"filter.dynamic-source-type"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](22,"div",11),i["\u0275\u0275elementStart"](23,"mat-form-field",7),i["\u0275\u0275element"](24,"mat-label"),i["\u0275\u0275element"](25,"input",12),i["\u0275\u0275pipe"](26,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](27,"div",4),i["\u0275\u0275text"](28,"filter.source-attribute"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](29,E,6,3,"div",13),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](30,I,3,4,"button",14),i["\u0275\u0275elementEnd"]()),2&t&&(i["\u0275\u0275property"]("formGroup",e.filterPredicateValueFormGroup),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("fxShow",!e.dynamicMode&&!e.onlyUserDynamicSource),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngSwitch",e.valueType),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngSwitchCase",e.valueTypeEnum.STRING),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngSwitchCase",e.valueTypeEnum.NUMERIC),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngSwitchCase",e.valueTypeEnum.DATE_TIME),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngSwitchCase",e.valueTypeEnum.BOOLEAN),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("fxShow",e.dynamicMode||e.onlyUserDynamicSource),i["\u0275\u0275advance"](5),i["\u0275\u0275propertyInterpolate"]("placeholder",i["\u0275\u0275pipeBind1"](15,15,"filter.dynamic-source-type")),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("value",null),i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](18,17,"filter.no-dynamic-value")," "),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngForOf",e.dynamicValueSourceTypes),i["\u0275\u0275advance"](6),i["\u0275\u0275propertyInterpolate"]("placeholder",i["\u0275\u0275pipeBind1"](26,19,"filter.source-attribute")),i["\u0275\u0275advance"](4),i["\u0275\u0275property"]("ngIf",!e.allow&&e.inheritMode),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",!e.onlyUserDynamicSource))},directives:[o.b,o.f,o.e,o.g,a.NgControlStatusGroup,a.FormGroupDirective,s.d,l.NgSwitch,l.NgSwitchCase,c.TranslateDirective,a.FormGroupName,d.MatFormField,d.MatLabel,p.MatSelect,a.NgControlStatus,a.FormControlName,u.MatOption,l.NgForOf,m.MatInput,a.DefaultValueAccessor,l.NgIf,a.NumberValueAccessor,a.RequiredValidator,f.a,h.MatCheckbox,g.MatButton,y.MatTooltip,b.MatIcon],pipes:[c.TranslatePipe],styles:["[_nghost-%COMP%]   .tb-hint[_ngcontent-%COMP%], [_nghost-%COMP%]     mat-form-field .mat-form-field-wrapper{padding-bottom:0}[_nghost-%COMP%]     mat-form-field .mat-form-field-wrapper .mat-form-field-infix{border-top-width:.2em;width:auto;min-width:auto}[_nghost-%COMP%]     mat-form-field .mat-form-field-wrapper .mat-form-field-underline{bottom:0}"]}),t}();!function(){i["\u0275setClassMetadata"](O,[{type:i.Component,args:[{selector:"tb-filter-predicate-value",templateUrl:"./filter-predicate-value.component.html",styleUrls:["./filter-predicate.scss"],providers:[{provide:a.NG_VALUE_ACCESSOR,useExisting:Object(i.forwardRef)((function(){return O})),multi:!0}]}]}],(function(){return[{type:a.FormBuilder}]}),{disabled:[{type:i.Input}],allowUserDynamicSource:[{type:i.Input}],onlyUserDynamicSource:[{type:i.Input}],valueType:[{type:i.Input}]})}()},"ct/f":function(t,e,n){"use strict";n.d(e,"a",(function(){return f}));var i=n("mrSG"),a=n("fXoL"),r=n("FKr1"),o=n("0IaG"),s=n("3Pt+"),l=n("gmuX"),c=n("xw5a"),d=n("l7P3"),p=n("tyNb");function u(t,e){if(1&t&&(a["\u0275\u0275elementStart"](0,"mat-option",15),a["\u0275\u0275text"](1),a["\u0275\u0275pipe"](2,"translate"),a["\u0275\u0275elementEnd"]()),2&t){var n=e.$implicit,i=a["\u0275\u0275nextContext"]();a["\u0275\u0275property"]("value",n),a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](2,2,i.complexOperationTranslations.get(i.complexOperationEnum[n]))," ")}}function m(t,e){if(1&t&&(a["\u0275\u0275elementStart"](0,"button",16),a["\u0275\u0275pipe"](1,"async"),a["\u0275\u0275text"](2),a["\u0275\u0275pipe"](3,"translate"),a["\u0275\u0275elementEnd"]()),2&t){var n=a["\u0275\u0275nextContext"]();a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](1,2,n.isLoading$)||n.complexFilterFormGroup.invalid||!n.complexFilterFormGroup.dirty),a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](3,4,n.isAdd?"action.add":"action.update")," ")}}var f=function(t){function e(e,n,i,a,r,o){var l=t.call(this,e,n,r)||this;return l.store=e,l.router=n,l.data=i,l.errorStateMatcher=a,l.dialogRef=r,l.fb=o,l.complexOperations=Object.keys(c.b),l.complexOperationEnum=c.b,l.complexOperationTranslations=c.k,l.submitted=!1,l.isAdd=l.data.isAdd,l.complexFilterFormGroup=l.fb.group({operation:[l.data.complexPredicate.operation,[s.Validators.required]],predicates:[l.data.complexPredicate.predicates,[s.Validators.required]]}),l.data.readonly&&l.complexFilterFormGroup.disable({emitEvent:!1}),l}return Object(i.d)(e,t),e.prototype.ngOnInit=function(){},e.prototype.isErrorState=function(t,e){var n=this.errorStateMatcher.isErrorState(t,e),i=!!(t&&t.invalid&&this.submitted);return n||i},e.prototype.cancel=function(){this.dialogRef.close(null)},e.prototype.save=function(){if(this.submitted=!0,this.complexFilterFormGroup.valid){var t=this.complexFilterFormGroup.getRawValue();t.type=c.g.COMPLEX,this.dialogRef.close(t)}},e.\u0275fac=function(t){return new(t||e)(a["\u0275\u0275directiveInject"](d.Store),a["\u0275\u0275directiveInject"](p.Router),a["\u0275\u0275directiveInject"](o.MAT_DIALOG_DATA),a["\u0275\u0275directiveInject"](r.ErrorStateMatcher,4),a["\u0275\u0275directiveInject"](o.MatDialogRef),a["\u0275\u0275directiveInject"](s.FormBuilder))},e.\u0275cmp=a["\u0275\u0275defineComponent"]({type:e,selectors:[["tb-complex-filter-predicate-dialog"]],features:[a["\u0275\u0275ProvidersFeature"]([{provide:r.ErrorStateMatcher,useExisting:e}]),a["\u0275\u0275InheritDefinitionFeature"]],decls:23,vars:18,consts:[[2,"width","900px",3,"formGroup","ngSubmit"],["color","primary"],["translate",""],["fxFlex",""],["mat-icon-button","","type","button",3,"click"],[1,"material-icons"],["mat-dialog-content",""],["fxLayout","column",3,"disabled"],[1,"mat-block"],["required","","formControlName","operation"],[3,"value",4,"ngFor","ngForOf"],["formControlName","predicates",3,"valueType","displayUserParameters","allowUserDynamicSource","onlyUserDynamicSource","operation","key"],["mat-dialog-actions","","fxLayoutAlign","end center"],["mat-button","","color","primary","type","button","cdkFocusInitial","",3,"disabled","click"],["mat-raised-button","","color","primary","type","submit",3,"disabled",4,"ngIf"],[3,"value"],["mat-raised-button","","color","primary","type","submit",3,"disabled"]],template:function(t,e){1&t&&(a["\u0275\u0275elementStart"](0,"form",0),a["\u0275\u0275listener"]("ngSubmit",(function(){return e.save()})),a["\u0275\u0275elementStart"](1,"mat-toolbar",1),a["\u0275\u0275elementStart"](2,"h2",2),a["\u0275\u0275text"](3,"filter.complex-filter"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](4,"span",3),a["\u0275\u0275elementStart"](5,"button",4),a["\u0275\u0275listener"]("click",(function(){return e.cancel()})),a["\u0275\u0275elementStart"](6,"mat-icon",5),a["\u0275\u0275text"](7,"close"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](8,"div",6),a["\u0275\u0275elementStart"](9,"fieldset",7),a["\u0275\u0275pipe"](10,"async"),a["\u0275\u0275elementStart"](11,"mat-form-field",8),a["\u0275\u0275elementStart"](12,"mat-label",2),a["\u0275\u0275text"](13,"filter.operation.operation"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](14,"mat-select",9),a["\u0275\u0275template"](15,u,3,4,"mat-option",10),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](16,"tb-filter-predicate-list",11),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](17,"div",12),a["\u0275\u0275elementStart"](18,"button",13),a["\u0275\u0275listener"]("click",(function(){return e.cancel()})),a["\u0275\u0275pipe"](19,"async"),a["\u0275\u0275text"](20),a["\u0275\u0275pipe"](21,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275template"](22,m,4,6,"button",14),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()),2&t&&(a["\u0275\u0275property"]("formGroup",e.complexFilterFormGroup),a["\u0275\u0275advance"](9),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](10,12,e.isLoading$)),a["\u0275\u0275advance"](6),a["\u0275\u0275property"]("ngForOf",e.complexOperations),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("valueType",e.data.valueType)("displayUserParameters",e.data.displayUserParameters)("allowUserDynamicSource",e.data.allowUserDynamicSource)("onlyUserDynamicSource",e.data.onlyUserDynamicSource)("operation",e.complexFilterFormGroup.get("operation").value)("key",e.data.key),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](19,14,e.isLoading$)),a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](21,16,e.data.readonly?"action.close":"action.cancel")," "),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("ngIf",!e.data.readonly))},encapsulation:2}),e}(l.a);!function(){a["\u0275setClassMetadata"](f,[{type:a.Component,args:[{selector:"tb-complex-filter-predicate-dialog",templateUrl:"./complex-filter-predicate-dialog.component.html",providers:[{provide:r.ErrorStateMatcher,useExisting:f}],styleUrls:[]}]}],(function(){return[{type:d.Store},{type:p.Router},{type:void 0,decorators:[{type:a.Inject,args:[o.MAT_DIALOG_DATA]}]},{type:r.ErrorStateMatcher,decorators:[{type:a.SkipSelf}]},{type:o.MatDialogRef},{type:s.FormBuilder}]}),null)}()},dSnI:function(t,e,n){"use strict";n.d(e,"a",(function(){return h}));var i=n("mrSG"),a=n("fXoL"),r=n("JTB5"),o=n("90vD"),s=n("l7P3"),l=n("kmnG"),c=n("sYmb"),d=n("d3UM"),p=n("3Pt+"),u=n("ofXK"),m=n("FKr1");function f(t,e){if(1&t&&(a["\u0275\u0275elementStart"](0,"mat-option",4),a["\u0275\u0275text"](1),a["\u0275\u0275pipe"](2,"translate"),a["\u0275\u0275elementEnd"]()),2&t){var n=e.$implicit,i=a["\u0275\u0275nextContext"]();a["\u0275\u0275property"]("value",n),a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](2,2,i.eventTypeTranslationsMap.get(n))," ")}}var h=function(t){function e(e){var n=t.call(this,e)||this;return n.store=e,n.eventTypeTranslationsMap=o.c,n}return Object(i.d)(e,t),Object.defineProperty(e.prototype,"eventTableConfig",{get:function(){return this.entitiesTableConfig},enumerable:!1,configurable:!0}),e.prototype.eventTypeChanged=function(t){this.eventTableConfig.eventType=t,this.eventTableConfig.table.resetSortAndFilter(!0,!0)},e.\u0275fac=function(t){return new(t||e)(a["\u0275\u0275directiveInject"](s.Store))},e.\u0275cmp=a["\u0275\u0275defineComponent"]({type:e,selectors:[["tb-event-table-header"]],features:[a["\u0275\u0275InheritDefinitionFeature"]],decls:5,vars:2,consts:[[1,"mat-block"],["translate",""],[3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(t,e){1&t&&(a["\u0275\u0275elementStart"](0,"mat-form-field",0),a["\u0275\u0275elementStart"](1,"mat-label",1),a["\u0275\u0275text"](2,"event.event-type"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](3,"mat-select",2),a["\u0275\u0275listener"]("ngModelChange",(function(t){return e.eventTypeChanged(t)})),a["\u0275\u0275template"](4,f,3,4,"mat-option",3),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()),2&t&&(a["\u0275\u0275advance"](3),a["\u0275\u0275property"]("ngModel",e.eventTableConfig.eventType),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngForOf",e.eventTableConfig.eventTypes))},directives:[l.MatFormField,l.MatLabel,c.TranslateDirective,d.MatSelect,p.NgControlStatus,p.NgModel,u.NgForOf,m.MatOption],pipes:[c.TranslatePipe],styles:["[_nghost-%COMP%]{padding-right:8px;min-width:160px}[_nghost-%COMP%]     mat-form-field{font-size:16px;width:200px}[_nghost-%COMP%]     mat-form-field .mat-form-field-wrapper{padding-bottom:0}[_nghost-%COMP%]     mat-form-field .mat-form-field-underline{bottom:0}@media screen and (max-width:599px){[_nghost-%COMP%]     mat-form-field{width:100%}[_nghost-%COMP%]     mat-form-field .mat-form-field-infix{width:auto!important}}"]}),e}(r.a);!function(){a["\u0275setClassMetadata"](h,[{type:a.Component,args:[{selector:"tb-event-table-header",templateUrl:"./event-table-header.component.html",styleUrls:["./event-table-header.component.scss"]}]}],(function(){return[{type:s.Store}]}),null)}()},dmmb:function(t,e,n){"use strict";n.d(e,"a",(function(){return f}));var i=n("fXoL"),a=n("Rf0i"),r=n("ofXK"),o=n("znSr"),s=n("bTqV"),l=n("Qu3c"),c=n("NFeN"),d=n("/t3+"),p=n("sYmb"),u=function(t,e){return{"is-fullscreen":t,"mat-elevation-z1":e}},m=["*"],f=function(){function t(){this.triggerClick=new i.EventEmitter}return t.prototype.ngOnInit=function(){},t.prototype.onTriggerClick=function(){this.triggerClick.emit()},t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=i["\u0275\u0275defineComponent"]({type:t,selectors:[["tb-dashboard-toolbar"]],inputs:{toolbarOpened:"toolbarOpened",forceFullscreen:"forceFullscreen"},outputs:{triggerClick:"triggerClick"},ngContentSelectors:m,decls:9,vars:8,consts:[["color","primary","direction","left",3,"isOpen","ngClass"],["mat-fab","","color","primary","matTooltipPosition","below",3,"matTooltip","click"],["color","primary"],[1,"mat-toolbar-tools"]],template:function(t,e){1&t&&(i["\u0275\u0275projectionDef"](),i["\u0275\u0275elementStart"](0,"mat-fab-toolbar",0),i["\u0275\u0275elementStart"](1,"mat-fab-trigger"),i["\u0275\u0275elementStart"](2,"button",1),i["\u0275\u0275listener"]("click",(function(){return e.onTriggerClick()})),i["\u0275\u0275pipe"](3,"translate"),i["\u0275\u0275elementStart"](4,"mat-icon"),i["\u0275\u0275text"](5,"more_horiz"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](6,"mat-toolbar",2),i["\u0275\u0275elementStart"](7,"mat-fab-actions",3),i["\u0275\u0275projection"](8),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()),2&t&&(i["\u0275\u0275property"]("isOpen",e.toolbarOpened)("ngClass",i["\u0275\u0275pureFunction2"](5,u,e.forceFullscreen,e.forceFullscreen&&e.toolbarOpened)),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("matTooltip",e.toolbarOpened?"":i["\u0275\u0275pipeBind1"](3,3,"dashboard.open-toolbar")))},directives:[a.b,r.NgClass,o.b,a.c,s.MatButton,l.MatTooltip,c.MatIcon,d.MatToolbar,a.a],pipes:[p.TranslatePipe],styles:["tb-dashboard-toolbar mat-fab-toolbar mat-fab-trigger .mat-fab{width:36px;height:36px;margin:4px 0 0 4px}tb-dashboard-toolbar mat-fab-toolbar mat-fab-trigger .mat-fab .mat-button-wrapper{padding:0}tb-dashboard-toolbar mat-fab-toolbar.is-fullscreen .mat-fab-toolbar-wrapper{height:84px}@media screen and (min-width:960px){tb-dashboard-toolbar mat-fab-toolbar.is-fullscreen .mat-fab-toolbar-wrapper{height:64px}}tb-dashboard-toolbar mat-fab-toolbar.is-fullscreen .mat-fab-toolbar-wrapper mat-toolbar,tb-dashboard-toolbar mat-fab-toolbar.is-fullscreen .mat-fab-toolbar-wrapper mat-toolbar .mat-toolbar-tools{height:80px;min-height:80px}@media screen and (min-width:960px){tb-dashboard-toolbar mat-fab-toolbar.is-fullscreen .mat-fab-toolbar-wrapper mat-toolbar,tb-dashboard-toolbar mat-fab-toolbar.is-fullscreen .mat-fab-toolbar-wrapper mat-toolbar .mat-toolbar-tools{height:64px;min-height:64px}}tb-dashboard-toolbar mat-fab-toolbar .mat-fab-toolbar-wrapper{height:84px}@media screen and (min-width:960px){tb-dashboard-toolbar mat-fab-toolbar .mat-fab-toolbar-wrapper{height:50px}}tb-dashboard-toolbar mat-fab-toolbar .mat-fab-toolbar-wrapper mat-toolbar,tb-dashboard-toolbar mat-fab-toolbar .mat-fab-toolbar-wrapper mat-toolbar .mat-toolbar-tools{height:80px;min-height:80px}@media screen and (min-width:960px){tb-dashboard-toolbar mat-fab-toolbar .mat-fab-toolbar-wrapper mat-toolbar,tb-dashboard-toolbar mat-fab-toolbar .mat-fab-toolbar-wrapper mat-toolbar .mat-toolbar-tools{height:50px;min-height:50px}}tb-dashboard-toolbar mat-fab-toolbar .mat-fab-toolbar-wrapper mat-toolbar mat-fab-actions{margin-top:0;font-size:16px}@media screen and (max-width:959px){tb-dashboard-toolbar mat-fab-toolbar .mat-fab-toolbar-wrapper mat-toolbar mat-fab-actions{height:80px;max-height:80px}}tb-dashboard-toolbar mat-fab-toolbar .mat-fab-toolbar-wrapper mat-toolbar mat-fab-actions .close-action{margin-right:-18px}tb-dashboard-toolbar mat-fab-toolbar .mat-fab-toolbar-wrapper mat-toolbar mat-fab-actions .mat-fab-action-item{width:100%;height:80px}@media screen and (min-width:960px){tb-dashboard-toolbar mat-fab-toolbar .mat-fab-toolbar-wrapper mat-toolbar mat-fab-actions .mat-fab-action-item{height:46px}}tb-dashboard-toolbar mat-fab-toolbar .mat-fab-toolbar-wrapper mat-toolbar mat-fab-actions .mat-fab-action-item .tb-dashboard-action-panels{height:80px}@media screen and (min-width:960px){tb-dashboard-toolbar mat-fab-toolbar .mat-fab-toolbar-wrapper mat-toolbar mat-fab-actions .mat-fab-action-item .tb-dashboard-action-panels{height:46px}}tb-dashboard-toolbar mat-fab-toolbar .mat-fab-toolbar-wrapper mat-toolbar mat-fab-actions .mat-fab-action-item .tb-dashboard-action-panels .tb-dashboard-action-panel{min-width:0;height:40px}@media screen and (max-width:959px){tb-dashboard-toolbar mat-fab-toolbar .mat-fab-toolbar-wrapper mat-toolbar mat-fab-actions .mat-fab-action-item .tb-dashboard-action-panels .tb-dashboard-action-panel mat-menu{margin:0}}@media screen and (min-width:960px){tb-dashboard-toolbar mat-fab-toolbar .mat-fab-toolbar-wrapper mat-toolbar mat-fab-actions .mat-fab-action-item .tb-dashboard-action-panels .tb-dashboard-action-panel{height:46px}}tb-dashboard-toolbar mat-fab-toolbar .mat-fab-toolbar-wrapper mat-toolbar mat-fab-actions .mat-fab-action-item .tb-dashboard-action-panels .tb-dashboard-action-panel>div{height:40px}@media screen and (min-width:960px){tb-dashboard-toolbar mat-fab-toolbar .mat-fab-toolbar-wrapper mat-toolbar mat-fab-actions .mat-fab-action-item .tb-dashboard-action-panels .tb-dashboard-action-panel>div{height:46px}}tb-dashboard-toolbar mat-fab-toolbar .mat-fab-toolbar-wrapper mat-toolbar mat-fab-actions .mat-fab-action-item .tb-dashboard-action-panels .tb-dashboard-action-panel mat-select{margin:0;pointer-events:all}tb-dashboard-toolbar mat-fab-toolbar .mat-fab-toolbar-wrapper mat-toolbar mat-fab-actions .mat-fab-action-item .tb-dashboard-action-panels .tb-dashboard-action-panel tb-states-component{pointer-events:all}tb-dashboard-toolbar mat-fab-toolbar .mat-fab-toolbar-wrapper mat-toolbar mat-fab-actions .mat-fab-action-item .tb-dashboard-action-panels .tb-dashboard-action-panel button.mat-icon-button:not(.tb-mat-32){min-width:40px}@media screen and (max-width:959px){tb-dashboard-toolbar mat-fab-toolbar .mat-fab-toolbar-wrapper mat-toolbar mat-fab-actions .mat-fab-action-item .tb-dashboard-action-panels .tb-dashboard-action-panel button.mat-icon-button:not(.tb-mat-32){min-width:28px;padding:2px;margin:0}tb-dashboard-toolbar mat-fab-toolbar .mat-fab-toolbar-wrapper mat-toolbar mat-fab-actions .mat-fab-action-item .tb-dashboard-action-panels .tb-dashboard-action-panel button.mat-icon-button:not(.tb-mat-32) .mat-button-wrapper{display:block;line-height:24px}}"],encapsulation:2}),t}();!function(){i["\u0275setClassMetadata"](f,[{type:i.Component,args:[{selector:"tb-dashboard-toolbar",templateUrl:"./dashboard-toolbar.component.html",styleUrls:["./dashboard-toolbar.component.scss"],encapsulation:i.ViewEncapsulation.None}]}],(function(){return[]}),{toolbarOpened:[{type:i.Input}],forceFullscreen:[{type:i.Input}],triggerClick:[{type:i.Output}]})}()},"do/i":function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var i=n("U3y+"),a=function(t){this.entityType=i.b.WIDGET_TYPE,this.id=t}},eIDA:function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));var i=n("fXoL"),a=n("3Pt+"),r=n("xw5a"),o=n("8LU1"),s=n("0IaG"),l=n("sYmb"),c=n("ofXK"),d=n("znSr"),p=function(t,e,n){return{disabled:t,required:e,nowrap:n}},u=function(){function t(t,e,n,i){this.dialog=t,this.fb=e,this.translate=n,this.datePipe=i,this.noFilterText=this.translate.instant("filter.no-filter-text"),this.addFilterPrompt=this.translate.instant("filter.add-filter-prompt"),this.nowrap=!1,this.requiredClass=!1,this.propagateChange=function(t){}}return Object.defineProperty(t.prototype,"required",{get:function(){return this.requiredValue},set:function(t){this.requiredValue=Object(o.coerceBooleanProperty)(t)},enumerable:!1,configurable:!0}),t.prototype.registerOnChange=function(t){this.propagateChange=t},t.prototype.registerOnTouched=function(t){},t.prototype.ngOnInit=function(){},t.prototype.setDisabledState=function(t){this.disabled=t},t.prototype.writeValue=function(t){this.updateFilterText(t)},t.prototype.updateFilterText=function(t){this.requiredClass=!1,t&&t.length?this.filterText=Object(r.F)(this.translate,this.datePipe,t):this.required&&!this.disabled?(this.filterText=this.addFilterPrompt,this.requiredClass=!0):this.filterText=this.noFilterText},t.\u0275fac=function(e){return new(e||t)(i["\u0275\u0275directiveInject"](s.MatDialog),i["\u0275\u0275directiveInject"](a.FormBuilder),i["\u0275\u0275directiveInject"](l.TranslateService),i["\u0275\u0275directiveInject"](c.DatePipe))},t.\u0275cmp=i["\u0275\u0275defineComponent"]({type:t,selectors:[["tb-filter-text"]],inputs:{required:"required",disabled:"disabled",noFilterText:"noFilterText",addFilterPrompt:"addFilterPrompt",nowrap:"nowrap"},features:[i["\u0275\u0275ProvidersFeature"]([{provide:a.NG_VALUE_ACCESSOR,useExisting:Object(i.forwardRef)((function(){return t})),multi:!0}])],decls:1,vars:6,consts:[[1,"tb-filter-text",3,"ngClass","innerHTML"]],template:function(t,e){1&t&&i["\u0275\u0275element"](0,"div",0),2&t&&i["\u0275\u0275property"]("ngClass",i["\u0275\u0275pureFunction3"](2,p,e.disabled,e.requiredClass,e.nowrap))("innerHTML",e.filterText,i["\u0275\u0275sanitizeHtml"])},directives:[c.NgClass,d.b],styles:["[_nghost-%COMP%]   .tb-filter-text[_ngcontent-%COMP%]{overflow-y:auto}[_nghost-%COMP%]   .tb-filter-text.disabled[_ngcontent-%COMP%]{opacity:.7}[_nghost-%COMP%]   .tb-filter-text.required[_ngcontent-%COMP%]{color:#f44336;padding:0 4px}[_nghost-%COMP%]   .tb-filter-text.nowrap[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden}[_nghost-%COMP%]     .tb-filter-text{line-height:1.8em}[_nghost-%COMP%]     .tb-filter-text span{display:inline-block;vertical-align:middle;line-height:1.4em}[_nghost-%COMP%]     .tb-filter-text .tb-filter-predicate{padding-right:4px;padding-left:4px}[_nghost-%COMP%]     .tb-filter-text .tb-filter-dynamic-source, [_nghost-%COMP%]     .tb-filter-text .tb-filter-entity-key, [_nghost-%COMP%]     .tb-filter-text .tb-filter-value{font-weight:700;border:1px groove rgba(0,0,0,.25);border-radius:4px;padding-left:4px;padding-right:4px}[_nghost-%COMP%]     .tb-filter-text .tb-filter-entity-key, [_nghost-%COMP%]     .tb-filter-text .tb-filter-value{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;max-width:150px}[_nghost-%COMP%]     .tb-filter-text .tb-filter-entity-key{color:#305680}[_nghost-%COMP%]     .tb-filter-text .tb-filter-value{color:#ff5722}[_nghost-%COMP%]     .tb-filter-text .tb-filter-simple-operation{font-size:.9em}[_nghost-%COMP%]     .tb-filter-text .tb-filter-complex-operation{font-weight:700}[_nghost-%COMP%]     .tb-filter-text .tb-filter-dynamic-value .tb-filter-dynamic-source, [_nghost-%COMP%]     .tb-filter-text .tb-filter-dynamic-value .tb-filter-value{color:#0c959c}[_nghost-%COMP%]     .tb-filter-text .tb-filter-bracket .tb-left-bracket, [_nghost-%COMP%]     .tb-filter-text .tb-filter-bracket .tb-right-bracket{font-size:1.2em}"]}),t}();!function(){i["\u0275setClassMetadata"](u,[{type:i.Component,args:[{selector:"tb-filter-text",templateUrl:"./filter-text.component.html",styleUrls:["./filter-text.component.scss"],providers:[{provide:a.NG_VALUE_ACCESSOR,useExisting:Object(i.forwardRef)((function(){return u})),multi:!0}]}]}],(function(){return[{type:s.MatDialog},{type:a.FormBuilder},{type:l.TranslateService},{type:c.DatePipe}]}),{required:[{type:i.Input}],disabled:[{type:i.Input}],noFilterText:[{type:i.Input}],addFilterPrompt:[{type:i.Input}],nowrap:[{type:i.Input}]})}()},eOYM:function(t,e,n){"use strict";n.d(e,"a",(function(){return v}));var i=n("fXoL"),a=n("UaJx"),r=n("S+vS"),o=n("mrSG"),s=n("qxrw"),l=n("U3y+"),c=n("4r/P"),d=n("UZbx"),p=n("o3UX"),u=n("10j8"),m=n("aX2P"),f=function(t){function e(e,n,i,a,r,o,u){void 0===o&&(o=null),void 0===u&&(u=d.b.ANY);var f=t.call(this)||this;return f.alarmService=e,f.dialogService=n,f.translate=i,f.datePipe=a,f.dialog=r,f.entityId=o,f.defaultSearchStatus=u,f.loadDataOnInit=!1,f.tableTitle="",f.useTimePageLink=!0,f.defaultTimewindowInterval=Object(m.H)(30*m.b),f.detailsPanelEnabled=!1,f.selectionEnabled=!1,f.searchEnabled=!0,f.addEnabled=!1,f.entitiesDeleteEnabled=!1,f.actionsColumnTitle="alarm.details",f.entityType=l.b.ALARM,f.entityTranslations=l.d.get(l.b.ALARM),f.entityResources={},f.searchStatus=u,f.headerComponent=p.a,f.entitiesFetchFunction=function(t){return f.fetchAlarms(t)},f.defaultSortOrder={property:"createdTime",direction:c.a.DESC},f.columns.push(new s.a("createdTime","alarm.created-time",f.datePipe,"150px")),f.columns.push(new s.c("originatorName","alarm.originator","25%",(function(t){return t.originatorName}),(function(t){return{}}),!1)),f.columns.push(new s.c("type","alarm.type","25%")),f.columns.push(new s.c("severity","alarm.severity","25%",(function(t){return f.translate.instant(d.h.get(t.severity))}),(function(t){return{fontWeight:"bold",color:d.g.get(t.severity)}}))),f.columns.push(new s.c("status","alarm.status","25%",(function(t){return f.translate.instant(d.i.get(t.status))}))),f.cellActionDescriptors.push({name:f.translate.instant("alarm.details"),icon:"more_horiz",isEnabled:function(){return!0},onAction:function(t,e){return f.showAlarmDetails(e)}}),f}return Object(o.d)(e,t),e.prototype.fetchAlarms=function(t){var e=new d.a(this.entityId,t,this.searchStatus,null,!0,null);return this.alarmService.getAlarms(e)},e.prototype.showAlarmDetails=function(t){var e=this;this.dialog.open(u.a,{disableClose:!0,panelClass:["tb-dialog","tb-fullscreen-dialog"],data:{alarmId:t.id.id,allowAcknowledgment:!0,allowClear:!0,displayDetails:!0}}).afterClosed().subscribe((function(t){t&&e.table.updateData()}))},e}(s.d),h=n("7ZKe"),g=n("sYmb"),y=n("ofXK"),b=n("0IaG"),v=function(){function t(t,e,n,i,a){this.alarmService=t,this.dialogService=e,this.translate=n,this.datePipe=i,this.dialog=a,this.activeValue=!1,this.dirtyValue=!1}return Object.defineProperty(t.prototype,"active",{set:function(t){this.activeValue!==t&&(this.activeValue=t,this.activeValue&&this.dirtyValue&&(this.dirtyValue=!1,this.entitiesTable.updateData()))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"entityId",{set:function(t){this.entityIdValue=t,this.alarmTableConfig&&this.alarmTableConfig.entityId!==t&&(this.alarmTableConfig.searchStatus=d.b.ANY,this.alarmTableConfig.entityId=t,this.entitiesTable.resetSortAndFilter(this.activeValue),this.activeValue||(this.dirtyValue=!0))},enumerable:!1,configurable:!0}),t.prototype.ngOnInit=function(){this.dirtyValue=!this.activeValue,this.alarmTableConfig=new f(this.alarmService,this.dialogService,this.translate,this.datePipe,this.dialog,this.entityIdValue,d.b.ANY)},t.\u0275fac=function(e){return new(e||t)(i["\u0275\u0275directiveInject"](h.a),i["\u0275\u0275directiveInject"](r.a),i["\u0275\u0275directiveInject"](g.TranslateService),i["\u0275\u0275directiveInject"](y.DatePipe),i["\u0275\u0275directiveInject"](b.MatDialog))},t.\u0275cmp=i["\u0275\u0275defineComponent"]({type:t,selectors:[["tb-alarm-table"]],viewQuery:function(t,e){var n;(1&t&&i["\u0275\u0275staticViewQuery"](a.a,!0),2&t)&&(i["\u0275\u0275queryRefresh"](n=i["\u0275\u0275loadQuery"]())&&(e.entitiesTable=n.first))},inputs:{active:"active",entityId:"entityId"},decls:1,vars:1,consts:[[3,"entitiesTableConfig"]],template:function(t,e){1&t&&i["\u0275\u0275element"](0,"tb-entities-table",0),2&t&&i["\u0275\u0275property"]("entitiesTableConfig",e.alarmTableConfig)},directives:[a.a],styles:["[_nghost-%COMP%]     tb-entities-table .mat-drawer-container{background-color:#fff}"]}),t}();!function(){i["\u0275setClassMetadata"](v,[{type:i.Component,args:[{selector:"tb-alarm-table",templateUrl:"./alarm-table.component.html",styleUrls:["./alarm-table.component.scss"]}]}],(function(){return[{type:h.a},{type:r.a},{type:g.TranslateService},{type:y.DatePipe},{type:b.MatDialog}]}),{active:[{type:i.Input}],entityId:[{type:i.Input}],entitiesTable:[{type:i.ViewChild,args:[a.a,{static:!0}]}]})}()},ec17:function(t,e,n){"use strict";n.d(e,"a",(function(){return $}));var i=n("mrSG"),a=n("fXoL"),r=n("3Pt+"),o=n("xKAQ"),s=n("qxrw"),l=n("G8Aa"),c=n("JIJk"),d=n("U3y+"),p=n("APwO"),u=n("/3Pq"),m=n("l7P3"),f=n("sYmb"),h=n("ofXK"),g=n("XiUz"),y=n("znSr"),b=n("kmnG"),v=n("qFsG"),x=n("E4Bx"),C=n("5U8l"),S=n("d3UM"),w=n("bTqV"),E=n("Dvla"),I=n("NFeN"),O=n("FKr1"),T=n("7EHt"),M=n("TpGD"),F=n("8yrD"),P=n("em8L"),D=n("xkYi");function k(t,e){if(1&t){var n=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementStart"](0,"div",16),a["\u0275\u0275elementStart"](1,"button",17),a["\u0275\u0275listener"]("click",(function(t){return a["\u0275\u0275restoreView"](n),a["\u0275\u0275nextContext"]().onEntityAction(t,"export")})),a["\u0275\u0275pipe"](2,"async"),a["\u0275\u0275text"](3),a["\u0275\u0275pipe"](4,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](5,"button",17),a["\u0275\u0275listener"]("click",(function(t){return a["\u0275\u0275restoreView"](n),a["\u0275\u0275nextContext"]().onEntityAction(t,"setDefault")})),a["\u0275\u0275pipe"](6,"async"),a["\u0275\u0275text"](7),a["\u0275\u0275pipe"](8,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](9,"button",17),a["\u0275\u0275listener"]("click",(function(t){return a["\u0275\u0275restoreView"](n),a["\u0275\u0275nextContext"]().onEntityAction(t,"delete")})),a["\u0275\u0275pipe"](10,"async"),a["\u0275\u0275text"](11),a["\u0275\u0275pipe"](12,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](13,"div",18),a["\u0275\u0275elementStart"](14,"button",19),a["\u0275\u0275listener"]("cbOnSuccess",(function(t){return a["\u0275\u0275restoreView"](n),a["\u0275\u0275nextContext"]().onDeviceProfileIdCopied(t)})),a["\u0275\u0275element"](15,"mat-icon",20),a["\u0275\u0275elementStart"](16,"span",5),a["\u0275\u0275text"](17,"device-profile.copyId"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()}if(2&t){var i=a["\u0275\u0275nextContext"]();a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](2,11,i.isLoading$))("fxShow",!i.isEdit),a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](4,13,"device-profile.export")," "),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](6,15,i.isLoading$))("fxShow",!(i.isEdit||null!=i.entity&&i.entity.default)),a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](8,17,"device-profile.set-default")," "),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](10,19,i.isLoading$))("fxShow",!i.hideDelete()&&!i.isEdit),a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](12,21,"device-profile.delete")," "),a["\u0275\u0275advance"](3),a["\u0275\u0275property"]("cbContent",null==i.entity||null==i.entity.id?null:i.entity.id.id)("fxShow",!i.isEdit)}}function j(t,e){1&t&&(a["\u0275\u0275elementStart"](0,"mat-error"),a["\u0275\u0275text"](1),a["\u0275\u0275pipe"](2,"translate"),a["\u0275\u0275elementEnd"]()),2&t&&(a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](2,1,"device-profile.name-required")," "))}function A(t,e){if(1&t&&(a["\u0275\u0275elementStart"](0,"mat-option",21),a["\u0275\u0275text"](1),a["\u0275\u0275pipe"](2,"translate"),a["\u0275\u0275elementEnd"]()),2&t){var n=e.$implicit,i=a["\u0275\u0275nextContext"]();a["\u0275\u0275property"]("value",n),a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](2,2,i.deviceProfileTypeTranslations.get(n))," ")}}function _(t,e){1&t&&(a["\u0275\u0275elementStart"](0,"mat-error"),a["\u0275\u0275text"](1),a["\u0275\u0275pipe"](2,"translate"),a["\u0275\u0275elementEnd"]()),2&t&&(a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](2,1,"device-profile.type-required")," "))}function L(t,e){if(1&t&&(a["\u0275\u0275elementStart"](0,"mat-option",21),a["\u0275\u0275text"](1),a["\u0275\u0275pipe"](2,"translate"),a["\u0275\u0275elementEnd"]()),2&t){var n=e.$implicit,i=a["\u0275\u0275nextContext"](2);a["\u0275\u0275property"]("value",n),a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](2,2,i.deviceTransportTypeTranslations.get(n))," ")}}function V(t,e){1&t&&(a["\u0275\u0275elementStart"](0,"mat-error"),a["\u0275\u0275text"](1),a["\u0275\u0275pipe"](2,"translate"),a["\u0275\u0275elementEnd"]()),2&t&&(a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](2,1,"device-profile.transport-type-required")," "))}function R(t,e){if(1&t&&(a["\u0275\u0275elementStart"](0,"mat-form-field",4),a["\u0275\u0275elementStart"](1,"mat-label",5),a["\u0275\u0275text"](2,"device-profile.transport-type"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](3,"mat-select",22),a["\u0275\u0275template"](4,L,3,4,"mat-option",12),a["\u0275\u0275elementEnd"](),a["\u0275\u0275template"](5,V,3,3,"mat-error",7),a["\u0275\u0275elementEnd"]()),2&t){var n=a["\u0275\u0275nextContext"]();a["\u0275\u0275advance"](4),a["\u0275\u0275property"]("ngForOf",n.deviceTransportTypes),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",n.entityForm.get("transportType").hasError("required"))}}function N(t,e){1&t&&a["\u0275\u0275element"](0,"tb-device-profile-configuration",28)}function G(t,e){1&t&&(a["\u0275\u0275elementStart"](0,"mat-expansion-panel",26),a["\u0275\u0275elementStart"](1,"mat-expansion-panel-header"),a["\u0275\u0275elementStart"](2,"mat-panel-title"),a["\u0275\u0275elementStart"](3,"div",5),a["\u0275\u0275text"](4,"device-profile.profile-configuration"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275template"](5,N,1,0,"ng-template",27),a["\u0275\u0275elementEnd"]()),2&t&&a["\u0275\u0275property"]("expanded",!0)}function B(t,e){1&t&&a["\u0275\u0275element"](0,"tb-device-profile-transport-configuration",29)}function U(t,e){1&t&&(a["\u0275\u0275elementStart"](0,"mat-expansion-panel",26),a["\u0275\u0275elementStart"](1,"mat-expansion-panel-header"),a["\u0275\u0275elementStart"](2,"mat-panel-title"),a["\u0275\u0275elementStart"](3,"div",5),a["\u0275\u0275text"](4,"device-profile.transport-configuration"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275template"](5,B,1,0,"ng-template",27),a["\u0275\u0275elementEnd"]()),2&t&&a["\u0275\u0275property"]("expanded",!0)}function q(t,e){if(1&t&&a["\u0275\u0275element"](0,"tb-device-profile-alarms",30),2&t){var n=a["\u0275\u0275nextContext"](2);a["\u0275\u0275property"]("deviceProfileId",n.deviceProfileId)}}function W(t,e){1&t&&a["\u0275\u0275element"](0,"tb-device-profile-provision-configuration",31)}var z=function(t){return{count:t}};function K(t,e){if(1&t&&(a["\u0275\u0275elementStart"](0,"div",23),a["\u0275\u0275elementStart"](1,"mat-accordion",24),a["\u0275\u0275template"](2,G,6,1,"mat-expansion-panel",25),a["\u0275\u0275template"](3,U,6,1,"mat-expansion-panel",25),a["\u0275\u0275elementStart"](4,"mat-expansion-panel",26),a["\u0275\u0275elementStart"](5,"mat-expansion-panel-header"),a["\u0275\u0275elementStart"](6,"mat-panel-title"),a["\u0275\u0275elementStart"](7,"div"),a["\u0275\u0275text"](8),a["\u0275\u0275pipe"](9,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275template"](10,q,1,1,"ng-template",27),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](11,"mat-expansion-panel",26),a["\u0275\u0275elementStart"](12,"mat-expansion-panel-header"),a["\u0275\u0275elementStart"](13,"mat-panel-title"),a["\u0275\u0275elementStart"](14,"div",5),a["\u0275\u0275text"](15,"device-profile.device-provisioning"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275template"](16,W,1,0,"ng-template",27),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()),2&t){var n=a["\u0275\u0275nextContext"]();a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("ngIf",n.displayProfileConfiguration),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",n.displayTransportConfiguration),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("expanded",!1),a["\u0275\u0275advance"](4),a["\u0275\u0275textInterpolate"](a["\u0275\u0275pipeBind2"](9,5,"device-profile.alarm-rules-with-count",a["\u0275\u0275pureFunction1"](8,z,n.entityForm.get("profileData.alarms").value?n.entityForm.get("profileData.alarms").value.length:0))),a["\u0275\u0275advance"](3),a["\u0275\u0275property"]("expanded",!0)}}var H=function(t){return{"mat-padding":t}},$=function(t){function e(e,n,i,a,r){var o=t.call(this,e,r,i,a)||this;return o.store=e,o.translate=n,o.entityValue=i,o.entitiesTableConfigValue=a,o.fb=r,o.standalone=!1,o.entityType=d.b,o.deviceProfileTypes=Object.keys(c.h),o.deviceProfileTypeTranslations=c.x,o.deviceTransportTypes=Object.keys(c.j),o.deviceTransportTypeTranslations=c.B,o.serviceType=u.a.TB_RULE_ENGINE,o}return Object(i.d)(e,t),e.prototype.hideDelete=function(){return!!this.entitiesTableConfig&&!this.entitiesTableConfig.deleteEnabled(this.entity)},e.prototype.buildForm=function(t){var e,n,i,a,o,s=this;this.deviceProfileId=(null==t?void 0:t.id)?t.id:null,this.displayProfileConfiguration=t&&t.type&&c.w.get(t.type).hasProfileConfiguration,this.displayTransportConfiguration=t&&t.transportType&&c.z.get(t.transportType).hasProfileConfiguration;var l={type:(null==t?void 0:t.provisionType)?t.provisionType:c.i.DISABLED,provisionDeviceKey:null==t?void 0:t.provisionDeviceKey,provisionDeviceSecret:null===(n=null===(e=null==t?void 0:t.profileData)||void 0===e?void 0:e.provisionConfiguration)||void 0===n?void 0:n.provisionDeviceSecret},d=this.fb.group({name:[t?t.name:"",[r.Validators.required]],type:[t?t.type:null,[r.Validators.required]],transportType:[t?t.transportType:null,[r.Validators.required]],profileData:this.fb.group({configuration:[t&&!this.isAdd?null===(i=t.profileData)||void 0===i?void 0:i.configuration:{},r.Validators.required],transportConfiguration:[t&&!this.isAdd?null===(a=t.profileData)||void 0===a?void 0:a.transportConfiguration:{},r.Validators.required],alarms:[t&&!this.isAdd?null===(o=t.profileData)||void 0===o?void 0:o.alarms:[]],provisionConfiguration:[l,r.Validators.required]}),defaultRuleChainId:[t&&t.defaultRuleChainId?t.defaultRuleChainId.id:null,[]],defaultQueueName:[t?t.defaultQueueName:"",[]],description:[t?t.description:"",[]]});return d.get("type").valueChanges.subscribe((function(){s.deviceProfileTypeChanged(d)})),d.get("transportType").valueChanges.subscribe((function(){s.deviceProfileTransportTypeChanged(d)})),this.checkIsNewDeviceProfile(t,d),d},e.prototype.checkIsNewDeviceProfile=function(t,e){t&&!t.id&&(e.get("type").patchValue(c.h.DEFAULT,{emitEvent:!0}),e.get("transportType").patchValue(c.j.DEFAULT,{emitEvent:!0}),e.get("provisionType").patchValue(c.i.DISABLED,{emitEvent:!0}))},e.prototype.deviceProfileTypeChanged=function(t){var e=t.get("type").value;this.displayProfileConfiguration=e&&c.w.get(e).hasProfileConfiguration;var n=t.getRawValue().profileData;n||(n={configuration:null,transportConfiguration:null}),n.configuration=Object(c.o)(e),t.patchValue({profileData:n})},e.prototype.deviceProfileTransportTypeChanged=function(t){var e=t.get("transportType").value;this.displayTransportConfiguration=e&&c.z.get(e).hasProfileConfiguration;var n=t.getRawValue().profileData;n||(n={configuration:null,transportConfiguration:null}),n.transportConfiguration=Object(c.p)(e),t.patchValue({profileData:n})},e.prototype.updateForm=function(t){var e,n,i,a,r;this.deviceProfileId=t.id,this.displayProfileConfiguration=t.type&&c.w.get(t.type).hasProfileConfiguration,this.displayTransportConfiguration=t.transportType&&c.z.get(t.transportType).hasProfileConfiguration;var o={type:(null==t?void 0:t.provisionType)?t.provisionType:c.i.DISABLED,provisionDeviceKey:null==t?void 0:t.provisionDeviceKey,provisionDeviceSecret:null===(n=null===(e=null==t?void 0:t.profileData)||void 0===e?void 0:e.provisionConfiguration)||void 0===n?void 0:n.provisionDeviceSecret};this.entityForm.patchValue({name:t.name}),this.entityForm.patchValue({type:t.type},{emitEvent:!1}),this.entityForm.patchValue({transportType:t.transportType},{emitEvent:!1}),this.entityForm.patchValue({provisionType:t.provisionType},{emitEvent:!1}),this.entityForm.patchValue({provisionDeviceKey:t.provisionDeviceKey},{emitEvent:!1}),this.entityForm.patchValue({profileData:{configuration:null===(i=t.profileData)||void 0===i?void 0:i.configuration,transportConfiguration:null===(a=t.profileData)||void 0===a?void 0:a.transportConfiguration,alarms:null===(r=t.profileData)||void 0===r?void 0:r.alarms,provisionConfiguration:o}},{emitEvent:!1}),this.entityForm.patchValue({defaultRuleChainId:t.defaultRuleChainId?t.defaultRuleChainId.id:null},{emitEvent:!1}),this.entityForm.patchValue({defaultQueueName:t.defaultQueueName},{emitEvent:!1}),this.entityForm.patchValue({description:t.description},{emitEvent:!1})},e.prototype.prepareFormValue=function(e){e.defaultRuleChainId&&(e.defaultRuleChainId=new p.a(e.defaultRuleChainId));var n=e.profileData.provisionConfiguration;return e.provisionType=n.type,e.provisionDeviceKey=n.provisionDeviceKey,delete n.provisionDeviceKey,t.prototype.prepareFormValue.call(this,e)},e.prototype.onDeviceProfileIdCopied=function(t){this.store.dispatch(new o.b({message:this.translate.instant("device-profile.idCopiedMessage"),type:"success",duration:750,verticalPosition:"bottom",horizontalPosition:"right"}))},e.\u0275fac=function(t){return new(t||e)(a["\u0275\u0275directiveInject"](m.Store),a["\u0275\u0275directiveInject"](f.TranslateService),a["\u0275\u0275directiveInject"]("entity",8),a["\u0275\u0275directiveInject"]("entitiesTableConfig",8),a["\u0275\u0275directiveInject"](r.FormBuilder))},e.\u0275cmp=a["\u0275\u0275defineComponent"]({type:e,selectors:[["tb-device-profile"]],inputs:{standalone:"standalone"},features:[a["\u0275\u0275InheritDefinitionFeature"]],decls:24,vars:14,consts:[["class","tb-details-buttons","fxLayout.xs","column",4,"ngIf"],["fxLayout","column",3,"ngClass"],[3,"formGroup"],[2,"min-width","0",3,"disabled"],[1,"mat-block"],["translate",""],["matInput","","formControlName","name","required",""],[4,"ngIf"],["labelText","device-profile.default-rule-chain","formControlName","defaultRuleChainId"],["formControlName","defaultQueueName",3,"queueType"],["fxHide","",1,"mat-block"],["formControlName","type","required",""],[3,"value",4,"ngFor","ngForOf"],["matInput","","formControlName","description","rows","2"],["class","mat-block",4,"ngIf"],["formGroupName","profileData","style","padding-bottom: 16px;",4,"ngIf"],["fxLayout.xs","column",1,"tb-details-buttons"],["mat-raised-button","","color","primary",3,"disabled","fxShow","click"],["fxLayout","row","fxLayout.xs","column"],["mat-raised-button","","ngxClipboard","",3,"cbContent","fxShow","cbOnSuccess"],["svgIcon","mdi:clipboard-arrow-left"],[3,"value"],["formControlName","transportType","required",""],["formGroupName","profileData",2,"padding-bottom","16px"],["multi","true"],[3,"expanded",4,"ngIf"],[3,"expanded"],["matExpansionPanelContent",""],["formControlName","configuration","required",""],["formControlName","transportConfiguration","required",""],["formControlName","alarms",3,"deviceProfileId"],["formControlName","provisionConfiguration"]],template:function(t,e){1&t&&(a["\u0275\u0275template"](0,k,18,23,"div",0),a["\u0275\u0275elementStart"](1,"div",1),a["\u0275\u0275elementStart"](2,"form",2),a["\u0275\u0275elementStart"](3,"fieldset",3),a["\u0275\u0275pipe"](4,"async"),a["\u0275\u0275elementStart"](5,"mat-form-field",4),a["\u0275\u0275elementStart"](6,"mat-label",5),a["\u0275\u0275text"](7,"device-profile.name"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](8,"input",6),a["\u0275\u0275template"](9,j,3,3,"mat-error",7),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](10,"tb-rule-chain-autocomplete",8),a["\u0275\u0275element"](11,"tb-queue-type-list",9),a["\u0275\u0275elementStart"](12,"mat-form-field",10),a["\u0275\u0275elementStart"](13,"mat-label",5),a["\u0275\u0275text"](14,"device-profile.type"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](15,"mat-select",11),a["\u0275\u0275template"](16,A,3,4,"mat-option",12),a["\u0275\u0275elementEnd"](),a["\u0275\u0275template"](17,_,3,3,"mat-error",7),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](18,"mat-form-field",4),a["\u0275\u0275elementStart"](19,"mat-label",5),a["\u0275\u0275text"](20,"device-profile.description"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](21,"textarea",13),a["\u0275\u0275elementEnd"](),a["\u0275\u0275template"](22,R,6,2,"mat-form-field",14),a["\u0275\u0275template"](23,K,17,10,"div",15),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()),2&t&&(a["\u0275\u0275property"]("ngIf",!e.standalone),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngClass",a["\u0275\u0275pureFunction1"](12,H,!e.standalone)),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("formGroup",e.entityForm),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](4,10,e.isLoading$)||!e.isEdit),a["\u0275\u0275advance"](6),a["\u0275\u0275property"]("ngIf",e.entityForm.get("name").hasError("required")),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("queueType",e.serviceType),a["\u0275\u0275advance"](5),a["\u0275\u0275property"]("ngForOf",e.deviceProfileTypes),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",e.entityForm.get("type").hasError("required")),a["\u0275\u0275advance"](5),a["\u0275\u0275property"]("ngIf",e.standalone),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",e.standalone))},directives:[h.NgIf,g.f,h.NgClass,y.b,r["\u0275angular_packages_forms_forms_y"],r.NgControlStatusGroup,r.FormGroupDirective,b.MatFormField,b.MatLabel,f.TranslateDirective,v.MatInput,r.DefaultValueAccessor,r.NgControlStatus,r.FormControlName,r.RequiredValidator,x.a,C.a,y.d,S.MatSelect,h.NgForOf,w.MatButton,E.a,I.MatIcon,b.MatError,O.MatOption,r.FormGroupName,T.MatAccordion,T.MatExpansionPanel,T.MatExpansionPanelHeader,T.MatExpansionPanelTitle,T.MatExpansionPanelContent,M.a,F.a,P.a,D.a],pipes:[h.AsyncPipe,f.TranslatePipe],encapsulation:2}),e}(l.a);!function(){a["\u0275setClassMetadata"]($,[{type:a.Component,args:[{selector:"tb-device-profile",templateUrl:"./device-profile.component.html",styleUrls:[]}]}],(function(){return[{type:m.Store},{type:f.TranslateService},{type:void 0,decorators:[{type:a.Optional},{type:a.Inject,args:["entity"]}]},{type:s.d,decorators:[{type:a.Optional},{type:a.Inject,args:["entitiesTableConfig"]}]},{type:r.FormBuilder}]}),{standalone:[{type:a.Input}]})}()},eeD6:function(t,e,n){"use strict";(function(t){n.d(e,"a",(function(){return rt}));var i=n("mrSG"),a=n("fXoL"),r=n("RxGS"),o=n("C/rb"),s=n("aX2P"),l=n("k9IB"),c=n("Ljk9"),d=n("5OJv"),p=n("jtHE"),u=n("S+vS"),m=n("//Q6"),f=n("he9t"),h=n("02Lk"),g=n("HR/i"),y=n("OiFK"),b=n("l7P3"),v=n("0MNC"),x=n("XiUz"),C=n("ofXK"),S=n("znSr"),w=n("Xa2L"),E=n("STbY"),I=n("sYmb"),O=n("NFeN"),T=n("8m5z"),M=n("ncEg"),F=n("Qu3c"),P=n("k81w"),D=n("3Pt+"),k=n("bTqV"),j=n("EbnC"),A=["gridster"],_=["dashboardMenuTrigger"],L=["widgetMenuTrigger"];function V(t,e){if(1&t&&(a["\u0275\u0275elementStart"](0,"span",19),a["\u0275\u0275text"](1),a["\u0275\u0275pipe"](2,"keyboardShortcut"),a["\u0275\u0275elementEnd"]()),2&t){var n=a["\u0275\u0275nextContext"]().$implicit;a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](2,1,n.shortcut),"")}}function R(t,e){if(1&t&&(a["\u0275\u0275elementStart"](0,"mat-icon"),a["\u0275\u0275text"](1),a["\u0275\u0275elementEnd"]()),2&t){var n=a["\u0275\u0275nextContext"]().$implicit;a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate"](n.icon)}}function N(t,e){if(1&t){var n=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementStart"](0,"button",15),a["\u0275\u0275listener"]("click",(function(){a["\u0275\u0275restoreView"](n);var t=e.$implicit,i=a["\u0275\u0275nextContext"](2);return t.action(i.dashboardContextMenuEvent)})),a["\u0275\u0275template"](1,V,3,3,"span",16),a["\u0275\u0275template"](2,R,2,1,"mat-icon",17),a["\u0275\u0275elementStart"](3,"span",18),a["\u0275\u0275text"](4),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()}if(2&t){var i=e.$implicit;a["\u0275\u0275property"]("disabled",!i.enabled),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",i.shortcut),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",i.icon),a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate"](i.value)}}function G(t,e){if(1&t&&(a["\u0275\u0275elementStart"](0,"div",13),a["\u0275\u0275template"](1,N,5,4,"button",14),a["\u0275\u0275elementEnd"]()),2&t){var n=e.items;a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngForOf",n)}}function B(t,e){if(1&t&&(a["\u0275\u0275elementStart"](0,"span",19),a["\u0275\u0275text"](1),a["\u0275\u0275pipe"](2,"keyboardShortcut"),a["\u0275\u0275elementEnd"]()),2&t){var n=a["\u0275\u0275nextContext"]().$implicit;a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](2,1,n.shortcut),"")}}function U(t,e){if(1&t&&(a["\u0275\u0275elementStart"](0,"mat-icon"),a["\u0275\u0275text"](1),a["\u0275\u0275elementEnd"]()),2&t){var n=a["\u0275\u0275nextContext"]().$implicit;a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate"](n.icon)}}function q(t,e){if(1&t){var n=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementStart"](0,"button",15),a["\u0275\u0275listener"]("click",(function(){a["\u0275\u0275restoreView"](n);var t=e.$implicit,i=a["\u0275\u0275nextContext"]().widget,r=a["\u0275\u0275nextContext"]();return t.action(r.widgetContextMenuEvent,i)})),a["\u0275\u0275template"](1,B,3,3,"span",16),a["\u0275\u0275template"](2,U,2,1,"mat-icon",17),a["\u0275\u0275elementStart"](3,"span",18),a["\u0275\u0275text"](4),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()}if(2&t){var i=e.$implicit;a["\u0275\u0275property"]("disabled",!i.enabled),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",i.shortcut),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",i.icon),a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate"](i.value)}}function W(t,e){if(1&t&&(a["\u0275\u0275elementStart"](0,"div",13),a["\u0275\u0275template"](1,q,5,4,"button",14),a["\u0275\u0275elementEnd"]()),2&t){var n=e.items;a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngForOf",n)}}function z(t,e){if(1&t&&(a["\u0275\u0275elementStart"](0,"mat-icon",34),a["\u0275\u0275text"](1),a["\u0275\u0275elementEnd"]()),2&t){var n=a["\u0275\u0275nextContext"](4).$implicit;a["\u0275\u0275property"]("ngStyle",n.titleIconStyle),a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate"](n.titleIcon)}}var K=function(t){return{"single-row":t}};function H(t,e){if(1&t&&(a["\u0275\u0275elementStart"](0,"span",32),a["\u0275\u0275template"](1,z,2,2,"mat-icon",33),a["\u0275\u0275text"](2),a["\u0275\u0275elementEnd"]()),2&t){var n=a["\u0275\u0275nextContext"](3).$implicit;a["\u0275\u0275property"]("ngClass",a["\u0275\u0275pureFunction1"](5,K,n.hasTimewindow))("ngStyle",n.titleStyle)("matTooltip",n.titleTooltip),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",n.showTitleIcon),a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"](" ",n.customTranslatedTitle," ")}}function $(t,e){if(1&t){var n=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementStart"](0,"tb-timewindow",35),a["\u0275\u0275listener"]("ngModelChange",(function(t){return a["\u0275\u0275restoreView"](n),a["\u0275\u0275nextContext"](3),a["\u0275\u0275reference"](5).widget.config.timewindow=t}))("ngModelChange",(function(t){return a["\u0275\u0275restoreView"](n),a["\u0275\u0275nextContext"](3),a["\u0275\u0275reference"](5).onTimewindowChanged(t)})),a["\u0275\u0275elementEnd"]()}if(2&t){var i=a["\u0275\u0275nextContext"](3).$implicit,r=a["\u0275\u0275reference"](5),o=a["\u0275\u0275nextContext"]();a["\u0275\u0275propertyInterpolate"]("aggregation",i.hasAggregation),a["\u0275\u0275property"]("isEdit",o.isEdit)("ngModel",r.widget.config.timewindow)}}function Q(t,e){if(1&t&&(a["\u0275\u0275elementStart"](0,"div",29),a["\u0275\u0275template"](1,H,3,7,"span",30),a["\u0275\u0275template"](2,$,1,3,"tb-timewindow",31),a["\u0275\u0275elementEnd"]()),2&t){var n=a["\u0275\u0275nextContext"](2).$implicit;a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",n.showTitle),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",n.hasTimewindow)}}function X(t,e){if(1&t){var n=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementStart"](0,"button",38),a["\u0275\u0275listener"]("click",(function(t){return a["\u0275\u0275restoreView"](n),e.$implicit.onAction(t)})),a["\u0275\u0275elementStart"](1,"mat-icon"),a["\u0275\u0275text"](2),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()}if(2&t){var i=e.$implicit,r=a["\u0275\u0275nextContext"](4);a["\u0275\u0275propertyInterpolate"]("matTooltip",i.displayName),a["\u0275\u0275property"]("fxShow",!r.isEdit),a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate"](i.icon)}}function Y(t,e){if(1&t){var n=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementStart"](0,"button",38),a["\u0275\u0275listener"]("click",(function(t){return a["\u0275\u0275restoreView"](n),e.$implicit.onAction(t)})),a["\u0275\u0275pipe"](1,"translate"),a["\u0275\u0275elementStart"](2,"mat-icon"),a["\u0275\u0275text"](3),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()}if(2&t){var i=e.$implicit,r=a["\u0275\u0275nextContext"](4);a["\u0275\u0275propertyInterpolate"]("matTooltip",a["\u0275\u0275pipeBind1"](1,3,i.name)),a["\u0275\u0275property"]("fxShow",!r.isEdit&&i.show),a["\u0275\u0275advance"](3),a["\u0275\u0275textInterpolate"](i.icon)}}var J=function(t){return{"tb-widget-actions-absolute":t}};function Z(t,e){if(1&t){var n=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementStart"](0,"div",36),a["\u0275\u0275listener"]("mousedown",(function(t){return a["\u0275\u0275restoreView"](n),t.stopPropagation()})),a["\u0275\u0275template"](1,X,3,3,"button",37),a["\u0275\u0275template"](2,Y,4,5,"button",37),a["\u0275\u0275elementStart"](3,"button",38),a["\u0275\u0275listener"]("click",(function(t){a["\u0275\u0275restoreView"](n);var e=a["\u0275\u0275nextContext"](2).$implicit;return t.stopPropagation(),e.isFullscreen=!e.isFullscreen})),a["\u0275\u0275pipe"](4,"translate"),a["\u0275\u0275elementStart"](5,"mat-icon"),a["\u0275\u0275text"](6),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](7,"button",38),a["\u0275\u0275listener"]("click",(function(t){a["\u0275\u0275restoreView"](n);var e=a["\u0275\u0275nextContext"](2).$implicit;return a["\u0275\u0275nextContext"]().editWidget(t,e)})),a["\u0275\u0275pipe"](8,"translate"),a["\u0275\u0275elementStart"](9,"mat-icon"),a["\u0275\u0275text"](10,"edit"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](11,"button",38),a["\u0275\u0275listener"]("click",(function(t){a["\u0275\u0275restoreView"](n);var e=a["\u0275\u0275nextContext"](2).$implicit;return a["\u0275\u0275nextContext"]().exportWidget(t,e)})),a["\u0275\u0275pipe"](12,"translate"),a["\u0275\u0275elementStart"](13,"mat-icon"),a["\u0275\u0275text"](14,"file_download"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](15,"button",38),a["\u0275\u0275listener"]("click",(function(t){a["\u0275\u0275restoreView"](n);var e=a["\u0275\u0275nextContext"](2).$implicit;return a["\u0275\u0275nextContext"]().removeWidget(t,e)})),a["\u0275\u0275pipe"](16,"translate"),a["\u0275\u0275elementStart"](17,"mat-icon"),a["\u0275\u0275text"](18,"close"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()}if(2&t){var i=a["\u0275\u0275nextContext"](2).$implicit,r=a["\u0275\u0275nextContext"]();a["\u0275\u0275property"]("ngClass",a["\u0275\u0275pureFunction1"](20,J,!(i.showWidgetTitlePanel&&(i.showTitle||i.hasAggregation)))),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngForOf",i.customHeaderActions),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngForOf",i.widgetActions),a["\u0275\u0275advance"](1),a["\u0275\u0275propertyInterpolate"]("matTooltip",a["\u0275\u0275pipeBind1"](4,12,i.isFullscreen?"fullscreen.exit":"fullscreen.expand")),a["\u0275\u0275property"]("fxShow",!r.isEdit&&i.enableFullscreen),a["\u0275\u0275advance"](3),a["\u0275\u0275textInterpolate"](i.isFullscreen?"fullscreen_exit":"fullscreen"),a["\u0275\u0275advance"](1),a["\u0275\u0275propertyInterpolate"]("matTooltip",a["\u0275\u0275pipeBind1"](8,14,"widget.edit")),a["\u0275\u0275property"]("fxShow",r.isEditActionEnabled&&!i.isFullscreen),a["\u0275\u0275advance"](4),a["\u0275\u0275propertyInterpolate"]("matTooltip",a["\u0275\u0275pipeBind1"](12,16,"widget.export")),a["\u0275\u0275property"]("fxShow",r.isExportActionEnabled&&!i.isFullscreen),a["\u0275\u0275advance"](4),a["\u0275\u0275propertyInterpolate"]("matTooltip",a["\u0275\u0275pipeBind1"](16,18,"widget.remove")),a["\u0275\u0275property"]("fxShow",r.isRemoveActionEnabled&&!i.isFullscreen)}}function tt(t,e){if(1&t&&(a["\u0275\u0275elementStart"](0,"div",26),a["\u0275\u0275template"](1,Q,3,2,"div",27),a["\u0275\u0275template"](2,Z,19,22,"div",28),a["\u0275\u0275elementEnd"]()),2&t){var n=a["\u0275\u0275nextContext"]().$implicit;a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",n.showWidgetTitlePanel),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",n.showWidgetActions)}}var et=function(t,e,n,i){return{"tb-highlighted":t,"tb-not-highlighted":e,"mat-elevation-z4":n,"tb-has-timewindow":i}},nt=function(t){return{"tb-no-interaction":t}};function it(t,e){if(1&t){var n=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementStart"](0,"gridster-item",20),a["\u0275\u0275elementStart"](1,"div",21),a["\u0275\u0275listener"]("fullscreenChanged",(function(t){a["\u0275\u0275restoreView"](n);var i=e.$implicit;return a["\u0275\u0275nextContext"]().onWidgetFullscreenChanged(t,i)}))("mousedown",(function(t){a["\u0275\u0275restoreView"](n);var i=e.$implicit;return a["\u0275\u0275nextContext"]().widgetMouseDown(t,i)}))("click",(function(t){a["\u0275\u0275restoreView"](n);var i=e.$implicit;return a["\u0275\u0275nextContext"]().widgetClicked(t,i)}))("contextmenu",(function(t){a["\u0275\u0275restoreView"](n);var i=e.$implicit;return a["\u0275\u0275nextContext"]().openWidgetContextMenu(t,i)})),a["\u0275\u0275template"](2,tt,3,2,"div",22),a["\u0275\u0275elementStart"](3,"div",23),a["\u0275\u0275element"](4,"tb-widget",24,25),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()}if(2&t){var i=e.$implicit,r=a["\u0275\u0275reference"](5),o=a["\u0275\u0275nextContext"]();a["\u0275\u0275property"]("item",i),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("fullscreen",i.isFullscreen)("fullscreenBackgroundStyle",o.dashboardStyle)("fullscreenBackgroundImage",o.backgroundImage)("ngClass",a["\u0275\u0275pureFunction4"](11,et,o.isHighlighted(i),o.isNotHighlighted(i),i.dropShadow,i.hasTimewindow))("ngStyle",i.style),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",null==r.widgetContext?null:r.widgetContext.inited),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngClass",a["\u0275\u0275pureFunction1"](16,nt,o.disableWidgetInteraction)),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("dashboardWidget",i)("isEdit",o.isEdit)("isMobile",o.isMobileSize)}}var at=function(t){return{overflowY:t}},rt=function(e){function n(t,n,i,a,r,s,l,c){var u=e.call(this,t)||this;return u.store=t,u.utils=n,u.timeService=i,u.dialogService=a,u.breakpointObserver=r,u.differs=s,u.kvDiffers=l,u.ngZone=c,u.disableWidgetInteraction=!1,u.ignoreLoading=!0,u.dashboardTimewindowChangedSubject=new p.a,u.dashboardTimewindowChanged=u.dashboardTimewindowChangedSubject.asObservable().pipe(Object(h.a)()),u.isWidgetExpanded=!1,u.isMobileSize=!1,u.dashboardMenuPosition={x:"0px",y:"0px"},u.widgetMenuPosition={x:"0px",y:"0px"},u.dashboardWidgets=new d.a(u,u.differs.find([]).create((function(t,e){return e})),u.kvDiffers.find([]).create()),u.optionsChangeNotificationsPaused=!1,u.authUser=Object(o.b)(t),u}return Object(i.d)(n,e),n.prototype.ngOnInit=function(){var t=this;this.dashboardTimewindow||(this.dashboardTimewindow=this.timeService.defaultTimewindow()),this.gridsterOpts={gridType:c.a.ScrollVertical,keepFixedHeightInMobile:!0,disableWarnings:!1,disableAutoPositionOnConflict:!1,pushItems:!1,swap:!1,maxRows:100,minCols:this.columns?this.columns:24,maxCols:3e3,maxItemCols:1e3,maxItemRows:1e3,maxItemArea:1e6,outerMargin:!0,margin:Object(m.n)(this.margin)?this.margin:10,minItemCols:1,minItemRows:1,defaultItemCols:8,defaultItemRows:6,resizable:{enabled:this.isEdit},draggable:{enabled:this.isEdit},itemChangeCallback:function(e){return t.dashboardWidgets.sortWidgets()},itemInitCallback:function(t,e){e.item.gridsterItemComponent=e}},this.updateMobileOpts(),this.breakpointObserverSubscription=this.breakpointObserver.observe(f.e["gt-sm"]).subscribe((function(){t.updateMobileOpts(),t.notifyGridsterOptionsChanged()})),this.updateWidgets()},n.prototype.ngOnDestroy=function(){e.prototype.ngOnDestroy.call(this),this.gridsterResize$&&this.gridsterResize$.disconnect(),this.breakpointObserverSubscription&&this.breakpointObserverSubscription.unsubscribe(),this.gridster=null},n.prototype.ngDoCheck=function(){this.optionsChangeNotificationsPaused||this.dashboardWidgets.doCheck()},n.prototype.ngOnChanges=function(t){for(var e=!1,n=!1,i=!1,a=!1,r=0,o=Object.keys(t);r<o.length;r++){var s=o[r],l=t[s];l.firstChange||l.currentValue===l.previousValue||(["isMobile","isMobileDisabled","autofillHeight","mobileAutofillHeight","mobileRowHeight"].includes(s)?e=!0:["margin","columns"].includes(s)?n=!0:"isEdit"===s?i=!0:["widgets","widgetLayouts"].includes(s)?a=!0:"dashboardTimewindow"===s&&this.dashboardTimewindowChangedSubject.next(this.dashboardTimewindow))}a&&this.updateWidgets(),e&&this.updateMobileOpts(),n&&this.updateLayoutOpts(),i&&this.updateEditingOpts(),(e||n||i)&&this.notifyGridsterOptionsChanged()},n.prototype.updateWidgets=function(){this.dashboardWidgets.setWidgets(this.widgets,this.widgetLayouts),this.dashboardWidgets.doCheck()},n.prototype.updateWidgetLayouts=function(){this.dashboardWidgets.widgetLayoutsUpdated()},n.prototype.ngAfterViewInit=function(){var t=this;this.gridsterResize$=new g.a((function(){t.onGridsterParentResize()})),this.gridsterResize$.observe(this.gridster.el)},n.prototype.onUpdateTimewindow=function(t,e,n,i){var a=this;this.ngZone.run((function(){a.originalDashboardTimewindow||i||(a.originalDashboardTimewindow=Object(m.e)(a.dashboardTimewindow)),a.dashboardTimewindow=Object(s.N)(a.dashboardTimewindow,t,e,n,a.timeService),a.dashboardTimewindowChangedSubject.next(a.dashboardTimewindow)}))},n.prototype.onResetTimewindow=function(){var t=this;this.ngZone.run((function(){t.originalDashboardTimewindow&&(t.dashboardTimewindow=Object(m.e)(t.originalDashboardTimewindow),t.originalDashboardTimewindow=null,t.dashboardTimewindowChangedSubject.next(t.dashboardTimewindow))}))},n.prototype.isAutofillHeight=function(){return this.isMobileSize?!!Object(m.n)(this.mobileAutofillHeight)&&this.mobileAutofillHeight:!!Object(m.n)(this.autofillHeight)&&this.autofillHeight},n.prototype.openDashboardContextMenu=function(t){if(this.callbacks&&this.callbacks.prepareDashboardContextMenu){var e=this.callbacks.prepareDashboardContextMenu(t);e&&e.length&&(t.preventDefault(),t.stopPropagation(),this.dashboardContextMenuEvent=t,this.dashboardMenuPosition.x=t.clientX+"px",this.dashboardMenuPosition.y=t.clientY+"px",this.dashboardMenuTrigger.menuData={items:e},this.dashboardMenuTrigger.openMenu())}},n.prototype.openWidgetContextMenu=function(t,e){if(this.callbacks&&this.callbacks.prepareWidgetContextMenu){var n=this.callbacks.prepareWidgetContextMenu(t,e.widget);n&&n.length&&(t.preventDefault(),t.stopPropagation(),this.widgetContextMenuEvent=t,this.widgetMenuPosition.x=t.clientX+"px",this.widgetMenuPosition.y=t.clientY+"px",this.widgetMenuTrigger.menuData={items:n,widget:e.widget},this.widgetMenuTrigger.openMenu())}},n.prototype.onWidgetFullscreenChanged=function(t,e){this.isWidgetExpanded=t},n.prototype.widgetMouseDown=function(t,e){this.callbacks&&this.callbacks.onWidgetMouseDown&&this.callbacks.onWidgetMouseDown(t,e.widget)},n.prototype.widgetClicked=function(t,e){this.callbacks&&this.callbacks.onWidgetClicked&&this.callbacks.onWidgetClicked(t,e.widget)},n.prototype.editWidget=function(t,e){t&&t.stopPropagation(),this.isEditActionEnabled&&this.callbacks&&this.callbacks.onEditWidget&&this.callbacks.onEditWidget(t,e.widget)},n.prototype.exportWidget=function(t,e){t&&t.stopPropagation(),this.isExportActionEnabled&&this.callbacks&&this.callbacks.onExportWidget&&this.callbacks.onExportWidget(t,e.widget)},n.prototype.removeWidget=function(t,e){t&&t.stopPropagation(),this.isRemoveActionEnabled&&this.callbacks&&this.callbacks.onRemoveWidget&&this.callbacks.onRemoveWidget(t,e.widget)},n.prototype.highlightWidget=function(t,e){var n=this.dashboardWidgets.highlightWidget(t);n&&this.scrollToWidget(n,e)},n.prototype.selectWidget=function(t,e){var n=this.dashboardWidgets.selectWidget(t);n&&this.scrollToWidget(n,e)},n.prototype.getSelectedWidget=function(){var t=this.dashboardWidgets.getSelectedWidget();return t?t.widget:null},n.prototype.getEventGridPosition=function(e){var n={row:0,column:0},i=t(this.gridster.el),a=0,r=0;e instanceof MouseEvent&&(a=e.pageX,r=e.pageY);var o=i.offset(),s=a-o.left+i.scrollLeft(),l=r-o.top+i.scrollTop();return n.row=this.gridster.pixelsToPositionY(l,Math.floor),n.column=this.gridster.pixelsToPositionX(s,Math.floor),n},n.prototype.resetHighlight=function(){var t=this,e=this.dashboardWidgets.resetHighlight();e&&setTimeout((function(){t.scrollToWidget(e,0)}),0)},n.prototype.isHighlighted=function(t){return this.dashboardWidgets.isHighlighted(t)},n.prototype.isNotHighlighted=function(t){return this.dashboardWidgets.isNotHighlighted(t)},n.prototype.scrollToWidget=function(t,e){var n=this,i=this.gridster.el;t.gridsterItemComponent$().subscribe((function(t){var a,r=t.el,o=(i.clientHeight-r.clientHeight)/2;a=n.isMobileSize?r.offsetTop:a=t.top,o>0&&(a-=o),Object(m.a)(i,a,e)}))},n.prototype.updateMobileOpts=function(t){this.isMobileSize=this.checkIsMobileSize();var e=this.isAutofillHeight();this.gridsterOpts.gridType=e?this.isMobileSize?c.a.Fixed:c.a.Fit:this.isMobileSize?c.a.Fixed:c.a.ScrollVertical;var n=this.isMobileSize?2e4:0;this.gridsterOpts.mobileBreakpoint=n;var i=this.detectRowSize(this.isMobileSize,e,t);this.gridsterOpts.fixedRowHeight!==i&&(this.gridsterOpts.fixedRowHeight=i)},n.prototype.onGridsterParentResize=function(){var t=this.gridster.el.offsetHeight;this.isMobileSize&&this.mobileAutofillHeight&&t&&this.updateMobileOpts(t),this.notifyGridsterOptionsChanged()},n.prototype.updateLayoutOpts=function(){this.gridsterOpts.minCols=this.columns?this.columns:24,this.gridsterOpts.margin=Object(m.n)(this.margin)?this.margin:10},n.prototype.updateEditingOpts=function(){this.gridsterOpts.resizable.enabled=this.isEdit,this.gridsterOpts.draggable.enabled=this.isEdit},n.prototype.notifyGridsterOptionsChanged=function(){this.optionsChangeNotificationsPaused||this.gridster&&this.gridster.options&&this.gridster.optionsChanged()},n.prototype.pauseChangeNotifications=function(){this.optionsChangeNotificationsPaused=!0},n.prototype.resumeChangeNotifications=function(){this.optionsChangeNotificationsPaused=!1},n.prototype.notifyLayoutUpdated=function(){this.updateWidgetLayouts()},n.prototype.detectRowSize=function(t,e,n){var i=null;if(e){if(e&&t&&(n||(n=this.gridster.el.offsetHeight),n)){for(var a=0,r=0,o=this.dashboardWidgets.dashboardWidgets;r<o.length;r++){a+=o[r].rows}i=(n-this.gridsterOpts.margin*(this.dashboardWidgets.dashboardWidgets.length+2))/a}}else t&&(i=Object(m.n)(this.mobileRowHeight)?this.mobileRowHeight:70);return i},n.prototype.checkIsMobileSize=function(){var t=!0===this.isMobileDisabled,e=!0===this.isMobile&&!t;return e||t||(e=!this.breakpointObserver.isMatched(f.e["gt-sm"])),e},n.\u0275fac=function(t){return new(t||n)(a["\u0275\u0275directiveInject"](b.Store),a["\u0275\u0275directiveInject"](y.a),a["\u0275\u0275directiveInject"](l.a),a["\u0275\u0275directiveInject"](u.a),a["\u0275\u0275directiveInject"](v.BreakpointObserver),a["\u0275\u0275directiveInject"](a.IterableDiffers),a["\u0275\u0275directiveInject"](a.KeyValueDiffers),a["\u0275\u0275directiveInject"](a.NgZone))},n.\u0275cmp=a["\u0275\u0275defineComponent"]({type:n,selectors:[["tb-dashboard"]],viewQuery:function(t,e){var n;(1&t&&(a["\u0275\u0275staticViewQuery"](A,!0),a["\u0275\u0275staticViewQuery"](_,!0),a["\u0275\u0275staticViewQuery"](L,!0)),2&t)&&(a["\u0275\u0275queryRefresh"](n=a["\u0275\u0275loadQuery"]())&&(e.gridster=n.first),a["\u0275\u0275queryRefresh"](n=a["\u0275\u0275loadQuery"]())&&(e.dashboardMenuTrigger=n.first),a["\u0275\u0275queryRefresh"](n=a["\u0275\u0275loadQuery"]())&&(e.widgetMenuTrigger=n.first))},inputs:{widgets:"widgets",widgetLayouts:"widgetLayouts",callbacks:"callbacks",aliasController:"aliasController",stateController:"stateController",columns:"columns",margin:"margin",isEdit:"isEdit",autofillHeight:"autofillHeight",mobileAutofillHeight:"mobileAutofillHeight",mobileRowHeight:"mobileRowHeight",isMobile:"isMobile",isMobileDisabled:"isMobileDisabled",isEditActionEnabled:"isEditActionEnabled",isExportActionEnabled:"isExportActionEnabled",isRemoveActionEnabled:"isRemoveActionEnabled",disableWidgetInteraction:"disableWidgetInteraction",dashboardStyle:"dashboardStyle",backgroundImage:"backgroundImage",dashboardClass:"dashboardClass",ignoreLoading:"ignoreLoading",dashboardTimewindow:"dashboardTimewindow"},features:[a["\u0275\u0275InheritDefinitionFeature"],a["\u0275\u0275NgOnChangesFeature"]],decls:18,vars:22,consts:[["fxFlex","","fxLayout","column","fxLayoutAlign","center center",1,"tb-progress-cover",3,"ngStyle","fxShow"],["color","warn","mode","indeterminate","diameter","100"],["id","gridster-parent","fxFlex","",1,"tb-dashboard-content","layout-wrap",3,"ngStyle","contextmenu"],[2,"visibility","hidden","position","fixed",3,"matMenuTriggerFor"],["dashboardMenuTrigger","matMenuTrigger"],["dashboardMenu","matMenu"],["matMenuContent",""],["widgetMenuTrigger","matMenuTrigger"],["widgetMenu","matMenu"],["id","gridster-background",2,"height","auto","min-height","100%","display","inline",3,"ngClass"],["id","gridster-child",3,"options"],["gridster",""],["class","tb-noselect",3,"item",4,"ngFor","ngForOf"],[1,"tb-dashboard-context-menu-items"],["mat-menu-item","",3,"disabled","click",4,"ngFor","ngForOf"],["mat-menu-item","",3,"disabled","click"],["class","tb-alt-text",4,"ngIf"],[4,"ngIf"],["translate",""],[1,"tb-alt-text"],[1,"tb-noselect",3,"item"],["tb-fullscreen","","fxLayout","column",1,"tb-widget",3,"fullscreen","fullscreenBackgroundStyle","fullscreenBackgroundImage","ngClass","ngStyle","fullscreenChanged","mousedown","click","contextmenu"],["fxLayout","row","fxLayoutAlign","space-between start",4,"ngIf"],["fxFlex","","fxLayout","column",1,"tb-widget-content",3,"ngClass"],["fxFlex","",3,"dashboardWidget","isEdit","isMobile"],["widgetComponent",""],["fxLayout","row","fxLayoutAlign","space-between start"],["class","tb-widget-title","fxLayout","column","fxLayoutAlign","center start",4,"ngIf"],["class","tb-widget-actions","fxLayout","row","fxLayoutAlign","start center",3,"ngClass","mousedown",4,"ngIf"],["fxLayout","column","fxLayoutAlign","center start",1,"tb-widget-title"],["matTooltipClass","tb-tooltip-multiline","matTooltipPosition","above","class","mat-subheading-2 title",3,"ngClass","ngStyle","matTooltip",4,"ngIf"],["timezone","true",3,"aggregation","isEdit","ngModel","ngModelChange",4,"ngIf"],["matTooltipClass","tb-tooltip-multiline","matTooltipPosition","above",1,"mat-subheading-2","title",3,"ngClass","ngStyle","matTooltip"],[3,"ngStyle",4,"ngIf"],[3,"ngStyle"],["timezone","true",3,"aggregation","isEdit","ngModel","ngModelChange"],["fxLayout","row","fxLayoutAlign","start center",1,"tb-widget-actions",3,"ngClass","mousedown"],["mat-button","","mat-icon-button","","matTooltipPosition","above",3,"fxShow","matTooltip","click",4,"ngFor","ngForOf"],["mat-button","","mat-icon-button","","matTooltipPosition","above",3,"fxShow","matTooltip","click"]],template:function(t,e){if(1&t&&(a["\u0275\u0275elementStart"](0,"div",0),a["\u0275\u0275pipe"](1,"async"),a["\u0275\u0275element"](2,"mat-spinner",1),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](3,"div",2),a["\u0275\u0275listener"]("contextmenu",(function(t){return e.openDashboardContextMenu(t)})),a["\u0275\u0275element"](4,"div",3,4),a["\u0275\u0275elementStart"](6,"mat-menu",null,5),a["\u0275\u0275template"](8,G,2,1,"ng-template",6),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](9,"div",3,7),a["\u0275\u0275elementStart"](11,"mat-menu",null,8),a["\u0275\u0275template"](13,W,2,1,"ng-template",6),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](14,"div",9),a["\u0275\u0275elementStart"](15,"gridster",10,11),a["\u0275\u0275template"](17,it,6,18,"gridster-item",12),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()),2&t){var n=a["\u0275\u0275reference"](7),i=a["\u0275\u0275reference"](12);a["\u0275\u0275styleProp"]("background-image",e.backgroundImage),a["\u0275\u0275property"]("ngStyle",e.dashboardStyle)("fxShow",a["\u0275\u0275pipeBind1"](1,18,e.isLoading$)&&!e.ignoreLoading&&!e.isEdit),a["\u0275\u0275advance"](3),a["\u0275\u0275property"]("ngStyle",a["\u0275\u0275pureFunction1"](20,at,e.isAutofillHeight()?"hidden":"auto")),a["\u0275\u0275advance"](1),a["\u0275\u0275styleProp"]("left",e.dashboardMenuPosition.x)("top",e.dashboardMenuPosition.y),a["\u0275\u0275property"]("matMenuTriggerFor",n),a["\u0275\u0275advance"](5),a["\u0275\u0275styleProp"]("left",e.widgetMenuPosition.x)("top",e.widgetMenuPosition.y),a["\u0275\u0275property"]("matMenuTriggerFor",i),a["\u0275\u0275advance"](5),a["\u0275\u0275property"]("ngClass",e.dashboardClass),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("options",e.gridsterOpts),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("ngForOf",e.dashboardWidgets)}},directives:[x.b,x.f,x.e,C.NgStyle,S.e,S.d,w.MatSpinner,E.MatMenuTrigger,E._MatMenu,E.MatMenuContent,C.NgClass,S.b,c.b,C.NgForOf,E.MatMenuItem,C.NgIf,I.TranslateDirective,O.MatIcon,c.c,T.a,M.a,F.MatTooltip,P.a,D.NgControlStatus,D.NgModel,k.MatButton],pipes:[C.AsyncPipe,j.a,I.TranslatePipe],styles:["[_nghost-%COMP%]   .tb-progress-cover[_ngcontent-%COMP%]{position:absolute;top:0;right:0;bottom:0;left:0;z-index:6;opacity:1}[_nghost-%COMP%]   .tb-dashboard-content[_ngcontent-%COMP%]{position:absolute;top:0;right:0;bottom:0;left:0;background:none;outline:none}[_nghost-%COMP%]   .tb-dashboard-content[_ngcontent-%COMP%]   gridster-item[_ngcontent-%COMP%]{transition:none;overflow:visible;background:none}[_nghost-%COMP%]   #gridster-child[_ngcontent-%COMP%]{background:none}div.tb-widget[_ngcontent-%COMP%], tb-widget.tb-widget[_ngcontent-%COMP%]{position:relative;height:100%;margin:0;overflow:hidden;outline:none;transition:all .2s ease-in-out}div.tb-widget[_ngcontent-%COMP%]   .tb-widget-title[_ngcontent-%COMP%]{max-height:65px;padding-top:5px;padding-left:5px;overflow:hidden}div.tb-widget[_ngcontent-%COMP%]   .tb-widget-title[_ngcontent-%COMP%]   tb-timewindow[_ngcontent-%COMP%]{font-size:14px;opacity:.85;margin:0}div.tb-widget[_ngcontent-%COMP%]   .tb-widget-title[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{width:100%;overflow:hidden;text-overflow:ellipsis;line-height:24px;letter-spacing:.01em;margin:0;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:2}div.tb-widget[_ngcontent-%COMP%]   .tb-widget-title[_ngcontent-%COMP%]   .title.single-row[_ngcontent-%COMP%]{-webkit-line-clamp:1}div.tb-widget[_ngcontent-%COMP%]   .tb-widget-actions[_ngcontent-%COMP%]{z-index:19;margin:5px 0 0}div.tb-widget[_ngcontent-%COMP%]   .tb-widget-actions-absolute[_ngcontent-%COMP%]{position:absolute;top:3px;right:8px;z-index:150}div.tb-widget[_ngcontent-%COMP%]   .tb-widget-actions[_ngcontent-%COMP%]   button.mat-icon-button[_ngcontent-%COMP%]{width:32px;min-width:32px;height:32px;min-height:32px;padding:0!important;margin:0!important;line-height:20px}div.tb-widget[_ngcontent-%COMP%]   .tb-widget-actions[_ngcontent-%COMP%]   button.mat-icon-button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{width:20px;min-width:20px;height:20px;min-height:20px;font-size:20px;line-height:20px}div.tb-widget[_ngcontent-%COMP%]   .tb-widget-content.tb-no-interaction[_ngcontent-%COMP%]{pointer-events:none}div.tb-widget[_ngcontent-%COMP%]   .tb-widget-content[_ngcontent-%COMP%]   tb-widget[_ngcontent-%COMP%]{position:relative;width:100%}div.tb-widget.tb-highlighted[_ngcontent-%COMP%]{border:1px solid #039be5;box-shadow:0 0 20px #039be5}div.tb-widget.tb-not-highlighted[_ngcontent-%COMP%]{opacity:.5}.tb-dashboard-context-menu-items[_ngcontent-%COMP%]{min-width:256px}"]}),n}(r.a);!function(){a["\u0275setClassMetadata"](rt,[{type:a.Component,args:[{selector:"tb-dashboard",templateUrl:"./dashboard.component.html",styleUrls:["./dashboard.component.scss"]}]}],(function(){return[{type:b.Store},{type:y.a},{type:l.a},{type:u.a},{type:v.BreakpointObserver},{type:a.IterableDiffers},{type:a.KeyValueDiffers},{type:a.NgZone}]}),{widgets:[{type:a.Input}],widgetLayouts:[{type:a.Input}],callbacks:[{type:a.Input}],aliasController:[{type:a.Input}],stateController:[{type:a.Input}],columns:[{type:a.Input}],margin:[{type:a.Input}],isEdit:[{type:a.Input}],autofillHeight:[{type:a.Input}],mobileAutofillHeight:[{type:a.Input}],mobileRowHeight:[{type:a.Input}],isMobile:[{type:a.Input}],isMobileDisabled:[{type:a.Input}],isEditActionEnabled:[{type:a.Input}],isExportActionEnabled:[{type:a.Input}],isRemoveActionEnabled:[{type:a.Input}],disableWidgetInteraction:[{type:a.Input}],dashboardStyle:[{type:a.Input}],backgroundImage:[{type:a.Input}],dashboardClass:[{type:a.Input}],ignoreLoading:[{type:a.Input}],dashboardTimewindow:[{type:a.Input}],gridster:[{type:a.ViewChild,args:["gridster",{static:!0}]}],dashboardMenuTrigger:[{type:a.ViewChild,args:["dashboardMenuTrigger",{static:!0}]}],widgetMenuTrigger:[{type:a.ViewChild,args:["widgetMenuTrigger",{static:!0}]}]})}()}).call(this,n("xexB"))},ekQc:function(t,e,n){"use strict";n.d(e,"a",(function(){return u})),n.d(e,"c",(function(){return m})),n.d(e,"b",(function(){return h}));var i=n("fXoL"),a=n("tyNb"),r=n("UaJx"),o=n("zp9Z"),s=n("cX0b"),l=n("Xbih"),c=n("YnEf"),d=n("4j5O"),p=n("lJxs"),u=function(){function t(t,e){this.dashboardService=t,this.dashboardUtils=e}return t.prototype.resolve=function(t){var e=this,n=t.params.dashboardId;return this.dashboardService.getDashboard(n).pipe(Object(p.a)((function(t){return e.dashboardUtils.validateAndUpdateDashboard(t)})))},t.\u0275fac=function(e){return new(e||t)(i["\u0275\u0275inject"](c.a),i["\u0275\u0275inject"](d.a))},t.\u0275prov=i["\u0275\u0275defineInjectable"]({token:t,factory:t.\u0275fac}),t}();!function(){i["\u0275setClassMetadata"](u,[{type:i.Injectable}],(function(){return[{type:c.a},{type:d.a}]}),null)}();var m=function(t,e,n){return n.dashboard.title},f=[{path:"dashboards",data:{breadcrumb:{label:"dashboard.dashboards",icon:"dashboard"}},children:[{path:"",component:r.a,data:{auth:[o.a.TENANT_ADMIN,o.a.CUSTOMER_USER],title:"dashboard.dashboards",dashboardsType:"tenant"},resolve:{entitiesTableConfig:s.a}},{path:":dashboardId",component:l.a,data:{breadcrumb:{labelFunction:m,icon:"dashboard"},auth:[o.a.TENANT_ADMIN,o.a.CUSTOMER_USER],title:"dashboard.dashboard",widgetEditMode:!1},resolve:{dashboard:u}}]}],h=function(){function t(){}return t.\u0275mod=i["\u0275\u0275defineNgModule"]({type:t}),t.\u0275inj=i["\u0275\u0275defineInjector"]({factory:function(e){return new(e||t)},providers:[s.a,u],imports:[[a.RouterModule.forChild(f)],a.RouterModule]}),t}();void(("undefined"==typeof ngJitMode||ngJitMode)&&i["\u0275\u0275setNgModuleScope"](h,{imports:[a.RouterModule],exports:[a.RouterModule]}))},em8L:function(t,e,n){"use strict";n.d(e,"a",(function(){return S}));var i=n("fXoL"),a=n("3Pt+"),r=n("8LU1"),o=n("JIJk"),s=n("//Q6"),l=n("l7P3"),c=n("0IaG"),d=n("XiUz"),p=n("ofXK"),u=n("znSr"),m=n("gKbb"),f=n("sYmb"),h=n("bTqV"),g=n("Qu3c"),y=function(){return{paddingBottom:"8px"}},b=function(){return{}};function v(t,e){if(1&t){var n=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"div",5),i["\u0275\u0275elementStart"](1,"tb-device-profile-alarm",6),i["\u0275\u0275listener"]("removeAlarm",(function(){i["\u0275\u0275restoreView"](n);var t=e.index;return i["\u0275\u0275nextContext"]().removeAlarm(t)})),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()}if(2&t){var a=e.$implicit,r=e.index,o=e.last,s=i["\u0275\u0275nextContext"]();i["\u0275\u0275property"]("ngStyle",o?i["\u0275\u0275pureFunction0"](5,b):i["\u0275\u0275pureFunction0"](4,y)),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("formControl",a)("expanded",0===r)("deviceProfileId",s.deviceProfileId)}}function x(t,e){1&t&&(i["\u0275\u0275elementStart"](0,"div"),i["\u0275\u0275elementStart"](1,"span",7),i["\u0275\u0275text"](2,"device-profile.no-alarm-rules"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]())}function C(t,e){if(1&t){var n=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"div",8),i["\u0275\u0275elementStart"](1,"button",9),i["\u0275\u0275listener"]("click",(function(){return i["\u0275\u0275restoreView"](n),i["\u0275\u0275nextContext"]().addAlarm()})),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementStart"](3,"span",10),i["\u0275\u0275text"](4,"device-profile.add-alarm-rule"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()}2&t&&(i["\u0275\u0275advance"](1),i["\u0275\u0275propertyInterpolate"]("matTooltip",i["\u0275\u0275pipeBind1"](2,1,"device-profile.add-alarm-rule")))}var S=function(){function t(t,e,n){this.store=t,this.fb=e,this.dialog=n,this.valueChangeSubscription=null,this.propagateChange=function(t){}}return Object.defineProperty(t.prototype,"required",{get:function(){return this.requiredValue},set:function(t){this.requiredValue=Object(r.coerceBooleanProperty)(t)},enumerable:!1,configurable:!0}),t.prototype.registerOnChange=function(t){this.propagateChange=t},t.prototype.registerOnTouched=function(t){},t.prototype.ngOnInit=function(){this.deviceProfileAlarmsFormGroup=this.fb.group({alarms:this.fb.array([])})},t.prototype.alarmsFormArray=function(){return this.deviceProfileAlarmsFormGroup.get("alarms")},t.prototype.setDisabledState=function(t){this.disabled=t,this.disabled?this.deviceProfileAlarmsFormGroup.disable({emitEvent:!1}):this.deviceProfileAlarmsFormGroup.enable({emitEvent:!1})},t.prototype.writeValue=function(t){var e=this;this.valueChangeSubscription&&this.valueChangeSubscription.unsubscribe();var n=[];t&&t.forEach((function(t){n.push(e.fb.control(t,[a.Validators.required]))})),this.deviceProfileAlarmsFormGroup.setControl("alarms",this.fb.array(n)),this.disabled?this.deviceProfileAlarmsFormGroup.disable({emitEvent:!1}):this.deviceProfileAlarmsFormGroup.enable({emitEvent:!1}),this.valueChangeSubscription=this.deviceProfileAlarmsFormGroup.valueChanges.subscribe((function(){e.updateModel()}))},t.prototype.trackByAlarm=function(t,e){return e?e.value.id:null},t.prototype.removeAlarm=function(t){this.deviceProfileAlarmsFormGroup.get("alarms").removeAt(t)},t.prototype.addAlarm=function(){var t={id:Object(s.k)(),alarmType:"",createRules:{CRITICAL:{condition:{condition:[]}}}};this.deviceProfileAlarmsFormGroup.get("alarms").push(this.fb.control(t,[o.v])),this.deviceProfileAlarmsFormGroup.updateValueAndValidity(),this.deviceProfileAlarmsFormGroup.valid||this.updateModel()},t.prototype.validate=function(t){return this.deviceProfileAlarmsFormGroup.valid?null:{alarms:{valid:!1}}},t.prototype.updateModel=function(){var t=this.deviceProfileAlarmsFormGroup.get("alarms").value;this.propagateChange(t)},t.\u0275fac=function(e){return new(e||t)(i["\u0275\u0275directiveInject"](l.Store),i["\u0275\u0275directiveInject"](a.FormBuilder),i["\u0275\u0275directiveInject"](c.MatDialog))},t.\u0275cmp=i["\u0275\u0275defineComponent"]({type:t,selectors:[["tb-device-profile-alarms"]],inputs:{required:"required",disabled:"disabled",deviceProfileId:"deviceProfileId"},features:[i["\u0275\u0275ProvidersFeature"]([{provide:a.NG_VALUE_ACCESSOR,useExisting:Object(i.forwardRef)((function(){return t})),multi:!0},{provide:a.NG_VALIDATORS,useExisting:Object(i.forwardRef)((function(){return t})),multi:!0}])],decls:5,vars:4,consts:[["fxLayout","column"],[1,"tb-device-profile-alarms"],["fxLayout","column",3,"ngStyle",4,"ngFor","ngForOf","ngForTrackBy"],[4,"ngIf"],["style","padding-top: 16px;",4,"ngIf"],["fxLayout","column",3,"ngStyle"],[3,"formControl","expanded","deviceProfileId","removeAlarm"],["translate","","fxLayoutAlign","center center",1,"tb-prompt"],[2,"padding-top","16px"],["mat-raised-button","","color","primary","type","button","matTooltipPosition","above",3,"matTooltip","click"],["translate",""]],template:function(t,e){1&t&&(i["\u0275\u0275elementStart"](0,"div",0),i["\u0275\u0275elementStart"](1,"div",1),i["\u0275\u0275template"](2,v,2,6,"div",2),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](3,x,3,0,"div",3),i["\u0275\u0275template"](4,C,5,3,"div",4),i["\u0275\u0275elementEnd"]()),2&t&&(i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngForOf",e.alarmsFormArray().controls)("ngForTrackBy",e.trackByAlarm),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",!e.alarmsFormArray().controls.length),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",!e.disabled))},directives:[d.f,p.NgForOf,p.NgIf,p.NgStyle,u.e,m.a,a.NgControlStatus,a.FormControlDirective,f.TranslateDirective,d.e,h.MatButton,g.MatTooltip],pipes:[f.TranslatePipe],styles:["[_nghost-%COMP%]   .tb-device-profile-alarms[_ngcontent-%COMP%]{overflow-y:auto}[_nghost-%COMP%]   .tb-device-profile-alarms.mat-padding[_ngcontent-%COMP%]{padding:8px}@media screen and (min-width:960px){[_nghost-%COMP%]   .tb-device-profile-alarms.mat-padding[_ngcontent-%COMP%]{padding:16px}}[_nghost-%COMP%]   .tb-prompt[_ngcontent-%COMP%]{margin:30px 0}"]}),t}();!function(){i["\u0275setClassMetadata"](S,[{type:i.Component,args:[{selector:"tb-device-profile-alarms",templateUrl:"./device-profile-alarms.component.html",styleUrls:["./device-profile-alarms.component.scss"],providers:[{provide:a.NG_VALUE_ACCESSOR,useExisting:Object(i.forwardRef)((function(){return S})),multi:!0},{provide:a.NG_VALIDATORS,useExisting:Object(i.forwardRef)((function(){return S})),multi:!0}]}]}],(function(){return[{type:l.Store},{type:a.FormBuilder},{type:c.MatDialog}]}),{required:[{type:i.Input}],disabled:[{type:i.Input}],deviceProfileId:[{type:i.Input}]})}()},enJx:function(t,e,n){"use strict";n.d(e,"a",(function(){return St}));var i=n("mrSG"),a=n("fXoL"),r=n("RxGS"),o=n("mbhL"),s=n("M9IT"),l=n("Dh3D"),c=n("S+vS"),d=n("Bjlt"),p=n("4r/P"),u=n("xgIS"),m=n("VRyK"),f=n("cp0P"),h=n("Kj3r"),g=n("/uUt"),y=n("vkgz"),b=n("7JTo"),v=n("0EQZ"),x=n("2Vo4"),C=n("jtHE"),S=n("LRne"),w=n("Duvn"),E=n("JIr8"),I=n("lJxs"),O=n("05l1"),T=n("x+ZX"),M=n("IzEk"),F=n("U3y+"),P=function(){function t(t,e){this.entityRelationService=t,this.translate=e,this.relationsSubject=new x.a([]),this.pageDataSubject=new x.a(Object(w.a)()),this.pageData$=this.pageDataSubject.asObservable(),this.selection=new v.SelectionModel(!0,[])}return t.prototype.connect=function(t){return this.relationsSubject.asObservable()},t.prototype.disconnect=function(t){this.relationsSubject.complete(),this.pageDataSubject.complete()},t.prototype.loadRelations=function(t,e,n,i){var a=this;void 0===i&&(i=!1),i&&(this.allRelations=null);var r=new C.a;return this.fetchRelations(t,e,n).pipe(Object(y.a)((function(){a.selection.clear()})),Object(E.a)((function(){return Object(S.a)(Object(w.a)())}))).subscribe((function(t){a.relationsSubject.next(t.data),a.pageDataSubject.next(t),r.next(t)})),r},t.prototype.fetchRelations=function(t,e,n){return this.getAllRelations(t,e).pipe(Object(I.a)((function(t){return n.filterData(t)})))},t.prototype.getAllRelations=function(t,e){var n=this;if(!this.allRelations){var i=void 0;switch(t){case b.b.FROM:i=this.entityRelationService.findInfoByFrom(e);break;case b.b.TO:i=this.entityRelationService.findInfoByTo(e)}this.allRelations=i.pipe(Object(I.a)((function(e){return e.forEach((function(e){t===b.b.FROM?e.toEntityTypeName=n.translate.instant(F.d.get(e.to.entityType).type):e.fromEntityTypeName=n.translate.instant(F.d.get(e.from.entityType).type)})),e})),Object(O.a)(1),Object(T.a)())}return this.allRelations},t.prototype.isAllSelected=function(){var t=this.selection.selected.length;return this.relationsSubject.pipe(Object(I.a)((function(e){return t===e.length})))},t.prototype.isEmpty=function(){return this.relationsSubject.pipe(Object(I.a)((function(t){return!t.length})))},t.prototype.total=function(){return this.pageDataSubject.pipe(Object(I.a)((function(t){return t.totalElements})))},t.prototype.masterToggle=function(){var t=this;this.relationsSubject.pipe(Object(y.a)((function(e){t.selection.selected.length===e.length?t.selection.clear():e.forEach((function(e){t.selection.select(e)}))})),Object(M.a)(1)).subscribe()},t}(),D=n("jkF6"),k=n("l7P3"),j=n("sYmb"),A=n("0IaG"),_=n("XiUz"),L=n("/t3+"),V=n("znSr"),R=n("kmnG"),N=n("d3UM"),G=n("3Pt+"),B=n("ofXK"),U=n("bTqV"),q=n("Qu3c"),W=n("NFeN"),z=n("qFsG"),K=n("+0xr"),H=n("f0Cb"),$=n("FKr1"),Q=n("bSwM"),X=["searchInput"];function Y(t,e){if(1&t&&(a["\u0275\u0275elementStart"](0,"mat-option",36),a["\u0275\u0275text"](1),a["\u0275\u0275pipe"](2,"translate"),a["\u0275\u0275elementEnd"]()),2&t){var n=e.$implicit,i=a["\u0275\u0275nextContext"]();a["\u0275\u0275property"]("value",n),a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](2,2,i.directionTypeTranslations.get(i.directions[n]))," ")}}function J(t,e){if(1&t){var n=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementStart"](0,"mat-header-cell",37),a["\u0275\u0275elementStart"](1,"mat-checkbox",38),a["\u0275\u0275listener"]("change",(function(t){a["\u0275\u0275restoreView"](n);var e=a["\u0275\u0275nextContext"]();return t?e.dataSource.masterToggle():null})),a["\u0275\u0275pipe"](2,"async"),a["\u0275\u0275pipe"](3,"async"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()}if(2&t){var i=a["\u0275\u0275nextContext"]();a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("checked",i.dataSource.selection.hasValue()&&a["\u0275\u0275pipeBind1"](2,2,i.dataSource.isAllSelected()))("indeterminate",i.dataSource.selection.hasValue()&&!a["\u0275\u0275pipeBind1"](3,4,i.dataSource.isAllSelected()))}}function Z(t,e){if(1&t){var n=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementStart"](0,"mat-cell"),a["\u0275\u0275elementStart"](1,"mat-checkbox",39),a["\u0275\u0275listener"]("click",(function(t){return a["\u0275\u0275restoreView"](n),t.stopPropagation()}))("change",(function(t){a["\u0275\u0275restoreView"](n);var i=e.$implicit,r=a["\u0275\u0275nextContext"]();return t?r.dataSource.selection.toggle(i):null})),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()}if(2&t){var i=e.$implicit,r=a["\u0275\u0275nextContext"]();a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("checked",r.dataSource.selection.isSelected(i))}}function tt(t,e){1&t&&(a["\u0275\u0275elementStart"](0,"mat-header-cell",40),a["\u0275\u0275text"](1),a["\u0275\u0275pipe"](2,"translate"),a["\u0275\u0275elementEnd"]()),2&t&&(a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](2,1,"relation.type")," "))}function et(t,e){if(1&t&&(a["\u0275\u0275elementStart"](0,"mat-cell"),a["\u0275\u0275text"](1),a["\u0275\u0275elementEnd"]()),2&t){var n=e.$implicit;a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"](" ",n.type," ")}}function nt(t,e){1&t&&(a["\u0275\u0275elementStart"](0,"mat-header-cell",40),a["\u0275\u0275text"](1),a["\u0275\u0275pipe"](2,"translate"),a["\u0275\u0275elementEnd"]()),2&t&&(a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](2,1,"relation.to-entity-type")," "))}function it(t,e){if(1&t&&(a["\u0275\u0275elementStart"](0,"mat-cell"),a["\u0275\u0275text"](1),a["\u0275\u0275elementEnd"]()),2&t){var n=e.$implicit;a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"](" ",n.toEntityTypeName," ")}}function at(t,e){1&t&&(a["\u0275\u0275elementContainerStart"](0,41),a["\u0275\u0275template"](1,nt,3,3,"mat-header-cell",25),a["\u0275\u0275template"](2,it,2,1,"mat-cell",23),a["\u0275\u0275elementContainerEnd"]())}function rt(t,e){1&t&&(a["\u0275\u0275elementStart"](0,"mat-header-cell",40),a["\u0275\u0275text"](1),a["\u0275\u0275pipe"](2,"translate"),a["\u0275\u0275elementEnd"]()),2&t&&(a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](2,1,"relation.to-entity-name")," "))}function ot(t,e){if(1&t&&(a["\u0275\u0275elementStart"](0,"mat-cell"),a["\u0275\u0275text"](1),a["\u0275\u0275elementEnd"]()),2&t){var n=e.$implicit;a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"](" ",n.toName," ")}}function st(t,e){1&t&&(a["\u0275\u0275elementContainerStart"](0,42),a["\u0275\u0275template"](1,rt,3,3,"mat-header-cell",25),a["\u0275\u0275template"](2,ot,2,1,"mat-cell",23),a["\u0275\u0275elementContainerEnd"]())}function lt(t,e){1&t&&(a["\u0275\u0275elementStart"](0,"mat-header-cell",40),a["\u0275\u0275text"](1),a["\u0275\u0275pipe"](2,"translate"),a["\u0275\u0275elementEnd"]()),2&t&&(a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](2,1,"relation.from-entity-type")," "))}function ct(t,e){if(1&t&&(a["\u0275\u0275elementStart"](0,"mat-cell"),a["\u0275\u0275text"](1),a["\u0275\u0275elementEnd"]()),2&t){var n=e.$implicit;a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"](" ",n.fromEntityTypeName," ")}}function dt(t,e){1&t&&(a["\u0275\u0275elementContainerStart"](0,43),a["\u0275\u0275template"](1,lt,3,3,"mat-header-cell",25),a["\u0275\u0275template"](2,ct,2,1,"mat-cell",23),a["\u0275\u0275elementContainerEnd"]())}function pt(t,e){1&t&&(a["\u0275\u0275elementStart"](0,"mat-header-cell",40),a["\u0275\u0275text"](1),a["\u0275\u0275pipe"](2,"translate"),a["\u0275\u0275elementEnd"]()),2&t&&(a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](2,1,"relation.from-entity-name")," "))}function ut(t,e){if(1&t&&(a["\u0275\u0275elementStart"](0,"mat-cell"),a["\u0275\u0275text"](1),a["\u0275\u0275elementEnd"]()),2&t){var n=e.$implicit;a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"](" ",n.fromName," ")}}function mt(t,e){1&t&&(a["\u0275\u0275elementContainerStart"](0,44),a["\u0275\u0275template"](1,pt,3,3,"mat-header-cell",25),a["\u0275\u0275template"](2,ut,2,1,"mat-cell",23),a["\u0275\u0275elementContainerEnd"]())}function ft(t,e){1&t&&a["\u0275\u0275element"](0,"mat-header-cell",45)}function ht(t,e){if(1&t){var n=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementStart"](0,"mat-cell"),a["\u0275\u0275elementStart"](1,"div",46),a["\u0275\u0275elementStart"](2,"button",11),a["\u0275\u0275listener"]("click",(function(t){a["\u0275\u0275restoreView"](n);var i=e.$implicit;return a["\u0275\u0275nextContext"]().editRelation(t,i)})),a["\u0275\u0275pipe"](3,"async"),a["\u0275\u0275pipe"](4,"translate"),a["\u0275\u0275elementStart"](5,"mat-icon"),a["\u0275\u0275text"](6,"edit"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](7,"button",11),a["\u0275\u0275listener"]("click",(function(t){a["\u0275\u0275restoreView"](n);var i=e.$implicit;return a["\u0275\u0275nextContext"]().deleteRelation(t,i)})),a["\u0275\u0275pipe"](8,"async"),a["\u0275\u0275pipe"](9,"translate"),a["\u0275\u0275elementStart"](10,"mat-icon"),a["\u0275\u0275text"](11,"delete"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()}if(2&t){var i=a["\u0275\u0275nextContext"]();a["\u0275\u0275advance"](2),a["\u0275\u0275propertyInterpolate"]("matTooltip",a["\u0275\u0275pipeBind1"](4,6,"relation.edit")),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](3,4,i.isLoading$)),a["\u0275\u0275advance"](5),a["\u0275\u0275propertyInterpolate"]("matTooltip",a["\u0275\u0275pipeBind1"](9,10,"relation.delete")),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](8,8,i.isLoading$))}}var gt=function(){return{"mat-row-select":!0}};function yt(t,e){1&t&&a["\u0275\u0275element"](0,"mat-header-row",47),2&t&&a["\u0275\u0275property"]("ngClass",a["\u0275\u0275pureFunction0"](1,gt))}var bt=function(t){return{"mat-row-select":!0,"mat-selected":t}};function vt(t,e){if(1&t){var n=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementStart"](0,"mat-row",48),a["\u0275\u0275listener"]("click",(function(){a["\u0275\u0275restoreView"](n);var t=e.$implicit;return a["\u0275\u0275nextContext"]().dataSource.selection.toggle(t)})),a["\u0275\u0275elementEnd"]()}if(2&t){var i=e.$implicit,r=a["\u0275\u0275nextContext"]();a["\u0275\u0275property"]("ngClass",a["\u0275\u0275pureFunction1"](1,bt,r.dataSource.selection.isSelected(i)))}}var xt=function(t){return{count:t}},Ct=function(){return[10,20,30]},St=function(t){function e(e,n,i,a,r){var s=t.call(this,e)||this;s.store=e,s.entityRelationService=n,s.translate=i,s.dialog=a,s.dialogService=r,s.directions=b.b,s.directionTypes=Object.keys(b.b),s.directionTypeTranslations=b.g,s.textSearchMode=!1,s.activeValue=!1,s.dirtyValue=!1,s.viewsInited=!1,s.dirtyValue=!s.activeValue;var l={property:"type",direction:p.a.ASC};return s.direction=b.b.FROM,s.pageLink=new o.b(10,0,null,l),s.dataSource=new P(s.entityRelationService,s.translate),s.updateColumns(),s}return Object(i.d)(e,t),Object.defineProperty(e.prototype,"active",{set:function(t){this.activeValue!==t&&(this.activeValue=t,this.activeValue&&this.dirtyValue&&(this.dirtyValue=!1,this.viewsInited&&this.updateData(!0)))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"entityId",{set:function(t){this.entityIdValue!==t&&(this.entityIdValue=t,this.viewsInited&&(this.resetSortAndFilter(this.activeValue),this.activeValue||(this.dirtyValue=!0)))},enumerable:!1,configurable:!0}),e.prototype.ngOnInit=function(){},e.prototype.updateColumns=function(){this.direction===b.b.FROM?this.displayedColumns=["select","type","toEntityTypeName","toName","actions"]:this.displayedColumns=["select","type","fromEntityTypeName","fromName","actions"]},e.prototype.directionChanged=function(t){this.direction=t,this.updateColumns(),this.updateData(!0)},e.prototype.ngAfterViewInit=function(){var t=this;Object(u.a)(this.searchInputField.nativeElement,"keyup").pipe(Object(h.a)(150),Object(g.a)(),Object(y.a)((function(){t.paginator.pageIndex=0,t.updateData()}))).subscribe(),this.sort.sortChange.subscribe((function(){return t.paginator.pageIndex=0})),Object(m.a)(this.sort.sortChange,this.paginator.page).pipe(Object(y.a)((function(){return t.updateData()}))).subscribe(),this.viewsInited=!0,this.activeValue&&this.entityIdValue&&this.updateData(!0)},e.prototype.updateData=function(t){void 0===t&&(t=!1),this.pageLink.page=this.paginator.pageIndex,this.pageLink.pageSize=this.paginator.pageSize,this.pageLink.sortOrder.property=this.sort.active,this.pageLink.sortOrder.direction=p.a[this.sort.direction.toUpperCase()],this.dataSource.loadRelations(this.direction,this.entityIdValue,this.pageLink,t)},e.prototype.enterFilterMode=function(){var t=this;this.textSearchMode=!0,this.pageLink.textSearch="",setTimeout((function(){t.searchInputField.nativeElement.focus(),t.searchInputField.nativeElement.setSelectionRange(0,0)}),10)},e.prototype.exitFilterMode=function(){this.textSearchMode=!1,this.pageLink.textSearch=null,this.paginator.pageIndex=0,this.updateData()},e.prototype.resetSortAndFilter=function(t){void 0===t&&(t=!0),this.direction=b.b.FROM,this.updateColumns(),this.pageLink.textSearch=null,this.paginator.pageIndex=0;var e=this.sort.sortables.get("type");this.sort.active=e.id,this.sort.direction="asc",t&&this.updateData(!0)},e.prototype.reloadRelations=function(){this.updateData(!0)},e.prototype.addRelation=function(t){this.openRelationDialog(t)},e.prototype.editRelation=function(t,e){this.openRelationDialog(t,e)},e.prototype.deleteRelation=function(t,e){var n,i,a=this;t&&t.stopPropagation(),this.direction===b.b.FROM?(n=this.translate.instant("relation.delete-to-relation-title",{entityName:e.toName}),i=this.translate.instant("relation.delete-to-relation-text",{entityName:e.toName})):(n=this.translate.instant("relation.delete-from-relation-title",{entityName:e.fromName}),i=this.translate.instant("relation.delete-from-relation-text",{entityName:e.fromName})),this.dialogService.confirm(n,i,this.translate.instant("action.no"),this.translate.instant("action.yes"),!0).subscribe((function(t){t&&a.entityRelationService.deleteRelation(e.from,e.type,e.to).subscribe((function(){a.reloadRelations()}))}))},e.prototype.deleteRelations=function(t){var e=this;if(t&&t.stopPropagation(),this.dataSource.selection.selected.length>0){var n=void 0,i=void 0;this.direction===b.b.FROM?(n=this.translate.instant("relation.delete-to-relations-title",{count:this.dataSource.selection.selected.length}),i=this.translate.instant("relation.delete-to-relations-text")):(n=this.translate.instant("relation.delete-from-relations-title",{count:this.dataSource.selection.selected.length}),i=this.translate.instant("relation.delete-from-relations-text")),this.dialogService.confirm(n,i,this.translate.instant("action.no"),this.translate.instant("action.yes"),!0).subscribe((function(t){if(t){var n=[];e.dataSource.selection.selected.forEach((function(t){n.push(e.entityRelationService.deleteRelation(t.from,t.type,t.to))})),Object(f.a)(n).subscribe((function(){e.reloadRelations()}))}}))}},e.prototype.openRelationDialog=function(t,e){var n=this;void 0===e&&(e=null),t&&t.stopPropagation();var a=!1;e||(a=!0,e={from:null,to:null,type:null,typeGroup:b.d.COMMON},this.direction===b.b.FROM?e.from=this.entityIdValue:e.to=this.entityIdValue),this.dialog.open(D.a,{disableClose:!0,panelClass:["tb-dialog","tb-fullscreen-dialog"],data:{isAdd:a,direction:this.direction,relation:Object(i.a)({},e)}}).afterClosed().subscribe((function(t){t&&n.reloadRelations()}))},e.\u0275fac=function(t){return new(t||e)(a["\u0275\u0275directiveInject"](k.Store),a["\u0275\u0275directiveInject"](d.a),a["\u0275\u0275directiveInject"](j.TranslateService),a["\u0275\u0275directiveInject"](A.MatDialog),a["\u0275\u0275directiveInject"](c.a))},e.\u0275cmp=a["\u0275\u0275defineComponent"]({type:e,selectors:[["tb-relation-table"]],viewQuery:function(t,e){var n;(1&t&&(a["\u0275\u0275viewQuery"](X,!0),a["\u0275\u0275viewQuery"](s.MatPaginator,!0),a["\u0275\u0275viewQuery"](l.MatSort,!0)),2&t)&&(a["\u0275\u0275queryRefresh"](n=a["\u0275\u0275loadQuery"]())&&(e.searchInputField=n.first),a["\u0275\u0275queryRefresh"](n=a["\u0275\u0275loadQuery"]())&&(e.paginator=n.first),a["\u0275\u0275queryRefresh"](n=a["\u0275\u0275loadQuery"]())&&(e.sort=n.first))},inputs:{active:"active",entityId:"entityId"},features:[a["\u0275\u0275InheritDefinitionFeature"]],decls:78,vars:69,consts:[[1,"mat-padding","tb-entity-table","tb-absolute-fill"],["fxFlex","","fxLayout","column",1,"mat-elevation-z1","tb-entity-table-content"],[1,"mat-table-toolbar",3,"fxShow"],[1,"mat-toolbar-tools"],["fxLayout","row","fxLayoutAlign","start center","fxLayout.xs","column","fxLayoutAlign.xs","center start",1,"title-container"],[1,"tb-entity-table-title"],[1,"mat-block","tb-relation-direction"],["translate",""],[3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["fxFlex",""],["mat-icon-button","","matTooltipPosition","above",3,"disabled","matTooltip","click"],["mat-icon-button","","matTooltipPosition","above",3,"matTooltip"],["matInput","",3,"ngModel","placeholder","ngModelChange"],["searchInput",""],["mat-icon-button","","matTooltipPosition","above",3,"matTooltip","click"],["color","primary",1,"mat-table-toolbar",3,"fxShow"],["fxLayoutAlign","space-between center",1,"mat-toolbar-tools"],[1,"tb-entity-table-info"],["fxFlex","",1,"table-container"],["mat-table","","matSort","","matSortDisableClear","",3,"dataSource","matSortActive","matSortDirection"],["matColumnDef","select","sticky",""],["style","width: 30px;",4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","type"],["mat-sort-header","","style","width: 33%",4,"matHeaderCellDef"],["matColumnDef","toEntityTypeName",4,"ngIf"],["matColumnDef","toName",4,"ngIf"],["matColumnDef","fromEntityTypeName",4,"ngIf"],["matColumnDef","fromName",4,"ngIf"],["matColumnDef","actions","stickyEnd",""],["style","min-width: 80px; max-width: 80px; width: 80px",4,"matHeaderCellDef"],[3,"ngClass",4,"matHeaderRowDef","matHeaderRowDefSticky"],[3,"ngClass","click",4,"matRowDef","matRowDefColumns"],["fxLayoutAlign","center center","translate","",1,"no-data-found",3,"fxShow"],[3,"length","pageIndex","pageSize","pageSizeOptions"],[3,"value"],[2,"width","30px"],[3,"checked","indeterminate","change"],[3,"checked","click","change"],["mat-sort-header","",2,"width","33%"],["matColumnDef","toEntityTypeName"],["matColumnDef","toName"],["matColumnDef","fromEntityTypeName"],["matColumnDef","fromName"],[2,"min-width","80px","max-width","80px","width","80px"],["fxFlex","","fxLayout","row","fxLayoutAlign","end"],[3,"ngClass"],[3,"ngClass","click"]],template:function(t,e){1&t&&(a["\u0275\u0275elementStart"](0,"div",0),a["\u0275\u0275elementStart"](1,"div",1),a["\u0275\u0275elementStart"](2,"mat-toolbar",2),a["\u0275\u0275elementStart"](3,"div",3),a["\u0275\u0275elementStart"](4,"div",4),a["\u0275\u0275elementStart"](5,"span",5),a["\u0275\u0275text"](6),a["\u0275\u0275pipe"](7,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](8,"mat-form-field",6),a["\u0275\u0275elementStart"](9,"mat-label",7),a["\u0275\u0275text"](10,"relation.direction"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](11,"mat-select",8),a["\u0275\u0275listener"]("ngModelChange",(function(t){return e.directionChanged(t)})),a["\u0275\u0275template"](12,Y,3,4,"mat-option",9),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](13,"span",10),a["\u0275\u0275elementStart"](14,"button",11),a["\u0275\u0275listener"]("click",(function(t){return e.addRelation(t)})),a["\u0275\u0275pipe"](15,"async"),a["\u0275\u0275pipe"](16,"translate"),a["\u0275\u0275elementStart"](17,"mat-icon"),a["\u0275\u0275text"](18,"add"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](19,"button",11),a["\u0275\u0275listener"]("click",(function(){return e.reloadRelations()})),a["\u0275\u0275pipe"](20,"async"),a["\u0275\u0275pipe"](21,"translate"),a["\u0275\u0275elementStart"](22,"mat-icon"),a["\u0275\u0275text"](23,"refresh"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](24,"button",11),a["\u0275\u0275listener"]("click",(function(){return e.enterFilterMode()})),a["\u0275\u0275pipe"](25,"async"),a["\u0275\u0275pipe"](26,"translate"),a["\u0275\u0275elementStart"](27,"mat-icon"),a["\u0275\u0275text"](28,"search"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](29,"mat-toolbar",2),a["\u0275\u0275elementStart"](30,"div",3),a["\u0275\u0275elementStart"](31,"button",12),a["\u0275\u0275pipe"](32,"translate"),a["\u0275\u0275elementStart"](33,"mat-icon"),a["\u0275\u0275text"](34,"search"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](35,"mat-form-field",10),a["\u0275\u0275elementStart"](36,"mat-label"),a["\u0275\u0275text"](37,"\xa0"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](38,"input",13,14),a["\u0275\u0275listener"]("ngModelChange",(function(t){return e.pageLink.textSearch=t})),a["\u0275\u0275pipe"](40,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](41,"button",15),a["\u0275\u0275listener"]("click",(function(){return e.exitFilterMode()})),a["\u0275\u0275pipe"](42,"translate"),a["\u0275\u0275elementStart"](43,"mat-icon"),a["\u0275\u0275text"](44,"close"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](45,"mat-toolbar",16),a["\u0275\u0275elementStart"](46,"div",17),a["\u0275\u0275elementStart"](47,"span",18),a["\u0275\u0275text"](48),a["\u0275\u0275pipe"](49,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](50,"button",11),a["\u0275\u0275listener"]("click",(function(t){return e.deleteRelations(t)})),a["\u0275\u0275pipe"](51,"async"),a["\u0275\u0275pipe"](52,"translate"),a["\u0275\u0275elementStart"](53,"mat-icon"),a["\u0275\u0275text"](54,"delete"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](55,"div",19),a["\u0275\u0275elementStart"](56,"table",20),a["\u0275\u0275elementContainerStart"](57,21),a["\u0275\u0275template"](58,J,4,6,"mat-header-cell",22),a["\u0275\u0275template"](59,Z,2,1,"mat-cell",23),a["\u0275\u0275elementContainerEnd"](),a["\u0275\u0275elementContainerStart"](60,24),a["\u0275\u0275template"](61,tt,3,3,"mat-header-cell",25),a["\u0275\u0275template"](62,et,2,1,"mat-cell",23),a["\u0275\u0275elementContainerEnd"](),a["\u0275\u0275template"](63,at,3,0,"ng-container",26),a["\u0275\u0275template"](64,st,3,0,"ng-container",27),a["\u0275\u0275template"](65,dt,3,0,"ng-container",28),a["\u0275\u0275template"](66,mt,3,0,"ng-container",29),a["\u0275\u0275elementContainerStart"](67,30),a["\u0275\u0275template"](68,ft,1,0,"mat-header-cell",31),a["\u0275\u0275template"](69,ht,12,12,"mat-cell",23),a["\u0275\u0275elementContainerEnd"](),a["\u0275\u0275template"](70,yt,1,2,"mat-header-row",32),a["\u0275\u0275template"](71,vt,1,3,"mat-row",33),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](72,"span",34),a["\u0275\u0275pipe"](73,"async"),a["\u0275\u0275text"](74),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](75,"mat-divider"),a["\u0275\u0275element"](76,"mat-paginator",35),a["\u0275\u0275pipe"](77,"async"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()),2&t&&(a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("fxShow",!e.textSearchMode&&e.dataSource.selection.isEmpty()),a["\u0275\u0275advance"](4),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](7,35,e.direction==e.directions.FROM?"relation.from-relations":"relation.to-relations")," "),a["\u0275\u0275advance"](5),a["\u0275\u0275property"]("ngModel",e.direction),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngForOf",e.directionTypes),a["\u0275\u0275advance"](2),a["\u0275\u0275propertyInterpolate"]("matTooltip",a["\u0275\u0275pipeBind1"](16,39,"action.add")),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](15,37,e.isLoading$)),a["\u0275\u0275advance"](5),a["\u0275\u0275propertyInterpolate"]("matTooltip",a["\u0275\u0275pipeBind1"](21,43,"action.refresh")),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](20,41,e.isLoading$)),a["\u0275\u0275advance"](5),a["\u0275\u0275propertyInterpolate"]("matTooltip",a["\u0275\u0275pipeBind1"](26,47,"action.search")),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](25,45,e.isLoading$)),a["\u0275\u0275advance"](5),a["\u0275\u0275property"]("fxShow",e.textSearchMode&&e.dataSource.selection.isEmpty()),a["\u0275\u0275advance"](2),a["\u0275\u0275propertyInterpolate"]("matTooltip",a["\u0275\u0275pipeBind1"](32,49,"action.search")),a["\u0275\u0275advance"](7),a["\u0275\u0275propertyInterpolate"]("placeholder",a["\u0275\u0275pipeBind1"](40,51,"common.enter-search")),a["\u0275\u0275property"]("ngModel",e.pageLink.textSearch),a["\u0275\u0275advance"](3),a["\u0275\u0275propertyInterpolate"]("matTooltip",a["\u0275\u0275pipeBind1"](42,53,"action.close")),a["\u0275\u0275advance"](4),a["\u0275\u0275property"]("fxShow",!e.dataSource.selection.isEmpty()),a["\u0275\u0275advance"](3),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind2"](49,55,"relation.selected-relations",a["\u0275\u0275pureFunction1"](66,xt,e.dataSource.selection.selected.length))," "),a["\u0275\u0275advance"](2),a["\u0275\u0275propertyInterpolate"]("matTooltip",a["\u0275\u0275pipeBind1"](52,60,"action.delete")),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](51,58,e.isLoading$)),a["\u0275\u0275advance"](6),a["\u0275\u0275property"]("dataSource",e.dataSource)("matSortActive",e.pageLink.sortOrder.property)("matSortDirection",e.pageLink.sortDirection()),a["\u0275\u0275advance"](7),a["\u0275\u0275property"]("ngIf",e.direction===e.directions.FROM),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",e.direction===e.directions.FROM),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",e.direction===e.directions.TO),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",e.direction===e.directions.TO),a["\u0275\u0275advance"](4),a["\u0275\u0275property"]("matHeaderRowDef",e.displayedColumns)("matHeaderRowDefSticky",!0),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("matRowDefColumns",e.displayedColumns),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("fxShow",a["\u0275\u0275pipeBind1"](73,62,e.dataSource.isEmpty())),a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate"]("relation.no-relations-text"),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("length",a["\u0275\u0275pipeBind1"](77,64,e.dataSource.total()))("pageIndex",e.pageLink.page)("pageSize",e.pageLink.pageSize)("pageSizeOptions",a["\u0275\u0275pureFunction0"](68,Ct)))},directives:[_.b,_.f,L.MatToolbar,V.d,_.e,R.MatFormField,R.MatLabel,j.TranslateDirective,N.MatSelect,G.NgControlStatus,G.NgModel,B.NgForOf,U.MatButton,q.MatTooltip,W.MatIcon,z.MatInput,G.DefaultValueAccessor,K.MatTable,l.MatSort,K.MatColumnDef,K.MatHeaderCellDef,K.MatCellDef,B.NgIf,K.MatHeaderRowDef,K.MatRowDef,H.MatDivider,s.MatPaginator,$.MatOption,K.MatHeaderCell,Q.MatCheckbox,K.MatCell,l.MatSortHeader,K.MatHeaderRow,B.NgClass,V.b,K.MatRow],pipes:[j.TranslatePipe,B.AsyncPipe],styles:["[_nghost-%COMP%]{width:100%;height:100%}[_nghost-%COMP%]   .tb-entity-table[_ngcontent-%COMP%]   .tb-entity-table-content[_ngcontent-%COMP%]{width:100%;height:100%;background:#fff}[_nghost-%COMP%]   .tb-entity-table[_ngcontent-%COMP%]   .tb-entity-table-content[_ngcontent-%COMP%]   .mat-toolbar-tools[_ngcontent-%COMP%]{min-height:auto}[_nghost-%COMP%]   .tb-entity-table[_ngcontent-%COMP%]   .tb-entity-table-content[_ngcontent-%COMP%]   .title-container[_ngcontent-%COMP%]{overflow:hidden}[_nghost-%COMP%]   .tb-entity-table[_ngcontent-%COMP%]   .tb-entity-table-content[_ngcontent-%COMP%]   .tb-entity-table-title[_ngcontent-%COMP%]{padding-right:20px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}[_nghost-%COMP%]   .tb-entity-table[_ngcontent-%COMP%]   .tb-entity-table-content[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]{overflow:auto}[_nghost-%COMP%]   .tb-entity-table[_ngcontent-%COMP%]   .tb-entity-table-content[_ngcontent-%COMP%]   .tb-entity-table-info[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}@media screen and (max-width:599px){[_nghost-%COMP%]   .mat-toolbar[_ngcontent-%COMP%]{height:auto;min-height:100px}[_nghost-%COMP%]   .mat-toolbar[_ngcontent-%COMP%]   .tb-entity-table-title[_ngcontent-%COMP%]{padding-bottom:5px;width:100%}}[_nghost-%COMP%]     .mat-sort-header-sorted .mat-sort-header-arrow{opacity:1!important}[_nghost-%COMP%]     mat-form-field.tb-relation-direction{font-size:16px;width:200px}[_nghost-%COMP%]     mat-form-field.tb-relation-direction .mat-form-field-wrapper{padding-bottom:0}[_nghost-%COMP%]     mat-form-field.tb-relation-direction .mat-form-field-underline{bottom:0}@media screen and (max-width:599px){[_nghost-%COMP%]     mat-form-field.tb-relation-direction{width:100%}[_nghost-%COMP%]     mat-form-field.tb-relation-direction .mat-form-field-infix{width:auto!important}}"],changeDetection:0}),e}(r.a);!function(){a["\u0275setClassMetadata"](St,[{type:a.Component,args:[{selector:"tb-relation-table",templateUrl:"./relation-table.component.html",styleUrls:["./relation-table.component.scss"],changeDetection:a.ChangeDetectionStrategy.OnPush}]}],(function(){return[{type:k.Store},{type:d.a},{type:j.TranslateService},{type:A.MatDialog},{type:c.a}]}),{active:[{type:a.Input}],entityId:[{type:a.Input}],searchInputField:[{type:a.ViewChild,args:["searchInput"]}],paginator:[{type:a.ViewChild,args:[s.MatPaginator]}],sort:[{type:a.ViewChild,args:[l.MatSort]}]})}()},eriv:function(t,e,n){"use strict";n.d(e,"a",(function(){return J}));var i=n("mrSG"),a=n("fXoL"),r=n("0IaG"),o=n("3Pt+"),s=n("gmuX"),l=n("JIJk"),c=n("g+M/"),d=n("U3y+"),p=n("APwO"),u=n("//Q6"),m=n("/3Pq"),f=n("l7P3"),h=n("tyNb"),g=n("FKr1"),y=n("/t3+"),b=n("sYmb"),v=n("XiUz"),x=n("bTqV"),C=n("NFeN"),S=n("ofXK"),w=n("xHqg"),E=n("kmnG"),I=n("qFsG"),O=n("E4Bx"),T=n("5U8l"),M=n("znSr"),F=n("d3UM"),P=n("8yrD"),D=n("em8L"),k=n("xkYi"),j=n("f0Cb"),A=n("bv9b"),_=["addDeviceProfileStepper"];function L(t,e){1&t&&a["\u0275\u0275element"](0,"mat-progress-bar",34)}function V(t,e){1&t&&a["\u0275\u0275element"](0,"div",35)}function R(t,e){1&t&&(a["\u0275\u0275text"](0),a["\u0275\u0275pipe"](1,"translate")),2&t&&a["\u0275\u0275textInterpolate"](a["\u0275\u0275pipeBind1"](1,1,"device-profile.device-profile-details"))}function N(t,e){1&t&&(a["\u0275\u0275elementStart"](0,"mat-error"),a["\u0275\u0275text"](1),a["\u0275\u0275pipe"](2,"translate"),a["\u0275\u0275elementEnd"]()),2&t&&(a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](2,1,"device-profile.name-required")," "))}function G(t,e){if(1&t&&(a["\u0275\u0275elementStart"](0,"mat-option",36),a["\u0275\u0275text"](1),a["\u0275\u0275pipe"](2,"translate"),a["\u0275\u0275elementEnd"]()),2&t){var n=e.$implicit,i=a["\u0275\u0275nextContext"]();a["\u0275\u0275property"]("value",n),a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](2,2,i.deviceProfileTypeTranslations.get(n))," ")}}function B(t,e){1&t&&(a["\u0275\u0275elementStart"](0,"mat-error"),a["\u0275\u0275text"](1),a["\u0275\u0275pipe"](2,"translate"),a["\u0275\u0275elementEnd"]()),2&t&&(a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](2,1,"device-profile.type-required")," "))}function U(t,e){1&t&&(a["\u0275\u0275text"](0),a["\u0275\u0275pipe"](1,"translate")),2&t&&a["\u0275\u0275textInterpolate"](a["\u0275\u0275pipeBind1"](1,1,"device-profile.transport-configuration"))}function q(t,e){if(1&t&&(a["\u0275\u0275elementStart"](0,"mat-option",36),a["\u0275\u0275text"](1),a["\u0275\u0275pipe"](2,"translate"),a["\u0275\u0275elementEnd"]()),2&t){var n=e.$implicit,i=a["\u0275\u0275nextContext"]();a["\u0275\u0275property"]("value",n),a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](2,2,i.deviceTransportTypeTranslations.get(n))," ")}}function W(t,e){if(1&t&&(a["\u0275\u0275elementStart"](0,"mat-hint"),a["\u0275\u0275text"](1),a["\u0275\u0275pipe"](2,"translate"),a["\u0275\u0275elementEnd"]()),2&t){var n=a["\u0275\u0275nextContext"]();a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](2,1,n.deviceTransportTypeHints.get(n.transportConfigFormGroup.get("transportType").value))," ")}}function z(t,e){1&t&&(a["\u0275\u0275elementStart"](0,"mat-error"),a["\u0275\u0275text"](1),a["\u0275\u0275pipe"](2,"translate"),a["\u0275\u0275elementEnd"]()),2&t&&(a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](2,1,"device-profile.transport-type-required")," "))}var K=function(t){return{count:t}};function H(t,e){if(1&t&&(a["\u0275\u0275text"](0),a["\u0275\u0275pipe"](1,"translate")),2&t){var n=a["\u0275\u0275nextContext"]();a["\u0275\u0275textInterpolate"](a["\u0275\u0275pipeBind2"](1,1,"device-profile.alarm-rules-with-count",a["\u0275\u0275pureFunction1"](4,K,n.alarmRulesFormGroup.get("alarms").value?n.alarmRulesFormGroup.get("alarms").value.length:0)))}}function $(t,e){1&t&&(a["\u0275\u0275text"](0),a["\u0275\u0275pipe"](1,"translate")),2&t&&a["\u0275\u0275textInterpolate"](a["\u0275\u0275pipeBind1"](1,1,"device-profile.device-provisioning"))}function Q(t,e){if(1&t){var n=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementStart"](0,"button",37),a["\u0275\u0275listener"]("click",(function(){return a["\u0275\u0275restoreView"](n),a["\u0275\u0275nextContext"]().previousStep()})),a["\u0275\u0275pipe"](1,"async"),a["\u0275\u0275text"](2),a["\u0275\u0275pipe"](3,"translate"),a["\u0275\u0275elementEnd"]()}if(2&t){var i=a["\u0275\u0275nextContext"]();a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](1,2,i.isLoading$)),a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate"](a["\u0275\u0275pipeBind1"](3,4,"action.back"))}}var X=function(t){return{label:t}};function Y(t,e){if(1&t){var n=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementStart"](0,"button",38),a["\u0275\u0275listener"]("click",(function(){return a["\u0275\u0275restoreView"](n),a["\u0275\u0275nextContext"]().nextStep()})),a["\u0275\u0275pipe"](1,"async"),a["\u0275\u0275text"](2),a["\u0275\u0275pipe"](3,"translate"),a["\u0275\u0275pipe"](4,"translate"),a["\u0275\u0275elementEnd"]()}if(2&t){var i=a["\u0275\u0275nextContext"]();a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](1,2,i.isLoading$)),a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate"](a["\u0275\u0275pipeBind2"](3,4,"action.next-with-label",a["\u0275\u0275pureFunction1"](9,X,a["\u0275\u0275pipeBind1"](4,7,i.getFormLabel(i.selectedIndex+1)))))}}var J=function(t){function e(e,n,i,a,r,s,c,p,u){var f=t.call(this,e,n,a)||this;return f.store=e,f.router=n,f.data=i,f.dialogRef=a,f.componentFactoryResolver=r,f.injector=s,f.errorStateMatcher=c,f.deviceProfileService=p,f.fb=u,f.selectedIndex=0,f.showNext=!0,f.entityType=d.b,f.deviceProfileTypes=Object.keys(l.h),f.deviceProfileTypeTranslations=l.x,f.deviceTransportTypeHints=l.A,f.deviceTransportTypes=Object.keys(l.j),f.deviceTransportTypeTranslations=l.B,f.serviceType=m.a.TB_RULE_ENGINE,f.deviceProfileDetailsFormGroup=f.fb.group({name:[i.deviceProfileName,[o.Validators.required]],type:[l.h.DEFAULT,[o.Validators.required]],defaultRuleChainId:[null,[]],defaultQueueName:["",[]],description:["",[]]}),f.transportConfigFormGroup=f.fb.group({transportType:[i.transportType?i.transportType:l.j.DEFAULT,[o.Validators.required]],transportConfiguration:[Object(l.p)(l.j.DEFAULT),[o.Validators.required]]}),f.transportConfigFormGroup.get("transportType").valueChanges.subscribe((function(){f.deviceProfileTransportTypeChanged()})),f.alarmRulesFormGroup=f.fb.group({alarms:[null]}),f.provisionConfigFormGroup=f.fb.group({provisionConfiguration:[{type:l.i.DISABLED},[o.Validators.required]]}),f}return Object(i.d)(e,t),e.prototype.deviceProfileTransportTypeChanged=function(){var t=this.transportConfigFormGroup.get("transportType").value;this.transportConfigFormGroup.patchValue({transportConfiguration:Object(l.p)(t)})},e.prototype.ngAfterViewInit=function(){},e.prototype.cancel=function(){this.dialogRef.close(null)},e.prototype.previousStep=function(){this.addDeviceProfileStepper.previous()},e.prototype.nextStep=function(){this.selectedIndex<3?this.addDeviceProfileStepper.next():this.add()},e.prototype.selectedForm=function(){switch(this.selectedIndex){case 0:return this.deviceProfileDetailsFormGroup;case 1:return this.transportConfigFormGroup;case 2:return this.alarmRulesFormGroup;case 3:return this.provisionConfigFormGroup}},e.prototype.add=function(){var t=this;if(this.allValid()){var e=this.provisionConfigFormGroup.get("provisionConfiguration").value,n=e.provisionDeviceKey;delete e.provisionDeviceKey;var i={name:this.deviceProfileDetailsFormGroup.get("name").value,type:this.deviceProfileDetailsFormGroup.get("type").value,transportType:this.transportConfigFormGroup.get("transportType").value,provisionType:e.type,provisionDeviceKey:n,description:this.deviceProfileDetailsFormGroup.get("description").value,profileData:{configuration:Object(l.o)(l.h.DEFAULT),transportConfiguration:this.transportConfigFormGroup.get("transportConfiguration").value,alarms:this.alarmRulesFormGroup.get("alarms").value,provisionConfiguration:e}};this.deviceProfileDetailsFormGroup.get("defaultRuleChainId").value&&(i.defaultRuleChainId=new p.a(this.deviceProfileDetailsFormGroup.get("defaultRuleChainId").value)),this.deviceProfileService.saveDeviceProfile(Object(u.f)(i)).subscribe((function(e){t.dialogRef.close(e)}))}},e.prototype.getFormLabel=function(t){switch(t){case 0:return"device-profile.device-profile-details";case 1:return"device-profile.transport-configuration";case 2:return"device-profile.alarm-rules";case 3:return"device-profile.device-provisioning"}},e.prototype.changeStep=function(t){this.selectedIndex=t.selectedIndex,this.selectedIndex===this.maxStepperIndex?this.showNext=!1:this.showNext=!0},Object.defineProperty(e.prototype,"maxStepperIndex",{get:function(){var t,e;return(null===(e=null===(t=this.addDeviceProfileStepper)||void 0===t?void 0:t._steps)||void 0===e?void 0:e.length)-1},enumerable:!1,configurable:!0}),e.prototype.allValid=function(){var t=this;return!this.addDeviceProfileStepper.steps.find((function(e,n){return!!e.stepControl.invalid&&(e.interacted=!0,t.addDeviceProfileStepper.selectedIndex=n,!0)}))},e.\u0275fac=function(t){return new(t||e)(a["\u0275\u0275directiveInject"](f.Store),a["\u0275\u0275directiveInject"](h.Router),a["\u0275\u0275directiveInject"](r.MAT_DIALOG_DATA),a["\u0275\u0275directiveInject"](r.MatDialogRef),a["\u0275\u0275directiveInject"](a.ComponentFactoryResolver),a["\u0275\u0275directiveInject"](a.Injector),a["\u0275\u0275directiveInject"](g.ErrorStateMatcher,4),a["\u0275\u0275directiveInject"](c.a),a["\u0275\u0275directiveInject"](o.FormBuilder))},e.\u0275cmp=a["\u0275\u0275defineComponent"]({type:e,selectors:[["tb-add-device-profile-dialog"]],viewQuery:function(t,e){var n;(1&t&&a["\u0275\u0275staticViewQuery"](_,!0),2&t)&&(a["\u0275\u0275queryRefresh"](n=a["\u0275\u0275loadQuery"]())&&(e.addDeviceProfileStepper=n.first))},features:[a["\u0275\u0275ProvidersFeature"]([]),a["\u0275\u0275InheritDefinitionFeature"]],decls:70,vars:43,consts:[["color","primary"],["translate",""],["fxFlex",""],["mat-icon-button","","type","button",3,"click"],[1,"material-icons"],["color","warn","mode","indeterminate",4,"ngIf"],["style","height: 4px;",4,"ngIf"],["mat-dialog-content",""],[3,"linear","selectionChange"],["addDeviceProfileStepper",""],[3,"stepControl"],[2,"padding-bottom","16px",3,"formGroup"],["matStepLabel",""],[3,"disabled"],[1,"mat-block"],["matInput","","formControlName","name","required",""],[4,"ngIf"],["labelText","device-profile.default-rule-chain","formControlName","defaultRuleChainId"],["formControlName","defaultQueueName",3,"queueType"],["fxHide","",1,"mat-block"],["formControlName","type","required",""],[3,"value",4,"ngFor","ngForOf"],["matInput","","formControlName","description","rows","2"],[3,"stepControl","optional"],["formControlName","transportType","required",""],["formControlName","transportConfiguration","required",""],["formControlName","alarms",3,"deviceProfileId"],["formControlName","provisionConfiguration"],["mat-dialog-actions","","fxLayout","row"],["mat-stroked-button","",3,"disabled","click",4,"ngIf"],["mat-stroked-button","","color","primary",3,"disabled","click",4,"ngIf"],["mat-dialog-actions","","fxLayout","row","fxLayoutGap","8px","fxLayoutAlign","end"],["mat-button","",3,"disabled","click"],["mat-raised-button","","color","primary",3,"disabled","click"],["color","warn","mode","indeterminate"],[2,"height","4px"],[3,"value"],["mat-stroked-button","",3,"disabled","click"],["mat-stroked-button","","color","primary",3,"disabled","click"]],template:function(t,e){1&t&&(a["\u0275\u0275elementStart"](0,"div"),a["\u0275\u0275elementStart"](1,"mat-toolbar",0),a["\u0275\u0275elementStart"](2,"h2",1),a["\u0275\u0275text"](3,"device-profile.add"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](4,"span",2),a["\u0275\u0275elementStart"](5,"button",3),a["\u0275\u0275listener"]("click",(function(){return e.cancel()})),a["\u0275\u0275elementStart"](6,"mat-icon",4),a["\u0275\u0275text"](7,"close"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275template"](8,L,1,0,"mat-progress-bar",5),a["\u0275\u0275pipe"](9,"async"),a["\u0275\u0275template"](10,V,1,0,"div",6),a["\u0275\u0275pipe"](11,"async"),a["\u0275\u0275elementStart"](12,"div",7),a["\u0275\u0275elementStart"](13,"mat-horizontal-stepper",8,9),a["\u0275\u0275listener"]("selectionChange",(function(t){return e.changeStep(t)})),a["\u0275\u0275elementStart"](15,"mat-step",10),a["\u0275\u0275elementStart"](16,"form",11),a["\u0275\u0275template"](17,R,2,3,"ng-template",12),a["\u0275\u0275elementStart"](18,"fieldset",13),a["\u0275\u0275pipe"](19,"async"),a["\u0275\u0275elementStart"](20,"mat-form-field",14),a["\u0275\u0275elementStart"](21,"mat-label",1),a["\u0275\u0275text"](22,"device-profile.name"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](23,"input",15),a["\u0275\u0275template"](24,N,3,3,"mat-error",16),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](25,"tb-rule-chain-autocomplete",17),a["\u0275\u0275element"](26,"tb-queue-type-list",18),a["\u0275\u0275elementStart"](27,"mat-form-field",19),a["\u0275\u0275elementStart"](28,"mat-label",1),a["\u0275\u0275text"](29,"device-profile.type"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](30,"mat-select",20),a["\u0275\u0275template"](31,G,3,4,"mat-option",21),a["\u0275\u0275elementEnd"](),a["\u0275\u0275template"](32,B,3,3,"mat-error",16),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](33,"mat-form-field",14),a["\u0275\u0275elementStart"](34,"mat-label",1),a["\u0275\u0275text"](35,"device-profile.description"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](36,"textarea",22),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](37,"mat-step",23),a["\u0275\u0275elementStart"](38,"form",11),a["\u0275\u0275template"](39,U,2,3,"ng-template",12),a["\u0275\u0275elementStart"](40,"mat-form-field",14),a["\u0275\u0275elementStart"](41,"mat-label",1),a["\u0275\u0275text"](42,"device-profile.transport-type"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](43,"mat-select",24),a["\u0275\u0275template"](44,q,3,4,"mat-option",21),a["\u0275\u0275elementEnd"](),a["\u0275\u0275template"](45,W,3,3,"mat-hint",16),a["\u0275\u0275template"](46,z,3,3,"mat-error",16),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](47,"tb-device-profile-transport-configuration",25),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](48,"mat-step",23),a["\u0275\u0275elementStart"](49,"form",11),a["\u0275\u0275template"](50,H,2,6,"ng-template",12),a["\u0275\u0275element"](51,"tb-device-profile-alarms",26),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](52,"mat-step",23),a["\u0275\u0275elementStart"](53,"form",11),a["\u0275\u0275template"](54,$,2,3,"ng-template",12),a["\u0275\u0275element"](55,"tb-device-profile-provision-configuration",27),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](56,"div",28),a["\u0275\u0275template"](57,Q,4,6,"button",29),a["\u0275\u0275element"](58,"span",2),a["\u0275\u0275template"](59,Y,5,11,"button",30),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](60,"mat-divider"),a["\u0275\u0275elementStart"](61,"div",31),a["\u0275\u0275elementStart"](62,"button",32),a["\u0275\u0275listener"]("click",(function(){return e.cancel()})),a["\u0275\u0275pipe"](63,"async"),a["\u0275\u0275text"](64),a["\u0275\u0275pipe"](65,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](66,"button",33),a["\u0275\u0275listener"]("click",(function(){return e.add()})),a["\u0275\u0275pipe"](67,"async"),a["\u0275\u0275text"](68),a["\u0275\u0275pipe"](69,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()),2&t&&(a["\u0275\u0275advance"](8),a["\u0275\u0275property"]("ngIf",a["\u0275\u0275pipeBind1"](9,29,e.isLoading$)),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("ngIf",!a["\u0275\u0275pipeBind1"](11,31,e.isLoading$)),a["\u0275\u0275advance"](3),a["\u0275\u0275property"]("linear",!0),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("stepControl",e.deviceProfileDetailsFormGroup),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("formGroup",e.deviceProfileDetailsFormGroup),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](19,33,e.isLoading$)),a["\u0275\u0275advance"](6),a["\u0275\u0275property"]("ngIf",e.deviceProfileDetailsFormGroup.get("name").hasError("required")),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("queueType",e.serviceType),a["\u0275\u0275advance"](5),a["\u0275\u0275property"]("ngForOf",e.deviceProfileTypes),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",e.deviceProfileDetailsFormGroup.get("type").hasError("required")),a["\u0275\u0275advance"](5),a["\u0275\u0275property"]("stepControl",e.transportConfigFormGroup)("optional",!0),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("formGroup",e.transportConfigFormGroup),a["\u0275\u0275advance"](6),a["\u0275\u0275property"]("ngForOf",e.deviceTransportTypes),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",e.transportConfigFormGroup.get("transportType").value),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",e.transportConfigFormGroup.get("transportType").hasError("required")),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("stepControl",e.alarmRulesFormGroup)("optional",!0),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("formGroup",e.alarmRulesFormGroup),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("deviceProfileId",null),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("stepControl",e.provisionConfigFormGroup)("optional",!0),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("formGroup",e.provisionConfigFormGroup),a["\u0275\u0275advance"](4),a["\u0275\u0275property"]("ngIf",e.selectedIndex>0),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("ngIf",e.showNext),a["\u0275\u0275advance"](3),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](63,35,e.isLoading$)),a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate"](a["\u0275\u0275pipeBind1"](65,37,"action.cancel")),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](67,39,e.isLoading$)),a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate"](a["\u0275\u0275pipeBind1"](69,41,"action.add")))},directives:[y.MatToolbar,b.TranslateDirective,v.b,x.MatButton,C.MatIcon,S.NgIf,r.MatDialogContent,w.MatHorizontalStepper,w.MatStep,o["\u0275angular_packages_forms_forms_y"],o.NgControlStatusGroup,o.FormGroupDirective,w.MatStepLabel,E.MatFormField,E.MatLabel,I.MatInput,o.DefaultValueAccessor,o.NgControlStatus,o.FormControlName,o.RequiredValidator,O.a,T.a,M.d,F.MatSelect,S.NgForOf,P.a,D.a,k.a,r.MatDialogActions,v.f,j.MatDivider,v.g,v.e,A.MatProgressBar,E.MatError,g.MatOption,E.MatHint],pipes:[S.AsyncPipe,b.TranslatePipe],styles:["@media screen and (max-width:599px){.tb-fullscreen-dialog[_nghost-%COMP%]   .mat-dialog-container[_ngcontent-%COMP%]   .mat-dialog-content[_ngcontent-%COMP%], .tb-fullscreen-dialog   .mat-dialog-container   [_nghost-%COMP%]   .mat-dialog-content[_ngcontent-%COMP%]{max-height:75vh}}[_nghost-%COMP%]     .mat-dialog-content{display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;height:100%;padding:0!important}[_nghost-%COMP%]     .mat-dialog-content .mat-stepper-horizontal{display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;height:100%;overflow:hidden}@media screen and (max-width:599px){[_nghost-%COMP%]     .mat-dialog-content .mat-stepper-horizontal .mat-step-label{white-space:normal;overflow:visible}[_nghost-%COMP%]     .mat-dialog-content .mat-stepper-horizontal .mat-step-label .mat-step-text-label{overflow:visible}}[_nghost-%COMP%]     .mat-dialog-content .mat-stepper-horizontal .mat-horizontal-content-container{height:530px;max-height:100%;width:100%;overflow-y:auto}@media screen and (min-width:960px){[_nghost-%COMP%]     .mat-dialog-content .mat-stepper-horizontal .mat-horizontal-content-container{min-width:800px}}[_nghost-%COMP%]     .mat-dialog-content .mat-stepper-horizontal .mat-horizontal-stepper-content[aria-expanded=true], [_nghost-%COMP%]     .mat-dialog-content .mat-stepper-horizontal .mat-horizontal-stepper-content[aria-expanded=true] form{height:100%}"]}),e}(s.a);!function(){a["\u0275setClassMetadata"](J,[{type:a.Component,args:[{selector:"tb-add-device-profile-dialog",templateUrl:"./add-device-profile-dialog.component.html",providers:[],styleUrls:["./add-device-profile-dialog.component.scss"]}]}],(function(){return[{type:f.Store},{type:h.Router},{type:void 0,decorators:[{type:a.Inject,args:[r.MAT_DIALOG_DATA]}]},{type:r.MatDialogRef},{type:a.ComponentFactoryResolver},{type:a.Injector},{type:g.ErrorStateMatcher,decorators:[{type:a.SkipSelf}]},{type:c.a},{type:o.FormBuilder}]}),{addDeviceProfileStepper:[{type:a.ViewChild,args:["addDeviceProfileStepper",{static:!0}]}]})}()},fDYr:function(t,e,n){"use strict";n.d(e,"a",(function(){return w}));var i=n("mrSG"),a=n("fXoL"),r=n("FKr1"),o=n("0IaG"),s=n("gmuX"),l=n("0lYY"),c=n("//Q6"),d=n("l7P3"),p=n("tyNb"),u=n("3Pt+"),m=n("/t3+"),f=n("sYmb"),h=n("XiUz"),g=n("kRCp"),y=n("bTqV"),b=n("NFeN"),v=n("ofXK"),x=n("fYjj"),C=n("bv9b");function S(t,e){1&t&&a["\u0275\u0275element"](0,"mat-progress-bar",14)}var w=function(t){function e(e,n,i,a,r,o){var s=t.call(this,e,n,r)||this;s.store=e,s.router=n,s.data=i,s.errorStateMatcher=a,s.dialogRef=r,s.fb=o,s.submitted=!1,s.dashboard=s.data.dashboard,s.aliasController=s.data.aliasController,s.widget=s.data.widget;var l,d,p=s.data.widgetInfo,u=p.typeSettingsSchema||p.settingsSchema,m=p.typeDataKeySettingsSchema||p.dataKeySettingsSchema,f=p.typeParameters,h=p.actionSources,g=!Object(c.n)(p.typeParameters)||!p.typeParameters.useCustomDatasources;l=u&&""!==u?Object(c.y)(u)?JSON.parse(u):u:{},d=m&&""!==m?Object(c.y)(m)?JSON.parse(m):m:{};var y={config:s.widget.config,layout:{},widgetType:s.widget.type,typeParameters:f,actionSources:h,isDataEnabled:g,settingsSchema:l,dataKeySettingsSchema:d};return s.widgetFormGroup=s.fb.group({widgetConfig:[y,[]]}),s}return Object(i.d)(e,t),e.prototype.ngOnInit=function(){},e.prototype.isErrorState=function(t,e){var n=this.errorStateMatcher.isErrorState(t,e),i=!!(t&&t.invalid&&this.submitted);return n||i},e.prototype.helpLinkIdForWidgetType=function(){var t="widgetsConfig";return this.widget&&this.widget.type&&(t=l.l.get(this.widget.type).configHelpLinkId),t},e.prototype.cancel=function(){this.dialogRef.close(null)},e.prototype.add=function(){this.submitted=!0;var t=this.widgetFormGroup.get("widgetConfig").value;this.widget.config=t.config,this.widget.config.mobileOrder=t.layout.mobileOrder,this.widget.config.mobileHeight=t.layout.mobileHeight,this.dialogRef.close(this.widget)},e.\u0275fac=function(t){return new(t||e)(a["\u0275\u0275directiveInject"](d.Store),a["\u0275\u0275directiveInject"](p.Router),a["\u0275\u0275directiveInject"](o.MAT_DIALOG_DATA),a["\u0275\u0275directiveInject"](r.ErrorStateMatcher,4),a["\u0275\u0275directiveInject"](o.MatDialogRef),a["\u0275\u0275directiveInject"](u.FormBuilder))},e.\u0275cmp=a["\u0275\u0275defineComponent"]({type:e,selectors:[["tb-add-widget-dialog"]],features:[a["\u0275\u0275ProvidersFeature"]([{provide:r.ErrorStateMatcher,useExisting:e}]),a["\u0275\u0275InheritDefinitionFeature"]],decls:25,vars:26,consts:[[2,"width","900px",3,"formGroup","ngSubmit"],["color","primary"],["translate",""],["fxFlex",""],[3,"tb-help"],["mat-icon-button","","type","button",3,"click"],[1,"material-icons"],["color","warn","mode","indeterminate",4,"ngIf"],["mat-dialog-content",""],[2,"position","relative","height","600px",3,"disabled"],["formControlName","widgetConfig",3,"aliasController","functionsOnly","entityAliases","filters","dashboardStates"],["mat-dialog-actions","","fxLayoutAlign","end center"],["mat-button","","color","primary","type","button","cdkFocusInitial","",3,"disabled","click"],["mat-raised-button","","color","primary","type","submit",3,"disabled"],["color","warn","mode","indeterminate"]],template:function(t,e){1&t&&(a["\u0275\u0275elementStart"](0,"form",0),a["\u0275\u0275listener"]("ngSubmit",(function(){return e.add()})),a["\u0275\u0275elementStart"](1,"mat-toolbar",1),a["\u0275\u0275elementStart"](2,"h2",2),a["\u0275\u0275text"](3,"widget.add"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](4,"span",3),a["\u0275\u0275text"](5),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](6,"div",4),a["\u0275\u0275elementStart"](7,"button",5),a["\u0275\u0275listener"]("click",(function(){return e.cancel()})),a["\u0275\u0275elementStart"](8,"mat-icon",6),a["\u0275\u0275text"](9,"close"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275template"](10,S,1,0,"mat-progress-bar",7),a["\u0275\u0275pipe"](11,"async"),a["\u0275\u0275elementStart"](12,"div",8),a["\u0275\u0275elementStart"](13,"fieldset",9),a["\u0275\u0275pipe"](14,"async"),a["\u0275\u0275element"](15,"tb-widget-config",10),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](16,"div",11),a["\u0275\u0275elementStart"](17,"button",12),a["\u0275\u0275listener"]("click",(function(){return e.cancel()})),a["\u0275\u0275pipe"](18,"async"),a["\u0275\u0275text"](19),a["\u0275\u0275pipe"](20,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](21,"button",13),a["\u0275\u0275pipe"](22,"async"),a["\u0275\u0275text"](23),a["\u0275\u0275pipe"](24,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()),2&t&&(a["\u0275\u0275property"]("formGroup",e.widgetFormGroup),a["\u0275\u0275advance"](5),a["\u0275\u0275textInterpolate1"](": ",e.data.widgetInfo.widgetName,""),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("tb-help",e.helpLinkIdForWidgetType()),a["\u0275\u0275advance"](4),a["\u0275\u0275property"]("ngIf",a["\u0275\u0275pipeBind1"](11,14,e.isLoading$)),a["\u0275\u0275advance"](3),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](14,16,e.isLoading$)),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("aliasController",e.aliasController)("functionsOnly",!1)("entityAliases",e.dashboard.configuration.entityAliases)("filters",e.dashboard.configuration.filters)("dashboardStates",e.dashboard.configuration.states),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](18,18,e.isLoading$)),a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](20,20,"action.cancel")," "),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](22,22,e.isLoading$)||e.widgetFormGroup.invalid),a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](24,24,"action.add")," "))},directives:[u["\u0275angular_packages_forms_forms_y"],u.NgControlStatusGroup,u.FormGroupDirective,m.MatToolbar,f.TranslateDirective,h.b,g.a,y.MatButton,b.MatIcon,v.NgIf,o.MatDialogContent,x.a,u.NgControlStatus,u.FormControlName,o.MatDialogActions,h.e,C.MatProgressBar],pipes:[v.AsyncPipe,f.TranslatePipe],encapsulation:2}),e}(s.a);!function(){a["\u0275setClassMetadata"](w,[{type:a.Component,args:[{selector:"tb-add-widget-dialog",templateUrl:"./add-widget-dialog.component.html",providers:[{provide:r.ErrorStateMatcher,useExisting:w}],styleUrls:[]}]}],(function(){return[{type:d.Store},{type:p.Router},{type:void 0,decorators:[{type:a.Inject,args:[o.MAT_DIALOG_DATA]}]},{type:r.ErrorStateMatcher,decorators:[{type:a.SkipSelf}]},{type:o.MatDialogRef},{type:u.FormBuilder}]}),null)}()},fYjj:function(t,e,n){"use strict";n.d(e,"a",(function(){return It}));var i=n("mrSG"),a=n("fXoL"),r=n("RxGS"),o=n("0lYY"),s=n("3Pt+"),l=n("//Q6"),c=n("UZbx"),d=n("OiFK"),p=n("3Tyt"),u=n("U3y+"),m=n("LRne"),f=n("hqxT"),h=n("vkgz"),g=n("5+tZ"),y=n("JIr8"),b=n("21Fy"),v=n("6OOC"),x=n("kHY0"),C=n("FtGj"),S=n("l7P3"),w=n("0IaG"),E=n("sYmb"),I=n("wZkO"),O=n("ofXK"),T=n("znSr"),M=n("XiUz"),F=n("kmnG"),P=n("qFsG"),D=n("H3So"),k=n("bSwM"),j=n("jy/V"),A=n("nii4"),_=n("9kgB"),L=n("3bvz"),V=n("k81w"),R=n("d3UM"),N=n("A5z7"),G=n("FKr1"),B=n("NFeN"),U=n("7EHt"),q=n("bTqV"),W=n("Qu3c"),z=n("MutI"),K=n("+C6U"),H=n("O5Hl"),$=n("JA3I"),Q=n("pf+U"),X=n("RQSP"),Y=function(t){return{"tb-disabled-label":t}};function J(t,e){if(1&t&&(a["\u0275\u0275elementStart"](0,"div",45),a["\u0275\u0275elementStart"](1,"div",46),a["\u0275\u0275elementStart"](2,"mat-checkbox",47),a["\u0275\u0275text"](3),a["\u0275\u0275pipe"](4,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](5,"mat-checkbox",48),a["\u0275\u0275text"](6),a["\u0275\u0275pipe"](7,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](8,"section",49),a["\u0275\u0275elementStart"](9,"span",50),a["\u0275\u0275text"](10,"widget-config.timewindow"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](11,"tb-timewindow",51),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()),2&t){var n=a["\u0275\u0275nextContext"]();a["\u0275\u0275advance"](3),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](4,4,"widget-config.use-dashboard-timewindow")," "),a["\u0275\u0275advance"](3),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](7,6,"widget-config.display-timewindow")," "),a["\u0275\u0275advance"](3),a["\u0275\u0275property"]("ngClass",a["\u0275\u0275pureFunction1"](8,Y,n.dataSettings.get("useDashboardTimewindow").value)),a["\u0275\u0275advance"](2),a["\u0275\u0275propertyInterpolate"]("aggregation",n.widgetType===n.widgetTypes.timeseries)}}function Z(t,e){if(1&t&&(a["\u0275\u0275elementStart"](0,"mat-option",63),a["\u0275\u0275text"](1),a["\u0275\u0275pipe"](2,"translate"),a["\u0275\u0275elementEnd"]()),2&t){var n=e.$implicit,i=a["\u0275\u0275nextContext"](2);a["\u0275\u0275property"]("value",n),a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](2,2,i.alarmSearchStatusTranslationMap.get(n))," ")}}function tt(t,e){if(1&t&&(a["\u0275\u0275elementStart"](0,"mat-option",63),a["\u0275\u0275text"](1),a["\u0275\u0275pipe"](2,"translate"),a["\u0275\u0275elementEnd"]()),2&t){var n=e.$implicit,i=a["\u0275\u0275nextContext"](2);a["\u0275\u0275property"]("value",n),a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](2,2,i.alarmSeverityTranslationMap.get(i.alarmSeverityEnum[n]))," ")}}function et(t,e){if(1&t){var n=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementStart"](0,"mat-chip",64),a["\u0275\u0275listener"]("removed",(function(){a["\u0275\u0275restoreView"](n);var t=e.$implicit;return a["\u0275\u0275nextContext"](2).removeAlarmType(t)})),a["\u0275\u0275text"](1),a["\u0275\u0275elementStart"](2,"mat-icon",65),a["\u0275\u0275text"](3,"cancel"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()}if(2&t){var i=e.$implicit;a["\u0275\u0275property"]("selectable",!0)("removable",!0),a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"](" ",i," ")}}function nt(t,e){if(1&t){var n=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementStart"](0,"div",52),a["\u0275\u0275elementStart"](1,"div",53),a["\u0275\u0275elementStart"](2,"mat-form-field",54),a["\u0275\u0275elementStart"](3,"mat-label",9),a["\u0275\u0275text"](4,"alarm.alarm-status-list"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](5,"mat-select",55),a["\u0275\u0275pipe"](6,"translate"),a["\u0275\u0275template"](7,Z,3,4,"mat-option",56),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](8,"mat-form-field",54),a["\u0275\u0275elementStart"](9,"mat-label",9),a["\u0275\u0275text"](10,"alarm.alarm-severity-list"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](11,"mat-select",57),a["\u0275\u0275pipe"](12,"translate"),a["\u0275\u0275template"](13,tt,3,4,"mat-option",56),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](14,"div",53),a["\u0275\u0275elementStart"](15,"mat-form-field",54),a["\u0275\u0275elementStart"](16,"mat-label",9),a["\u0275\u0275text"](17,"alarm.alarm-type-list"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](18,"mat-chip-list",58,59),a["\u0275\u0275template"](20,et,4,3,"mat-chip",60),a["\u0275\u0275elementStart"](21,"input",61),a["\u0275\u0275listener"]("matChipInputTokenEnd",(function(t){return a["\u0275\u0275restoreView"](n),a["\u0275\u0275nextContext"]().addAlarmType(t)})),a["\u0275\u0275pipe"](22,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](23,"mat-checkbox",62),a["\u0275\u0275text"](24),a["\u0275\u0275pipe"](25,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()}if(2&t){var i=a["\u0275\u0275reference"](19),r=a["\u0275\u0275nextContext"]();a["\u0275\u0275advance"](5),a["\u0275\u0275propertyInterpolate"]("placeholder",null!=r.dataSettings.get("alarmStatusList").value&&r.dataSettings.get("alarmStatusList").value.length?"":a["\u0275\u0275pipeBind1"](6,10,"alarm.any-status")),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("ngForOf",r.alarmSearchStatuses),a["\u0275\u0275advance"](4),a["\u0275\u0275propertyInterpolate"]("placeholder",null!=r.dataSettings.get("alarmSeverityList").value&&r.dataSettings.get("alarmSeverityList").value.length?"":a["\u0275\u0275pipeBind1"](12,12,"alarm.any-severity")),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("ngForOf",r.alarmSeverities),a["\u0275\u0275advance"](7),a["\u0275\u0275property"]("ngForOf",r.alarmTypeList()),a["\u0275\u0275advance"](1),a["\u0275\u0275propertyInterpolate"]("placeholder",null!=r.dataSettings.get("alarmTypeList").value&&r.dataSettings.get("alarmTypeList").value.length?"":a["\u0275\u0275pipeBind1"](22,14,"alarm.any-type")),a["\u0275\u0275property"]("matChipInputFor",i)("matChipInputSeparatorKeyCodes",r.separatorKeysCodes)("matChipInputAddOnBlur",!0),a["\u0275\u0275advance"](3),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](25,16,"alarm.search-propagated-alarms")," ")}}var it=function(t){return{count:t}};function at(t,e){if(1&t&&(a["\u0275\u0275elementStart"](0,"div",74),a["\u0275\u0275text"](1),a["\u0275\u0275pipe"](2,"translate"),a["\u0275\u0275elementEnd"]()),2&t){var n=a["\u0275\u0275nextContext"](2);a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate"](a["\u0275\u0275pipeBind2"](2,1,"widget-config.maximum-datasources",a["\u0275\u0275pureFunction1"](4,it,null==n.modelValue?null:n.modelValue.typeParameters.maxDatasources)))}}function rt(t,e){1&t&&(a["\u0275\u0275elementStart"](0,"div"),a["\u0275\u0275elementStart"](1,"span",75),a["\u0275\u0275text"](2,"datasource.add-datasource-prompt"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]())}function ot(t,e){1&t&&(a["\u0275\u0275elementStart"](0,"button",95),a["\u0275\u0275pipe"](1,"translate"),a["\u0275\u0275elementStart"](2,"mat-icon"),a["\u0275\u0275text"](3,"drag_handle"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()),2&t&&a["\u0275\u0275propertyInterpolate"]("matTooltip",a["\u0275\u0275pipeBind1"](1,1,"action.drag"))}function st(t,e){if(1&t&&(a["\u0275\u0275elementStart"](0,"mat-option",63),a["\u0275\u0275text"](1),a["\u0275\u0275pipe"](2,"translate"),a["\u0275\u0275elementEnd"]()),2&t){var n=e.$implicit,i=a["\u0275\u0275nextContext"](4);a["\u0275\u0275property"]("value",n),a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](2,2,i.datasourceTypesTranslations.get(n))," ")}}function lt(t,e){if(1&t&&(a["\u0275\u0275elementStart"](0,"mat-form-field",96),a["\u0275\u0275element"](1,"mat-label"),a["\u0275\u0275element"](2,"input",97),a["\u0275\u0275pipe"](3,"translate"),a["\u0275\u0275elementEnd"]()),2&t){var n=a["\u0275\u0275nextContext"]().$implicit;a["\u0275\u0275advance"](2),a["\u0275\u0275propertyInterpolate"]("placeholder",a["\u0275\u0275pipeBind1"](3,2,"datasource.label")),a["\u0275\u0275property"]("formControl",n.get("name"))}}function ct(t,e){if(1&t&&(a["\u0275\u0275elementStart"](0,"mat-form-field",101),a["\u0275\u0275element"](1,"mat-label"),a["\u0275\u0275element"](2,"input",97),a["\u0275\u0275pipe"](3,"translate"),a["\u0275\u0275elementEnd"]()),2&t){var n=a["\u0275\u0275nextContext"](2).$implicit;a["\u0275\u0275advance"](2),a["\u0275\u0275propertyInterpolate"]("placeholder",a["\u0275\u0275pipeBind1"](3,2,"datasource.label")),a["\u0275\u0275property"]("formControl",n.get("name"))}}function dt(t,e){if(1&t&&(a["\u0275\u0275element"](0,"tb-entity-alias-select",98),a["\u0275\u0275element"](1,"tb-filter-select",99),a["\u0275\u0275template"](2,ct,4,4,"mat-form-field",100)),2&t){var n=a["\u0275\u0275nextContext"]().$implicit,i=a["\u0275\u0275nextContext"](3);a["\u0275\u0275property"]("showLabel",!0)("tbRequired",!0)("aliasController",i.aliasController)("formControl",n.get("entityAliasId"))("callbacks",i.widgetConfigCallbacks),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("showLabel",!0)("aliasController",i.aliasController)("formControl",n.get("filterId"))("callbacks",i.widgetConfigCallbacks),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",n.get("type").value===i.datasourceType.entityCount)}}function pt(t,e){if(1&t){var n=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementStart"](0,"mat-list-item",85),a["\u0275\u0275listener"]("dndMoved",(function(){a["\u0275\u0275restoreView"](n);var t=e.index;return a["\u0275\u0275nextContext"](3).dndDatasourceMoved(t)})),a["\u0275\u0275elementStart"](1,"div",72),a["\u0275\u0275elementStart"](2,"div",76),a["\u0275\u0275template"](3,ot,4,3,"button",86),a["\u0275\u0275elementStart"](4,"span"),a["\u0275\u0275text"](5),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](6,"div",87),a["\u0275\u0275elementStart"](7,"section",88),a["\u0275\u0275elementStart"](8,"mat-form-field",89),a["\u0275\u0275elementStart"](9,"mat-select",90),a["\u0275\u0275template"](10,st,3,4,"mat-option",56),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](11,"section",91),a["\u0275\u0275template"](12,lt,4,4,"ng-template",92),a["\u0275\u0275template"](13,dt,3,10,"ng-template",92),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](14,"tb-data-keys",93),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](15,"button",94),a["\u0275\u0275listener"]("click",(function(){a["\u0275\u0275restoreView"](n);var t=e.index;return a["\u0275\u0275nextContext"](3).removeDatasource(t)})),a["\u0275\u0275pipe"](16,"async"),a["\u0275\u0275pipe"](17,"translate"),a["\u0275\u0275elementStart"](18,"mat-icon"),a["\u0275\u0275text"](19,"close"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()}if(2&t){var i=e.$implicit,r=e.index,o=a["\u0275\u0275nextContext"](3);a["\u0275\u0275property"]("dndDraggable",i.value)("dndDisableIf",o.disabled),a["\u0275\u0275advance"](3),a["\u0275\u0275property"]("ngIf",!o.disabled),a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate1"]("",r+1,"."),a["\u0275\u0275advance"](4),a["\u0275\u0275property"]("formControl",i.get("type")),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngForOf",o.datasourceTypes),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngSwitch",i.get("type").value),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngSwitchCase",o.datasourceType.function),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngSwitchCase",i.get("type").value===o.datasourceType.entity||i.get("type").value===o.datasourceType.entityCount?i.get("type").value:""),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("widgetType",o.widgetType)("datasourceType",i.get("type").value)("maxDataKeys",null==o.modelValue||null==o.modelValue.typeParameters?null:o.modelValue.typeParameters.maxDataKeys)("optDataKeys",null==o.modelValue||null==o.modelValue.typeParameters?null:o.modelValue.typeParameters.dataKeysOptional)("aliasController",o.aliasController)("datakeySettingsSchema",null==o.modelValue?null:o.modelValue.dataKeySettingsSchema)("callbacks",o.widgetConfigCallbacks)("entityAliasId",i.get("entityAliasId").value)("formControl",i.get("dataKeys")),a["\u0275\u0275advance"](1),a["\u0275\u0275propertyInterpolate"]("matTooltip",a["\u0275\u0275pipeBind1"](17,22,"widget-config.remove-datasource")),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](16,20,o.isLoading$))}}function ut(t,e){if(1&t){var n=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementStart"](0,"div",72),a["\u0275\u0275element"](1,"span",76),a["\u0275\u0275elementStart"](2,"div",77),a["\u0275\u0275elementStart"](3,"span",78),a["\u0275\u0275text"](4,"widget-config.datasource-type"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](5,"span",79),a["\u0275\u0275text"](6,"widget-config.datasource-parameters"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](7,"span",80),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](8,"div",81),a["\u0275\u0275elementStart"](9,"mat-list",82),a["\u0275\u0275listener"]("dndDrop",(function(t){return a["\u0275\u0275restoreView"](n),a["\u0275\u0275nextContext"](2).onDatasourceDrop(t)})),a["\u0275\u0275element"](10,"mat-list-item",83),a["\u0275\u0275template"](11,pt,20,24,"mat-list-item",84),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()}if(2&t){var i=a["\u0275\u0275nextContext"](2);a["\u0275\u0275advance"](9),a["\u0275\u0275property"]("dndDisableIf",i.disabled),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("ngForOf",i.datasourcesFormArray().controls)}}function mt(t,e){if(1&t){var n=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementStart"](0,"mat-expansion-panel",66),a["\u0275\u0275elementStart"](1,"mat-expansion-panel-header"),a["\u0275\u0275elementStart"](2,"mat-panel-title",67),a["\u0275\u0275elementStart"](3,"div",68),a["\u0275\u0275text"](4,"widget-config.datasources"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275template"](5,at,3,6,"div",69),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275template"](6,rt,3,0,"div",70),a["\u0275\u0275template"](7,ut,12,2,"ng-template",null,71,a["\u0275\u0275templateRefExtractor"]),a["\u0275\u0275elementStart"](9,"div",72),a["\u0275\u0275elementStart"](10,"button",73),a["\u0275\u0275listener"]("click",(function(){return a["\u0275\u0275restoreView"](n),a["\u0275\u0275nextContext"]().addDatasource()})),a["\u0275\u0275pipe"](11,"async"),a["\u0275\u0275pipe"](12,"translate"),a["\u0275\u0275elementStart"](13,"mat-icon"),a["\u0275\u0275text"](14,"add"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](15,"span",9),a["\u0275\u0275text"](16,"action.add"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()}if(2&t){var i=a["\u0275\u0275reference"](8),r=a["\u0275\u0275nextContext"]();a["\u0275\u0275property"]("expanded",!0),a["\u0275\u0275advance"](5),a["\u0275\u0275property"]("ngIf",(null==r.modelValue?null:r.modelValue.typeParameters)&&(null==r.modelValue?null:r.modelValue.typeParameters.maxDatasources)>-1),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",0===r.datasourcesFormArray().length)("ngIfElse",i),a["\u0275\u0275advance"](4),a["\u0275\u0275propertyInterpolate"]("matTooltip",a["\u0275\u0275pipeBind1"](12,9,"widget-config.add-datasource")),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](11,7,r.isLoading$))("fxShow",(null==r.modelValue?null:r.modelValue.typeParameters)&&(-1==(null==r.modelValue?null:r.modelValue.typeParameters.maxDatasources)||r.datasourcesFormArray().controls.length<(null==r.modelValue?null:r.modelValue.typeParameters.maxDatasources)))}}var ft=function(t){return[t]};function ht(t,e){if(1&t&&(a["\u0275\u0275elementStart"](0,"mat-expansion-panel",66),a["\u0275\u0275elementStart"](1,"mat-expansion-panel-header"),a["\u0275\u0275elementStart"](2,"mat-panel-title"),a["\u0275\u0275text"](3),a["\u0275\u0275pipe"](4,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](5,"div",102),a["\u0275\u0275element"](6,"tb-entity-alias-select",103),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()),2&t){var n=a["\u0275\u0275nextContext"]();a["\u0275\u0275property"]("expanded",!0),a["\u0275\u0275advance"](3),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](4,7,"widget-config.target-device")," "),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("formGroup",n.targetDeviceSettings),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("tbRequired",!n.widgetEditMode)("aliasController",n.aliasController)("allowedEntityTypes",a["\u0275\u0275pureFunction1"](9,ft,n.entityTypes.DEVICE))("callbacks",n.widgetConfigCallbacks)}}function gt(t,e){if(1&t&&(a["\u0275\u0275elementStart"](0,"mat-option",63),a["\u0275\u0275text"](1),a["\u0275\u0275pipe"](2,"translate"),a["\u0275\u0275elementEnd"]()),2&t){var n=e.$implicit,i=a["\u0275\u0275nextContext"](2);a["\u0275\u0275property"]("value",n),a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](2,2,i.datasourceTypesTranslations.get(n))," ")}}function yt(t,e){if(1&t&&(a["\u0275\u0275element"](0,"tb-entity-alias-select",107),a["\u0275\u0275element"](1,"tb-filter-select",108)),2&t){var n=a["\u0275\u0275nextContext"](2);a["\u0275\u0275property"]("showLabel",!0)("tbRequired",n.alarmSourceSettings.get("type").value===n.datasourceType.entity)("aliasController",n.aliasController)("callbacks",n.widgetConfigCallbacks),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("showLabel",!0)("aliasController",n.aliasController)("callbacks",n.widgetConfigCallbacks)}}function bt(t,e){if(1&t&&(a["\u0275\u0275elementStart"](0,"mat-expansion-panel",66),a["\u0275\u0275elementStart"](1,"mat-expansion-panel-header"),a["\u0275\u0275elementStart"](2,"mat-panel-title"),a["\u0275\u0275text"](3),a["\u0275\u0275pipe"](4,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](5,"div",102),a["\u0275\u0275elementStart"](6,"section",88),a["\u0275\u0275elementStart"](7,"mat-form-field",89),a["\u0275\u0275elementStart"](8,"mat-select",104),a["\u0275\u0275template"](9,gt,3,4,"mat-option",56),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](10,"section",105),a["\u0275\u0275template"](11,yt,2,7,"ng-template",92),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](12,"tb-data-keys",106),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()),2&t){var n=a["\u0275\u0275nextContext"]();a["\u0275\u0275property"]("expanded",!0),a["\u0275\u0275advance"](3),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](4,12,"widget-config.alarm-source")," "),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("formGroup",n.alarmSourceSettings),a["\u0275\u0275advance"](4),a["\u0275\u0275property"]("ngForOf",n.datasourceTypes),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngSwitch",n.alarmSourceSettings.get("type").value),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngSwitchCase",n.datasourceType.entity),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("widgetType",n.widgetType)("datasourceType",n.alarmSourceSettings.get("type").value)("aliasController",n.aliasController)("datakeySettingsSchema",null==n.modelValue?null:n.modelValue.dataKeySettingsSchema)("callbacks",n.widgetConfigCallbacks)("entityAliasId",n.alarmSourceSettings.get("entityAliasId").value)}}function vt(t,e){if(1&t&&(a["\u0275\u0275elementStart"](0,"mat-tab",6),a["\u0275\u0275pipe"](1,"translate"),a["\u0275\u0275elementStart"](2,"div",109),a["\u0275\u0275element"](3,"tb-json-form",110),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()),2&t){var n=a["\u0275\u0275nextContext"]();a["\u0275\u0275propertyInterpolate"]("label",a["\u0275\u0275pipeBind1"](1,2,"widget-config.advanced")),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("formGroup",n.advancedSettings)}}var xt=function(t){return{"tb-headless":t}},Ct=function(){return{minHeight:"100px"}},St={type:"object",properties:{}},wt=[],Et=["*"],It=function(t){function e(e,n,i,a,r,s){var l=t.call(this,e)||this;return l.store=e,l.utils=n,l.entityService=i,l.dialog=a,l.translate=r,l.fb=s,l.separatorKeysCodes=[C.ENTER,C.COMMA,C.SEMICOLON],l.widgetTypes=o.k,l.entityTypes=u.b,l.alarmSearchStatuses=[c.b.ACTIVE,c.b.CLEARED,c.b.ACK,c.b.UNACK],l.alarmSearchStatusTranslationMap=c.f,l.alarmSeverities=Object.keys(c.c),l.alarmSeverityEnum=c.c,l.alarmSeverityTranslationMap=c.h,l.datasourceType=o.a,l.datasourceTypes=[],l.datasourceTypesTranslations=o.e,l.widgetConfigCallbacks={createEntityAlias:l.createEntityAlias.bind(l),createFilter:l.createFilter.bind(l),generateDataKey:l.generateDataKey.bind(l),fetchEntityKeys:l.fetchEntityKeys.bind(l),fetchDashboardStates:l.fetchDashboardStates.bind(l)},l.widgetEditMode=l.utils.widgetEditMode,l.propagateChange=null,l}return Object(i.d)(e,t),e.prototype.ngOnInit=function(){var t=this;this.dataSettings=this.fb.group({}),this.targetDeviceSettings=this.fb.group({}),this.alarmSourceSettings=this.fb.group({}),this.advancedSettings=this.fb.group({}),this.widgetSettings=this.fb.group({title:[null,[]],showTitleIcon:[null,[]],titleIcon:[null,[]],iconColor:[null,[]],iconSize:[null,[]],titleTooltip:[null,[]],showTitle:[null,[]],dropShadow:[null,[]],enableFullscreen:[null,[]],backgroundColor:[null,[]],color:[null,[]],padding:[null,[]],margin:[null,[]],widgetStyle:[null,[]],titleStyle:[null,[]],units:[null,[]],decimals:[null,[s.Validators.min(0),s.Validators.max(15),s.Validators.pattern(/^\d*$/)]],showLegend:[null,[]],legendConfig:[null,[]]}),this.widgetSettings.get("showTitleIcon").valueChanges.subscribe((function(e){e?t.widgetSettings.get("titleIcon").enable({emitEvent:!1}):t.widgetSettings.get("titleIcon").disable({emitEvent:!1})})),this.widgetSettings.get("showLegend").valueChanges.subscribe((function(e){e?t.widgetSettings.get("legendConfig").enable({emitEvent:!1}):t.widgetSettings.get("legendConfig").disable({emitEvent:!1})})),this.layoutSettings=this.fb.group({mobileOrder:[null,[s.Validators.pattern(/^-?[0-9]+$/)]],mobileHeight:[null,[s.Validators.min(1),s.Validators.max(10),s.Validators.pattern(/^\d*$/)]]}),this.actionsSettings=this.fb.group({actionsData:[null,[]]})},e.prototype.removeChangeSubscriptions=function(){this.dataSettingsChangesSubscription&&(this.dataSettingsChangesSubscription.unsubscribe(),this.dataSettingsChangesSubscription=null),this.targetDeviceSettingsSubscription&&(this.targetDeviceSettingsSubscription.unsubscribe(),this.targetDeviceSettingsSubscription=null),this.alarmSourceSettingsSubscription&&(this.alarmSourceSettingsSubscription.unsubscribe(),this.alarmSourceSettingsSubscription=null),this.widgetSettingsSubscription&&(this.widgetSettingsSubscription.unsubscribe(),this.widgetSettingsSubscription=null),this.layoutSettingsSubscription&&(this.layoutSettingsSubscription.unsubscribe(),this.layoutSettingsSubscription=null),this.advancedSettingsSubscription&&(this.advancedSettingsSubscription.unsubscribe(),this.advancedSettingsSubscription=null),this.actionsSettingsSubscription&&(this.actionsSettingsSubscription.unsubscribe(),this.actionsSettingsSubscription=null)},e.prototype.createChangeSubscriptions=function(){var t=this;this.dataSettingsChangesSubscription=this.dataSettings.valueChanges.subscribe((function(){return t.updateDataSettings()})),this.targetDeviceSettingsSubscription=this.targetDeviceSettings.valueChanges.subscribe((function(){return t.updateTargetDeviceSettings()})),this.alarmSourceSettingsSubscription=this.alarmSourceSettings.valueChanges.subscribe((function(){return t.updateAlarmSourceSettings()})),this.widgetSettingsSubscription=this.widgetSettings.valueChanges.subscribe((function(){return t.updateWidgetSettings()})),this.layoutSettingsSubscription=this.layoutSettings.valueChanges.subscribe((function(){return t.updateLayoutSettings()})),this.advancedSettingsSubscription=this.advancedSettings.valueChanges.subscribe((function(){return t.updateAdvancedSettings()})),this.actionsSettingsSubscription=this.actionsSettings.valueChanges.subscribe((function(){return t.updateActionSettings()}))},e.prototype.buildForms=function(){var t=this;this.functionsOnly?this.datasourceTypes=[o.a.function]:(this.datasourceTypes=[o.a.function,o.a.entity],this.widgetType===o.k.latest&&this.datasourceTypes.push(o.a.entityCount)),this.dataSettings=this.fb.group({}),this.targetDeviceSettings=this.fb.group({}),this.alarmSourceSettings=this.fb.group({}),this.advancedSettings=this.fb.group({}),this.widgetType!==o.k.timeseries&&this.widgetType!==o.k.alarm||(this.dataSettings.addControl("useDashboardTimewindow",this.fb.control(null)),this.dataSettings.addControl("displayTimewindow",this.fb.control(null)),this.dataSettings.addControl("timewindow",this.fb.control(null)),this.dataSettings.get("useDashboardTimewindow").valueChanges.subscribe((function(e){e?(t.dataSettings.get("displayTimewindow").disable({emitEvent:!1}),t.dataSettings.get("timewindow").disable({emitEvent:!1})):(t.dataSettings.get("displayTimewindow").enable({emitEvent:!1}),t.dataSettings.get("timewindow").enable({emitEvent:!1}))})),this.widgetType===o.k.alarm&&(this.dataSettings.addControl("alarmStatusList",this.fb.control(null)),this.dataSettings.addControl("alarmSeverityList",this.fb.control(null)),this.dataSettings.addControl("alarmTypeList",this.fb.control(null)),this.dataSettings.addControl("searchPropagatedAlarms",this.fb.control(null)))),this.modelValue.isDataEnabled&&(this.widgetType!==o.k.rpc&&this.widgetType!==o.k.alarm&&this.widgetType!==o.k.static?this.dataSettings.addControl("datasources",this.fb.array([])):this.widgetType===o.k.rpc?this.targetDeviceSettings.addControl("targetDeviceAliasId",this.fb.control(null,this.widgetEditMode?[]:[s.Validators.required])):this.widgetType===o.k.alarm&&(this.alarmSourceSettings=this.buildDatasourceForm())),this.advancedSettings.addControl("settings",this.fb.control(null,[]))},e.prototype.datasourcesFormArray=function(){return this.dataSettings.get("datasources")},e.prototype.registerOnChange=function(t){this.propagateChange=t},e.prototype.registerOnTouched=function(t){},e.prototype.setDisabledState=function(t){this.disabled=t},e.prototype.writeValue=function(t){var e=this;if(this.modelValue=t,this.removeChangeSubscriptions(),this.modelValue){this.widgetType!==this.modelValue.widgetType&&(this.widgetType=this.modelValue.widgetType,this.buildForms());var n=this.modelValue.config,i=this.modelValue.layout;if(n){this.selectedTab=0,this.widgetSettings.patchValue({title:n.title,showTitleIcon:!!Object(l.n)(n.showTitleIcon)&&n.showTitleIcon,titleIcon:Object(l.n)(n.titleIcon)?n.titleIcon:"",iconColor:Object(l.n)(n.iconColor)?n.iconColor:"rgba(0, 0, 0, 0.87)",iconSize:Object(l.n)(n.iconSize)?n.iconSize:"24px",titleTooltip:Object(l.n)(n.titleTooltip)?n.titleTooltip:"",showTitle:n.showTitle,dropShadow:!Object(l.n)(n.dropShadow)||n.dropShadow,enableFullscreen:!Object(l.n)(n.enableFullscreen)||n.enableFullscreen,backgroundColor:n.backgroundColor,color:n.color,padding:n.padding,margin:n.margin,widgetStyle:Object(l.n)(n.widgetStyle)?n.widgetStyle:{},titleStyle:Object(l.n)(n.titleStyle)?n.titleStyle:{fontSize:"16px",fontWeight:400},units:n.units,decimals:n.decimals,showLegend:Object(l.n)(n.showLegend)?n.showLegend:this.widgetType===o.k.timeseries,legendConfig:n.legendConfig||Object(o.f)(this.widgetType)},{emitEvent:!1}),this.widgetSettings.get("showTitleIcon").value?this.widgetSettings.get("titleIcon").enable({emitEvent:!1}):this.widgetSettings.get("titleIcon").disable({emitEvent:!1}),this.widgetSettings.get("showLegend").value?this.widgetSettings.get("legendConfig").enable({emitEvent:!1}):this.widgetSettings.get("legendConfig").disable({emitEvent:!1});var a={actionsMap:n.actions||{},actionSources:this.modelValue.actionSources||{}};if(this.actionsSettings.patchValue({actionsData:a},{emitEvent:!1}),this.widgetType===o.k.timeseries||this.widgetType===o.k.alarm){var r=!Object(l.n)(n.useDashboardTimewindow)||n.useDashboardTimewindow;this.dataSettings.patchValue({useDashboardTimewindow:r},{emitEvent:!1}),r?(this.dataSettings.get("displayTimewindow").disable({emitEvent:!1}),this.dataSettings.get("timewindow").disable({emitEvent:!1})):(this.dataSettings.get("displayTimewindow").enable({emitEvent:!1}),this.dataSettings.get("timewindow").enable({emitEvent:!1})),this.dataSettings.patchValue({displayTimewindow:!Object(l.n)(n.displayTimewindow)||n.displayTimewindow},{emitEvent:!1}),this.dataSettings.patchValue({timewindow:n.timewindow},{emitEvent:!1})}if(this.modelValue.isDataEnabled)if(this.widgetType!==o.k.rpc&&this.widgetType!==o.k.alarm&&this.widgetType!==o.k.static){var d=this.dataSettings.get("datasources");d.clear(),n.datasources&&n.datasources.forEach((function(t){d.push(e.buildDatasourceForm(t))}))}else if(this.widgetType===o.k.rpc){var p=void 0;if(n.targetDeviceAliasIds&&n.targetDeviceAliasIds.length>0){var u=n.targetDeviceAliasIds[0],m=this.aliasController.getEntityAliases();p=m[u]?m[u].id:null}else p=null;this.targetDeviceSettings.patchValue({targetDeviceAliasId:p},{emitEvent:!1})}else if(this.widgetType===o.k.alarm){var f=[];Object(l.n)(n.alarmStatusList)&&n.alarmStatusList.length?f=n.alarmStatusList:Object(l.n)(n.alarmSearchStatus)&&n.alarmSearchStatus!==c.b.ANY&&(f=[n.alarmSearchStatus]),this.dataSettings.patchValue({alarmStatusList:f},{emitEvent:!1}),this.dataSettings.patchValue({alarmSeverityList:Object(l.n)(n.alarmSeverityList)?n.alarmSeverityList:[]},{emitEvent:!1}),this.dataSettings.patchValue({alarmTypeList:Object(l.n)(n.alarmTypeList)?n.alarmTypeList:[]},{emitEvent:!1}),this.dataSettings.patchValue({searchPropagatedAlarms:!Object(l.n)(n.searchPropagatedAlarms)||n.searchPropagatedAlarms},{emitEvent:!1}),this.alarmSourceSettings.patchValue(n.alarmSource,{emitEvent:!1});var h=this.alarmSourceSettings.get("type").value;this.alarmSourceSettings.get("entityAliasId").setValidators(h===o.a.entity?[s.Validators.required]:[]),this.alarmSourceSettings.get("entityAliasId").updateValueAndValidity({emitEvent:!1})}this.updateSchemaForm(n.settings),i?this.layoutSettings.patchValue({mobileOrder:i.mobileOrder,mobileHeight:i.mobileHeight},{emitEvent:!1}):this.layoutSettings.patchValue({mobileOrder:null,mobileHeight:null},{emitEvent:!1})}this.createChangeSubscriptions()}},e.prototype.buildDatasourceForm=function(t){var e=this,n=!this.modelValue.typeParameters||!this.modelValue.typeParameters.dataKeysOptional||(null==t?void 0:t.type)===o.a.entityCount,i=this.fb.group({type:[t?t.type:null,[s.Validators.required]],name:[t?t.name:null,[]],entityAliasId:[t?t.entityAliasId:null,!t||t.type!==o.a.entity&&t.type!==o.a.entityCount?[]:[s.Validators.required]],filterId:[t?t.filterId:null,[]],dataKeys:[t?t.dataKeys:null,n?[s.Validators.required]:[]]});return i.get("type").valueChanges.subscribe((function(t){i.get("entityAliasId").setValidators(t===o.a.entity||t===o.a.entityCount?[s.Validators.required]:[]),n=!e.modelValue.typeParameters||!e.modelValue.typeParameters.dataKeysOptional||t===o.a.entityCount,i.get("dataKeys").setValidators(n?[s.Validators.required]:[]),i.get("entityAliasId").updateValueAndValidity(),i.get("dataKeys").updateValueAndValidity()})),i},e.prototype.updateSchemaForm=function(t){var e={};this.modelValue.settingsSchema&&this.modelValue.settingsSchema.schema?(e.schema=this.modelValue.settingsSchema.schema,e.form=this.modelValue.settingsSchema.form||Object(l.e)(Et),e.groupInfoes=this.modelValue.settingsSchema.groupInfoes,e.model=t):(e.schema=Object(l.e)(St),e.form=Object(l.e)(Et),e.groupInfoes=Object(l.e)(wt),e.model={}),this.advancedSettings.patchValue({settings:e},{emitEvent:!1})},e.prototype.updateDataSettings=function(){this.modelValue&&(this.modelValue.config&&Object.assign(this.modelValue.config,this.dataSettings.value),this.propagateChange(this.modelValue))},e.prototype.updateTargetDeviceSettings=function(){if(this.modelValue){if(this.modelValue.config){var t=this.targetDeviceSettings.get("targetDeviceAliasId").value;this.modelValue.config.targetDeviceAliasIds=t?[t]:[]}this.propagateChange(this.modelValue)}},e.prototype.updateAlarmSourceSettings=function(){if(this.modelValue){if(this.modelValue.config){var t=this.alarmSourceSettings.value;this.modelValue.config.alarmSource=t}this.propagateChange(this.modelValue)}},e.prototype.updateWidgetSettings=function(){this.modelValue&&(this.modelValue.config&&Object.assign(this.modelValue.config,this.widgetSettings.value),this.propagateChange(this.modelValue))},e.prototype.updateLayoutSettings=function(){this.modelValue&&(this.modelValue.layout&&Object.assign(this.modelValue.layout,this.layoutSettings.value),this.propagateChange(this.modelValue))},e.prototype.updateAdvancedSettings=function(){if(this.modelValue){if(this.modelValue.config){var t=this.advancedSettings.get("settings").value.model;this.modelValue.config.settings=t}this.propagateChange(this.modelValue)}},e.prototype.updateActionSettings=function(){if(this.modelValue){if(this.modelValue.config){var t=this.actionsSettings.get("actionsData").value.actionsMap;this.modelValue.config.actions=t}this.propagateChange(this.modelValue)}},e.prototype.alarmTypeList=function(){return this.dataSettings.get("alarmTypeList").value},e.prototype.removeAlarmType=function(t){var e=this.dataSettings.get("alarmTypeList").value,n=e.indexOf(t);n>=0&&(e.splice(n,1),this.dataSettings.get("alarmTypeList").setValue(e),this.dataSettings.get("alarmTypeList").markAsDirty())},e.prototype.addAlarmType=function(t){var e=t.input,n=t.value,i=this.dataSettings.get("alarmTypeList").value;(n||"").trim()&&(i.push(n.trim()),this.dataSettings.get("alarmTypeList").setValue(i),this.dataSettings.get("alarmTypeList").markAsDirty()),e&&(e.value="")},e.prototype.displayAdvanced=function(){return!!this.modelValue&&!!this.modelValue.settingsSchema&&!!this.modelValue.settingsSchema.schema},e.prototype.dndDatasourceMoved=function(t){this.datasourcesFormArray().removeAt(t)},e.prototype.onDatasourceDrop=function(t){var e=t.index;Object(l.z)(e)&&(e=this.datasourcesFormArray().length),this.datasourcesFormArray().insert(e,this.buildDatasourceForm(t.data))},e.prototype.removeDatasource=function(t){this.datasourcesFormArray().removeAt(t)},e.prototype.addDatasource=function(){var t;this.functionsOnly?(t=Object(l.e)(this.utils.getDefaultDatasource(this.modelValue.dataKeySettingsSchema.schema))).dataKeys=[this.generateDataKey("Sin",p.h.function)]:t={type:o.a.entity,dataKeys:[]},this.datasourcesFormArray().push(this.buildDatasourceForm(t))},e.prototype.generateDataKey=function(t,e){if(Object(l.x)(t))return t._hash=Math.random(),t;var n=t;if(e===p.h.alarm||e===p.h.entityField){var i=e===p.h.alarm?c.e[n]:v.a[t];i&&(n=this.translate.instant(i.name))}var a={name:t,type:e,label:n=this.genNextLabel(n),color:this.genNextColor(),settings:{},_hash:Math.random()};return e===p.h.function?(a.name="f(x)",a.funcBody=this.utils.getPredefinedFunctionBody(t),a.funcBody||(a.funcBody="return prevValue + 1;")):e===p.h.count&&(a.name="count"),Object(l.n)(this.modelValue.dataKeySettingsSchema.schema)&&(a.settings=this.utils.generateObjectFromJsonSchema(this.modelValue.dataKeySettingsSchema.schema)),a},e.prototype.genNextLabel=function(t){var e=t,n=1,i=!1,a=this.widgetType===o.k.alarm?[this.modelValue.config.alarmSource]:this.modelValue.config.datasources;if(a)do{i=!1,a.forEach((function(a){a&&a.dataKeys&&a.dataKeys.forEach((function(a){a.label===e&&(n++,e=t+" "+n,i=!0)}))}))}while(i);return e},e.prototype.genNextColor=function(){var t=0,e=this.widgetType===o.k.alarm?[this.modelValue.config.alarmSource]:this.modelValue.config.datasources;return e&&e.forEach((function(e){e&&e.dataKeys&&(t+=e.dataKeys.length)})),this.utils.getMaterialColor(t)},e.prototype.createEntityAlias=function(t,e){var n=this,i={id:null,alias:t,filter:{resolveMultiple:!1}};return this.dialog.open(f.a,{disableClose:!0,panelClass:["tb-dialog","tb-fullscreen-dialog"],data:{isAdd:!0,allowedEntityTypes:e,entityAliases:this.entityAliases,alias:i}}).afterClosed().pipe(Object(h.a)((function(t){t&&(n.entityAliases[t.id]=t,n.aliasController.updateEntityAliases(n.entityAliases))})))},e.prototype.createFilter=function(t){var e=this,n={id:null,filter:t,keyFilters:[],editable:!0};return this.dialog.open(x.a,{disableClose:!0,panelClass:["tb-dialog","tb-fullscreen-dialog"],data:{isAdd:!0,filters:this.filters,filter:n}}).afterClosed().pipe(Object(h.a)((function(t){t&&(e.filters[t.id]=t,e.aliasController.updateFilters(e.filters))})))},e.prototype.fetchEntityKeys=function(t,e){var n=this;return this.aliasController.getAliasInfo(t).pipe(Object(g.b)((function(t){return n.entityService.getEntityKeysByEntityFilter(t.entityFilter,e,{ignoreLoading:!0,ignoreErrors:!0}).pipe(Object(y.a)((function(){return Object(m.a)([])})))})),Object(y.a)((function(){return Object(m.a)([])})))},e.prototype.fetchDashboardStates=function(t){var e=Object.keys(this.dashboardStates),n=t?e.filter(this.createFilterForDashboardState(t)):e;return n&&n.length?n:[t]},e.prototype.createFilterForDashboardState=function(t){var e=t.toLowerCase();return function(t){return 0===t.toLowerCase().indexOf(e)}},e.prototype.validate=function(t){if(!this.dataSettings.valid)return{dataSettings:{valid:!1}};if(!this.widgetSettings.valid)return{widgetSettings:{valid:!1}};if(!this.layoutSettings.valid)return{widgetSettings:{valid:!1}};if(!this.advancedSettings.valid)return{advancedSettings:{valid:!1}};if(this.modelValue){var e=this.modelValue.config;if(this.widgetType===o.k.rpc&&this.modelValue.isDataEnabled){if(!e.targetDeviceAliasIds||!e.targetDeviceAliasIds.length)return{targetDeviceAliasIds:{valid:!1}}}else if(this.widgetType===o.k.alarm&&this.modelValue.isDataEnabled){if(!this.alarmSourceSettings.valid||!e.alarmSource)return{alarmSource:{valid:!1}}}else if(this.widgetType!==o.k.static&&this.modelValue.isDataEnabled&&(!e.datasources||!e.datasources.length))return{datasources:{valid:!1}}}return null},e.\u0275fac=function(t){return new(t||e)(a["\u0275\u0275directiveInject"](S.Store),a["\u0275\u0275directiveInject"](d.a),a["\u0275\u0275directiveInject"](b.a),a["\u0275\u0275directiveInject"](w.MatDialog),a["\u0275\u0275directiveInject"](E.TranslateService),a["\u0275\u0275directiveInject"](s.FormBuilder))},e.\u0275cmp=a["\u0275\u0275defineComponent"]({type:e,selectors:[["tb-widget-config"]],inputs:{forceExpandDatasources:"forceExpandDatasources",aliasController:"aliasController",entityAliases:"entityAliases",filters:"filters",functionsOnly:"functionsOnly",dashboardStates:"dashboardStates",disabled:"disabled"},features:[a["\u0275\u0275ProvidersFeature"]([{provide:s.NG_VALUE_ACCESSOR,useExisting:Object(a.forwardRef)((function(){return e})),multi:!0},{provide:s.NG_VALIDATORS,useExisting:Object(a.forwardRef)((function(){return e})),multi:!0}]),a["\u0275\u0275InheritDefinitionFeature"]],decls:101,vars:61,consts:[[1,"tb-widget-config","tb-absolute-fill",3,"ngClass","selectedIndex","selectedIndexChange"],[3,"label","fxShow"],["fxLayout","column","fxLayoutGap","8px",1,"mat-content","mat-padding",3,"formGroup"],["fxFlex","100","fxLayout.xs","column","fxLayoutGap","8px","fxLayoutAlign.xs","center","fxLayout","row","fxLayoutAlign","start center",4,"ngIf"],["fxLayout","column","fxLayoutAlign","center",4,"ngIf"],["class","tb-datasources",3,"expanded",4,"ngIf"],[3,"label"],["fxLayout","column","fxLayoutGap","8px",1,"mat-content","mat-padding"],["fxLayout","column","fxLayoutGap","8px",3,"formGroup"],["translate",""],["fxLayout.xs","column","fxLayoutAlign.xs","center","fxLayout","row","fxLayoutAlign","start center"],["fxLayout","column","fxLayoutAlign","center","fxFlex.sm","40%","fxFlex.gt-sm","30%"],["fxFlex","",1,"mat-block"],["matInput","","formControlName","title"],["fxFlex",""],["matInput","","formControlName","titleTooltip"],["fxFlex","",3,"fxShow"],["required","","formControlName","titleStyle",3,"editorStyle","label"],["fxLayout","column","fxLayoutAlign","center","fxLayout.gt-md","row","fxLayoutAlign.gt-md","start center","fxFlex","100%","fxLayoutGap","8px"],["fxLayout.xs","column","fxLayoutAlign.xs","center","fxLayout","row","fxLayoutAlign","start center","fxLayoutGap","8px","fxFlex.gt-md",""],["fxFlex","","formControlName","showTitleIcon"],["fxFlex","","formControlName","titleIcon"],["fxFlex","","icon","format_color_fill","openOnInput","","formControlName","iconColor",3,"label"],["matInput","","formControlName","iconSize"],["fxLayout.xs","column","fxLayoutAlign.xs","center","fxLayout","row","fxLayoutAlign","start center","fxLayoutGap","8px"],["fxLayout","column","fxLayoutAlign","center","fxLayoutGap","8px","fxFlex.sm","40%","fxFlex.gt-sm","30%"],["formControlName","showTitle"],["formControlName","dropShadow"],["formControlName","enableFullscreen"],["required","","formControlName","widgetStyle",3,"editorStyle","label"],["fxFlex","","icon","format_color_fill","openOnInput","","formControlName","backgroundColor",3,"label"],["fxFlex","","icon","format_color_fill","openOnInput","","formControlName","color",3,"label"],["matInput","","formControlName","padding"],["matInput","","formControlName","margin"],["matInput","","formControlName","units"],["matInput","","formControlName","decimals","type","number","min","0","max","15","step","1"],["fxLayout.xs","column","fxLayoutAlign.xs","center","fxLayout","row","fxLayoutAlign","start center","fxLayoutGap","8px","fxFlex","100%",3,"fxShow"],["fxFlex.gt-xs","","formControlName","showLegend"],["fxFlex.gt-xs","","fxLayout","row","fxLayoutAlign","start center",2,"margin-bottom","16px"],["formControlName","legendConfig"],["matInput","","formControlName","mobileOrder","type","number","step","1"],["matInput","","formControlName","mobileHeight","type","number","min","1","max","10","step","1"],[3,"label",4,"ngIf"],[3,"label","formGroup"],["formControlName","actionsData",3,"callbacks"],["fxFlex","100","fxLayout.xs","column","fxLayoutGap","8px","fxLayoutAlign.xs","center","fxLayout","row","fxLayoutAlign","start center"],["fxLayout","column","fxLayoutGap","8px","fxFlex.gt-xs",""],["formControlName","useDashboardTimewindow"],["formControlName","displayTimewindow"],["fxLayout","row","fxLayoutAlign","start center","fxLayout.lt-lg","column","fxLayoutAlign.lt-lg","center start","fxFlex.gt-xs","",2,"margin-bottom","16px"],["translate","",2,"padding-right","8px",3,"ngClass"],["asButton","true","isEdit","true","fxFlex","","formControlName","timewindow",3,"aggregation"],["fxLayout","column","fxLayoutAlign","center"],["fxLayout","column","fxLayoutAlign","center","fxLayout.gt-xs","row","fxLayoutAlign.gt-xs","start center","fxLayoutGap","8px"],["fxFlex","","floatLabel","always",1,"mat-block"],["formControlName","alarmStatusList","multiple","",3,"placeholder"],[3,"value",4,"ngFor","ngForOf"],["formControlName","alarmSeverityList","multiple","",3,"placeholder"],["formControlName","alarmTypeList"],["alarmTypeChipList",""],[3,"selectable","removable","removed",4,"ngFor","ngForOf"],[3,"placeholder","matChipInputFor","matChipInputSeparatorKeyCodes","matChipInputAddOnBlur","matChipInputTokenEnd"],["fxFlex","","formControlName","searchPropagatedAlarms"],[3,"value"],[3,"selectable","removable","removed"],["matChipRemove",""],[1,"tb-datasources",3,"expanded"],["fxLayout","column"],["translate","",1,"tb-panel-title"],["class","tb-panel-hint",4,"ngIf"],[4,"ngIf","ngIfElse"],["datasourcesTemplate",""],["fxFlex","","fxLayout","row","fxLayoutAlign","start center"],["type","button","mat-raised-button","","color","primary","matTooltipPosition","above",3,"disabled","fxShow","matTooltip","click"],[1,"tb-panel-hint"],["translate","","fxLayoutAlign","center center",1,"tb-prompt"],[2,"width","60px"],["fxFlex","","fxLayout","row","fxLayoutAlign","start center",2,"padding","0 0 0 10px","margin","5px"],["translate","",2,"min-width","120px"],["fxHide","","fxShow.gt-sm","","translate","","fxFlex","",2,"padding-left","10px"],[2,"min-width","40px"],[2,"overflow","auto","padding-bottom","15px"],["dndDropzone","","dndEffectAllowed","move","formArrayName","datasources",3,"dndDisableIf","dndDrop"],["dndPlaceholderRef","",1,"dndPlaceholder"],["dndEffectAllowed","move",3,"dndDraggable","dndDisableIf","dndMoved",4,"ngFor","ngForOf"],["dndEffectAllowed","move",3,"dndDraggable","dndDisableIf","dndMoved"],["mat-icon-button","","color","primary","class","handle","style","min-width: 40px; margin: 0","dndHandle","","matTooltipPosition","above",3,"matTooltip",4,"ngIf"],["fxFlex","","fxLayout","row","fxLayoutAlign","start center",1,"mat-elevation-z4",2,"padding","0 0 0 10px","margin","5px"],["fxFlex","","fxLayout","column","fxLayoutAlign","center","fxLayout.gt-sm","row","fxLayoutAlign.gt-sm","start center"],[1,"tb-datasource-type"],[3,"formControl"],["fxLayout","column",1,"tb-datasource",3,"ngSwitch"],[3,"ngSwitchCase"],["fxFlex","",1,"tb-data-keys",3,"widgetType","datasourceType","maxDataKeys","optDataKeys","aliasController","datakeySettingsSchema","callbacks","entityAliasId","formControl"],["type","button","mat-icon-button","","color","primary","matTooltipPosition","above",2,"min-width","40px",3,"disabled","matTooltip","click"],["mat-icon-button","","color","primary","dndHandle","","matTooltipPosition","above",1,"handle",2,"min-width","40px","margin","0",3,"matTooltip"],["floatLabel","always",1,"tb-datasource-name",2,"min-width","200px"],["matInput","",3,"placeholder","formControl"],[3,"showLabel","tbRequired","aliasController","formControl","callbacks"],[3,"showLabel","aliasController","formControl","callbacks"],["floatLabel","always","class","tb-datasource-name no-border-top","style","min-width: 200px;",4,"ngIf"],["floatLabel","always",1,"tb-datasource-name","no-border-top",2,"min-width","200px"],[2,"padding","0 5px",3,"formGroup"],["fxFlex","","formControlName","targetDeviceAliasId",3,"tbRequired","aliasController","allowedEntityTypes","callbacks"],["formControlName","type"],[1,"tb-datasource",3,"ngSwitch"],["fxFlex","","formControlName","dataKeys",1,"tb-data-keys",3,"widgetType","datasourceType","aliasController","datakeySettingsSchema","callbacks","entityAliasId"],["formControlName","entityAliasId",3,"showLabel","tbRequired","aliasController","callbacks"],["formControlName","filterId",3,"showLabel","aliasController","callbacks"],["fxLayout","column",1,"mat-content","mat-padding","tb-advanced-widget-config",3,"formGroup"],["formControlName","settings"]],template:function(t,e){1&t&&(a["\u0275\u0275elementStart"](0,"mat-tab-group",0),a["\u0275\u0275listener"]("selectedIndexChange",(function(t){return e.selectedTab=t})),a["\u0275\u0275elementStart"](1,"mat-tab",1),a["\u0275\u0275pipe"](2,"translate"),a["\u0275\u0275elementStart"](3,"div",2),a["\u0275\u0275template"](4,J,12,10,"div",3),a["\u0275\u0275template"](5,nt,26,18,"div",4),a["\u0275\u0275template"](6,mt,17,11,"mat-expansion-panel",5),a["\u0275\u0275template"](7,ht,7,11,"mat-expansion-panel",5),a["\u0275\u0275template"](8,bt,13,14,"mat-expansion-panel",5),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](9,"mat-tab",6),a["\u0275\u0275pipe"](10,"translate"),a["\u0275\u0275elementStart"](11,"div",7),a["\u0275\u0275elementStart"](12,"div",8),a["\u0275\u0275elementStart"](13,"span",9),a["\u0275\u0275text"](14,"widget-config.general-settings"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](15,"div",10),a["\u0275\u0275elementStart"](16,"div",11),a["\u0275\u0275elementStart"](17,"mat-form-field",12),a["\u0275\u0275elementStart"](18,"mat-label",9),a["\u0275\u0275text"](19,"widget-config.title"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](20,"input",13),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](21,"mat-form-field",14),a["\u0275\u0275elementStart"](22,"mat-label",9),a["\u0275\u0275text"](23,"widget-config.title-tooltip"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](24,"input",15),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](25,"div",16),a["\u0275\u0275element"](26,"tb-json-object-edit",17),a["\u0275\u0275pipe"](27,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](28,"div",18),a["\u0275\u0275elementStart"](29,"div",19),a["\u0275\u0275elementStart"](30,"mat-checkbox",20),a["\u0275\u0275text"](31),a["\u0275\u0275pipe"](32,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](33,"tb-material-icon-select",21),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](34,"div",19),a["\u0275\u0275element"](35,"tb-color-input",22),a["\u0275\u0275pipe"](36,"translate"),a["\u0275\u0275elementStart"](37,"mat-form-field",14),a["\u0275\u0275elementStart"](38,"mat-label",9),a["\u0275\u0275text"](39,"widget-config.icon-size"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](40,"input",23),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](41,"div",24),a["\u0275\u0275elementStart"](42,"div",25),a["\u0275\u0275elementStart"](43,"mat-checkbox",26),a["\u0275\u0275text"](44),a["\u0275\u0275pipe"](45,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](46,"mat-checkbox",27),a["\u0275\u0275text"](47),a["\u0275\u0275pipe"](48,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](49,"mat-checkbox",28),a["\u0275\u0275text"](50),a["\u0275\u0275pipe"](51,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](52,"div",14),a["\u0275\u0275element"](53,"tb-json-object-edit",29),a["\u0275\u0275pipe"](54,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](55,"div",18),a["\u0275\u0275elementStart"](56,"div",19),a["\u0275\u0275element"](57,"tb-color-input",30),a["\u0275\u0275pipe"](58,"translate"),a["\u0275\u0275element"](59,"tb-color-input",31),a["\u0275\u0275pipe"](60,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](61,"div",19),a["\u0275\u0275elementStart"](62,"mat-form-field",14),a["\u0275\u0275elementStart"](63,"mat-label",9),a["\u0275\u0275text"](64,"widget-config.padding"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](65,"input",32),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](66,"mat-form-field",14),a["\u0275\u0275elementStart"](67,"mat-label",9),a["\u0275\u0275text"](68,"widget-config.margin"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](69,"input",33),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](70,"div",24),a["\u0275\u0275elementStart"](71,"mat-form-field",14),a["\u0275\u0275elementStart"](72,"mat-label",9),a["\u0275\u0275text"](73,"widget-config.units"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](74,"input",34),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](75,"mat-form-field",14),a["\u0275\u0275elementStart"](76,"mat-label",9),a["\u0275\u0275text"](77,"widget-config.decimals"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](78,"input",35),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](79,"div",36),a["\u0275\u0275elementStart"](80,"mat-checkbox",37),a["\u0275\u0275text"](81),a["\u0275\u0275pipe"](82,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](83,"section",38),a["\u0275\u0275element"](84,"tb-legend-config",39),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](85,"div",8),a["\u0275\u0275elementStart"](86,"span",9),a["\u0275\u0275text"](87,"widget-config.mobile-mode-settings"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](88,"div",24),a["\u0275\u0275elementStart"](89,"mat-form-field",14),a["\u0275\u0275elementStart"](90,"mat-label",9),a["\u0275\u0275text"](91,"widget-config.order"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](92,"input",40),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](93,"mat-form-field",14),a["\u0275\u0275elementStart"](94,"mat-label",9),a["\u0275\u0275text"](95,"widget-config.height"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](96,"input",41),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275template"](97,vt,4,4,"mat-tab",42),a["\u0275\u0275elementStart"](98,"mat-tab",43),a["\u0275\u0275pipe"](99,"translate"),a["\u0275\u0275element"](100,"tb-manage-widget-actions",44),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()),2&t&&(a["\u0275\u0275property"]("ngClass",a["\u0275\u0275pureFunction1"](57,xt,e.widgetType===e.widgetTypes.static&&!e.displayAdvanced()))("selectedIndex",e.selectedTab),a["\u0275\u0275advance"](1),a["\u0275\u0275propertyInterpolate"]("label",a["\u0275\u0275pipeBind1"](2,31,"widget-config.data")),a["\u0275\u0275property"]("fxShow",e.widgetType!==e.widgetTypes.static),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("formGroup",e.dataSettings),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",e.widgetType===e.widgetTypes.timeseries||e.widgetType===e.widgetTypes.alarm),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",e.widgetType===e.widgetTypes.alarm),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",e.widgetType!==e.widgetTypes.rpc&&e.widgetType!==e.widgetTypes.alarm&&e.widgetType!==e.widgetTypes.static&&(null==e.modelValue?null:e.modelValue.isDataEnabled)),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",e.widgetType===e.widgetTypes.rpc&&(null==e.modelValue?null:e.modelValue.isDataEnabled)),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",e.widgetType===e.widgetTypes.alarm&&(null==e.modelValue?null:e.modelValue.isDataEnabled)),a["\u0275\u0275advance"](1),a["\u0275\u0275propertyInterpolate"]("label",a["\u0275\u0275pipeBind1"](10,33,"widget-config.settings")),a["\u0275\u0275advance"](3),a["\u0275\u0275property"]("formGroup",e.widgetSettings),a["\u0275\u0275advance"](13),a["\u0275\u0275property"]("fxShow",e.widgetSettings.get("showTitle").value),a["\u0275\u0275advance"](1),a["\u0275\u0275propertyInterpolate"]("label",a["\u0275\u0275pipeBind1"](27,35,"widget-config.title-style")),a["\u0275\u0275property"]("editorStyle",a["\u0275\u0275pureFunction0"](59,Ct)),a["\u0275\u0275advance"](5),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](32,37,"widget-config.display-icon")," "),a["\u0275\u0275advance"](4),a["\u0275\u0275propertyInterpolate"]("label",a["\u0275\u0275pipeBind1"](36,39,"widget-config.icon-color")),a["\u0275\u0275advance"](9),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](45,41,"widget-config.display-title")," "),a["\u0275\u0275advance"](3),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](48,43,"widget-config.drop-shadow")," "),a["\u0275\u0275advance"](3),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](51,45,"widget-config.enable-fullscreen")," "),a["\u0275\u0275advance"](3),a["\u0275\u0275propertyInterpolate"]("label",a["\u0275\u0275pipeBind1"](54,47,"widget-config.widget-style")),a["\u0275\u0275property"]("editorStyle",a["\u0275\u0275pureFunction0"](60,Ct)),a["\u0275\u0275advance"](4),a["\u0275\u0275propertyInterpolate"]("label",a["\u0275\u0275pipeBind1"](58,49,"widget-config.background-color")),a["\u0275\u0275advance"](2),a["\u0275\u0275propertyInterpolate"]("label",a["\u0275\u0275pipeBind1"](60,51,"widget-config.text-color")),a["\u0275\u0275advance"](20),a["\u0275\u0275property"]("fxShow",e.widgetType===e.widgetTypes.timeseries||e.widgetType===e.widgetTypes.latest),a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](82,53,"widget-config.display-legend")," "),a["\u0275\u0275advance"](4),a["\u0275\u0275property"]("formGroup",e.layoutSettings),a["\u0275\u0275advance"](12),a["\u0275\u0275property"]("ngIf",e.displayAdvanced()),a["\u0275\u0275advance"](1),a["\u0275\u0275propertyInterpolate"]("label",a["\u0275\u0275pipeBind1"](99,55,"widget-config.actions")),a["\u0275\u0275property"]("formGroup",e.actionsSettings),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("callbacks",e.widgetConfigCallbacks))},directives:[I.MatTabGroup,O.NgClass,T.b,I.MatTab,T.d,M.f,M.g,s.NgControlStatusGroup,s.FormGroupDirective,O.NgIf,E.TranslateDirective,M.e,M.b,F.MatFormField,F.MatLabel,P.MatInput,s.DefaultValueAccessor,s.NgControlStatus,s.FormControlName,D.a,s.RequiredValidator,k.MatCheckbox,j.a,A.a,s.NumberValueAccessor,_.a,L.a,V.a,R.MatSelect,O.NgForOf,N.MatChipList,N.MatChipInput,G.MatOption,N.MatChip,B.MatIcon,N.MatChipRemove,U.MatExpansionPanel,U.MatExpansionPanelHeader,U.MatExpansionPanelTitle,q.MatButton,W.MatTooltip,z.MatList,K.c,s.FormArrayName,z.MatListItem,K.f,K.b,s.FormControlDirective,O.NgSwitch,O.NgSwitchCase,H.a,K.d,$.a,Q.a,X.a],pipes:[E.TranslatePipe,O.AsyncPipe],styles:["[_nghost-%COMP%]   .tb-widget-config[_ngcontent-%COMP%]   .tb-advanced-widget-config[_ngcontent-%COMP%]{height:100%}[_nghost-%COMP%]   .tb-widget-config[_ngcontent-%COMP%]   .tb-datasources[_ngcontent-%COMP%]   .handle[_ngcontent-%COMP%]{cursor:move}[_nghost-%COMP%]   .tb-widget-config[_ngcontent-%COMP%]   .tb-datasources[_ngcontent-%COMP%]   .mat-list[_ngcontent-%COMP%]{min-height:68px;padding-left:0}[_nghost-%COMP%]   .tb-widget-config[_ngcontent-%COMP%]   .tb-datasources[_ngcontent-%COMP%]   .mat-list-item[_ngcontent-%COMP%]{height:auto;min-height:68px;display:block}[_nghost-%COMP%]   .tb-widget-config[_ngcontent-%COMP%]   .tb-datasources[_ngcontent-%COMP%]   .mat-list-item.dndDraggingSource[_ngcontent-%COMP%]{display:none}[_nghost-%COMP%]   .tb-widget-config[_ngcontent-%COMP%]   .tb-datasources[_ngcontent-%COMP%]   .mat-list-item.dndPlaceholder[_ngcontent-%COMP%]{display:block;background-color:#ddd}[_nghost-%COMP%]   .tb-widget-config[_ngcontent-%COMP%]   .tb-datasource-type[_ngcontent-%COMP%]{min-width:120px}@media screen and (min-width:960px){[_nghost-%COMP%]   .tb-widget-config[_ngcontent-%COMP%]   .tb-datasource-type[_ngcontent-%COMP%]{max-width:120px}}@media screen and (min-width:960px){[_nghost-%COMP%]   .tb-widget-config[_ngcontent-%COMP%]   .tb-datasource[_ngcontent-%COMP%]{padding-left:8px}}@media screen and (min-width:960px){[_nghost-%COMP%]   .tb-widget-config[_ngcontent-%COMP%]   .tb-datasource-name[_ngcontent-%COMP%]{width:200px;max-width:200px}}@media screen and (min-width:960px){[_nghost-%COMP%]   .tb-widget-config[_ngcontent-%COMP%]   .tb-data-keys[_ngcontent-%COMP%]{padding-left:8px}}[_nghost-%COMP%]     .tb-widget-config .mat-tab-body-wrapper{position:absolute;top:49px;left:0;right:0;bottom:0}[_nghost-%COMP%]     .tb-widget-config .tb-panel-hint{font-size:12px;color:grey}[_nghost-%COMP%]     .tb-widget-config .mat-checkbox-label{white-space:normal}[_nghost-%COMP%]     .tb-widget-config .mat-expansion-panel.tb-datasources.mat-expanded{overflow:visible}[_nghost-%COMP%]     .tb-widget-config .mat-expansion-panel.tb-datasources .mat-expansion-panel-body{padding:0 12px 16px}[_nghost-%COMP%]     .tb-widget-config .mat-expansion-panel.tb-datasources .mat-list-base .mat-list-item .mat-list-item-content{padding:0}[_nghost-%COMP%]     .tb-widget-config .mat-expansion-panel .mat-expansion-panel-content{font:inherit}[_nghost-%COMP%]     .tb-widget-config .tb-datasource-type .mat-form-field-infix{width:100%}[_nghost-%COMP%]     .tb-widget-config .tb-datasource-type .mat-select-value{min-width:92px}[_nghost-%COMP%]     .tb-widget-config .tb-datasource tb-entity-alias-select .mat-form-field{margin-top:20px}@media screen and (min-width:960px){[_nghost-%COMP%]     .tb-widget-config .tb-datasource tb-entity-alias-select .mat-form-field, [_nghost-%COMP%]     .tb-widget-config .tb-datasource tb-filter-select .mat-form-field{width:200px;max-width:200px}}[_nghost-%COMP%]     .tb-widget-config .tb-datasource .tb-datasource-name.no-border-top .mat-form-field-infix{border-top:0}@media screen and (min-width:960px){[_nghost-%COMP%]     .tb-widget-config .tb-data-keys .mat-input-element{min-height:32px}}"]}),e}(r.a);!function(){a["\u0275setClassMetadata"](It,[{type:a.Component,args:[{selector:"tb-widget-config",templateUrl:"./widget-config.component.html",styleUrls:["./widget-config.component.scss"],providers:[{provide:s.NG_VALUE_ACCESSOR,useExisting:Object(a.forwardRef)((function(){return It})),multi:!0},{provide:s.NG_VALIDATORS,useExisting:Object(a.forwardRef)((function(){return It})),multi:!0}]}]}],(function(){return[{type:S.Store},{type:d.a},{type:b.a},{type:w.MatDialog},{type:E.TranslateService},{type:s.FormBuilder}]}),{forceExpandDatasources:[{type:a.Input}],aliasController:[{type:a.Input}],entityAliases:[{type:a.Input}],filters:[{type:a.Input}],functionsOnly:[{type:a.Input}],dashboardStates:[{type:a.Input}],disabled:[{type:a.Input}]})}()},fr2l:function(t,e,n){"use strict";n.d(e,"b",(function(){return d})),n.d(e,"c",(function(){return p})),n.d(e,"d",(function(){return u})),n.d(e,"e",(function(){return h})),n.d(e,"l",(function(){return g})),n.d(e,"f",(function(){return y})),n.d(e,"m",(function(){return b})),n.d(e,"h",(function(){return v})),n.d(e,"g",(function(){return x})),n.d(e,"k",(function(){return C})),n.d(e,"n",(function(){return S})),n.d(e,"i",(function(){return w})),n.d(e,"j",(function(){return E})),n.d(e,"a",(function(){return I}));var i=n("mrSG"),a=n("//Q6"),r=n("UZbx"),o=n("Zss7"),s=n("xw5a"),l=n("3Tyt"),c=o;function d(t,e){if(!t&&!t.length)return null;var n,i=s.c.ASC;if(t.startsWith("-")?(i=s.c.DESC,n=t.substring(1)):n=t.startsWith("+")?t.substring(1):t,!n&&!n.length)return null;var a=function(t,e){var n,i=e.filter((function(t){return t.type===l.h.alarm}));i.length&&(n=m("name",t,i));n||(n=m("label",t,e));return n}(n,e);return a||(a=function(t,e){return m("name",t,e)}(n,e)),a&&a.entityKey?{key:a.entityKey,direction:i}:null}function p(t,e){return t?e.find((function(e){return e.entityKey&&e.entityKey.type===t.type&&e.entityKey.key===t.key})):null}function u(t,e){if(t){var n=function(t,e){return m("def",t,e)}(t,e);return n?n.entityKey:null}return null}function m(t,e,n){return n.find((function(n){return n[t]===e}))}function f(t,e,n,i){var a=e,r=i.find((function(n){return n[t]===e}));return r&&(a=r[n]),a}function h(t,e){return f("def",t,"label",e)}function g(t,e){return Object(a.j)(t,e.label)}function y(t,e){var n,i=null;return e.type===l.h.alarm&&!(i=null===(n=r.e[e.name])||void 0===n?void 0:n.value)&&e.name.startsWith("details.")&&(i=e.name),i?Object(a.j)(t,i):Object(a.j)(t,e.label)}function b(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=null,o=!1;if(!0===t.useRowStyleFunction&&Object(a.n)(t.rowStyleFunction)&&t.rowStyleFunction.length>0)try{r=new(Function.bind.apply(Function,Object(i.g)([void 0],e,[t.rowStyleFunction]))),o=!0}catch(s){r=null,o=!1}return{useRowStyleFunction:o,rowStyleFunction:r}}function v(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=null,o=!1;if(!0===t.useCellStyleFunction&&Object(a.n)(t.cellStyleFunction)&&t.cellStyleFunction.length>0)try{r=new(Function.bind.apply(Function,Object(i.g)([void 0],e,[t.cellStyleFunction]))),o=!0}catch(s){r=null,o=!1}return{useCellStyleFunction:o,cellStyleFunction:r}}function x(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=null,o=!1;if(!0===t.useCellContentFunction&&Object(a.n)(t.cellContentFunction)&&t.cellContentFunction.length>0)try{r=new(Function.bind.apply(Function,Object(i.g)([void 0],e,[t.cellContentFunction]))),o=!0}catch(s){r=null,o=!1}return{cellContentFunction:r,useCellContentFunction:o}}function C(t){return Object(a.n)(t.columnWidth)?t.columnWidth:"0px"}function S(t){var e={width:t};return"0px"!==t&&(e.minWidth=t,e.maxWidth=t),e}function w(t){return!(Object(a.n)(t.defaultColumnVisibility)&&"hidden"===t.defaultColumnVisibility)}function E(t){return!(Object(a.n)(t.columnSelectionToDisplay)&&"disabled"===t.columnSelectionToDisplay)}function I(t){var e=t.color||"rgba(0, 0, 0, 0.87)",n=t.backgroundColor||"rgb(255, 255, 255)",i=c.mix(n,c("rgba(221, 221, 221, 0.65)").setAlpha(1),65).toRgbString(),a=c.mix(n,c("rgba(221, 221, 221, 0.5)").setAlpha(1),50).toRgbString(),r=c.mix(n,c("rgba(221, 221, 221, 0.3)").setAlpha(1),30).toRgbString(),o=c(e),s=o.setAlpha(.87).toRgbString(),l=o.setAlpha(.54).toRgbString(),d=o.setAlpha(.26).toRgbString(),p=o.setAlpha(.38).toRgbString(),u=o.setAlpha(.12).toRgbString();return".mat-input-element::placeholder {\n   color: "+l+";\n}\n.mat-input-element::-moz-placeholder {\n   color: "+l+";\n}\n.mat-input-element::-webkit-input-placeholder {\n   color: "+l+";\n}\n.mat-input-element:-ms-input-placeholder {\n   color: "+l+";\n}\nmat-toolbar.mat-table-toolbar {\ncolor: "+s+';\n}\nmat-toolbar.mat-table-toolbar:not([color="primary"]) button.mat-icon-button mat-icon {\ncolor: '+l+";\n}\n.mat-tab-label {\ncolor: "+s+";\n}\n.mat-tab-header-pagination-chevron {\nborder-color: "+s+";\n}\n.mat-tab-header-pagination-disabled .mat-tab-header-pagination-chevron {\nborder-color: "+p+";\n}\n.mat-table .mat-header-row {\nbackground-color: "+n+";\n}\n.mat-table .mat-header-cell {\ncolor: "+l+";\n}\n.mat-table .mat-header-cell .mat-sort-header-arrow {\ncolor: "+d+";\n}\n.mat-table .mat-cell, .mat-table .mat-header-cell {\nborder-bottom-color: "+u+";\n}\n.mat-table .mat-cell .mat-checkbox-frame, .mat-table .mat-header-cell .mat-checkbox-frame {\nborder-color: "+l+";\n}\n.mat-table .mat-row .mat-cell.mat-table-sticky {\ntransition: background-color .2s;\n}\n.mat-table .mat-row.tb-current-entity {\nbackground-color: rgba(221, 221, 221, 0.65);\n}\n.mat-table .mat-row.tb-current-entity .mat-cell.mat-table-sticky {\nbackground-color: "+i+";\n}\n.mat-table .mat-row:hover:not(.tb-current-entity) {\nbackground-color: rgba(221, 221, 221, 0.3);\n}\n.mat-table .mat-row:hover:not(.tb-current-entity) .mat-cell.mat-table-sticky {\nbackground-color: "+r+";\n}\n.mat-table .mat-row.mat-row-select.mat-selected:not(.tb-current-entity) {\nbackground-color: rgba(221, 221, 221, 0.5);\n}\n.mat-table .mat-row.mat-row-select.mat-selected:not(.tb-current-entity) .mat-cell.mat-table-sticky {\nbackground-color: "+a+";\n}\n.mat-table .mat-row .mat-cell.mat-table-sticky, .mat-table .mat-header-cell.mat-table-sticky {\nbackground-color: "+n+";\n}\n.mat-table .mat-cell {\ncolor: "+s+";\n}\n.mat-table .mat-cell button.mat-icon-button mat-icon {\ncolor: "+l+";\n}\n.mat-table .mat-cell button.mat-icon-button[disabled][disabled] mat-icon {\ncolor: "+d+";\n}\n.mat-divider {\nborder-top-color: "+u+";\n}\n.mat-paginator {\ncolor: "+l+";\n}\n.mat-paginator button.mat-icon-button {\ncolor: "+l+";\n}\n.mat-paginator button.mat-icon-button[disabled][disabled] {\ncolor: "+d+";\n}\n.mat-paginator .mat-select-value {\ncolor: "+l+";\n}"}},"g+M/":function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var i=n("fXoL"),a=n("Y8nr"),r=n("//Q6"),o=n("tk/3"),s=function(){function t(t){this.http=t}return t.prototype.getDeviceProfiles=function(t,e){return this.http.get("/api/deviceProfiles"+t.toQuery(),Object(a.b)(e))},t.prototype.getDeviceProfile=function(t,e){return this.http.get("/api/deviceProfile/"+t,Object(a.b)(e))},t.prototype.saveDeviceProfile=function(t,e){return this.http.post("/api/deviceProfile",t,Object(a.b)(e))},t.prototype.deleteDeviceProfile=function(t,e){return this.http.delete("/api/deviceProfile/"+t,Object(a.b)(e))},t.prototype.setDefaultDeviceProfile=function(t,e){return this.http.post("/api/deviceProfile/"+t+"/default",Object(a.b)(e))},t.prototype.getDefaultDeviceProfileInfo=function(t){return this.http.get("/api/deviceProfileInfo/default",Object(a.b)(t))},t.prototype.getDeviceProfileInfo=function(t,e){return this.http.get("/api/deviceProfileInfo/"+t,Object(a.b)(e))},t.prototype.getDeviceProfileInfos=function(t,e,n){var i="/api/deviceProfileInfos"+t.toQuery();return Object(r.o)(e)&&(i+="&transportType="+e),this.http.get(i,Object(a.b)(n))},t.prototype.getDeviceProfileDevicesAttributesKeys=function(t,e){var n="/api/deviceProfile/devices/keys/attributes";return Object(r.o)(t)&&(n+="?deviceProfileId="+t),this.http.get(n,Object(a.b)(e))},t.prototype.getDeviceProfileDevicesTimeseriesKeys=function(t,e){var n="/api/deviceProfile/devices/keys/timeseries";return Object(r.o)(t)&&(n+="?deviceProfileId="+t),this.http.get(n,Object(a.b)(e))},t.\u0275fac=function(e){return new(e||t)(i["\u0275\u0275inject"](o.b))},t.\u0275prov=i["\u0275\u0275defineInjectable"]({token:t,factory:t.\u0275fac,providedIn:"root"}),t}();!function(){i["\u0275setClassMetadata"](s,[{type:i.Injectable,args:[{providedIn:"root"}]}],(function(){return[{type:o.b}]}),null)}()},g8Nv:function(t,e,n){"use strict";n.d(e,"a",(function(){return h}));var i=n("mrSG"),a=n("fXoL"),r=n("Vurf"),o=n("Z9d0"),s=n("ofXK"),l=n("PCNd"),c=n("5+tZ"),d=n("vkgz"),p=n("llUh"),u=n("txsh"),m=n("sYmb"),f=n("0IaG"),h=function(){function t(t,e,n,i){this.translate=t,this.authService=e,this.dynamicComponentFactoryService=n,this.dialog=i}return t.prototype.customDialog=function(t,e,n){var a=this;return this.dynamicComponentFactoryService.createDynamicComponentFactory(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(i.d)(e,t),e}(p.b),t,[l.a,g]).pipe(Object(c.b)((function(t){var i={controller:e,customComponentFactory:t,data:n};return a.dialog.open(u.a,{disableClose:!0,panelClass:["tb-dialog","tb-fullscreen-dialog"],data:i}).afterClosed().pipe(Object(d.a)((function(){a.dynamicComponentFactoryService.destroyDynamicComponentFactory(t)})))})))},t.\u0275fac=function(e){return new(e||t)(a["\u0275\u0275inject"](m.TranslateService),a["\u0275\u0275inject"](r.a),a["\u0275\u0275inject"](o.a),a["\u0275\u0275inject"](f.MatDialog))},t.\u0275prov=a["\u0275\u0275defineInjectable"]({token:t,factory:t.\u0275fac}),t}();!function(){a["\u0275setClassMetadata"](h,[{type:a.Injectable}],(function(){return[{type:m.TranslateService},{type:r.a},{type:o.a},{type:f.MatDialog}]}),null)}();var g=function(){function t(){}return t.\u0275mod=a["\u0275\u0275defineNgModule"]({type:t}),t.\u0275inj=a["\u0275\u0275defineInjector"]({factory:function(e){return new(e||t)},imports:[[s.CommonModule,l.a]]}),t}();void(("undefined"==typeof ngJitMode||ngJitMode)&&a["\u0275\u0275setNgModuleScope"](g,{imports:[s.CommonModule,l.a]}))},gKbb:function(t,e,n){"use strict";n.d(e,"a",(function(){return A}));var i=n("mrSG"),a=n("fXoL"),r=n("3Pt+"),o=n("JIJk"),s=n("FtGj"),l=n("0IaG"),c=n("7EHt"),d=n("XiUz"),p=n("ofXK"),u=n("bTqV"),m=n("Qu3c"),f=n("NFeN"),h=n("f0Cb"),g=n("kmnG"),y=n("qFsG"),b=n("sYmb"),v=n("96Yx"),x=n("znSr"),C=n("z5iZ"),S=n("bSwM"),w=n("A5z7");function E(t,e){if(1&t){var n=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementStart"](0,"button",6),a["\u0275\u0275listener"]("click",(function(){return a["\u0275\u0275restoreView"](n),a["\u0275\u0275nextContext"]().removeAlarm.emit()})),a["\u0275\u0275pipe"](1,"translate"),a["\u0275\u0275elementStart"](2,"mat-icon"),a["\u0275\u0275text"](3,"delete"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()}2&t&&a["\u0275\u0275propertyInterpolate"]("matTooltip",a["\u0275\u0275pipeBind1"](1,1,"action.remove"))}function I(t,e){1&t&&(a["\u0275\u0275elementStart"](0,"mat-error"),a["\u0275\u0275text"](1),a["\u0275\u0275pipe"](2,"translate"),a["\u0275\u0275elementEnd"]()),2&t&&(a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](2,1,"device-profile.alarm-type-required")," "))}function O(t,e){1&t&&(a["\u0275\u0275elementStart"](0,"mat-error"),a["\u0275\u0275text"](1),a["\u0275\u0275pipe"](2,"translate"),a["\u0275\u0275elementEnd"]()),2&t&&(a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](2,1,"device-profile.alarm-type-unique")," "))}function T(t,e){if(1&t){var n=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementStart"](0,"mat-chip",32),a["\u0275\u0275listener"]("removed",(function(){a["\u0275\u0275restoreView"](n);var t=e.$implicit;return a["\u0275\u0275nextContext"](4).removeRelationType(t)})),a["\u0275\u0275text"](1),a["\u0275\u0275elementStart"](2,"mat-icon",33),a["\u0275\u0275text"](3,"close"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()}if(2&t){var i=e.$implicit;a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"](" ",i," ")}}function M(t,e){if(1&t){var n=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementStart"](0,"section",24),a["\u0275\u0275elementStart"](1,"mat-form-field",25),a["\u0275\u0275elementStart"](2,"mat-label",26),a["\u0275\u0275text"](3,"device-profile.alarm-rule-relation-types-list"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](4,"mat-chip-list",27,28),a["\u0275\u0275template"](6,T,4,1,"mat-chip",29),a["\u0275\u0275elementStart"](7,"input",30),a["\u0275\u0275listener"]("matChipInputTokenEnd",(function(t){return a["\u0275\u0275restoreView"](n),a["\u0275\u0275nextContext"](3).addRelationType(t)})),a["\u0275\u0275pipe"](8,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](9,"mat-hint",31),a["\u0275\u0275pipe"](10,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()}if(2&t){var i=a["\u0275\u0275reference"](5),r=a["\u0275\u0275nextContext"](3);a["\u0275\u0275advance"](4),a["\u0275\u0275property"]("disabled",r.disabled),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("ngForOf",r.alarmFormGroup.get("propagateRelationTypes").value),a["\u0275\u0275advance"](1),a["\u0275\u0275propertyInterpolate"]("placeholder",a["\u0275\u0275pipeBind1"](8,7,"device-profile.alarm-rule-relation-types-list")),a["\u0275\u0275property"]("matChipInputFor",i)("matChipInputSeparatorKeyCodes",r.separatorKeysCodes)("matChipInputAddOnBlur",!0),a["\u0275\u0275advance"](2),a["\u0275\u0275propertyInterpolate"]("innerHTML",a["\u0275\u0275pipeBind1"](10,9,"device-profile.alarm-rule-relation-types-list-hint"),a["\u0275\u0275sanitizeHtml"])}}function F(t,e){if(1&t&&(a["\u0275\u0275elementStart"](0,"mat-checkbox",22),a["\u0275\u0275text"](1),a["\u0275\u0275pipe"](2,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275template"](3,M,11,11,"section",23)),2&t){var n=a["\u0275\u0275nextContext"](2);a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](2,2,"device-profile.propagate-alarm")," "),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("ngIf",!0===n.alarmFormGroup.get("propagate").value)}}function P(t,e){if(1&t){var n=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementStart"](0,"button",34),a["\u0275\u0275listener"]("click",(function(){return a["\u0275\u0275restoreView"](n),a["\u0275\u0275nextContext"](2).removeClearAlarmRule()})),a["\u0275\u0275pipe"](1,"translate"),a["\u0275\u0275elementStart"](2,"mat-icon"),a["\u0275\u0275text"](3,"remove_circle_outline"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()}2&t&&a["\u0275\u0275propertyInterpolate"]("matTooltip",a["\u0275\u0275pipeBind1"](1,1,"action.remove"))}function D(t,e){1&t&&(a["\u0275\u0275elementStart"](0,"div"),a["\u0275\u0275elementStart"](1,"span",35),a["\u0275\u0275text"](2,"device-profile.no-clear-alarm-rule"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]())}function k(t,e){if(1&t){var n=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementStart"](0,"div",36),a["\u0275\u0275elementStart"](1,"button",37),a["\u0275\u0275listener"]("click",(function(){return a["\u0275\u0275restoreView"](n),a["\u0275\u0275nextContext"](2).addClearAlarmRule()})),a["\u0275\u0275pipe"](2,"translate"),a["\u0275\u0275elementStart"](3,"mat-icon",38),a["\u0275\u0275text"](4,"add_circle_outline"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275text"](5),a["\u0275\u0275pipe"](6,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()}if(2&t){var i=a["\u0275\u0275nextContext"](2);a["\u0275\u0275property"]("fxShow",!i.alarmFormGroup.get("clearRule").value),a["\u0275\u0275advance"](1),a["\u0275\u0275propertyInterpolate"]("matTooltip",a["\u0275\u0275pipeBind1"](2,3,"device-profile.add-clear-alarm-rule")),a["\u0275\u0275advance"](4),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](6,5,"device-profile.add-clear-alarm-rule")," ")}}function j(t,e){if(1&t&&(a["\u0275\u0275elementStart"](0,"div",7),a["\u0275\u0275element"](1,"mat-divider"),a["\u0275\u0275elementStart"](2,"mat-form-field",8),a["\u0275\u0275elementStart"](3,"mat-label"),a["\u0275\u0275text"](4),a["\u0275\u0275pipe"](5,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](6,"input",9),a["\u0275\u0275template"](7,I,3,3,"mat-error",10),a["\u0275\u0275template"](8,O,3,3,"mat-error",10),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](9,"mat-expansion-panel",11),a["\u0275\u0275elementStart"](10,"mat-expansion-panel-header"),a["\u0275\u0275elementStart"](11,"mat-panel-title"),a["\u0275\u0275elementStart"](12,"div",12),a["\u0275\u0275elementStart"](13,"div",13),a["\u0275\u0275text"](14,"device-profile.advanced-settings"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275template"](15,F,4,4,"ng-template",5),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](16,"div",14),a["\u0275\u0275elementStart"](17,"div",15),a["\u0275\u0275text"](18,"device-profile.create-alarm-rules"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](19,"tb-create-alarm-rules",16),a["\u0275\u0275elementStart"](20,"div",15),a["\u0275\u0275text"](21,"device-profile.clear-alarm-rule"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](22,"div",17),a["\u0275\u0275elementStart"](23,"div",18),a["\u0275\u0275element"](24,"tb-alarm-rule",19),a["\u0275\u0275elementEnd"](),a["\u0275\u0275template"](25,P,4,3,"button",20),a["\u0275\u0275elementEnd"](),a["\u0275\u0275template"](26,D,3,0,"div",10),a["\u0275\u0275template"](27,k,7,7,"div",21),a["\u0275\u0275elementEnd"]()),2&t){var n=a["\u0275\u0275nextContext"]();a["\u0275\u0275advance"](4),a["\u0275\u0275textInterpolate"](a["\u0275\u0275pipeBind1"](5,10,"device-profile.alarm-type")),a["\u0275\u0275advance"](3),a["\u0275\u0275property"]("ngIf",n.alarmFormGroup.get("alarmType").hasError("required")),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",n.alarmFormGroup.get("alarmType").hasError("unique")),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("expanded",!1),a["\u0275\u0275advance"](10),a["\u0275\u0275property"]("deviceProfileId",n.deviceProfileId),a["\u0275\u0275advance"](3),a["\u0275\u0275property"]("fxShow",n.alarmFormGroup.get("clearRule").value),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("deviceProfileId",n.deviceProfileId),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",!n.disabled),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",n.disabled&&!n.alarmFormGroup.get("clearRule").value),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",!n.disabled)}}var A=function(){function t(t,e){this.dialog=t,this.fb=e,this.removeAlarm=new a.EventEmitter,this.separatorKeysCodes=[s.ENTER,s.COMMA,s.SEMICOLON],this.expanded=!1,this.propagateChange=null,this.propagateChangePending=!1}return t.prototype.registerOnChange=function(t){var e=this;this.propagateChange=t,this.propagateChangePending&&(this.propagateChangePending=!1,setTimeout((function(){e.propagateChange(e.modelValue)}),0))},t.prototype.registerOnTouched=function(t){},t.prototype.ngOnInit=function(){var t=this;this.alarmFormGroup=this.fb.group({id:[null,r.Validators.required],alarmType:[null,r.Validators.required],createRules:[null],clearRule:[null],propagate:[null],propagateRelationTypes:[null]},{validators:o.v}),this.alarmFormGroup.valueChanges.subscribe((function(){t.updateModel()}))},t.prototype.setDisabledState=function(t){this.disabled=t,this.disabled?this.alarmFormGroup.disable({emitEvent:!1}):this.alarmFormGroup.enable({emitEvent:!1})},t.prototype.writeValue=function(t){this.propagateChangePending=!1,this.modelValue=t,this.modelValue.alarmType||(this.expanded=!0),this.alarmFormGroup.reset(this.modelValue||void 0,{emitEvent:!1}),this.disabled||this.alarmFormGroup.valid||this.updateModel()},t.prototype.addClearAlarmRule=function(){this.alarmFormGroup.patchValue({clearRule:{condition:{condition:[]}}})},t.prototype.removeClearAlarmRule=function(){this.alarmFormGroup.patchValue({clearRule:null})},t.prototype.validate=function(t){if(t.parent){var e=t.value.alarmType,n=[];t.parent.getRawValue().forEach((function(t){n.push(t.alarmType)})),n.filter((function(t){return t===e})).length>1&&this.alarmFormGroup.get("alarmType").setErrors({unique:!0})}return this.alarmFormGroup.valid?null:{alarm:{valid:!1}}},t.prototype.removeRelationType=function(t){var e=this.alarmFormGroup.get("propagateRelationTypes").value,n=e.indexOf(t);n>=0&&(e.splice(n,1),this.alarmFormGroup.get("propagateRelationTypes").setValue(e,{emitEvent:!0}))},t.prototype.addRelationType=function(t){var e=t.input,n=t.value;if((n||"").trim()){n=n.trim();var i=this.alarmFormGroup.get("propagateRelationTypes").value;i&&-1!==i.indexOf(n)||(i||(i=[]),i.push(n),this.alarmFormGroup.get("propagateRelationTypes").setValue(i,{emitEvent:!0}))}e&&(e.value="")},t.prototype.updateModel=function(){var t=this.alarmFormGroup.value;this.modelValue=Object(i.a)(Object(i.a)({},this.modelValue),t),this.propagateChange?this.propagateChange(this.modelValue):this.propagateChangePending=!0},t.\u0275fac=function(e){return new(e||t)(a["\u0275\u0275directiveInject"](l.MatDialog),a["\u0275\u0275directiveInject"](r.FormBuilder))},t.\u0275cmp=a["\u0275\u0275defineComponent"]({type:t,selectors:[["tb-device-profile-alarm"]],inputs:{disabled:"disabled",expanded:"expanded",deviceProfileId:"deviceProfileId"},outputs:{removeAlarm:"removeAlarm"},features:[a["\u0275\u0275ProvidersFeature"]([{provide:r.NG_VALUE_ACCESSOR,useExisting:Object(a.forwardRef)((function(){return t})),multi:!0},{provide:r.NG_VALIDATORS,useExisting:Object(a.forwardRef)((function(){return t})),multi:!0}])],decls:9,vars:4,consts:[["fxFlex","",1,"device-profile-alarm",3,"formGroup","expanded","expandedChange"],["fxFlex","","fxLayout","row","fxLayoutAlign","start center"],["fxLayout","row","fxFlex","","fxLayoutAlign","start center"],["fxFlex",""],["mat-icon-button","","style","min-width: 40px;","type","button","matTooltipPosition","above",3,"matTooltip","click",4,"ngIf"],["matExpansionPanelContent",""],["mat-icon-button","","type","button","matTooltipPosition","above",2,"min-width","40px",3,"matTooltip","click"],["fxLayout","column","fxLayoutGap","0.5em"],["fxFlex","","floatLabel","always"],["required","","matInput","","formControlName","alarmType","placeholder","Enter alarm type"],[4,"ngIf"],[1,"advanced-settings",3,"expanded"],["fxFlex","","fxLayout","row","fxLayoutAlign","end center"],["translate","",1,"tb-small"],["fxFlex","","fxLayout","column"],["translate","",1,"tb-small",2,"padding-bottom","8px"],["formControlName","createRules",2,"padding-bottom","16px",3,"deviceProfileId"],["fxLayout","row","fxLayoutGap","8px;","fxLayoutAlign","start center",2,"padding-bottom","8px",3,"fxShow"],["fxFlex","","fxLayout","row",1,"clear-alarm-rule"],["formControlName","clearRule","fxFlex","",3,"deviceProfileId"],["mat-icon-button","","color","primary","style","min-width: 40px;","type","button","matTooltipPosition","above",3,"matTooltip","click",4,"ngIf"],[3,"fxShow",4,"ngIf"],["formControlName","propagate",2,"display","block","padding-bottom","16px"],["style","padding-bottom: 1em;",4,"ngIf"],[2,"padding-bottom","1em"],["floatLabel","always",1,"mat-block"],["translate",""],[3,"disabled"],["relationTypesChipList",""],[3,"removed",4,"ngFor","ngForOf"],["matInput","","type","text",2,"max-width","200px",3,"placeholder","matChipInputFor","matChipInputSeparatorKeyCodes","matChipInputAddOnBlur","matChipInputTokenEnd"],[3,"innerHTML"],[3,"removed"],["matChipRemove",""],["mat-icon-button","","color","primary","type","button","matTooltipPosition","above",2,"min-width","40px",3,"matTooltip","click"],["translate","","fxLayoutAlign","center center",1,"tb-prompt",2,"margin","16px 0"],[3,"fxShow"],["mat-stroked-button","","color","primary","type","button","matTooltipPosition","above",3,"matTooltip","click"],[1,"button-icon"]],template:function(t,e){1&t&&(a["\u0275\u0275elementStart"](0,"mat-expansion-panel",0),a["\u0275\u0275listener"]("expandedChange",(function(t){return e.expanded=t})),a["\u0275\u0275elementStart"](1,"mat-expansion-panel-header"),a["\u0275\u0275elementStart"](2,"div",1),a["\u0275\u0275elementStart"](3,"mat-panel-title"),a["\u0275\u0275elementStart"](4,"div",2),a["\u0275\u0275text"](5),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](6,"span",3),a["\u0275\u0275template"](7,E,4,3,"button",4),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275template"](8,j,28,12,"ng-template",5),a["\u0275\u0275elementEnd"]()),2&t&&(a["\u0275\u0275property"]("formGroup",e.alarmFormGroup)("expanded",e.expanded),a["\u0275\u0275advance"](5),a["\u0275\u0275textInterpolate1"](" ",e.alarmFormGroup.get("alarmType").value," "),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("ngIf",!e.disabled))},directives:[c.MatExpansionPanel,d.b,r.NgControlStatusGroup,r.FormGroupDirective,c.MatExpansionPanelHeader,d.f,d.e,c.MatExpansionPanelTitle,p.NgIf,c.MatExpansionPanelContent,u.MatButton,m.MatTooltip,f.MatIcon,d.g,h.MatDivider,g.MatFormField,g.MatLabel,y.MatInput,r.DefaultValueAccessor,r.RequiredValidator,r.NgControlStatus,r.FormControlName,b.TranslateDirective,v.a,x.d,C.a,g.MatError,S.MatCheckbox,w.MatChipList,p.NgForOf,w.MatChipInput,g.MatHint,w.MatChip,w.MatChipRemove],pipes:[b.TranslatePipe],styles:["[_nghost-%COMP%]{display:block}[_nghost-%COMP%]   .clear-alarm-rule[_ngcontent-%COMP%]{border:2px groove rgba(0,0,0,.45);border-radius:4px;padding:8px}[_nghost-%COMP%]   .mat-expansion-panel[_ngcontent-%COMP%]{box-shadow:none}[_nghost-%COMP%]   .mat-expansion-panel.device-profile-alarm[_ngcontent-%COMP%]{border:1px groove rgba(0,0,0,.25)}[_nghost-%COMP%]   .mat-expansion-panel.device-profile-alarm[_ngcontent-%COMP%]   .mat-expansion-panel-header[_ngcontent-%COMP%]{padding:0 24px 0 8px}[_nghost-%COMP%]   .mat-expansion-panel.device-profile-alarm[_ngcontent-%COMP%]   .mat-expansion-panel-header.mat-expanded[_ngcontent-%COMP%]{height:48px}[_nghost-%COMP%]   .mat-expansion-panel.advanced-settings[_ngcontent-%COMP%]{border:none;padding:0}[_nghost-%COMP%]   .mat-expansion-panel.advanced-settings[_ngcontent-%COMP%]   .mat-expansion-panel-header[_ngcontent-%COMP%]{padding:0 8px}[_nghost-%COMP%]     .mat-expansion-panel.device-profile-alarm .mat-expansion-panel-body{padding:0 8px 8px}[_nghost-%COMP%]     .mat-expansion-panel.advanced-settings .mat-expansion-panel-body{padding:0}[_nghost-%COMP%]     .mat-expansion-panel .button-icon{font-size:20px;width:20px;height:20px}"]}),t}();!function(){a["\u0275setClassMetadata"](A,[{type:a.Component,args:[{selector:"tb-device-profile-alarm",templateUrl:"./device-profile-alarm.component.html",styleUrls:["./device-profile-alarm.component.scss"],providers:[{provide:r.NG_VALUE_ACCESSOR,useExisting:Object(a.forwardRef)((function(){return A})),multi:!0},{provide:r.NG_VALIDATORS,useExisting:Object(a.forwardRef)((function(){return A})),multi:!0}]}]}],(function(){return[{type:l.MatDialog},{type:r.FormBuilder}]}),{disabled:[{type:a.Input}],removeAlarm:[{type:a.Output}],expanded:[{type:a.Input}],deviceProfileId:[{type:a.Input}]})}()},gi3d:function(t,e,n){"use strict";n.d(e,"a",(function(){return c})),n.d(e,"b",(function(){return d}));var i=n("mrSG"),a=n("gaqQ"),r=n("RLvv"),o=n("Lm6k"),s=Object(i.a)({$event:{meta:"argument",type:"Event",description:"The DOM event that triggered this action."},widgetContext:r.a.ctx,entityId:{meta:"argument",type:o.a,description:"Id of the entity for which the action was triggered.",children:{id:{meta:"property",type:"string",description:"UUID Id string"},entityType:{meta:"property",type:o.b,description:"Entity type"}}},entityName:{meta:"argument",type:"string",description:"Name of the entity for which the action was triggered."},additionalParams:{meta:"argument",type:"object",description:"Optional object holding additional information."},entityLabel:{meta:"argument",type:"string",description:"Label of the entity for which the action was triggered."}},o.c),l=Object(i.a)({htmlTemplate:{meta:"argument",type:"string",description:"HTML template used to render custom dialog."}},s),c=new a.a(s),d=new a.a(l)},hBar:function(t,e,n){"use strict";(function(t){n.d(e,"a",(function(){return P}));var i=n("mrSG"),a=n("fXoL"),r=n("RxGS"),o=(n("0G7Z"),n("OiFK")),s=n("//Q6"),l=n("Zss7"),c=n("HR/i"),d=n("l7P3"),p=n("XiUz"),u=n("ofXK"),m=n("znSr"),f=["knob"],h=["knobContainer"],g=["knobTopPointerContainer"],y=["knobTopPointer"],b=["knobValueContainer"],v=["knobValue"],x=["knobErrorContainer"],C=["knobError"],S=["knobTitleContainer"],w=["knobTitle"],E=["knobMinmaxContainer"],I=["textMeasure"],O=["canvasBar"],T=function(t){return{pointerEvents:t}},M=function(t){return{background:t}},F=l,P=function(e){function r(t,n){var i=e.call(this,n)||this;return i.utils=t,i.store=n,i.value="0",i.error="",i.title="",i.newValue=0,i.startDeg=-1,i.currentDeg=0,i.rotation=0,i.lastDeg=0,i.moving=!1,i.minDeg=-45,i.maxDeg=225,i}return Object(i.d)(r,e),r.prototype.ngOnInit=function(){var e=this;this.knob=t(this.knobRef.nativeElement),this.knobContainer=t(this.knobContainerRef.nativeElement),this.knobTopPointerContainer=t(this.knobTopPointerContainerRef.nativeElement),this.knobTopPointer=t(this.knobTopPointerRef.nativeElement),this.knobValueContainer=t(this.knobValueContainerRef.nativeElement),this.knobValue=t(this.knobValueRef.nativeElement),this.knobTitleContainer=t(this.knobTitleContainerRef.nativeElement),this.knobTitle=t(this.knobTitleRef.nativeElement),this.knobErrorContainer=t(this.knobErrorContainerRef.nativeElement),this.knobError=t(this.knobErrorRef.nativeElement),this.knobMinmaxContainer=t(this.knobMinmaxContainerRef.nativeElement),this.minmaxLabel=this.knobMinmaxContainer.find(".minmax-label"),this.textMeasure=t(this.textMeasureRef.nativeElement),this.canvasBarElement=this.canvasBarElementRef.nativeElement,this.knobResize$=new c.a((function(){e.resize()})),this.knobResize$.observe(this.knobContainerRef.nativeElement),this.init()},r.prototype.ngOnDestroy=function(){this.knobResize$&&this.knobResize$.disconnect()},r.prototype.init=function(){var e=this,i=this.ctx.settings;this.minValue=Object(s.n)(i.minValue)?i.minValue:0,this.maxValue=Object(s.n)(i.maxValue)?i.maxValue:100,this.title=Object(s.n)(i.title)?i.title:"";var a={renderTo:this.canvasBarElement,hideValue:!0,neonGlowBrightness:0,gaugeWidthScale:.4,gaugeColor:"rgba(0, 0, 0, 0)",levelColors:["#19ff4b","#ffff19","#ff3232"],minValue:this.minValue,maxValue:this.maxValue,gaugeType:"donut",dashThickness:2,donutStartAngle:3/4*Math.PI,donutEndAngle:9/4*Math.PI,animation:!1};this.knob.on("click",(function(t){if(e.moving)return e.moving=!1,!1;t.preventDefault();var n=e.knob.offset(),i=n.top+e.knob.height()/2,a=n.left+e.knob.width()/2,r=180/Math.PI,o=t.originalEvent.touches?t.originalEvent.touches[0]:t,s=i-o.pageY,l=a-o.pageX,c=Math.atan2(s,l)*r;if(c<0&&(c=360+c),c>e.maxDeg){if(!(c-360>e.minDeg))return!1;c-=360}e.currentDeg=c,e.lastDeg=c,e.knobTopPointerContainer.css("transform","rotate("+e.currentDeg+"deg)"),e.turn(e.degreeToRatio(e.currentDeg)),e.rotation=e.currentDeg,e.startDeg=-1,e.rpcUpdateValue(e.newValue)})),this.knob.on("mousedown touchstart",(function(n){e.moving=!1,n.preventDefault();var i=e.knob.offset(),a=i.top+e.knob.height()/2,r=i.left+e.knob.width()/2,o=180/Math.PI;t(document).on("mousemove.rem touchmove.rem",(function(t){e.moving=!0;var n=t.originalEvent.touches?t.originalEvent.touches[0]:t,i=a-n.pageY,s=r-n.pageX,l=Math.atan2(i,s)*o;l<0&&(l=360+l),-1===e.startDeg&&(e.startDeg=l);var c=Math.floor(l-e.startDeg+e.rotation);(c<0?c=360+c:c>359&&(c%=360),c>e.maxDeg)&&(c-360>e.minDeg?c-=360:c=Math.abs(e.maxDeg-e.lastDeg)<Math.abs(e.minDeg-e.lastDeg)?e.maxDeg:e.minDeg);if(Math.abs(c-e.lastDeg)>180)return e.startDeg=l,e.rotation=e.currentDeg,!1;e.currentDeg=c,e.lastDeg=c,e.knobTopPointerContainer.css("transform","rotate("+e.currentDeg+"deg)"),e.turn(e.degreeToRatio(e.currentDeg))})),t(document).on("mouseup.rem  touchend.rem",(function(){e.newValue!==e.rpcValue&&e.moving&&e.rpcUpdateValue(e.newValue),e.knob.off(".rem"),t(document).off(".rem"),e.rotation=e.currentDeg,e.startDeg=-1}))}));var r=this.ctx.defaultSubscription.rpcEnabled;this.isSimulated=this.utils.widgetEditMode,this.requestTimeout=500,i.requestTimeout&&(this.requestTimeout=i.requestTimeout),this.getValueMethod="getValue",i.getValueMethod&&i.getValueMethod.length&&(this.getValueMethod=i.getValueMethod),this.setValueMethod="setValue",i.setValueMethod&&i.setValueMethod.length&&(this.setValueMethod=i.setValueMethod),Promise.all([n.e(0),n.e(10)]).then(n.bind(null,"QR2c")).then((function(t){e.canvasBar=new t.CanvasDigitalGauge(a).draw();var n=Object(s.n)(i.initialValue)?i.initialValue:e.minValue;e.setValue(n),r?e.isSimulated||e.rpcRequestValue():e.onError("Target device is not set!")}))},r.prototype.degreeToRatio=function(t){return(t-this.minDeg)/(this.maxDeg-this.minDeg)},r.prototype.ratioToDegree=function(t){return this.minDeg+t*(this.maxDeg-this.minDeg)},r.prototype.turn=function(t){this.newValue=Number((this.minValue+(this.maxValue-this.minValue)*t).toFixed(this.ctx.decimals)),this.canvasBar.value!==this.newValue&&(this.canvasBar.value=this.newValue),this.updateColor(this.canvasBar.getValueColor()),this.onValue(this.newValue)},r.prototype.resize=function(){var t=this.knobContainer.width(),e=this.knobContainer.height(),n=Math.min(t,e);this.knob.css({width:n,height:n}),this.canvasBar&&this.canvasBar.update({width:n,height:n}),this.setFontSize(this.knobTitle,this.title,this.knobTitleContainer.height(),this.knobTitleContainer.width()),this.setFontSize(this.knobError,this.error,this.knobErrorContainer.height(),this.knobErrorContainer.width());var i=this.knobMinmaxContainer.height();this.minmaxLabel.css({fontSize:i+"px",lineHeight:i+"px"}),this.checkValueSize()},r.prototype.checkValueSize=function(){var t=this.knobValueContainer.height()/3.3,e=this.knobValueContainer.width();this.setFontSize(this.knobValue,this.value+"",t,e)},r.prototype.setFontSize=function(t,e,n,i){for(var a=this.measureTextWidth(e,n);a>i&&!(--n<0);)a=this.measureTextWidth(e,n);t.css({fontSize:n+"px",lineHeight:n+"px"})},r.prototype.measureTextWidth=function(t,e){return this.textMeasure.css({fontSize:e+"px",lineHeight:e+"px"}),this.textMeasure.html(t),this.textMeasure.width()},r.prototype.setValue=function(t){var e=(t-this.minValue)/(this.maxValue-this.minValue);this.rotation=this.lastDeg=this.currentDeg=this.ratioToDegree(e),this.knobTopPointerContainer.css("transform","rotate("+this.currentDeg+"deg)"),this.canvasBar.value!==t&&(this.canvasBar.value=t),this.updateColor(this.canvasBar.getValueColor()),this.value=this.formatValue(t),this.checkValueSize(),this.ctx.detectChanges()},r.prototype.updateColor=function(t){var e=F(t).brighten(30).toHexString();this.knobValue.css({color:e});var n=t+" 1px 1px 10px, "+e+" 1px 1px 10px";this.knobValue.css({textShadow:n}),this.knobTopPointer.css({backgroundColor:e});var i="inset 1px 0 2px #040404, 1px 1px 8px 2px "+e;this.knobTopPointer.css({boxShadow:i})},r.prototype.onValue=function(t){this.value=this.formatValue(t),this.checkValueSize(),this.ctx.detectChanges()},r.prototype.formatValue=function(t){return this.ctx.utils.formatValue(t,this.ctx.decimals,this.ctx.units,!0)},r.prototype.rpcRequestValue=function(){var t=this;this.error="",this.ctx.controlApi.sendTwoWayCommand(this.getValueMethod,null,this.requestTimeout).subscribe((function(e){if(Object(s.v)(e)){var n=Number(Number(e).toFixed(t.ctx.decimals));t.setValue(n)}else{var i="Unable to parse response: "+e;t.onError(i)}}),(function(){var e=t.ctx.defaultSubscription.rpcErrorText;t.onError(e)}))},r.prototype.rpcUpdateValue=function(t){var e=this;if(this.executingUpdateValue)return this.scheduledValue=t,void 0;this.scheduledValue=null,this.rpcValue=t,this.executingUpdateValue=!0,this.error="",this.ctx.controlApi.sendOneWayCommand(this.setValueMethod,t,this.requestTimeout).subscribe((function(){e.executingUpdateValue=!1,null!=e.scheduledValue&&e.scheduledValue!==e.rpcValue&&e.rpcUpdateValue(e.scheduledValue)}),(function(){e.executingUpdateValue=!1;var t=e.ctx.defaultSubscription.rpcErrorText;e.onError(t)}))},r.prototype.onError=function(t){this.error=t,this.setFontSize(this.knobError,this.error,this.knobErrorContainer.height(),this.knobErrorContainer.width()),this.ctx.detectChanges()},r.\u0275fac=function(t){return new(t||r)(a["\u0275\u0275directiveInject"](o.a),a["\u0275\u0275directiveInject"](d.Store))},r.\u0275cmp=a["\u0275\u0275defineComponent"]({type:r,selectors:[["tb-knob"]],viewQuery:function(t,e){var n;(1&t&&(a["\u0275\u0275staticViewQuery"](f,!0),a["\u0275\u0275staticViewQuery"](h,!0),a["\u0275\u0275staticViewQuery"](g,!0),a["\u0275\u0275staticViewQuery"](y,!0),a["\u0275\u0275staticViewQuery"](b,!0),a["\u0275\u0275staticViewQuery"](v,!0),a["\u0275\u0275staticViewQuery"](x,!0),a["\u0275\u0275staticViewQuery"](C,!0),a["\u0275\u0275staticViewQuery"](S,!0),a["\u0275\u0275staticViewQuery"](w,!0),a["\u0275\u0275staticViewQuery"](E,!0),a["\u0275\u0275staticViewQuery"](I,!0),a["\u0275\u0275staticViewQuery"](O,!0)),2&t)&&(a["\u0275\u0275queryRefresh"](n=a["\u0275\u0275loadQuery"]())&&(e.knobRef=n.first),a["\u0275\u0275queryRefresh"](n=a["\u0275\u0275loadQuery"]())&&(e.knobContainerRef=n.first),a["\u0275\u0275queryRefresh"](n=a["\u0275\u0275loadQuery"]())&&(e.knobTopPointerContainerRef=n.first),a["\u0275\u0275queryRefresh"](n=a["\u0275\u0275loadQuery"]())&&(e.knobTopPointerRef=n.first),a["\u0275\u0275queryRefresh"](n=a["\u0275\u0275loadQuery"]())&&(e.knobValueContainerRef=n.first),a["\u0275\u0275queryRefresh"](n=a["\u0275\u0275loadQuery"]())&&(e.knobValueRef=n.first),a["\u0275\u0275queryRefresh"](n=a["\u0275\u0275loadQuery"]())&&(e.knobErrorContainerRef=n.first),a["\u0275\u0275queryRefresh"](n=a["\u0275\u0275loadQuery"]())&&(e.knobErrorRef=n.first),a["\u0275\u0275queryRefresh"](n=a["\u0275\u0275loadQuery"]())&&(e.knobTitleContainerRef=n.first),a["\u0275\u0275queryRefresh"](n=a["\u0275\u0275loadQuery"]())&&(e.knobTitleRef=n.first),a["\u0275\u0275queryRefresh"](n=a["\u0275\u0275loadQuery"]())&&(e.knobMinmaxContainerRef=n.first),a["\u0275\u0275queryRefresh"](n=a["\u0275\u0275loadQuery"]())&&(e.textMeasureRef=n.first),a["\u0275\u0275queryRefresh"](n=a["\u0275\u0275loadQuery"]())&&(e.canvasBarElementRef=n.first))},inputs:{ctx:"ctx"},features:[a["\u0275\u0275InheritDefinitionFeature"]],decls:36,vars:9,consts:[["fxLayout","column",1,"tb-knob",3,"ngStyle"],["id","knob-container","fxFlex","","fxLayout","column","fxLayoutAlign","center center"],["knobContainer",""],[1,"knob"],["knob",""],["fxLayout","row","fxLayoutAlign","center center",1,"value-container"],["knobValueContainer",""],[1,"knob-value"],["knobValue",""],[1,"canvas-background"],["id","canvasBar"],["canvasBar",""],[1,"top-pointer-container"],["knobTopPointerContainer",""],[1,"top-pointer"],["knobTopPointer",""],[1,"top"],["fxLayout","row","fxLayoutAlign","center center",1,"error-container",3,"ngStyle"],["knobErrorContainer",""],[1,"knob-error",3,"innerHTML"],["knobError",""],["fxLayout","row","fxLayoutAlign","center center",1,"title-container"],["knobTitleContainer",""],[1,"knob-title"],["knobTitle",""],["fxLayout","row","fxLayoutAlign","start center",1,"minmax-container"],["knobMinmaxContainer",""],[1,"minmax-label"],["fxFlex",""],["id","text-measure"],["textMeasure",""]],template:function(t,e){1&t&&(a["\u0275\u0275elementStart"](0,"div",0),a["\u0275\u0275elementStart"](1,"div",1,2),a["\u0275\u0275elementStart"](3,"div",3,4),a["\u0275\u0275elementStart"](5,"div",5,6),a["\u0275\u0275elementStart"](7,"span",7,8),a["\u0275\u0275text"](9),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](10,"div",9),a["\u0275\u0275element"](11,"canvas",10,11),a["\u0275\u0275elementStart"](13,"div",12,13),a["\u0275\u0275element"](15,"div",14,15),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](17,"div",16),a["\u0275\u0275elementStart"](18,"div",17,18),a["\u0275\u0275element"](20,"span",19,20),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](22,"div",21,22),a["\u0275\u0275elementStart"](24,"span",23,24),a["\u0275\u0275text"](26),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](27,"div",25,26),a["\u0275\u0275elementStart"](29,"span",27),a["\u0275\u0275text"](30,"min"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](31,"span",28),a["\u0275\u0275elementStart"](32,"span",27),a["\u0275\u0275text"](33,"max"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](34,"div",29,30),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()),2&t&&(a["\u0275\u0275property"]("ngStyle",a["\u0275\u0275pureFunction1"](5,T,e.ctx.isEdit?"none":"all")),a["\u0275\u0275advance"](9),a["\u0275\u0275textInterpolate"](e.value),a["\u0275\u0275advance"](9),a["\u0275\u0275property"]("ngStyle",a["\u0275\u0275pureFunction1"](7,M,null!=e.error&&e.error.length?"rgba(255,255,255,0.25)":"none")),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("innerHTML",e.error,a["\u0275\u0275sanitizeHtml"]),a["\u0275\u0275advance"](6),a["\u0275\u0275textInterpolate"](e.title))},directives:[p.f,u.NgStyle,m.e,p.b,p.e],styles:['[_nghost-%COMP%]   .tb-knob[_ngcontent-%COMP%]{width:100%;height:100%}[_nghost-%COMP%]   .tb-knob[_ngcontent-%COMP%]   .knob[_ngcontent-%COMP%]{position:relative}[_nghost-%COMP%]   .tb-knob[_ngcontent-%COMP%]   .knob[draggable][_ngcontent-%COMP%]{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}[_nghost-%COMP%]   .tb-knob[_ngcontent-%COMP%]   .knob[_ngcontent-%COMP%]   #canvasBar[_ngcontent-%COMP%]{position:absolute;top:0;right:0;bottom:0;left:0;z-index:2}[_nghost-%COMP%]   .tb-knob[_ngcontent-%COMP%]   .knob[_ngcontent-%COMP%]   .canvas-background[_ngcontent-%COMP%]{position:absolute;top:5%;right:5%;bottom:5%;left:5%;z-index:2;background:#3f4346;border-radius:50%}[_nghost-%COMP%]   .tb-knob[_ngcontent-%COMP%]   .knob[_ngcontent-%COMP%]   .value-container[_ngcontent-%COMP%]{position:absolute;top:35%;right:35%;bottom:35%;left:35%;z-index:4}[_nghost-%COMP%]   .tb-knob[_ngcontent-%COMP%]   .knob[_ngcontent-%COMP%]   .value-container[_ngcontent-%COMP%]   .knob-value[_ngcontent-%COMP%]{font-weight:500;color:#fff;white-space:nowrap}[_nghost-%COMP%]   .tb-knob[_ngcontent-%COMP%]   .knob[_ngcontent-%COMP%]   .error-container[_ngcontent-%COMP%]{position:absolute;top:1%;right:0;left:0;z-index:4;height:5%}[_nghost-%COMP%]   .tb-knob[_ngcontent-%COMP%]   .knob[_ngcontent-%COMP%]   .error-container[_ngcontent-%COMP%]   .knob-error[_ngcontent-%COMP%]{color:#ff3315;white-space:nowrap}[_nghost-%COMP%]   .tb-knob[_ngcontent-%COMP%]   .knob[_ngcontent-%COMP%]   .title-container[_ngcontent-%COMP%]{position:absolute;right:20%;bottom:5%;left:20%;z-index:4;height:6.6%}[_nghost-%COMP%]   .tb-knob[_ngcontent-%COMP%]   .knob[_ngcontent-%COMP%]   .title-container[_ngcontent-%COMP%]   .knob-title[_ngcontent-%COMP%]{font-weight:500;color:#757575;white-space:nowrap}[_nghost-%COMP%]   .tb-knob[_ngcontent-%COMP%]   .knob[_ngcontent-%COMP%]   .minmax-container[_ngcontent-%COMP%]{position:absolute;right:18%;bottom:12%;left:18%;z-index:4;height:4%}[_nghost-%COMP%]   .tb-knob[_ngcontent-%COMP%]   .knob[_ngcontent-%COMP%]   .minmax-container[_ngcontent-%COMP%]   .minmax-label[_ngcontent-%COMP%]{font-weight:500;color:#757575;white-space:nowrap}[_nghost-%COMP%]   .tb-knob[_ngcontent-%COMP%]   .knob[_ngcontent-%COMP%]   .top-pointer-container[_ngcontent-%COMP%]{position:absolute;top:3.3%;right:3.3%;bottom:3.3%;left:3.3%;z-index:3;cursor:pointer!important}[_nghost-%COMP%]   .tb-knob[_ngcontent-%COMP%]   .knob[_ngcontent-%COMP%]   .top-pointer-container[_ngcontent-%COMP%]   .top-pointer[_ngcontent-%COMP%]{position:absolute;top:50%;left:22%;width:5%;height:5%;margin-top:-2.5%;cursor:pointer!important;content:"";background-color:#b5b5b5;border-radius:50%;box-shadow:1px 0 2px #040404}[_nghost-%COMP%]   .tb-knob[_ngcontent-%COMP%]   .knob[_ngcontent-%COMP%]   .top[_ngcontent-%COMP%]{position:absolute;top:3.3%;right:3.3%;bottom:3.3%;left:3.3%;z-index:2;cursor:pointer!important;background:url(knob.b7384766f829ebbada43.svg) no-repeat;background-size:contain}[_nghost-%COMP%]   .tb-knob[_ngcontent-%COMP%]   .knob[_ngcontent-%COMP%]   #text-measure[_ngcontent-%COMP%]{position:absolute;width:auto;height:auto;white-space:nowrap;visibility:hidden}']}),r}(r.a);!function(){a["\u0275setClassMetadata"](P,[{type:a.Component,args:[{selector:"tb-knob",templateUrl:"./knob.component.html",styleUrls:["./knob.component.scss"]}]}],(function(){return[{type:o.a},{type:d.Store}]}),{knobRef:[{type:a.ViewChild,args:["knob",{static:!0}]}],knobContainerRef:[{type:a.ViewChild,args:["knobContainer",{static:!0}]}],knobTopPointerContainerRef:[{type:a.ViewChild,args:["knobTopPointerContainer",{static:!0}]}],knobTopPointerRef:[{type:a.ViewChild,args:["knobTopPointer",{static:!0}]}],knobValueContainerRef:[{type:a.ViewChild,args:["knobValueContainer",{static:!0}]}],knobValueRef:[{type:a.ViewChild,args:["knobValue",{static:!0}]}],knobErrorContainerRef:[{type:a.ViewChild,args:["knobErrorContainer",{static:!0}]}],knobErrorRef:[{type:a.ViewChild,args:["knobError",{static:!0}]}],knobTitleContainerRef:[{type:a.ViewChild,args:["knobTitleContainer",{static:!0}]}],knobTitleRef:[{type:a.ViewChild,args:["knobTitle",{static:!0}]}],knobMinmaxContainerRef:[{type:a.ViewChild,args:["knobMinmaxContainer",{static:!0}]}],textMeasureRef:[{type:a.ViewChild,args:["textMeasure",{static:!0}]}],canvasBarElementRef:[{type:a.ViewChild,args:["canvasBar",{static:!0}]}],ctx:[{type:a.Input}]})}()}).call(this,n("xexB"))},hqxT:function(t,e,n){"use strict";n.d(e,"a",(function(){return M}));var i=n("mrSG"),a=n("fXoL"),r=n("FKr1"),o=n("0IaG"),s=n("3Pt+"),l=n("gmuX"),c=n("OiFK"),d=n("21Fy"),p=n("l7P3"),u=n("tyNb"),m=n("sYmb"),f=n("/t3+"),h=n("XiUz"),g=n("bTqV"),y=n("NFeN"),b=n("ofXK"),v=n("kmnG"),x=n("qFsG"),C=n("1jcm"),S=n("0WnP"),w=n("0Miz"),E=n("bv9b");function I(t,e){1&t&&a["\u0275\u0275element"](0,"mat-progress-bar",22)}function O(t,e){1&t&&(a["\u0275\u0275elementStart"](0,"mat-error"),a["\u0275\u0275text"](1),a["\u0275\u0275pipe"](2,"translate"),a["\u0275\u0275elementEnd"]()),2&t&&(a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](2,1,"alias.name-required")," "))}function T(t,e){1&t&&(a["\u0275\u0275elementStart"](0,"mat-error"),a["\u0275\u0275text"](1),a["\u0275\u0275pipe"](2,"translate"),a["\u0275\u0275elementEnd"]()),2&t&&(a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](2,1,"alias.duplicate-alias")," "))}var M=function(t){function e(e,n,i,a,r,o,l,c,d){var p=t.call(this,e,n,r)||this;if(p.store=e,p.router=n,p.data=i,p.errorStateMatcher=a,p.dialogRef=r,p.fb=o,p.utils=l,p.translate=c,p.entityService=d,p.submitted=!1,p.isAdd=i.isAdd,p.allowedEntityTypes=i.allowedEntityTypes,Array.isArray(i.entityAliases))p.entityAliases=i.entityAliases;else{p.entityAliases=[];for(var u=0,m=Object.keys(i.entityAliases);u<m.length;u++){var f=m[u];p.entityAliases.push(i.entityAliases[f])}}return p.isAdd&&!p.data.alias?p.alias={id:null,alias:"",filter:{resolveMultiple:!1}}:p.alias=i.alias,p.entityAliasFormGroup=p.fb.group({alias:[p.alias.alias,[p.validateDuplicateAliasName(),s.Validators.required]],resolveMultiple:[p.alias.filter.resolveMultiple],filter:[p.alias.filter,s.Validators.required]}),p}return Object(i.d)(e,t),e.prototype.validateDuplicateAliasName=function(){var t=this;return function(e){var n=e.value.trim(),i=t.entityAliases.find((function(t){return t.alias===n}));return i&&(t.isAdd||t.alias.id!==i.id)?{duplicateAliasName:{valid:!1}}:null}},e.prototype.ngOnInit=function(){},e.prototype.isErrorState=function(t,e){var n=this.errorStateMatcher.isErrorState(t,e),i=!!(t&&t.invalid&&this.submitted);return n||i},e.prototype.cancel=function(){this.dialogRef.close(null)},e.prototype.validate=function(){return this.entityService.resolveAliasFilter(this.alias.filter,null)},e.prototype.save=function(){var t=this;this.submitted=!0,this.alias.alias=this.entityAliasFormGroup.get("alias").value.trim(),this.alias.filter=this.entityAliasFormGroup.get("filter").value,this.alias.filter.resolveMultiple=this.entityAliasFormGroup.get("resolveMultiple").value,this.validate().subscribe((function(){t.isAdd&&(t.alias.id=t.utils.guid()),t.dialogRef.close(t.alias)}),(function(){t.entityAliasFormGroup.setErrors({noEntityMatched:!0});var e=t.entityAliasFormGroup.valueChanges.subscribe((function(){t.entityAliasFormGroup.setErrors(null),e.unsubscribe()}))}))},e.\u0275fac=function(t){return new(t||e)(a["\u0275\u0275directiveInject"](p.Store),a["\u0275\u0275directiveInject"](u.Router),a["\u0275\u0275directiveInject"](o.MAT_DIALOG_DATA),a["\u0275\u0275directiveInject"](r.ErrorStateMatcher,4),a["\u0275\u0275directiveInject"](o.MatDialogRef),a["\u0275\u0275directiveInject"](s.FormBuilder),a["\u0275\u0275directiveInject"](c.a),a["\u0275\u0275directiveInject"](m.TranslateService),a["\u0275\u0275directiveInject"](d.a))},e.\u0275cmp=a["\u0275\u0275defineComponent"]({type:e,selectors:[["tb-entity-alias-dialog"]],features:[a["\u0275\u0275ProvidersFeature"]([{provide:r.ErrorStateMatcher,useExisting:e}]),a["\u0275\u0275InheritDefinitionFeature"]],decls:37,vars:27,consts:[[2,"min-width","480px",3,"formGroup","ngSubmit"],["color","primary"],["fxFlex",""],["mat-icon-button","","type","button",3,"click"],[1,"material-icons"],["color","warn","mode","indeterminate",4,"ngIf"],["mat-dialog-content",""],[3,"disabled"],["fxFlex","","fxLayout","column"],["fxLayout","row"],["fxFlex","",1,"mat-block"],["translate",""],["matInput","","formControlName","alias","required",""],[4,"ngIf"],["fxLayout","column","fxLayoutAlign","start center",1,"tb-resolve-multiple-switch"],["translate","",1,"tb-small","resolve-multiple-label"],["formControlName","resolveMultiple",1,"resolve-multiple-switch"],["formControlName","filter",3,"resolveMultiple","allowedEntityTypes","resolveMultipleChanged"],[3,"error"],["mat-dialog-actions","","fxLayoutAlign","end center"],["mat-button","","color","primary","type","button","cdkFocusInitial","",3,"disabled","click"],["mat-raised-button","","color","primary","type","submit",3,"disabled"],["color","warn","mode","indeterminate"]],template:function(t,e){1&t&&(a["\u0275\u0275elementStart"](0,"form",0),a["\u0275\u0275listener"]("ngSubmit",(function(){return e.save()})),a["\u0275\u0275elementStart"](1,"mat-toolbar",1),a["\u0275\u0275elementStart"](2,"h2"),a["\u0275\u0275text"](3),a["\u0275\u0275pipe"](4,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](5,"span",2),a["\u0275\u0275elementStart"](6,"button",3),a["\u0275\u0275listener"]("click",(function(){return e.cancel()})),a["\u0275\u0275elementStart"](7,"mat-icon",4),a["\u0275\u0275text"](8,"close"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275template"](9,I,1,0,"mat-progress-bar",5),a["\u0275\u0275pipe"](10,"async"),a["\u0275\u0275elementStart"](11,"div",6),a["\u0275\u0275elementStart"](12,"fieldset",7),a["\u0275\u0275pipe"](13,"async"),a["\u0275\u0275elementStart"](14,"div",8),a["\u0275\u0275elementStart"](15,"div",9),a["\u0275\u0275elementStart"](16,"mat-form-field",10),a["\u0275\u0275elementStart"](17,"mat-label",11),a["\u0275\u0275text"](18,"alias.name"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](19,"input",12),a["\u0275\u0275template"](20,O,3,3,"mat-error",13),a["\u0275\u0275template"](21,T,3,3,"mat-error",13),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](22,"section",14),a["\u0275\u0275elementStart"](23,"label",15),a["\u0275\u0275text"](24,"alias.resolve-multiple"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](25,"mat-slide-toggle",16),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](26,"tb-entity-filter",17),a["\u0275\u0275listener"]("resolveMultipleChanged",(function(t){return e.entityAliasFormGroup.get("resolveMultiple").patchValue(t)})),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](27,"tb-error",18),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](28,"div",19),a["\u0275\u0275elementStart"](29,"button",20),a["\u0275\u0275listener"]("click",(function(){return e.cancel()})),a["\u0275\u0275pipe"](30,"async"),a["\u0275\u0275text"](31),a["\u0275\u0275pipe"](32,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](33,"button",21),a["\u0275\u0275pipe"](34,"async"),a["\u0275\u0275text"](35),a["\u0275\u0275pipe"](36,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()),2&t&&(a["\u0275\u0275property"]("formGroup",e.entityAliasFormGroup),a["\u0275\u0275advance"](3),a["\u0275\u0275textInterpolate"](a["\u0275\u0275pipeBind1"](4,13,e.isAdd?"alias.add":"alias.edit")),a["\u0275\u0275advance"](6),a["\u0275\u0275property"]("ngIf",a["\u0275\u0275pipeBind1"](10,15,e.isLoading$)),a["\u0275\u0275advance"](3),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](13,17,e.isLoading$)),a["\u0275\u0275advance"](8),a["\u0275\u0275property"]("ngIf",e.entityAliasFormGroup.get("alias").hasError("required")),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",e.entityAliasFormGroup.get("alias").hasError("duplicateAliasName")),a["\u0275\u0275advance"](5),a["\u0275\u0275property"]("resolveMultiple",e.entityAliasFormGroup.get("resolveMultiple").value)("allowedEntityTypes",e.allowedEntityTypes),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("error",e.entityAliasFormGroup.hasError("noEntityMatched")?e.translate.instant("alias.entity-filter-no-entity-matched"):""),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](30,19,e.isLoading$)),a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](32,21,"action.cancel")," "),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](34,23,e.isLoading$)||e.entityAliasFormGroup.invalid||!e.entityAliasFormGroup.dirty),a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](36,25,e.isAdd?"action.add":"action.save")," "))},directives:[s["\u0275angular_packages_forms_forms_y"],s.NgControlStatusGroup,s.FormGroupDirective,f.MatToolbar,h.b,g.MatButton,y.MatIcon,b.NgIf,o.MatDialogContent,h.f,v.MatFormField,v.MatLabel,m.TranslateDirective,x.MatInput,s.DefaultValueAccessor,s.NgControlStatus,s.FormControlName,s.RequiredValidator,h.e,C.MatSlideToggle,S.a,w.a,o.MatDialogActions,E.MatProgressBar,v.MatError],pipes:[m.TranslatePipe,b.AsyncPipe],styles:["[_nghost-%COMP%]   .tb-resolve-multiple-switch[_ngcontent-%COMP%]{padding-left:10px}[_nghost-%COMP%]   .tb-resolve-multiple-switch[_ngcontent-%COMP%]   .resolve-multiple-switch[_ngcontent-%COMP%]{margin:0}[_nghost-%COMP%]   .tb-resolve-multiple-switch[_ngcontent-%COMP%]   .resolve-multiple-label[_ngcontent-%COMP%]{margin:5px 0}"]}),e}(l.a);!function(){a["\u0275setClassMetadata"](M,[{type:a.Component,args:[{selector:"tb-entity-alias-dialog",templateUrl:"./entity-alias-dialog.component.html",providers:[{provide:r.ErrorStateMatcher,useExisting:M}],styleUrls:["./entity-alias-dialog.component.scss"]}]}],(function(){return[{type:p.Store},{type:u.Router},{type:void 0,decorators:[{type:a.Inject,args:[o.MAT_DIALOG_DATA]}]},{type:r.ErrorStateMatcher,decorators:[{type:a.SkipSelf}]},{type:o.MatDialogRef},{type:s.FormBuilder},{type:c.a},{type:m.TranslateService},{type:d.a}]}),null)}()},iOaI:function(t,e,n){"use strict";n.d(e,"a",(function(){return O}));var i=n("fXoL"),a=n("3Pt+"),r=n("vkgz"),o=n("JX91"),s=n("lJxs"),l=n("5+tZ"),c=n("8LU1"),d=n("21Fy"),p=n("l7P3"),u=n("sYmb"),m=n("kmnG"),f=n("qFsG"),h=n("/1cH"),g=n("ofXK"),y=n("bTqV"),b=n("NFeN"),v=n("FKr1"),x=n("d5eY"),C=["entityInfoInput"];function S(t,e){if(1&t){var n=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"button",8),i["\u0275\u0275listener"]("click",(function(){return i["\u0275\u0275restoreView"](n),i["\u0275\u0275nextContext"]().clear()})),i["\u0275\u0275elementStart"](1,"mat-icon",9),i["\u0275\u0275text"](2,"close"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()}}function w(t,e){if(1&t&&(i["\u0275\u0275elementStart"](0,"mat-option",10),i["\u0275\u0275element"](1,"span",11),i["\u0275\u0275pipe"](2,"highlight"),i["\u0275\u0275elementEnd"]()),2&t){var n=e.$implicit,a=i["\u0275\u0275nextContext"]();i["\u0275\u0275property"]("value",n),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("innerHTML",i["\u0275\u0275pipeBind2"](2,2,n.name,a.searchText),i["\u0275\u0275sanitizeHtml"])}}var E=function(t){return{entity:t}};function I(t,e){if(1&t&&(i["\u0275\u0275elementStart"](0,"mat-option",10),i["\u0275\u0275elementStart"](1,"span"),i["\u0275\u0275text"](2),i["\u0275\u0275pipe"](3,"async"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()),2&t){var n=i["\u0275\u0275nextContext"]();i["\u0275\u0275property"]("value",null),i["\u0275\u0275advance"](2),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](3,2,n.translate.get("entity.no-entities-matching",i["\u0275\u0275pureFunction1"](4,E,n.searchText)))," ")}}var O=function(){function t(t,e,n,i){this.store=t,this.translate=e,this.entityService=n,this.fb=i,this.searchText="",this.propagateChange=function(t){},this.selectEntityInfoFormGroup=this.fb.group({entityInfo:[null]})}return Object.defineProperty(t.prototype,"required",{get:function(){return this.requiredValue},set:function(t){this.requiredValue=Object(c.coerceBooleanProperty)(t)},enumerable:!1,configurable:!0}),t.prototype.registerOnChange=function(t){this.propagateChange=t},t.prototype.registerOnTouched=function(t){},t.prototype.ngOnInit=function(){var t=this;this.filteredEntityInfos=this.selectEntityInfoFormGroup.get("entityInfo").valueChanges.pipe(Object(r.a)((function(e){var n;n="string"!=typeof e&&e?e:null,t.updateView(n)})),Object(o.a)(""),Object(s.a)((function(t){return t?"string"==typeof t?t:t.name:""})),Object(l.b)((function(e){return t.fetchEntityInfos(e)})))},t.prototype.ngAfterViewInit=function(){},t.prototype.setDisabledState=function(t){this.disabled=t},t.prototype.writeValue=function(t){this.searchText="",null!=t?(this.modelValue=t,this.selectEntityInfoFormGroup.get("entityInfo").patchValue(t,{emitEvent:!0})):(this.modelValue=null,this.selectEntityInfoFormGroup.get("entityInfo").patchValue(null,{emitEvent:!0}))},t.prototype.updateView=function(t){this.modelValue!==t&&(this.modelValue=t,this.propagateChange(this.modelValue))},t.prototype.displayEntityInfoFn=function(t){return t?t.name:void 0},t.prototype.fetchEntityInfos=function(t){return this.searchText=t,this.getEntityInfos(this.searchText).pipe(Object(s.a)((function(t){return t.data})))},t.prototype.getEntityInfos=function(t){return this.entityService.findEntityInfosByFilterAndName(this.entityFilter,t,{ignoreLoading:!0})},t.prototype.clear=function(){var t=this;this.selectEntityInfoFormGroup.get("entityInfo").patchValue(null,{emitEvent:!0}),setTimeout((function(){t.entityInfoInput.nativeElement.blur(),t.entityInfoInput.nativeElement.focus()}),0)},t.\u0275fac=function(e){return new(e||t)(i["\u0275\u0275directiveInject"](p.Store),i["\u0275\u0275directiveInject"](u.TranslateService),i["\u0275\u0275directiveInject"](d.a),i["\u0275\u0275directiveInject"](a.FormBuilder))},t.\u0275cmp=i["\u0275\u0275defineComponent"]({type:t,selectors:[["tb-aliases-entity-autocomplete"]],viewQuery:function(t,e){var n;(1&t&&i["\u0275\u0275staticViewQuery"](C,!0),2&t)&&(i["\u0275\u0275queryRefresh"](n=i["\u0275\u0275loadQuery"]())&&(e.entityInfoInput=n.first))},inputs:{alias:"alias",entityFilter:"entityFilter",required:"required",disabled:"disabled"},features:[i["\u0275\u0275ProvidersFeature"]([{provide:a.NG_VALUE_ACCESSOR,useExisting:Object(i.forwardRef)((function(){return t})),multi:!0}])],decls:10,vars:12,consts:[[1,"mat-block",3,"formGroup"],["matInput","","type","text","formControlName","entityInfo",3,"placeholder","required","matAutocomplete"],["entityInfoInput",""],["type","button","matSuffix","","mat-button","","mat-icon-button","","aria-label","Clear",3,"click",4,"ngIf"],[1,"tb-autocomplete",3,"displayWith"],["entityInfoAutocomplete","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],[3,"value",4,"ngIf"],["type","button","matSuffix","","mat-button","","mat-icon-button","","aria-label","Clear",3,"click"],[1,"material-icons"],[3,"value"],[3,"innerHTML"]],template:function(t,e){if(1&t&&(i["\u0275\u0275elementStart"](0,"mat-form-field",0),i["\u0275\u0275element"](1,"input",1,2),i["\u0275\u0275template"](3,S,3,0,"button",3),i["\u0275\u0275elementStart"](4,"mat-autocomplete",4,5),i["\u0275\u0275template"](6,w,3,5,"mat-option",6),i["\u0275\u0275pipe"](7,"async"),i["\u0275\u0275template"](8,I,4,6,"mat-option",7),i["\u0275\u0275pipe"](9,"async"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()),2&t){var n,a=i["\u0275\u0275reference"](5);i["\u0275\u0275property"]("formGroup",e.selectEntityInfoFormGroup),i["\u0275\u0275advance"](1),i["\u0275\u0275propertyInterpolate"]("placeholder",e.alias),i["\u0275\u0275property"]("required",e.required)("matAutocomplete",a),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngIf",e.selectEntityInfoFormGroup.get("entityInfo").value&&!e.disabled),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("displayWith",e.displayEntityInfoFn),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngForOf",i["\u0275\u0275pipeBind1"](7,8,e.filteredEntityInfos)),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngIf",!(null!=(n=i["\u0275\u0275pipeBind1"](9,10,e.filteredEntityInfos))&&n.length))}},directives:[m.MatFormField,a.NgControlStatusGroup,a.FormGroupDirective,f.MatInput,a.DefaultValueAccessor,h.MatAutocompleteTrigger,a.NgControlStatus,a.FormControlName,a.RequiredValidator,g.NgIf,h.MatAutocomplete,g.NgForOf,y.MatButton,m.MatSuffix,b.MatIcon,v.MatOption],pipes:[g.AsyncPipe,x.a],encapsulation:2}),t}();!function(){i["\u0275setClassMetadata"](O,[{type:i.Component,args:[{selector:"tb-aliases-entity-autocomplete",templateUrl:"./aliases-entity-autocomplete.component.html",styleUrls:[],providers:[{provide:a.NG_VALUE_ACCESSOR,useExisting:Object(i.forwardRef)((function(){return O})),multi:!0}]}]}],(function(){return[{type:p.Store},{type:u.TranslateService},{type:d.a},{type:a.FormBuilder}]}),{alias:[{type:i.Input}],entityFilter:[{type:i.Input}],required:[{type:i.Input}],disabled:[{type:i.Input}],entityInfoInput:[{type:i.ViewChild,args:["entityInfoInput",{static:!0}]}]})}()},igfJ:function(t,e,n){"use strict";n.d(e,"a",(function(){return C}));var i=n("fXoL"),a=n("Q7pZ"),r=n("XOa3"),o=(n("/Bgp"),n("8Mhd"),n("mrSG")),s=n("qxrw"),l=n("U3y+"),c=n("4r/P"),d=n("5pw5"),p=function(t){function e(e,n,i,a,o,d,p,u,m){void 0===o&&(o=r.c.TENANT),void 0===d&&(d=null),void 0===p&&(p=null),void 0===u&&(u=null),void 0===m&&(m=!0);var f=t.call(this)||this;return f.auditLogService=e,f.translate=n,f.datePipe=i,f.dialog=a,f.auditLogMode=o,f.entityId=d,f.userId=p,f.customerId=u,f.loadDataOnInit=m,f.tableTitle="",f.useTimePageLink=!0,f.detailsPanelEnabled=!1,f.selectionEnabled=!1,f.searchEnabled=!0,f.addEnabled=!1,f.entitiesDeleteEnabled=!1,f.actionsColumnTitle="audit-log.details",f.entityTranslations={noEntities:"audit-log.no-audit-logs-prompt",search:"audit-log.search"},f.entityResources={},f.entitiesFetchFunction=function(t){return f.fetchAuditLogs(t)},f.defaultSortOrder={property:"createdTime",direction:c.a.DESC},f.columns.push(new s.a("createdTime","audit-log.timestamp",f.datePipe,"150px")),f.auditLogMode!==r.c.ENTITY&&f.columns.push(new s.c("entityType","audit-log.entity-type","20%",(function(t){return n.instant(l.d.get(t.entityId.entityType).type)})),new s.c("entityName","audit-log.entity-name","20%")),f.auditLogMode!==r.c.USER&&f.columns.push(new s.c("userName","audit-log.user","33%")),f.columns.push(new s.c("actionType","audit-log.type","33%",(function(t){return n.instant(r.e.get(t.actionType))})),new s.c("actionStatus","audit-log.status","33%",(function(t){return n.instant(r.d.get(t.actionStatus))}))),f.cellActionDescriptors.push({name:f.translate.instant("audit-log.details"),icon:"more_horiz",isEnabled:function(){return!0},onAction:function(t,e){return f.showAuditLogDetails(e)}}),f}return Object(o.d)(e,t),e.prototype.fetchAuditLogs=function(t){switch(this.auditLogMode){case r.c.TENANT:return this.auditLogService.getAuditLogs(t);case r.c.ENTITY:return this.auditLogService.getAuditLogsByEntityId(this.entityId,t);case r.c.USER:return this.auditLogService.getAuditLogsByUserId(this.userId.id,t);case r.c.CUSTOMER:return this.auditLogService.getAuditLogsByCustomerId(this.customerId.id,t)}},e.prototype.showAuditLogDetails=function(t){this.dialog.open(d.a,{disableClose:!0,panelClass:["tb-dialog","tb-fullscreen-dialog"],data:{auditLog:t}})},e}(s.d),u=n("UaJx"),m=n("zp9Z"),f=n("C/rb"),h=n("sYmb"),g=n("ofXK"),y=n("0IaG"),b=n("l7P3"),v=n("znSr"),x=function(t){return{"tb-details-mode":t}},C=function(){function t(t,e,n,i,a){this.auditLogService=t,this.translate=e,this.datePipe=n,this.dialog=i,this.store=a,this.activeValue=!1,this.dirtyValue=!1}return Object.defineProperty(t.prototype,"active",{set:function(t){this.activeValue!==t&&(this.activeValue=t,this.activeValue&&this.dirtyValue&&(this.dirtyValue=!1,this.entitiesTable.updateData()))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"entityId",{set:function(t){this.entityIdValue=t,this.auditLogTableConfig&&this.auditLogTableConfig.entityId!==t&&(this.auditLogTableConfig.entityId=t,this.entitiesTable.resetSortAndFilter(this.activeValue),this.activeValue||(this.dirtyValue=!0))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"userId",{set:function(t){this.userIdValue=t,this.auditLogTableConfig&&this.auditLogTableConfig.userId!==t&&(this.auditLogTableConfig.userId=t,this.entitiesTable.resetSortAndFilter(this.activeValue),this.activeValue||(this.dirtyValue=!0))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"customerId",{set:function(t){this.customerIdValue=t,this.auditLogTableConfig&&this.auditLogTableConfig.customerId!==t&&(this.auditLogTableConfig.customerId=t,this.entitiesTable.resetSortAndFilter(this.activeValue),this.activeValue||(this.dirtyValue=!0))},enumerable:!1,configurable:!0}),t.prototype.ngOnInit=function(){var t=this.activeValue;(this.dirtyValue=!this.activeValue,this.auditLogMode)||(Object(f.b)(this.store).authority===m.a.TENANT_ADMIN&&(this.auditLogMode=r.c.TENANT),t=!0);this.auditLogTableConfig=new p(this.auditLogService,this.translate,this.datePipe,this.dialog,this.auditLogMode,this.entityIdValue,this.userIdValue,this.customerIdValue,t)},t.\u0275fac=function(e){return new(e||t)(i["\u0275\u0275directiveInject"](a.a),i["\u0275\u0275directiveInject"](h.TranslateService),i["\u0275\u0275directiveInject"](g.DatePipe),i["\u0275\u0275directiveInject"](y.MatDialog),i["\u0275\u0275directiveInject"](b.Store))},t.\u0275cmp=i["\u0275\u0275defineComponent"]({type:t,selectors:[["tb-audit-log-table"]],viewQuery:function(t,e){var n;(1&t&&i["\u0275\u0275staticViewQuery"](u.a,!0),2&t)&&(i["\u0275\u0275queryRefresh"](n=i["\u0275\u0275loadQuery"]())&&(e.entitiesTable=n.first))},inputs:{auditLogMode:"auditLogMode",detailsMode:"detailsMode",active:"active",entityId:"entityId",userId:"userId",customerId:"customerId"},decls:1,vars:4,consts:[[3,"entitiesTableConfig","ngClass"]],template:function(t,e){1&t&&i["\u0275\u0275element"](0,"tb-entities-table",0),2&t&&i["\u0275\u0275property"]("entitiesTableConfig",e.auditLogTableConfig)("ngClass",i["\u0275\u0275pureFunction1"](2,x,e.detailsMode))},directives:[u.a,g.NgClass,v.b],styles:["[_nghost-%COMP%]     tb-entities-table.tb-details-mode .mat-drawer-container{background-color:#fff}"]}),t}();!function(){i["\u0275setClassMetadata"](C,[{type:i.Component,args:[{selector:"tb-audit-log-table",templateUrl:"./audit-log-table.component.html",styleUrls:["./audit-log-table.component.scss"]}]}],(function(){return[{type:a.a},{type:h.TranslateService},{type:g.DatePipe},{type:y.MatDialog},{type:b.Store}]}),{auditLogMode:[{type:i.Input}],detailsMode:[{type:i.Input}],active:[{type:i.Input}],entityId:[{type:i.Input}],userId:[{type:i.Input}],customerId:[{type:i.Input}],entitiesTable:[{type:i.ViewChild,args:[u.a,{static:!0}]}]})}()},jhTr:function(t,e,n){"use strict";n.d(e,"a",(function(){return S}));var i=n("mrSG"),a=n("fXoL"),r=n("FKr1"),o=n("0IaG"),s=n("3Pt+"),l=n("gmuX"),c=n("leY2"),d=n("l7P3"),p=n("tyNb"),u=n("/t3+"),m=n("XiUz"),f=n("bTqV"),h=n("NFeN"),g=n("ofXK"),y=n("bv9b"),b=n("sYmb"),v=["dataKeyConfig"];function x(t,e){1&t&&a["\u0275\u0275element"](0,"mat-progress-bar",13)}function C(t,e){1&t&&a["\u0275\u0275element"](0,"div",14)}var S=function(t){function e(e,n,i,a,r,o){var s=t.call(this,e,n,r)||this;return s.store=e,s.router=n,s.data=i,s.errorStateMatcher=a,s.dialogRef=r,s.fb=o,s.submitted=!1,s}return Object(i.d)(e,t),e.prototype.ngOnInit=function(){this.dataKeyFormGroup=this.fb.group({dataKey:[this.data.dataKey,[s.Validators.required]]})},e.prototype.isErrorState=function(t,e){var n=this.errorStateMatcher.isErrorState(t,e),i=!!(t&&t.invalid&&this.submitted);return n||i},e.prototype.cancel=function(){this.dialogRef.close(null)},e.prototype.save=function(){if(this.submitted=!0,this.dataKeyConfig.validateOnSubmit(),this.dataKeyFormGroup.valid){var t=this.dataKeyFormGroup.get("dataKey").value;this.dialogRef.close(t)}},e.\u0275fac=function(t){return new(t||e)(a["\u0275\u0275directiveInject"](d.Store),a["\u0275\u0275directiveInject"](p.Router),a["\u0275\u0275directiveInject"](o.MAT_DIALOG_DATA),a["\u0275\u0275directiveInject"](r.ErrorStateMatcher,4),a["\u0275\u0275directiveInject"](o.MatDialogRef),a["\u0275\u0275directiveInject"](s.FormBuilder))},e.\u0275cmp=a["\u0275\u0275defineComponent"]({type:e,selectors:[["tb-data-key-config-dialog"]],viewQuery:function(t,e){var n;(1&t&&a["\u0275\u0275staticViewQuery"](v,!0),2&t)&&(a["\u0275\u0275queryRefresh"](n=a["\u0275\u0275loadQuery"]())&&(e.dataKeyConfig=n.first))},features:[a["\u0275\u0275ProvidersFeature"]([{provide:r.ErrorStateMatcher,useExisting:e}]),a["\u0275\u0275InheritDefinitionFeature"]],decls:25,vars:26,consts:[[2,"min-width","480px",3,"formGroup","ngSubmit"],["color","primary"],["fxFlex",""],["mat-button","","mat-icon-button","","type","button",3,"click"],[1,"material-icons"],["color","warn","mode","indeterminate",4,"ngIf"],["style","height: 4px;",4,"ngIf"],["mat-dialog-content",""],["formControlName","dataKey",3,"dataKeySettingsSchema","entityAliasId","showPostProcessing","callbacks"],["dataKeyConfig",""],["mat-dialog-actions","","fxLayoutAlign","end center"],["mat-button","","color","primary","type","button","cdkFocusInitial","",3,"disabled","click"],["mat-raised-button","","color","primary","type","submit",3,"disabled"],["color","warn","mode","indeterminate"],[2,"height","4px"]],template:function(t,e){1&t&&(a["\u0275\u0275elementStart"](0,"form",0),a["\u0275\u0275listener"]("ngSubmit",(function(){return e.save()})),a["\u0275\u0275elementStart"](1,"mat-toolbar",1),a["\u0275\u0275elementStart"](2,"h2"),a["\u0275\u0275text"](3),a["\u0275\u0275pipe"](4,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](5,"span",2),a["\u0275\u0275elementStart"](6,"button",3),a["\u0275\u0275listener"]("click",(function(){return e.cancel()})),a["\u0275\u0275elementStart"](7,"mat-icon",4),a["\u0275\u0275text"](8,"close"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275template"](9,x,1,0,"mat-progress-bar",5),a["\u0275\u0275pipe"](10,"async"),a["\u0275\u0275template"](11,C,1,0,"div",6),a["\u0275\u0275pipe"](12,"async"),a["\u0275\u0275elementStart"](13,"div",7),a["\u0275\u0275element"](14,"tb-data-key-config",8,9),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](16,"div",10),a["\u0275\u0275elementStart"](17,"button",11),a["\u0275\u0275listener"]("click",(function(){return e.cancel()})),a["\u0275\u0275pipe"](18,"async"),a["\u0275\u0275text"](19),a["\u0275\u0275pipe"](20,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](21,"button",12),a["\u0275\u0275pipe"](22,"async"),a["\u0275\u0275text"](23),a["\u0275\u0275pipe"](24,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()),2&t&&(a["\u0275\u0275property"]("formGroup",e.dataKeyFormGroup),a["\u0275\u0275advance"](3),a["\u0275\u0275textInterpolate"](a["\u0275\u0275pipeBind1"](4,12,"datakey.configuration")),a["\u0275\u0275advance"](6),a["\u0275\u0275property"]("ngIf",a["\u0275\u0275pipeBind1"](10,14,e.isLoading$)),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("ngIf",!a["\u0275\u0275pipeBind1"](12,16,e.isLoading$)),a["\u0275\u0275advance"](3),a["\u0275\u0275property"]("dataKeySettingsSchema",e.data.dataKeySettingsSchema)("entityAliasId",e.data.entityAliasId)("showPostProcessing",e.data.showPostProcessing)("callbacks",e.data.callbacks),a["\u0275\u0275advance"](3),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](18,18,e.isLoading$)),a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](20,20,"action.cancel")," "),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](22,22,e.isLoading$)||e.dataKeyFormGroup.invalid||!e.dataKeyFormGroup.dirty),a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](24,24,"action.save")," "))},directives:[s["\u0275angular_packages_forms_forms_y"],s.NgControlStatusGroup,s.FormGroupDirective,u.MatToolbar,m.b,f.MatButton,h.MatIcon,g.NgIf,o.MatDialogContent,c.a,s.NgControlStatus,s.FormControlName,o.MatDialogActions,m.e,y.MatProgressBar],pipes:[b.TranslatePipe,g.AsyncPipe],styles:["[_nghost-%COMP%]   .mat-dialog-content[_ngcontent-%COMP%]{padding:0!important;margin:0!important;overflow:hidden}"]}),e}(l.a);!function(){a["\u0275setClassMetadata"](S,[{type:a.Component,args:[{selector:"tb-data-key-config-dialog",templateUrl:"./data-key-config-dialog.component.html",providers:[{provide:r.ErrorStateMatcher,useExisting:S}],styleUrls:["./data-key-config-dialog.component.scss"]}]}],(function(){return[{type:d.Store},{type:p.Router},{type:void 0,decorators:[{type:a.Inject,args:[o.MAT_DIALOG_DATA]}]},{type:r.ErrorStateMatcher,decorators:[{type:a.SkipSelf}]},{type:o.MatDialogRef},{type:s.FormBuilder}]}),{dataKeyConfig:[{type:a.ViewChild,args:["dataKeyConfig",{static:!0}]}]})}()},jkF6:function(t,e,n){"use strict";n.d(e,"a",(function(){return M}));var i=n("mrSG"),a=n("fXoL"),r=n("FKr1"),o=n("0IaG"),s=n("3Pt+"),l=n("7JTo"),c=n("Bjlt"),d=n("cp0P"),p=n("H3So"),u=n("gmuX"),m=n("l7P3"),f=n("tyNb"),h=n("/t3+"),g=n("XiUz"),y=n("bTqV"),b=n("NFeN"),v=n("ofXK"),x=n("IVsW"),C=n("91Tk"),S=n("bv9b"),w=n("sYmb"),E=["additionalInfoEdit"];function I(t,e){1&t&&a["\u0275\u0275element"](0,"mat-progress-bar",17)}function O(t,e){1&t&&a["\u0275\u0275element"](0,"div",18)}function T(t,e){1&t&&(a["\u0275\u0275elementStart"](0,"div",19),a["\u0275\u0275elementStart"](1,"div",20),a["\u0275\u0275text"](2,"relation.invalid-additional-info"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]())}var M=function(t){function e(e,n,i,a,r,o,s){var c=t.call(this,e,n,o)||this;return c.store=e,c.router=n,c.data=i,c.entityRelationService=a,c.errorStateMatcher=r,c.dialogRef=o,c.fb=s,c.entitySearchDirection=l.b,c.submitted=!1,c.isAdd=i.isAdd,c.direction=i.direction,c}return Object(i.d)(e,t),e.prototype.ngOnInit=function(){var t=this;this.relationFormGroup=this.fb.group({type:[this.isAdd?l.a:this.data.relation.type,[s.Validators.required]],targetEntityIds:[this.isAdd?null:[this.direction===l.b.FROM?this.data.relation.to:this.data.relation.from],[s.Validators.required]]}),this.additionalInfo=new s.FormControl(this.data.relation.additionalInfo?Object(i.a)({},this.data.relation.additionalInfo):null),this.isAdd||(this.relationFormGroup.get("type").disable(),this.relationFormGroup.get("targetEntityIds").disable()),this.additionalInfo.valueChanges.subscribe((function(){t.submitted=!1}))},e.prototype.isErrorState=function(t,e){var n=this.errorStateMatcher.isErrorState(t,e),i=!!(t&&t.invalid&&this.submitted);return n||i},e.prototype.cancel=function(){this.dialogRef.close(!1)},e.prototype.save=function(){var t=this;if(this.submitted=!0,this.additionalInfoEdit.validateOnSubmit(),!this.relationFormGroup.invalid&&!this.additionalInfo.invalid)if(this.isAdd){var e=[],n=this.relationFormGroup.get("type").value;this.relationFormGroup.get("targetEntityIds").value.forEach((function(i){var a={type:n,additionalInfo:t.additionalInfo.value,typeGroup:l.d.COMMON};t.direction===l.b.FROM?(a.from=t.data.relation.from,a.to=i):(a.from=i,a.to=t.data.relation.to),e.push(t.entityRelationService.saveRelation(a))})),Object(d.a)(e).subscribe((function(){t.dialogRef.close(!0)}))}else{var a=Object(i.a)({},this.data.relation);a.additionalInfo=this.additionalInfo.value,this.entityRelationService.saveRelation(a).subscribe((function(){t.dialogRef.close(!0)}))}},e.\u0275fac=function(t){return new(t||e)(a["\u0275\u0275directiveInject"](m.Store),a["\u0275\u0275directiveInject"](f.Router),a["\u0275\u0275directiveInject"](o.MAT_DIALOG_DATA),a["\u0275\u0275directiveInject"](c.a),a["\u0275\u0275directiveInject"](r.ErrorStateMatcher,4),a["\u0275\u0275directiveInject"](o.MatDialogRef),a["\u0275\u0275directiveInject"](s.FormBuilder))},e.\u0275cmp=a["\u0275\u0275defineComponent"]({type:e,selectors:[["tb-relation-dialog"]],viewQuery:function(t,e){var n;(1&t&&a["\u0275\u0275staticViewQuery"](E,!0),2&t)&&(a["\u0275\u0275queryRefresh"](n=a["\u0275\u0275loadQuery"]())&&(e.additionalInfoEdit=n.first))},features:[a["\u0275\u0275ProvidersFeature"]([{provide:r.ErrorStateMatcher,useExisting:e}]),a["\u0275\u0275InheritDefinitionFeature"]],decls:35,vars:33,consts:[[2,"min-width","600px",3,"formGroup","ngSubmit"],["fxLayout","row","color","primary"],["fxFlex",""],["mat-button","","mat-icon-button","","type","button",3,"click"],[1,"material-icons"],["color","warn","mode","indeterminate",4,"ngIf"],["style","height: 4px;",4,"ngIf"],["mat-dialog-content",""],[3,"disabled"],["formControlName","type","required","true"],["formControlName","targetEntityIds","required","true"],[3,"formControl","label"],["additionalInfoEdit",""],["class","tb-error-messages","role","alert",4,"ngIf"],["mat-dialog-actions","","fxLayout","row"],["mat-button","","color","primary","type","button","cdkFocusInitial","",3,"disabled","click"],["mat-button","","mat-raised-button","","color","primary","type","submit",3,"disabled"],["color","warn","mode","indeterminate"],[2,"height","4px"],["role","alert",1,"tb-error-messages"],["translate","",1,"tb-error-message"]],template:function(t,e){1&t&&(a["\u0275\u0275elementStart"](0,"form",0),a["\u0275\u0275listener"]("ngSubmit",(function(){return e.save()})),a["\u0275\u0275elementStart"](1,"mat-toolbar",1),a["\u0275\u0275elementStart"](2,"h2"),a["\u0275\u0275text"](3),a["\u0275\u0275pipe"](4,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](5,"span",2),a["\u0275\u0275elementStart"](6,"button",3),a["\u0275\u0275listener"]("click",(function(){return e.cancel()})),a["\u0275\u0275elementStart"](7,"mat-icon",4),a["\u0275\u0275text"](8,"close"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275template"](9,I,1,0,"mat-progress-bar",5),a["\u0275\u0275pipe"](10,"async"),a["\u0275\u0275template"](11,O,1,0,"div",6),a["\u0275\u0275pipe"](12,"async"),a["\u0275\u0275elementStart"](13,"div",7),a["\u0275\u0275elementStart"](14,"fieldset",8),a["\u0275\u0275pipe"](15,"async"),a["\u0275\u0275element"](16,"tb-relation-type-autocomplete",9),a["\u0275\u0275elementStart"](17,"small"),a["\u0275\u0275text"](18),a["\u0275\u0275pipe"](19,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](20,"tb-entity-list-select",10),a["\u0275\u0275element"](21,"tb-json-object-edit",11,12),a["\u0275\u0275pipe"](23,"translate"),a["\u0275\u0275template"](24,T,3,0,"div",13),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](25,"div",14),a["\u0275\u0275element"](26,"span",2),a["\u0275\u0275elementStart"](27,"button",15),a["\u0275\u0275listener"]("click",(function(){return e.cancel()})),a["\u0275\u0275pipe"](28,"async"),a["\u0275\u0275text"](29),a["\u0275\u0275pipe"](30,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](31,"button",16),a["\u0275\u0275pipe"](32,"async"),a["\u0275\u0275text"](33),a["\u0275\u0275pipe"](34,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()),2&t&&(a["\u0275\u0275property"]("formGroup",e.relationFormGroup),a["\u0275\u0275advance"](3),a["\u0275\u0275textInterpolate"](a["\u0275\u0275pipeBind1"](4,13,e.isAdd?"relation.add":"relation.edit")),a["\u0275\u0275advance"](6),a["\u0275\u0275property"]("ngIf",a["\u0275\u0275pipeBind1"](10,15,e.isLoading$)),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("ngIf",!a["\u0275\u0275pipeBind1"](12,17,e.isLoading$)),a["\u0275\u0275advance"](3),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](15,19,e.isLoading$)),a["\u0275\u0275advance"](4),a["\u0275\u0275textInterpolate"](a["\u0275\u0275pipeBind1"](19,21,e.direction===e.entitySearchDirection.FROM?"relation.to-entity":"relation.from-entity")),a["\u0275\u0275advance"](3),a["\u0275\u0275propertyInterpolate"]("label",a["\u0275\u0275pipeBind1"](23,23,"relation.additional-info")),a["\u0275\u0275property"]("formControl",e.additionalInfo),a["\u0275\u0275advance"](3),a["\u0275\u0275property"]("ngIf",e.submitted&&e.additionalInfo.invalid),a["\u0275\u0275advance"](3),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](28,25,e.isLoading$)),a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](30,27,"action.cancel")," "),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](32,29,e.isLoading$)||e.relationFormGroup.invalid||!(e.relationFormGroup.dirty||e.additionalInfo.dirty)),a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](34,31,e.isAdd?"action.add":"action.save")," "))},directives:[s["\u0275angular_packages_forms_forms_y"],s.NgControlStatusGroup,s.FormGroupDirective,h.MatToolbar,g.f,g.b,y.MatButton,b.MatIcon,v.NgIf,o.MatDialogContent,x.a,s.NgControlStatus,s.FormControlName,s.RequiredValidator,C.a,p.a,s.FormControlDirective,o.MatDialogActions,S.MatProgressBar,w.TranslateDirective],pipes:[w.TranslatePipe,v.AsyncPipe],styles:[""]}),e}(u.a);!function(){a["\u0275setClassMetadata"](M,[{type:a.Component,args:[{selector:"tb-relation-dialog",templateUrl:"./relation-dialog.component.html",providers:[{provide:r.ErrorStateMatcher,useExisting:M}],styleUrls:["./relation-dialog.component.scss"]}]}],(function(){return[{type:m.Store},{type:f.Router},{type:void 0,decorators:[{type:a.Inject,args:[o.MAT_DIALOG_DATA]}]},{type:c.a},{type:r.ErrorStateMatcher,decorators:[{type:a.SkipSelf}]},{type:o.MatDialogRef},{type:s.FormBuilder}]}),{additionalInfoEdit:[{type:a.ViewChild,args:["additionalInfoEdit",{static:!0}]}]})}()},kHY0:function(t,e,n){"use strict";n.d(e,"a",(function(){return O}));var i=n("mrSG"),a=n("fXoL"),r=n("FKr1"),o=n("0IaG"),s=n("3Pt+"),l=n("gmuX"),c=n("OiFK"),d=n("l7P3"),p=n("tyNb"),u=n("sYmb"),m=n("/t3+"),f=n("XiUz"),h=n("bTqV"),g=n("NFeN"),y=n("ofXK"),b=n("kmnG"),v=n("qFsG"),x=n("1jcm"),C=n("mcsV"),S=n("bv9b");function w(t,e){1&t&&a["\u0275\u0275element"](0,"mat-progress-bar",21)}function E(t,e){1&t&&(a["\u0275\u0275elementStart"](0,"mat-error"),a["\u0275\u0275text"](1),a["\u0275\u0275pipe"](2,"translate"),a["\u0275\u0275elementEnd"]()),2&t&&(a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](2,1,"filter.name-required")," "))}function I(t,e){1&t&&(a["\u0275\u0275elementStart"](0,"mat-error"),a["\u0275\u0275text"](1),a["\u0275\u0275pipe"](2,"translate"),a["\u0275\u0275elementEnd"]()),2&t&&(a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](2,1,"filter.duplicate-filter")," "))}var O=function(t){function e(e,n,i,a,r,o,l,c){var d=t.call(this,e,n,r)||this;if(d.store=e,d.router=n,d.data=i,d.errorStateMatcher=a,d.dialogRef=r,d.fb=o,d.utils=l,d.translate=c,d.submitted=!1,d.isAdd=i.isAdd,Array.isArray(i.filters))d.filters=i.filters;else{d.filters=[];for(var p=0,u=Object.keys(i.filters);p<u.length;p++){var m=u[p];d.filters.push(i.filters[m])}}return d.isAdd&&!d.data.filter?d.filter={id:null,filter:"",keyFilters:[],editable:!0}:d.filter=i.filter,d.filterFormGroup=d.fb.group({filter:[d.filter.filter,[d.validateDuplicateFilterName(),s.Validators.required]],editable:[d.filter.editable],keyFilters:[d.filter.keyFilters,s.Validators.required]}),d}return Object(i.d)(e,t),e.prototype.validateDuplicateFilterName=function(){var t=this;return function(e){var n=e.value.trim(),i=t.filters.find((function(t){return t.filter===n}));return i&&(t.isAdd||t.filter.id!==i.id)?{duplicateFilterName:{valid:!1}}:null}},e.prototype.ngOnInit=function(){},e.prototype.isErrorState=function(t,e){var n=this.errorStateMatcher.isErrorState(t,e),i=!!(t&&t.invalid&&this.submitted);return n||i},e.prototype.cancel=function(){this.dialogRef.close(null)},e.prototype.save=function(){this.submitted=!0,this.filter.filter=this.filterFormGroup.get("filter").value.trim(),this.filter.editable=this.filterFormGroup.get("editable").value,this.filter.keyFilters=this.filterFormGroup.get("keyFilters").value,this.isAdd&&(this.filter.id=this.utils.guid()),this.dialogRef.close(this.filter)},e.\u0275fac=function(t){return new(t||e)(a["\u0275\u0275directiveInject"](d.Store),a["\u0275\u0275directiveInject"](p.Router),a["\u0275\u0275directiveInject"](o.MAT_DIALOG_DATA),a["\u0275\u0275directiveInject"](r.ErrorStateMatcher,4),a["\u0275\u0275directiveInject"](o.MatDialogRef),a["\u0275\u0275directiveInject"](s.FormBuilder),a["\u0275\u0275directiveInject"](c.a),a["\u0275\u0275directiveInject"](u.TranslateService))},e.\u0275cmp=a["\u0275\u0275defineComponent"]({type:e,selectors:[["tb-filter-dialog"]],features:[a["\u0275\u0275ProvidersFeature"]([{provide:r.ErrorStateMatcher,useExisting:e}]),a["\u0275\u0275InheritDefinitionFeature"]],decls:36,vars:24,consts:[[2,"width","700px",3,"formGroup","ngSubmit"],["color","primary"],["fxFlex",""],["mat-icon-button","","type","button",3,"click"],[1,"material-icons"],["color","warn","mode","indeterminate",4,"ngIf"],["mat-dialog-content",""],[3,"disabled"],["fxFlex","","fxLayout","column"],["fxLayout","row"],["fxFlex","",1,"mat-block"],["translate",""],["matInput","","formControlName","filter","required",""],[4,"ngIf"],["fxLayout","column","fxLayoutAlign","start center",1,"tb-editable-switch"],["translate","",1,"tb-small","editable-label"],["formControlName","editable",1,"editable-switch"],["formControlName","keyFilters"],["mat-dialog-actions","","fxLayoutAlign","end center"],["mat-button","","color","primary","type","button","cdkFocusInitial","",3,"disabled","click"],["mat-raised-button","","color","primary","type","submit",3,"disabled"],["color","warn","mode","indeterminate"]],template:function(t,e){1&t&&(a["\u0275\u0275elementStart"](0,"form",0),a["\u0275\u0275listener"]("ngSubmit",(function(){return e.save()})),a["\u0275\u0275elementStart"](1,"mat-toolbar",1),a["\u0275\u0275elementStart"](2,"h2"),a["\u0275\u0275text"](3),a["\u0275\u0275pipe"](4,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](5,"span",2),a["\u0275\u0275elementStart"](6,"button",3),a["\u0275\u0275listener"]("click",(function(){return e.cancel()})),a["\u0275\u0275elementStart"](7,"mat-icon",4),a["\u0275\u0275text"](8,"close"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275template"](9,w,1,0,"mat-progress-bar",5),a["\u0275\u0275pipe"](10,"async"),a["\u0275\u0275elementStart"](11,"div",6),a["\u0275\u0275elementStart"](12,"fieldset",7),a["\u0275\u0275pipe"](13,"async"),a["\u0275\u0275elementStart"](14,"div",8),a["\u0275\u0275elementStart"](15,"div",9),a["\u0275\u0275elementStart"](16,"mat-form-field",10),a["\u0275\u0275elementStart"](17,"mat-label",11),a["\u0275\u0275text"](18,"filter.name"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](19,"input",12),a["\u0275\u0275template"](20,E,3,3,"mat-error",13),a["\u0275\u0275template"](21,I,3,3,"mat-error",13),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](22,"section",14),a["\u0275\u0275elementStart"](23,"label",15),a["\u0275\u0275text"](24,"filter.editable"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](25,"mat-slide-toggle",16),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](26,"tb-key-filter-list",17),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](27,"div",18),a["\u0275\u0275elementStart"](28,"button",19),a["\u0275\u0275listener"]("click",(function(){return e.cancel()})),a["\u0275\u0275pipe"](29,"async"),a["\u0275\u0275text"](30),a["\u0275\u0275pipe"](31,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](32,"button",20),a["\u0275\u0275pipe"](33,"async"),a["\u0275\u0275text"](34),a["\u0275\u0275pipe"](35,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()),2&t&&(a["\u0275\u0275property"]("formGroup",e.filterFormGroup),a["\u0275\u0275advance"](3),a["\u0275\u0275textInterpolate"](a["\u0275\u0275pipeBind1"](4,10,e.isAdd?"filter.add":"filter.edit")),a["\u0275\u0275advance"](6),a["\u0275\u0275property"]("ngIf",a["\u0275\u0275pipeBind1"](10,12,e.isLoading$)),a["\u0275\u0275advance"](3),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](13,14,e.isLoading$)),a["\u0275\u0275advance"](8),a["\u0275\u0275property"]("ngIf",e.filterFormGroup.get("filter").hasError("required")),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",e.filterFormGroup.get("filter").hasError("duplicateFilterName")),a["\u0275\u0275advance"](7),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](29,16,e.isLoading$)),a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](31,18,"action.cancel")," "),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](33,20,e.isLoading$)||e.filterFormGroup.invalid||!e.filterFormGroup.dirty),a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](35,22,e.isAdd?"action.add":"action.update")," "))},directives:[s["\u0275angular_packages_forms_forms_y"],s.NgControlStatusGroup,s.FormGroupDirective,m.MatToolbar,f.b,h.MatButton,g.MatIcon,y.NgIf,o.MatDialogContent,f.f,b.MatFormField,b.MatLabel,u.TranslateDirective,v.MatInput,s.DefaultValueAccessor,s.NgControlStatus,s.FormControlName,s.RequiredValidator,f.e,x.MatSlideToggle,C.a,o.MatDialogActions,S.MatProgressBar,b.MatError],pipes:[u.TranslatePipe,y.AsyncPipe],styles:["[_nghost-%COMP%]   .tb-editable-switch[_ngcontent-%COMP%]{padding-left:10px}[_nghost-%COMP%]   .tb-editable-switch[_ngcontent-%COMP%]   .editable-switch[_ngcontent-%COMP%]{margin:0}[_nghost-%COMP%]   .tb-editable-switch[_ngcontent-%COMP%]   .editable-label[_ngcontent-%COMP%]{margin:5px 0}"]}),e}(l.a);!function(){a["\u0275setClassMetadata"](O,[{type:a.Component,args:[{selector:"tb-filter-dialog",templateUrl:"./filter-dialog.component.html",providers:[{provide:r.ErrorStateMatcher,useExisting:O}],styleUrls:["./filter-dialog.component.scss"]}]}],(function(){return[{type:d.Store},{type:p.Router},{type:void 0,decorators:[{type:a.Inject,args:[o.MAT_DIALOG_DATA]}]},{type:r.ErrorStateMatcher,decorators:[{type:a.SkipSelf}]},{type:o.MatDialogRef},{type:s.FormBuilder},{type:c.a},{type:u.TranslateService}]}),null)}()},kN7V:function(t,e,n){"use strict";n.d(e,"a",(function(){return b}));var i=n("fXoL"),a=n("3Pt+"),r=n("xw5a"),o=n("XiUz"),s=n("ofXK"),l=n("IfZf"),c=n("qlrG"),d=n("RFBu"),p=n("91qg"),u=n("W1QD");function m(t,e){if(1&t&&i["\u0275\u0275element"](0,"tb-string-filter-predicate",4),2&t){var n=i["\u0275\u0275nextContext"]();i["\u0275\u0275property"]("allowUserDynamicSource",n.allowUserDynamicSource)("onlyUserDynamicSource",n.onlyUserDynamicSource)}}function f(t,e){if(1&t&&i["\u0275\u0275element"](0,"tb-numeric-filter-predicate",5),2&t){var n=i["\u0275\u0275nextContext"]();i["\u0275\u0275property"]("allowUserDynamicSource",n.allowUserDynamicSource)("onlyUserDynamicSource",n.onlyUserDynamicSource)("valueType",n.valueType)}}function h(t,e){if(1&t&&i["\u0275\u0275element"](0,"tb-boolean-filter-predicate",4),2&t){var n=i["\u0275\u0275nextContext"]();i["\u0275\u0275property"]("allowUserDynamicSource",n.allowUserDynamicSource)("onlyUserDynamicSource",n.onlyUserDynamicSource)}}function g(t,e){if(1&t&&i["\u0275\u0275element"](0,"tb-complex-filter-predicate",6),2&t){var n=i["\u0275\u0275nextContext"]();i["\u0275\u0275property"]("allowUserDynamicSource",n.allowUserDynamicSource)("onlyUserDynamicSource",n.onlyUserDynamicSource)("key",n.key)("valueType",n.valueType)("displayUserParameters",n.displayUserParameters)}}function y(t,e){if(1&t&&i["\u0275\u0275element"](0,"tb-filter-user-info",7),2&t){var n=i["\u0275\u0275nextContext"]();i["\u0275\u0275property"]("valueType",n.valueType)("operation",null==n.filterPredicateFormGroup.get("predicate").value?null:n.filterPredicateFormGroup.get("predicate").value.operation)("key",n.key)}}var b=function(){function t(t){this.fb=t,this.displayUserParameters=!0,this.allowUserDynamicSource=!0,this.onlyUserDynamicSource=!1,this.filterPredicateType=r.g,this.propagateChange=null}return t.prototype.ngOnInit=function(){var t=this;this.filterPredicateFormGroup=this.fb.group({predicate:[null,[a.Validators.required]],userInfo:[null,[]]}),this.filterPredicateFormGroup.valueChanges.subscribe((function(){t.updateModel()}))},t.prototype.registerOnChange=function(t){this.propagateChange=t},t.prototype.registerOnTouched=function(t){},t.prototype.setDisabledState=function(t){this.disabled=t,this.disabled?this.filterPredicateFormGroup.disable({emitEvent:!1}):this.filterPredicateFormGroup.enable({emitEvent:!1})},t.prototype.writeValue=function(t){this.type=t.keyFilterPredicate.type,this.filterPredicateFormGroup.get("predicate").patchValue(t.keyFilterPredicate,{emitEvent:!1}),this.filterPredicateFormGroup.get("userInfo").patchValue(t.userInfo,{emitEvent:!1})},t.prototype.updateModel=function(){var t=null;this.filterPredicateFormGroup.valid&&(t={keyFilterPredicate:this.filterPredicateFormGroup.getRawValue().predicate,userInfo:this.filterPredicateFormGroup.getRawValue().userInfo}),this.propagateChange(t)},t.\u0275fac=function(e){return new(e||t)(i["\u0275\u0275directiveInject"](a.FormBuilder))},t.\u0275cmp=i["\u0275\u0275defineComponent"]({type:t,selectors:[["tb-filter-predicate"]],inputs:{disabled:"disabled",valueType:"valueType",key:"key",displayUserParameters:"displayUserParameters",allowUserDynamicSource:"allowUserDynamicSource",onlyUserDynamicSource:"onlyUserDynamicSource"},features:[i["\u0275\u0275ProvidersFeature"]([{provide:a.NG_VALUE_ACCESSOR,useExisting:Object(i.forwardRef)((function(){return t})),multi:!0}])],decls:7,vars:7,consts:[["fxFlex","","fxLayout","row","fxLayoutAlign","start center","fxLayoutGap","8px",3,"formGroup"],["fxFlex","","fxLayout","column",3,"ngSwitch"],[3,"ngSwitchCase"],["style","width: 60px;","fxLayout","row","fxLayoutAlign","center","formControlName","userInfo",3,"valueType","operation","key",4,"ngIf"],["formControlName","predicate",3,"allowUserDynamicSource","onlyUserDynamicSource"],["formControlName","predicate",3,"allowUserDynamicSource","onlyUserDynamicSource","valueType"],["formControlName","predicate",3,"allowUserDynamicSource","onlyUserDynamicSource","key","valueType","displayUserParameters"],["fxLayout","row","fxLayoutAlign","center","formControlName","userInfo",2,"width","60px",3,"valueType","operation","key"]],template:function(t,e){1&t&&(i["\u0275\u0275elementStart"](0,"div",0),i["\u0275\u0275elementStart"](1,"div",1),i["\u0275\u0275template"](2,m,1,2,"ng-template",2),i["\u0275\u0275template"](3,f,1,3,"ng-template",2),i["\u0275\u0275template"](4,h,1,2,"ng-template",2),i["\u0275\u0275template"](5,g,1,5,"ng-template",2),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](6,y,1,3,"tb-filter-user-info",3),i["\u0275\u0275elementEnd"]()),2&t&&(i["\u0275\u0275property"]("formGroup",e.filterPredicateFormGroup),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngSwitch",e.type),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngSwitchCase",e.filterPredicateType.STRING),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngSwitchCase",e.filterPredicateType.NUMERIC),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngSwitchCase",e.filterPredicateType.BOOLEAN),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngSwitchCase",e.filterPredicateType.COMPLEX),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",e.type!==e.filterPredicateType.COMPLEX&&e.displayUserParameters))},directives:[o.b,o.f,o.e,o.g,a.NgControlStatusGroup,a.FormGroupDirective,s.NgSwitch,s.NgSwitchCase,s.NgIf,l.a,a.NgControlStatus,a.FormControlName,c.a,d.a,p.a,u.a],encapsulation:2}),t}();!function(){i["\u0275setClassMetadata"](b,[{type:i.Component,args:[{selector:"tb-filter-predicate",templateUrl:"./filter-predicate.component.html",styleUrls:[],providers:[{provide:a.NG_VALUE_ACCESSOR,useExisting:Object(i.forwardRef)((function(){return b})),multi:!0}]}]}],(function(){return[{type:a.FormBuilder}]}),{disabled:[{type:i.Input}],valueType:[{type:i.Input}],key:[{type:i.Input}],displayUserParameters:[{type:i.Input}],allowUserDynamicSource:[{type:i.Input}],onlyUserDynamicSource:[{type:i.Input}]})}()},kU1M:function(t,e,n){"use strict";n.r(e),n.d(e,"audit",(function(){return i.a})),n.d(e,"auditTime",(function(){return a.a})),n.d(e,"buffer",(function(){return p})),n.d(e,"bufferCount",(function(){return f.a})),n.d(e,"bufferTime",(function(){return x})),n.d(e,"bufferToggle",(function(){return P})),n.d(e,"bufferWhen",(function(){return j})),n.d(e,"catchError",(function(){return L.a})),n.d(e,"combineAll",(function(){return R})),n.d(e,"combineLatest",(function(){return U})),n.d(e,"concat",(function(){return W})),n.d(e,"concatAll",(function(){return z.a})),n.d(e,"concatMap",(function(){return K.a})),n.d(e,"concatMapTo",(function(){return H})),n.d(e,"count",(function(){return $})),n.d(e,"debounce",(function(){return Y})),n.d(e,"debounceTime",(function(){return tt.a})),n.d(e,"defaultIfEmpty",(function(){return et.a})),n.d(e,"delay",(function(){return nt.a})),n.d(e,"delayWhen",(function(){return at})),n.d(e,"dematerialize",(function(){return ct.a})),n.d(e,"distinct",(function(){return dt.a})),n.d(e,"distinctUntilChanged",(function(){return pt.a})),n.d(e,"distinctUntilKeyChanged",(function(){return ut})),n.d(e,"elementAt",(function(){return yt})),n.d(e,"endWith",(function(){return vt})),n.d(e,"every",(function(){return xt})),n.d(e,"exhaust",(function(){return wt})),n.d(e,"exhaustMap",(function(){return Ot.a})),n.d(e,"expand",(function(){return Tt.a})),n.d(e,"filter",(function(){return ft.a})),n.d(e,"finalize",(function(){return Mt.a})),n.d(e,"find",(function(){return Ft})),n.d(e,"findIndex",(function(){return kt})),n.d(e,"first",(function(){return jt.a})),n.d(e,"groupBy",(function(){return At.b})),n.d(e,"ignoreElements",(function(){return _t.a})),n.d(e,"isEmpty",(function(){return Lt})),n.d(e,"last",(function(){return Nt.a})),n.d(e,"map",(function(){return Gt.a})),n.d(e,"mapTo",(function(){return Bt.a})),n.d(e,"materialize",(function(){return Ut.a})),n.d(e,"max",(function(){return Wt})),n.d(e,"merge",(function(){return Kt})),n.d(e,"mergeAll",(function(){return Ht.a})),n.d(e,"mergeMap",(function(){return $t.b})),n.d(e,"flatMap",(function(){return $t.a})),n.d(e,"mergeMapTo",(function(){return Qt})),n.d(e,"mergeScan",(function(){return Xt})),n.d(e,"min",(function(){return Zt})),n.d(e,"multicast",(function(){return te.a})),n.d(e,"observeOn",(function(){return ee.b})),n.d(e,"onErrorResumeNext",(function(){return ne})),n.d(e,"pairwise",(function(){return re.a})),n.d(e,"partition",(function(){return se})),n.d(e,"pluck",(function(){return le.a})),n.d(e,"publish",(function(){return de})),n.d(e,"publishBehavior",(function(){return ue})),n.d(e,"publishLast",(function(){return fe})),n.d(e,"publishReplay",(function(){return he.a})),n.d(e,"race",(function(){return ye})),n.d(e,"reduce",(function(){return qt.a})),n.d(e,"repeat",(function(){return ve})),n.d(e,"repeatWhen",(function(){return Se})),n.d(e,"retry",(function(){return Ie})),n.d(e,"retryWhen",(function(){return Me})),n.d(e,"refCount",(function(){return De.a})),n.d(e,"sample",(function(){return ke})),n.d(e,"sampleTime",(function(){return _e})),n.d(e,"scan",(function(){return Ne.a})),n.d(e,"sequenceEqual",(function(){return Ge})),n.d(e,"share",(function(){return We.a})),n.d(e,"shareReplay",(function(){return ze.a})),n.d(e,"single",(function(){return He})),n.d(e,"skip",(function(){return Xe.a})),n.d(e,"skipLast",(function(){return Ye})),n.d(e,"skipUntil",(function(){return tn})),n.d(e,"skipWhile",(function(){return an.a})),n.d(e,"startWith",(function(){return rn.a})),n.d(e,"subscribeOn",(function(){return cn})),n.d(e,"switchAll",(function(){return mn})),n.d(e,"switchMap",(function(){return pn.a})),n.d(e,"switchMapTo",(function(){return fn})),n.d(e,"take",(function(){return gt.a})),n.d(e,"takeLast",(function(){return hn.a})),n.d(e,"takeUntil",(function(){return gn.a})),n.d(e,"takeWhile",(function(){return yn.a})),n.d(e,"tap",(function(){return bn.a})),n.d(e,"throttle",(function(){return xn})),n.d(e,"throttleTime",(function(){return wn})),n.d(e,"throwIfEmpty",(function(){return ht.a})),n.d(e,"timeInterval",(function(){return Mn})),n.d(e,"timeout",(function(){return Pn.a})),n.d(e,"timeoutWith",(function(){return Dn.a})),n.d(e,"timestamp",(function(){return kn})),n.d(e,"toArray",(function(){return An.a})),n.d(e,"window",(function(){return _n})),n.d(e,"windowCount",(function(){return Rn})),n.d(e,"windowTime",(function(){return Bn})),n.d(e,"windowToggle",(function(){return $n})),n.d(e,"windowWhen",(function(){return Yn})),n.d(e,"withLatestFrom",(function(){return ti.a})),n.d(e,"zip",(function(){return ni})),n.d(e,"zipAll",(function(){return ii}));var i=n("tnsW"),a=n("3UWI"),r=n("JX7q"),o=n("Ji7U"),s=n("LK+K"),l=n("1OyB"),c=n("vuIU"),d=n("zx2A");function p(t){return function(e){return e.lift(new u(t))}}var u=function(){function t(e){Object(l.a)(this,t),this.closingNotifier=e}return Object(c.a)(t,[{key:"call",value:function(t,e){return e.subscribe(new m(t,this.closingNotifier))}}]),t}(),m=function(t){Object(o.a)(n,t);var e=Object(s.a)(n);function n(t,i){var a;return Object(l.a)(this,n),(a=e.call(this,t)).buffer=[],a.add(Object(d.c)(i,new d.a(Object(r.a)(a)))),a}return Object(c.a)(n,[{key:"_next",value:function(t){this.buffer.push(t)}},{key:"notifyNext",value:function(){var t=this.buffer;this.buffer=[],this.destination.next(t)}}]),n}(d.b),f=n("9M8c"),h=n("ReuC"),g=n("foSv"),y=n("D0XW"),b=n("7o/Q"),v=n("z+Ro");function x(t){var e=arguments.length,n=y.a;Object(v.a)(arguments[arguments.length-1])&&(n=arguments[arguments.length-1],e--);var i=null;e>=2&&(i=arguments[1]);var a=Number.POSITIVE_INFINITY;return e>=3&&(a=arguments[2]),function(e){return e.lift(new C(t,i,a,n))}}var C=function(){function t(e,n,i,a){Object(l.a)(this,t),this.bufferTimeSpan=e,this.bufferCreationInterval=n,this.maxBufferSize=i,this.scheduler=a}return Object(c.a)(t,[{key:"call",value:function(t,e){return e.subscribe(new w(t,this.bufferTimeSpan,this.bufferCreationInterval,this.maxBufferSize,this.scheduler))}}]),t}(),S=function t(){Object(l.a)(this,t),this.buffer=[]},w=function(t){Object(o.a)(n,t);var e=Object(s.a)(n);function n(t,i,a,o,s){var c;Object(l.a)(this,n),(c=e.call(this,t)).bufferTimeSpan=i,c.bufferCreationInterval=a,c.maxBufferSize=o,c.scheduler=s,c.contexts=[];var d=c.openContext();if(c.timespanOnly=null==a||a<0,c.timespanOnly){var p={subscriber:Object(r.a)(c),context:d,bufferTimeSpan:i};c.add(d.closeAction=s.schedule(E,i,p))}else{var u={subscriber:Object(r.a)(c),context:d},m={bufferTimeSpan:i,bufferCreationInterval:a,subscriber:Object(r.a)(c),scheduler:s};c.add(d.closeAction=s.schedule(O,i,u)),c.add(s.schedule(I,a,m))}return c}return Object(c.a)(n,[{key:"_next",value:function(t){for(var e,n=this.contexts,i=n.length,a=0;a<i;a++){var r=n[a],o=r.buffer;o.push(t),o.length==this.maxBufferSize&&(e=r)}e&&this.onBufferFull(e)}},{key:"_error",value:function(t){this.contexts.length=0,Object(h.a)(Object(g.a)(n.prototype),"_error",this).call(this,t)}},{key:"_complete",value:function(){for(var t=this.contexts,e=this.destination;t.length>0;){var i=t.shift();e.next(i.buffer)}Object(h.a)(Object(g.a)(n.prototype),"_complete",this).call(this)}},{key:"_unsubscribe",value:function(){this.contexts=null}},{key:"onBufferFull",value:function(t){this.closeContext(t);var e=t.closeAction;if(e.unsubscribe(),this.remove(e),!this.closed&&this.timespanOnly){t=this.openContext();var n=this.bufferTimeSpan,i={subscriber:this,context:t,bufferTimeSpan:n};this.add(t.closeAction=this.scheduler.schedule(E,n,i))}}},{key:"openContext",value:function(){var t=new S;return this.contexts.push(t),t}},{key:"closeContext",value:function(t){this.destination.next(t.buffer);var e=this.contexts;(e?e.indexOf(t):-1)>=0&&e.splice(e.indexOf(t),1)}}]),n}(b.a);function E(t){var e=t.subscriber,n=t.context;n&&e.closeContext(n),e.closed||(t.context=e.openContext(),t.context.closeAction=this.schedule(t,t.bufferTimeSpan))}function I(t){var e=t.bufferCreationInterval,n=t.bufferTimeSpan,i=t.subscriber,a=t.scheduler,r=i.openContext();i.closed||(i.add(r.closeAction=a.schedule(O,n,{subscriber:i,context:r})),this.schedule(t,e))}function O(t){var e=t.subscriber,n=t.context;e.closeContext(n)}var T=n("quSY"),M=n("ZUHj"),F=n("l7GE");function P(t,e){return function(n){return n.lift(new D(t,e))}}var D=function(){function t(e,n){Object(l.a)(this,t),this.openings=e,this.closingSelector=n}return Object(c.a)(t,[{key:"call",value:function(t,e){return e.subscribe(new k(t,this.openings,this.closingSelector))}}]),t}(),k=function(t){Object(o.a)(n,t);var e=Object(s.a)(n);function n(t,i,a){var o;return Object(l.a)(this,n),(o=e.call(this,t)).closingSelector=a,o.contexts=[],o.add(Object(M.a)(Object(r.a)(o),i)),o}return Object(c.a)(n,[{key:"_next",value:function(t){for(var e=this.contexts,n=e.length,i=0;i<n;i++)e[i].buffer.push(t)}},{key:"_error",value:function(t){for(var e=this.contexts;e.length>0;){var i=e.shift();i.subscription.unsubscribe(),i.buffer=null,i.subscription=null}this.contexts=null,Object(h.a)(Object(g.a)(n.prototype),"_error",this).call(this,t)}},{key:"_complete",value:function(){for(var t=this.contexts;t.length>0;){var e=t.shift();this.destination.next(e.buffer),e.subscription.unsubscribe(),e.buffer=null,e.subscription=null}this.contexts=null,Object(h.a)(Object(g.a)(n.prototype),"_complete",this).call(this)}},{key:"notifyNext",value:function(t,e){t?this.closeBuffer(t):this.openBuffer(e)}},{key:"notifyComplete",value:function(t){this.closeBuffer(t.context)}},{key:"openBuffer",value:function(t){try{var e=this.closingSelector.call(this,t);e&&this.trySubscribe(e)}catch(n){this._error(n)}}},{key:"closeBuffer",value:function(t){var e=this.contexts;if(e&&t){var n=t.buffer,i=t.subscription;this.destination.next(n),e.splice(e.indexOf(t),1),this.remove(i),i.unsubscribe()}}},{key:"trySubscribe",value:function(t){var e=this.contexts,n=new T.a,i={buffer:[],subscription:n};e.push(i);var a=Object(M.a)(this,t,i);!a||a.closed?this.closeBuffer(i):(a.context=i,this.add(a),n.add(a))}}]),n}(F.a);function j(t){return function(e){return e.lift(new A(t))}}var A=function(){function t(e){Object(l.a)(this,t),this.closingSelector=e}return Object(c.a)(t,[{key:"call",value:function(t,e){return e.subscribe(new _(t,this.closingSelector))}}]),t}(),_=function(t){Object(o.a)(n,t);var e=Object(s.a)(n);function n(t,i){var a;return Object(l.a)(this,n),(a=e.call(this,t)).closingSelector=i,a.subscribing=!1,a.openBuffer(),a}return Object(c.a)(n,[{key:"_next",value:function(t){this.buffer.push(t)}},{key:"_complete",value:function(){var t=this.buffer;t&&this.destination.next(t),Object(h.a)(Object(g.a)(n.prototype),"_complete",this).call(this)}},{key:"_unsubscribe",value:function(){this.buffer=void 0,this.subscribing=!1}},{key:"notifyNext",value:function(){this.openBuffer()}},{key:"notifyComplete",value:function(){this.subscribing?this.complete():this.openBuffer()}},{key:"openBuffer",value:function(){var t=this.closingSubscription;t&&(this.remove(t),t.unsubscribe());var e,n=this.buffer;this.buffer&&this.destination.next(n),this.buffer=[];try{e=(0,this.closingSelector)()}catch(i){return this.error(i)}t=new T.a,this.closingSubscription=t,this.add(t),this.subscribing=!0,t.add(Object(d.c)(e,new d.a(this))),this.subscribing=!1}}]),n}(d.b),L=n("JIr8"),V=n("itXk");function R(t){return function(e){return e.lift(new V.a(t))}}var N=n("KQm4"),G=n("DH7j"),B=n("Cfvw");function U(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var i=null;return"function"==typeof e[e.length-1]&&(i=e.pop()),1===e.length&&Object(G.a)(e[0])&&(e=e[0].slice()),function(t){return t.lift.call(Object(B.a)([t].concat(Object(N.a)(e))),new V.a(i))}}var q=n("GyhO");function W(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(t){return t.lift.call(q.a.apply(void 0,[t].concat(e)))}}var z=n("0EUg"),K=n("bOdf");function H(t,e){return Object(K.a)((function(){return t}),e)}function $(t){return function(e){return e.lift(new Q(t,e))}}var Q=function(){function t(e,n){Object(l.a)(this,t),this.predicate=e,this.source=n}return Object(c.a)(t,[{key:"call",value:function(t,e){return e.subscribe(new X(t,this.predicate,this.source))}}]),t}(),X=function(t){Object(o.a)(n,t);var e=Object(s.a)(n);function n(t,i,a){var r;return Object(l.a)(this,n),(r=e.call(this,t)).predicate=i,r.source=a,r.count=0,r.index=0,r}return Object(c.a)(n,[{key:"_next",value:function(t){this.predicate?this._tryPredicate(t):this.count++}},{key:"_tryPredicate",value:function(t){var e;try{e=this.predicate(t,this.index++,this.source)}catch(n){return this.destination.error(n),void 0}e&&this.count++}},{key:"_complete",value:function(){this.destination.next(this.count),this.destination.complete()}}]),n}(b.a);function Y(t){return function(e){return e.lift(new J(t))}}var J=function(){function t(e){Object(l.a)(this,t),this.durationSelector=e}return Object(c.a)(t,[{key:"call",value:function(t,e){return e.subscribe(new Z(t,this.durationSelector))}}]),t}(),Z=function(t){Object(o.a)(n,t);var e=Object(s.a)(n);function n(t,i){var a;return Object(l.a)(this,n),(a=e.call(this,t)).durationSelector=i,a.hasValue=!1,a}return Object(c.a)(n,[{key:"_next",value:function(t){try{var e=this.durationSelector.call(this,t);e&&this._tryNext(t,e)}catch(n){this.destination.error(n)}}},{key:"_complete",value:function(){this.emitValue(),this.destination.complete()}},{key:"_tryNext",value:function(t,e){var n=this.durationSubscription;this.value=t,this.hasValue=!0,n&&(n.unsubscribe(),this.remove(n)),(n=Object(d.c)(e,new d.a(this)))&&!n.closed&&this.add(this.durationSubscription=n)}},{key:"notifyNext",value:function(){this.emitValue()}},{key:"notifyComplete",value:function(){this.emitValue()}},{key:"emitValue",value:function(){if(this.hasValue){var t=this.value,e=this.durationSubscription;e&&(this.durationSubscription=void 0,e.unsubscribe(),this.remove(e)),this.value=void 0,this.hasValue=!1,Object(h.a)(Object(g.a)(n.prototype),"_next",this).call(this,t)}}}]),n}(d.b),tt=n("Kj3r"),et=n("xbPD"),nt=n("3E0/"),it=n("HDdC");function at(t,e){return e?function(n){return new st(n,e).lift(new rt(t))}:function(e){return e.lift(new rt(t))}}var rt=function(){function t(e){Object(l.a)(this,t),this.delayDurationSelector=e}return Object(c.a)(t,[{key:"call",value:function(t,e){return e.subscribe(new ot(t,this.delayDurationSelector))}}]),t}(),ot=function(t){Object(o.a)(n,t);var e=Object(s.a)(n);function n(t,i){var a;return Object(l.a)(this,n),(a=e.call(this,t)).delayDurationSelector=i,a.completed=!1,a.delayNotifierSubscriptions=[],a.index=0,a}return Object(c.a)(n,[{key:"notifyNext",value:function(t,e,n,i,a){this.destination.next(t),this.removeSubscription(a),this.tryComplete()}},{key:"notifyError",value:function(t,e){this._error(t)}},{key:"notifyComplete",value:function(t){var e=this.removeSubscription(t);e&&this.destination.next(e),this.tryComplete()}},{key:"_next",value:function(t){var e=this.index++;try{var n=this.delayDurationSelector(t,e);n&&this.tryDelay(n,t)}catch(i){this.destination.error(i)}}},{key:"_complete",value:function(){this.completed=!0,this.tryComplete(),this.unsubscribe()}},{key:"removeSubscription",value:function(t){t.unsubscribe();var e=this.delayNotifierSubscriptions.indexOf(t);return-1!==e&&this.delayNotifierSubscriptions.splice(e,1),t.outerValue}},{key:"tryDelay",value:function(t,e){var n=Object(M.a)(this,t,e);n&&!n.closed&&(this.destination.add(n),this.delayNotifierSubscriptions.push(n))}},{key:"tryComplete",value:function(){this.completed&&0===this.delayNotifierSubscriptions.length&&this.destination.complete()}}]),n}(F.a),st=function(t){Object(o.a)(n,t);var e=Object(s.a)(n);function n(t,i){var a;return Object(l.a)(this,n),(a=e.call(this)).source=t,a.subscriptionDelay=i,a}return Object(c.a)(n,[{key:"_subscribe",value:function(t){this.subscriptionDelay.subscribe(new lt(t,this.source))}}]),n}(it.a),lt=function(t){Object(o.a)(n,t);var e=Object(s.a)(n);function n(t,i){var a;return Object(l.a)(this,n),(a=e.call(this)).parent=t,a.source=i,a.sourceSubscribed=!1,a}return Object(c.a)(n,[{key:"_next",value:function(t){this.subscribeToSource()}},{key:"_error",value:function(t){this.unsubscribe(),this.parent.error(t)}},{key:"_complete",value:function(){this.unsubscribe(),this.subscribeToSource()}},{key:"subscribeToSource",value:function(){this.sourceSubscribed||(this.sourceSubscribed=!0,this.unsubscribe(),this.source.subscribe(this.parent))}}]),n}(b.a),ct=n("kgNN"),dt=n("02Lk"),pt=n("/uUt");function ut(t,e){return Object(pt.a)((function(n,i){return e?e(n[t],i[t]):n[t]===i[t]}))}var mt=n("4I5i"),ft=n("pLZG"),ht=n("XDbj"),gt=n("IzEk");function yt(t,e){if(t<0)throw new mt.a;var n=arguments.length>=2;return function(i){return i.pipe(Object(ft.a)((function(e,n){return n===t})),Object(gt.a)(1),n?Object(et.a)(e):Object(ht.a)((function(){return new mt.a})))}}var bt=n("LRne");function vt(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(t){return Object(q.a)(t,bt.a.apply(void 0,e))}}function xt(t,e){return function(n){return n.lift(new Ct(t,e,n))}}var Ct=function(){function t(e,n,i){Object(l.a)(this,t),this.predicate=e,this.thisArg=n,this.source=i}return Object(c.a)(t,[{key:"call",value:function(t,e){return e.subscribe(new St(t,this.predicate,this.thisArg,this.source))}}]),t}(),St=function(t){Object(o.a)(n,t);var e=Object(s.a)(n);function n(t,i,a,o){var s;return Object(l.a)(this,n),(s=e.call(this,t)).predicate=i,s.thisArg=a,s.source=o,s.index=0,s.thisArg=a||Object(r.a)(s),s}return Object(c.a)(n,[{key:"notifyComplete",value:function(t){this.destination.next(t),this.destination.complete()}},{key:"_next",value:function(t){var e=!1;try{e=this.predicate.call(this.thisArg,t,this.index++,this.source)}catch(n){return this.destination.error(n),void 0}e||this.notifyComplete(!1)}},{key:"_complete",value:function(){this.notifyComplete(!0)}}]),n}(b.a);function wt(){return function(t){return t.lift(new Et)}}var Et=function(){function t(){Object(l.a)(this,t)}return Object(c.a)(t,[{key:"call",value:function(t,e){return e.subscribe(new It(t))}}]),t}(),It=function(t){Object(o.a)(n,t);var e=Object(s.a)(n);function n(t){var i;return Object(l.a)(this,n),(i=e.call(this,t)).hasCompleted=!1,i.hasSubscription=!1,i}return Object(c.a)(n,[{key:"_next",value:function(t){this.hasSubscription||(this.hasSubscription=!0,this.add(Object(d.c)(t,new d.a(this))))}},{key:"_complete",value:function(){this.hasCompleted=!0,this.hasSubscription||this.destination.complete()}},{key:"notifyComplete",value:function(){this.hasSubscription=!1,this.hasCompleted&&this.destination.complete()}}]),n}(d.b),Ot=n("XqQ8"),Tt=n("FQpF"),Mt=n("nYR2");function Ft(t,e){if("function"!=typeof t)throw new TypeError("predicate is not a function");return function(n){return n.lift(new Pt(t,n,!1,e))}}var Pt=function(){function t(e,n,i,a){Object(l.a)(this,t),this.predicate=e,this.source=n,this.yieldIndex=i,this.thisArg=a}return Object(c.a)(t,[{key:"call",value:function(t,e){return e.subscribe(new Dt(t,this.predicate,this.source,this.yieldIndex,this.thisArg))}}]),t}(),Dt=function(t){Object(o.a)(n,t);var e=Object(s.a)(n);function n(t,i,a,r,o){var s;return Object(l.a)(this,n),(s=e.call(this,t)).predicate=i,s.source=a,s.yieldIndex=r,s.thisArg=o,s.index=0,s}return Object(c.a)(n,[{key:"notifyComplete",value:function(t){var e=this.destination;e.next(t),e.complete(),this.unsubscribe()}},{key:"_next",value:function(t){var e=this.predicate,n=this.thisArg,i=this.index++;try{e.call(n||this,t,i,this.source)&&this.notifyComplete(this.yieldIndex?i:t)}catch(a){this.destination.error(a)}}},{key:"_complete",value:function(){this.notifyComplete(this.yieldIndex?-1:void 0)}}]),n}(b.a);function kt(t,e){return function(n){return n.lift(new Pt(t,n,!0,e))}}var jt=n("SxV6"),At=n("OQgR"),_t=n("4A3s");function Lt(){return function(t){return t.lift(new Vt)}}var Vt=function(){function t(){Object(l.a)(this,t)}return Object(c.a)(t,[{key:"call",value:function(t,e){return e.subscribe(new Rt(t))}}]),t}(),Rt=function(t){Object(o.a)(n,t);var e=Object(s.a)(n);function n(t){return Object(l.a)(this,n),e.call(this,t)}return Object(c.a)(n,[{key:"notifyComplete",value:function(t){var e=this.destination;e.next(t),e.complete()}},{key:"_next",value:function(t){this.notifyComplete(!1)}},{key:"_complete",value:function(){this.notifyComplete(!0)}}]),n}(b.a),Nt=n("NJ9Y"),Gt=n("lJxs"),Bt=n("CqXF"),Ut=n("dkDA"),qt=n("128B");function Wt(t){var e="function"==typeof t?function(e,n){return t(e,n)>0?e:n}:function(t,e){return t>e?t:e};return Object(qt.a)(e)}var zt=n("VRyK");function Kt(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(t){return t.lift.call(zt.a.apply(void 0,[t].concat(e)))}}var Ht=n("bHdf"),$t=n("5+tZ");function Qt(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Number.POSITIVE_INFINITY;return"function"==typeof e?Object($t.b)((function(){return t}),e,n):("number"==typeof e&&(n=e),Object($t.b)((function(){return t}),n))}function Xt(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Number.POSITIVE_INFINITY;return function(i){return i.lift(new Yt(t,e,n))}}var Yt=function(){function t(e,n,i){Object(l.a)(this,t),this.accumulator=e,this.seed=n,this.concurrent=i}return Object(c.a)(t,[{key:"call",value:function(t,e){return e.subscribe(new Jt(t,this.accumulator,this.seed,this.concurrent))}}]),t}(),Jt=function(t){Object(o.a)(n,t);var e=Object(s.a)(n);function n(t,i,a,r){var o;return Object(l.a)(this,n),(o=e.call(this,t)).accumulator=i,o.acc=a,o.concurrent=r,o.hasValue=!1,o.hasCompleted=!1,o.buffer=[],o.active=0,o.index=0,o}return Object(c.a)(n,[{key:"_next",value:function(t){if(this.active<this.concurrent){var e,n=this.index++,i=this.destination;try{e=(0,this.accumulator)(this.acc,t,n)}catch(a){return i.error(a)}this.active++,this._innerSub(e)}else this.buffer.push(t)}},{key:"_innerSub",value:function(t){var e=new d.a(this),n=this.destination;n.add(e);var i=Object(d.c)(t,e);i!==e&&n.add(i)}},{key:"_complete",value:function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&(!1===this.hasValue&&this.destination.next(this.acc),this.destination.complete()),this.unsubscribe()}},{key:"notifyNext",value:function(t){var e=this.destination;this.acc=t,this.hasValue=!0,e.next(t)}},{key:"notifyComplete",value:function(){var t=this.buffer;this.active--,t.length>0?this._next(t.shift()):0===this.active&&this.hasCompleted&&(!1===this.hasValue&&this.destination.next(this.acc),this.destination.complete())}}]),n}(d.b);function Zt(t){var e="function"==typeof t?function(e,n){return t(e,n)<0?e:n}:function(t,e){return t<e?t:e};return Object(qt.a)(e)}var te=n("oB13"),ee=n("pxpQ");function ne(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return 1===e.length&&Object(G.a)(e[0])&&(e=e[0]),function(t){return t.lift(new ie(e))}}var ie=function(){function t(e){Object(l.a)(this,t),this.nextSources=e}return Object(c.a)(t,[{key:"call",value:function(t,e){return e.subscribe(new ae(t,this.nextSources))}}]),t}(),ae=function(t){Object(o.a)(n,t);var e=Object(s.a)(n);function n(t,i){var a;return Object(l.a)(this,n),(a=e.call(this,t)).destination=t,a.nextSources=i,a}return Object(c.a)(n,[{key:"notifyError",value:function(){this.subscribeToNextSource()}},{key:"notifyComplete",value:function(){this.subscribeToNextSource()}},{key:"_error",value:function(t){this.subscribeToNextSource(),this.unsubscribe()}},{key:"_complete",value:function(){this.subscribeToNextSource(),this.unsubscribe()}},{key:"subscribeToNextSource",value:function(){var t=this.nextSources.shift();if(t){var e=new d.a(this),n=this.destination;n.add(e);var i=Object(d.c)(t,e);i!==e&&n.add(i)}else this.destination.complete()}}]),n}(d.b),re=n("Zy1z"),oe=n("F97/");function se(t,e){return function(n){return[Object(ft.a)(t,e)(n),Object(ft.a)(Object(oe.a)(t,e))(n)]}}var le=n("wO+i"),ce=n("XNiG");function de(t){return t?Object(te.a)((function(){return new ce.b}),t):Object(te.a)(new ce.b)}var pe=n("2Vo4");function ue(t){return function(e){return Object(te.a)(new pe.a(t))(e)}}var me=n("NHP+");function fe(){return function(t){return Object(te.a)(new me.a)(t)}}var he=n("05l1"),ge=n("Nv8m");function ye(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(t){return 1===e.length&&Object(G.a)(e[0])&&(e=e[0]),t.lift.call(ge.a.apply(void 0,[t].concat(Object(N.a)(e))))}}var be=n("EY2u");function ve(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1;return function(e){return 0===t?Object(be.b)():t<0?e.lift(new xe(-1,e)):e.lift(new xe(t-1,e))}}var xe=function(){function t(e,n){Object(l.a)(this,t),this.count=e,this.source=n}return Object(c.a)(t,[{key:"call",value:function(t,e){return e.subscribe(new Ce(t,this.count,this.source))}}]),t}(),Ce=function(t){Object(o.a)(n,t);var e=Object(s.a)(n);function n(t,i,a){var r;return Object(l.a)(this,n),(r=e.call(this,t)).count=i,r.source=a,r}return Object(c.a)(n,[{key:"complete",value:function(){if(!this.isStopped){var t=this.source,e=this.count;if(0===e)return Object(h.a)(Object(g.a)(n.prototype),"complete",this).call(this);e>-1&&(this.count=e-1),t.subscribe(this._unsubscribeAndRecycle())}}}]),n}(b.a);function Se(t){return function(e){return e.lift(new we(t))}}var we=function(){function t(e){Object(l.a)(this,t),this.notifier=e}return Object(c.a)(t,[{key:"call",value:function(t,e){return e.subscribe(new Ee(t,this.notifier,e))}}]),t}(),Ee=function(t){Object(o.a)(n,t);var e=Object(s.a)(n);function n(t,i,a){var r;return Object(l.a)(this,n),(r=e.call(this,t)).notifier=i,r.source=a,r.sourceIsBeingSubscribedTo=!0,r}return Object(c.a)(n,[{key:"notifyNext",value:function(){this.sourceIsBeingSubscribedTo=!0,this.source.subscribe(this)}},{key:"notifyComplete",value:function(){if(!1===this.sourceIsBeingSubscribedTo)return Object(h.a)(Object(g.a)(n.prototype),"complete",this).call(this)}},{key:"complete",value:function(){if(this.sourceIsBeingSubscribedTo=!1,!this.isStopped){if(this.retries||this.subscribeToRetries(),!this.retriesSubscription||this.retriesSubscription.closed)return Object(h.a)(Object(g.a)(n.prototype),"complete",this).call(this);this._unsubscribeAndRecycle(),this.notifications.next(void 0)}}},{key:"_unsubscribe",value:function(){var t=this.notifications,e=this.retriesSubscription;t&&(t.unsubscribe(),this.notifications=void 0),e&&(e.unsubscribe(),this.retriesSubscription=void 0),this.retries=void 0}},{key:"_unsubscribeAndRecycle",value:function(){var t=this._unsubscribe;return this._unsubscribe=null,Object(h.a)(Object(g.a)(n.prototype),"_unsubscribeAndRecycle",this).call(this),this._unsubscribe=t,this}},{key:"subscribeToRetries",value:function(){var t;this.notifications=new ce.b;try{t=(0,this.notifier)(this.notifications)}catch(e){return Object(h.a)(Object(g.a)(n.prototype),"complete",this).call(this)}this.retries=t,this.retriesSubscription=Object(d.c)(t,new d.a(this))}}]),n}(d.b);function Ie(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1;return function(e){return e.lift(new Oe(t,e))}}var Oe=function(){function t(e,n){Object(l.a)(this,t),this.count=e,this.source=n}return Object(c.a)(t,[{key:"call",value:function(t,e){return e.subscribe(new Te(t,this.count,this.source))}}]),t}(),Te=function(t){Object(o.a)(n,t);var e=Object(s.a)(n);function n(t,i,a){var r;return Object(l.a)(this,n),(r=e.call(this,t)).count=i,r.source=a,r}return Object(c.a)(n,[{key:"error",value:function(t){if(!this.isStopped){var e=this.source,i=this.count;if(0===i)return Object(h.a)(Object(g.a)(n.prototype),"error",this).call(this,t);i>-1&&(this.count=i-1),e.subscribe(this._unsubscribeAndRecycle())}}}]),n}(b.a);function Me(t){return function(e){return e.lift(new Fe(t,e))}}var Fe=function(){function t(e,n){Object(l.a)(this,t),this.notifier=e,this.source=n}return Object(c.a)(t,[{key:"call",value:function(t,e){return e.subscribe(new Pe(t,this.notifier,this.source))}}]),t}(),Pe=function(t){Object(o.a)(n,t);var e=Object(s.a)(n);function n(t,i,a){var r;return Object(l.a)(this,n),(r=e.call(this,t)).notifier=i,r.source=a,r}return Object(c.a)(n,[{key:"error",value:function(t){if(!this.isStopped){var e=this.errors,i=this.retries,a=this.retriesSubscription;if(i)this.errors=void 0,this.retriesSubscription=void 0;else{e=new ce.b;try{i=(0,this.notifier)(e)}catch(r){return Object(h.a)(Object(g.a)(n.prototype),"error",this).call(this,r)}a=Object(d.c)(i,new d.a(this))}this._unsubscribeAndRecycle(),this.errors=e,this.retries=i,this.retriesSubscription=a,e.next(t)}}},{key:"_unsubscribe",value:function(){var t=this.errors,e=this.retriesSubscription;t&&(t.unsubscribe(),this.errors=void 0),e&&(e.unsubscribe(),this.retriesSubscription=void 0),this.retries=void 0}},{key:"notifyNext",value:function(){var t=this._unsubscribe;this._unsubscribe=null,this._unsubscribeAndRecycle(),this._unsubscribe=t,this.source.subscribe(this)}}]),n}(d.b),De=n("x+ZX");function ke(t){return function(e){return e.lift(new je(t))}}var je=function(){function t(e){Object(l.a)(this,t),this.notifier=e}return Object(c.a)(t,[{key:"call",value:function(t,e){var n=new Ae(t),i=e.subscribe(n);return i.add(Object(d.c)(this.notifier,new d.a(n))),i}}]),t}(),Ae=function(t){Object(o.a)(n,t);var e=Object(s.a)(n);function n(){var t;return Object(l.a)(this,n),(t=e.apply(this,arguments)).hasValue=!1,t}return Object(c.a)(n,[{key:"_next",value:function(t){this.value=t,this.hasValue=!0}},{key:"notifyNext",value:function(){this.emitValue()}},{key:"notifyComplete",value:function(){this.emitValue()}},{key:"emitValue",value:function(){this.hasValue&&(this.hasValue=!1,this.destination.next(this.value))}}]),n}(d.b);function _e(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:y.a;return function(n){return n.lift(new Le(t,e))}}var Le=function(){function t(e,n){Object(l.a)(this,t),this.period=e,this.scheduler=n}return Object(c.a)(t,[{key:"call",value:function(t,e){return e.subscribe(new Ve(t,this.period,this.scheduler))}}]),t}(),Ve=function(t){Object(o.a)(n,t);var e=Object(s.a)(n);function n(t,i,a){var o;return Object(l.a)(this,n),(o=e.call(this,t)).period=i,o.scheduler=a,o.hasValue=!1,o.add(a.schedule(Re,i,{subscriber:Object(r.a)(o),period:i})),o}return Object(c.a)(n,[{key:"_next",value:function(t){this.lastValue=t,this.hasValue=!0}},{key:"notifyNext",value:function(){this.hasValue&&(this.hasValue=!1,this.destination.next(this.lastValue))}}]),n}(b.a);function Re(t){var e=t.subscriber,n=t.period;e.notifyNext(),this.schedule(t,n)}var Ne=n("Kqap");function Ge(t,e){return function(n){return n.lift(new Be(t,e))}}var Be=function(){function t(e,n){Object(l.a)(this,t),this.compareTo=e,this.comparator=n}return Object(c.a)(t,[{key:"call",value:function(t,e){return e.subscribe(new Ue(t,this.compareTo,this.comparator))}}]),t}(),Ue=function(t){Object(o.a)(n,t);var e=Object(s.a)(n);function n(t,i,a){var o;return Object(l.a)(this,n),(o=e.call(this,t)).compareTo=i,o.comparator=a,o._a=[],o._b=[],o._oneComplete=!1,o.destination.add(i.subscribe(new qe(t,Object(r.a)(o)))),o}return Object(c.a)(n,[{key:"_next",value:function(t){this._oneComplete&&0===this._b.length?this.emit(!1):(this._a.push(t),this.checkValues())}},{key:"_complete",value:function(){this._oneComplete?this.emit(0===this._a.length&&0===this._b.length):this._oneComplete=!0,this.unsubscribe()}},{key:"checkValues",value:function(){for(var t=this._a,e=this._b,n=this.comparator;t.length>0&&e.length>0;){var i=t.shift(),a=e.shift(),r=!1;try{r=n?n(i,a):i===a}catch(o){this.destination.error(o)}r||this.emit(!1)}}},{key:"emit",value:function(t){var e=this.destination;e.next(t),e.complete()}},{key:"nextB",value:function(t){this._oneComplete&&0===this._a.length?this.emit(!1):(this._b.push(t),this.checkValues())}},{key:"completeB",value:function(){this._oneComplete?this.emit(0===this._a.length&&0===this._b.length):this._oneComplete=!0}}]),n}(b.a),qe=function(t){Object(o.a)(n,t);var e=Object(s.a)(n);function n(t,i){var a;return Object(l.a)(this,n),(a=e.call(this,t)).parent=i,a}return Object(c.a)(n,[{key:"_next",value:function(t){this.parent.nextB(t)}},{key:"_error",value:function(t){this.parent.error(t),this.unsubscribe()}},{key:"_complete",value:function(){this.parent.completeB(),this.unsubscribe()}}]),n}(b.a),We=n("w1tV"),ze=n("UXun"),Ke=n("sVev");function He(t){return function(e){return e.lift(new $e(t,e))}}var $e=function(){function t(e,n){Object(l.a)(this,t),this.predicate=e,this.source=n}return Object(c.a)(t,[{key:"call",value:function(t,e){return e.subscribe(new Qe(t,this.predicate,this.source))}}]),t}(),Qe=function(t){Object(o.a)(n,t);var e=Object(s.a)(n);function n(t,i,a){var r;return Object(l.a)(this,n),(r=e.call(this,t)).predicate=i,r.source=a,r.seenValue=!1,r.index=0,r}return Object(c.a)(n,[{key:"applySingleValue",value:function(t){this.seenValue?this.destination.error("Sequence contains more than one element"):(this.seenValue=!0,this.singleValue=t)}},{key:"_next",value:function(t){var e=this.index++;this.predicate?this.tryNext(t,e):this.applySingleValue(t)}},{key:"tryNext",value:function(t,e){try{this.predicate(t,e,this.source)&&this.applySingleValue(t)}catch(n){this.destination.error(n)}}},{key:"_complete",value:function(){var t=this.destination;this.index>0?(t.next(this.seenValue?this.singleValue:void 0),t.complete()):t.error(new Ke.a)}}]),n}(b.a),Xe=n("zP0r");function Ye(t){return function(e){return e.lift(new Je(t))}}var Je=function(){function t(e){if(Object(l.a)(this,t),this._skipCount=e,this._skipCount<0)throw new mt.a}return Object(c.a)(t,[{key:"call",value:function(t,e){return 0===this._skipCount?e.subscribe(new b.a(t)):e.subscribe(new Ze(t,this._skipCount))}}]),t}(),Ze=function(t){Object(o.a)(n,t);var e=Object(s.a)(n);function n(t,i){var a;return Object(l.a)(this,n),(a=e.call(this,t))._skipCount=i,a._count=0,a._ring=new Array(i),a}return Object(c.a)(n,[{key:"_next",value:function(t){var e=this._skipCount,n=this._count++;if(n<e)this._ring[n]=t;else{var i=n%e,a=this._ring,r=a[i];a[i]=t,this.destination.next(r)}}}]),n}(b.a);function tn(t){return function(e){return e.lift(new en(t))}}var en=function(){function t(e){Object(l.a)(this,t),this.notifier=e}return Object(c.a)(t,[{key:"call",value:function(t,e){return e.subscribe(new nn(t,this.notifier))}}]),t}(),nn=function(t){Object(o.a)(n,t);var e=Object(s.a)(n);function n(t,i){var a;Object(l.a)(this,n),(a=e.call(this,t)).hasValue=!1;var o=new d.a(Object(r.a)(a));a.add(o),a.innerSubscription=o;var s=Object(d.c)(i,o);return s!==o&&(a.add(s),a.innerSubscription=s),a}return Object(c.a)(n,[{key:"_next",value:function(t){this.hasValue&&Object(h.a)(Object(g.a)(n.prototype),"_next",this).call(this,t)}},{key:"notifyNext",value:function(){this.hasValue=!0,this.innerSubscription&&this.innerSubscription.unsubscribe()}},{key:"notifyComplete",value:function(){}}]),n}(d.b),an=n("32Ea"),rn=n("JX91"),on=n("7Hc7"),sn=n("Y7HM"),ln=function(t){Object(o.a)(n,t);var e=Object(s.a)(n);function n(t){var i,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:on.a;return Object(l.a)(this,n),(i=e.call(this)).source=t,i.delayTime=a,i.scheduler=r,(!Object(sn.a)(a)||a<0)&&(i.delayTime=0),r&&"function"==typeof r.schedule||(i.scheduler=on.a),i}return Object(c.a)(n,[{key:"_subscribe",value:function(t){var e=this.delayTime,i=this.source;return this.scheduler.schedule(n.dispatch,e,{source:i,subscriber:t})}}],[{key:"create",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:on.a;return new n(t,e,i)}},{key:"dispatch",value:function(t){var e=t.source,n=t.subscriber;return this.add(e.subscribe(n))}}]),n}(it.a);function cn(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return function(n){return n.lift(new dn(t,e))}}var dn=function(){function t(e,n){Object(l.a)(this,t),this.scheduler=e,this.delay=n}return Object(c.a)(t,[{key:"call",value:function(t,e){return new ln(e,this.delay,this.scheduler).subscribe(t)}}]),t}(),pn=n("eIep"),un=n("SpAZ");function mn(){return Object(pn.a)(un.a)}function fn(t,e){return e?Object(pn.a)((function(){return t}),e):Object(pn.a)((function(){return t}))}var hn=n("BFxc"),gn=n("1G5W"),yn=n("GJmQ"),bn=n("vkgz"),vn={leading:!0,trailing:!1};function xn(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:vn;return function(n){return n.lift(new Cn(t,!!e.leading,!!e.trailing))}}var Cn=function(){function t(e,n,i){Object(l.a)(this,t),this.durationSelector=e,this.leading=n,this.trailing=i}return Object(c.a)(t,[{key:"call",value:function(t,e){return e.subscribe(new Sn(t,this.durationSelector,this.leading,this.trailing))}}]),t}(),Sn=function(t){Object(o.a)(n,t);var e=Object(s.a)(n);function n(t,i,a,r){var o;return Object(l.a)(this,n),(o=e.call(this,t)).destination=t,o.durationSelector=i,o._leading=a,o._trailing=r,o._hasValue=!1,o}return Object(c.a)(n,[{key:"_next",value:function(t){this._hasValue=!0,this._sendValue=t,this._throttled||(this._leading?this.send():this.throttle(t))}},{key:"send",value:function(){var t=this._hasValue,e=this._sendValue;t&&(this.destination.next(e),this.throttle(e)),this._hasValue=!1,this._sendValue=void 0}},{key:"throttle",value:function(t){var e=this.tryDurationSelector(t);e&&this.add(this._throttled=Object(d.c)(e,new d.a(this)))}},{key:"tryDurationSelector",value:function(t){try{return this.durationSelector(t)}catch(e){return this.destination.error(e),null}}},{key:"throttlingDone",value:function(){var t=this._throttled,e=this._trailing;t&&t.unsubscribe(),this._throttled=void 0,e&&this.send()}},{key:"notifyNext",value:function(){this.throttlingDone()}},{key:"notifyComplete",value:function(){this.throttlingDone()}}]),n}(d.b);function wn(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:y.a,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:vn;return function(i){return i.lift(new En(t,e,n.leading,n.trailing))}}var En=function(){function t(e,n,i,a){Object(l.a)(this,t),this.duration=e,this.scheduler=n,this.leading=i,this.trailing=a}return Object(c.a)(t,[{key:"call",value:function(t,e){return e.subscribe(new In(t,this.duration,this.scheduler,this.leading,this.trailing))}}]),t}(),In=function(t){Object(o.a)(n,t);var e=Object(s.a)(n);function n(t,i,a,r,o){var s;return Object(l.a)(this,n),(s=e.call(this,t)).duration=i,s.scheduler=a,s.leading=r,s.trailing=o,s._hasTrailingValue=!1,s._trailingValue=null,s}return Object(c.a)(n,[{key:"_next",value:function(t){this.throttled?this.trailing&&(this._trailingValue=t,this._hasTrailingValue=!0):(this.add(this.throttled=this.scheduler.schedule(On,this.duration,{subscriber:this})),this.leading?this.destination.next(t):this.trailing&&(this._trailingValue=t,this._hasTrailingValue=!0))}},{key:"_complete",value:function(){this._hasTrailingValue?(this.destination.next(this._trailingValue),this.destination.complete()):this.destination.complete()}},{key:"clearThrottle",value:function(){var t=this.throttled;t&&(this.trailing&&this._hasTrailingValue&&(this.destination.next(this._trailingValue),this._trailingValue=null,this._hasTrailingValue=!1),t.unsubscribe(),this.remove(t),this.throttled=null)}}]),n}(b.a);function On(t){t.subscriber.clearThrottle()}var Tn=n("NXyV");function Mn(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y.a;return function(e){return Object(Tn.a)((function(){return e.pipe(Object(Ne.a)((function(e,n){var i=e.current;return{value:n,current:t.now(),last:i}}),{current:t.now(),value:void 0,last:void 0}),Object(Gt.a)((function(t){var e=t.current,n=t.last,i=t.value;return new Fn(i,e-n)})))}))}}var Fn=function t(e,n){Object(l.a)(this,t),this.value=e,this.interval=n},Pn=n("tS1D"),Dn=n("syX2");function kn(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y.a;return Object(Gt.a)((function(e){return new jn(e,t.now())}))}var jn=function t(e,n){Object(l.a)(this,t),this.value=e,this.timestamp=n},An=n("IAdc");function _n(t){return function(e){return e.lift(new Ln(t))}}var Ln=function(){function t(e){Object(l.a)(this,t),this.windowBoundaries=e}return Object(c.a)(t,[{key:"call",value:function(t,e){var n=new Vn(t),i=e.subscribe(n);return i.closed||n.add(Object(d.c)(this.windowBoundaries,new d.a(n))),i}}]),t}(),Vn=function(t){Object(o.a)(n,t);var e=Object(s.a)(n);function n(t){var i;return Object(l.a)(this,n),(i=e.call(this,t)).window=new ce.b,t.next(i.window),i}return Object(c.a)(n,[{key:"notifyNext",value:function(){this.openWindow()}},{key:"notifyError",value:function(t){this._error(t)}},{key:"notifyComplete",value:function(){this._complete()}},{key:"_next",value:function(t){this.window.next(t)}},{key:"_error",value:function(t){this.window.error(t),this.destination.error(t)}},{key:"_complete",value:function(){this.window.complete(),this.destination.complete()}},{key:"_unsubscribe",value:function(){this.window=null}},{key:"openWindow",value:function(){var t=this.window;t&&t.complete();var e=this.destination,n=this.window=new ce.b;e.next(n)}}]),n}(d.b);function Rn(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return function(n){return n.lift(new Nn(t,e))}}var Nn=function(){function t(e,n){Object(l.a)(this,t),this.windowSize=e,this.startWindowEvery=n}return Object(c.a)(t,[{key:"call",value:function(t,e){return e.subscribe(new Gn(t,this.windowSize,this.startWindowEvery))}}]),t}(),Gn=function(t){Object(o.a)(n,t);var e=Object(s.a)(n);function n(t,i,a){var r;return Object(l.a)(this,n),(r=e.call(this,t)).destination=t,r.windowSize=i,r.startWindowEvery=a,r.windows=[new ce.b],r.count=0,t.next(r.windows[0]),r}return Object(c.a)(n,[{key:"_next",value:function(t){for(var e=this.startWindowEvery>0?this.startWindowEvery:this.windowSize,n=this.destination,i=this.windowSize,a=this.windows,r=a.length,o=0;o<r&&!this.closed;o++)a[o].next(t);var s=this.count-i+1;if(s>=0&&s%e==0&&!this.closed&&a.shift().complete(),++this.count%e==0&&!this.closed){var l=new ce.b;a.push(l),n.next(l)}}},{key:"_error",value:function(t){var e=this.windows;if(e)for(;e.length>0&&!this.closed;)e.shift().error(t);this.destination.error(t)}},{key:"_complete",value:function(){var t=this.windows;if(t)for(;t.length>0&&!this.closed;)t.shift().complete();this.destination.complete()}},{key:"_unsubscribe",value:function(){this.count=0,this.windows=null}}]),n}(b.a);function Bn(t){var e=y.a,n=null,i=Number.POSITIVE_INFINITY;return Object(v.a)(arguments[3])&&(e=arguments[3]),Object(v.a)(arguments[2])?e=arguments[2]:Object(sn.a)(arguments[2])&&(i=Number(arguments[2])),Object(v.a)(arguments[1])?e=arguments[1]:Object(sn.a)(arguments[1])&&(n=Number(arguments[1])),function(a){return a.lift(new Un(t,n,i,e))}}var Un=function(){function t(e,n,i,a){Object(l.a)(this,t),this.windowTimeSpan=e,this.windowCreationInterval=n,this.maxWindowSize=i,this.scheduler=a}return Object(c.a)(t,[{key:"call",value:function(t,e){return e.subscribe(new Wn(t,this.windowTimeSpan,this.windowCreationInterval,this.maxWindowSize,this.scheduler))}}]),t}(),qn=function(t){Object(o.a)(n,t);var e=Object(s.a)(n);function n(){var t;return Object(l.a)(this,n),(t=e.apply(this,arguments))._numberOfNextedValues=0,t}return Object(c.a)(n,[{key:"next",value:function(t){this._numberOfNextedValues++,Object(h.a)(Object(g.a)(n.prototype),"next",this).call(this,t)}},{key:"numberOfNextedValues",get:function(){return this._numberOfNextedValues}}]),n}(ce.b),Wn=function(t){Object(o.a)(n,t);var e=Object(s.a)(n);function n(t,i,a,o,s){var c;Object(l.a)(this,n),(c=e.call(this,t)).destination=t,c.windowTimeSpan=i,c.windowCreationInterval=a,c.maxWindowSize=o,c.scheduler=s,c.windows=[];var d=c.openWindow();if(null!==a&&a>=0){var p={subscriber:Object(r.a)(c),window:d,context:null},u={windowTimeSpan:i,windowCreationInterval:a,subscriber:Object(r.a)(c),scheduler:s};c.add(s.schedule(Hn,i,p)),c.add(s.schedule(Kn,a,u))}else{var m={subscriber:Object(r.a)(c),window:d,windowTimeSpan:i};c.add(s.schedule(zn,i,m))}return c}return Object(c.a)(n,[{key:"_next",value:function(t){for(var e=this.windows,n=e.length,i=0;i<n;i++){var a=e[i];a.closed||(a.next(t),a.numberOfNextedValues>=this.maxWindowSize&&this.closeWindow(a))}}},{key:"_error",value:function(t){for(var e=this.windows;e.length>0;)e.shift().error(t);this.destination.error(t)}},{key:"_complete",value:function(){for(var t=this.windows;t.length>0;){var e=t.shift();e.closed||e.complete()}this.destination.complete()}},{key:"openWindow",value:function(){var t=new qn;return this.windows.push(t),this.destination.next(t),t}},{key:"closeWindow",value:function(t){t.complete();var e=this.windows;e.splice(e.indexOf(t),1)}}]),n}(b.a);function zn(t){var e=t.subscriber,n=t.windowTimeSpan,i=t.window;i&&e.closeWindow(i),t.window=e.openWindow(),this.schedule(t,n)}function Kn(t){var e=t.windowTimeSpan,n=t.subscriber,i=t.scheduler,a=t.windowCreationInterval,r=n.openWindow(),o={action:this,subscription:null},s={subscriber:n,window:r,context:o};o.subscription=i.schedule(Hn,e,s),this.add(o.subscription),this.schedule(t,a)}function Hn(t){var e=t.subscriber,n=t.window,i=t.context;i&&i.action&&i.subscription&&i.action.remove(i.subscription),e.closeWindow(n)}function $n(t,e){return function(n){return n.lift(new Qn(t,e))}}var Qn=function(){function t(e,n){Object(l.a)(this,t),this.openings=e,this.closingSelector=n}return Object(c.a)(t,[{key:"call",value:function(t,e){return e.subscribe(new Xn(t,this.openings,this.closingSelector))}}]),t}(),Xn=function(t){Object(o.a)(n,t);var e=Object(s.a)(n);function n(t,i,a){var o;return Object(l.a)(this,n),(o=e.call(this,t)).openings=i,o.closingSelector=a,o.contexts=[],o.add(o.openSubscription=Object(M.a)(Object(r.a)(o),i,i)),o}return Object(c.a)(n,[{key:"_next",value:function(t){var e=this.contexts;if(e)for(var n=e.length,i=0;i<n;i++)e[i].window.next(t)}},{key:"_error",value:function(t){var e=this.contexts;if(this.contexts=null,e)for(var i=e.length,a=-1;++a<i;){var r=e[a];r.window.error(t),r.subscription.unsubscribe()}Object(h.a)(Object(g.a)(n.prototype),"_error",this).call(this,t)}},{key:"_complete",value:function(){var t=this.contexts;if(this.contexts=null,t)for(var e=t.length,i=-1;++i<e;){var a=t[i];a.window.complete(),a.subscription.unsubscribe()}Object(h.a)(Object(g.a)(n.prototype),"_complete",this).call(this)}},{key:"_unsubscribe",value:function(){var t=this.contexts;if(this.contexts=null,t)for(var e=t.length,n=-1;++n<e;){var i=t[n];i.window.unsubscribe(),i.subscription.unsubscribe()}}},{key:"notifyNext",value:function(t,e,n,i,a){if(t===this.openings){var r;try{r=(0,this.closingSelector)(e)}catch(d){return this.error(d)}var o=new ce.b,s=new T.a,l={window:o,subscription:s};this.contexts.push(l);var c=Object(M.a)(this,r,l);c.closed?this.closeWindow(this.contexts.length-1):(c.context=l,s.add(c)),this.destination.next(o)}else this.closeWindow(this.contexts.indexOf(t))}},{key:"notifyError",value:function(t){this.error(t)}},{key:"notifyComplete",value:function(t){t!==this.openSubscription&&this.closeWindow(this.contexts.indexOf(t.context))}},{key:"closeWindow",value:function(t){if(-1!==t){var e=this.contexts,n=e[t],i=n.window,a=n.subscription;e.splice(t,1),i.complete(),a.unsubscribe()}}}]),n}(F.a);function Yn(t){return function(e){return e.lift(new Jn(t))}}var Jn=function(){function t(e){Object(l.a)(this,t),this.closingSelector=e}return Object(c.a)(t,[{key:"call",value:function(t,e){return e.subscribe(new Zn(t,this.closingSelector))}}]),t}(),Zn=function(t){Object(o.a)(n,t);var e=Object(s.a)(n);function n(t,i){var a;return Object(l.a)(this,n),(a=e.call(this,t)).destination=t,a.closingSelector=i,a.openWindow(),a}return Object(c.a)(n,[{key:"notifyNext",value:function(t,e,n,i,a){this.openWindow(a)}},{key:"notifyError",value:function(t){this._error(t)}},{key:"notifyComplete",value:function(t){this.openWindow(t)}},{key:"_next",value:function(t){this.window.next(t)}},{key:"_error",value:function(t){this.window.error(t),this.destination.error(t),this.unsubscribeClosingNotification()}},{key:"_complete",value:function(){this.window.complete(),this.destination.complete(),this.unsubscribeClosingNotification()}},{key:"unsubscribeClosingNotification",value:function(){this.closingNotification&&this.closingNotification.unsubscribe()}},{key:"openWindow",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;t&&(this.remove(t),t.unsubscribe());var e=this.window;e&&e.complete();var n,i=this.window=new ce.b;this.destination.next(i);try{var a=this.closingSelector;n=a()}catch(r){return this.destination.error(r),this.window.error(r),void 0}this.add(this.closingNotification=Object(M.a)(this,n))}}]),n}(F.a),ti=n("zp1y"),ei=n("1uah");function ni(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(t){return t.lift.call(ei.b.apply(void 0,[t].concat(e)))}}function ii(t){return function(e){return e.lift(new ei.a(t))}}},lVMo:function(t,e,n){"use strict";n.d(e,"a",(function(){return B}));var i=n("mrSG"),a=n("fXoL"),r=n("FKr1"),o=n("0IaG"),s=n("3Pt+"),l=n("gmuX"),c=n("xw5a"),d=n("JIJk"),p=n("aX2P"),u=n("l7P3"),m=n("tyNb"),f=n("sYmb"),h=n("/t3+"),g=n("XiUz"),y=n("bTqV"),b=n("NFeN"),v=n("ofXK"),x=n("mcsV"),C=n("kmnG"),S=n("d3UM"),w=n("bv9b"),E=n("qFsG");function I(t,e){1&t&&a["\u0275\u0275element"](0,"mat-progress-bar",20)}function O(t,e){if(1&t&&(a["\u0275\u0275elementStart"](0,"mat-option",21),a["\u0275\u0275text"](1),a["\u0275\u0275pipe"](2,"translate"),a["\u0275\u0275elementEnd"]()),2&t){var n=e.$implicit,i=a["\u0275\u0275nextContext"]();a["\u0275\u0275property"]("value",n),a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](2,2,i.alarmConditionTypeTranslation.get(n))," ")}}function T(t,e){1&t&&(a["\u0275\u0275elementStart"](0,"mat-error"),a["\u0275\u0275text"](1),a["\u0275\u0275pipe"](2,"translate"),a["\u0275\u0275elementEnd"]()),2&t&&(a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](2,1,"device-profile.condition-type-required")," "))}function M(t,e){1&t&&(a["\u0275\u0275elementStart"](0,"mat-error"),a["\u0275\u0275text"](1),a["\u0275\u0275pipe"](2,"translate"),a["\u0275\u0275elementEnd"]()),2&t&&(a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](2,1,"device-profile.condition-duration-value-required")," "))}function F(t,e){1&t&&(a["\u0275\u0275elementStart"](0,"mat-error"),a["\u0275\u0275text"](1),a["\u0275\u0275pipe"](2,"translate"),a["\u0275\u0275elementEnd"]()),2&t&&(a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](2,1,"device-profile.condition-duration-value-range")," "))}function P(t,e){1&t&&(a["\u0275\u0275elementStart"](0,"mat-error"),a["\u0275\u0275text"](1),a["\u0275\u0275pipe"](2,"translate"),a["\u0275\u0275elementEnd"]()),2&t&&(a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](2,1,"device-profile.condition-duration-value-range")," "))}function D(t,e){1&t&&(a["\u0275\u0275elementStart"](0,"mat-error"),a["\u0275\u0275text"](1),a["\u0275\u0275pipe"](2,"translate"),a["\u0275\u0275elementEnd"]()),2&t&&(a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](2,1,"device-profile.condition-duration-value-pattern")," "))}function k(t,e){if(1&t&&(a["\u0275\u0275elementStart"](0,"mat-option",21),a["\u0275\u0275text"](1),a["\u0275\u0275pipe"](2,"translate"),a["\u0275\u0275elementEnd"]()),2&t){var n=e.$implicit,i=a["\u0275\u0275nextContext"](2);a["\u0275\u0275property"]("value",n),a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](2,2,i.timeUnitTranslations.get(n))," ")}}function j(t,e){1&t&&(a["\u0275\u0275elementStart"](0,"mat-error"),a["\u0275\u0275text"](1),a["\u0275\u0275pipe"](2,"translate"),a["\u0275\u0275elementEnd"]()),2&t&&(a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](2,1,"device-profile.condition-duration-time-unit-required")," "))}function A(t,e){if(1&t&&(a["\u0275\u0275elementStart"](0,"div",22),a["\u0275\u0275elementStart"](1,"mat-form-field",23),a["\u0275\u0275element"](2,"mat-label"),a["\u0275\u0275element"](3,"input",24),a["\u0275\u0275pipe"](4,"translate"),a["\u0275\u0275template"](5,M,3,3,"mat-error",15),a["\u0275\u0275template"](6,F,3,3,"mat-error",15),a["\u0275\u0275template"](7,P,3,3,"mat-error",15),a["\u0275\u0275template"](8,D,3,3,"mat-error",15),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](9,"mat-form-field",23),a["\u0275\u0275element"](10,"mat-label"),a["\u0275\u0275elementStart"](11,"mat-select",25),a["\u0275\u0275pipe"](12,"translate"),a["\u0275\u0275template"](13,k,3,4,"mat-option",14),a["\u0275\u0275elementEnd"](),a["\u0275\u0275template"](14,j,3,3,"mat-error",15),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()),2&t){var n=a["\u0275\u0275nextContext"]();a["\u0275\u0275advance"](3),a["\u0275\u0275propertyInterpolate"]("placeholder",a["\u0275\u0275pipeBind1"](4,8,"device-profile.condition-duration-value")),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("ngIf",n.conditionFormGroup.get("spec.value").hasError("required")),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",n.conditionFormGroup.get("spec.value").hasError("min")),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",n.conditionFormGroup.get("spec.value").hasError("max")),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",n.conditionFormGroup.get("spec.value").hasError("pattern")),a["\u0275\u0275advance"](3),a["\u0275\u0275propertyInterpolate"]("placeholder",a["\u0275\u0275pipeBind1"](12,10,"device-profile.condition-duration-time-unit")),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("ngForOf",n.timeUnits),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",n.conditionFormGroup.get("spec.unit").hasError("required"))}}function _(t,e){1&t&&(a["\u0275\u0275elementStart"](0,"mat-error"),a["\u0275\u0275text"](1),a["\u0275\u0275pipe"](2,"translate"),a["\u0275\u0275elementEnd"]()),2&t&&(a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](2,1,"device-profile.condition-repeating-value-required")," "))}function L(t,e){1&t&&(a["\u0275\u0275elementStart"](0,"mat-error"),a["\u0275\u0275text"](1),a["\u0275\u0275pipe"](2,"translate"),a["\u0275\u0275elementEnd"]()),2&t&&(a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](2,1,"device-profile.condition-repeating-value-range")," "))}function V(t,e){1&t&&(a["\u0275\u0275elementStart"](0,"mat-error"),a["\u0275\u0275text"](1),a["\u0275\u0275pipe"](2,"translate"),a["\u0275\u0275elementEnd"]()),2&t&&(a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](2,1,"device-profile.condition-repeating-value-range")," "))}function R(t,e){1&t&&(a["\u0275\u0275elementStart"](0,"mat-error"),a["\u0275\u0275text"](1),a["\u0275\u0275pipe"](2,"translate"),a["\u0275\u0275elementEnd"]()),2&t&&(a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](2,1,"device-profile.condition-repeating-value-pattern")," "))}function N(t,e){if(1&t&&(a["\u0275\u0275elementStart"](0,"div",22),a["\u0275\u0275elementStart"](1,"mat-form-field",23),a["\u0275\u0275element"](2,"mat-label"),a["\u0275\u0275element"](3,"input",26),a["\u0275\u0275pipe"](4,"translate"),a["\u0275\u0275template"](5,_,3,3,"mat-error",15),a["\u0275\u0275template"](6,L,3,3,"mat-error",15),a["\u0275\u0275template"](7,V,3,3,"mat-error",15),a["\u0275\u0275template"](8,R,3,3,"mat-error",15),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()),2&t){var n=a["\u0275\u0275nextContext"]();a["\u0275\u0275advance"](3),a["\u0275\u0275propertyInterpolate"]("placeholder",a["\u0275\u0275pipeBind1"](4,5,"device-profile.condition-repeating-value")),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("ngIf",n.conditionFormGroup.get("spec.count").hasError("required")),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",n.conditionFormGroup.get("spec.count").hasError("min")),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",n.conditionFormGroup.get("spec.count").hasError("max")),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",n.conditionFormGroup.get("spec.count").hasError("pattern"))}}function G(t,e){if(1&t&&(a["\u0275\u0275elementStart"](0,"button",27),a["\u0275\u0275pipe"](1,"async"),a["\u0275\u0275text"](2),a["\u0275\u0275pipe"](3,"translate"),a["\u0275\u0275elementEnd"]()),2&t){var n=a["\u0275\u0275nextContext"]();a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](1,2,n.isLoading$)||n.conditionFormGroup.invalid||!n.conditionFormGroup.dirty),a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](3,4,"action.save")," ")}}var B=function(t){function e(e,n,i,a,r,o,l){var u,m,f,h,g=t.call(this,e,n,r)||this;return g.store=e,g.router=n,g.data=i,g.errorStateMatcher=a,g.dialogRef=r,g.fb=o,g.translate=l,g.timeUnits=Object.keys(p.j),g.timeUnitTranslations=p.L,g.alarmConditionTypes=Object.keys(d.a),g.AlarmConditionType=d.a,g.alarmConditionTypeTranslation=d.b,g.readonly=g.data.readonly,g.condition=g.data.condition,g.entityId=g.data.entityId,g.submitted=!1,g.conditionFormGroup=g.fb.group({keyFilters:[Object(c.E)(null===(u=g.condition)||void 0===u?void 0:u.condition),s.Validators.required],spec:g.fb.group({type:[d.a.SIMPLE,s.Validators.required],unit:[{value:null,disable:!0},s.Validators.required],value:[{value:null,disable:!0},[s.Validators.required,s.Validators.min(1),s.Validators.max(2147483647),s.Validators.pattern("[0-9]*")]],count:[{value:null,disable:!0},[s.Validators.required,s.Validators.min(1),s.Validators.max(2147483647),s.Validators.pattern("[0-9]*")]]})}),g.conditionFormGroup.patchValue({spec:null===(m=g.condition)||void 0===m?void 0:m.spec}),g.conditionFormGroup.get("spec.type").valueChanges.subscribe((function(t){g.updateValidators(t,!0,!0)})),g.readonly?g.conditionFormGroup.disable({emitEvent:!1}):g.updateValidators(null===(h=null===(f=g.condition)||void 0===f?void 0:f.spec)||void 0===h?void 0:h.type),g}return Object(i.d)(e,t),e.prototype.ngOnInit=function(){},e.prototype.isErrorState=function(t,e){var n=this.errorStateMatcher.isErrorState(t,e),i=!!(t&&t.invalid&&this.submitted);return n||i},e.prototype.updateValidators=function(t,e,n){switch(void 0===e&&(e=!1),void 0===n&&(n=!1),t){case d.a.DURATION:this.conditionFormGroup.get("spec.value").enable(),this.conditionFormGroup.get("spec.unit").enable(),this.conditionFormGroup.get("spec.count").disable(),e&&this.conditionFormGroup.get("spec").patchValue({count:null});break;case d.a.REPEATING:this.conditionFormGroup.get("spec.count").enable(),this.conditionFormGroup.get("spec.value").disable(),this.conditionFormGroup.get("spec.unit").disable(),e&&this.conditionFormGroup.get("spec").patchValue({value:null,unit:null});break;case d.a.SIMPLE:this.conditionFormGroup.get("spec.value").disable(),this.conditionFormGroup.get("spec.unit").disable(),this.conditionFormGroup.get("spec.count").disable(),e&&this.conditionFormGroup.get("spec").patchValue({value:null,unit:null,count:null})}this.conditionFormGroup.get("spec.value").updateValueAndValidity({emitEvent:n}),this.conditionFormGroup.get("spec.unit").updateValueAndValidity({emitEvent:n}),this.conditionFormGroup.get("spec.count").updateValueAndValidity({emitEvent:n})},e.prototype.cancel=function(){this.dialogRef.close(null)},e.prototype.save=function(){this.submitted=!0,this.condition={condition:Object(c.D)(this.conditionFormGroup.get("keyFilters").value),spec:this.conditionFormGroup.get("spec").value},this.dialogRef.close(this.condition)},e.\u0275fac=function(t){return new(t||e)(a["\u0275\u0275directiveInject"](u.Store),a["\u0275\u0275directiveInject"](m.Router),a["\u0275\u0275directiveInject"](o.MAT_DIALOG_DATA),a["\u0275\u0275directiveInject"](r.ErrorStateMatcher,4),a["\u0275\u0275directiveInject"](o.MatDialogRef),a["\u0275\u0275directiveInject"](s.FormBuilder),a["\u0275\u0275directiveInject"](f.TranslateService))},e.\u0275cmp=a["\u0275\u0275defineComponent"]({type:e,selectors:[["tb-alarm-rule-condition-dialog"]],features:[a["\u0275\u0275ProvidersFeature"]([{provide:r.ErrorStateMatcher,useExisting:e}]),a["\u0275\u0275InheritDefinitionFeature"]],decls:31,vars:25,consts:[[2,"width","700px",3,"formGroup","ngSubmit"],["color","primary"],["fxFlex",""],["mat-icon-button","","type","button",3,"click"],[1,"material-icons"],["color","warn","mode","indeterminate",4,"ngIf"],["mat-dialog-content",""],[3,"disabled"],["fxFlex","","fxLayout","column"],["formControlName","keyFilters",3,"displayUserParameters","allowUserDynamicSource","telemetryKeysOnly","entityId"],["formGroupName","spec",1,"row"],["hideRequiredMarker","",1,"mat-block"],["translate",""],["formControlName","type","required",""],[3,"value",4,"ngFor","ngForOf"],[4,"ngIf"],["fxLayout","row","fxLayoutGap","8px",4,"ngIf"],["mat-dialog-actions","","fxLayoutAlign","end center"],["mat-button","","color","primary","type","button","cdkFocusInitial","",3,"disabled","click"],["mat-raised-button","","color","primary","type","submit",3,"disabled",4,"ngIf"],["color","warn","mode","indeterminate"],[3,"value"],["fxLayout","row","fxLayoutGap","8px"],["hideRequiredMarker","","fxFlex","","floatLabel","always",1,"mat-block"],["type","number","required","","step","1","min","1","max","2147483647","matInput","","formControlName","value",3,"placeholder"],["formControlName","unit","required","",3,"placeholder"],["type","number","required","","step","1","min","1","max","2147483647","matInput","","formControlName","count",3,"placeholder"],["mat-raised-button","","color","primary","type","submit",3,"disabled"]],template:function(t,e){1&t&&(a["\u0275\u0275elementStart"](0,"form",0),a["\u0275\u0275listener"]("ngSubmit",(function(){return e.save()})),a["\u0275\u0275elementStart"](1,"mat-toolbar",1),a["\u0275\u0275elementStart"](2,"h2"),a["\u0275\u0275text"](3),a["\u0275\u0275pipe"](4,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](5,"span",2),a["\u0275\u0275elementStart"](6,"button",3),a["\u0275\u0275listener"]("click",(function(){return e.cancel()})),a["\u0275\u0275elementStart"](7,"mat-icon",4),a["\u0275\u0275text"](8,"close"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275template"](9,I,1,0,"mat-progress-bar",5),a["\u0275\u0275pipe"](10,"async"),a["\u0275\u0275elementStart"](11,"div",6),a["\u0275\u0275elementStart"](12,"fieldset",7),a["\u0275\u0275pipe"](13,"async"),a["\u0275\u0275elementStart"](14,"div",8),a["\u0275\u0275element"](15,"tb-key-filter-list",9),a["\u0275\u0275elementStart"](16,"section",10),a["\u0275\u0275elementStart"](17,"mat-form-field",11),a["\u0275\u0275elementStart"](18,"mat-label",12),a["\u0275\u0275text"](19,"device-profile.condition-type"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](20,"mat-select",13),a["\u0275\u0275template"](21,O,3,4,"mat-option",14),a["\u0275\u0275elementEnd"](),a["\u0275\u0275template"](22,T,3,3,"mat-error",15),a["\u0275\u0275elementEnd"](),a["\u0275\u0275template"](23,A,15,12,"div",16),a["\u0275\u0275template"](24,N,9,7,"div",16),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](25,"div",17),a["\u0275\u0275elementStart"](26,"button",18),a["\u0275\u0275listener"]("click",(function(){return e.cancel()})),a["\u0275\u0275pipe"](27,"async"),a["\u0275\u0275text"](28),a["\u0275\u0275pipe"](29,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275template"](30,G,4,6,"button",19),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()),2&t&&(a["\u0275\u0275property"]("formGroup",e.conditionFormGroup),a["\u0275\u0275advance"](3),a["\u0275\u0275textInterpolate"](a["\u0275\u0275pipeBind1"](4,15,e.readonly?"device-profile.alarm-rule-condition":"device-profile.edit-alarm-rule-condition")),a["\u0275\u0275advance"](6),a["\u0275\u0275property"]("ngIf",a["\u0275\u0275pipeBind1"](10,17,e.isLoading$)),a["\u0275\u0275advance"](3),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](13,19,e.isLoading$)),a["\u0275\u0275advance"](3),a["\u0275\u0275property"]("displayUserParameters",!1)("allowUserDynamicSource",!1)("telemetryKeysOnly",!0)("entityId",e.entityId),a["\u0275\u0275advance"](6),a["\u0275\u0275property"]("ngForOf",e.alarmConditionTypes),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",e.conditionFormGroup.get("spec.type").hasError("required")),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",e.conditionFormGroup.get("spec.type").value==e.AlarmConditionType.DURATION),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",e.conditionFormGroup.get("spec.type").value==e.AlarmConditionType.REPEATING),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](27,21,e.isLoading$)),a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](29,23,e.readonly?"action.close":"action.cancel")," "),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("ngIf",!e.readonly))},directives:[s["\u0275angular_packages_forms_forms_y"],s.NgControlStatusGroup,s.FormGroupDirective,h.MatToolbar,g.b,y.MatButton,b.MatIcon,v.NgIf,o.MatDialogContent,g.f,x.a,s.NgControlStatus,s.FormControlName,s.FormGroupName,C.MatFormField,C.MatLabel,f.TranslateDirective,S.MatSelect,s.RequiredValidator,v.NgForOf,o.MatDialogActions,g.e,w.MatProgressBar,r.MatOption,C.MatError,g.g,s.NumberValueAccessor,E.MatInput,s.DefaultValueAccessor],pipes:[f.TranslatePipe,v.AsyncPipe],styles:["[_nghost-%COMP%]   .row[_ngcontent-%COMP%]{margin-top:1em}"]}),e}(l.a);!function(){a["\u0275setClassMetadata"](B,[{type:a.Component,args:[{selector:"tb-alarm-rule-condition-dialog",templateUrl:"./alarm-rule-condition-dialog.component.html",providers:[{provide:r.ErrorStateMatcher,useExisting:B}],styleUrls:["./alarm-rule-condition-dialog.component.scss"]}]}],(function(){return[{type:u.Store},{type:m.Router},{type:void 0,decorators:[{type:a.Inject,args:[o.MAT_DIALOG_DATA]}]},{type:r.ErrorStateMatcher,decorators:[{type:a.SkipSelf}]},{type:o.MatDialogRef},{type:s.FormBuilder},{type:f.TranslateService}]}),null)}()},lbPe:function(t,e,n){"use strict";n.d(e,"a",(function(){return p}));var i=n("0lYY"),a=n("Duvn"),r=n("fXoL"),o=n("2lgB"),s=n("OiFK"),l=n("//Q6"),c=n("Pmg/"),d=n("LRne"),p=function(){function t(t,e){this.telemetryService=t,this.utils=e}return t.isUnresolvedDatasource=function(t,e){return t.type===i.a.entity?!t.entityFilter||!e:t.type===i.a.entityCount&&!t.entityFilter},t.prototype.prepareSubscription=function(e,n){void 0===n&&(n=!1);var i=e.configDatasource;return e.subscriptionOptions=this.createSubscriptionOptions(i,e.subscriptionType,i.pageLink,i.keyFilters,null,!1,n),t.isUnresolvedDatasource(i,i.pageLink)?Object(d.a)(null):(e.subscription=new c.a(e,this.telemetryService,this.utils),e.subscription.subscribe())},t.prototype.startSubscription=function(t){t.subscription&&(t.subscriptionType===i.k.timeseries?t.subscriptionOptions.subscriptionTimewindow=Object(l.e)(t.subscriptionTimewindow):t.subscriptionType===i.k.latest&&(t.subscriptionOptions.latestTsOffset=t.latestTsOffset),t.subscription.start())},t.prototype.subscribeForPaginatedData=function(e,n,r,o){void 0===o&&(o=!1);var s=e.configDatasource;return e.subscriptionOptions=this.createSubscriptionOptions(s,e.subscriptionType,n,s.keyFilters,r,!0,o),t.isUnresolvedDatasource(s,n)?(e.dataLoaded(Object(a.a)(),[],e.configDatasourceIndex,e.subscriptionOptions.pageLink),Object(d.a)(null)):(e.subscription=new c.a(e,this.telemetryService,this.utils),e.subscriptionType===i.k.timeseries?e.subscriptionOptions.subscriptionTimewindow=Object(l.e)(e.subscriptionTimewindow):e.subscriptionType===i.k.latest&&(e.subscriptionOptions.latestTsOffset=e.latestTsOffset),e.subscription.subscribe())},t.prototype.stopSubscription=function(t){t.subscription&&t.subscription.unsubscribe()},t.prototype.createSubscriptionOptions=function(t,e,n,a,r,o,s){var l=[];t.dataKeys.forEach((function(t){var e={name:t.name,type:t.type,funcBody:t.funcBody,postFuncBody:t.postFuncBody};l.push(e)}));var c={datasourceType:t.type,dataKeys:l,type:e};return c.datasourceType!==i.a.entity&&c.datasourceType!==i.a.entityCount||(c.entityFilter=t.entityFilter,c.keyFilters=a,c.additionalKeyFilters=r,c.datasourceType===i.a.entity&&(c.pageLink=n)),c.isPaginatedDataSubscription=o,c.ignoreDataUpdateOnIntervalTick=s,c},t.\u0275fac=function(e){return new(e||t)(r["\u0275\u0275inject"](o.a),r["\u0275\u0275inject"](s.a))},t.\u0275prov=r["\u0275\u0275defineInjectable"]({token:t,factory:t.\u0275fac,providedIn:"root"}),t}();!function(){r["\u0275setClassMetadata"](p,[{type:r.Injectable,args:[{providedIn:"root"}]}],(function(){return[{type:o.a},{type:s.a}]}),null)}()},leY2:function(t,e,n){"use strict";n.d(e,"a",(function(){return et}));var i=n("mrSG"),a=n("fXoL"),r=n("RxGS"),o=n("3Pt+"),s=n("OiFK"),l=n("21Fy"),c=n("3Tyt"),d=n("LRne"),p=n("lJxs"),u=n("5+tZ"),m=n("vkgz"),f=n("05l1"),h=n("x+ZX"),g=n("UZbx"),y=n("yAAm"),b=n("l7P3"),v=n("0IaG"),x=n("sYmb"),C=n("wZkO"),S=n("ofXK"),w=n("znSr"),E=n("XiUz"),I=n("kmnG"),O=n("qFsG"),T=n("nii4"),M=n("/1cH"),F=n("bTqV"),P=n("NFeN"),D=n("FKr1"),k=n("bSwM"),j=n("RQSP"),A=n("d5eY"),_=["keyInput"],L=["funcBodyEdit"],V=["postFuncBodyEdit"];function R(t,e){if(1&t){var n=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementStart"](0,"button",19),a["\u0275\u0275listener"]("click",(function(){return a["\u0275\u0275restoreView"](n),a["\u0275\u0275nextContext"](2).clearKey()})),a["\u0275\u0275elementStart"](1,"mat-icon",20),a["\u0275\u0275text"](2,"close"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()}}function N(t,e){if(1&t&&(a["\u0275\u0275elementStart"](0,"mat-option",21),a["\u0275\u0275element"](1,"span",22),a["\u0275\u0275pipe"](2,"highlight"),a["\u0275\u0275elementEnd"]()),2&t){var n=e.$implicit,i=a["\u0275\u0275nextContext"](2);a["\u0275\u0275property"]("value",n),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("innerHTML",a["\u0275\u0275pipeBind2"](2,2,n,i.keySearchText),a["\u0275\u0275sanitizeHtml"])}}function G(t,e){if(1&t&&(a["\u0275\u0275elementStart"](0,"mat-form-field",12),a["\u0275\u0275elementStart"](1,"mat-label"),a["\u0275\u0275text"](2),a["\u0275\u0275pipe"](3,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](4,"input",13,14),a["\u0275\u0275pipe"](6,"translate"),a["\u0275\u0275template"](7,R,3,0,"button",15),a["\u0275\u0275elementStart"](8,"mat-autocomplete",16,17),a["\u0275\u0275template"](10,N,3,5,"mat-option",18),a["\u0275\u0275pipe"](11,"async"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()),2&t){var n=a["\u0275\u0275reference"](9),i=a["\u0275\u0275nextContext"]();a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate"](a["\u0275\u0275pipeBind1"](3,5,"entity.key")),a["\u0275\u0275advance"](2),a["\u0275\u0275propertyInterpolate"]("placeholder",a["\u0275\u0275pipeBind1"](6,7,"entity.key-name")),a["\u0275\u0275property"]("matAutocomplete",n),a["\u0275\u0275advance"](3),a["\u0275\u0275property"]("ngIf",i.dataKeyFormGroup.get("name").value&&!i.dataKeyFormGroup.get("name").disabled),a["\u0275\u0275advance"](3),a["\u0275\u0275property"]("ngForOf",a["\u0275\u0275pipeBind1"](11,9,i.filteredKeys))}}function B(t,e){1&t&&(a["\u0275\u0275elementStart"](0,"div",4),a["\u0275\u0275elementStart"](1,"mat-form-field",23),a["\u0275\u0275elementStart"](2,"mat-label",6),a["\u0275\u0275text"](3,"datakey.units"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](4,"input",24),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](5,"mat-form-field",23),a["\u0275\u0275elementStart"](6,"mat-label",6),a["\u0275\u0275text"](7,"datakey.decimals"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](8,"input",25),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]())}var U=function(){return["time","prevValue"]},q=function(){return[1,1]},W=function(){return[1,"1"]},z=function(t,e){return[t,e]};function K(t,e){1&t&&(a["\u0275\u0275elementStart"](0,"section",26),a["\u0275\u0275elementStart"](1,"span",6),a["\u0275\u0275text"](2,"datakey.data-generation-func"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](3,"br"),a["\u0275\u0275element"](4,"tb-js-func",27,28),a["\u0275\u0275elementEnd"]()),2&t&&(a["\u0275\u0275advance"](4),a["\u0275\u0275property"]("functionArgs",a["\u0275\u0275pureFunction0"](2,U))("validationArgs",a["\u0275\u0275pureFunction2"](5,z,a["\u0275\u0275pureFunction0"](3,q),a["\u0275\u0275pureFunction0"](4,W))))}var H=function(){return["time","value","prevValue","timePrev","prevOrigValue"]},$=function(){return[1,1,1,1,1]},Q=function(){return[1,"1","1",1,"1"]};function X(t,e){1&t&&a["\u0275\u0275element"](0,"tb-js-func",32,33),2&t&&a["\u0275\u0275property"]("functionArgs",a["\u0275\u0275pureFunction0"](2,H))("validationArgs",a["\u0275\u0275pureFunction2"](5,z,a["\u0275\u0275pureFunction0"](3,$),a["\u0275\u0275pureFunction0"](4,Q)))}function Y(t,e){1&t&&(a["\u0275\u0275elementStart"](0,"label",34),a["\u0275\u0275text"](1),a["\u0275\u0275pipe"](2,"translate"),a["\u0275\u0275element"](3,"br"),a["\u0275\u0275text"](4),a["\u0275\u0275pipe"](5,"translate"),a["\u0275\u0275element"](6,"br"),a["\u0275\u0275text"](7),a["\u0275\u0275pipe"](8,"translate"),a["\u0275\u0275element"](9,"br"),a["\u0275\u0275text"](10),a["\u0275\u0275pipe"](11,"translate"),a["\u0275\u0275element"](12,"br"),a["\u0275\u0275text"](13),a["\u0275\u0275pipe"](14,"translate"),a["\u0275\u0275elementEnd"]()),2&t&&(a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"](" time - ",a["\u0275\u0275pipeBind1"](2,5,"datakey.time-description"),""),a["\u0275\u0275advance"](3),a["\u0275\u0275textInterpolate1"](" value - ",a["\u0275\u0275pipeBind1"](5,7,"datakey.value-description"),""),a["\u0275\u0275advance"](3),a["\u0275\u0275textInterpolate1"](" prevValue - ",a["\u0275\u0275pipeBind1"](8,9,"datakey.prev-value-description"),""),a["\u0275\u0275advance"](3),a["\u0275\u0275textInterpolate1"](" timePrev - ",a["\u0275\u0275pipeBind1"](11,11,"datakey.time-prev-description"),""),a["\u0275\u0275advance"](3),a["\u0275\u0275textInterpolate1"](" prevOrigValue - ",a["\u0275\u0275pipeBind1"](14,13,"datakey.prev-orig-value-description")," "))}function J(t,e){if(1&t&&(a["\u0275\u0275elementStart"](0,"section",26),a["\u0275\u0275elementStart"](1,"mat-checkbox",29),a["\u0275\u0275text"](2),a["\u0275\u0275pipe"](3,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275template"](4,X,2,8,"tb-js-func",30),a["\u0275\u0275template"](5,Y,15,15,"label",31),a["\u0275\u0275elementEnd"]()),2&t){var n=a["\u0275\u0275nextContext"]();a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](3,3,"datakey.use-data-post-processing-func")," "),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("ngIf",n.dataKeyFormGroup.get("usePostProcessing").value),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",n.dataKeyFormGroup.get("usePostProcessing").value)}}function Z(t,e){if(1&t&&(a["\u0275\u0275elementStart"](0,"mat-tab",1),a["\u0275\u0275pipe"](1,"translate"),a["\u0275\u0275elementStart"](2,"div",35),a["\u0275\u0275element"](3,"tb-json-form",36),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()),2&t){var n=a["\u0275\u0275nextContext"]();a["\u0275\u0275propertyInterpolate"]("label",a["\u0275\u0275pipeBind1"](1,2,"datakey.advanced")),a["\u0275\u0275property"]("formGroup",n.dataKeySettingsFormGroup)}}var tt=function(t){return{"tb-headless":t}},et=function(t){function e(e,n,i,a,r,o){var s=t.call(this,e)||this;return s.store=e,s.utils=n,s.entityService=i,s.dialog=a,s.translate=r,s.fb=o,s.dataKeyTypes=c.h,s.showPostProcessing=!0,s.displayAdvanced=!1,s.propagateChange=null,s.latestKeySearchResult=null,s.fetchObservable$=null,s.keySearchText="",s}return Object(i.d)(e,t),e.prototype.ngOnInit=function(){var t=this;this.alarmKeys=[];for(var e=0,n=Object.keys(g.e);e<n.length;e++){var i=n[e];this.alarmKeys.push({name:i,type:c.h.alarm})}this.dataKeySettingsSchema&&this.dataKeySettingsSchema.schema&&(this.displayAdvanced=!0,this.dataKeySettingsData={schema:this.dataKeySettingsSchema.schema,form:this.dataKeySettingsSchema.form||["*"]},this.dataKeySettingsFormGroup=this.fb.group({settings:[null,[]]}),this.dataKeySettingsFormGroup.valueChanges.subscribe((function(){t.updateModel()}))),this.dataKeyFormGroup=this.fb.group({name:[null,[]],label:[null,[o.Validators.required]],color:[null,[o.Validators.required]],units:[null,[]],decimals:[null,[o.Validators.min(0),o.Validators.max(15),o.Validators.pattern(/^\d*$/)]],funcBody:[null,[]],usePostProcessing:[null,[]],postFuncBody:[null,[]]}),this.dataKeyFormGroup.valueChanges.subscribe((function(){t.updateModel()})),this.dataKeyFormGroup.get("usePostProcessing").valueChanges.subscribe((function(e){var n=t.dataKeyFormGroup.get("postFuncBody").value;!e||n&&n.length?!e&&n&&n.length&&t.dataKeyFormGroup.get("postFuncBody").patchValue(null):t.dataKeyFormGroup.get("postFuncBody").patchValue("return value;")})),this.filteredKeys=this.dataKeyFormGroup.get("name").valueChanges.pipe(Object(p.a)((function(t){return t||""})),Object(u.b)((function(e){return t.fetchKeys(e)})))},e.prototype.registerOnChange=function(t){this.propagateChange=t},e.prototype.registerOnTouched=function(t){},e.prototype.setDisabledState=function(t){},e.prototype.writeValue=function(t){this.modelValue=t,this.modelValue.postFuncBody&&this.modelValue.postFuncBody.length&&(this.modelValue.usePostProcessing=!0),this.dataKeyFormGroup.patchValue(this.modelValue,{emitEvent:!1}),this.dataKeyFormGroup.get("name").setValidators(this.modelValue.type!==c.h.function&&this.modelValue.type!==c.h.count?[o.Validators.required]:[]),this.modelValue.type===c.h.count?this.dataKeyFormGroup.get("name").disable({emitEvent:!1}):this.dataKeyFormGroup.get("name").enable({emitEvent:!1}),this.dataKeyFormGroup.get("name").updateValueAndValidity({emitEvent:!1}),this.displayAdvanced&&(this.dataKeySettingsData.model=this.modelValue.settings,this.dataKeySettingsFormGroup.patchValue({settings:this.dataKeySettingsData},{emitEvent:!1}))},e.prototype.updateModel=function(){this.modelValue=Object(i.a)(Object(i.a)({},this.modelValue),this.dataKeyFormGroup.value),this.displayAdvanced&&(this.modelValue.settings=this.dataKeySettingsFormGroup.get("settings").value.model),this.modelValue.name&&(this.modelValue.name=this.modelValue.name.trim()),this.propagateChange(this.modelValue)},e.prototype.clearKey=function(){var t=this;this.dataKeyFormGroup.get("name").patchValue(null,{emitEvent:!0}),setTimeout((function(){t.keyInput.nativeElement.blur(),t.keyInput.nativeElement.focus()}),0)},e.prototype.fetchKeys=function(t){var e=this;if(this.keySearchText!==t||null===this.latestKeySearchResult){this.keySearchText=t;var n=this.createKeyFilter(this.keySearchText);return this.getKeys().pipe(Object(p.a)((function(t){return t.filter(n)})),Object(m.a)((function(t){return e.latestKeySearchResult=t})))}return Object(d.a)(this.latestKeySearchResult)},e.prototype.getKeys=function(){if(null===this.fetchObservable$){var t=void 0;if(this.modelValue.type===c.h.alarm)t=Object(d.a)(this.alarmKeys);else if(this.entityAliasId){var e=[this.modelValue.type];t=this.callbacks.fetchEntityKeys(this.entityAliasId,e)}else t=Object(d.a)([]);this.fetchObservable$=t.pipe(Object(p.a)((function(t){return t.map((function(t){return t.name}))})),Object(f.a)(1),Object(h.a)())}return this.fetchObservable$},e.prototype.createKeyFilter=function(t){var e=t.toLowerCase();return function(t){return t.toLowerCase().startsWith(e)}},e.prototype.validateOnSubmit=function(){this.modelValue.type===c.h.function?this.funcBodyEdit.validateOnSubmit():this.modelValue.type!==c.h.timeseries&&this.modelValue.type!==c.h.attribute||!this.dataKeyFormGroup.get("usePostProcessing").value||this.postFuncBodyEdit.validateOnSubmit()},e.prototype.validate=function(t){return this.dataKeyFormGroup.valid?this.displayAdvanced&&!this.dataKeySettingsFormGroup.valid?{dataKeySettings:{valid:!1}}:null:{dataKey:{valid:!1}}},e.\u0275fac=function(t){return new(t||e)(a["\u0275\u0275directiveInject"](b.Store),a["\u0275\u0275directiveInject"](s.a),a["\u0275\u0275directiveInject"](l.a),a["\u0275\u0275directiveInject"](v.MatDialog),a["\u0275\u0275directiveInject"](x.TranslateService),a["\u0275\u0275directiveInject"](o.FormBuilder))},e.\u0275cmp=a["\u0275\u0275defineComponent"]({type:e,selectors:[["tb-data-key-config"]],viewQuery:function(t,e){var n;(1&t&&(a["\u0275\u0275viewQuery"](_,!0),a["\u0275\u0275viewQuery"](L,!0),a["\u0275\u0275viewQuery"](V,!0)),2&t)&&(a["\u0275\u0275queryRefresh"](n=a["\u0275\u0275loadQuery"]())&&(e.keyInput=n.first),a["\u0275\u0275queryRefresh"](n=a["\u0275\u0275loadQuery"]())&&(e.funcBodyEdit=n.first),a["\u0275\u0275queryRefresh"](n=a["\u0275\u0275loadQuery"]())&&(e.postFuncBodyEdit=n.first))},inputs:{entityAliasId:"entityAliasId",callbacks:"callbacks",dataKeySettingsSchema:"dataKeySettingsSchema",showPostProcessing:"showPostProcessing"},features:[a["\u0275\u0275ProvidersFeature"]([{provide:o.NG_VALUE_ACCESSOR,useExisting:Object(a.forwardRef)((function(){return e})),multi:!0},{provide:o.NG_VALIDATORS,useExisting:Object(a.forwardRef)((function(){return e})),multi:!0}]),a["\u0275\u0275InheritDefinitionFeature"]],decls:16,vars:15,consts:[[1,"tb-datakey-config",3,"ngClass"],[3,"formGroup","label"],["fxLayout","column",1,"mat-padding","settings"],["class","mat-block",4,"ngIf"],["fxLayout","row","fxLayout.xs","column","fxLayoutAlign","start center","fxLayoutAlign.xs","","fxLayoutGap","8px"],["fxFlex","",1,"mat-block"],["translate",""],["matInput","","formControlName","label","required",""],["fxFlex","","required","","icon","format_color_fill","openOnInput","","formControlName","color",3,"label"],["fxLayout","row","fxLayout.xs","column","fxLayoutAlign","start center","fxLayoutAlign.xs","","fxLayoutGap","8px",4,"ngIf"],["fxLayout","column",4,"ngIf"],[3,"formGroup","label",4,"ngIf"],[1,"mat-block"],["matInput","","type","text","formControlName","name","required","",3,"placeholder","matAutocomplete"],["keyInput",""],["type","button","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click",4,"ngIf"],[1,"tb-autocomplete"],["keyAutocomplete","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],["type","button","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click"],[1,"material-icons"],[3,"value"],[3,"innerHTML"],["fxFlex",""],["matInput","","formControlName","units"],["matInput","","formControlName","decimals","type","number","min","0","max","15","step","1"],["fxLayout","column"],["resultType","any","formControlName","funcBody",3,"functionArgs","validationArgs"],["funcBodyEdit",""],["formControlName","usePostProcessing"],["resultType","any","formControlName","postFuncBody",3,"functionArgs","validationArgs",4,"ngIf"],["class","tb-title","style","margin-left: 15px;",4,"ngIf"],["resultType","any","formControlName","postFuncBody",3,"functionArgs","validationArgs"],["postFuncBodyEdit",""],[1,"tb-title",2,"margin-left","15px"],["fxLayout","column",1,"mat-padding"],["formControlName","settings"]],template:function(t,e){1&t&&(a["\u0275\u0275elementStart"](0,"mat-tab-group",0),a["\u0275\u0275elementStart"](1,"mat-tab",1),a["\u0275\u0275pipe"](2,"translate"),a["\u0275\u0275elementStart"](3,"div",2),a["\u0275\u0275template"](4,G,12,11,"mat-form-field",3),a["\u0275\u0275elementStart"](5,"div",4),a["\u0275\u0275elementStart"](6,"mat-form-field",5),a["\u0275\u0275elementStart"](7,"mat-label",6),a["\u0275\u0275text"](8,"datakey.label"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](9,"input",7),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](10,"tb-color-input",8),a["\u0275\u0275pipe"](11,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275template"](12,B,9,0,"div",9),a["\u0275\u0275template"](13,K,6,8,"section",10),a["\u0275\u0275template"](14,J,6,5,"section",10),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275template"](15,Z,4,4,"mat-tab",11),a["\u0275\u0275elementEnd"]()),2&t&&(a["\u0275\u0275property"]("ngClass",a["\u0275\u0275pureFunction1"](13,tt,!e.displayAdvanced)),a["\u0275\u0275advance"](1),a["\u0275\u0275propertyInterpolate"]("label",a["\u0275\u0275pipeBind1"](2,9,"datakey.settings")),a["\u0275\u0275property"]("formGroup",e.dataKeyFormGroup),a["\u0275\u0275advance"](3),a["\u0275\u0275property"]("ngIf",e.modelValue.type!==e.dataKeyTypes.function),a["\u0275\u0275advance"](6),a["\u0275\u0275propertyInterpolate"]("label",a["\u0275\u0275pipeBind1"](11,11,"datakey.color")),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("ngIf",e.modelValue.type!==e.dataKeyTypes.alarm),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",e.modelValue.type===e.dataKeyTypes.function),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",(e.modelValue.type===e.dataKeyTypes.timeseries||e.modelValue.type===e.dataKeyTypes.attribute||e.modelValue.type===e.dataKeyTypes.count)&&e.showPostProcessing),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",e.displayAdvanced))},directives:[C.MatTabGroup,S.NgClass,w.b,C.MatTab,o.NgControlStatusGroup,o.FormGroupDirective,E.f,S.NgIf,E.e,E.g,I.MatFormField,E.b,I.MatLabel,x.TranslateDirective,O.MatInput,o.DefaultValueAccessor,o.NgControlStatus,o.FormControlName,o.RequiredValidator,T.a,M.MatAutocompleteTrigger,M.MatAutocomplete,S.NgForOf,F.MatButton,I.MatSuffix,P.MatIcon,D.MatOption,o.NumberValueAccessor,y.a,k.MatCheckbox,j.a],pipes:[x.TranslatePipe,S.AsyncPipe,A.a],styles:["[_nghost-%COMP%]   .tb-datakey-config[_ngcontent-%COMP%]{height:100%}[_nghost-%COMP%]   .tb-datakey-config[_ngcontent-%COMP%]   .settings[_ngcontent-%COMP%] > [_ngcontent-%COMP%]:first-child{padding-top:12px}[_nghost-%COMP%]   .tb-datakey-config[_ngcontent-%COMP%]   .settings[_ngcontent-%COMP%] > [_ngcontent-%COMP%]:nth-child(n){padding-right:12px;padding-left:12px}[_nghost-%COMP%]     .tb-datakey-config .mat-tab-body.mat-tab-body-active .mat-tab-body-content>div{height:calc(65vh - 50px);overflow:initial}@media screen and (max-width:599px){[_nghost-%COMP%]     .tb-datakey-config .mat-tab-body.mat-tab-body-active .mat-tab-body-content>div{height:500px}}"]}),e}(r.a);!function(){a["\u0275setClassMetadata"](et,[{type:a.Component,args:[{selector:"tb-data-key-config",templateUrl:"./data-key-config.component.html",styleUrls:["./data-key-config.component.scss"],providers:[{provide:o.NG_VALUE_ACCESSOR,useExisting:Object(a.forwardRef)((function(){return et})),multi:!0},{provide:o.NG_VALIDATORS,useExisting:Object(a.forwardRef)((function(){return et})),multi:!0}]}]}],(function(){return[{type:b.Store},{type:s.a},{type:l.a},{type:v.MatDialog},{type:x.TranslateService},{type:o.FormBuilder}]}),{entityAliasId:[{type:a.Input}],callbacks:[{type:a.Input}],dataKeySettingsSchema:[{type:a.Input}],showPostProcessing:[{type:a.Input}],keyInput:[{type:a.ViewChild,args:["keyInput"]}],funcBodyEdit:[{type:a.ViewChild,args:["funcBodyEdit"]}],postFuncBodyEdit:[{type:a.ViewChild,args:["postFuncBodyEdit"]}]})}()},llUh:function(t,e,n){"use strict";n.d(e,"a",(function(){return d})),n.d(e,"b",(function(){return p}));var i=n("mrSG"),a=n("fXoL"),r=n("RxGS"),o=n("3Pt+"),s=n("l7P3"),l=n("tyNb"),c=n("0IaG"),d=new a.InjectionToken("ConfigDialogData"),p=function(t){function e(e,n,i,a,r){var s=t.call(this,e)||this;return s.store=e,s.router=n,s.dialogRef=i,s.fb=a,s.data=r,s.validators=o.Validators,s.data.controller(s),s}return Object(i.d)(e,t),e.\u0275fac=function(t){return new(t||e)(a["\u0275\u0275directiveInject"](s.Store),a["\u0275\u0275directiveInject"](l.Router),a["\u0275\u0275directiveInject"](c.MatDialogRef),a["\u0275\u0275directiveInject"](o.FormBuilder),a["\u0275\u0275directiveInject"](d))},e.\u0275dir=a["\u0275\u0275defineDirective"]({type:e,features:[a["\u0275\u0275InheritDefinitionFeature"]]}),e}(r.a);!function(){a["\u0275setClassMetadata"](p,[{type:a.Directive}],(function(){return[{type:s.Store},{type:l.Router},{type:c.MatDialogRef},{type:o.FormBuilder},{type:void 0,decorators:[{type:a.Inject,args:[d]}]}]}),null)}()},m4rf:function(t,e,n){"use strict";(function(t){n.d(e,"a",(function(){return P}));var i=n("mrSG"),a=n("fXoL"),r=n("RxGS"),o=(n("0G7Z"),n("OiFK")),s=n("//Q6"),l=n("0lYY"),c=n("U3y+"),d=n("HR/i"),p=n("l7P3"),u=n("XiUz"),m=n("ofXK"),f=n("znSr"),h=n("1jcm"),g=n("3Pt+"),y=["switch"],b=["switchContainer"],v=["matSlideToggle"],x=["onoffContainer"],C=["onLabel"],S=["offLabel"],w=["switchTitleContainer"],E=["switchTitle"],I=["textMeasure"],O=["switchErrorContainer"],T=["switchError"],M=function(t){return{pointerEvents:t}},F=function(t){return{background:t}},P=function(e){function n(t,n){var i=e.call(this,n)||this;return i.utils=t,i.store=n,i.showTitle=!1,i.value=!1,i.error="",i.title="",i.showOnOffLabels=!1,i}return Object(i.d)(n,e),n.prototype.ngOnInit=function(){var e=this;this.switchElement=t(this.switchElementRef.nativeElement),this.switchContainer=t(this.switchContainerRef.nativeElement),this.matSlideToggle=t(this.matSlideToggleRef._elementRef.nativeElement),this.onoffContainer=t(this.onoffContainerRef.nativeElement),this.onLabel=t(this.onLabelRef.nativeElement),this.offLabel=t(this.offLabelRef.nativeElement),this.switchTitleContainer=t(this.switchTitleContainerRef.nativeElement),this.switchTitle=t(this.switchTitleRef.nativeElement),this.textMeasure=t(this.textMeasureRef.nativeElement),this.switchErrorContainer=t(this.switchErrorContainerRef.nativeElement),this.switchError=t(this.switchErrorRef.nativeElement),this.switchResize$=new d.a((function(){e.resize()})),this.switchResize$.observe(this.switchContainerRef.nativeElement),this.init()},n.prototype.ngOnDestroy=function(){this.valueSubscription&&this.ctx.subscriptionApi.removeSubscription(this.valueSubscription.id),this.switchResize$&&this.switchResize$.disconnect()},n.prototype.init=function(){var t=this.ctx.settings;this.title=Object(s.n)(t.title)?t.title:"",this.showTitle=!(!this.title||!this.title.length),this.showOnOffLabels=!Object(s.n)(t.showOnOffLabels)||t.showOnOffLabels;var e=!!Object(s.n)(t.initialValue)&&t.initialValue;this.setValue(e);var n=this.ctx.defaultSubscription.rpcEnabled;if(this.isSimulated=this.utils.widgetEditMode,this.requestTimeout=500,t.requestTimeout&&(this.requestTimeout=t.requestTimeout),this.retrieveValueMethod="rpc",t.retrieveValueMethod&&t.retrieveValueMethod.length&&(this.retrieveValueMethod=t.retrieveValueMethod),this.valueKey="value",t.valueKey&&t.valueKey.length&&(this.valueKey=t.valueKey),this.parseValueFunction=function(t){return!!t},t.parseValueFunction&&t.parseValueFunction.length)try{this.parseValueFunction=new Function("data",t.parseValueFunction)}catch(i){this.parseValueFunction=function(t){return!!t}}if(this.convertValueFunction=function(t){return t},t.convertValueFunction&&t.convertValueFunction.length)try{this.convertValueFunction=new Function("value",t.convertValueFunction)}catch(i){this.convertValueFunction=function(t){return t}}this.getValueMethod="getValue",t.getValueMethod&&t.getValueMethod.length&&(this.getValueMethod=t.getValueMethod),this.setValueMethod="setValue",t.setValueMethod&&t.setValueMethod.length&&(this.setValueMethod=t.setValueMethod),n?this.isSimulated||("rpc"===this.retrieveValueMethod?this.rpcRequestValue():"attribute"!==this.retrieveValueMethod&&"timeseries"!==this.retrieveValueMethod||this.subscribeForValue()):this.onError("Target device is not set!")},n.prototype.resize=function(){var t=this.switchContainer.width(),e=this.switchContainer.height();this.showOnOffLabels&&(e=2*e/3),t/e>2.7893?t=2.7893*e:e=t/2.7893,this.switchElement.css({width:t,height:e}),this.matSlideToggle.css({width:t,height:e,minWidth:t}),this.showTitle&&this.setFontSize(this.switchTitle,this.title,2*this.switchTitleContainer.height()/3,this.switchTitleContainer.width()),this.showOnOffLabels&&(this.onoffContainer.css({width:t,height:this.switchContainer.height()/3}),this.setFontSize(this.onLabel,"OFF",this.onoffContainer.height(),this.onoffContainer.width()/2),this.setFontSize(this.offLabel,"OFF",this.onoffContainer.height(),this.onoffContainer.width()/2)),this.setFontSize(this.switchError,this.error,this.switchErrorContainer.height(),this.switchErrorContainer.width())},n.prototype.setFontSize=function(t,e,n,i){for(var a=this.measureTextWidth(e,n);a>i;)n--,a=this.measureTextWidth(e,n);t.css({fontSize:n+"px",lineHeight:n+"px"})},n.prototype.measureTextWidth=function(t,e){return this.textMeasure.css({fontSize:e+"px",lineHeight:e+"px"}),this.textMeasure.text(t),this.textMeasure.width()},n.prototype.onError=function(t){this.error=t,this.setFontSize(this.switchError,this.error,this.switchErrorContainer.height(),this.switchErrorContainer.width()),this.ctx.detectChanges()},n.prototype.setValue=function(t){this.value=!!t},n.prototype.onValue=function(){this.rpcUpdateValue(this.value)},n.prototype.rpcRequestValue=function(){var t=this;this.error="",this.ctx.controlApi.sendTwoWayCommand(this.getValueMethod,null,this.requestTimeout).subscribe((function(e){t.setValue(t.parseValueFunction(e))}),(function(){var e=t.ctx.defaultSubscription.rpcErrorText;t.onError(e)}))},n.prototype.rpcUpdateValue=function(t){var e=this;if(this.executingUpdateValue)return this.scheduledValue=t,void 0;this.scheduledValue=null,this.rpcValue=t,this.executingUpdateValue=!0,this.error="",this.ctx.controlApi.sendOneWayCommand(this.setValueMethod,this.convertValueFunction(t),this.requestTimeout).subscribe((function(){e.executingUpdateValue=!1,null!=e.scheduledValue&&e.scheduledValue!==e.rpcValue&&e.rpcUpdateValue(e.scheduledValue)}),(function(){e.executingUpdateValue=!1;var t=e.ctx.defaultSubscription.rpcErrorText;e.onError(t)}))},n.prototype.subscribeForValue=function(){var t=this,e=[{type:l.a.entity,entityType:c.b.DEVICE,entityId:this.ctx.defaultSubscription.targetDeviceId}];"attribute"===this.retrieveValueMethod?e[0].attributes=[{name:this.valueKey}]:e[0].timeseries=[{name:this.valueKey}];var n={callbacks:{onDataUpdated:function(e,n){return t.ctx.ngZone.run((function(){t.onDataUpdated(e,n)}))},onDataUpdateError:function(e,n){return t.ctx.ngZone.run((function(){t.onDataUpdateError(e,n)}))}}};this.ctx.subscriptionApi.createSubscriptionFromInfo(l.k.latest,e,n,!1,!0).subscribe((function(e){t.valueSubscription=e}))},n.prototype.onDataUpdated=function(t,e){var n=!1,i=t.data;if(i.length){var a=i[0];if(a&&a.data&&a.data[0]){var r=a.data[0][1];if(Object(s.n)(r)){var o=null;try{o=this.parseValueFunction(JSON.parse(r))}catch(l){}n=!!o}}}this.setValue(n),e&&this.ctx.detectChanges()},n.prototype.onDataUpdateError=function(t,e){var n=this.utils.parseException(e),i=n.name;n.message&&(i+=": "+n.message),this.onError(i)},n.\u0275fac=function(t){return new(t||n)(a["\u0275\u0275directiveInject"](o.a),a["\u0275\u0275directiveInject"](p.Store))},n.\u0275cmp=a["\u0275\u0275defineComponent"]({type:n,selectors:[["tb-switch"]],viewQuery:function(t,e){var n;(1&t&&(a["\u0275\u0275staticViewQuery"](y,!0),a["\u0275\u0275staticViewQuery"](b,!0),a["\u0275\u0275staticViewQuery"](v,!0),a["\u0275\u0275staticViewQuery"](x,!0),a["\u0275\u0275staticViewQuery"](C,!0),a["\u0275\u0275staticViewQuery"](S,!0),a["\u0275\u0275staticViewQuery"](w,!0),a["\u0275\u0275staticViewQuery"](E,!0),a["\u0275\u0275staticViewQuery"](I,!0),a["\u0275\u0275staticViewQuery"](O,!0),a["\u0275\u0275staticViewQuery"](T,!0)),2&t)&&(a["\u0275\u0275queryRefresh"](n=a["\u0275\u0275loadQuery"]())&&(e.switchElementRef=n.first),a["\u0275\u0275queryRefresh"](n=a["\u0275\u0275loadQuery"]())&&(e.switchContainerRef=n.first),a["\u0275\u0275queryRefresh"](n=a["\u0275\u0275loadQuery"]())&&(e.matSlideToggleRef=n.first),a["\u0275\u0275queryRefresh"](n=a["\u0275\u0275loadQuery"]())&&(e.onoffContainerRef=n.first),a["\u0275\u0275queryRefresh"](n=a["\u0275\u0275loadQuery"]())&&(e.onLabelRef=n.first),a["\u0275\u0275queryRefresh"](n=a["\u0275\u0275loadQuery"]())&&(e.offLabelRef=n.first),a["\u0275\u0275queryRefresh"](n=a["\u0275\u0275loadQuery"]())&&(e.switchTitleContainerRef=n.first),a["\u0275\u0275queryRefresh"](n=a["\u0275\u0275loadQuery"]())&&(e.switchTitleRef=n.first),a["\u0275\u0275queryRefresh"](n=a["\u0275\u0275loadQuery"]())&&(e.textMeasureRef=n.first),a["\u0275\u0275queryRefresh"](n=a["\u0275\u0275loadQuery"]())&&(e.switchErrorContainerRef=n.first),a["\u0275\u0275queryRefresh"](n=a["\u0275\u0275loadQuery"]())&&(e.switchErrorRef=n.first))},inputs:{ctx:"ctx"},features:[a["\u0275\u0275InheritDefinitionFeature"]],decls:29,vars:16,consts:[["fxLayout","column",1,"tb-switch",3,"ngStyle"],["fxLayout","row","fxLayoutAlign","center center",1,"error-container",3,"ngStyle"],["switchErrorContainer",""],[1,"switch-error"],["switchError",""],["fxFlex","30","fxLayout","row","fxLayoutAlign","center center",1,"title-container",3,"fxShow"],["switchTitleContainer",""],[1,"switch-title"],["switchTitle",""],["id","switch-container","fxLayout","column","fxLayoutAlign","center center",3,"fxFlex"],["switchContainer",""],[1,"switch"],["switch",""],[3,"ngModel","ngModelChange","change"],["matSlideToggle",""],["fxLayout","row","fxLayoutAlign","center start",1,"onoff-container",3,"fxShow"],["onoffContainer",""],["fxFlex","",1,"off-label",2,"text-align","center",3,"fxShow"],["offLabel",""],["fxFlex","",3,"fxShow"],["fxFlex","",1,"on-label",2,"text-align","center",3,"fxShow"],["onLabel",""],["id","text-measure"],["textMeasure",""]],template:function(t,e){1&t&&(a["\u0275\u0275elementStart"](0,"div",0),a["\u0275\u0275elementStart"](1,"div",1,2),a["\u0275\u0275elementStart"](3,"span",3,4),a["\u0275\u0275text"](5),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](6,"div",5,6),a["\u0275\u0275elementStart"](8,"span",7,8),a["\u0275\u0275text"](10),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](11,"div",9,10),a["\u0275\u0275elementStart"](13,"div",11,12),a["\u0275\u0275elementStart"](15,"mat-slide-toggle",13,14),a["\u0275\u0275listener"]("ngModelChange",(function(t){return e.value=t}))("change",(function(){return e.onValue()})),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](17,"div",15,16),a["\u0275\u0275elementStart"](19,"span",17,18),a["\u0275\u0275text"](21,"OFF"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](22,"span",19),a["\u0275\u0275elementStart"](23,"span",20,21),a["\u0275\u0275text"](25,"ON"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](26,"span",19),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](27,"div",22,23),a["\u0275\u0275elementEnd"]()),2&t&&(a["\u0275\u0275property"]("ngStyle",a["\u0275\u0275pureFunction1"](12,M,e.ctx.isEdit?"none":"all")),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngStyle",a["\u0275\u0275pureFunction1"](14,F,null!=e.error&&e.error.length?"rgba(255,255,255,0.25)":"none")),a["\u0275\u0275advance"](4),a["\u0275\u0275textInterpolate"](e.error),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("fxShow",e.showTitle),a["\u0275\u0275advance"](4),a["\u0275\u0275textInterpolate"](e.title),a["\u0275\u0275advance"](1),a["\u0275\u0275propertyInterpolate"]("fxFlex",e.showTitle?70:100),a["\u0275\u0275advance"](4),a["\u0275\u0275property"]("ngModel",e.value),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("fxShow",e.showOnOffLabels),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("fxShow",!e.value),a["\u0275\u0275advance"](3),a["\u0275\u0275property"]("fxShow",e.value),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("fxShow",e.value),a["\u0275\u0275advance"](3),a["\u0275\u0275property"]("fxShow",!e.value))},directives:[u.f,m.NgStyle,f.e,u.e,u.b,f.d,h.MatSlideToggle,g.NgControlStatus,g.NgModel],styles:["[_nghost-%COMP%]   .tb-switch[_ngcontent-%COMP%]{width:100%;height:100%}[_nghost-%COMP%]   .tb-switch[_ngcontent-%COMP%]   .error-container[_ngcontent-%COMP%]{position:absolute;top:1%;right:0;left:0;z-index:4;height:14px}[_nghost-%COMP%]   .tb-switch[_ngcontent-%COMP%]   .error-container[_ngcontent-%COMP%]   .switch-error[_ngcontent-%COMP%]{color:#ff3315;white-space:nowrap}[_nghost-%COMP%]   .tb-switch[_ngcontent-%COMP%]   .onoff-container[_ngcontent-%COMP%]{height:100%;font-weight:500;color:#757575;white-space:nowrap}[_nghost-%COMP%]   .tb-switch[_ngcontent-%COMP%]   .onoff-container[_ngcontent-%COMP%]   .off-label[_ngcontent-%COMP%]{color:#b7b5b5}[_nghost-%COMP%]   .tb-switch[_ngcontent-%COMP%]   .onoff-container[_ngcontent-%COMP%]   .on-label[_ngcontent-%COMP%]{color:#ff7e57;text-shadow:#ff6e4a 1px 1px 10px,#ffd1c3 1px 1px 10px}[_nghost-%COMP%]   .tb-switch[_ngcontent-%COMP%]   .title-container[_ngcontent-%COMP%]   .switch-title[_ngcontent-%COMP%]{font-weight:500;color:#757575;white-space:nowrap}[_nghost-%COMP%]   .tb-switch[_ngcontent-%COMP%]   #switch-container[_ngcontent-%COMP%]{padding-right:10px;padding-left:10px}[_nghost-%COMP%]   .tb-switch[_ngcontent-%COMP%]   .switch[_ngcontent-%COMP%]{position:relative}[_nghost-%COMP%]   .tb-switch[_ngcontent-%COMP%]   #text-measure[_ngcontent-%COMP%]{position:absolute;width:auto;height:auto;white-space:nowrap;visibility:hidden}[_nghost-%COMP%]     .tb-switch .switch mat-slide-toggle{position:absolute;top:0;right:0;bottom:0;left:0;margin:0}[_nghost-%COMP%]     .tb-switch .switch mat-slide-toggle .mat-slide-toggle-bar{top:0;left:0;width:100%;height:100%;background:url(thumb-bar.a20486c53566c486c3ab.svg) no-repeat;background-size:contain;border-radius:0}[_nghost-%COMP%]     .tb-switch .switch mat-slide-toggle .mat-slide-toggle-thumb-container{top:5%;left:.25%;width:50%;height:90%}[_nghost-%COMP%]     .tb-switch .switch mat-slide-toggle .mat-slide-toggle-label{height:100%}[_nghost-%COMP%]     .tb-switch .switch mat-slide-toggle .mat-slide-toggle-thumb{top:0;left:0;width:100%;height:100%;background:url(thumb.ab15ca9ad59d07355dfb.svg) no-repeat;background-size:contain;border-radius:0;box-shadow:none}[_nghost-%COMP%]     .tb-switch .switch mat-slide-toggle.mat-checked .mat-slide-toggle-thumb-container{transform:translate3d(100%,0,0)}[_nghost-%COMP%]     .tb-switch .switch mat-slide-toggle.mat-checked .mat-slide-toggle-bar{background:url(thumb-bar-checked.4590c5ef1e205a0e5eaa.svg) no-repeat;background-size:contain}[_nghost-%COMP%]     .tb-switch .switch mat-slide-toggle.mat-checked .mat-slide-toggle-thumb{background:url(thumb-checked.3a06c67c75312c6a2729.svg) no-repeat;background-size:contain}"]}),n}(r.a);!function(){a["\u0275setClassMetadata"](P,[{type:a.Component,args:[{selector:"tb-switch",templateUrl:"./switch.component.html",styleUrls:["./switch.component.scss"]}]}],(function(){return[{type:o.a},{type:p.Store}]}),{switchElementRef:[{type:a.ViewChild,args:["switch",{static:!0}]}],switchContainerRef:[{type:a.ViewChild,args:["switchContainer",{static:!0}]}],matSlideToggleRef:[{type:a.ViewChild,args:["matSlideToggle",{static:!0}]}],onoffContainerRef:[{type:a.ViewChild,args:["onoffContainer",{static:!0}]}],onLabelRef:[{type:a.ViewChild,args:["onLabel",{static:!0}]}],offLabelRef:[{type:a.ViewChild,args:["offLabel",{static:!0}]}],switchTitleContainerRef:[{type:a.ViewChild,args:["switchTitleContainer",{static:!0}]}],switchTitleRef:[{type:a.ViewChild,args:["switchTitle",{static:!0}]}],textMeasureRef:[{type:a.ViewChild,args:["textMeasure",{static:!0}]}],switchErrorContainerRef:[{type:a.ViewChild,args:["switchErrorContainer",{static:!0}]}],switchErrorRef:[{type:a.ViewChild,args:["switchError",{static:!0}]}],ctx:[{type:a.Input}]})}()}).call(this,n("xexB"))},mXAo:function(t,e,n){"use strict";n.d(e,"a",(function(){return v}));var i=n("fXoL"),a=n("UaJx"),r=n("mrSG"),o=n("qxrw"),s=n("90vD"),l=n("dSnI"),c=n("4r/P"),d=n("he9t"),p=n("GdA0"),u=n("//Q6"),m=function(t){function e(e,n,i,a,o,d,p,u,m,f){void 0===m&&(m=null),void 0===f&&(f=null);var h=t.call(this)||this;return h.eventService=e,h.dialogService=n,h.translate=i,h.datePipe=a,h.dialog=o,h.entityId=d,h.tenantId=p,h.defaultEventType=u,h.disabledEventTypes=m,h.debugEventTypes=f,h.loadDataOnInit=!1,h.tableTitle="",h.useTimePageLink=!0,h.detailsPanelEnabled=!1,h.selectionEnabled=!1,h.searchEnabled=!1,h.addEnabled=!1,h.entitiesDeleteEnabled=!1,h.headerComponent=l.a,h.eventTypes=Object.keys(s.b).map((function(t){return s.b[t]})),m&&m.length&&(h.eventTypes=h.eventTypes.filter((function(t){return-1===m.indexOf(t)}))),f&&f.length&&(h.eventTypes=Object(r.g)(h.eventTypes,f)),h.eventTypeValue=u,h.entityTranslations={noEntities:"event.no-events-prompt"},h.entityResources={},h.entitiesFetchFunction=function(t){return h.fetchEvents(t)},h.defaultSortOrder={property:"createdTime",direction:c.a.DESC},h.updateColumns(),h}return Object(r.d)(e,t),Object.defineProperty(e.prototype,"eventType",{get:function(){return this.eventTypeValue},set:function(t){this.eventTypeValue!==t&&(this.eventTypeValue=t,this.updateColumns(!0))},enumerable:!1,configurable:!0}),e.prototype.fetchEvents=function(t){return this.eventService.getEvents(this.entityId,this.eventType,this.tenantId,t)},e.prototype.updateColumns=function(t){var e=this;switch(void 0===t&&(t=!1),this.columns=[],this.columns.push(new o.a("createdTime","event.event-time",this.datePipe,"120px"),new o.c("server","event.server","100px",(function(t){return t.body.server}),(function(t){return{}}),!1)),this.eventType){case s.b.ERROR:this.columns.push(new o.c("method","event.method","100%",(function(t){return t.body.method}),(function(t){return{}}),!1),new o.b("error","event.error",{name:this.translate.instant("action.view"),icon:"more_horiz",isEnabled:function(t){return t.body.error&&t.body.error.length>0},onAction:function(t,n){return e.showContent(t,n.body.error,"event.error")}},"100px"));break;case s.b.LC_EVENT:this.columns.push(new o.c("method","event.event","100%",(function(t){return t.body.event}),(function(t){return{}}),!1),new o.c("status","event.status","100%",(function(t){return e.translate.instant(t.body.success?"event.success":"event.failed")}),(function(t){return{}}),!1),new o.b("error","event.error",{name:this.translate.instant("action.view"),icon:"more_horiz",isEnabled:function(t){return t.body.error&&t.body.error.length>0},onAction:function(t,n){return e.showContent(t,n.body.error,"event.error")}},"100px"));break;case s.b.STATS:this.columns.push(new o.c("messagesProcessed","event.messages-processed","50%",(function(t){return t.body.messagesProcessed+""}),(function(){return{}}),!1,(function(){return{}}),(function(){}),!0),new o.c("errorsOccurred","event.errors-occurred","50%",(function(t){return t.body.errorsOccurred+""}),(function(){return{}}),!1,(function(){return{}}),(function(){}),!0));break;case s.a.DEBUG_RULE_NODE:case s.a.DEBUG_RULE_CHAIN:this.columns[0].width="100px",this.columns.push(new o.c("type","event.type","40px",(function(t){return t.body.type}),(function(t){return{padding:"0 12px 0 0"}}),!1,(function(t){return{padding:"0 12px 0 0"}})),new o.c("entity","event.entity","100px",(function(t){return t.body.entityName}),(function(t){return{padding:"0 12px 0 0"}}),!1,(function(t){return{padding:"0 12px 0 0"}})),new o.c("msgId","event.message-id","100px",(function(t){return t.body.msgId}),(function(t){return{whiteSpace:"nowrap",padding:"0 12px 0 0"}}),!1,(function(t){return{padding:"0 12px 0 0"}}),(function(t){return t.body.msgId})),new o.c("msgType","event.message-type","100px",(function(t){return t.body.msgType}),(function(t){return{whiteSpace:"nowrap",padding:"0 12px 0 0"}}),!1,(function(t){return{padding:"0 12px 0 0"}}),(function(t){return t.body.msgType})),new o.c("relationType","event.relation-type","100px",(function(t){return t.body.relationType}),(function(t){return{padding:"0 12px 0 0"}}),!1,(function(t){return{padding:"0 12px 0 0"}})),new o.b("data","event.data",{name:this.translate.instant("action.view"),icon:"more_horiz",isEnabled:function(t){return!!t.body.data&&t.body.data.length>0},onAction:function(t,n){return e.showContent(t,n.body.data,"event.data",n.body.dataType)}},"40px"),new o.b("metadata","event.metadata",{name:this.translate.instant("action.view"),icon:"more_horiz",isEnabled:function(t){return!!t.body.metadata&&t.body.metadata.length>0},onAction:function(t,n){return e.showContent(t,n.body.metadata,"event.metadata",d.b.JSON,!0)}},"40px"),new o.b("error","event.error",{name:this.translate.instant("action.view"),icon:"more_horiz",isEnabled:function(t){return t.body.error&&t.body.error.length>0},onAction:function(t,n){return e.showContent(t,n.body.error,"event.error")}},"40px"))}t&&this.table.columnsUpdated(!0)},e.prototype.showContent=function(t,e,n,i,a){if(void 0===i&&(i=null),void 0===a&&(a=!1),t&&t.stopPropagation(),i===d.b.JSON&&a)try{e=JSON.stringify(Object(u.J)(JSON.parse(e)))}catch(r){}this.dialog.open(p.a,{disableClose:!0,panelClass:["tb-dialog","tb-fullscreen-dialog"],data:{content:e,title:n,contentType:i}})},e}(o.d),f=n("mopS"),h=n("S+vS"),g=n("sYmb"),y=n("ofXK"),b=n("0IaG"),v=function(){function t(t,e,n,i,a){this.eventService=t,this.dialogService=e,this.translate=n,this.datePipe=i,this.dialog=a,this.activeValue=!1,this.dirtyValue=!1}return Object.defineProperty(t.prototype,"active",{set:function(t){this.activeValue!==t&&(this.activeValue=t,this.activeValue&&this.dirtyValue&&(this.dirtyValue=!1,this.entitiesTable.updateData()))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"entityId",{set:function(t){this.entityIdValue=t,this.eventTableConfig&&this.eventTableConfig.entityId!==t&&(this.eventTableConfig.eventType=this.defaultEventType,this.eventTableConfig.entityId=t,this.entitiesTable.resetSortAndFilter(this.activeValue),this.activeValue||(this.dirtyValue=!0))},enumerable:!1,configurable:!0}),t.prototype.ngOnInit=function(){this.dirtyValue=!this.activeValue,this.eventTableConfig=new m(this.eventService,this.dialogService,this.translate,this.datePipe,this.dialog,this.entityIdValue,this.tenantId,this.defaultEventType,this.disabledEventTypes,this.debugEventTypes)},t.\u0275fac=function(e){return new(e||t)(i["\u0275\u0275directiveInject"](f.a),i["\u0275\u0275directiveInject"](h.a),i["\u0275\u0275directiveInject"](g.TranslateService),i["\u0275\u0275directiveInject"](y.DatePipe),i["\u0275\u0275directiveInject"](b.MatDialog))},t.\u0275cmp=i["\u0275\u0275defineComponent"]({type:t,selectors:[["tb-event-table"]],viewQuery:function(t,e){var n;(1&t&&i["\u0275\u0275staticViewQuery"](a.a,!0),2&t)&&(i["\u0275\u0275queryRefresh"](n=i["\u0275\u0275loadQuery"]())&&(e.entitiesTable=n.first))},inputs:{tenantId:"tenantId",defaultEventType:"defaultEventType",disabledEventTypes:"disabledEventTypes",debugEventTypes:"debugEventTypes",active:"active",entityId:"entityId"},decls:1,vars:1,consts:[[3,"entitiesTableConfig"]],template:function(t,e){1&t&&i["\u0275\u0275element"](0,"tb-entities-table",0),2&t&&i["\u0275\u0275property"]("entitiesTableConfig",e.eventTableConfig)},directives:[a.a],styles:["[_nghost-%COMP%]     tb-entities-table .mat-drawer-container{background-color:#fff}"]}),t}();!function(){i["\u0275setClassMetadata"](v,[{type:i.Component,args:[{selector:"tb-event-table",templateUrl:"./event-table.component.html",styleUrls:["./event-table.component.scss"]}]}],(function(){return[{type:f.a},{type:h.a},{type:g.TranslateService},{type:y.DatePipe},{type:b.MatDialog}]}),{tenantId:[{type:i.Input}],defaultEventType:[{type:i.Input}],disabledEventTypes:[{type:i.Input}],debugEventTypes:[{type:i.Input}],active:[{type:i.Input}],entityId:[{type:i.Input}],entitiesTable:[{type:i.ViewChild,args:[a.a,{static:!0}]}]})}()},mcsV:function(t,e,n){"use strict";n.d(e,"a",(function(){return S}));var i=n("fXoL"),a=n("3Pt+"),r=n("xw5a"),o=n("//Q6"),s=n("UGF7"),l=n("0IaG"),c=n("XiUz"),d=n("7EHt"),p=n("sYmb"),u=n("znSr"),m=n("f0Cb"),f=n("ofXK"),h=n("bTqV"),g=n("Qu3c"),y=n("eIDA"),b=n("NFeN");function v(t,e){1&t&&(i["\u0275\u0275elementStart"](0,"span",3),i["\u0275\u0275text"](1,"filter.operation.and"),i["\u0275\u0275elementEnd"]())}function x(t,e){if(1&t){var n=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"div",17),i["\u0275\u0275elementStart"](1,"div",18),i["\u0275\u0275template"](2,v,2,0,"span",19),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](3,"div",20),i["\u0275\u0275elementStart"](4,"div",21),i["\u0275\u0275elementStart"](5,"div",22),i["\u0275\u0275text"](6),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](7,"div",23),i["\u0275\u0275text"](8),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](9,"button",24),i["\u0275\u0275listener"]("click",(function(){i["\u0275\u0275restoreView"](n);var t=e.index;return i["\u0275\u0275nextContext"]().editKeyFilter(t)})),i["\u0275\u0275pipe"](10,"translate"),i["\u0275\u0275elementStart"](11,"mat-icon"),i["\u0275\u0275text"](12),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](13,"button",25),i["\u0275\u0275listener"]("click",(function(){i["\u0275\u0275restoreView"](n);var t=e.index;return i["\u0275\u0275nextContext"]().removeKeyFilter(t)})),i["\u0275\u0275pipe"](14,"translate"),i["\u0275\u0275elementStart"](15,"mat-icon"),i["\u0275\u0275text"](16,"close"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](17,"mat-divider"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()}if(2&t){var a=e.$implicit,r=e.index,o=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngIf",r>0),i["\u0275\u0275advance"](4),i["\u0275\u0275textInterpolate"](a.value.key.key),i["\u0275\u0275advance"](2),i["\u0275\u0275textInterpolate"](o.entityKeyTypeTranslations.get(a.value.key.type)),i["\u0275\u0275advance"](1),i["\u0275\u0275propertyInterpolate"]("matTooltip",i["\u0275\u0275pipeBind1"](10,7,o.disabled?"filter.key-filter":"filter.edit-key-filter")),i["\u0275\u0275advance"](3),i["\u0275\u0275textInterpolate"](o.disabled?"more_vert":"edit"),i["\u0275\u0275advance"](1),i["\u0275\u0275propertyInterpolate"]("matTooltip",i["\u0275\u0275pipeBind1"](14,9,"filter.remove-key-filter")),i["\u0275\u0275property"]("fxShow",!o.disabled)}}var C=function(t){return{disabled:t}},S=function(){function t(t,e){this.fb=t,this.dialog=e,this.displayUserParameters=!0,this.allowUserDynamicSource=!0,this.telemetryKeysOnly=!1,this.entityKeyTypeTranslations=r.w,this.propagateChange=null,this.valueChangeSubscription=null}return t.prototype.ngOnInit=function(){this.keyFilterListFormGroup=this.fb.group({}),this.keyFilterListFormGroup.addControl("keyFilters",this.fb.array([])),this.keyFiltersControl=this.fb.control(null)},t.prototype.keyFiltersFormArray=function(){return this.keyFilterListFormGroup.get("keyFilters")},t.prototype.registerOnChange=function(t){this.propagateChange=t},t.prototype.registerOnTouched=function(t){},t.prototype.setDisabledState=function(t){this.disabled=t,this.disabled?(this.keyFilterListFormGroup.disable({emitEvent:!1}),this.keyFiltersControl.disable({emitEvent:!1})):(this.keyFilterListFormGroup.enable({emitEvent:!1}),this.keyFiltersControl.enable({emitEvent:!1}))},t.prototype.writeValue=function(t){var e=this;this.valueChangeSubscription&&this.valueChangeSubscription.unsubscribe();var n=[];if(t)for(var i=0,o=t;i<o.length;i++){var s=o[i];n.push(this.fb.control(s,[a.Validators.required]))}this.keyFilterListFormGroup.setControl("keyFilters",this.fb.array(n)),this.valueChangeSubscription=this.keyFilterListFormGroup.valueChanges.subscribe((function(){e.updateModel()})),this.disabled?this.keyFilterListFormGroup.disable({emitEvent:!1}):this.keyFilterListFormGroup.enable({emitEvent:!1});var l=Object(r.D)(t);this.keyFiltersControl.patchValue(l,{emitEvent:!1})},t.prototype.removeKeyFilter=function(t){this.keyFilterListFormGroup.get("keyFilters").removeAt(t)},t.prototype.addKeyFilter=function(){var t=this,e=this.keyFilterListFormGroup.get("keyFilters");this.openKeyFilterDialog(null).subscribe((function(n){n&&e.push(t.fb.control(n,[a.Validators.required]))}))},t.prototype.editKeyFilter=function(t){var e=this,n=this.keyFilterListFormGroup.get("keyFilters").at(t).value;this.openKeyFilterDialog(n).subscribe((function(n){n&&e.keyFilterListFormGroup.get("keyFilters").at(t).patchValue(n)}))},t.prototype.openKeyFilterDialog=function(t){var e=!t;return t||(t={key:{key:"",type:r.e.ATTRIBUTE},valueType:null,value:null,predicates:[]}),this.dialog.open(s.a,{disableClose:!0,panelClass:["tb-dialog","tb-fullscreen-dialog"],data:{keyFilter:t?this.disabled?t:Object(o.e)(t):null,isAdd:e,readonly:this.disabled,displayUserParameters:this.displayUserParameters,allowUserDynamicSource:this.allowUserDynamicSource,telemetryKeysOnly:this.telemetryKeysOnly,entityId:this.entityId}}).afterClosed()},t.prototype.updateModel=function(){var t=this.keyFilterListFormGroup.getRawValue().keyFilters;t.length?this.propagateChange(t):this.propagateChange(null);var e=Object(r.D)(t);this.keyFiltersControl.patchValue(e,{emitEvent:!1})},t.\u0275fac=function(e){return new(e||t)(i["\u0275\u0275directiveInject"](a.FormBuilder),i["\u0275\u0275directiveInject"](l.MatDialog))},t.\u0275cmp=i["\u0275\u0275defineComponent"]({type:t,selectors:[["tb-key-filter-list"]],inputs:{disabled:"disabled",displayUserParameters:"displayUserParameters",allowUserDynamicSource:"allowUserDynamicSource",telemetryKeysOnly:"telemetryKeysOnly",entityId:"entityId"},features:[i["\u0275\u0275ProvidersFeature"]([{provide:a.NG_VALUE_ACCESSOR,useExisting:Object(i.forwardRef)((function(){return t})),multi:!0}])],decls:35,vars:19,consts:[["fxLayout","column",3,"formGroup"],[3,"multi"],[3,"expanded"],["translate",""],["fxLayout","row"],["fxFlex","8"],["fxLayout","row","fxLayoutAlign","start center","fxFlex","92"],["fxFlex","","translate","",1,"tb-title","no-padding"],[2,"min-width","80px",3,"fxShow"],[2,"min-width","40px",3,"fxShow"],[1,"key-filter-list"],["fxLayout","row","fxLayoutAlign","start center","style","max-height: 40px;","formArrayName","keyFilters",4,"ngFor","ngForOf"],["fxLayoutAlign","center center","translate","",1,"no-data-found",3,"fxShow","ngClass"],[2,"margin-top","16px"],["mat-button","","mat-raised-button","","color","primary","type","button","matTooltipPosition","above",3,"fxShow","matTooltip","click"],[1,"tb-filter-preview"],[3,"formControl"],["fxLayout","row","fxLayoutAlign","start center","formArrayName","keyFilters",2,"max-height","40px"],["fxFlex","8",1,"filters-operation"],["translate","",4,"ngIf"],["fxLayout","column","fxFlex","92"],["fxLayout","row","fxLayoutAlign","start center"],["fxFlex",""],["fxFlex","","translate",""],["mat-icon-button","","color","primary","type","button","matTooltipPosition","above",3,"matTooltip","click"],["mat-icon-button","","color","primary","type","button","matTooltipPosition","above",3,"fxShow","matTooltip","click"]],template:function(t,e){1&t&&(i["\u0275\u0275elementStart"](0,"section",0),i["\u0275\u0275elementStart"](1,"mat-accordion",1),i["\u0275\u0275elementStart"](2,"mat-expansion-panel",2),i["\u0275\u0275elementStart"](3,"mat-expansion-panel-header"),i["\u0275\u0275elementStart"](4,"mat-panel-title"),i["\u0275\u0275elementStart"](5,"div",3),i["\u0275\u0275text"](6,"filter.key-filters"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](7,"div",4),i["\u0275\u0275element"](8,"span",5),i["\u0275\u0275elementStart"](9,"div",6),i["\u0275\u0275elementStart"](10,"label",7),i["\u0275\u0275text"](11,"filter.key-name"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](12,"label",7),i["\u0275\u0275text"](13,"filter.key-type.key-type"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](14,"span",8),i["\u0275\u0275text"](15,"\xa0"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](16,"span",9),i["\u0275\u0275text"](17,"\xa0"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](18,"mat-divider"),i["\u0275\u0275elementStart"](19,"div",10),i["\u0275\u0275template"](20,x,18,11,"div",11),i["\u0275\u0275elementStart"](21,"span",12),i["\u0275\u0275text"](22,"filter.no-key-filters"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](23,"div",13),i["\u0275\u0275elementStart"](24,"button",14),i["\u0275\u0275listener"]("click",(function(){return e.addKeyFilter()})),i["\u0275\u0275pipe"](25,"translate"),i["\u0275\u0275text"](26),i["\u0275\u0275pipe"](27,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](28,"mat-expansion-panel",2),i["\u0275\u0275elementStart"](29,"mat-expansion-panel-header"),i["\u0275\u0275elementStart"](30,"mat-panel-title"),i["\u0275\u0275elementStart"](31,"div",3),i["\u0275\u0275text"](32,"filter.preview"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](33,"div",15),i["\u0275\u0275element"](34,"tb-filter-text",16),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()),2&t&&(i["\u0275\u0275property"]("formGroup",e.keyFilterListFormGroup),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("multi",!0),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("expanded",!0),i["\u0275\u0275advance"](12),i["\u0275\u0275property"]("fxShow",!e.disabled),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("fxShow",e.disabled),i["\u0275\u0275advance"](4),i["\u0275\u0275property"]("ngForOf",e.keyFiltersFormArray().controls),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("fxShow",!e.keyFiltersFormArray().length)("ngClass",i["\u0275\u0275pureFunction1"](17,C,e.disabled)),i["\u0275\u0275advance"](3),i["\u0275\u0275propertyInterpolate"]("matTooltip",i["\u0275\u0275pipeBind1"](25,13,"filter.add-key-filter")),i["\u0275\u0275property"]("fxShow",!e.disabled),i["\u0275\u0275advance"](2),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](27,15,"filter.add-key-filter")," "),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("expanded",!0),i["\u0275\u0275advance"](6),i["\u0275\u0275property"]("formControl",e.keyFiltersControl))},directives:[c.f,a.NgControlStatusGroup,a.FormGroupDirective,d.MatAccordion,d.MatExpansionPanel,d.MatExpansionPanelHeader,d.MatExpansionPanelTitle,p.TranslateDirective,c.b,c.e,u.d,m.MatDivider,f.NgForOf,f.NgClass,u.b,h.MatButton,g.MatTooltip,y.a,a.NgControlStatus,a.FormControlDirective,a.FormArrayName,f.NgIf,b.MatIcon],pipes:[p.TranslatePipe],styles:["[_nghost-%COMP%]   .key-filter-list[_ngcontent-%COMP%]{overflow:auto;max-height:300px}[_nghost-%COMP%]   .key-filter-list[_ngcontent-%COMP%]   .no-data-found[_ngcontent-%COMP%]{height:50px}[_nghost-%COMP%]   .filters-operation[_ngcontent-%COMP%]{margin-top:-40px;color:#666;font-weight:500}[_nghost-%COMP%]   .tb-filter-preview[_ngcontent-%COMP%]{padding:8px;border:1px groove rgba(0,0,0,.25);border-radius:4px}[_nghost-%COMP%]     .tb-filter-preview .tb-filter-text{max-height:200px}"]}),t}();!function(){i["\u0275setClassMetadata"](S,[{type:i.Component,args:[{selector:"tb-key-filter-list",templateUrl:"./key-filter-list.component.html",styleUrls:["./key-filter-list.component.scss"],providers:[{provide:a.NG_VALUE_ACCESSOR,useExisting:Object(i.forwardRef)((function(){return S})),multi:!0}]}]}],(function(){return[{type:a.FormBuilder},{type:l.MatDialog}]}),{disabled:[{type:i.Input}],displayUserParameters:[{type:i.Input}],allowUserDynamicSource:[{type:i.Input}],telemetryKeysOnly:[{type:i.Input}],entityId:[{type:i.Input}]})}()},mopS:function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var i=n("fXoL"),a=n("Y8nr"),r=n("tk/3"),o=function(){function t(t){this.http=t}return t.prototype.getEvents=function(t,e,n,i,r){return this.http.get("/api/events/"+t.entityType+"/"+t.id+"/"+e+i.toQuery()+"&tenantId="+n,Object(a.b)(r))},t.\u0275fac=function(e){return new(e||t)(i["\u0275\u0275inject"](r.b))},t.\u0275prov=i["\u0275\u0275defineInjectable"]({token:t,factory:t.\u0275fac,providedIn:"root"}),t}();!function(){i["\u0275setClassMetadata"](o,[{type:i.Injectable,args:[{providedIn:"root"}]}],(function(){return[{type:r.b}]}),null)}()},nc6G:function(t,e,n){"use strict";n.d(e,"a",(function(){return E}));var i=n("fXoL"),a=n("3Pt+"),r=n("8LU1"),o=n("JIJk"),s=n("//Q6"),l=n("l7P3"),c=n("sYmb"),d=n("XiUz"),p=n("kmnG"),u=n("d3UM"),m=n("ofXK"),f=n("FKr1"),h=n("qFsG");function g(t,e){if(1&t&&(i["\u0275\u0275elementStart"](0,"mat-option",10),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&t){var n=e.$implicit,a=i["\u0275\u0275nextContext"]();i["\u0275\u0275property"]("value",n),i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,2,a.coapTransportDeviceTypeTranslations.get(n))," ")}}function y(t,e){1&t&&(i["\u0275\u0275elementStart"](0,"mat-error"),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&t&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,1,"device-profile.coap-device-type-required")," "))}function b(t,e){if(1&t&&(i["\u0275\u0275elementStart"](0,"mat-option",10),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&t){var n=e.$implicit,a=i["\u0275\u0275nextContext"](2);i["\u0275\u0275property"]("value",n),i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,2,a.transportPayloadTypeTranslations.get(n))," ")}}function v(t,e){1&t&&(i["\u0275\u0275elementStart"](0,"mat-error"),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&t&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,1,"device-profile.mqtt-payload-type-required")," "))}function x(t,e){1&t&&(i["\u0275\u0275elementStart"](0,"mat-error"),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&t&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,1,"device-profile.telemetry-proto-schema-required")," "))}function C(t,e){1&t&&(i["\u0275\u0275elementStart"](0,"mat-error"),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&t&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,1,"device-profile.attributes-proto-schema-required")," "))}function S(t,e){if(1&t&&(i["\u0275\u0275elementStart"](0,"div",14),i["\u0275\u0275elementStart"](1,"mat-form-field",15),i["\u0275\u0275elementStart"](2,"mat-label",16),i["\u0275\u0275text"](3,"device-profile.telemetry-proto-schema"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](4,"textarea",17),i["\u0275\u0275template"](5,x,3,3,"mat-error",8),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](6,"mat-form-field",15),i["\u0275\u0275elementStart"](7,"mat-label",16),i["\u0275\u0275text"](8,"device-profile.attributes-proto-schema"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](9,"textarea",18),i["\u0275\u0275template"](10,C,3,3,"mat-error",8),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()),2&t){var n=i["\u0275\u0275nextContext"](2);i["\u0275\u0275advance"](5),i["\u0275\u0275property"]("ngIf",n.coapDeviceProfileTransportConfigurationFormGroup.get("coapDeviceTypeConfiguration.transportPayloadTypeConfiguration.deviceTelemetryProtoSchema").hasError("required")),i["\u0275\u0275advance"](5),i["\u0275\u0275property"]("ngIf",n.coapDeviceProfileTransportConfigurationFormGroup.get("coapDeviceTypeConfiguration.transportPayloadTypeConfiguration.deviceAttributesProtoSchema").hasError("required"))}}function w(t,e){if(1&t&&(i["\u0275\u0275elementStart"](0,"div",11),i["\u0275\u0275elementStart"](1,"fieldset",2),i["\u0275\u0275elementStart"](2,"legend",3),i["\u0275\u0275text"](3,"device-profile.coap-device-payload-type"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](4,"div",4),i["\u0275\u0275elementStart"](5,"mat-form-field",5),i["\u0275\u0275elementStart"](6,"mat-select",12),i["\u0275\u0275template"](7,b,3,4,"mat-option",7),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](8,v,3,3,"mat-error",8),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](9,S,11,2,"div",13),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()),2&t){var n=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](7),i["\u0275\u0275property"]("ngForOf",n.transportPayloadTypes),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",n.coapDeviceProfileTransportConfigurationFormGroup.get("coapDeviceTypeConfiguration.transportPayloadTypeConfiguration.transportPayloadType").hasError("required")),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",n.protoPayloadType)}}var E=function(){function t(t,e){this.store=t,this.fb=e,this.coapTransportDeviceTypes=Object.keys(o.f),this.coapTransportDeviceTypeTranslations=o.m,this.transportPayloadTypes=Object.keys(o.k),this.transportPayloadTypeTranslations=o.F,this.transportPayloadTypeConfiguration=this.fb.group({transportPayloadType:[o.k.JSON,a.Validators.required],deviceTelemetryProtoSchema:[o.u,a.Validators.required],deviceAttributesProtoSchema:[o.t,a.Validators.required]}),this.propagateChange=function(t){}}return Object.defineProperty(t.prototype,"required",{get:function(){return this.requiredValue},set:function(t){this.requiredValue=Object(r.coerceBooleanProperty)(t)},enumerable:!1,configurable:!0}),t.prototype.registerOnChange=function(t){this.propagateChange=t},t.prototype.registerOnTouched=function(t){},t.prototype.ngOnInit=function(){var t=this;this.coapDeviceProfileTransportConfigurationFormGroup=this.fb.group({coapDeviceTypeConfiguration:this.fb.group({coapDeviceType:[o.f.DEFAULT,a.Validators.required],transportPayloadTypeConfiguration:this.transportPayloadTypeConfiguration})}),this.coapDeviceProfileTransportConfigurationFormGroup.get("coapDeviceTypeConfiguration.coapDeviceType").valueChanges.subscribe((function(e){t.updateCoapDeviceTypeBasedControls(e,!0)})),this.coapDeviceProfileTransportConfigurationFormGroup.valueChanges.subscribe((function(){t.updateModel()}))},Object.defineProperty(t.prototype,"coapDeviceTypeDefault",{get:function(){return this.coapDeviceProfileTransportConfigurationFormGroup.get("coapDeviceTypeConfiguration.coapDeviceType").value===o.f.DEFAULT},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"protoPayloadType",{get:function(){return this.coapDeviceProfileTransportConfigurationFormGroup.get("coapDeviceTypeConfiguration.transportPayloadTypeConfiguration.transportPayloadType").value===o.k.PROTOBUF},enumerable:!1,configurable:!0}),t.prototype.updateCoapDeviceTypeBasedControls=function(t,e){void 0===e&&(e=!1);var n=this.coapDeviceProfileTransportConfigurationFormGroup.get("coapDeviceTypeConfiguration");e&&n.patchValue({transportPayloadTypeConfiguration:this.transportPayloadTypeConfiguration},{emitEvent:!1}),t!==o.f.DEFAULT||this.disabled?n.get("transportPayloadTypeConfiguration").disable({emitEvent:!1}):n.get("transportPayloadTypeConfiguration").enable({emitEvent:!1})},t.prototype.setDisabledState=function(t){this.disabled=t,this.disabled?this.coapDeviceProfileTransportConfigurationFormGroup.disable({emitEvent:!1}):this.coapDeviceProfileTransportConfigurationFormGroup.enable({emitEvent:!1})},t.prototype.writeValue=function(t){var e;Object(s.o)(t)&&(this.coapDeviceProfileTransportConfigurationFormGroup.patchValue(t,{emitEvent:!1}),this.updateCoapDeviceTypeBasedControls(null===(e=t.coapDeviceTypeConfiguration)||void 0===e?void 0:e.coapDeviceType))},t.prototype.updateModel=function(){var t=null;this.coapDeviceProfileTransportConfigurationFormGroup.valid&&((t=this.coapDeviceProfileTransportConfigurationFormGroup.value).type=o.j.COAP),this.propagateChange(t)},t.\u0275fac=function(e){return new(e||t)(i["\u0275\u0275directiveInject"](l.Store),i["\u0275\u0275directiveInject"](a.FormBuilder))},t.\u0275cmp=i["\u0275\u0275defineComponent"]({type:t,selectors:[["tb-coap-device-profile-transport-configuration"]],inputs:{required:"required",disabled:"disabled"},features:[i["\u0275\u0275ProvidersFeature"]([{provide:a.NG_VALUE_ACCESSOR,useExisting:Object(i.forwardRef)((function(){return t})),multi:!0}])],decls:11,vars:4,consts:[[2,"padding-bottom","16px",3,"formGroup"],["formGroupName","coapDeviceTypeConfiguration"],[1,"fields-group"],["translate","",1,"group-title"],["fxLayoutGap","8px","fxLayout","column"],[1,"mat-block"],["formControlName","coapDeviceType","required",""],[3,"value",4,"ngFor","ngForOf"],[4,"ngIf"],["formGroupName","transportPayloadTypeConfiguration",4,"ngIf"],[3,"value"],["formGroupName","transportPayloadTypeConfiguration"],["formControlName","transportPayloadType","required",""],["fxLayout","column",4,"ngIf"],["fxLayout","column"],["fxFlex",""],["translate",""],["matInput","","required","","formControlName","deviceTelemetryProtoSchema","rows","5"],["matInput","","required","","formControlName","deviceAttributesProtoSchema","rows","5"]],template:function(t,e){1&t&&(i["\u0275\u0275elementStart"](0,"form",0),i["\u0275\u0275elementStart"](1,"section",1),i["\u0275\u0275elementStart"](2,"fieldset",2),i["\u0275\u0275elementStart"](3,"legend",3),i["\u0275\u0275text"](4,"device-profile.coap-device-type"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](5,"div",4),i["\u0275\u0275elementStart"](6,"mat-form-field",5),i["\u0275\u0275elementStart"](7,"mat-select",6),i["\u0275\u0275template"](8,g,3,4,"mat-option",7),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](9,y,3,3,"mat-error",8),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](10,w,10,3,"div",9),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()),2&t&&(i["\u0275\u0275property"]("formGroup",e.coapDeviceProfileTransportConfigurationFormGroup),i["\u0275\u0275advance"](8),i["\u0275\u0275property"]("ngForOf",e.coapTransportDeviceTypes),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",e.coapDeviceProfileTransportConfigurationFormGroup.get("coapDeviceTypeConfiguration.coapDeviceType").hasError("required")),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",e.coapDeviceTypeDefault))},directives:[a["\u0275angular_packages_forms_forms_y"],a.NgControlStatusGroup,a.FormGroupDirective,a.FormGroupName,c.TranslateDirective,d.g,d.f,p.MatFormField,u.MatSelect,a.NgControlStatus,a.FormControlName,a.RequiredValidator,m.NgForOf,m.NgIf,f.MatOption,p.MatError,d.b,p.MatLabel,h.MatInput,a.DefaultValueAccessor],pipes:[c.TranslatePipe],styles:["[_nghost-%COMP%]   .fields-group[_ngcontent-%COMP%]{padding:8px;margin:10px 0;border:1px groove rgba(0,0,0,.25);border-radius:4px}[_nghost-%COMP%]   .fields-group[_ngcontent-%COMP%]   legend[_ngcontent-%COMP%]{color:rgba(0,0,0,.7)}[_nghost-%COMP%]   .fields-group[_ngcontent-%COMP%]   .tb-hint[_ngcontent-%COMP%]{padding:0}"]}),t}();!function(){i["\u0275setClassMetadata"](E,[{type:i.Component,args:[{selector:"tb-coap-device-profile-transport-configuration",templateUrl:"./coap-device-profile-transport-configuration.component.html",styleUrls:["./coap-device-profile-transport-configuration.component.scss"],providers:[{provide:a.NG_VALUE_ACCESSOR,useExisting:Object(i.forwardRef)((function(){return E})),multi:!0}]}]}],(function(){return[{type:l.Store},{type:a.FormBuilder}]}),{required:[{type:i.Input}],disabled:[{type:i.Input}]})}()},ncEg:function(t,e,n){"use strict";(function(t){n.d(e,"a",(function(){return H}));var i=n("mrSG"),a=n("fXoL"),r=(n("5OJv"),n("0lYY")),o=n("RxGS"),s=n("5xOD"),l=n("OiFK"),c=n("jtHE"),d=n("LRne"),p=n("cp0P"),u=n("z6cu"),m=n("//Q6"),f=n("OMGm"),h=n("Neop"),g=n("OCOE"),y=n("JIr8"),b=n("eIep"),v=n("xKAQ"),x=n("k9IB"),C=n("DaoB"),S=n("BOYq"),w=n("nhHW"),E=n("YnEf"),I=n("c6cM"),O=n("21Fy"),T=n("xFtW"),M=n("HR/i"),F=n("lbPe"),P=n("PdRd"),D=n("vY+p"),k=n("l7P3"),j=n("tyNb"),A=n("0IaG"),_=n("sYmb"),L=n("rezs"),V=n("XiUz"),R=n("ofXK"),N=n("znSr"),G=n("Xa2L"),B=n("CRwc"),U=["widgetContent"];function q(t,e){if(1&t){var n=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementStart"](0,"tb-legend",8),a["\u0275\u0275listener"]("legendKeyHiddenChange",(function(t){return a["\u0275\u0275restoreView"](n),a["\u0275\u0275nextContext"]().onLegendKeyHiddenChange(t)})),a["\u0275\u0275elementEnd"]()}if(2&t){var i=a["\u0275\u0275nextContext"]();a["\u0275\u0275property"]("ngStyle",i.legendStyle)("legendConfig",i.legendConfig)("legendData",i.legendData)}}function W(t,e){if(1&t){var n=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementStart"](0,"tb-legend",8),a["\u0275\u0275listener"]("legendKeyHiddenChange",(function(t){return a["\u0275\u0275restoreView"](n),a["\u0275\u0275nextContext"]().onLegendKeyHiddenChange(t)})),a["\u0275\u0275elementEnd"]()}if(2&t){var i=a["\u0275\u0275nextContext"]();a["\u0275\u0275property"]("ngStyle",i.legendStyle)("legendConfig",i.legendConfig)("legendData",i.legendData)}}function z(t,e){if(1&t&&(a["\u0275\u0275elementStart"](0,"div",9),a["\u0275\u0275elementStart"](1,"span"),a["\u0275\u0275text"](2),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()),2&t){var n=a["\u0275\u0275nextContext"]();a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate1"]("Widget Error: ",n.widgetErrorData.name+": "+n.widgetErrorData.message,"")}}function K(t,e){1&t&&(a["\u0275\u0275elementStart"](0,"div",10),a["\u0275\u0275elementStart"](1,"span",11),a["\u0275\u0275text"](2,"widget.no-data"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]())}var H=function(e){function n(t,n,i,a,r,o,s,l,c,d,p,u,m,f,g,y,b,v,x,C,S,w){var E=e.call(this,t)||this;return E.store=t,E.route=n,E.router=i,E.widgetComponentService=a,E.componentFactoryResolver=r,E.elementRef=o,E.injector=s,E.dialog=l,E.embedDashboardDialogComponent=c,E.widgetService=d,E.resources=p,E.timeService=u,E.deviceService=m,E.entityService=f,E.dashboardService=g,E.entityDataService=y,E.alarmDataService=b,E.translate=v,E.utils=x,E.raf=C,E.ngZone=S,E.cd=w,E.displayNoData=!1,E.subscriptionInited=!1,E.destroyed=!1,E.widgetSizeDetected=!1,E.widgetInstanceInited=!1,E.dataUpdatePending=!1,E.cafs={},E.toastTargetId="widget-messages-"+E.utils.guid(),E.cssParser=new h.a,E.rxSubscriptions=new Array,E.cssParser.testMode=!1,E}return Object(i.d)(n,e),n.prototype.ngOnInit=function(){var t=this;if(this.loadingData=!0,this.widget=this.dashboardWidget.widget,this.displayLegend=Object(m.n)(this.widget.config.showLegend)?this.widget.config.showLegend:this.widget.type===r.k.timeseries,this.legendContainerLayoutType="column",this.displayLegend)switch(this.legendConfig=this.widget.config.legendConfig||Object(r.f)(this.widget.type),this.legendData={keys:[],data:[]},this.legendConfig.position===r.c.top||this.legendConfig.position===r.c.bottom?(this.legendContainerLayoutType="column",this.isLegendFirst=this.legendConfig.position===r.c.top):(this.legendContainerLayoutType="row",this.isLegendFirst=this.legendConfig.position===r.c.left),this.legendConfig.position){case r.c.top:this.legendStyle={paddingBottom:"8px",maxHeight:"50%",overflowY:"auto"};break;case r.c.bottom:this.legendStyle={paddingTop:"8px",maxHeight:"50%",overflowY:"auto"};break;case r.c.left:this.legendStyle={paddingRight:"0px",maxWidth:"50%",overflowY:"auto"};break;case r.c.right:this.legendStyle={paddingLeft:"0px",maxWidth:"50%",overflowY:"auto"}}var e={};if(this.widget.config.actions)for(var n=function(n){var a=i.widget.config.actions[n],r=[];a.forEach((function(e){var n=Object(m.e)(e);n.displayName=t.utils.customTranslation(e.name,e.name),r.push(n)})),e[n]=r},i=this,a=0,o=Object.keys(this.widget.config.actions);a<o.length;a++){n(o[a])}this.widgetContext=this.dashboardWidget.widgetContext,this.widgetContext.changeDetector=this.cd,this.widgetContext.ngZone=this.ngZone,this.widgetContext.store=this.store,this.widgetContext.servicesMap=T.a,this.widgetContext.isEdit=this.isEdit,this.widgetContext.isMobile=this.isMobile,this.widgetContext.subscriptionApi={createSubscription:this.createSubscription.bind(this),createSubscriptionFromInfo:this.createSubscriptionFromInfo.bind(this),removeSubscription:function(e){var n=t.widgetContext.subscriptions[e];n&&(n.destroy(),delete t.widgetContext.subscriptions[e])}},this.widgetContext.actionsApi={actionDescriptorsBySourceId:e,getActionDescriptors:this.getActionDescriptors.bind(this),handleWidgetAction:this.handleWidgetAction.bind(this),elementClick:this.elementClick.bind(this),getActiveEntityInfo:this.getActiveEntityInfo.bind(this)},this.widgetContext.customHeaderActions=[],this.getActionDescriptors(r.i.headerButton.value).forEach((function(e){var n={name:e.name,displayName:e.displayName,icon:e.icon,descriptor:e,onAction:function(n){var i=t.getActiveEntityInfo(),a=i?i.entityId:null,r=i?i.entityName:null,o=i?i.entityLabel:null;t.handleWidgetAction(n,e,a,r,null,o)}};t.widgetContext.customHeaderActions.push(n)})),this.subscriptionContext=new f.a(this.widgetContext.dashboard),this.subscriptionContext.timeService=this.timeService,this.subscriptionContext.deviceService=this.deviceService,this.subscriptionContext.translate=this.translate,this.subscriptionContext.entityDataService=this.entityDataService,this.subscriptionContext.alarmDataService=this.alarmDataService,this.subscriptionContext.utils=this.utils,this.subscriptionContext.raf=this.raf,this.subscriptionContext.widgetUtils=this.widgetContext.utils,this.subscriptionContext.getServerTimeDiff=this.dashboardService.getServerTimeDiff.bind(this.dashboardService),this.widgetComponentService.getWidgetInfo(this.widget.bundleAlias,this.widget.typeAlias,this.widget.isSystemType).subscribe((function(e){t.widgetInfo=e,t.loadFromWidgetInfo()}),(function(e){t.widgetInfo=e.widgetInfo,t.errorMessages=e.errorMessages,t.loadFromWidgetInfo()})),setTimeout((function(){t.dashboardWidget.updateWidgetParams()}),0)},n.prototype.ngAfterViewInit=function(){},n.prototype.ngOnChanges=function(t){for(var e=0,n=Object.keys(t);e<n.length;e++){var i=n[e],a=t[i];a.firstChange||a.currentValue===a.previousValue||("isEdit"===i?this.onEditModeChanged():"isMobile"===i&&this.onMobileModeChanged())}},n.prototype.ngOnDestroy=function(){this.destroyed=!0,this.rxSubscriptions.forEach((function(t){t.unsubscribe()})),this.rxSubscriptions.length=0,this.onDestroy()},n.prototype.displayWidgetInstance=function(){if(this.widget.type!==r.k.static){for(var t=0,e=Object.keys(this.widgetContext.subscriptions);t<e.length;t++){var n=e[t];if(this.widgetContext.subscriptions[n].isDataResolved())return!0}return!1}return!0},n.prototype.onDestroy=function(){if(this.widgetContext){for(var t=this.displayWidgetInstance(),e=0,n=Object.keys(this.widgetContext.subscriptions);e<n.length;e++){var i=n[e];this.widgetContext.subscriptions[i].destroy()}if(this.subscriptionInited=!1,this.dataUpdatePending=!1,this.pendingMessage=null,this.widgetContext.subscriptions={},this.widgetContext.inited){this.widgetContext.inited=!1;for(var a=0,r=Object.keys(this.cafs);a<r.length;a++){var o=r[a];this.cafs[o]&&(this.cafs[o](),this.cafs[o]=null)}try{t&&(this.widgetTypeInstance.onDestroy(),this.widgetInstanceInited=!1)}catch(s){this.handleWidgetException(s)}}this.widgetContext.destroyed=!0,this.destroyDynamicWidgetComponent()}},n.prototype.onTimewindowChanged=function(t){for(var e=0,n=Object.keys(this.widgetContext.subscriptions);e<n.length;e++){var i=n[e],a=this.widgetContext.subscriptions[i];a.useDashboardTimewindow||a.updateTimewindowConfig(t)}},n.prototype.onLegendKeyHiddenChange=function(t){for(var e=0,n=Object.keys(this.widgetContext.subscriptions);e<n.length;e++){var i=n[e];this.widgetContext.subscriptions[i].updateDataVisibility(t)}},n.prototype.loadFromWidgetInfo=function(){var t=this;this.widgetContext.widgetNamespace="widget-type-"+(this.widget.isSystemType?"sys-":"")+this.widget.bundleAlias+"-"+this.widget.typeAlias;var e=this.elementRef.nativeElement;if(e.classList.add("tb-widget"),e.classList.add(this.widgetContext.widgetNamespace),this.widgetType=this.widgetInfo.widgetTypeFunction,this.typeParameters=this.widgetInfo.typeParameters,this.widgetType)try{this.widgetTypeInstance=new this.widgetType(this.widgetContext)}catch(n){this.handleWidgetException(n),this.widgetTypeInstance={}}else this.widgetTypeInstance={};this.widgetTypeInstance.onInit||(this.widgetTypeInstance.onInit=function(){}),this.widgetTypeInstance.onDataUpdated||(this.widgetTypeInstance.onDataUpdated=function(){}),this.widgetTypeInstance.onResize||(this.widgetTypeInstance.onResize=function(){}),this.widgetTypeInstance.onEditModeChanged||(this.widgetTypeInstance.onEditModeChanged=function(){}),this.widgetTypeInstance.onMobileModeChanged||(this.widgetTypeInstance.onMobileModeChanged=function(){}),this.widgetTypeInstance.onDestroy||(this.widgetTypeInstance.onDestroy=function(){}),this.initialize().subscribe((function(){t.onInit()}),(function(t){}))},n.prototype.detectChanges=function(){if(!this.destroyed)try{this.cd.detectChanges()}catch(t){}},n.prototype.isReady=function(){return this.subscriptionInited&&this.widgetSizeDetected},n.prototype.onInit=function(t){var e=this;this.widgetContext.$containerParent&&!this.destroyed&&(t||this.checkSize(),!this.widgetContext.inited&&this.isReady()&&(this.widgetContext.inited=!0,this.cafs.init&&(this.cafs.init(),this.cafs.init=null),this.cafs.init=this.raf.raf((function(){try{e.displayWidgetInstance()?(e.widgetTypeInstance.onInit(),e.widgetInstanceInited=!0,e.dataUpdatePending&&(e.widgetTypeInstance.onDataUpdated(),e.dataUpdatePending=!1),e.pendingMessage&&(e.displayMessage(e.pendingMessage.severity,e.pendingMessage.message),e.pendingMessage=null)):(e.loadingData=!1,e.displayNoData=!0),e.detectChanges()}catch(t){e.handleWidgetException(t)}})),!this.typeParameters.useCustomDatasources&&this.widgetContext.defaultSubscription&&this.widgetContext.defaultSubscription.subscribe()))},n.prototype.onResize=function(){var t=this;this.checkSize()&&(this.widgetContext.inited?(this.cafs.resize&&(this.cafs.resize(),this.cafs.resize=null),this.cafs.resize=this.raf.raf((function(){try{t.displayWidgetInstance()&&t.widgetTypeInstance.onResize()}catch(e){t.handleWidgetException(e)}}))):this.onInit(!0))},n.prototype.onEditModeChanged=function(){var t=this;this.widgetContext.isEdit!==this.isEdit&&(this.widgetContext.isEdit=this.isEdit,this.widgetContext.inited&&(this.cafs.editMode&&(this.cafs.editMode(),this.cafs.editMode=null),this.cafs.editMode=this.raf.raf((function(){try{t.displayWidgetInstance()&&t.widgetTypeInstance.onEditModeChanged()}catch(e){t.handleWidgetException(e)}}))))},n.prototype.onMobileModeChanged=function(){var t=this;this.widgetContext.isMobile!==this.isMobile&&(this.widgetContext.isMobile=this.isMobile,this.widgetContext.inited&&(this.cafs.mobileMode&&(this.cafs.mobileMode(),this.cafs.mobileMode=null),this.cafs.mobileMode=this.raf.raf((function(){try{t.displayWidgetInstance()&&t.widgetTypeInstance.onMobileModeChanged()}catch(e){t.handleWidgetException(e)}}))))},n.prototype.reInit=function(){var t=this;this.cafs.reinit&&(this.cafs.reinit(),this.cafs.reinit=null),this.cafs.reinit=this.raf.raf((function(){t.ngZone.run((function(){t.reInitImpl()}))}))},n.prototype.reInitImpl=function(){var t=this;this.onDestroy(),this.typeParameters.useCustomDatasources?(this.widgetContext.reset(),this.subscriptionInited=!0,this.configureDynamicWidgetComponent(),this.onInit()):this.createDefaultSubscription().subscribe((function(){t.destroyed?t.onDestroy():(t.widgetContext.reset(),t.subscriptionInited=!0,t.configureDynamicWidgetComponent(),t.onInit())}),(function(){t.destroyed?t.onDestroy():(t.widgetContext.reset(),t.subscriptionInited=!0,t.onInit())}))},n.prototype.initialize=function(){var t=this,e=new c.a;return this.rxSubscriptions.push(this.widgetContext.aliasController.entityAliasesChanged.subscribe((function(e){for(var n=!1,i=0,a=Object.keys(t.widgetContext.subscriptions);i<a.length;i++){var r=a[i],o=t.widgetContext.subscriptions[r];n=n||o.onAliasesChanged(e)}n&&!t.typeParameters.useCustomDatasources&&(t.displayNoData=!1,t.reInit())}))),this.rxSubscriptions.push(this.widgetContext.aliasController.filtersChanged.subscribe((function(e){for(var n=!1,i=0,a=Object.keys(t.widgetContext.subscriptions);i<a.length;i++){var r=a[i],o=t.widgetContext.subscriptions[r];n=n||o.onFiltersChanged(e)}n&&!t.typeParameters.useCustomDatasources&&(t.displayNoData=!1,t.reInit())}))),this.rxSubscriptions.push(this.widgetContext.dashboard.dashboardTimewindowChanged.subscribe((function(e){for(var n=0,i=Object.keys(t.widgetContext.subscriptions);n<i.length;n++){var a=i[n];t.widgetContext.subscriptions[a].onDashboardTimewindowChanged(e)}}))),this.typeParameters.useCustomDatasources?(this.loadingData=!1,this.subscriptionInited=!0,this.configureDynamicWidgetComponent(),e.next(),e.complete()):this.createDefaultSubscription().subscribe((function(){t.subscriptionInited=!0,t.configureDynamicWidgetComponent(),e.next(),e.complete()}),(function(n){t.subscriptionInited=!0,e.error(n)})),e.asObservable()},n.prototype.destroyDynamicWidgetComponent=function(){this.widgetContext.$containerParent&&this.widgetResize$&&this.widgetResize$.disconnect(),this.dynamicWidgetComponentRef&&(this.dynamicWidgetComponentRef.destroy(),this.dynamicWidgetComponentRef=null)},n.prototype.handleWidgetException=function(t){console.error(t),this.widgetErrorData=this.utils.processWidgetException(t),this.detectChanges()},n.prototype.displayMessage=function(t,e,n){this.widgetContext.showToast(t,e,n,"bottom","right",this.toastTargetId)},n.prototype.clearMessage=function(){this.widgetContext.hideToast(this.toastTargetId)},n.prototype.configureDynamicWidgetComponent=function(){var e=this;this.widgetContentContainer.clear();var n=a.Injector.create({providers:[{provide:"widgetContext",useValue:this.widgetContext},{provide:"errorMessages",useValue:this.errorMessages}],parent:this.injector}),i=t(this.elementRef.nativeElement.querySelector("#widget-container"));this.widgetContext.$containerParent=t(i);try{this.dynamicWidgetComponentRef=this.widgetContentContainer.createComponent(this.widgetInfo.componentFactory,0,n),this.cd.detectChanges()}catch(r){console.error(r),this.dynamicWidgetComponentRef&&(this.dynamicWidgetComponentRef.destroy(),this.dynamicWidgetComponentRef=null),this.widgetContentContainer.clear()}this.dynamicWidgetComponentRef&&(this.dynamicWidgetComponent=this.dynamicWidgetComponentRef.instance,this.widgetContext.$container=t(this.dynamicWidgetComponentRef.location.nativeElement),this.widgetContext.$container.css("display","block"),this.widgetContext.$container.css("user-select","none"),this.widgetContext.$container.attr("id","container"),this.widgetSizeDetected&&(this.widgetContext.$container.css("height",this.widgetContext.height+"px"),this.widgetContext.$container.css("width",this.widgetContext.width+"px"))),this.widgetResize$=new M.a((function(){e.onResize()})),this.widgetResize$.observe(this.widgetContext.$containerParent[0])},n.prototype.createSubscription=function(t,e){var n=this,i=new c.a;t.dashboardTimewindow=this.widgetContext.dashboardTimewindow;var a=new I.a(this.subscriptionContext,t);return a.init$.subscribe((function(){n.widgetContext.subscriptions[a.id]=a,e&&a.subscribe(),i.next(a),i.complete()}),(function(t){i.error(t)})),i.asObservable()},n.prototype.createSubscriptionFromInfo=function(t,e,n,i,a){var o=this,s=new c.a;return n.type=t,i?this.defaultComponentsOptions(n):n.timeWindowConfig||(n.useDashboardTimewindow=!0),n.type===r.k.alarm?n.alarmSource=this.entityService.createAlarmSourceFromSubscriptionInfo(e[0]):n.datasources=this.entityService.createDatasourcesFromSubscriptionsInfo(e),this.createSubscription(n,a).subscribe((function(t){i&&o.defaultSubscriptionOptions(t,n),s.next(t),s.complete()}),(function(t){s.error(t)})),s.asObservable()},n.prototype.defaultComponentsOptions=function(t){var e=this;t.useDashboardTimewindow=!Object(m.n)(this.widget.config.useDashboardTimewindow)||this.widget.config.useDashboardTimewindow,t.displayTimewindow=Object(m.n)(this.widget.config.displayTimewindow)?this.widget.config.displayTimewindow:!t.useDashboardTimewindow,t.timeWindowConfig=t.useDashboardTimewindow?this.widgetContext.dashboardTimewindow:this.widget.config.timewindow,t.legendConfig=null,this.displayLegend&&(t.legendConfig=this.legendConfig),t.decimals=this.widgetContext.decimals,t.units=this.widgetContext.units,t.callbacks={onDataUpdated:function(){try{e.displayWidgetInstance()&&(e.widgetInstanceInited?e.widgetTypeInstance.onDataUpdated():e.dataUpdatePending=!0)}catch(t){}},onDataUpdateError:function(t,n){e.handleWidgetException(n)},onSubscriptionMessage:function(t,n){e.displayWidgetInstance()&&(e.widgetInstanceInited?e.displayMessage(n.severity,n.message):e.pendingMessage=n)},onInitialPageDataChanged:function(t,n){e.reInit()},forceReInit:function(){e.reInit()},dataLoading:function(t){e.loadingData!==t.loadingData&&(e.loadingData=t.loadingData,e.detectChanges())},legendDataUpdated:function(t,n){n&&e.detectChanges()},timeWindowUpdated:function(t,n){e.ngZone.run((function(){e.widget.config.timewindow=n,e.detectChanges()}))}}},n.prototype.defaultSubscriptionOptions=function(t,e){this.displayLegend&&(this.legendData=t.legendData)},n.prototype.createDefaultSubscription=function(){var t,e=this,n=new c.a;if(this.widget.type!==r.k.rpc&&this.widget.type!==r.k.static){var i=this.widgetContext.settings;t={type:this.widget.type,stateData:this.typeParameters.stateData,hasDataPageLink:this.typeParameters.hasDataPageLink,singleEntity:this.typeParameters.singleEntity,warnOnPageDataOverflow:this.typeParameters.warnOnPageDataOverflow,ignoreDataUpdateOnIntervalTick:this.typeParameters.ignoreDataUpdateOnIntervalTick,comparisonEnabled:i.comparisonEnabled,timeForComparison:i.timeForComparison},this.widget.type===r.k.alarm?t.alarmSource=Object(m.e)(this.widget.config.alarmSource):t.datasources=Object(m.e)(this.widget.config.datasources),this.defaultComponentsOptions(t),this.createSubscription(t).subscribe((function(i){e.defaultSubscriptionOptions(i,t),e.widgetContext.datasources=i.datasources,e.widgetContext.data=i.data,e.widgetContext.hiddenData=i.hiddenData,e.widgetContext.timeWindow=i.timeWindow,e.widgetContext.defaultSubscription=i,n.next(),n.complete()}),(function(t){n.error(t)}))}else this.widget.type===r.k.rpc?(this.loadingData=!1,(t={type:this.widget.type,targetDeviceAliasIds:this.widget.config.targetDeviceAliasIds}).callbacks={rpcStateChanged:function(t){e.dynamicWidgetComponent&&(e.dynamicWidgetComponent.rpcEnabled=t.rpcEnabled,e.dynamicWidgetComponent.executingRpcRequest=t.executingRpcRequest,e.detectChanges())},onRpcSuccess:function(t){e.dynamicWidgetComponent&&(e.dynamicWidgetComponent.executingRpcRequest=t.executingRpcRequest,e.dynamicWidgetComponent.rpcErrorText=t.rpcErrorText,e.dynamicWidgetComponent.rpcRejection=t.rpcRejection,e.clearMessage(),e.detectChanges())},onRpcFailed:function(t){e.dynamicWidgetComponent&&(e.dynamicWidgetComponent.executingRpcRequest=t.executingRpcRequest,e.dynamicWidgetComponent.rpcErrorText=t.rpcErrorText,e.dynamicWidgetComponent.rpcRejection=t.rpcRejection,t.rpcErrorText&&e.displayMessage("error",t.rpcErrorText),e.detectChanges())},onRpcErrorCleared:function(t){e.dynamicWidgetComponent&&(e.dynamicWidgetComponent.rpcErrorText=null,e.dynamicWidgetComponent.rpcRejection=null,e.clearMessage(),e.detectChanges())}},this.createSubscription(t).subscribe((function(t){e.widgetContext.defaultSubscription=t,n.next(),n.complete()}),(function(t){n.error(t)})),this.detectChanges()):this.widget.type===r.k.static?(this.loadingData=!1,n.next(),n.complete(),this.detectChanges()):(n.next(),n.complete(),this.detectChanges());return n.asObservable()},n.prototype.getActionDescriptors=function(t){var e=this.widgetContext.actionsApi.actionDescriptorsBySourceId[t];return e||(e=[]),e},n.prototype.handleWidgetAction=function(t,e,n,i,a,o){var s,l=this,c=e.type,d=e.stateEntityParamName;switch(e.setEntityId&&Object(m.K)(n)&&(s=n),c){case r.d.openDashboardState:case r.d.updateDashboardState:var p=e.targetDashboardStateId,u=Object(m.e)(this.widgetContext.stateController.getStateParams());this.updateEntityParams(u,d,s,i,o),c===r.d.openDashboardState?e.openInSeparateDialog?this.openDashboardStateInDialog(e,n,i,a,o):this.widgetContext.stateController.openState(p,u,e.openRightLayout):this.widgetContext.stateController.updateState(p,u,e.openRightLayout);break;case r.d.openDashboard:var f=e.targetDashboardId;p=e.targetDashboardStateId;var h={params:{}};this.updateEntityParams(h.params,d,s,i,o),p&&(h.id=p);var g=Object(m.D)([h]),y=void 0;y=this.route.snapshot.data.singlePageMode?"/dashboard/"+f+"?state="+g:"/dashboards/"+f+"?state="+g,e.openNewBrowserTab?window.open(y,"_blank"):this.router.navigateByUrl(y);break;case r.d.custom:var b=e.customFunction;if(b&&b.length>0)try{a||(a={}),new Function("$event","widgetContext","entityId","entityName","additionalParams","entityLabel",b)(t,this.widgetContext,n,i,a,o)}catch(I){console.error(I)}break;case r.d.customPretty:var v=e.customFunction,x=e.customHtml,C=e.customCss,S=e.customResources,w="custom-action-pretty-"+e.name.toLowerCase(),E="";Object(m.n)(x)&&x.length>0&&(E=x),this.loadCustomActionResources(w,C,S).subscribe((function(){if(Object(m.n)(v)&&v.length>0)try{a||(a={}),new Function("$event","widgetContext","entityId","entityName","htmlTemplate","additionalParams","entityLabel",v)(t,l.widgetContext,n,i,E,a,o)}catch(I){console.error(I)}}),(function(t){l.processResourcesLoadErrors(t)}))}},n.prototype.openDashboardStateInDialog=function(t,e,n,i,a){var r,o=Object(m.e)(this.widgetContext.stateController.dashboardCtrl.dashboardCtx.getDashboard()),s={params:{}},l=t.stateEntityParamName,c=t.targetDashboardStateId;t.setEntityId&&(r=e),this.updateEntityParams(s.params,l,r,n,a),c&&(s.id=c);var d=t.dialogTitle;if(!d&&c&&o.configuration.states){var p=o.configuration.states[c];p&&(d=p.name)}d||(d=o.title),d=this.utils.customTranslation(d,d);var u=s.params,f=u&&u.entityName?u.entityName:"",h=u&&u.entityLabel?u.entityLabel:"";d=Object(m.m)(d,"entityName",f),d=Object(m.m)(d,"entityLabel",h);for(var g=0,y=Object.keys(u);g<y.length;g++){var b=y[g];u[b]&&u[b].entityName&&(d=Object(m.m)(d,b+":entityName",u[b].entityName)),u[b]&&u[b].entityLabel&&(d=Object(m.m)(d,b+":entityLabel",u[b].entityLabel))}this.dialog.open(this.embedDashboardDialogComponent,{disableClose:!0,panelClass:["tb-dialog","tb-fullscreen-dialog"],data:{dashboard:o,state:Object(m.C)([s]),title:d,hideToolbar:t.dialogHideDashboardToolbar,width:t.dialogWidth,height:t.dialogHeight}})},n.prototype.elementClick=function(t){var e=this,n=t.target||t.srcElement;if(n.id){var i=this.getActionDescriptors("elementClick");i.length&&i.forEach((function(i){if(i.name===n.id){t.stopPropagation();var a=e.getActiveEntityInfo(),r=a?a.entityId:null,o=a?a.entityName:null,s=a&&a.entityLabel?a.entityLabel:null;e.handleWidgetAction(t,i,r,o,null,s)}}))}},n.prototype.updateEntityParams=function(t,e,n,i,a){if(n){var r=void 0;e&&e.length?(r=t[e])||(r={},t[e]=r,t.targetEntityParamName=e):r=t,r.entityId=n,i&&(r.entityName=i),a&&(r.entityLabel=a)}},n.prototype.loadCustomActionResources=function(t,e,n){var i=this;Object(m.n)(e)&&e.length>0&&(this.cssParser.cssPreviewNamespace=t,this.cssParser.createStyleElement(t,e,"nonamespace"));var a=[];return Object(m.n)(n)&&n.length>0?(n.forEach((function(t){a.push(i.resources.loadResource(t.url).pipe(Object(y.a)((function(e){return Object(d.a)("Failed to load custom action resource: '"+t.url+"'")}))))})),Object(p.a)(a).pipe(Object(b.a)((function(t){var e;return t&&t.length&&(e=t.filter((function(t){return t&&t.length>0}))),e&&e.length?Object(u.a)(e):Object(d.a)(null)})))):Object(d.a)(null)},n.prototype.processResourcesLoadErrors=function(t){var e="";t.forEach((function(t){e+="<div>"+t+"</div>"})),this.store.dispatch(new v.b({message:e,type:"error"}))},n.prototype.getActiveEntityInfo=function(){var t=this.widgetContext.activeEntityInfo;if(!t)for(var e=0,n=Object.keys(this.widgetContext.subscriptions);e<n.length;e++){var i=n[e];if(t=this.widgetContext.subscriptions[i].getFirstEntityInfo())break}return t},n.prototype.checkSize=function(){var t=this.widgetContext.$containerParent.width(),e=this.widgetContext.$containerParent.height(),n=!1;return this.widgetContext.width&&this.widgetContext.width===t&&this.widgetContext.height&&this.widgetContext.height===e||t>0&&e>0&&(this.widgetContext.$container&&(this.widgetContext.$container.css("height",e+"px"),this.widgetContext.$container.css("width",t+"px")),this.widgetContext.width=t,this.widgetContext.height=e,n=!0,this.widgetSizeDetected=!0),n},n.\u0275fac=function(t){return new(t||n)(a["\u0275\u0275directiveInject"](k.Store),a["\u0275\u0275directiveInject"](j.ActivatedRoute),a["\u0275\u0275directiveInject"](j.Router),a["\u0275\u0275directiveInject"](S.a),a["\u0275\u0275directiveInject"](a.ComponentFactoryResolver),a["\u0275\u0275directiveInject"](a.ElementRef),a["\u0275\u0275directiveInject"](a.Injector),a["\u0275\u0275directiveInject"](A.MatDialog),a["\u0275\u0275directiveInject"](D.a),a["\u0275\u0275directiveInject"](s.a),a["\u0275\u0275directiveInject"](g.a),a["\u0275\u0275directiveInject"](x.a),a["\u0275\u0275directiveInject"](C.a),a["\u0275\u0275directiveInject"](O.a),a["\u0275\u0275directiveInject"](E.a),a["\u0275\u0275directiveInject"](F.a),a["\u0275\u0275directiveInject"](P.a),a["\u0275\u0275directiveInject"](_.TranslateService),a["\u0275\u0275directiveInject"](l.a),a["\u0275\u0275directiveInject"](w.a),a["\u0275\u0275directiveInject"](a.NgZone),a["\u0275\u0275directiveInject"](a.ChangeDetectorRef))},n.\u0275cmp=a["\u0275\u0275defineComponent"]({type:n,selectors:[["tb-widget"]],viewQuery:function(t,e){var n;(1&t&&a["\u0275\u0275staticViewQuery"](U,!0,a.ViewContainerRef),2&t)&&(a["\u0275\u0275queryRefresh"](n=a["\u0275\u0275loadQuery"]())&&(e.widgetContentContainer=n.first))},inputs:{isEdit:"isEdit",isMobile:"isMobile",dashboardWidget:"dashboardWidget"},features:[a["\u0275\u0275InheritDefinitionFeature"],a["\u0275\u0275NgOnChangesFeature"]],decls:10,vars:7,consts:[["tb-toast","",1,"tb-absolute-fill",3,"fxLayout","toastTarget"],[3,"ngStyle","legendConfig","legendData","legendKeyHiddenChange",4,"ngIf"],["fxFlex","","id","widget-container"],["widgetContent",""],["class","tb-absolute-fill tb-widget-error",4,"ngIf"],["class","tb-absolute-fill tb-widget-no-data",4,"ngIf"],["fxLayout","column","fxLayoutAlign","center center",1,"tb-absolute-fill","tb-widget-loading",3,"fxShow"],["color","accent","md-mode","indeterminate","diameter","40"],[3,"ngStyle","legendConfig","legendData","legendKeyHiddenChange"],[1,"tb-absolute-fill","tb-widget-error"],[1,"tb-absolute-fill","tb-widget-no-data"],["fxLayoutAlign","center center","translate","",1,"tb-absolute-fill",2,"display","flex"]],template:function(t,e){1&t&&(a["\u0275\u0275elementStart"](0,"div",0),a["\u0275\u0275template"](1,q,1,3,"tb-legend",1),a["\u0275\u0275elementStart"](2,"div",2),a["\u0275\u0275elementContainer"](3,null,3),a["\u0275\u0275elementEnd"](),a["\u0275\u0275template"](5,W,1,3,"tb-legend",1),a["\u0275\u0275elementEnd"](),a["\u0275\u0275template"](6,z,3,1,"div",4),a["\u0275\u0275template"](7,K,3,0,"div",5),a["\u0275\u0275elementStart"](8,"div",6),a["\u0275\u0275element"](9,"mat-spinner",7),a["\u0275\u0275elementEnd"]()),2&t&&(a["\u0275\u0275propertyInterpolate"]("toastTarget",e.toastTargetId),a["\u0275\u0275property"]("fxLayout",e.legendContainerLayoutType),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",e.displayLegend&&e.isLegendFirst),a["\u0275\u0275advance"](4),a["\u0275\u0275property"]("ngIf",e.displayLegend&&!e.isLegendFirst),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",e.widgetErrorData),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",e.displayNoData),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("fxShow",e.loadingData))},directives:[L.b,V.f,R.NgIf,V.b,V.e,N.d,G.MatSpinner,B.a,R.NgStyle,N.e,_.TranslateDirective],styles:[".tb-widget .tb-widget-error{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;background:hsla(0,0%,100%,.5)}.tb-widget .tb-widget-error span{color:red}.tb-widget .tb-widget-no-data{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;background:hsla(0,0%,100%,.75)}.tb-widget .tb-widget-no-data span{color:#000;text-align:center}.tb-widget .tb-widget-loading{z-index:3;background:hsla(0,0%,100%,.15)}.tb-widget .tb-widget-error-container{position:absolute;width:100%;height:100%;background-color:#fff}.tb-widget .tb-widget-error-msg{padding:5px;font-size:16px;color:red;word-wrap:break-word}.tb-widget #widget-container{min-height:0;min-width:0}"],encapsulation:2,changeDetection:0}),n}(o.a);!function(){a["\u0275setClassMetadata"](H,[{type:a.Component,args:[{selector:"tb-widget",templateUrl:"./widget.component.html",styleUrls:["./widget.component.scss"],encapsulation:a.ViewEncapsulation.None,changeDetection:a.ChangeDetectionStrategy.OnPush}]}],(function(){return[{type:k.Store},{type:j.ActivatedRoute},{type:j.Router},{type:S.a},{type:a.ComponentFactoryResolver},{type:a.ElementRef},{type:a.Injector},{type:A.MatDialog},{type:void 0,decorators:[{type:a.Inject,args:[D.a]}]},{type:s.a},{type:g.a},{type:x.a},{type:C.a},{type:O.a},{type:E.a},{type:F.a},{type:P.a},{type:_.TranslateService},{type:l.a},{type:w.a},{type:a.NgZone},{type:a.ChangeDetectorRef}]}),{isEdit:[{type:a.Input}],isMobile:[{type:a.Input}],dashboardWidget:[{type:a.Input}],widgetContentContainer:[{type:a.ViewChild,args:["widgetContent",{read:a.ViewContainerRef,static:!0}]}]})}()}).call(this,n("xexB"))},nkFp:function(t,e,n){"use strict";(function(t){n.d(e,"a",(function(){return St}));var i=n("mrSG"),a=n("fXoL"),r=n("RxGS"),o=(n("0G7Z"),n("OiFK")),s=n("//Q6"),l=n("Neop"),c=n("mbhL"),d=n("4r/P"),p=n("0EQZ"),u=n("xgIS"),m=n("VRyK"),f=n("cp0P"),h=n("2Vo4"),g=n("Duvn"),y=n("U3y+"),b=n("Kj3r"),v=n("/uUt"),x=n("vkgz"),C=n("lJxs"),S=n("IzEk"),w=n("M9IT"),E=n("Dh3D"),I=n("fr2l"),O=n("rDax"),T=n("+rOU"),M=n("A6E3"),F=n("UZbx"),P=n("10j8"),D=n("oKkZ"),k=n("S+vS"),j=n("7ZKe"),A=n("xw5a"),_=n("3Tyt"),L=n("1iWl"),V=n("6OOC"),R=n("l7P3"),N=n("sYmb"),G=n("jhN1"),B=n("ofXK"),U=n("0IaG"),q=n("XiUz"),W=n("/t3+"),z=n("znSr"),K=n("bTqV"),H=n("Qu3c"),$=n("NFeN"),Q=n("kmnG"),X=n("qFsG"),Y=n("3Pt+"),J=n("+0xr"),Z=n("bSwM"),tt=n("STbY"),et=n("f0Cb"),nt=["searchInput"];function it(t,e){if(1&t){var n=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementStart"](0,"button",11),a["\u0275\u0275listener"]("click",(function(t){return a["\u0275\u0275restoreView"](n),a["\u0275\u0275nextContext"]().ackAlarms(t)})),a["\u0275\u0275pipe"](1,"async"),a["\u0275\u0275pipe"](2,"translate"),a["\u0275\u0275elementStart"](3,"mat-icon"),a["\u0275\u0275text"](4,"done"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()}if(2&t){var i=a["\u0275\u0275nextContext"]();a["\u0275\u0275propertyInterpolate"]("matTooltip",a["\u0275\u0275pipeBind1"](2,4,"alarm.acknowledge")),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](1,2,i.isLoading$))}}function at(t,e){if(1&t){var n=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementStart"](0,"mat-header-cell",27),a["\u0275\u0275elementStart"](1,"mat-checkbox",28),a["\u0275\u0275listener"]("change",(function(t){a["\u0275\u0275restoreView"](n);var e=a["\u0275\u0275nextContext"]();return t?e.alarmsDatasource.masterToggle():null})),a["\u0275\u0275pipe"](2,"async"),a["\u0275\u0275pipe"](3,"async"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()}if(2&t){var i=a["\u0275\u0275nextContext"]();a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("checked",i.alarmsDatasource.selection.hasValue()&&a["\u0275\u0275pipeBind1"](2,2,i.alarmsDatasource.isAllSelected()))("indeterminate",i.alarmsDatasource.selection.hasValue()&&!a["\u0275\u0275pipeBind1"](3,4,i.alarmsDatasource.isAllSelected()))}}function rt(t,e){if(1&t){var n=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementStart"](0,"mat-cell"),a["\u0275\u0275elementStart"](1,"mat-checkbox",29),a["\u0275\u0275listener"]("click",(function(t){return a["\u0275\u0275restoreView"](n),t.stopPropagation()}))("change",(function(t){a["\u0275\u0275restoreView"](n);var i=e.$implicit,r=a["\u0275\u0275nextContext"]();return t?r.alarmsDatasource.toggleSelection(i):null})),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()}if(2&t){var i=e.$implicit,r=a["\u0275\u0275nextContext"]();a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("checked",r.alarmsDatasource.isSelected(i))}}function ot(t,e){if(1&t&&(a["\u0275\u0275elementStart"](0,"mat-header-cell",33),a["\u0275\u0275text"](1),a["\u0275\u0275elementEnd"]()),2&t){var n=a["\u0275\u0275nextContext"]().$implicit,i=a["\u0275\u0275nextContext"]();a["\u0275\u0275property"]("ngStyle",i.headerStyle(n))("disabled",i.isSorting(n)),a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"](" ",n.title," ")}}function st(t,e){if(1&t&&a["\u0275\u0275element"](0,"mat-cell",34),2&t){var n=e.$implicit,i=a["\u0275\u0275nextContext"]().$implicit,r=a["\u0275\u0275nextContext"]();a["\u0275\u0275property"]("innerHTML",r.cellContent(n,i),a["\u0275\u0275sanitizeHtml"])("ngStyle",r.cellStyle(n,i))}}function lt(t,e){if(1&t&&(a["\u0275\u0275elementContainerStart"](0,30),a["\u0275\u0275template"](1,ot,2,3,"mat-header-cell",31),a["\u0275\u0275template"](2,st,1,2,"mat-cell",32),a["\u0275\u0275elementContainerEnd"]()),2&t){var n=e.$implicit;a["\u0275\u0275property"]("matColumnDef",n.def)}}var ct=function(t,e,n){return{minWidth:t,maxWidth:e,width:n}};function dt(t,e){if(1&t&&a["\u0275\u0275element"](0,"mat-header-cell",35),2&t){var n=a["\u0275\u0275nextContext"]();a["\u0275\u0275property"]("ngStyle.gt-md",a["\u0275\u0275pureFunction3"](1,ct,40*n.actionCellDescriptors.length+"px",40*n.actionCellDescriptors.length+"px",40*n.actionCellDescriptors.length+"px"))}}function pt(t,e){if(1&t){var n=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementStart"](0,"button",11),a["\u0275\u0275listener"]("click",(function(t){a["\u0275\u0275restoreView"](n);var i=e.$implicit,r=a["\u0275\u0275nextContext"]().$implicit;return a["\u0275\u0275nextContext"]().onActionButtonClick(t,r,i)})),a["\u0275\u0275pipe"](1,"async"),a["\u0275\u0275elementStart"](2,"mat-icon"),a["\u0275\u0275text"](3),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()}if(2&t){var i=e.$implicit,r=a["\u0275\u0275nextContext"]().$implicit,o=a["\u0275\u0275nextContext"]();a["\u0275\u0275propertyInterpolate"]("matTooltip",i.displayName),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](1,3,o.isLoading$)||!o.actionEnabled(r,i)),a["\u0275\u0275advance"](3),a["\u0275\u0275textInterpolate"](i.icon)}}function ut(t,e){if(1&t){var n=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementStart"](0,"button",45),a["\u0275\u0275listener"]("click",(function(t){a["\u0275\u0275restoreView"](n);var i=e.$implicit,r=a["\u0275\u0275nextContext"](2).$implicit;return a["\u0275\u0275nextContext"]().onActionButtonClick(t,r,i)})),a["\u0275\u0275pipe"](1,"async"),a["\u0275\u0275elementStart"](2,"mat-icon"),a["\u0275\u0275text"](3),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](4,"span"),a["\u0275\u0275text"](5),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()}if(2&t){var i=e.$implicit,r=a["\u0275\u0275nextContext"](2).$implicit,o=a["\u0275\u0275nextContext"]();a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](1,3,o.isLoading$)||!o.actionEnabled(r,i)),a["\u0275\u0275advance"](3),a["\u0275\u0275textInterpolate"](i.icon),a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate"](i.displayName)}}function mt(t,e){if(1&t){var n=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementStart"](0,"div",39),a["\u0275\u0275elementStart"](1,"button",40),a["\u0275\u0275listener"]("click",(function(t){a["\u0275\u0275restoreView"](n);var e=a["\u0275\u0275nextContext"](2);return t.stopPropagation(),e.ctx.detectChanges()})),a["\u0275\u0275elementStart"](2,"mat-icon",41),a["\u0275\u0275text"](3,"more_vert"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](4,"mat-menu",42,43),a["\u0275\u0275template"](6,ut,6,5,"button",44),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()}if(2&t){var i=a["\u0275\u0275reference"](5),r=a["\u0275\u0275nextContext"](2);a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("matMenuTriggerFor",i),a["\u0275\u0275advance"](5),a["\u0275\u0275property"]("ngForOf",r.actionCellDescriptors)("ngForTrackBy",r.trackByActionCellDescriptionId)}}function ft(t,e){if(1&t&&(a["\u0275\u0275elementStart"](0,"mat-cell",35),a["\u0275\u0275elementStart"](1,"div",36),a["\u0275\u0275template"](2,pt,4,5,"button",37),a["\u0275\u0275elementEnd"](),a["\u0275\u0275template"](3,mt,7,3,"div",38),a["\u0275\u0275elementEnd"]()),2&t){var n=a["\u0275\u0275nextContext"]();a["\u0275\u0275property"]("ngStyle.gt-md",a["\u0275\u0275pureFunction3"](4,ct,40*n.actionCellDescriptors.length+"px",40*n.actionCellDescriptors.length+"px",40*n.actionCellDescriptors.length+"px")),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("ngForOf",n.actionCellDescriptors)("ngForTrackBy",n.trackByActionCellDescriptionId),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",n.actionCellDescriptors.length)}}var ht=function(t){return{"mat-row-select":t}};function gt(t,e){if(1&t&&a["\u0275\u0275element"](0,"mat-header-row",46),2&t){var n=a["\u0275\u0275nextContext"]();a["\u0275\u0275property"]("ngClass",a["\u0275\u0275pureFunction1"](1,ht,n.enableSelection))}}var yt=function(t,e,n,i){return{"mat-row-select":t,"mat-selected":e,"tb-current-entity":n,invisible:i}};function bt(t,e){if(1&t){var n=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementStart"](0,"mat-row",47),a["\u0275\u0275listener"]("click",(function(t){a["\u0275\u0275restoreView"](n);var i=e.$implicit;return a["\u0275\u0275nextContext"]().onRowClick(t,i)})),a["\u0275\u0275elementEnd"]()}if(2&t){var i=e.$implicit,r=a["\u0275\u0275nextContext"]();a["\u0275\u0275property"]("ngClass",a["\u0275\u0275pureFunction4"](2,yt,r.enableSelection,r.alarmsDatasource.isSelected(i),r.alarmsDatasource.isCurrentAlarm(i),r.alarmsDatasource.dataLoading))("ngStyle",r.rowStyle(i))}}function vt(t,e){1&t&&a["\u0275\u0275element"](0,"mat-divider")}function xt(t,e){if(1&t&&(a["\u0275\u0275element"](0,"mat-paginator",48),a["\u0275\u0275pipe"](1,"async")),2&t){var n=a["\u0275\u0275nextContext"]();a["\u0275\u0275property"]("length",a["\u0275\u0275pipeBind1"](1,4,n.alarmsDatasource.total()))("pageIndex",n.pageLink.page)("pageSize",n.pageLink.pageSize)("pageSizeOptions",n.pageSizeOptions)}}var Ct=function(t){return{count:t}},St=function(e){function n(t,n,i,a,r,o,s,l,c,d,p,u){var m=e.call(this,t)||this;return m.store=t,m.elementRef=n,m.ngZone=i,m.overlay=a,m.viewContainerRef=r,m.utils=o,m.translate=s,m.domSanitizer=l,m.datePipe=c,m.dialog=d,m.dialogService=p,m.alarmService=u,m.enableSelection=!0,m.displayPagination=!0,m.enableStickyHeader=!0,m.enableStickyAction=!1,m.textSearchMode=!1,m.columns=[],m.displayedColumns=[],m.actionCellDescriptors=[],m.displayDetails=!0,m.allowAcknowledgment=!0,m.allowClear=!0,m.defaultPageSize=10,m.defaultSortOrder="-"+F.e.createdTime.value,m.contentsInfo={},m.stylesInfo={},m.columnWidth={},m.columnDefaultVisibility={},m.columnSelectionAvailability={},m.searchAction={name:"action.search",show:!0,icon:"search",onAction:function(){m.enterFilterMode()}},m.columnDisplayAction={name:"entity.columns-to-display",show:!0,icon:"view_column",onAction:function(t){m.editColumnsToDisplay(t)}},m.alarmFilterAction={name:"alarm.alarm-filter",show:!0,onAction:function(t){m.editAlarmFilter(t)},icon:"filter_list"},m.pageLink={page:0,pageSize:m.defaultPageSize,textSearch:null},m}return Object(i.d)(n,e),n.prototype.ngOnInit=function(){this.ctx.$scope.alarmsTableWidget=this,this.settings=this.ctx.settings,this.widgetConfig=this.ctx.widgetConfig,this.subscription=this.ctx.defaultSubscription,this.initializeConfig(),this.updateAlarmSource(),this.ctx.updateWidgetParams()},n.prototype.ngAfterViewInit=function(){var t=this;Object(u.a)(this.searchInputField.nativeElement,"keyup").pipe(Object(b.a)(150),Object(v.a)(),Object(x.a)((function(){t.displayPagination&&(t.paginator.pageIndex=0),t.updateData()}))).subscribe(),this.displayPagination&&this.sort.sortChange.subscribe((function(){return t.paginator.pageIndex=0})),(this.displayPagination?Object(m.a)(this.sort.sortChange,this.paginator.page):this.sort.sortChange).pipe(Object(x.a)((function(){return t.updateData()}))).subscribe(),this.updateData()},n.prototype.onDataUpdated=function(){this.updateTitle(!0),this.alarmsDatasource.updateAlarms()},n.prototype.pageLinkSortDirection=function(){return Object(A.s)(this.pageLink)},n.prototype.initializeConfig=function(){var e;this.ctx.widgetActions=[this.searchAction,this.alarmFilterAction,this.columnDisplayAction],this.displayDetails=!Object(s.n)(this.settings.displayDetails)||this.settings.displayDetails,this.allowAcknowledgment=!Object(s.n)(this.settings.allowAcknowledgment)||this.settings.allowAcknowledgment,this.allowClear=!Object(s.n)(this.settings.allowClear)||this.settings.allowClear,this.displayDetails&&this.actionCellDescriptors.push({displayName:this.translate.instant("alarm.details"),icon:"more_horiz",details:!0}),this.allowAcknowledgment&&this.actionCellDescriptors.push({displayName:this.translate.instant("alarm.acknowledge"),icon:"done",acknowledge:!0}),this.allowClear&&this.actionCellDescriptors.push({displayName:this.translate.instant("alarm.clear"),icon:"clear",clear:!0}),this.actionCellDescriptors=this.actionCellDescriptors.concat(this.ctx.actionsApi.getActionDescriptors("actionCellButton")),this.settings.alarmsTitle&&this.settings.alarmsTitle.length?this.alarmsTitlePattern=this.utils.customTranslation(this.settings.alarmsTitle,this.settings.alarmsTitle):this.alarmsTitlePattern=this.translate.instant("alarm.alarms"),this.updateTitle(!1),this.enableSelection=!Object(s.n)(this.settings.enableSelection)||this.settings.enableSelection,this.allowAcknowledgment||this.allowClear||(this.enableSelection=!1),this.searchAction.show=!Object(s.n)(this.settings.enableSearch)||this.settings.enableSearch,this.displayPagination=!Object(s.n)(this.settings.displayPagination)||this.settings.displayPagination,this.enableStickyHeader=!Object(s.n)(this.settings.enableStickyHeader)||this.settings.enableStickyHeader,this.enableStickyAction=!!Object(s.n)(this.settings.enableStickyAction)&&this.settings.enableStickyAction,this.columnDisplayAction.show=!Object(s.n)(this.settings.enableSelectColumnDisplay)||this.settings.enableSelectColumnDisplay,e=Object(s.n)(this.settings.enableFilter)?this.settings.enableFilter:!Object(s.n)(this.settings.enableStatusFilter)||this.settings.enableStatusFilter,this.alarmFilterAction.show=e,this.rowStylesInfo=Object(I.m)(this.settings,"alarm, ctx");var n=this.settings.defaultPageSize;Object(s.n)(n)&&Object(s.v)(n)&&n>0&&(this.defaultPageSize=n),this.pageSizeOptions=[this.defaultPageSize,2*this.defaultPageSize,3*this.defaultPageSize],this.pageLink.pageSize=this.displayPagination?this.defaultPageSize:1024,this.pageLink.searchPropagatedAlarms=!Object(s.n)(this.widgetConfig.searchPropagatedAlarms)||this.widgetConfig.searchPropagatedAlarms;var i=[];Object(s.n)(this.widgetConfig.alarmStatusList)&&this.widgetConfig.alarmStatusList.length?i=this.widgetConfig.alarmStatusList:Object(s.n)(this.widgetConfig.alarmSearchStatus)&&this.widgetConfig.alarmSearchStatus!==F.b.ANY&&(i=[this.widgetConfig.alarmSearchStatus]),this.pageLink.statusList=i,this.pageLink.severityList=Object(s.n)(this.widgetConfig.alarmSeverityList)?this.widgetConfig.alarmSeverityList:[],this.pageLink.typeList=Object(s.n)(this.widgetConfig.alarmTypeList)?this.widgetConfig.alarmTypeList:[];var a=Object(I.a)(this.widgetConfig),r=new l.a;r.testMode=!1;var o="alarms-table-"+Object(s.l)(a);r.cssPreviewNamespace=o,r.createStyleElement(o,a),t(this.elementRef.nativeElement).addClass(o)},n.prototype.updateTitle=function(t){void 0===t&&(t=!1);var e=Object(s.d)(this.subscription.alarmSource,this.alarmsTitlePattern);this.ctx.widgetTitle!==e&&(this.ctx.widgetTitle=e,t&&this.ctx.updateWidgetParams())},n.prototype.updateAlarmSource=function(){var t,e=this;this.enableSelection&&this.displayedColumns.push("select");var n,i=[];this.subscription.alarmSource&&(this.subscription.alarmSource.dataKeys.forEach((function(t){var n=Object(s.e)(t);n.entityKey=Object(A.o)(t),n.label=e.utils.customTranslation(n.label,n.label),n.title=n.label,n.def="def"+e.columns.length;var a=n.settings;if(n.type===_.h.alarm&&!Object(s.n)(a.columnWidth)){var r=F.e[n.name];r&&r.time&&(a.columnWidth="120px")}e.stylesInfo[n.def]=Object(I.h)(a,"value, alarm, ctx"),e.contentsInfo[n.def]=Object(I.g)(a,"value, alarm, ctx"),e.contentsInfo[n.def].units=n.units,e.contentsInfo[n.def].decimals=n.decimals,e.columnWidth[n.def]=Object(I.k)(a),e.columnDefaultVisibility[n.def]=Object(I.i)(a),e.columnSelectionAvailability[n.def]=Object(I.j)(a),e.columns.push(n),n.type!==_.h.alarm&&i.push(n)})),(t=this.displayedColumns).push.apply(t,this.columns.filter((function(t){return e.columnDefaultVisibility[t.def]})).map((function(t){return t.def})))),this.settings.defaultSortOrder&&this.settings.defaultSortOrder.length&&(this.defaultSortOrder=this.utils.customTranslation(this.settings.defaultSortOrder,this.settings.defaultSortOrder)),this.pageLink.sortOrder=Object(I.b)(this.defaultSortOrder,this.columns),this.pageLink.sortOrder&&(n=Object(I.c)(this.pageLink.sortOrder.key,this.columns)),this.sortOrderProperty=n?n.def:null,this.actionCellDescriptors.length&&this.displayedColumns.push("actions"),this.alarmsDatasource=new wt(this.subscription,i),this.enableSelection&&this.alarmsDatasource.selectionModeChanged$.subscribe((function(t){var n=t||e.textSearchMode;e.ctx.hideTitlePanel!==n?(e.ctx.hideTitlePanel=n,e.ctx.detectChanges(!0)):e.ctx.detectChanges()}))},n.prototype.editColumnsToDisplay=function(t){var e=this;t&&t.stopPropagation();var n=t.target||t.srcElement||t.currentTarget,i=new O.OverlayConfig;i.backdropClass="cdk-overlay-transparent-backdrop",i.hasBackdrop=!0;i.positionStrategy=this.overlay.position().flexibleConnectedTo(n).withPositions([{originX:"end",originY:"bottom",overlayX:"end",overlayY:"top"}]);var r=this.overlay.create(i);r.backdropClick().subscribe((function(){r.dispose()}));var o=this.columns.map((function(t){return{title:t.title,def:t.def,display:e.displayedColumns.indexOf(t.def)>-1,selectable:e.columnSelectionAvailability[t.def]}})),s=[{provide:M.a,useValue:{columns:o,columnsUpdated:function(t){e.displayedColumns=t.filter((function(t){return t.display})).map((function(t){return t.def})),e.enableSelection&&e.displayedColumns.unshift("select"),e.actionCellDescriptors.length&&e.displayedColumns.push("actions")}}},{provide:O.OverlayRef,useValue:r}],l=a.Injector.create({parent:this.viewContainerRef.injector,providers:s});r.attach(new T.ComponentPortal(M.b,this.viewContainerRef,l)),this.ctx.detectChanges()},n.prototype.editAlarmFilter=function(t){var e=this;t&&t.stopPropagation();var n=t.target||t.srcElement||t.currentTarget,i=new O.OverlayConfig;i.backdropClass="cdk-overlay-transparent-backdrop",i.hasBackdrop=!0;i.positionStrategy=this.overlay.position().flexibleConnectedTo(n).withPositions([{originX:"end",originY:"bottom",overlayX:"end",overlayY:"top"}]);var r=this.overlay.create(i);r.backdropClick().subscribe((function(){r.dispose()}));var o=[{provide:L.a,useValue:{statusList:this.pageLink.statusList,severityList:this.pageLink.severityList,typeList:this.pageLink.typeList}},{provide:O.OverlayRef,useValue:r}],s=a.Injector.create({parent:this.viewContainerRef.injector,providers:o}),l=r.attach(new T.ComponentPortal(L.b,this.viewContainerRef,s));l.onDestroy((function(){if(l.instance.result){var t=l.instance.result;e.pageLink.statusList=t.statusList,e.pageLink.severityList=t.severityList,e.pageLink.typeList=t.typeList,e.updateData()}})),this.ctx.detectChanges()},n.prototype.enterFilterMode=function(){var t=this;this.textSearchMode=!0,this.pageLink.textSearch="",this.ctx.hideTitlePanel=!0,this.ctx.detectChanges(!0),setTimeout((function(){t.searchInputField.nativeElement.focus(),t.searchInputField.nativeElement.setSelectionRange(0,0)}),10)},n.prototype.exitFilterMode=function(){this.textSearchMode=!1,this.pageLink.textSearch=null,this.displayPagination&&(this.paginator.pageIndex=0),this.updateData(),this.ctx.hideTitlePanel=!1,this.ctx.detectChanges(!0)},n.prototype.updateData=function(){this.displayPagination?(this.pageLink.page=this.paginator.pageIndex,this.pageLink.pageSize=this.paginator.pageSize):this.pageLink.page=0;var t=Object(I.d)(this.sort.active,this.columns);this.pageLink.sortOrder=t?{key:t,direction:d.a[this.sort.direction.toUpperCase()]}:null;var e=Object(I.e)(this.sort.active,this.columns);this.alarmsDatasource.loadAlarms(this.pageLink,e,null),this.ctx.detectChanges()},n.prototype.trackByColumnDef=function(t,e){return e.def},n.prototype.trackByAlarmId=function(t,e){return e.id.id},n.prototype.trackByActionCellDescriptionId=function(t,e){return e.id},n.prototype.headerStyle=function(t){var e=this.columnWidth[t.def];return Object(I.n)(e)},n.prototype.rowStyle=function(t){var e={};if(t)if(this.rowStylesInfo.useRowStyleFunction&&this.rowStylesInfo.rowStyleFunction)try{if(e=this.rowStylesInfo.rowStyleFunction(t,this.ctx),!Object(s.x)(e))throw new TypeError((null===e?"null":typeof e)+" instead of style object");if(Array.isArray(e))throw new TypeError("Array instead of style object")}catch(n){e={},console.warn("Row style function in widget '"+this.ctx.widgetTitle+"' returns '"+n+"'. Please check your row style function.")}else e={};return e},n.prototype.cellStyle=function(t,e){var n={};if(t&&e){var a=this.stylesInfo[e.def],r=Object(I.f)(t,e);if(a.useCellStyleFunction&&a.cellStyleFunction)try{if(n=a.cellStyleFunction(r,t,this.ctx),!Object(s.x)(n))throw new TypeError((null===n?"null":typeof n)+" instead of style object");if(Array.isArray(n))throw new TypeError("Array instead of style object")}catch(l){n={},console.warn("Cell style function for data key '"+e.label+"' in widget '"+this.ctx.widgetTitle+"' returns '"+l+"'. Please check your cell style function.")}else n=this.defaultStyle(e,r)}if(!n.width){var o=this.columnWidth[e.def];n=Object(i.a)(Object(i.a)({},n),Object(I.n)(o))}return n},n.prototype.cellContent=function(t,e){if(!t||!e)return"";var n=this.contentsInfo[e.def],i=Object(I.f)(t,e),a="";if(n.useCellContentFunction&&n.cellContentFunction)try{a=n.cellContentFunction(i,t,this.ctx)}catch(r){a=""+i}else a=this.defaultContent(e,n,i);if(!Object(s.n)(a))return"";switch(typeof(a=this.utils.customTranslation(a,a))){case"string":return this.domSanitizer.bypassSecurityTrustHtml(a);default:return a}},n.prototype.onRowClick=function(t,e){t&&t.stopPropagation(),this.alarmsDatasource.toggleCurrentAlarm(e);var n=this.ctx.actionsApi.getActionDescriptors("rowClick");if(n.length){var i=void 0,a=void 0;e&&e.originator&&(i=e.originator,a=e.originatorName),this.ctx.actionsApi.handleWidgetAction(t,n[0],i,a,{alarm:e})}},n.prototype.onActionButtonClick=function(t,e,n){if(n.details)this.openAlarmDetails(t,e);else if(n.acknowledge)this.ackAlarm(t,e);else if(n.clear)this.clearAlarm(t,e);else{t&&t.stopPropagation();var i=void 0,a=void 0;e&&e.originator&&(i=e.originator,a=e.originatorName),this.ctx.actionsApi.handleWidgetAction(t,n,i,a,{alarm:e})}},n.prototype.actionEnabled=function(t,e){return e.acknowledge?t.status===F.d.ACTIVE_UNACK||t.status===F.d.CLEARED_UNACK:!e.clear||(t.status===F.d.ACTIVE_ACK||t.status===F.d.ACTIVE_UNACK)},n.prototype.openAlarmDetails=function(t,e){var n=this;t&&t.stopPropagation(),e&&e.id&&e.id.id!==D.a&&this.dialog.open(P.a,{disableClose:!0,panelClass:["tb-dialog","tb-fullscreen-dialog"],data:{alarmId:e.id.id,allowAcknowledgment:this.allowAcknowledgment,allowClear:this.allowClear,displayDetails:!0}}).afterClosed().subscribe((function(t){t&&n.subscription.update()}))},n.prototype.ackAlarm=function(t,e){var n=this;t&&t.stopPropagation(),e&&e.id&&e.id.id!==D.a&&this.dialogService.confirm(this.translate.instant("alarm.aknowledge-alarm-title"),this.translate.instant("alarm.aknowledge-alarm-text"),this.translate.instant("action.no"),this.translate.instant("action.yes")).subscribe((function(t){t&&t&&n.alarmService.ackAlarm(e.id.id).subscribe((function(){n.subscription.update()}))}))},n.prototype.ackAlarms=function(t){var e=this;if(t&&t.stopPropagation(),this.alarmsDatasource.selection.hasValue()){var n=this.alarmsDatasource.selection.selected.filter((function(t){return t!==D.a}));if(n.length){var i=this.translate.instant("alarm.aknowledge-alarms-title",{count:n.length}),a=this.translate.instant("alarm.aknowledge-alarms-text",{count:n.length});this.dialogService.confirm(i,a,this.translate.instant("action.no"),this.translate.instant("action.yes")).subscribe((function(t){if(t&&t){for(var i=[],a=0,r=n;a<r.length;a++){var o=r[a];i.push(e.alarmService.ackAlarm(o))}Object(f.a)(i).subscribe((function(){e.alarmsDatasource.clearSelection(),e.subscription.update()}))}}))}}},n.prototype.clearAlarm=function(t,e){var n=this;t&&t.stopPropagation(),e&&e.id&&e.id.id!==D.a&&this.dialogService.confirm(this.translate.instant("alarm.clear-alarm-title"),this.translate.instant("alarm.clear-alarm-text"),this.translate.instant("action.no"),this.translate.instant("action.yes")).subscribe((function(t){t&&t&&n.alarmService.clearAlarm(e.id.id).subscribe((function(){n.subscription.update()}))}))},n.prototype.clearAlarms=function(t){var e=this;if(t&&t.stopPropagation(),this.alarmsDatasource.selection.hasValue()){var n=this.alarmsDatasource.selection.selected.filter((function(t){return t!==D.a}));if(n.length){var i=this.translate.instant("alarm.clear-alarms-title",{count:n.length}),a=this.translate.instant("alarm.clear-alarms-text",{count:n.length});this.dialogService.confirm(i,a,this.translate.instant("action.no"),this.translate.instant("action.yes")).subscribe((function(t){if(t&&t){for(var i=[],a=0,r=n;a<r.length;a++){var o=r[a];i.push(e.alarmService.clearAlarm(o))}Object(f.a)(i).subscribe((function(){e.alarmsDatasource.clearSelection(),e.subscription.update()}))}}))}}},n.prototype.defaultContent=function(t,e,n){if(Object(s.n)(n)){var i=F.e[t.name];if(i)return i.time?n?this.datePipe.transform(n,"yyyy-MM-dd HH:mm:ss"):"":i.value===F.e.severity.value?this.translate.instant(F.h.get(n)):i.value===F.e.status.value?this.translate.instant(F.i.get(n)):i.value===F.e.originatorType.value?this.translate.instant(y.d.get(n).type):n;var a=V.a[t.name];if(a&&a.time)return this.datePipe.transform(n,"yyyy-MM-dd HH:mm:ss");var r=e.decimals||0===e.decimals?e.decimals:this.ctx.widgetConfig.decimals,o=e.units||this.ctx.widgetConfig.units;return this.ctx.utils.formatValue(n,r,o,!0)}return""},n.prototype.defaultStyle=function(t,e){if(Object(s.n)(e)){var n=F.e[t.name];return n&&n.value===F.e.severity.value?{fontWeight:"bold",color:F.g.get(e)}:{}}return{}},n.prototype.isSorting=function(t){return t.type===_.h.alarm&&t.name.startsWith("details.")},n.\u0275fac=function(t){return new(t||n)(a["\u0275\u0275directiveInject"](R.Store),a["\u0275\u0275directiveInject"](a.ElementRef),a["\u0275\u0275directiveInject"](a.NgZone),a["\u0275\u0275directiveInject"](O.Overlay),a["\u0275\u0275directiveInject"](a.ViewContainerRef),a["\u0275\u0275directiveInject"](o.a),a["\u0275\u0275directiveInject"](N.TranslateService),a["\u0275\u0275directiveInject"](G.DomSanitizer),a["\u0275\u0275directiveInject"](B.DatePipe),a["\u0275\u0275directiveInject"](U.MatDialog),a["\u0275\u0275directiveInject"](k.a),a["\u0275\u0275directiveInject"](j.a))},n.\u0275cmp=a["\u0275\u0275defineComponent"]({type:n,selectors:[["tb-alarms-table-widget"]],viewQuery:function(t,e){var n;(1&t&&(a["\u0275\u0275viewQuery"](nt,!0),a["\u0275\u0275viewQuery"](w.MatPaginator,!0),a["\u0275\u0275viewQuery"](E.MatSort,!0)),2&t)&&(a["\u0275\u0275queryRefresh"](n=a["\u0275\u0275loadQuery"]())&&(e.searchInputField=n.first),a["\u0275\u0275queryRefresh"](n=a["\u0275\u0275loadQuery"]())&&(e.paginator=n.first),a["\u0275\u0275queryRefresh"](n=a["\u0275\u0275loadQuery"]())&&(e.sort=n.first))},inputs:{ctx:"ctx"},features:[a["\u0275\u0275InheritDefinitionFeature"]],decls:49,vars:43,consts:[[1,"tb-table-widget","tb-absolute-fill"],["fxFlex","","fxLayout","column",1,"tb-absolute-fill"],[1,"mat-table-toolbar",3,"fxShow"],[1,"mat-toolbar-tools"],["mat-button","","mat-icon-button","","matTooltipPosition","above",3,"matTooltip"],["fxFlex",""],["matInput","",3,"ngModel","placeholder","ngModelChange"],["searchInput",""],["mat-button","","mat-icon-button","","matTooltipPosition","above",3,"matTooltip","click"],["color","primary",1,"mat-table-toolbar",3,"fxShow"],["mat-button","","mat-icon-button","","matTooltipPosition","above",3,"disabled","matTooltip","click",4,"ngIf"],["mat-button","","mat-icon-button","","matTooltipPosition","above",3,"disabled","matTooltip","click"],["fxFlex","",1,"table-container"],["mat-table","","matSort","","matSortDisableClear","",3,"dataSource","trackBy","matSortActive","matSortDirection"],["matColumnDef","select","sticky",""],["style","width: 30px;",4,"matHeaderCellDef"],[4,"matCellDef"],[3,"matColumnDef",4,"ngFor","ngForOf","ngForTrackBy"],["matColumnDef","actions",3,"stickyEnd"],[3,"ngStyle.gt-md",4,"matHeaderCellDef"],[3,"ngStyle.gt-md",4,"matCellDef"],[3,"ngClass",4,"matHeaderRowDef","matHeaderRowDefSticky"],[3,"ngClass","ngStyle","click",4,"matRowDef","matRowDefColumns"],["fxLayoutAlign","center center","translate","",1,"no-data-found",3,"fxShow"],["fxLayoutAlign","center center",1,"no-data-found",3,"fxShow"],[4,"ngIf"],["showFirstLastButtons","",3,"length","pageIndex","pageSize","pageSizeOptions",4,"ngIf"],[2,"width","30px"],[3,"checked","indeterminate","change"],[3,"checked","click","change"],[3,"matColumnDef"],["mat-sort-header","",3,"ngStyle","disabled",4,"matHeaderCellDef"],[3,"innerHTML","ngStyle",4,"matCellDef"],["mat-sort-header","",3,"ngStyle","disabled"],[3,"innerHTML","ngStyle"],[3,"ngStyle.gt-md"],["fxHide","","fxShow.gt-md","","fxFlex","","fxLayout","row","fxLayoutAlign","end"],["mat-button","","mat-icon-button","","matTooltipPosition","above",3,"disabled","matTooltip","click",4,"ngFor","ngForOf","ngForTrackBy"],["fxHide","","fxShow.lt-lg","",4,"ngIf"],["fxHide","","fxShow.lt-lg",""],["mat-button","","mat-icon-button","",3,"matMenuTriggerFor","click"],[1,"material-icons"],["xPosition","before"],["cellActionsMenu","matMenu"],["mat-menu-item","",3,"disabled","click",4,"ngFor","ngForOf","ngForTrackBy"],["mat-menu-item","",3,"disabled","click"],[3,"ngClass"],[3,"ngClass","ngStyle","click"],["showFirstLastButtons","",3,"length","pageIndex","pageSize","pageSizeOptions"]],template:function(t,e){1&t&&(a["\u0275\u0275elementStart"](0,"div",0),a["\u0275\u0275elementStart"](1,"div",1),a["\u0275\u0275elementStart"](2,"mat-toolbar",2),a["\u0275\u0275elementStart"](3,"div",3),a["\u0275\u0275elementStart"](4,"button",4),a["\u0275\u0275pipe"](5,"translate"),a["\u0275\u0275elementStart"](6,"mat-icon"),a["\u0275\u0275text"](7,"search"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](8,"mat-form-field",5),a["\u0275\u0275elementStart"](9,"mat-label"),a["\u0275\u0275text"](10,"\xa0"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](11,"input",6,7),a["\u0275\u0275listener"]("ngModelChange",(function(t){return e.pageLink.textSearch=t})),a["\u0275\u0275pipe"](13,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](14,"button",8),a["\u0275\u0275listener"]("click",(function(){return e.exitFilterMode()})),a["\u0275\u0275pipe"](15,"translate"),a["\u0275\u0275elementStart"](16,"mat-icon"),a["\u0275\u0275text"](17,"close"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](18,"mat-toolbar",9),a["\u0275\u0275elementStart"](19,"div",3),a["\u0275\u0275elementStart"](20,"span"),a["\u0275\u0275text"](21),a["\u0275\u0275pipe"](22,"async"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](23,"span",5),a["\u0275\u0275template"](24,it,5,6,"button",10),a["\u0275\u0275elementStart"](25,"button",11),a["\u0275\u0275listener"]("click",(function(t){return e.clearAlarms(t)})),a["\u0275\u0275pipe"](26,"async"),a["\u0275\u0275pipe"](27,"translate"),a["\u0275\u0275elementStart"](28,"mat-icon"),a["\u0275\u0275text"](29,"clear"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](30,"div",12),a["\u0275\u0275elementStart"](31,"table",13),a["\u0275\u0275elementContainerStart"](32,14),a["\u0275\u0275template"](33,at,4,6,"mat-header-cell",15),a["\u0275\u0275template"](34,rt,2,1,"mat-cell",16),a["\u0275\u0275elementContainerEnd"](),a["\u0275\u0275template"](35,lt,3,1,"ng-container",17),a["\u0275\u0275elementContainerStart"](36,18),a["\u0275\u0275template"](37,dt,1,5,"mat-header-cell",19),a["\u0275\u0275template"](38,ft,4,8,"mat-cell",20),a["\u0275\u0275elementContainerEnd"](),a["\u0275\u0275template"](39,gt,1,3,"mat-header-row",21),a["\u0275\u0275template"](40,bt,1,7,"mat-row",22),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](41,"span",23),a["\u0275\u0275pipe"](42,"async"),a["\u0275\u0275text"](43,"alarm.no-alarms-prompt"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](44,"span",24),a["\u0275\u0275text"](45),a["\u0275\u0275pipe"](46,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275template"](47,vt,1,0,"mat-divider",25),a["\u0275\u0275template"](48,xt,2,6,"mat-paginator",26),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()),2&t&&(a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("fxShow",e.textSearchMode&&e.alarmsDatasource.selection.isEmpty()),a["\u0275\u0275advance"](2),a["\u0275\u0275propertyInterpolate"]("matTooltip",a["\u0275\u0275pipeBind1"](5,25,"action.search")),a["\u0275\u0275advance"](7),a["\u0275\u0275propertyInterpolate"]("placeholder",a["\u0275\u0275pipeBind1"](13,27,"alarm.search")),a["\u0275\u0275property"]("ngModel",e.pageLink.textSearch),a["\u0275\u0275advance"](3),a["\u0275\u0275propertyInterpolate"]("matTooltip",a["\u0275\u0275pipeBind1"](15,29,"action.close")),a["\u0275\u0275advance"](4),a["\u0275\u0275property"]("fxShow",!e.alarmsDatasource.selection.isEmpty()),a["\u0275\u0275advance"](3),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](22,31,e.translate.get("alarm.selected-alarms",a["\u0275\u0275pureFunction1"](41,Ct,e.alarmsDatasource.selection.selected.length)))," "),a["\u0275\u0275advance"](3),a["\u0275\u0275property"]("ngIf",e.allowAcknowledgment),a["\u0275\u0275advance"](1),a["\u0275\u0275propertyInterpolate"]("matTooltip",a["\u0275\u0275pipeBind1"](27,35,"alarm.clear")),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](26,33,e.isLoading$)),a["\u0275\u0275advance"](6),a["\u0275\u0275property"]("dataSource",e.alarmsDatasource)("trackBy",e.trackByAlarmId)("matSortActive",e.sortOrderProperty)("matSortDirection",e.pageLinkSortDirection()),a["\u0275\u0275advance"](4),a["\u0275\u0275property"]("ngForOf",e.columns)("ngForTrackBy",e.trackByColumnDef),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("stickyEnd",e.enableStickyAction),a["\u0275\u0275advance"](3),a["\u0275\u0275property"]("matHeaderRowDef",e.displayedColumns)("matHeaderRowDefSticky",e.enableStickyHeader),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("matRowDefColumns",e.displayedColumns),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("fxShow",a["\u0275\u0275pipeBind1"](42,37,e.alarmsDatasource.isEmpty())&&!e.alarmsDatasource.dataLoading),a["\u0275\u0275advance"](3),a["\u0275\u0275property"]("fxShow",e.alarmsDatasource.dataLoading),a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate"](a["\u0275\u0275pipeBind1"](46,39,"common.loading")),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("ngIf",e.displayPagination),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",e.displayPagination))},directives:[q.b,q.f,W.MatToolbar,z.d,K.MatButton,H.MatTooltip,$.MatIcon,Q.MatFormField,Q.MatLabel,X.MatInput,Y.DefaultValueAccessor,Y.NgControlStatus,Y.NgModel,B.NgIf,J.MatTable,E.MatSort,J.MatColumnDef,J.MatHeaderCellDef,J.MatCellDef,B.NgForOf,J.MatHeaderRowDef,J.MatRowDef,q.e,N.TranslateDirective,J.MatHeaderCell,Z.MatCheckbox,J.MatCell,E.MatSortHeader,B.NgStyle,z.e,tt.MatMenuTrigger,tt._MatMenu,tt.MatMenuItem,J.MatHeaderRow,B.NgClass,z.b,J.MatRow,et.MatDivider,w.MatPaginator],pipes:[N.TranslatePipe,B.AsyncPipe],styles:["[_nghost-%COMP%]{width:100%;height:100%}[_nghost-%COMP%]   .tb-table-widget[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]{position:relative}[_nghost-%COMP%]   .tb-table-widget[_ngcontent-%COMP%]   .mat-table[_ngcontent-%COMP%]   .mat-row.invisible[_ngcontent-%COMP%]{visibility:hidden}[_nghost-%COMP%]   .tb-table-widget[_ngcontent-%COMP%]   span.no-data-found[_ngcontent-%COMP%]{position:absolute;top:60px;bottom:0;left:0;right:0}","[_nghost-%COMP%]   .tb-table-widget[_ngcontent-%COMP%]   .mat-paginator[_ngcontent-%COMP%], [_nghost-%COMP%]   .tb-table-widget[_ngcontent-%COMP%]   .mat-table[_ngcontent-%COMP%], [_nghost-%COMP%]   .tb-table-widget[_ngcontent-%COMP%]   mat-toolbar.mat-table-toolbar[_ngcontent-%COMP%]:not([color=primary]){background:transparent}[_nghost-%COMP%]   .tb-table-widget[_ngcontent-%COMP%]   mat-toolbar[_ngcontent-%COMP%], [_nghost-%COMP%]   .tb-table-widget[_ngcontent-%COMP%]   mat-toolbar[_ngcontent-%COMP%]   .mat-toolbar-tools[_ngcontent-%COMP%]{height:39px;max-height:39px}[_nghost-%COMP%]   .tb-table-widget[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]{overflow:auto}[_nghost-%COMP%]   .tb-table-widget[_ngcontent-%COMP%]   .mat-header-row.mat-row-select[_ngcontent-%COMP%]   mat-cell[_ngcontent-%COMP%]:nth-child(2), [_nghost-%COMP%]   .tb-table-widget[_ngcontent-%COMP%]   .mat-header-row.mat-row-select[_ngcontent-%COMP%]   mat-cell[_ngcontent-%COMP%]:nth-child(n+3):nth-last-child(n+2), [_nghost-%COMP%]   .tb-table-widget[_ngcontent-%COMP%]   .mat-header-row.mat-row-select[_ngcontent-%COMP%]   mat-footer-cell[_ngcontent-%COMP%]:nth-child(2), [_nghost-%COMP%]   .tb-table-widget[_ngcontent-%COMP%]   .mat-header-row.mat-row-select[_ngcontent-%COMP%]   mat-footer-cell[_ngcontent-%COMP%]:nth-child(n+3):nth-last-child(n+2), [_nghost-%COMP%]   .tb-table-widget[_ngcontent-%COMP%]   .mat-header-row.mat-row-select[_ngcontent-%COMP%]   mat-header-cell[_ngcontent-%COMP%]:nth-child(2), [_nghost-%COMP%]   .tb-table-widget[_ngcontent-%COMP%]   .mat-header-row.mat-row-select[_ngcontent-%COMP%]   mat-header-cell[_ngcontent-%COMP%]:nth-child(n+3):nth-last-child(n+2), [_nghost-%COMP%]   .tb-table-widget[_ngcontent-%COMP%]   .mat-header-row[_ngcontent-%COMP%]:not(.mat-row-select)   mat-cell[_ngcontent-%COMP%]:nth-child(n+2):nth-last-child(n+2), [_nghost-%COMP%]   .tb-table-widget[_ngcontent-%COMP%]   .mat-header-row[_ngcontent-%COMP%]:not(.mat-row-select)   mat-footer-cell[_ngcontent-%COMP%]:nth-child(n+2):nth-last-child(n+2), [_nghost-%COMP%]   .tb-table-widget[_ngcontent-%COMP%]   .mat-header-row[_ngcontent-%COMP%]:not(.mat-row-select)   mat-header-cell[_ngcontent-%COMP%]:nth-child(n+2):nth-last-child(n+2), [_nghost-%COMP%]   .tb-table-widget[_ngcontent-%COMP%]   .mat-row.mat-row-select[_ngcontent-%COMP%]   mat-cell[_ngcontent-%COMP%]:nth-child(2), [_nghost-%COMP%]   .tb-table-widget[_ngcontent-%COMP%]   .mat-row.mat-row-select[_ngcontent-%COMP%]   mat-cell[_ngcontent-%COMP%]:nth-child(n+3):nth-last-child(n+2), [_nghost-%COMP%]   .tb-table-widget[_ngcontent-%COMP%]   .mat-row.mat-row-select[_ngcontent-%COMP%]   mat-footer-cell[_ngcontent-%COMP%]:nth-child(2), [_nghost-%COMP%]   .tb-table-widget[_ngcontent-%COMP%]   .mat-row.mat-row-select[_ngcontent-%COMP%]   mat-footer-cell[_ngcontent-%COMP%]:nth-child(n+3):nth-last-child(n+2), [_nghost-%COMP%]   .tb-table-widget[_ngcontent-%COMP%]   .mat-row.mat-row-select[_ngcontent-%COMP%]   mat-header-cell[_ngcontent-%COMP%]:nth-child(2), [_nghost-%COMP%]   .tb-table-widget[_ngcontent-%COMP%]   .mat-row.mat-row-select[_ngcontent-%COMP%]   mat-header-cell[_ngcontent-%COMP%]:nth-child(n+3):nth-last-child(n+2), [_nghost-%COMP%]   .tb-table-widget[_ngcontent-%COMP%]   .mat-row[_ngcontent-%COMP%]:not(.mat-row-select)   mat-cell[_ngcontent-%COMP%]:nth-child(n+2):nth-last-child(n+2), [_nghost-%COMP%]   .tb-table-widget[_ngcontent-%COMP%]   .mat-row[_ngcontent-%COMP%]:not(.mat-row-select)   mat-footer-cell[_ngcontent-%COMP%]:nth-child(n+2):nth-last-child(n+2), [_nghost-%COMP%]   .tb-table-widget[_ngcontent-%COMP%]   .mat-row[_ngcontent-%COMP%]:not(.mat-row-select)   mat-header-cell[_ngcontent-%COMP%]:nth-child(n+2):nth-last-child(n+2){padding:0 5px}.tb-has-timewindow[_nghost-%COMP%]   .tb-table-widget[_ngcontent-%COMP%]   mat-toolbar[_ngcontent-%COMP%], .tb-has-timewindow   [_nghost-%COMP%]   .tb-table-widget[_ngcontent-%COMP%]   mat-toolbar[_ngcontent-%COMP%], .tb-has-timewindow[_nghost-%COMP%]   .tb-table-widget[_ngcontent-%COMP%]   mat-toolbar[_ngcontent-%COMP%]   .mat-toolbar-tools[_ngcontent-%COMP%], .tb-has-timewindow   [_nghost-%COMP%]   .tb-table-widget[_ngcontent-%COMP%]   mat-toolbar[_ngcontent-%COMP%]   .mat-toolbar-tools[_ngcontent-%COMP%]{height:65px;max-height:65px}"]}),n}(r.a);!function(){a["\u0275setClassMetadata"](St,[{type:a.Component,args:[{selector:"tb-alarms-table-widget",templateUrl:"./alarms-table-widget.component.html",styleUrls:["./alarms-table-widget.component.scss","./table-widget.scss"]}]}],(function(){return[{type:R.Store},{type:a.ElementRef},{type:a.NgZone},{type:O.Overlay},{type:a.ViewContainerRef},{type:o.a},{type:N.TranslateService},{type:G.DomSanitizer},{type:B.DatePipe},{type:U.MatDialog},{type:k.a},{type:j.a}]}),{ctx:[{type:a.Input}],searchInputField:[{type:a.ViewChild,args:["searchInput"]}],paginator:[{type:a.ViewChild,args:[w.MatPaginator]}],sort:[{type:a.ViewChild,args:[E.MatSort]}]})}();var wt=function(){function t(t,e){this.subscription=t,this.dataKeys=e,this.alarmsSubject=new h.a([]),this.pageDataSubject=new h.a(Object(g.a)()),this.selection=new p.SelectionModel(!0,[],!1),this.selectionModeChanged=new a.EventEmitter,this.selectionModeChanged$=this.selectionModeChanged.asObservable(),this.currentAlarm=null,this.dataLoading=!0}return t.prototype.connect=function(t){return this.alarmsSubject.asObservable()},t.prototype.disconnect=function(t){this.alarmsSubject.complete(),this.pageDataSubject.complete()},t.prototype.loadAlarms=function(t,e,n){this.dataLoading=!0,this.appliedPageLink=t,this.appliedSortOrderLabel=e,this.subscription.subscribeForAlarms(t,n)},t.prototype.clear=function(){this.selection.hasValue()&&(this.selection.clear(),this.onSelectionModeChanged(!1)),this.alarmsSubject.next([]),this.pageDataSubject.next(Object(g.a)())},t.prototype.updateAlarms=function(){var t,e=this,n=this.subscription.alarms,i=new Array;if(n.data.forEach((function(t){i.push(e.alarmDataToInfo(t))})),this.appliedSortOrderLabel&&this.appliedSortOrderLabel.length){var a=this.appliedPageLink.sortOrder.direction===d.a.ASC;i=i.sort((function(t,n){return Object(c.e)(t,n,e.appliedSortOrderLabel,a)}))}if(this.selection.hasValue()){var r=i.map((function(t){return t.id.id})),o=this.selection.selected.filter((function(t){return-1===r.indexOf(t)}));(t=this.selection).deselect.apply(t,o),this.selection.isEmpty()&&this.onSelectionModeChanged(!1)}var s={data:i,totalPages:n.totalPages,totalElements:n.totalElements,hasNext:n.hasNext};this.alarmsSubject.next(i),this.pageDataSubject.next(s),this.dataLoading=!1},t.prototype.alarmDataToInfo=function(t){var e=Object(s.e)(t);delete e.latest;var n=t.latest;return this.dataKeys.forEach((function(t,i){var a=Object(A.p)(t.type),r="";if(a&&n&&n[a]){var o=n[a][t.name];o&&(r=o.value)}e[t.label]=r})),e},t.prototype.isAllSelected=function(){var t=this.selection.selected.length;return this.alarmsSubject.pipe(Object(C.a)((function(e){return t===e.length})))},t.prototype.isEmpty=function(){return this.alarmsSubject.pipe(Object(C.a)((function(t){return!t.length})))},t.prototype.total=function(){return this.pageDataSubject.pipe(Object(C.a)((function(t){return t.totalElements})))},t.prototype.toggleSelection=function(t){var e=this.selection.hasValue();this.selection.toggle(t.id.id),e!==this.selection.hasValue()&&this.onSelectionModeChanged(this.selection.hasValue())},t.prototype.isSelected=function(t){return this.selection.isSelected(t.id.id)},t.prototype.clearSelection=function(){this.selection.hasValue()&&(this.selection.clear(),this.onSelectionModeChanged(!1))},t.prototype.masterToggle=function(){var t=this;this.alarmsSubject.pipe(Object(x.a)((function(e){var n=t.selection.selected.length;n===e.length?(t.selection.clear(),n>0&&t.onSelectionModeChanged(!1)):(e.forEach((function(e){t.selection.select(e.id.id)})),0===n&&t.onSelectionModeChanged(!0))})),Object(S.a)(1)).subscribe()},t.prototype.toggleCurrentAlarm=function(t){return this.currentAlarm!==t&&(this.currentAlarm=t,!0)},t.prototype.isCurrentAlarm=function(t){return this.currentAlarm&&t&&this.currentAlarm.id&&t.id&&this.currentAlarm.id.id===t.id.id},t.prototype.onSelectionModeChanged=function(t){this.selectionModeChanged.emit(t)},t}()}).call(this,n("xexB"))},o3UX:function(t,e,n){"use strict";n.d(e,"a",(function(){return h}));var i=n("mrSG"),a=n("fXoL"),r=n("JTB5"),o=n("UZbx"),s=n("l7P3"),l=n("kmnG"),c=n("sYmb"),d=n("d3UM"),p=n("3Pt+"),u=n("ofXK"),m=n("FKr1");function f(t,e){if(1&t&&(a["\u0275\u0275elementStart"](0,"mat-option",4),a["\u0275\u0275text"](1),a["\u0275\u0275pipe"](2,"translate"),a["\u0275\u0275elementEnd"]()),2&t){var n=e.$implicit,i=a["\u0275\u0275nextContext"]();a["\u0275\u0275property"]("value",n),a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](2,2,i.alarmSearchStatusTranslationsMap.get(i.alarmSearchStatusEnum[n]))," ")}}var h=function(t){function e(e){var n=t.call(this,e)||this;return n.store=e,n.alarmSearchStatusTranslationsMap=o.f,n.alarmSearchStatusTypes=Object.keys(o.b),n.alarmSearchStatusEnum=o.b,n}return Object(i.d)(e,t),Object.defineProperty(e.prototype,"alarmTableConfig",{get:function(){return this.entitiesTableConfig},enumerable:!1,configurable:!0}),e.prototype.searchStatusChanged=function(t){this.alarmTableConfig.searchStatus=t,this.alarmTableConfig.table.resetSortAndFilter(!0,!0)},e.\u0275fac=function(t){return new(t||e)(a["\u0275\u0275directiveInject"](s.Store))},e.\u0275cmp=a["\u0275\u0275defineComponent"]({type:e,selectors:[["tb-alarm-table-header"]],features:[a["\u0275\u0275InheritDefinitionFeature"]],decls:5,vars:2,consts:[[1,"mat-block"],["translate",""],[3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(t,e){1&t&&(a["\u0275\u0275elementStart"](0,"mat-form-field",0),a["\u0275\u0275elementStart"](1,"mat-label",1),a["\u0275\u0275text"](2,"alarm.alarm-status"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](3,"mat-select",2),a["\u0275\u0275listener"]("ngModelChange",(function(t){return e.searchStatusChanged(t)})),a["\u0275\u0275template"](4,f,3,4,"mat-option",3),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()),2&t&&(a["\u0275\u0275advance"](3),a["\u0275\u0275property"]("ngModel",e.alarmTableConfig.searchStatus),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngForOf",e.alarmSearchStatusTypes))},directives:[l.MatFormField,l.MatLabel,c.TranslateDirective,d.MatSelect,p.NgControlStatus,p.NgModel,u.NgForOf,m.MatOption],pipes:[c.TranslatePipe],styles:["[_nghost-%COMP%]{padding-right:8px;min-width:160px}[_nghost-%COMP%]     mat-form-field{font-size:16px;width:200px}[_nghost-%COMP%]     mat-form-field .mat-form-field-wrapper{padding-bottom:0}[_nghost-%COMP%]     mat-form-field .mat-form-field-underline{bottom:0}@media screen and (max-width:599px){[_nghost-%COMP%]     mat-form-field{width:100%}[_nghost-%COMP%]     mat-form-field .mat-form-field-infix{width:auto!important}}"]}),e}(r.a);!function(){a["\u0275setClassMetadata"](h,[{type:a.Component,args:[{selector:"tb-alarm-table-header",templateUrl:"./alarm-table-header.component.html",styleUrls:["./alarm-table-header.component.scss"]}]}],(function(){return[{type:s.Store}]}),null)}()},"oPR/":function(t,e,n){"use strict";n.d(e,"a",(function(){return B}));var i=n("mrSG"),a=n("fXoL"),r=n("FKr1"),o=n("0IaG"),s=n("3Pt+"),l=n("gmuX"),c=n("OiFK"),d=n("//Q6"),p=n("4j5O"),u=n("Qrxw"),m=n("l7P3"),f=n("tyNb"),h=n("sYmb"),g=n("/t3+"),y=n("XiUz"),b=n("bTqV"),v=n("NFeN"),x=n("ofXK"),C=n("bv9b"),S=n("kmnG"),w=n("d3UM"),E=n("bSwM"),I=n("nii4"),O=n("qFsG"),T=n("0HhY");function M(t,e){1&t&&a["\u0275\u0275element"](0,"mat-progress-bar",13)}function F(t,e){if(1&t&&(a["\u0275\u0275elementStart"](0,"mat-option",27),a["\u0275\u0275text"](1),a["\u0275\u0275elementEnd"]()),2&t){var n=e.$implicit;a["\u0275\u0275property"]("value",n),a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"](" ",n," ")}}function P(t,e){if(1&t&&(a["\u0275\u0275elementStart"](0,"div",14),a["\u0275\u0275elementStart"](1,"mat-form-field",15),a["\u0275\u0275elementStart"](2,"mat-label",2),a["\u0275\u0275text"](3,"dashboard.state-controller"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](4,"mat-select",16),a["\u0275\u0275template"](5,F,2,2,"mat-option",17),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](6,"div",18),a["\u0275\u0275elementStart"](7,"mat-checkbox",19),a["\u0275\u0275text"](8),a["\u0275\u0275pipe"](9,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](10,"mat-checkbox",20),a["\u0275\u0275text"](11),a["\u0275\u0275pipe"](12,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](13,"tb-color-input",21),a["\u0275\u0275pipe"](14,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](15,"div",18),a["\u0275\u0275elementStart"](16,"mat-checkbox",22),a["\u0275\u0275text"](17),a["\u0275\u0275pipe"](18,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](19,"mat-checkbox",23),a["\u0275\u0275text"](20),a["\u0275\u0275pipe"](21,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](22,"mat-checkbox",24),a["\u0275\u0275text"](23),a["\u0275\u0275pipe"](24,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](25,"mat-checkbox",25),a["\u0275\u0275text"](26),a["\u0275\u0275pipe"](27,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](28,"mat-checkbox",26),a["\u0275\u0275text"](29),a["\u0275\u0275pipe"](30,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()),2&t){var n=a["\u0275\u0275nextContext"]();a["\u0275\u0275property"]("formGroup",n.settingsFormGroup),a["\u0275\u0275advance"](5),a["\u0275\u0275property"]("ngForOf",n.stateControllerIds),a["\u0275\u0275advance"](3),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](9,10,"dashboard.toolbar-always-open")," "),a["\u0275\u0275advance"](3),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](12,12,"dashboard.display-title")," "),a["\u0275\u0275advance"](2),a["\u0275\u0275propertyInterpolate"]("label",a["\u0275\u0275pipeBind1"](14,14,"dashboard.title-color")),a["\u0275\u0275advance"](4),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](18,16,"dashboard.display-dashboards-selection")," "),a["\u0275\u0275advance"](3),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](21,18,"dashboard.display-entities-selection")," "),a["\u0275\u0275advance"](3),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](24,20,"dashboard.display-filters")," "),a["\u0275\u0275advance"](3),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](27,22,"dashboard.display-dashboard-timewindow")," "),a["\u0275\u0275advance"](3),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](30,24,"dashboard.display-dashboard-export")," ")}}function D(t,e){1&t&&(a["\u0275\u0275elementStart"](0,"mat-error"),a["\u0275\u0275text"](1),a["\u0275\u0275pipe"](2,"translate"),a["\u0275\u0275elementEnd"]()),2&t&&(a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](2,1,"dashboard.columns-count-required")," "))}function k(t,e){1&t&&(a["\u0275\u0275elementStart"](0,"mat-error"),a["\u0275\u0275text"](1),a["\u0275\u0275pipe"](2,"translate"),a["\u0275\u0275elementEnd"]()),2&t&&(a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](2,1,"dashboard.min-columns-count-message")," "))}function j(t,e){1&t&&(a["\u0275\u0275elementStart"](0,"mat-error"),a["\u0275\u0275text"](1),a["\u0275\u0275pipe"](2,"translate"),a["\u0275\u0275elementEnd"]()),2&t&&(a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](2,1,"dashboard.max-columns-count-message")," "))}function A(t,e){1&t&&(a["\u0275\u0275elementStart"](0,"mat-error"),a["\u0275\u0275text"](1),a["\u0275\u0275pipe"](2,"translate"),a["\u0275\u0275elementEnd"]()),2&t&&(a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](2,1,"dashboard.margin-required")," "))}function _(t,e){1&t&&(a["\u0275\u0275elementStart"](0,"mat-error"),a["\u0275\u0275text"](1),a["\u0275\u0275pipe"](2,"translate"),a["\u0275\u0275elementEnd"]()),2&t&&(a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](2,1,"dashboard.min-margin-message")," "))}function L(t,e){1&t&&(a["\u0275\u0275elementStart"](0,"mat-error"),a["\u0275\u0275text"](1),a["\u0275\u0275pipe"](2,"translate"),a["\u0275\u0275elementEnd"]()),2&t&&(a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](2,1,"dashboard.max-margin-message")," "))}function V(t,e){1&t&&(a["\u0275\u0275elementStart"](0,"mat-error"),a["\u0275\u0275text"](1),a["\u0275\u0275pipe"](2,"translate"),a["\u0275\u0275elementEnd"]()),2&t&&(a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](2,1,"dashboard.mobile-row-height-required")," "))}function R(t,e){1&t&&(a["\u0275\u0275elementStart"](0,"mat-error"),a["\u0275\u0275text"](1),a["\u0275\u0275pipe"](2,"translate"),a["\u0275\u0275elementEnd"]()),2&t&&(a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](2,1,"dashboard.min-mobile-row-height-message")," "))}function N(t,e){1&t&&(a["\u0275\u0275elementStart"](0,"mat-error"),a["\u0275\u0275text"](1),a["\u0275\u0275pipe"](2,"translate"),a["\u0275\u0275elementEnd"]()),2&t&&(a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](2,1,"dashboard.max-mobile-row-height-message")," "))}function G(t,e){if(1&t&&(a["\u0275\u0275elementStart"](0,"div",14),a["\u0275\u0275element"](1,"tb-color-input",28),a["\u0275\u0275pipe"](2,"translate"),a["\u0275\u0275elementStart"](3,"mat-form-field",15),a["\u0275\u0275elementStart"](4,"mat-label",2),a["\u0275\u0275text"](5,"dashboard.columns-count"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](6,"input",29),a["\u0275\u0275template"](7,D,3,3,"mat-error",30),a["\u0275\u0275template"](8,k,3,3,"mat-error",30),a["\u0275\u0275template"](9,j,3,3,"mat-error",30),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](10,"mat-form-field",31),a["\u0275\u0275elementStart"](11,"mat-label",2),a["\u0275\u0275text"](12,"dashboard.widgets-margins"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](13,"input",32),a["\u0275\u0275template"](14,A,3,3,"mat-error",30),a["\u0275\u0275template"](15,_,3,3,"mat-error",30),a["\u0275\u0275template"](16,L,3,3,"mat-error",30),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](17,"mat-checkbox",33),a["\u0275\u0275text"](18),a["\u0275\u0275pipe"](19,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](20,"tb-color-input",34),a["\u0275\u0275pipe"](21,"translate"),a["\u0275\u0275element"](22,"tb-image-input",35),a["\u0275\u0275pipe"](23,"translate"),a["\u0275\u0275elementStart"](24,"mat-form-field",15),a["\u0275\u0275elementStart"](25,"mat-label",2),a["\u0275\u0275text"](26,"dashboard.background-size-mode"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](27,"mat-select",36),a["\u0275\u0275elementStart"](28,"mat-option",37),a["\u0275\u0275text"](29,"Fit width"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](30,"mat-option",38),a["\u0275\u0275text"](31,"Fit height"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](32,"mat-option",39),a["\u0275\u0275text"](33,"Cover"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](34,"mat-option",40),a["\u0275\u0275text"](35,"Contain"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](36,"mat-option",41),a["\u0275\u0275text"](37,"Original size"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](38,"small",2),a["\u0275\u0275text"](39,"dashboard.mobile-layout"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](40,"div",42),a["\u0275\u0275elementStart"](41,"mat-checkbox",43),a["\u0275\u0275text"](42),a["\u0275\u0275pipe"](43,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](44,"mat-form-field",31),a["\u0275\u0275elementStart"](45,"mat-label",2),a["\u0275\u0275text"](46,"dashboard.mobile-row-height"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](47,"input",44),a["\u0275\u0275template"](48,V,3,3,"mat-error",30),a["\u0275\u0275template"](49,R,3,3,"mat-error",30),a["\u0275\u0275template"](50,N,3,3,"mat-error",30),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()),2&t){var n=a["\u0275\u0275nextContext"]();a["\u0275\u0275property"]("formGroup",n.gridSettingsFormGroup),a["\u0275\u0275advance"](1),a["\u0275\u0275propertyInterpolate"]("label",a["\u0275\u0275pipeBind1"](2,15,"layout.color")),a["\u0275\u0275advance"](6),a["\u0275\u0275property"]("ngIf",n.gridSettingsFormGroup.get("columns").hasError("required")),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",n.gridSettingsFormGroup.get("columns").hasError("min")),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",n.gridSettingsFormGroup.get("columns").hasError("max")),a["\u0275\u0275advance"](5),a["\u0275\u0275property"]("ngIf",n.gridSettingsFormGroup.get("margin").hasError("required")),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",n.gridSettingsFormGroup.get("margin").hasError("min")),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",n.gridSettingsFormGroup.get("margin").hasError("max")),a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](19,17,"dashboard.autofill-height")," "),a["\u0275\u0275advance"](2),a["\u0275\u0275propertyInterpolate"]("label",a["\u0275\u0275pipeBind1"](21,19,"dashboard.background-color")),a["\u0275\u0275advance"](2),a["\u0275\u0275propertyInterpolate"]("label",a["\u0275\u0275pipeBind1"](23,21,"dashboard.background-image")),a["\u0275\u0275advance"](20),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](43,23,"dashboard.autofill-height")," "),a["\u0275\u0275advance"](6),a["\u0275\u0275property"]("ngIf",n.gridSettingsFormGroup.get("mobileRowHeight").hasError("required")),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",n.gridSettingsFormGroup.get("mobileRowHeight").hasError("min")),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",n.gridSettingsFormGroup.get("mobileRowHeight").hasError("max"))}}var B=function(t){function e(e,n,i,a,r,o,l,c,p,u){var m=t.call(this,e,n,r)||this;return m.store=e,m.router=n,m.data=i,m.errorStateMatcher=a,m.dialogRef=r,m.fb=o,m.utils=l,m.dashboardUtils=c,m.translate=p,m.statesControllerService=u,m.submitted=!1,m.stateControllerIds=Object.keys(m.statesControllerService.getStateControllers()),m.settings=m.data.settings,m.gridSettings=m.data.gridSettings,m.settings?(m.settingsFormGroup=m.fb.group({stateControllerId:[Object(d.z)(m.settings.stateControllerId)?"entity":m.settings.stateControllerId,[]],toolbarAlwaysOpen:[!!Object(d.z)(m.settings.toolbarAlwaysOpen)||m.settings.toolbarAlwaysOpen,[]],showTitle:[!!Object(d.z)(m.settings.showTitle)||m.settings.showTitle,[]],titleColor:[Object(d.z)(m.settings.titleColor)?"rgba(0,0,0,0.870588)":m.settings.titleColor,[]],showDashboardsSelect:[!!Object(d.z)(m.settings.showDashboardsSelect)||m.settings.showDashboardsSelect,[]],showEntitiesSelect:[!!Object(d.z)(m.settings.showEntitiesSelect)||m.settings.showEntitiesSelect,[]],showFilters:[!!Object(d.z)(m.settings.showFilters)||m.settings.showFilters,[]],showDashboardTimewindow:[!!Object(d.z)(m.settings.showDashboardTimewindow)||m.settings.showDashboardTimewindow,[]],showDashboardExport:[!!Object(d.z)(m.settings.showDashboardExport)||m.settings.showDashboardExport,[]]}),m.settingsFormGroup.get("stateControllerId").valueChanges.subscribe((function(t){"default"!==t&&m.settingsFormGroup.get("toolbarAlwaysOpen").setValue(!0)}))):m.settingsFormGroup=m.fb.group({}),m.gridSettings?m.gridSettingsFormGroup=m.fb.group({color:[m.gridSettings.color||"rgba(0,0,0,0.870588)",[]],columns:[m.gridSettings.columns||24,[s.Validators.required,s.Validators.min(10),s.Validators.max(1e3)]],margin:[Object(d.n)(m.gridSettings.margin)?m.gridSettings.margin:10,[s.Validators.required,s.Validators.min(0),s.Validators.max(50)]],autoFillHeight:[!Object(d.z)(m.gridSettings.autoFillHeight)&&m.gridSettings.autoFillHeight,[]],backgroundColor:[m.gridSettings.backgroundColor||"rgba(0,0,0,0)",[]],backgroundImageUrl:[m.gridSettings.backgroundImageUrl,[]],backgroundSizeMode:[m.gridSettings.backgroundSizeMode||"100%",[]],mobileAutoFillHeight:[!Object(d.z)(m.gridSettings.mobileAutoFillHeight)&&m.gridSettings.mobileAutoFillHeight,[]],mobileRowHeight:[Object(d.z)(m.gridSettings.mobileRowHeight)?70:m.gridSettings.mobileRowHeight,[s.Validators.required,s.Validators.min(5),s.Validators.max(200)]]}):m.gridSettingsFormGroup=m.fb.group({}),m}return Object(i.d)(e,t),e.prototype.ngOnInit=function(){},e.prototype.isErrorState=function(t,e){var n=this.errorStateMatcher.isErrorState(t,e),i=!!(t&&t.invalid&&this.submitted);return n||i},e.prototype.cancel=function(){this.dialogRef.close(null)},e.prototype.save=function(){this.submitted=!0;var t=null,e=null;this.settings&&(t=Object(i.a)(Object(i.a)({},this.settings),this.settingsFormGroup.value)),this.gridSettings&&(e=Object(i.a)(Object(i.a)({},this.gridSettings),this.gridSettingsFormGroup.value)),this.dialogRef.close({settings:t,gridSettings:e})},e.\u0275fac=function(t){return new(t||e)(a["\u0275\u0275directiveInject"](m.Store),a["\u0275\u0275directiveInject"](f.Router),a["\u0275\u0275directiveInject"](o.MAT_DIALOG_DATA),a["\u0275\u0275directiveInject"](r.ErrorStateMatcher,4),a["\u0275\u0275directiveInject"](o.MatDialogRef),a["\u0275\u0275directiveInject"](s.FormBuilder),a["\u0275\u0275directiveInject"](c.a),a["\u0275\u0275directiveInject"](p.a),a["\u0275\u0275directiveInject"](h.TranslateService),a["\u0275\u0275directiveInject"](u.a))},e.\u0275cmp=a["\u0275\u0275defineComponent"]({type:e,selectors:[["tb-dashboard-settings-dialog"]],features:[a["\u0275\u0275ProvidersFeature"]([{provide:r.ErrorStateMatcher,useExisting:e}]),a["\u0275\u0275InheritDefinitionFeature"]],decls:24,vars:21,consts:[[3,"ngSubmit"],["color","primary"],["translate",""],["fxFlex",""],["mat-button","","mat-icon-button","","type","button",3,"click"],[1,"material-icons"],["color","warn","mode","indeterminate",4,"ngIf"],["mat-dialog-content",""],["fxLayout","column","fxLayoutGap","16px",3,"disabled"],[3,"formGroup",4,"ngIf"],["mat-dialog-actions","","fxLayoutAlign","end center"],["mat-button","","color","primary","type","button","cdkFocusInitial","",3,"disabled","click"],["mat-raised-button","","color","primary","type","submit",3,"disabled"],["color","warn","mode","indeterminate"],[3,"formGroup"],[1,"mat-block"],["required","","formControlName","stateControllerId"],[3,"value",4,"ngFor","ngForOf"],["fxLayout","row","fxLayoutAlign","start center","fxLayout.lt-md","column","fxLayoutAlign.lt-md","","fxLayoutGap","8px"],["fxFlex","","formControlName","toolbarAlwaysOpen"],["fxFlex","","formControlName","showTitle"],["fxFlex","","icon","format_color_fill","openOnInput","","formControlName","titleColor",3,"label"],["fxFlex","","formControlName","showDashboardsSelect"],["fxFlex","","formControlName","showEntitiesSelect"],["fxFlex","","formControlName","showFilters"],["fxFlex","","formControlName","showDashboardTimewindow"],["fxFlex","","formControlName","showDashboardExport"],[3,"value"],["fxFlex","","icon","format_color_fill","openOnInput","","formControlName","color",3,"label"],["matInput","","formControlName","columns","type","number","step","any","min","10","max","1000","required",""],[4,"ngIf"],["fxFlex","",1,"mat-block"],["matInput","","formControlName","margin","type","number","step","any","min","0","max","50","required",""],["fxFlex","","formControlName","autoFillHeight",2,"display","block","padding-bottom","12px"],["fxFlex","","icon","format_color_fill","openOnInput","","formControlName","backgroundColor",3,"label"],["fxFlex","","formControlName","backgroundImageUrl",3,"label"],["formControlName","backgroundSizeMode"],["value","100%"],["value","auto 100%"],["value","cover"],["value","contain"],["value","auto"],["fxLayout","row","fxLayoutAlign","start center","fxLayout.xs","column","fxLayoutAlign.xs","","fxLayoutGap","8px",2,"margin-top","8px"],["fxFlex","","formControlName","mobileAutoFillHeight"],["matInput","","formControlName","mobileRowHeight","type","number","step","any","min","5","max","200","required",""]],template:function(t,e){1&t&&(a["\u0275\u0275elementStart"](0,"form",0),a["\u0275\u0275listener"]("ngSubmit",(function(){return e.save()})),a["\u0275\u0275elementStart"](1,"mat-toolbar",1),a["\u0275\u0275elementStart"](2,"h2",2),a["\u0275\u0275text"](3),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](4,"span",3),a["\u0275\u0275elementStart"](5,"button",4),a["\u0275\u0275listener"]("click",(function(){return e.cancel()})),a["\u0275\u0275elementStart"](6,"mat-icon",5),a["\u0275\u0275text"](7,"close"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275template"](8,M,1,0,"mat-progress-bar",6),a["\u0275\u0275pipe"](9,"async"),a["\u0275\u0275elementStart"](10,"div",7),a["\u0275\u0275elementStart"](11,"fieldset",8),a["\u0275\u0275pipe"](12,"async"),a["\u0275\u0275template"](13,P,31,26,"div",9),a["\u0275\u0275template"](14,G,51,25,"div",9),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](15,"div",10),a["\u0275\u0275elementStart"](16,"button",11),a["\u0275\u0275listener"]("click",(function(){return e.cancel()})),a["\u0275\u0275pipe"](17,"async"),a["\u0275\u0275text"](18),a["\u0275\u0275pipe"](19,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](20,"button",12),a["\u0275\u0275pipe"](21,"async"),a["\u0275\u0275text"](22),a["\u0275\u0275pipe"](23,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()),2&t&&(a["\u0275\u0275advance"](3),a["\u0275\u0275textInterpolate"](e.settings?"dashboard.settings":"layout.settings"),a["\u0275\u0275advance"](5),a["\u0275\u0275property"]("ngIf",a["\u0275\u0275pipeBind1"](9,9,e.isLoading$)),a["\u0275\u0275advance"](3),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](12,11,e.isLoading$)),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("ngIf",e.settings),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",e.gridSettings),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](17,13,e.isLoading$)),a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](19,15,"action.cancel")," "),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](21,17,e.isLoading$)||e.settingsFormGroup.invalid||e.gridSettingsFormGroup.invalid||!e.settingsFormGroup.dirty&&!e.gridSettingsFormGroup.dirty),a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](23,19,"action.save")," "))},directives:[s["\u0275angular_packages_forms_forms_y"],s.NgControlStatusGroup,s.NgForm,g.MatToolbar,h.TranslateDirective,y.b,b.MatButton,v.MatIcon,x.NgIf,o.MatDialogContent,y.f,y.g,o.MatDialogActions,y.e,C.MatProgressBar,s.FormGroupDirective,S.MatFormField,S.MatLabel,w.MatSelect,s.RequiredValidator,s.NgControlStatus,s.FormControlName,x.NgForOf,E.MatCheckbox,I.a,r.MatOption,O.MatInput,s.DefaultValueAccessor,s.NumberValueAccessor,T.a,S.MatError],pipes:[x.AsyncPipe,h.TranslatePipe],styles:["[_nghost-%COMP%]     .mat-checkbox-label, [_nghost-%COMP%]   small[_ngcontent-%COMP%]{white-space:normal}"]}),e}(l.a);!function(){a["\u0275setClassMetadata"](B,[{type:a.Component,args:[{selector:"tb-dashboard-settings-dialog",templateUrl:"./dashboard-settings-dialog.component.html",providers:[{provide:r.ErrorStateMatcher,useExisting:B}],styleUrls:["./dashboard-settings-dialog.component.scss"]}]}],(function(){return[{type:m.Store},{type:f.Router},{type:void 0,decorators:[{type:a.Inject,args:[o.MAT_DIALOG_DATA]}]},{type:r.ErrorStateMatcher,decorators:[{type:a.SkipSelf}]},{type:o.MatDialogRef},{type:s.FormBuilder},{type:c.a},{type:p.a},{type:h.TranslateService},{type:u.a}]}),null)}()},oTDE:function(t,e,n){"use strict";n.r(e),n.d(e,"TripAnimationComponent",(function(){return D})),n.d(e,"TbTripAnimationWidget",(function(){return k}));var i=n("mrSG"),a=n("LvDl"),r=n.n(a),o=n("Zss7"),s=n.n(o),l=n("fXoL"),c=n("Hl1W"),d=n("bHFI"),p=n("3QxM"),u=(n("0G7Z"),n("t+jE")),m=n("wd/R"),f=n.n(m),h=n("//Q6"),g=n("HR/i"),y=n("jhN1"),b=n("ofXK"),v=n("XiUz"),x=n("znSr"),C=n("bTqV"),S=n("NFeN"),w=n("dUlv"),E=["map"];function I(t,e){if(1&t&&(l["\u0275\u0275elementStart"](0,"div",10),l["\u0275\u0275text"](1),l["\u0275\u0275elementEnd"]()),2&t){var n=l["\u0275\u0275nextContext"]();l["\u0275\u0275advance"](1),l["\u0275\u0275textInterpolate1"](" ",n.label," ")}}function O(t,e){if(1&t){var n=l["\u0275\u0275getCurrentView"]();l["\u0275\u0275elementStart"](0,"button",11),l["\u0275\u0275listener"]("click",(function(){l["\u0275\u0275restoreView"](n);var t=l["\u0275\u0275nextContext"]();return t.visibleTooltip=!t.visibleTooltip})),l["\u0275\u0275elementStart"](1,"mat-icon"),l["\u0275\u0275text"](2,"info_outline"),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"]()}}function T(t,e){if(1&t&&l["\u0275\u0275element"](0,"div",12),2&t){var n=e.$implicit;l["\u0275\u0275property"]("innerHTML",n,l["\u0275\u0275sanitizeHtml"])}}function M(t,e){if(1&t){var n=l["\u0275\u0275getCurrentView"]();l["\u0275\u0275elementStart"](0,"tb-history-selector",13),l["\u0275\u0275listener"]("timeUpdated",(function(t){return l["\u0275\u0275restoreView"](n),l["\u0275\u0275nextContext"]().timeUpdated(t)})),l["\u0275\u0275elementEnd"]()}if(2&t){var i=l["\u0275\u0275nextContext"]();l["\u0275\u0275property"]("settings",i.settings)("minTime",i.minTime)("maxTime",i.maxTime)("step",i.normalizationStep)("anchors",i.anchors)("useAnchors",i.useAnchors)}}var F=function(t){return{"trip-animation-tooltip-hidden":t}},P=function(t,e,n){return{"background-color":t,opacity:e,color:n}},D=function(){function t(t,e){var n=this;this.cd=t,this.sanitizer=e,this.interpolatedTimeData=[],this.mainTooltips=[],this.visibleTooltip=!1,this.anchors=[],this.calcTooltip=function(t){var e=t||n.activeTrip,i=n.settings.useTooltipFunction?Object(u.q)(n.settings.tooltipFunction,[e,n.historicalData,t.dsIndex]):n.settings.tooltipPattern;return u.o.parseTemplate(i,e,!0)}}return t.getSettingsSchema=function(){var t=Object(d.d)();return Object(d.c)(t,Object(u.i)(null,!0)),Object(d.b)(t,"Map Provider Settings"),Object(d.c)(t,p.j),Object(d.b)(t,"Trip Animation Settings"),Object(d.c)(t,p.f),Object(d.b)(t,"Path Settings"),Object(d.c)(t,Object(d.a)(p.g,"model.showPoints === true",["showPoints"])),Object(d.b)(t,"Path Points Settings"),Object(d.c)(t,Object(d.a)(p.b,"model.showPolygon === true",["showPolygon"])),Object(d.b)(t,"Polygon Settings"),t},t.prototype.ngOnInit=function(){var t=this;this.widgetConfig=this.ctx.widgetConfig;var e={normalizationStep:1e3,showLabel:!1,buttonColor:s()(this.widgetConfig.color).setAlpha(.54).toRgbString(),disabledButtonColor:s()(this.widgetConfig.color).setAlpha(.3).toRgbString(),rotationAngle:0};this.settings=Object(i.a)(Object(i.a)({},e),this.ctx.settings),this.useAnchors=this.settings.showPoints&&this.settings.usePointAsAnchor,this.settings.pointAsAnchorFunction=Object(u.n)(this.settings.pointAsAnchorFunction,["data","dsData","dsIndex"]),this.settings.tooltipFunction=Object(u.n)(this.settings.tooltipFunction,["data","dsData","dsIndex"]),this.settings.labelFunction=Object(u.n)(this.settings.labelFunction,["data","dsData","dsIndex"]),this.settings.colorPointFunction=Object(u.n)(this.settings.colorPointFunction,["data","dsData","dsIndex"]),this.normalizationStep=this.settings.normalizationStep,this.ctx.defaultSubscription.callbacks.onDataUpdated=function(){var e;t.historicalData=Object(u.l)(t.ctx.data).filter((function(t){return t.length})),t.historicalData.length&&(t.calculateIntervals(),t.timeUpdated(t.minTime)),null===(e=t.mapWidget.map.map)||void 0===e||e.invalidateSize(),t.cd.detectChanges()}},t.prototype.ngAfterViewInit=function(){var t=this;n.e(6).then(n.bind(null,"n4i3")).then((function(e){t.mapWidget=new e.MapWidgetController(c.b.openstreet,!1,t.ctx,t.mapContainer.nativeElement),t.mapResize$=new g.a((function(){t.mapWidget.resize()})),t.mapResize$.observe(t.mapContainer.nativeElement)}))},t.prototype.ngOnDestroy=function(){this.mapResize$&&this.mapResize$.disconnect()},t.prototype.timeUpdated=function(t){var e=this;this.currentTime=t;for(var n=this.interpolatedTimeData.map((function(e){return e[t]})),a=0;a<this.interpolatedTimeData.length;a++)if(Object(h.z)(n[a]))for(var o=Object.keys(this.interpolatedTimeData[a]).map((function(t){return parseInt(t,10)})),s=1;s<o.length;s++)if(o[s-1]<t&&o[s]>t){var l=this.interpolatedTimeData[a][o[s-1]],c=this.interpolatedTimeData[a][o[s]],d=Object(u.j)(o[s-1],o[s],t);n[a]=Object(i.a)(Object(i.a)(Object(i.a)({},l),{time:t}),Object(u.k)(l,c,this.settings.latKeyName,this.settings.lngKeyName,d));break}for(a=0;a<this.interpolatedTimeData.length;a++)Object(h.z)(n[a])&&(n[a]=this.calculateLastPoints(this.interpolatedTimeData[a],t));if(this.calcLabel(),this.calcMainTooltip(n),this.mapWidget&&this.mapWidget.map&&this.mapWidget.map.map){var p=this.interpolatedTimeData.map((function(t){return r.a.values(t)}));this.mapWidget.map.updatePolylines(p,!0),this.settings.showPolygon&&this.mapWidget.map.updatePolygons(this.interpolatedTimeData),this.settings.showPoints&&this.mapWidget.map.updatePoints(p.map((function(t){return r.a.union(t)})),this.calcTooltip),this.mapWidget.map.updateMarkers(n,!0,(function(t){e.activeTrip=t,e.timeUpdated(e.currentTime)}))}},t.prototype.setActiveTrip=function(){},t.prototype.calculateLastPoints=function(t,e){var n=Object.keys(t),i=n.findIndex((function(t){return Number(t)>=e}));return-1!==i?Number(n[i])!==e&&0!==i&&i--:i=n.length-1,t[n[i]]},t.prototype.calculateIntervals=function(){var t=this;if(this.historicalData.forEach((function(e,n){var i,a;t.minTime=(null===(i=e[0])||void 0===i?void 0:i.time)||1/0,t.maxTime=(null===(a=e[e.length-1])||void 0===a?void 0:a.time)||-1/0,t.interpolatedTimeData[n]=t.interpolateArray(e)})),this.activeTrip||(this.activeTrip=this.interpolatedTimeData.map((function(e){return e[t.minTime]})).filter((function(t){return t}))[0]),this.useAnchors){var e=Object.entries(r.a.union(this.interpolatedTimeData)[0]);this.anchors=e.filter((function(n){return Object(u.q)(t.settings.pointAsAnchorFunction,[n[1],e,n[1].dsIndex])})).map((function(t){return parseInt(t[0],10)}))}},t.prototype.calcMainTooltip=function(t){for(var e=[],n=0,i=t;n<i.length;n++){var a=i[n];e.push(this.sanitizer.sanitize(l.SecurityContext.HTML,this.calcTooltip(a)))}this.mainTooltips=e},t.prototype.calcLabel=function(){var t=this.activeTrip,e=this.settings.useLabelFunction?Object(u.q)(this.settings.labelFunction,[t,this.historicalData,t.dsIndex]):this.settings.label;this.label=u.o.parseTemplate(e,t,!0)},t.prototype.interpolateArray=function(t){for(var e={},n=this.settings.latKeyName,a=this.settings.lngKeyName,r=0,o=t;r<o.length;r++){var s=o[r],l=s.time;e[this.minTime+Math.ceil((l-this.minTime)/this.normalizationStep)*this.normalizationStep]=Object(i.a)(Object(i.a)({},s),{minTime:this.minTime!==1/0?f()(this.minTime).format("YYYY-MM-DD HH:mm:ss"):"",maxTime:this.maxTime!==-1/0?f()(this.maxTime).format("YYYY-MM-DD HH:mm:ss"):"",rotationAngle:this.settings.rotationAngle})}for(var c=Object.keys(e),d=0;d<c.length-1;d++)e[c[d]].rotationAngle+=Object(u.f)(e[c[d]],e[c[d+1]],n,a);return e},t.\u0275fac=function(e){return new(e||t)(l["\u0275\u0275directiveInject"](l.ChangeDetectorRef),l["\u0275\u0275directiveInject"](y.DomSanitizer))},t.\u0275cmp=l["\u0275\u0275defineComponent"]({type:t,selectors:[["trip-animation"]],viewQuery:function(t,e){var n;(1&t&&l["\u0275\u0275viewQuery"](E,!0),2&t)&&(l["\u0275\u0275queryRefresh"](n=l["\u0275\u0275loadQuery"]())&&(e.mapContainer=n.first))},inputs:{ctx:"ctx"},decls:10,vars:12,consts:[[1,"trip-animation-widget"],["class","trip-animation-label-container",4,"ngIf"],["fxLayout","column",1,"trip-animation-container"],[1,"map"],["map",""],["fxLayout","row",1,"trip-animation-info-panel"],["class","tooltip-button","mat-mini-fab","","color","primary","aria-label","tooltip",3,"click",4,"ngIf"],["fxLayout","column",1,"trip-animation-tooltip","md-whiteframe-z4",3,"ngClass","ngStyle"],["style","padding: 10px 0",3,"innerHTML",4,"ngFor","ngForOf"],[3,"settings","minTime","maxTime","step","anchors","useAnchors","timeUpdated",4,"ngIf"],[1,"trip-animation-label-container"],["mat-mini-fab","","color","primary","aria-label","tooltip",1,"tooltip-button",3,"click"],[2,"padding","10px 0",3,"innerHTML"],[3,"settings","minTime","maxTime","step","anchors","useAnchors","timeUpdated"]],template:function(t,e){1&t&&(l["\u0275\u0275elementStart"](0,"div",0),l["\u0275\u0275template"](1,I,2,1,"div",1),l["\u0275\u0275elementStart"](2,"div",2),l["\u0275\u0275element"](3,"div",3,4),l["\u0275\u0275elementStart"](5,"div",5),l["\u0275\u0275template"](6,O,3,0,"button",6),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementStart"](7,"div",7),l["\u0275\u0275template"](8,T,1,1,"div",8),l["\u0275\u0275elementEnd"](),l["\u0275\u0275elementEnd"](),l["\u0275\u0275template"](9,M,1,6,"tb-history-selector",9),l["\u0275\u0275elementEnd"]()),2&t&&(l["\u0275\u0275advance"](1),l["\u0275\u0275property"]("ngIf",e.settings.showLabel),l["\u0275\u0275advance"](5),l["\u0275\u0275property"]("ngIf",e.settings.showTooltip),l["\u0275\u0275advance"](1),l["\u0275\u0275property"]("ngClass",l["\u0275\u0275pureFunction1"](6,F,!e.visibleTooltip))("ngStyle",l["\u0275\u0275pureFunction3"](8,P,e.settings.tooltipColor,e.settings.tooltipOpacity,e.settings.tooltipFontColor)),l["\u0275\u0275advance"](1),l["\u0275\u0275property"]("ngForOf",e.mainTooltips),l["\u0275\u0275advance"](1),l["\u0275\u0275property"]("ngIf",e.historicalData))},directives:[b.NgIf,v.f,b.NgClass,x.b,b.NgStyle,x.e,b.NgForOf,C.MatButton,S.MatIcon,w.a],styles:[".trip-animation-widget[_ngcontent-%COMP%]{position:relative;width:100%;height:100%;font-size:16px;line-height:24px;display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column}.trip-animation-widget[_ngcontent-%COMP%]   .trip-animation-label-container[_ngcontent-%COMP%]{height:24px}.trip-animation-widget[_ngcontent-%COMP%]   .trip-animation-container[_ngcontent-%COMP%]{position:relative;z-index:1;-ms-flex:1;flex:1;width:100%}.trip-animation-widget[_ngcontent-%COMP%]   .trip-animation-container[_ngcontent-%COMP%]   .map[_ngcontent-%COMP%]{width:100%;height:100%}.trip-animation-widget[_ngcontent-%COMP%]   .trip-animation-container[_ngcontent-%COMP%]   .trip-animation-info-panel[_ngcontent-%COMP%]{position:absolute;top:0;right:0;pointer-events:none}.trip-animation-widget[_ngcontent-%COMP%]   .trip-animation-container[_ngcontent-%COMP%]   .trip-animation-info-panel[_ngcontent-%COMP%]   .tooltip-button[_ngcontent-%COMP%]{top:0;left:0;width:32px;min-width:32px;height:32px;min-height:32px;padding:0 0 2px;margin:2px;line-height:24px;z-index:999}.trip-animation-widget[_ngcontent-%COMP%]   .trip-animation-container[_ngcontent-%COMP%]   .trip-animation-info-panel[_ngcontent-%COMP%]   .tooltip-button[_ngcontent-%COMP%]  .mat-button-wrapper{padding:0}.trip-animation-widget[_ngcontent-%COMP%]   .trip-animation-container[_ngcontent-%COMP%]   .trip-animation-info-panel[_ngcontent-%COMP%]   .tooltip-button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{width:24px;height:24px}.trip-animation-widget[_ngcontent-%COMP%]   .trip-animation-container[_ngcontent-%COMP%]   .trip-animation-info-panel[_ngcontent-%COMP%]   .tooltip-button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:inherit;height:inherit}.trip-animation-widget[_ngcontent-%COMP%]   .trip-animation-container[_ngcontent-%COMP%]   .trip-animation-tooltip[_ngcontent-%COMP%]{display:-ms-flexbox;display:flex;overflow:auto;max-height:90%;position:absolute;top:30px;right:0;z-index:1000;padding:5px;background-color:#fff;transition:.3s ease-in-out}.trip-animation-widget[_ngcontent-%COMP%]   .trip-animation-container[_ngcontent-%COMP%]   .trip-animation-tooltip-hidden[_ngcontent-%COMP%]{transform:translateX(110%)}"]}),t}();!function(){l["\u0275setClassMetadata"](D,[{type:l.Component,args:[{selector:"trip-animation",templateUrl:"./trip-animation.component.html",styleUrls:["./trip-animation.component.scss"]}]}],(function(){return[{type:l.ChangeDetectorRef},{type:y.DomSanitizer}]}),{ctx:[{type:l.Input}],mapContainer:[{type:l.ViewChild,args:["map"]}]})}();var k=D},oook:function(t,e,n){"use strict";n.d(e,"a",(function(){return E}));var i=n("mrSG"),a=n("fXoL"),r=n("3Pt+"),o=n("NEMC"),s=n("xKAQ"),l=n("qxrw"),c=n("G8Aa"),d=n("l7P3"),p=n("sYmb"),u=n("ofXK"),m=n("XiUz"),f=n("kmnG"),h=n("qFsG"),g=n("bSwM"),y=n("RX5c"),b=n("bTqV"),v=n("znSr"),x=n("Dvla"),C=n("NFeN");function S(t,e){if(1&t){var n=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementStart"](0,"div",14),a["\u0275\u0275elementStart"](1,"button",15),a["\u0275\u0275listener"]("click",(function(t){return a["\u0275\u0275restoreView"](n),a["\u0275\u0275nextContext"]().onEntityAction(t,"setDefault")})),a["\u0275\u0275pipe"](2,"async"),a["\u0275\u0275text"](3),a["\u0275\u0275pipe"](4,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](5,"button",15),a["\u0275\u0275listener"]("click",(function(t){return a["\u0275\u0275restoreView"](n),a["\u0275\u0275nextContext"]().onEntityAction(t,"delete")})),a["\u0275\u0275pipe"](6,"async"),a["\u0275\u0275text"](7),a["\u0275\u0275pipe"](8,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](9,"div",16),a["\u0275\u0275elementStart"](10,"button",17),a["\u0275\u0275listener"]("cbOnSuccess",(function(t){return a["\u0275\u0275restoreView"](n),a["\u0275\u0275nextContext"]().onTenantProfileIdCopied(t)})),a["\u0275\u0275element"](11,"mat-icon",18),a["\u0275\u0275elementStart"](12,"span",5),a["\u0275\u0275text"](13,"tenant-profile.copyId"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()}if(2&t){var i=a["\u0275\u0275nextContext"]();a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](2,8,i.isLoading$))("fxShow",!(i.isEdit||null!=i.entity&&i.entity.default)),a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](4,10,"tenant-profile.set-default")," "),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](6,12,i.isLoading$))("fxShow",!i.hideDelete()&&!i.isEdit),a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](8,14,"tenant-profile.delete")," "),a["\u0275\u0275advance"](3),a["\u0275\u0275property"]("cbContent",null==i.entity||null==i.entity.id?null:i.entity.id.id)("fxShow",!i.isEdit)}}function w(t,e){1&t&&(a["\u0275\u0275elementStart"](0,"mat-error"),a["\u0275\u0275text"](1),a["\u0275\u0275pipe"](2,"translate"),a["\u0275\u0275elementEnd"]()),2&t&&(a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](2,1,"tenant-profile.name-required")," "))}var E=function(t){function e(e,n,i,a,r){var o=t.call(this,e,r,i,a)||this;return o.store=e,o.translate=n,o.entityValue=i,o.entitiesTableConfigValue=a,o.fb=r,o.standalone=!1,o}return Object(i.d)(e,t),e.prototype.hideDelete=function(){return!!this.entitiesTableConfig&&!this.entitiesTableConfig.deleteEnabled(this.entity)},e.prototype.buildForm=function(t){return this.fb.group({name:[t?t.name:"",[r.Validators.required]],isolatedTbCore:[!!t&&t.isolatedTbCore,[]],isolatedTbRuleEngine:[!!t&&t.isolatedTbRuleEngine,[]],profileData:[t&&!this.isAdd?t.profileData:{configuration:Object(o.b)(o.a.DEFAULT)},[]],description:[t?t.description:"",[]]})},e.prototype.updateForm=function(t){this.entityForm.patchValue({name:t.name}),this.entityForm.patchValue({isolatedTbCore:t.isolatedTbCore}),this.entityForm.patchValue({isolatedTbRuleEngine:t.isolatedTbRuleEngine}),this.entityForm.patchValue({profileData:this.isAdd?{configuration:Object(o.b)(o.a.DEFAULT)}:t.profileData}),this.entityForm.patchValue({description:t.description})},e.prototype.updateFormState=function(){this.entityForm&&(this.isEditValue?(this.entityForm.enable({emitEvent:!1}),this.isAdd||(this.entityForm.get("isolatedTbCore").disable({emitEvent:!1}),this.entityForm.get("isolatedTbRuleEngine").disable({emitEvent:!1}))):this.entityForm.disable({emitEvent:!1}))},e.prototype.onTenantProfileIdCopied=function(t){this.store.dispatch(new s.b({message:this.translate.instant("tenant-profile.idCopiedMessage"),type:"success",duration:750,verticalPosition:"bottom",horizontalPosition:"right"}))},e.\u0275fac=function(t){return new(t||e)(a["\u0275\u0275directiveInject"](d.Store),a["\u0275\u0275directiveInject"](p.TranslateService),a["\u0275\u0275directiveInject"]("entity",8),a["\u0275\u0275directiveInject"]("entitiesTableConfig",8),a["\u0275\u0275directiveInject"](r.FormBuilder))},e.\u0275cmp=a["\u0275\u0275defineComponent"]({type:e,selectors:[["tb-tenant-profile"]],inputs:{standalone:"standalone"},features:[a["\u0275\u0275InheritDefinitionFeature"]],decls:30,vars:18,consts:[["class","tb-details-buttons","fxLayout.xs","column",4,"ngIf"],["fxLayout","column",1,"mat-padding"],[3,"formGroup"],[3,"disabled"],[1,"mat-block"],["translate",""],["matInput","","formControlName","name","required",""],[4,"ngIf"],["fxLayout","column"],["formControlName","isolatedTbCore",1,"hinted-checkbox"],[1,"tb-hint"],["formControlName","isolatedTbRuleEngine",1,"hinted-checkbox"],["formControlName","profileData","required",""],["matInput","","formControlName","description","rows","2"],["fxLayout.xs","column",1,"tb-details-buttons"],["mat-raised-button","","color","primary",3,"disabled","fxShow","click"],["fxLayout","row","fxLayout.xs","column"],["mat-raised-button","","ngxClipboard","",3,"cbContent","fxShow","cbOnSuccess"],["svgIcon","mdi:clipboard-arrow-left"]],template:function(t,e){1&t&&(a["\u0275\u0275template"](0,S,14,16,"div",0),a["\u0275\u0275elementStart"](1,"div",1),a["\u0275\u0275elementStart"](2,"form",2),a["\u0275\u0275elementStart"](3,"fieldset",3),a["\u0275\u0275pipe"](4,"async"),a["\u0275\u0275elementStart"](5,"mat-form-field",4),a["\u0275\u0275elementStart"](6,"mat-label",5),a["\u0275\u0275text"](7,"tenant-profile.name"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](8,"input",6),a["\u0275\u0275template"](9,w,3,3,"mat-error",7),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](10,"div",8),a["\u0275\u0275elementStart"](11,"mat-checkbox",9),a["\u0275\u0275elementStart"](12,"div"),a["\u0275\u0275text"](13),a["\u0275\u0275pipe"](14,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](15,"div",10),a["\u0275\u0275text"](16),a["\u0275\u0275pipe"](17,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](18,"mat-checkbox",11),a["\u0275\u0275elementStart"](19,"div"),a["\u0275\u0275text"](20),a["\u0275\u0275pipe"](21,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](22,"div",10),a["\u0275\u0275text"](23),a["\u0275\u0275pipe"](24,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](25,"tb-tenant-profile-data",12),a["\u0275\u0275elementStart"](26,"mat-form-field",4),a["\u0275\u0275elementStart"](27,"mat-label",5),a["\u0275\u0275text"](28,"tenant-profile.description"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](29,"textarea",13),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()),2&t&&(a["\u0275\u0275property"]("ngIf",!e.standalone),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("formGroup",e.entityForm),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](4,8,e.isLoading$)||!e.isEdit),a["\u0275\u0275advance"](6),a["\u0275\u0275property"]("ngIf",e.entityForm.get("name").hasError("required")),a["\u0275\u0275advance"](4),a["\u0275\u0275textInterpolate"](a["\u0275\u0275pipeBind1"](14,10,"tenant.isolated-tb-core")),a["\u0275\u0275advance"](3),a["\u0275\u0275textInterpolate"](a["\u0275\u0275pipeBind1"](17,12,"tenant.isolated-tb-core-details")),a["\u0275\u0275advance"](4),a["\u0275\u0275textInterpolate"](a["\u0275\u0275pipeBind1"](21,14,"tenant.isolated-tb-rule-engine")),a["\u0275\u0275advance"](3),a["\u0275\u0275textInterpolate"](a["\u0275\u0275pipeBind1"](24,16,"tenant.isolated-tb-rule-engine-details")))},directives:[u.NgIf,m.f,r["\u0275angular_packages_forms_forms_y"],r.NgControlStatusGroup,r.FormGroupDirective,f.MatFormField,f.MatLabel,p.TranslateDirective,h.MatInput,r.DefaultValueAccessor,r.NgControlStatus,r.FormControlName,r.RequiredValidator,g.MatCheckbox,y.a,b.MatButton,v.d,x.a,C.MatIcon,f.MatError],pipes:[u.AsyncPipe,p.TranslatePipe],styles:["[_nghost-%COMP%]     .mat-checkbox.hinted-checkbox .mat-checkbox-inner-container{margin-top:4px}[_nghost-%COMP%]     .mat-checkbox .mat-checkbox-layout{white-space:normal}"]}),e}(c.a);!function(){a["\u0275setClassMetadata"](E,[{type:a.Component,args:[{selector:"tb-tenant-profile",templateUrl:"./tenant-profile.component.html",styleUrls:["./tenant-profile.component.scss"]}]}],(function(){return[{type:d.Store},{type:p.TranslateService},{type:void 0,decorators:[{type:a.Optional},{type:a.Inject,args:["entity"]}]},{type:l.d,decorators:[{type:a.Optional},{type:a.Inject,args:["entitiesTableConfig"]}]},{type:r.FormBuilder}]}),{standalone:[{type:a.Input}]})}()},ou6H:function(t,e,n){"use strict";n.d(e,"a",(function(){return C}));var i=n("mrSG"),a=n("fXoL"),r=n("FKr1"),o=n("0IaG"),s=n("3Pt+"),l=n("gmuX"),c=n("xKAQ"),d=n("l7P3"),p=n("tyNb"),u=n("/t3+"),m=n("sYmb"),f=n("XiUz"),h=n("bTqV"),g=n("NFeN"),y=n("ofXK"),b=n("XGqO"),v=n("bv9b");function x(t,e){1&t&&a["\u0275\u0275element"](0,"mat-progress-bar",14)}var C=function(t){function e(e,n,i,a,r,o){var l=t.call(this,e,n,r)||this;return l.store=e,l.router=n,l.data=i,l.errorStateMatcher=a,l.dialogRef=r,l.fb=o,l.submitted=!1,l.importTitle=i.importTitle,l.importFileLabel=i.importFileLabel,l.importFormGroup=l.fb.group({jsonContent:[null,[s.Validators.required]]}),l}return Object(i.d)(e,t),e.prototype.ngOnInit=function(){},e.prototype.isErrorState=function(t,e){var n=this.errorStateMatcher.isErrorState(t,e),i=!!(t&&t.invalid&&this.submitted);return n||i},e.prototype.loadDataFromJsonContent=function(t){try{return JSON.parse(t)}catch(e){return this.store.dispatch(new c.b({message:e.message,type:"error"})),null}},e.prototype.cancel=function(){this.dialogRef.close(null)},e.prototype.importFromJson=function(){this.submitted=!0;var t=this.importFormGroup.get("jsonContent").value;this.dialogRef.close(t)},e.\u0275fac=function(t){return new(t||e)(a["\u0275\u0275directiveInject"](d.Store),a["\u0275\u0275directiveInject"](p.Router),a["\u0275\u0275directiveInject"](o.MAT_DIALOG_DATA),a["\u0275\u0275directiveInject"](r.ErrorStateMatcher,4),a["\u0275\u0275directiveInject"](o.MatDialogRef),a["\u0275\u0275directiveInject"](s.FormBuilder))},e.\u0275cmp=a["\u0275\u0275defineComponent"]({type:e,selectors:[["tb-import-dialog"]],features:[a["\u0275\u0275ProvidersFeature"]([{provide:r.ErrorStateMatcher,useExisting:e}]),a["\u0275\u0275InheritDefinitionFeature"]],decls:26,vars:27,consts:[[3,"formGroup","ngSubmit"],["color","primary"],["translate",""],["fxFlex",""],["mat-button","","mat-icon-button","","type","button",3,"click"],[1,"material-icons"],["color","warn","mode","indeterminate",4,"ngIf"],["mat-dialog-content",""],[3,"disabled"],["fxFlex","","fxLayout","column"],["formControlName","jsonContent","required","","accept",".json,application/json","allowedExtensions","json",3,"contentConvertFunction","label","dropLabel"],["mat-dialog-actions","","fxLayoutAlign","end center"],["mat-button","","color","primary","type","button","cdkFocusInitial","",3,"disabled","click"],["mat-raised-button","","color","primary","type","submit",3,"disabled"],["color","warn","mode","indeterminate"]],template:function(t,e){1&t&&(a["\u0275\u0275elementStart"](0,"form",0),a["\u0275\u0275listener"]("ngSubmit",(function(){return e.importFromJson()})),a["\u0275\u0275elementStart"](1,"mat-toolbar",1),a["\u0275\u0275elementStart"](2,"h2",2),a["\u0275\u0275text"](3),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](4,"span",3),a["\u0275\u0275elementStart"](5,"button",4),a["\u0275\u0275listener"]("click",(function(){return e.cancel()})),a["\u0275\u0275elementStart"](6,"mat-icon",5),a["\u0275\u0275text"](7,"close"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275template"](8,x,1,0,"mat-progress-bar",6),a["\u0275\u0275pipe"](9,"async"),a["\u0275\u0275elementStart"](10,"div",7),a["\u0275\u0275elementStart"](11,"fieldset",8),a["\u0275\u0275pipe"](12,"async"),a["\u0275\u0275elementStart"](13,"div",9),a["\u0275\u0275element"](14,"tb-file-input",10),a["\u0275\u0275pipe"](15,"translate"),a["\u0275\u0275pipe"](16,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](17,"div",11),a["\u0275\u0275elementStart"](18,"button",12),a["\u0275\u0275listener"]("click",(function(){return e.cancel()})),a["\u0275\u0275pipe"](19,"async"),a["\u0275\u0275text"](20),a["\u0275\u0275pipe"](21,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](22,"button",13),a["\u0275\u0275pipe"](23,"async"),a["\u0275\u0275text"](24),a["\u0275\u0275pipe"](25,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()),2&t&&(a["\u0275\u0275property"]("formGroup",e.importFormGroup),a["\u0275\u0275advance"](3),a["\u0275\u0275textInterpolate"](e.importTitle),a["\u0275\u0275advance"](5),a["\u0275\u0275property"]("ngIf",a["\u0275\u0275pipeBind1"](9,11,e.isLoading$)),a["\u0275\u0275advance"](3),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](12,13,e.isLoading$)),a["\u0275\u0275advance"](3),a["\u0275\u0275propertyInterpolate"]("label",a["\u0275\u0275pipeBind1"](15,15,e.importFileLabel)),a["\u0275\u0275propertyInterpolate"]("dropLabel",a["\u0275\u0275pipeBind1"](16,17,"import.drop-file")),a["\u0275\u0275property"]("contentConvertFunction",e.loadDataFromJsonContent),a["\u0275\u0275advance"](4),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](19,19,e.isLoading$)),a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](21,21,"action.cancel")," "),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](23,23,e.isLoading$)||e.importFormGroup.invalid||!e.importFormGroup.dirty),a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](25,25,"action.import")," "))},directives:[s["\u0275angular_packages_forms_forms_y"],s.NgControlStatusGroup,s.FormGroupDirective,u.MatToolbar,m.TranslateDirective,f.b,h.MatButton,g.MatIcon,y.NgIf,o.MatDialogContent,f.f,b.a,s.NgControlStatus,s.FormControlName,s.RequiredValidator,o.MatDialogActions,f.e,v.MatProgressBar],pipes:[y.AsyncPipe,m.TranslatePipe],encapsulation:2}),e}(l.a);!function(){a["\u0275setClassMetadata"](C,[{type:a.Component,args:[{selector:"tb-import-dialog",templateUrl:"./import-dialog.component.html",providers:[{provide:r.ErrorStateMatcher,useExisting:C}],styleUrls:[]}]}],(function(){return[{type:d.Store},{type:p.Router},{type:void 0,decorators:[{type:a.Inject,args:[o.MAT_DIALOG_DATA]}]},{type:r.ErrorStateMatcher,decorators:[{type:a.SkipSelf}]},{type:o.MatDialogRef},{type:s.FormBuilder}]}),null)}()},"p/3Z":function(t,e,n){"use strict";n.d(e,"a",(function(){return T}));var i=n("mrSG"),a=n("fXoL"),r=n("0IaG"),o=n("YnEf"),s=n("xKAQ"),l=n("gmuX"),c=n("l7P3"),d=n("tyNb"),p=n("sYmb"),u=n("3Pt+"),m=n("/t3+"),f=n("XiUz"),h=n("bTqV"),g=n("NFeN"),y=n("ofXK"),b=n("rezs"),v=n("Dvla"),x=n("Qu3c"),C=n("5yRj"),S=n("bv9b");function w(t,e){1&t&&a["\u0275\u0275element"](0,"mat-progress-bar",17)}function E(t,e){1&t&&a["\u0275\u0275element"](0,"div",18)}var I=function(t,e){return{dashboardTitle:t,publicLink:e}},O=function(t){return{dashboardTitle:t}},T=function(t){function e(e,n,i,a,r,o,s){var l=t.call(this,e,n,o)||this;return l.store=e,l.router=n,l.data=i,l.translate=a,l.dashboardService=r,l.dialogRef=o,l.fb=s,l.dashboard=i.dashboard,l.publicLink=r.getPublicDashboardLink(l.dashboard),l}return Object(i.d)(e,t),e.prototype.ngOnInit=function(){},e.prototype.close=function(){this.dialogRef.close()},e.prototype.onPublicLinkCopied=function(t){this.store.dispatch(new s.b({message:this.translate.instant("dashboard.public-link-copied-message"),type:"success",target:"makeDashboardPublicDialogContent",duration:750,verticalPosition:"bottom",horizontalPosition:"left"}))},e.\u0275fac=function(t){return new(t||e)(a["\u0275\u0275directiveInject"](c.Store),a["\u0275\u0275directiveInject"](d.Router),a["\u0275\u0275directiveInject"](r.MAT_DIALOG_DATA),a["\u0275\u0275directiveInject"](p.TranslateService),a["\u0275\u0275directiveInject"](o.a),a["\u0275\u0275directiveInject"](r.MatDialogRef),a["\u0275\u0275directiveInject"](u.FormBuilder))},e.\u0275cmp=a["\u0275\u0275defineComponent"]({type:e,selectors:[["tb-make-dashboard-public-dialog"]],features:[a["\u0275\u0275InheritDefinitionFeature"]],decls:34,vars:42,consts:[[2,"min-width","400px","position","relative"],["fxLayout","row","color","primary"],["fxFlex",""],["mat-button","","mat-icon-button","","type","button",3,"click"],[1,"material-icons"],["color","warn","mode","indeterminate",4,"ngIf"],["style","height: 4px;",4,"ngIf"],["mat-dialog-content","","tb-toast","","toastTarget","makeDashboardPublicDialogContent"],[3,"innerHTML"],["fxLayout","row","fxLayoutAlign","start center"],["fxFlex","",1,"tb-highlight"],["mat-button","","mat-icon-button","","ngxClipboard","","matTooltipPosition","above",3,"cbContent","matTooltip","cbOnSuccess"],["svgIcon","mdi:clipboard-arrow-left"],[1,"tb-notice",3,"innerHTML"],["shareHashTags","thingsboard, iot",2,"padding-top","15px",3,"shareTitle","shareText","shareLink"],["mat-dialog-actions","","fxLayout","row"],["mat-button","","color","primary","type","button","cdkFocusInitial","",3,"disabled","click"],["color","warn","mode","indeterminate"],[2,"height","4px"]],template:function(t,e){1&t&&(a["\u0275\u0275elementStart"](0,"div",0),a["\u0275\u0275elementStart"](1,"mat-toolbar",1),a["\u0275\u0275elementStart"](2,"h2"),a["\u0275\u0275text"](3),a["\u0275\u0275pipe"](4,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](5,"span",2),a["\u0275\u0275elementStart"](6,"button",3),a["\u0275\u0275listener"]("click",(function(){return e.close()})),a["\u0275\u0275elementStart"](7,"mat-icon",4),a["\u0275\u0275text"](8,"close"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275template"](9,w,1,0,"mat-progress-bar",5),a["\u0275\u0275pipe"](10,"async"),a["\u0275\u0275template"](11,E,1,0,"div",6),a["\u0275\u0275pipe"](12,"async"),a["\u0275\u0275elementStart"](13,"div",7),a["\u0275\u0275element"](14,"span",8),a["\u0275\u0275pipe"](15,"async"),a["\u0275\u0275elementStart"](16,"div",9),a["\u0275\u0275elementStart"](17,"pre",10),a["\u0275\u0275elementStart"](18,"code"),a["\u0275\u0275text"](19),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](20,"button",11),a["\u0275\u0275listener"]("cbOnSuccess",(function(t){return e.onPublicLinkCopied(t)})),a["\u0275\u0275pipe"](21,"translate"),a["\u0275\u0275element"](22,"mat-icon",12),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](23,"div",13),a["\u0275\u0275pipe"](24,"translate"),a["\u0275\u0275element"](25,"tb-social-share-panel",14),a["\u0275\u0275pipe"](26,"translate"),a["\u0275\u0275pipe"](27,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](28,"div",15),a["\u0275\u0275element"](29,"span",2),a["\u0275\u0275elementStart"](30,"button",16),a["\u0275\u0275listener"]("click",(function(){return e.close()})),a["\u0275\u0275pipe"](31,"async"),a["\u0275\u0275text"](32),a["\u0275\u0275pipe"](33,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()),2&t&&(a["\u0275\u0275advance"](3),a["\u0275\u0275textInterpolate"](a["\u0275\u0275pipeBind1"](4,13,"dashboard.public-dashboard-title")),a["\u0275\u0275advance"](6),a["\u0275\u0275property"]("ngIf",a["\u0275\u0275pipeBind1"](10,15,e.isLoading$)),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("ngIf",!a["\u0275\u0275pipeBind1"](12,17,e.isLoading$)),a["\u0275\u0275advance"](3),a["\u0275\u0275propertyInterpolate"]("innerHTML",a["\u0275\u0275pipeBind1"](15,19,e.translate.get("dashboard.public-dashboard-text",a["\u0275\u0275pureFunction2"](35,I,e.dashboard.title,e.publicLink))),a["\u0275\u0275sanitizeHtml"]),a["\u0275\u0275advance"](5),a["\u0275\u0275textInterpolate"](e.publicLink),a["\u0275\u0275advance"](1),a["\u0275\u0275propertyInterpolate"]("cbContent",e.publicLink),a["\u0275\u0275propertyInterpolate"]("matTooltip",a["\u0275\u0275pipeBind1"](21,21,"dashboard.copy-public-link")),a["\u0275\u0275advance"](3),a["\u0275\u0275propertyInterpolate"]("innerHTML",a["\u0275\u0275pipeBind1"](24,23,"dashboard.public-dashboard-notice"),a["\u0275\u0275sanitizeHtml"]),a["\u0275\u0275advance"](2),a["\u0275\u0275propertyInterpolate"]("shareTitle",a["\u0275\u0275pipeBind2"](26,25,"dashboard.socialshare-title",a["\u0275\u0275pureFunction1"](38,O,e.dashboard.title))),a["\u0275\u0275propertyInterpolate"]("shareText",a["\u0275\u0275pipeBind2"](27,28,"dashboard.socialshare-text",a["\u0275\u0275pureFunction1"](40,O,e.dashboard.title))),a["\u0275\u0275propertyInterpolate"]("shareLink",e.publicLink),a["\u0275\u0275advance"](5),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](31,31,e.isLoading$)),a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](33,33,"action.ok")," "))},directives:[m.MatToolbar,f.f,f.b,h.MatButton,g.MatIcon,y.NgIf,r.MatDialogContent,b.b,f.e,v.a,x.MatTooltip,C.a,r.MatDialogActions,S.MatProgressBar],pipes:[p.TranslatePipe,y.AsyncPipe],encapsulation:2}),e}(l.a);!function(){a["\u0275setClassMetadata"](T,[{type:a.Component,args:[{selector:"tb-make-dashboard-public-dialog",templateUrl:"./make-dashboard-public-dialog.component.html",styleUrls:[]}]}],(function(){return[{type:c.Store},{type:d.Router},{type:void 0,decorators:[{type:a.Inject,args:[r.MAT_DIALOG_DATA]}]},{type:p.TranslateService},{type:o.a},{type:r.MatDialogRef},{type:u.FormBuilder}]}),null)}()},"p0+G":function(t,e,n){"use strict";n.d(e,"a",(function(){return O}));var i=n("mrSG"),a=n("fXoL"),r=n("G8Aa"),o=n("3Pt+"),s=n("xKAQ"),l=n("IktG"),c=n("YnEf"),d=n("qxrw"),p=n("//Q6"),u=n("l7P3"),m=n("sYmb"),f=n("XiUz"),h=n("bTqV"),g=n("znSr"),y=n("kmnG"),b=n("qFsG"),v=n("5yRj"),x=n("Dvla"),C=n("Qu3c"),S=n("NFeN"),w=n("ofXK");function E(t,e){1&t&&(a["\u0275\u0275elementStart"](0,"mat-error"),a["\u0275\u0275text"](1),a["\u0275\u0275pipe"](2,"translate"),a["\u0275\u0275elementEnd"]()),2&t&&(a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](2,1,"dashboard.title-required")," "))}var I=function(t){return{dashboardTitle:t}},O=function(t){function e(e,n,i,a,r,o){var s=t.call(this,e,o,a,r)||this;return s.store=e,s.translate=n,s.dashboardService=i,s.entityValue=a,s.entitiesTableConfigValue=r,s.fb=o,s}return Object(i.d)(e,t),e.prototype.ngOnInit=function(){this.dashboardScope=this.entitiesTableConfig.componentsData.dashboardScope,this.customerId=this.entitiesTableConfig.componentsData.customerId,t.prototype.ngOnInit.call(this)},e.prototype.isPublic=function(t){return Object(l.c)(t)},e.prototype.isCurrentPublicCustomer=function(t){return Object(l.b)(t,this.customerId)},e.prototype.hideDelete=function(){return!!this.entitiesTableConfig&&!this.entitiesTableConfig.deleteEnabled(this.entity)},e.prototype.buildForm=function(t){return this.updateFields(t),this.fb.group({title:[t?t.title:"",[o.Validators.required]],configuration:this.fb.group({description:[t&&t.configuration?t.configuration.description:""]})})},e.prototype.updateForm=function(t){this.updateFields(t),this.entityForm.patchValue({title:t.title}),this.entityForm.patchValue({configuration:{description:t.configuration?t.configuration.description:""}})},e.prototype.prepareFormValue=function(e){var n=t.prototype.prepareFormValue.call(this,e);return n.configuration=Object(i.a)(Object(i.a)({},this.entity.configuration||{}),n.configuration||{}),n},e.prototype.onPublicLinkCopied=function(t){this.store.dispatch(new s.b({message:this.translate.instant("dashboard.public-link-copied-message"),type:"success",duration:750,verticalPosition:"bottom",horizontalPosition:"right"}))},e.prototype.updateFields=function(t){t&&!Object(p.r)(t,{})&&(this.assignedCustomersText=Object(l.a)(t),this.publicLink=this.dashboardService.getPublicDashboardLink(t))},e.\u0275fac=function(t){return new(t||e)(a["\u0275\u0275directiveInject"](u.Store),a["\u0275\u0275directiveInject"](m.TranslateService),a["\u0275\u0275directiveInject"](c.a),a["\u0275\u0275directiveInject"]("entity"),a["\u0275\u0275directiveInject"]("entitiesTableConfig"),a["\u0275\u0275directiveInject"](o.FormBuilder))},e.\u0275cmp=a["\u0275\u0275defineComponent"]({type:e,selectors:[["tb-dashboard-form"]],features:[a["\u0275\u0275InheritDefinitionFeature"]],decls:59,vars:75,consts:[["fxLayout.xs","column",1,"tb-details-buttons"],["mat-raised-button","","color","primary",3,"disabled","fxShow","click"],["fxLayout","column",1,"mat-padding"],[1,"mat-block",3,"fxShow"],["translate",""],["matInput","","disabled","",3,"ngModel"],["fxLayout","column",3,"fxShow"],["shareHashTags","thingsboard, iot",2,"padding-bottom","1.25em",3,"shareTitle","shareText","shareLink"],["fxLayout","row"],["fxFlex","",1,"mat-block"],["mat-button","","mat-icon-button","","ngxClipboard","","matTooltipPosition","above",2,"margin-top","8px",3,"cbContent","matTooltip","cbOnSuccess"],["svgIcon","mdi:clipboard-arrow-left"],[3,"formGroup"],[3,"disabled"],[1,"mat-block"],["matInput","","formControlName","title","required",""],[4,"ngIf"],["formGroupName","configuration","fxLayout","column"],["matInput","","formControlName","description","rows","2"]],template:function(t,e){1&t&&(a["\u0275\u0275elementStart"](0,"div",0),a["\u0275\u0275elementStart"](1,"button",1),a["\u0275\u0275listener"]("click",(function(t){return e.onEntityAction(t,"open")})),a["\u0275\u0275pipe"](2,"async"),a["\u0275\u0275text"](3),a["\u0275\u0275pipe"](4,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](5,"button",1),a["\u0275\u0275listener"]("click",(function(t){return e.onEntityAction(t,"export")})),a["\u0275\u0275pipe"](6,"async"),a["\u0275\u0275text"](7),a["\u0275\u0275pipe"](8,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](9,"button",1),a["\u0275\u0275listener"]("click",(function(t){return e.onEntityAction(t,"makePublic")})),a["\u0275\u0275pipe"](10,"async"),a["\u0275\u0275text"](11),a["\u0275\u0275pipe"](12,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](13,"button",1),a["\u0275\u0275listener"]("click",(function(t){return e.onEntityAction(t,"makePrivate")})),a["\u0275\u0275pipe"](14,"async"),a["\u0275\u0275text"](15),a["\u0275\u0275pipe"](16,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](17,"button",1),a["\u0275\u0275listener"]("click",(function(t){return e.onEntityAction(t,"manageAssignedCustomers")})),a["\u0275\u0275pipe"](18,"async"),a["\u0275\u0275text"](19),a["\u0275\u0275pipe"](20,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](21,"button",1),a["\u0275\u0275listener"]("click",(function(t){return e.onEntityAction(t,"unassignFromCustomer")})),a["\u0275\u0275pipe"](22,"async"),a["\u0275\u0275text"](23),a["\u0275\u0275pipe"](24,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](25,"button",1),a["\u0275\u0275listener"]("click",(function(t){return e.onEntityAction(t,"delete")})),a["\u0275\u0275pipe"](26,"async"),a["\u0275\u0275text"](27),a["\u0275\u0275pipe"](28,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](29,"div",2),a["\u0275\u0275elementStart"](30,"mat-form-field",3),a["\u0275\u0275elementStart"](31,"mat-label",4),a["\u0275\u0275text"](32,"dashboard.assignedToCustomers"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](33,"input",5),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](34,"div",6),a["\u0275\u0275element"](35,"tb-social-share-panel",7),a["\u0275\u0275pipe"](36,"translate"),a["\u0275\u0275pipe"](37,"translate"),a["\u0275\u0275elementStart"](38,"div",8),a["\u0275\u0275elementStart"](39,"mat-form-field",9),a["\u0275\u0275elementStart"](40,"mat-label",4),a["\u0275\u0275text"](41,"dashboard.public-link"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](42,"input",5),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](43,"button",10),a["\u0275\u0275listener"]("cbOnSuccess",(function(t){return e.onPublicLinkCopied(t)})),a["\u0275\u0275pipe"](44,"translate"),a["\u0275\u0275element"](45,"mat-icon",11),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](46,"form",12),a["\u0275\u0275elementStart"](47,"fieldset",13),a["\u0275\u0275pipe"](48,"async"),a["\u0275\u0275elementStart"](49,"mat-form-field",14),a["\u0275\u0275elementStart"](50,"mat-label",4),a["\u0275\u0275text"](51,"dashboard.title"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](52,"input",15),a["\u0275\u0275template"](53,E,3,3,"mat-error",16),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](54,"div",17),a["\u0275\u0275elementStart"](55,"mat-form-field",14),a["\u0275\u0275elementStart"](56,"mat-label",4),a["\u0275\u0275text"](57,"dashboard.description"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](58,"textarea",18),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()),2&t&&(a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](2,33,e.isLoading$))("fxShow",!e.isEdit),a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](4,35,"dashboard.open-dashboard")," "),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](6,37,e.isLoading$))("fxShow",!e.isEdit&&"tenant"===e.dashboardScope),a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](8,39,"dashboard.export")," "),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](10,41,e.isLoading$))("fxShow",!e.isEdit&&"tenant"===e.dashboardScope&&!e.isPublic(e.entity)),a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](12,43,"dashboard.make-public")," "),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](14,45,e.isLoading$))("fxShow",!e.isEdit&&("tenant"===e.dashboardScope&&e.isPublic(e.entity)||"customer"===e.dashboardScope&&e.isCurrentPublicCustomer(e.entity))),a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](16,47,"dashboard.make-private")," "),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](18,49,e.isLoading$))("fxShow",!e.isEdit&&"tenant"===e.dashboardScope),a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](20,51,"dashboard.manage-assigned-customers")," "),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](22,53,e.isLoading$))("fxShow",!e.isEdit&&"customer"===e.dashboardScope&&!e.isCurrentPublicCustomer(e.entity)),a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](24,55,"dashboard.unassign-from-customer")," "),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](26,57,e.isLoading$))("fxShow",!e.hideDelete()&&!e.isEdit),a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](28,59,"dashboard.delete")," "),a["\u0275\u0275advance"](3),a["\u0275\u0275property"]("fxShow",!e.isEdit&&(null==e.assignedCustomersText?null:e.assignedCustomersText.length)&&"tenant"===e.dashboardScope),a["\u0275\u0275advance"](3),a["\u0275\u0275property"]("ngModel",e.assignedCustomersText),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("fxShow",!e.isEdit&&("tenant"===e.dashboardScope&&e.isPublic(e.entity)||"customer"===e.dashboardScope&&e.isCurrentPublicCustomer(e.entity))),a["\u0275\u0275advance"](1),a["\u0275\u0275propertyInterpolate"]("shareTitle",a["\u0275\u0275pipeBind2"](36,61,"dashboard.socialshare-title",a["\u0275\u0275pureFunction1"](71,I,null==e.entity?null:e.entity.title))),a["\u0275\u0275propertyInterpolate"]("shareText",a["\u0275\u0275pipeBind2"](37,64,"dashboard.socialshare-text",a["\u0275\u0275pureFunction1"](73,I,null==e.entity?null:e.entity.title))),a["\u0275\u0275propertyInterpolate"]("shareLink",e.publicLink),a["\u0275\u0275advance"](7),a["\u0275\u0275property"]("ngModel",e.publicLink),a["\u0275\u0275advance"](1),a["\u0275\u0275propertyInterpolate"]("cbContent",e.publicLink),a["\u0275\u0275propertyInterpolate"]("matTooltip",a["\u0275\u0275pipeBind1"](44,67,"dashboard.copy-public-link")),a["\u0275\u0275advance"](3),a["\u0275\u0275property"]("formGroup",e.entityForm),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](48,69,e.isLoading$)||!e.isEdit),a["\u0275\u0275advance"](6),a["\u0275\u0275property"]("ngIf",e.entityForm.get("title").hasError("required")))},directives:[f.f,h.MatButton,g.d,y.MatFormField,y.MatLabel,m.TranslateDirective,b.MatInput,o.DefaultValueAccessor,o.NgControlStatus,o.NgModel,v.a,f.b,x.a,C.MatTooltip,S.MatIcon,o["\u0275angular_packages_forms_forms_y"],o.NgControlStatusGroup,o.FormGroupDirective,o.FormControlName,o.RequiredValidator,w.NgIf,o.FormGroupName,y.MatError],pipes:[w.AsyncPipe,m.TranslatePipe],styles:[""]}),e}(r.a);!function(){a["\u0275setClassMetadata"](O,[{type:a.Component,args:[{selector:"tb-dashboard-form",templateUrl:"./dashboard-form.component.html",styleUrls:["./dashboard-form.component.scss"]}]}],(function(){return[{type:u.Store},{type:m.TranslateService},{type:c.a},{type:void 0,decorators:[{type:a.Inject,args:["entity"]}]},{type:d.d,decorators:[{type:a.Inject,args:["entitiesTableConfig"]}]},{type:o.FormBuilder}]}),null)}()},"p4Q/":function(t,e,n){"use strict";n.d(e,"a",(function(){return q}));var i=n("mrSG"),a=n("fXoL"),r=n("3Pt+"),o=n("mbhL"),s=n("4r/P"),l=n("vkgz"),c=n("lJxs"),d=n("5+tZ"),p=n("w1tV"),u=n("8LU1"),m=n("WeLn"),f=n("T4sd"),h=n("FtGj"),g=n("zkya"),y=n("JIJk"),b=n("g+M/"),v=n("6oqA"),x=n("eriv"),C=n("l7P3"),S=n("sYmb"),w=n("0IaG"),E=n("kmnG"),I=n("qFsG"),O=n("/1cH"),T=n("ofXK"),M=n("bTqV"),F=n("NFeN"),P=n("Qu3c"),D=n("FKr1"),k=n("d5eY"),j=["deviceProfileInput"],A=["deviceProfileAutocomplete"];function _(t,e){if(1&t){var n=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementStart"](0,"button",10),a["\u0275\u0275listener"]("click",(function(){return a["\u0275\u0275restoreView"](n),a["\u0275\u0275nextContext"]().clear()})),a["\u0275\u0275elementStart"](1,"mat-icon",11),a["\u0275\u0275text"](2,"close"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()}}function L(t,e){if(1&t){var n=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementStart"](0,"button",12),a["\u0275\u0275listener"]("click",(function(t){return a["\u0275\u0275restoreView"](n),a["\u0275\u0275nextContext"]().editDeviceProfile(t)})),a["\u0275\u0275pipe"](1,"translate"),a["\u0275\u0275elementStart"](2,"mat-icon",11),a["\u0275\u0275text"](3,"edit"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()}2&t&&a["\u0275\u0275propertyInterpolate"]("matTooltip",a["\u0275\u0275pipeBind1"](1,1,"device-profile.edit"))}function V(t,e){if(1&t&&(a["\u0275\u0275elementStart"](0,"mat-option",13),a["\u0275\u0275element"](1,"span",14),a["\u0275\u0275pipe"](2,"highlight"),a["\u0275\u0275elementEnd"]()),2&t){var n=e.$implicit,i=a["\u0275\u0275nextContext"]();a["\u0275\u0275property"]("value",n),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("innerHTML",a["\u0275\u0275pipeBind2"](2,2,n.name,i.searchText),a["\u0275\u0275sanitizeHtml"])}}function R(t,e){1&t&&(a["\u0275\u0275elementStart"](0,"div"),a["\u0275\u0275elementStart"](1,"span",19),a["\u0275\u0275text"](2,"device-profile.no-device-profiles-found"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]())}var N=function(t){return{entity:t}};function G(t,e){if(1&t){var n=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementStart"](0,"span"),a["\u0275\u0275text"](1),a["\u0275\u0275pipe"](2,"async"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](3,"span"),a["\u0275\u0275elementStart"](4,"a",20),a["\u0275\u0275listener"]("click",(function(t){a["\u0275\u0275restoreView"](n);var e=a["\u0275\u0275nextContext"](2);return e.createDeviceProfile(t,e.searchText)})),a["\u0275\u0275text"](5,"device-profile.create-new-device-profile"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()}if(2&t){var i=a["\u0275\u0275nextContext"](2);a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](2,1,i.translate.get("device-profile.no-device-profiles-matching",a["\u0275\u0275pureFunction1"](3,N,i.truncate.transform(i.searchText,!0,6,"..."))))," ")}}function B(t,e){if(1&t){var n=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementStart"](0,"mat-option",15),a["\u0275\u0275elementStart"](1,"div",16),a["\u0275\u0275listener"]("click",(function(t){return a["\u0275\u0275restoreView"](n),t.stopPropagation()})),a["\u0275\u0275template"](2,R,3,0,"div",17),a["\u0275\u0275template"](3,G,6,5,"ng-template",null,18,a["\u0275\u0275templateRefExtractor"]),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()}if(2&t){var i=a["\u0275\u0275reference"](4),r=a["\u0275\u0275nextContext"]();a["\u0275\u0275property"]("value",null),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("ngIf",!r.textIsNotEmpty(r.searchText)||!r.addNewProfile)("ngIfElse",i)}}function U(t,e){1&t&&(a["\u0275\u0275elementStart"](0,"mat-error"),a["\u0275\u0275text"](1),a["\u0275\u0275pipe"](2,"translate"),a["\u0275\u0275elementEnd"]()),2&t&&(a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](2,1,"device-profile.device-profile-required")," "))}var q=function(){function t(t,e,n,i,r,o,s){this.store=t,this.translate=e,this.truncate=n,this.deviceProfileService=i,this.fb=r,this.zone=o,this.dialog=s,this.selectDefaultProfile=!1,this.selectFirstProfile=!1,this.displayAllOnEmpty=!1,this.editProfileEnabled=!0,this.addNewProfile=!0,this.transportType=null,this.deviceProfileUpdated=new a.EventEmitter,this.deviceProfileChanged=new a.EventEmitter,this.searchText="",this.dirty=!1,this.ignoreClosedPanel=!1,this.allDeviceProfile={name:this.translate.instant("device-profile.all-device-profiles"),type:y.h.DEFAULT,transportType:y.j.DEFAULT,id:null},this.propagateChange=function(t){},this.selectDeviceProfileFormGroup=this.fb.group({deviceProfile:[null]})}return Object.defineProperty(t.prototype,"required",{get:function(){return this.requiredValue},set:function(t){this.requiredValue=Object(u.coerceBooleanProperty)(t)},enumerable:!1,configurable:!0}),t.prototype.registerOnChange=function(t){this.propagateChange=t},t.prototype.registerOnTouched=function(t){},t.prototype.ngOnInit=function(){var t=this;this.filteredDeviceProfiles=this.selectDeviceProfileFormGroup.get("deviceProfile").valueChanges.pipe(Object(l.a)((function(e){var n;n="string"!=typeof e&&e?e:null,t.displayAllOnEmpty&&!n||t.updateView(n)})),Object(c.a)((function(e){return e?"string"==typeof e?e:t.displayAllOnEmpty&&e===t.allDeviceProfile?"":e.name:""})),Object(d.b)((function(e){return t.fetchDeviceProfiles(e)})),Object(p.a)())},t.prototype.ngOnChanges=function(t){for(var e=0,n=Object.keys(t);e<n.length;e++){var i=n[e],a=t[i];a.firstChange||a.currentValue===a.previousValue||"transportType"===i&&this.writeValue(null)}},t.prototype.selectDefaultDeviceProfileIfNeeded=function(){var t=this;this.selectDefaultProfile&&!this.modelValue?this.deviceProfileService.getDefaultDeviceProfileInfo().subscribe((function(e){!e||t.transportType&&e.transportType!==t.transportType?t.selectFirstDeviceProfileIfNeeded():(t.selectDeviceProfileFormGroup.get("deviceProfile").patchValue(e,{emitEvent:!1}),t.updateView(e))})):this.selectFirstDeviceProfileIfNeeded()},t.prototype.selectFirstDeviceProfileIfNeeded=function(){var t=this;if(this.selectFirstProfile&&!this.modelValue){var e=new o.b(1,0,null,{property:"createdTime",direction:s.a.DESC});this.deviceProfileService.getDeviceProfileInfos(e,this.transportType,{ignoreLoading:!0}).subscribe((function(e){var n=e.data;n.length&&(t.selectDeviceProfileFormGroup.get("deviceProfile").patchValue(n[0],{emitEvent:!1}),t.updateView(n[0]))}))}},t.prototype.setDisabledState=function(t){this.disabled=t,this.disabled?this.selectDeviceProfileFormGroup.disable():this.selectDeviceProfileFormGroup.enable()},t.prototype.writeValue=function(t){var e=this;this.searchText="",null!=t?this.deviceProfileService.getDeviceProfileInfo(t.id).subscribe((function(t){e.modelValue=new g.a(t.id.id),e.selectDeviceProfileFormGroup.get("deviceProfile").patchValue(t,{emitEvent:!1}),e.deviceProfileChanged.emit(t)})):this.displayAllOnEmpty?(this.modelValue=null,this.selectDeviceProfileFormGroup.get("deviceProfile").patchValue(this.allDeviceProfile,{emitEvent:!1})):(this.modelValue=null,this.selectDeviceProfileFormGroup.get("deviceProfile").patchValue(null,{emitEvent:!1}),this.selectDefaultDeviceProfileIfNeeded()),this.dirty=!0},t.prototype.onFocus=function(){this.dirty&&(this.selectDeviceProfileFormGroup.get("deviceProfile").updateValueAndValidity({onlySelf:!0,emitEvent:!0}),this.dirty=!1)},t.prototype.onPanelClosed=function(){var t=this;this.ignoreClosedPanel?this.ignoreClosedPanel=!1:this.displayAllOnEmpty&&!this.selectDeviceProfileFormGroup.get("deviceProfile").value&&this.zone.run((function(){t.selectDeviceProfileFormGroup.get("deviceProfile").patchValue(t.allDeviceProfile,{emitEvent:!0})}),0)},t.prototype.updateView=function(t){var e=t&&t.id?new g.a(t.id.id):null;Object(m.a)(this.modelValue,e)||(this.modelValue=e,this.propagateChange(this.modelValue),this.deviceProfileChanged.emit(t))},t.prototype.displayDeviceProfileFn=function(t){return t?t.name:void 0},t.prototype.fetchDeviceProfiles=function(t){var e=this;this.searchText=t;var n=new o.b(10,0,t,{property:"name",direction:s.a.ASC});return this.deviceProfileService.getDeviceProfileInfos(n,this.transportType,{ignoreLoading:!0}).pipe(Object(c.a)((function(t){var n=t.data;return e.displayAllOnEmpty&&(n=Object(i.g)([e.allDeviceProfile],n)),n})))},t.prototype.clear=function(){var t=this;this.ignoreClosedPanel=!0,this.selectDeviceProfileFormGroup.get("deviceProfile").patchValue(null,{emitEvent:!0}),setTimeout((function(){t.deviceProfileInput.nativeElement.blur(),t.deviceProfileInput.nativeElement.focus()}),0)},t.prototype.textIsNotEmpty=function(t){return t&&t.length>0},t.prototype.deviceProfileEnter=function(t){this.editProfileEnabled&&t.keyCode===h.ENTER&&(t.preventDefault(),this.modelValue||this.createDeviceProfile(t,this.searchText))},t.prototype.createDeviceProfile=function(t,e){t.preventDefault();var n={name:e,transportType:this.transportType};this.addNewProfile&&this.openDeviceProfileDialog(n,!0)},t.prototype.editDeviceProfile=function(t){var e=this;t.preventDefault(),this.deviceProfileService.getDeviceProfile(this.modelValue.id).subscribe((function(t){e.openDeviceProfileDialog(t,!1)}))},t.prototype.openDeviceProfileDialog=function(t,e){var n=this;(e?this.dialog.open(x.a,{disableClose:!0,panelClass:["tb-dialog","tb-fullscreen-dialog"],data:{deviceProfileName:t.name,transportType:t.transportType}}).afterClosed():this.dialog.open(v.a,{disableClose:!0,panelClass:["tb-dialog","tb-fullscreen-dialog"],data:{isAdd:!1,deviceProfile:t}}).afterClosed()).subscribe((function(t){t?n.deviceProfileService.getDeviceProfileInfo(t.id.id).subscribe((function(i){n.modelValue=new g.a(i.id.id),n.selectDeviceProfileFormGroup.get("deviceProfile").patchValue(i,{emitEvent:!0}),e?n.propagateChange(n.modelValue):n.deviceProfileUpdated.next(t.id),n.deviceProfileChanged.emit(i)})):setTimeout((function(){n.deviceProfileInput.nativeElement.blur(),n.deviceProfileInput.nativeElement.focus()}),0)}))},t.\u0275fac=function(e){return new(e||t)(a["\u0275\u0275directiveInject"](C.Store),a["\u0275\u0275directiveInject"](S.TranslateService),a["\u0275\u0275directiveInject"](f.a),a["\u0275\u0275directiveInject"](b.a),a["\u0275\u0275directiveInject"](r.FormBuilder),a["\u0275\u0275directiveInject"](a.NgZone),a["\u0275\u0275directiveInject"](w.MatDialog))},t.\u0275cmp=a["\u0275\u0275defineComponent"]({type:t,selectors:[["tb-device-profile-autocomplete"]],viewQuery:function(t,e){var n;(1&t&&(a["\u0275\u0275staticViewQuery"](j,!0),a["\u0275\u0275staticViewQuery"](A,!0)),2&t)&&(a["\u0275\u0275queryRefresh"](n=a["\u0275\u0275loadQuery"]())&&(e.deviceProfileInput=n.first),a["\u0275\u0275queryRefresh"](n=a["\u0275\u0275loadQuery"]())&&(e.deviceProfileAutocomplete=n.first))},inputs:{selectDefaultProfile:"selectDefaultProfile",selectFirstProfile:"selectFirstProfile",displayAllOnEmpty:"displayAllOnEmpty",editProfileEnabled:"editProfileEnabled",addNewProfile:"addNewProfile",transportType:"transportType",required:"required",disabled:"disabled"},outputs:{deviceProfileUpdated:"deviceProfileUpdated",deviceProfileChanged:"deviceProfileChanged"},features:[a["\u0275\u0275ProvidersFeature"]([{provide:r.NG_VALUE_ACCESSOR,useExisting:Object(a.forwardRef)((function(){return t})),multi:!0}]),a["\u0275\u0275NgOnChangesFeature"]],decls:13,vars:16,consts:[[1,"mat-block",3,"formGroup"],["matInput","","type","text","formControlName","deviceProfile",3,"placeholder","required","matAutocomplete","focusin","keydown","keypress"],["deviceProfileInput",""],["type","button","matSuffix","","mat-button","","mat-icon-button","","aria-label","Clear",3,"click",4,"ngIf"],["type","button","matSuffix","","mat-button","","mat-icon-button","","aria-label","Edit","matTooltipPosition","above",3,"matTooltip","click",4,"ngIf"],[1,"tb-autocomplete",3,"displayWith","closed"],["deviceProfileAutocomplete","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],["class","tb-not-found",3,"value",4,"ngIf"],[4,"ngIf"],["type","button","matSuffix","","mat-button","","mat-icon-button","","aria-label","Clear",3,"click"],[1,"material-icons"],["type","button","matSuffix","","mat-button","","mat-icon-button","","aria-label","Edit","matTooltipPosition","above",3,"matTooltip","click"],[3,"value"],[3,"innerHTML"],[1,"tb-not-found",3,"value"],[1,"tb-not-found-content",3,"click"],[4,"ngIf","ngIfElse"],["searchNotEmpty",""],["translate",""],["translate","",3,"click"]],template:function(t,e){if(1&t&&(a["\u0275\u0275elementStart"](0,"mat-form-field",0),a["\u0275\u0275elementStart"](1,"input",1,2),a["\u0275\u0275listener"]("focusin",(function(){return e.onFocus()}))("keydown",(function(t){return e.deviceProfileEnter(t)}))("keypress",(function(t){return e.deviceProfileEnter(t)})),a["\u0275\u0275pipe"](3,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275template"](4,_,3,0,"button",3),a["\u0275\u0275template"](5,L,4,3,"button",4),a["\u0275\u0275elementStart"](6,"mat-autocomplete",5,6),a["\u0275\u0275listener"]("closed",(function(){return e.onPanelClosed()})),a["\u0275\u0275template"](8,V,3,5,"mat-option",7),a["\u0275\u0275pipe"](9,"async"),a["\u0275\u0275template"](10,B,5,3,"mat-option",8),a["\u0275\u0275pipe"](11,"async"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275template"](12,U,3,3,"mat-error",9),a["\u0275\u0275elementEnd"]()),2&t){var n,i=a["\u0275\u0275reference"](7);a["\u0275\u0275property"]("formGroup",e.selectDeviceProfileFormGroup),a["\u0275\u0275advance"](1),a["\u0275\u0275propertyInterpolate"]("placeholder",a["\u0275\u0275pipeBind1"](3,10,"device-profile.device-profile")),a["\u0275\u0275property"]("required",e.required)("matAutocomplete",i),a["\u0275\u0275advance"](3),a["\u0275\u0275property"]("ngIf",e.selectDeviceProfileFormGroup.get("deviceProfile").value&&!e.disabled),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",e.selectDeviceProfileFormGroup.get("deviceProfile").value&&!e.disabled&&e.editProfileEnabled),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("displayWith",e.displayDeviceProfileFn),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("ngForOf",a["\u0275\u0275pipeBind1"](9,12,e.filteredDeviceProfiles)),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("ngIf",!(null!=(n=a["\u0275\u0275pipeBind1"](11,14,e.filteredDeviceProfiles))&&n.length)),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("ngIf",e.selectDeviceProfileFormGroup.get("deviceProfile").hasError("required"))}},directives:[E.MatFormField,r.NgControlStatusGroup,r.FormGroupDirective,I.MatInput,r.DefaultValueAccessor,O.MatAutocompleteTrigger,r.NgControlStatus,r.FormControlName,r.RequiredValidator,T.NgIf,O.MatAutocomplete,T.NgForOf,M.MatButton,E.MatSuffix,F.MatIcon,P.MatTooltip,D.MatOption,S.TranslateDirective,E.MatError],pipes:[S.TranslatePipe,T.AsyncPipe,k.a],encapsulation:2}),t}();!function(){a["\u0275setClassMetadata"](q,[{type:a.Component,args:[{selector:"tb-device-profile-autocomplete",templateUrl:"./device-profile-autocomplete.component.html",styleUrls:[],providers:[{provide:r.NG_VALUE_ACCESSOR,useExisting:Object(a.forwardRef)((function(){return q})),multi:!0}]}]}],(function(){return[{type:C.Store},{type:S.TranslateService},{type:f.a},{type:b.a},{type:r.FormBuilder},{type:a.NgZone},{type:w.MatDialog}]}),{selectDefaultProfile:[{type:a.Input}],selectFirstProfile:[{type:a.Input}],displayAllOnEmpty:[{type:a.Input}],editProfileEnabled:[{type:a.Input}],addNewProfile:[{type:a.Input}],transportType:[{type:a.Input}],required:[{type:a.Input}],disabled:[{type:a.Input}],deviceProfileUpdated:[{type:a.Output}],deviceProfileChanged:[{type:a.Output}],deviceProfileInput:[{type:a.ViewChild,args:["deviceProfileInput",{static:!0}]}],deviceProfileAutocomplete:[{type:a.ViewChild,args:["deviceProfileAutocomplete",{static:!0}]}]})}()},"pf+U":function(t,e,n){"use strict";n.d(e,"a",(function(){return A}));var i=n("fXoL"),a=n("3Pt+"),r=n("LRne"),o=n("vkgz"),s=n("lJxs"),l=n("5+tZ"),c=n("w1tV"),d=n("8LU1"),p=n("T4sd"),u=n("/1cH"),m=n("FtGj"),f=n("FKr1"),h=n("l7P3"),g=n("sYmb"),y=n("kmnG"),b=n("ofXK"),v=n("qFsG"),x=n("bTqV"),C=n("NFeN"),S=n("d5eY"),w=["filterAutocomplete"],E=["autocomplete"],I=["filterInput"];function O(t,e){1&t&&i["\u0275\u0275element"](0,"mat-label")}function T(t,e){if(1&t){var n=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"button",9),i["\u0275\u0275listener"]("click",(function(){return i["\u0275\u0275restoreView"](n),i["\u0275\u0275nextContext"]().clear()})),i["\u0275\u0275elementStart"](1,"mat-icon",10),i["\u0275\u0275text"](2,"close"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()}}function M(t,e){if(1&t&&(i["\u0275\u0275elementStart"](0,"mat-option",11),i["\u0275\u0275element"](1,"span",12),i["\u0275\u0275pipe"](2,"highlight"),i["\u0275\u0275elementEnd"]()),2&t){var n=e.$implicit,a=i["\u0275\u0275nextContext"]();i["\u0275\u0275property"]("value",n),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("innerHTML",i["\u0275\u0275pipeBind2"](2,2,n.filter,a.searchText),i["\u0275\u0275sanitizeHtml"])}}function F(t,e){1&t&&(i["\u0275\u0275elementStart"](0,"div"),i["\u0275\u0275elementStart"](1,"span",18),i["\u0275\u0275text"](2,"filter.no-filters-found"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]())}var P=function(t){return{filter:t}};function D(t,e){if(1&t&&(i["\u0275\u0275elementStart"](0,"span"),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"async"),i["\u0275\u0275elementEnd"]()),2&t){var n=i["\u0275\u0275nextContext"](2);i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,1,n.translate.get("filter.no-filter-matching",i["\u0275\u0275pureFunction1"](3,P,n.truncate.transform(n.searchText,!0,6,"..."))))," ")}}function k(t,e){if(1&t){var n=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"mat-option",13),i["\u0275\u0275elementStart"](1,"div",14),i["\u0275\u0275listener"]("click",(function(t){return i["\u0275\u0275restoreView"](n),t.stopPropagation()})),i["\u0275\u0275template"](2,F,3,0,"div",15),i["\u0275\u0275template"](3,D,3,5,"ng-template",null,16,i["\u0275\u0275templateRefExtractor"]),i["\u0275\u0275elementStart"](5,"span"),i["\u0275\u0275elementStart"](6,"a",17),i["\u0275\u0275listener"]("click",(function(t){i["\u0275\u0275restoreView"](n);var e=i["\u0275\u0275nextContext"]();return e.createFilter(t,e.searchText)})),i["\u0275\u0275text"](7,"filter.create-new-filter"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()}if(2&t){var a=i["\u0275\u0275reference"](4),r=i["\u0275\u0275nextContext"]();i["\u0275\u0275property"]("value",null),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngIf",!r.textIsNotEmpty(r.searchText))("ngIfElse",a)}}function j(t,e){1&t&&(i["\u0275\u0275elementStart"](0,"mat-error"),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&t&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,1,"filter.filter-required")," "))}var A=function(){function t(t,e,n,i,a){this.store=t,this.errorStateMatcher=e,this.translate=n,this.truncate=i,this.fb=a,this.filterList=[],this.searchText="",this.dirty=!1,this.creatingFilter=!1,this.propagateChange=function(t){},this.selectFilterFormGroup=this.fb.group({filter:[null]})}return Object.defineProperty(t.prototype,"tbRequired",{get:function(){return this.requiredValue},set:function(t){this.requiredValue=Object(d.coerceBooleanProperty)(t)},enumerable:!1,configurable:!0}),t.prototype.registerOnChange=function(t){this.propagateChange=t},t.prototype.registerOnTouched=function(t){},t.prototype.ngOnInit=function(){for(var t=this,e=this.aliasController.getFilters(),n=0,i=Object.keys(e);n<i.length;n++){var a=i[n];this.filterList.push(e[a])}this.filteredFilters=this.selectFilterFormGroup.get("filter").valueChanges.pipe(Object(o.a)((function(e){var n;n="string"!=typeof e&&e?e:null,t.updateView(n),null===e&&t.clear()})),Object(s.a)((function(t){return t?"string"==typeof t?t:t.filter:""})),Object(l.b)((function(e){return t.fetchFilters(e)})),Object(c.a)())},t.prototype.isErrorState=function(t,e){var n=this.errorStateMatcher.isErrorState(t,e),i=this.tbRequired&&!this.modelValue;return n||i},t.prototype.ngAfterViewInit=function(){},t.prototype.setDisabledState=function(t){this.disabled=t,this.disabled?this.selectFilterFormGroup.disable({emitEvent:!1}):this.selectFilterFormGroup.enable({emitEvent:!1})},t.prototype.writeValue=function(t){this.searchText="";var e=null;if(null!=t){var n=this.aliasController.getFilters();n[t]&&(e=n[t])}null!=e?(this.modelValue=e.id,this.selectFilterFormGroup.get("filter").patchValue(e,{emitEvent:!1})):(this.modelValue=null,this.selectFilterFormGroup.get("filter").patchValue("",{emitEvent:!1})),this.dirty=!0},t.prototype.onFocus=function(){this.dirty&&(this.selectFilterFormGroup.get("filter").updateValueAndValidity({onlySelf:!0,emitEvent:!0}),this.dirty=!1)},t.prototype.updateView=function(t){var e=t?t.id:null;this.modelValue!==e&&(this.modelValue=e,this.propagateChange(this.modelValue))},t.prototype.displayFilterFn=function(t){return t?t.filter:void 0},t.prototype.fetchFilters=function(t){this.searchText=t;var e=this.filterList;return t&&t.length&&(e=this.filterList.filter((function(e){return e.filter.toLowerCase().includes(t.toLowerCase())}))),Object(r.a)(e)},t.prototype.clear=function(t){var e=this;void 0===t&&(t=""),this.filterInput.nativeElement.value=t,this.selectFilterFormGroup.get("filter").patchValue(t,{emitEvent:!0}),setTimeout((function(){e.filterInput.nativeElement.blur(),e.filterInput.nativeElement.focus()}),0)},t.prototype.textIsNotEmpty=function(t){return!!(t&&null!=t&&t.length>0)},t.prototype.filterEnter=function(t){t.keyCode===m.ENTER&&(t.preventDefault(),this.modelValue||this.createFilter(t,this.searchText))},t.prototype.createFilter=function(t,e){var n=this;t.preventDefault(),this.creatingFilter=!0,this.callbacks&&this.callbacks.createFilter&&this.callbacks.createFilter(e).subscribe((function(t){t?(n.filterList.push(t),n.modelValue=t.id,n.selectFilterFormGroup.get("filter").patchValue(t,{emitEvent:!0}),n.propagateChange(n.modelValue)):setTimeout((function(){n.filterInput.nativeElement.blur(),n.filterInput.nativeElement.focus()}),0)}))},t.\u0275fac=function(e){return new(e||t)(i["\u0275\u0275directiveInject"](h.Store),i["\u0275\u0275directiveInject"](f.ErrorStateMatcher,4),i["\u0275\u0275directiveInject"](g.TranslateService),i["\u0275\u0275directiveInject"](p.a),i["\u0275\u0275directiveInject"](a.FormBuilder))},t.\u0275cmp=i["\u0275\u0275defineComponent"]({type:t,selectors:[["tb-filter-select"]],viewQuery:function(t,e){var n;(1&t&&(i["\u0275\u0275viewQuery"](w,!0),i["\u0275\u0275viewQuery"](E,!0,u.MatAutocompleteTrigger),i["\u0275\u0275staticViewQuery"](I,!0)),2&t)&&(i["\u0275\u0275queryRefresh"](n=i["\u0275\u0275loadQuery"]())&&(e.filterAutocomplete=n.first),i["\u0275\u0275queryRefresh"](n=i["\u0275\u0275loadQuery"]())&&(e.autoCompleteTrigger=n.first),i["\u0275\u0275queryRefresh"](n=i["\u0275\u0275loadQuery"]())&&(e.filterInput=n.first))},inputs:{aliasController:"aliasController",callbacks:"callbacks",showLabel:"showLabel",tbRequired:"tbRequired",disabled:"disabled"},features:[i["\u0275\u0275ProvidersFeature"]([{provide:a.NG_VALUE_ACCESSOR,useExisting:Object(i.forwardRef)((function(){return t})),multi:!0},{provide:f.ErrorStateMatcher,useExisting:t}])],decls:13,vars:18,consts:[[1,"mat-block",3,"floatLabel","hideRequiredMarker","formGroup"],[4,"ngIf"],["matInput","","type","text","formControlName","filter",3,"placeholder","required","matAutocomplete","focusin","keydown","keypress"],["filterInput",""],["type","button","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click",4,"ngIf"],[1,"tb-autocomplete",3,"displayWith"],["filterAutocomplete","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],["class","tb-not-found",3,"value",4,"ngIf"],["type","button","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click"],[1,"material-icons"],[3,"value"],[3,"innerHTML"],[1,"tb-not-found",3,"value"],[1,"tb-not-found-content",3,"click"],[4,"ngIf","ngIfElse"],["searchNotEmpty",""],["translate","",3,"click"],["translate",""]],template:function(t,e){if(1&t&&(i["\u0275\u0275elementStart"](0,"mat-form-field",0),i["\u0275\u0275template"](1,O,1,0,"mat-label",1),i["\u0275\u0275elementStart"](2,"input",2,3),i["\u0275\u0275listener"]("focusin",(function(){return e.onFocus()}))("keydown",(function(t){return e.filterEnter(t)}))("keypress",(function(t){return e.filterEnter(t)})),i["\u0275\u0275pipe"](4,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](5,T,3,0,"button",4),i["\u0275\u0275elementStart"](6,"mat-autocomplete",5,6),i["\u0275\u0275template"](8,M,3,5,"mat-option",7),i["\u0275\u0275pipe"](9,"async"),i["\u0275\u0275template"](10,k,8,3,"mat-option",8),i["\u0275\u0275pipe"](11,"async"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](12,j,3,3,"mat-error",1),i["\u0275\u0275elementEnd"]()),2&t){var n,a=i["\u0275\u0275reference"](7);i["\u0275\u0275property"]("floatLabel",e.showLabel?"auto":"always")("hideRequiredMarker",!e.showLabel)("formGroup",e.selectFilterFormGroup),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",!e.showLabel),i["\u0275\u0275advance"](1),i["\u0275\u0275propertyInterpolate"]("placeholder",i["\u0275\u0275pipeBind1"](4,12,"filter.filter")),i["\u0275\u0275property"]("required",e.tbRequired)("matAutocomplete",a),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("ngIf",e.selectFilterFormGroup.get("filter").value&&!e.disabled),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("displayWith",e.displayFilterFn),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngForOf",i["\u0275\u0275pipeBind1"](9,14,e.filteredFilters)),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngIf",!(null!=(n=i["\u0275\u0275pipeBind1"](11,16,e.filteredFilters))&&n.length)),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngIf",!e.modelValue&&e.tbRequired)}},directives:[y.MatFormField,a.NgControlStatusGroup,a.FormGroupDirective,b.NgIf,v.MatInput,a.DefaultValueAccessor,u.MatAutocompleteTrigger,a.NgControlStatus,a.FormControlName,a.RequiredValidator,u.MatAutocomplete,b.NgForOf,y.MatLabel,x.MatButton,y.MatSuffix,C.MatIcon,f.MatOption,g.TranslateDirective,y.MatError],pipes:[g.TranslatePipe,b.AsyncPipe,S.a],styles:["[_nghost-%COMP%]     .mat-form-field-infix{border-top:none}"]}),t}();!function(){i["\u0275setClassMetadata"](A,[{type:i.Component,args:[{selector:"tb-filter-select",templateUrl:"./filter-select.component.html",styleUrls:["./filter-select.component.scss"],providers:[{provide:a.NG_VALUE_ACCESSOR,useExisting:Object(i.forwardRef)((function(){return A})),multi:!0},{provide:f.ErrorStateMatcher,useExisting:A}]}]}],(function(){return[{type:h.Store},{type:f.ErrorStateMatcher,decorators:[{type:i.SkipSelf}]},{type:g.TranslateService},{type:p.a},{type:a.FormBuilder}]}),{aliasController:[{type:i.Input}],callbacks:[{type:i.Input}],showLabel:[{type:i.Input}],filterAutocomplete:[{type:i.ViewChild,args:["filterAutocomplete"]}],autoCompleteTrigger:[{type:i.ViewChild,args:["autocomplete",{read:u.MatAutocompleteTrigger}]}],tbRequired:[{type:i.Input}],disabled:[{type:i.Input}],filterInput:[{type:i.ViewChild,args:["filterInput",{static:!0}]}]})}()},qCKp:function(t,e,n){"use strict";n.r(e),n.d(e,"Observable",(function(){return i.a})),n.d(e,"ConnectableObservable",(function(){return a.a})),n.d(e,"GroupedObservable",(function(){return r.a})),n.d(e,"observable",(function(){return o.a})),n.d(e,"Subject",(function(){return s.b})),n.d(e,"BehaviorSubject",(function(){return l.a})),n.d(e,"ReplaySubject",(function(){return c.a})),n.d(e,"AsyncSubject",(function(){return d.a})),n.d(e,"asap",(function(){return p.a})),n.d(e,"asapScheduler",(function(){return p.b})),n.d(e,"async",(function(){return u.a})),n.d(e,"asyncScheduler",(function(){return u.b})),n.d(e,"queue",(function(){return m.a})),n.d(e,"queueScheduler",(function(){return m.b})),n.d(e,"animationFrame",(function(){return f.a})),n.d(e,"animationFrameScheduler",(function(){return f.b})),n.d(e,"VirtualTimeScheduler",(function(){return S})),n.d(e,"VirtualAction",(function(){return w})),n.d(e,"Scheduler",(function(){return E.a})),n.d(e,"Subscription",(function(){return I.a})),n.d(e,"Subscriber",(function(){return O.a})),n.d(e,"Notification",(function(){return T.a})),n.d(e,"NotificationKind",(function(){return T.b})),n.d(e,"pipe",(function(){return M.a})),n.d(e,"noop",(function(){return F.a})),n.d(e,"identity",(function(){return P.a})),n.d(e,"isObservable",(function(){return D.a})),n.d(e,"ArgumentOutOfRangeError",(function(){return k.a})),n.d(e,"EmptyError",(function(){return j.a})),n.d(e,"ObjectUnsubscribedError",(function(){return A.a})),n.d(e,"UnsubscriptionError",(function(){return _.a})),n.d(e,"TimeoutError",(function(){return L.a})),n.d(e,"bindCallback",(function(){return U})),n.d(e,"bindNodeCallback",(function(){return z})),n.d(e,"combineLatest",(function(){return Q.b})),n.d(e,"concat",(function(){return X.a})),n.d(e,"defer",(function(){return Y.a})),n.d(e,"empty",(function(){return J.b})),n.d(e,"forkJoin",(function(){return Z.a})),n.d(e,"from",(function(){return tt.a})),n.d(e,"fromEvent",(function(){return et.a})),n.d(e,"fromEventPattern",(function(){return it})),n.d(e,"generate",(function(){return at})),n.d(e,"iif",(function(){return ot})),n.d(e,"interval",(function(){return st.a})),n.d(e,"merge",(function(){return lt.a})),n.d(e,"never",(function(){return ct.b})),n.d(e,"of",(function(){return dt.a})),n.d(e,"onErrorResumeNext",(function(){return pt})),n.d(e,"pairs",(function(){return ut})),n.d(e,"partition",(function(){return yt})),n.d(e,"race",(function(){return bt.a})),n.d(e,"range",(function(){return vt})),n.d(e,"throwError",(function(){return Ct.a})),n.d(e,"timer",(function(){return St.a})),n.d(e,"using",(function(){return wt})),n.d(e,"zip",(function(){return Et.b})),n.d(e,"scheduled",(function(){return It.a})),n.d(e,"EMPTY",(function(){return J.a})),n.d(e,"NEVER",(function(){return ct.a})),n.d(e,"config",(function(){return Ot.a}));var i=n("HDdC"),a=n("EQ5u"),r=n("OQgR"),o=n("kJWO"),s=n("XNiG"),l=n("2Vo4"),c=n("jtHE"),d=n("NHP+"),p=n("7Hc7"),u=n("D0XW"),m=n("qgXg"),f=n("eNwd"),h=n("ReuC"),g=n("foSv"),y=n("1OyB"),b=n("vuIU"),v=n("Ji7U"),x=n("LK+K"),C=n("3N8a"),S=function(t){Object(v.a)(n,t);var e=Object(x.a)(n);function n(){var t,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:w,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.POSITIVE_INFINITY;return Object(y.a)(this,n),(t=e.call(this,i,(function(){return t.frame}))).maxFrames=a,t.frame=0,t.index=-1,t}return Object(b.a)(n,[{key:"flush",value:function(){for(var t,e,n=this.actions,i=this.maxFrames;(e=n[0])&&e.delay<=i&&(n.shift(),this.frame=e.delay,!(t=e.execute(e.state,e.delay))););if(t){for(;e=n.shift();)e.unsubscribe();throw t}}}]),n}(n("IjjT").a);S.frameTimeFactor=10;var w=function(t){Object(v.a)(n,t);var e=Object(x.a)(n);function n(t,i){var a,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.index+=1;return Object(y.a)(this,n),(a=e.call(this,t,i)).scheduler=t,a.work=i,a.index=r,a.active=!0,a.index=t.index=r,a}return Object(b.a)(n,[{key:"schedule",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(!this.id)return Object(h.a)(Object(g.a)(n.prototype),"schedule",this).call(this,t,e);this.active=!1;var i=new n(this.scheduler,this.work);return this.add(i),i.schedule(t,e)}},{key:"requestAsyncId",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this.delay=t.frame+i;var a=t.actions;return a.push(this),a.sort(n.sortActions),!0}},{key:"recycleAsyncId",value:function(t,e){arguments.length>2&&void 0!==arguments[2]&&arguments[2]}},{key:"_execute",value:function(t,e){if(!0===this.active)return Object(h.a)(Object(g.a)(n.prototype),"_execute",this).call(this,t,e)}}],[{key:"sortActions",value:function(t,e){return t.delay===e.delay?t.index===e.index?0:t.index>e.index?1:-1:t.delay>e.delay?1:-1}}]),n}(C.a),E=n("Y/cZ"),I=n("quSY"),O=n("7o/Q"),T=n("WMd4"),M=n("mCNh"),F=n("KqfI"),P=n("SpAZ"),D=n("7+OI"),k=n("4I5i"),j=n("sVev"),A=n("9ppp"),_=n("pjAE"),L=n("Y6u4"),V=n("KQm4"),R=n("lJxs"),N=n("8Qeq"),G=n("DH7j"),B=n("z+Ro");function U(t,e,n){if(e){if(!Object(B.a)(e))return function(){return U(t,n).apply(void 0,arguments).pipe(Object(R.a)((function(t){return Object(G.a)(t)?e.apply(void 0,Object(V.a)(t)):e(t)})))};n=e}return function(){for(var e=arguments.length,a=new Array(e),r=0;r<e;r++)a[r]=arguments[r];var o,s=this,l={context:s,subject:o,callbackFunc:t,scheduler:n};return new i.a((function(e){if(n){var i={args:a,subscriber:e,params:l};return n.schedule(q,0,i)}if(!o){o=new d.a;try{t.apply(s,[].concat(a,[function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];o.next(e.length<=1?e[0]:e),o.complete()}]))}catch(r){Object(N.a)(o)?o.error(r):console.warn(r)}}return o.subscribe(e)}))}}function q(t){var e=this,n=t.args,i=t.subscriber,a=t.params,r=a.callbackFunc,o=a.context,s=a.scheduler,l=a.subject;if(!l){l=a.subject=new d.a;try{r.apply(o,[].concat(Object(V.a)(n),[function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];var a=n.length<=1?n[0]:n;e.add(s.schedule(W,0,{value:a,subject:l}))}]))}catch(c){l.error(c)}}this.add(l.subscribe(i))}function W(t){var e=t.value,n=t.subject;n.next(e),n.complete()}function z(t,e,n){if(e){if(!Object(B.a)(e))return function(){return z(t,n).apply(void 0,arguments).pipe(Object(R.a)((function(t){return Object(G.a)(t)?e.apply(void 0,Object(V.a)(t)):e(t)})))};n=e}return function(){for(var e=arguments.length,a=new Array(e),r=0;r<e;r++)a[r]=arguments[r];var o={subject:void 0,args:a,callbackFunc:t,scheduler:n,context:this};return new i.a((function(e){var i=o.context,r=o.subject;if(n)return n.schedule(K,0,{params:o,subscriber:e,context:i});if(!r){r=o.subject=new d.a;try{t.apply(i,[].concat(a,[function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var i=e.shift();if(i)return r.error(i),void 0;r.next(e.length<=1?e[0]:e),r.complete()}]))}catch(s){Object(N.a)(r)?r.error(s):console.warn(s)}}return r.subscribe(e)}))}}function K(t){var e=this,n=t.params,i=t.subscriber,a=t.context,r=n.callbackFunc,o=n.args,s=n.scheduler,l=n.subject;if(!l){l=n.subject=new d.a;try{r.apply(a,[].concat(Object(V.a)(o),[function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];var a=n.shift();if(a)e.add(s.schedule($,0,{err:a,subject:l}));else{var r=n.length<=1?n[0]:n;e.add(s.schedule(H,0,{value:r,subject:l}))}}]))}catch(c){this.add(s.schedule($,0,{err:c,subject:l}))}}this.add(l.subscribe(i))}function H(t){var e=t.value,n=t.subject;n.next(e),n.complete()}function $(t){var e=t.err;t.subject.error(e)}var Q=n("itXk"),X=n("GyhO"),Y=n("NXyV"),J=n("EY2u"),Z=n("cp0P"),tt=n("Cfvw"),et=n("xgIS"),nt=n("n6bG");function it(t,e,n){return n?it(t,e).pipe(Object(R.a)((function(t){return Object(G.a)(t)?n.apply(void 0,Object(V.a)(t)):n(t)}))):new i.a((function(n){var i,a=function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return n.next(1===e.length?e[0]:e)};try{i=t(a)}catch(r){return n.error(r),void 0}if(Object(nt.a)(e))return function(){return e(a,i)}}))}function at(t,e,n,a,r){var o,s;if(1==arguments.length){var l=t;s=l.initialState,e=l.condition,n=l.iterate,o=l.resultSelector||P.a,r=l.scheduler}else void 0===a||Object(B.a)(a)?(s=t,o=P.a,r=a):(s=t,o=a);return new i.a((function(t){var i=s;if(r)return r.schedule(rt,0,{subscriber:t,iterate:n,condition:e,resultSelector:o,state:i});for(;;){if(e){var a=void 0;try{a=e(i)}catch(c){return t.error(c),void 0}if(!a){t.complete();break}}var l=void 0;try{l=o(i)}catch(c){return t.error(c),void 0}if(t.next(l),t.closed)break;try{i=n(i)}catch(c){return t.error(c),void 0}1}}))}function rt(t){var e=t.subscriber,n=t.condition;if(!e.closed){if(t.needIterate)try{t.state=t.iterate(t.state)}catch(r){return e.error(r),void 0}else t.needIterate=!0;if(n){var i;try{i=n(t.state)}catch(r){return e.error(r),void 0}if(!i)return e.complete(),void 0;if(e.closed)return}var a;try{a=t.resultSelector(t.state)}catch(r){return e.error(r),void 0}if(!e.closed&&(e.next(a),!e.closed))return this.schedule(t)}}function ot(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:J.a,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:J.a;return Object(Y.a)((function(){return t()?e:n}))}var st=n("l5mm"),lt=n("VRyK"),ct=n("5yfJ"),dt=n("LRne");function pt(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];if(0===e.length)return J.a;var a=e[0],r=e.slice(1);return 1===e.length&&Object(G.a)(a)?pt.apply(void 0,Object(V.a)(a)):new i.a((function(t){var e=function(){return t.add(pt.apply(void 0,Object(V.a)(r)).subscribe(t))};return Object(tt.a)(a).subscribe({next:function(e){t.next(e)},error:e,complete:e})}))}function ut(t,e){return e?new i.a((function(n){var i=Object.keys(t),a=new I.a;return a.add(e.schedule(mt,0,{keys:i,index:0,subscriber:n,subscription:a,obj:t})),a})):new i.a((function(e){for(var n=Object.keys(t),i=0;i<n.length&&!e.closed;i++){var a=n[i];t.hasOwnProperty(a)&&e.next([a,t[a]])}e.complete()}))}function mt(t){var e=t.keys,n=t.index,i=t.subscriber,a=t.subscription,r=t.obj;if(!i.closed)if(n<e.length){var o=e[n];i.next([o,r[o]]),a.add(this.schedule({keys:e,index:n+1,subscriber:i,subscription:a,obj:r}))}else i.complete()}var ft=n("F97/"),ht=n("SeVD"),gt=n("pLZG");function yt(t,e,n){return[Object(gt.a)(e,n)(new i.a(Object(ht.a)(t))),Object(gt.a)(Object(ft.a)(e,n))(new i.a(Object(ht.a)(t)))]}var bt=n("Nv8m");function vt(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0;return new i.a((function(i){void 0===e&&(e=t,t=0);var a=0,r=t;if(n)return n.schedule(xt,0,{index:a,count:e,start:t,subscriber:i});for(;;){if(a++>=e){i.complete();break}if(i.next(r++),i.closed)break;1}}))}function xt(t){var e=t.start,n=t.index,i=t.count,a=t.subscriber;if(n>=i)return a.complete(),void 0;a.next(e),a.closed||(t.index=n+1,t.start=e+1,this.schedule(t))}var Ct=n("z6cu"),St=n("PqYM");function wt(t,e){return new i.a((function(n){var i,a;try{i=t()}catch(o){return n.error(o),void 0}try{a=e(i)}catch(o){return n.error(o),void 0}var r=(a?Object(tt.a)(a):J.a).subscribe(n);return function(){r.unsubscribe(),i&&i.unsubscribe()}}))}var Et=n("1uah"),It=n("7HRe"),Ot=n("2fFW")},qlrG:function(t,e,n){"use strict";n.d(e,"a",(function(){return f}));var i=n("fXoL"),a=n("3Pt+"),r=n("xw5a"),o=n("XiUz"),s=n("kmnG"),l=n("d3UM"),c=n("ofXK"),d=n("cXYG"),p=n("FKr1"),u=n("sYmb");function m(t,e){if(1&t&&(i["\u0275\u0275elementStart"](0,"mat-option",5),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&t){var n=e.$implicit,a=i["\u0275\u0275nextContext"]();i["\u0275\u0275property"]("value",n),i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,2,a.numericOperationTranslations.get(a.numericOperationEnum[n]))," ")}}var f=function(){function t(t){this.fb=t,this.allowUserDynamicSource=!0,this.onlyUserDynamicSource=!1,this.valueTypeEnum=r.f,this.numericOperations=Object.keys(r.h),this.numericOperationEnum=r.h,this.numericOperationTranslations=r.G,this.propagateChange=null}return t.prototype.ngOnInit=function(){var t=this;this.numericFilterPredicateFormGroup=this.fb.group({operation:[r.h.EQUAL,[a.Validators.required]],value:[null,[a.Validators.required]]}),this.numericFilterPredicateFormGroup.valueChanges.subscribe((function(){t.updateModel()}))},t.prototype.registerOnChange=function(t){this.propagateChange=t},t.prototype.registerOnTouched=function(t){},t.prototype.setDisabledState=function(t){this.disabled=t,this.disabled?this.numericFilterPredicateFormGroup.disable({emitEvent:!1}):this.numericFilterPredicateFormGroup.enable({emitEvent:!1})},t.prototype.writeValue=function(t){this.numericFilterPredicateFormGroup.get("operation").patchValue(t.operation,{emitEvent:!1}),this.numericFilterPredicateFormGroup.get("value").patchValue(t.value,{emitEvent:!1})},t.prototype.updateModel=function(){var t=null;this.numericFilterPredicateFormGroup.valid&&((t=this.numericFilterPredicateFormGroup.getRawValue()).type=r.g.NUMERIC),this.propagateChange(t)},t.\u0275fac=function(e){return new(e||t)(i["\u0275\u0275directiveInject"](a.FormBuilder))},t.\u0275cmp=i["\u0275\u0275defineComponent"]({type:t,selectors:[["tb-numeric-filter-predicate"]],inputs:{disabled:"disabled",allowUserDynamicSource:"allowUserDynamicSource",onlyUserDynamicSource:"onlyUserDynamicSource",valueType:"valueType"},features:[i["\u0275\u0275ProvidersFeature"]([{provide:a.NG_VALUE_ACCESSOR,useExisting:Object(i.forwardRef)((function(){return t})),multi:!0}])],decls:7,vars:8,consts:[["fxFlex","","fxLayout","row","fxLayoutAlign","start start","fxLayoutGap","8px",3,"formGroup"],["floatLabel","always","hideRequiredMarker","","fxFlex","30",1,"mat-block"],["required","","formControlName","operation",3,"placeholder"],[3,"value",4,"ngFor","ngForOf"],["fxFlex","70","formControlName","value",3,"allowUserDynamicSource","onlyUserDynamicSource","valueType"],[3,"value"]],template:function(t,e){1&t&&(i["\u0275\u0275elementStart"](0,"div",0),i["\u0275\u0275elementStart"](1,"mat-form-field",1),i["\u0275\u0275element"](2,"mat-label"),i["\u0275\u0275elementStart"](3,"mat-select",2),i["\u0275\u0275pipe"](4,"translate"),i["\u0275\u0275template"](5,m,3,4,"mat-option",3),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](6,"tb-filter-predicate-value",4),i["\u0275\u0275elementEnd"]()),2&t&&(i["\u0275\u0275property"]("formGroup",e.numericFilterPredicateFormGroup),i["\u0275\u0275advance"](3),i["\u0275\u0275propertyInterpolate"]("placeholder",i["\u0275\u0275pipeBind1"](4,6,"filter.operation.operation")),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngForOf",e.numericOperations),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("allowUserDynamicSource",e.allowUserDynamicSource)("onlyUserDynamicSource",e.onlyUserDynamicSource)("valueType",e.valueType))},directives:[o.b,o.f,o.e,o.g,a.NgControlStatusGroup,a.FormGroupDirective,s.MatFormField,s.MatLabel,l.MatSelect,a.RequiredValidator,a.NgControlStatus,a.FormControlName,c.NgForOf,d.a,p.MatOption],pipes:[u.TranslatePipe],styles:["[_nghost-%COMP%]   .tb-hint[_ngcontent-%COMP%], [_nghost-%COMP%]     mat-form-field .mat-form-field-wrapper{padding-bottom:0}[_nghost-%COMP%]     mat-form-field .mat-form-field-wrapper .mat-form-field-infix{border-top-width:.2em;width:auto;min-width:auto}[_nghost-%COMP%]     mat-form-field .mat-form-field-wrapper .mat-form-field-underline{bottom:0}"]}),t}();!function(){i["\u0275setClassMetadata"](f,[{type:i.Component,args:[{selector:"tb-numeric-filter-predicate",templateUrl:"./numeric-filter-predicate.component.html",styleUrls:["./filter-predicate.scss"],providers:[{provide:a.NG_VALUE_ACCESSOR,useExisting:Object(i.forwardRef)((function(){return f})),multi:!0}]}]}],(function(){return[{type:a.FormBuilder}]}),{disabled:[{type:i.Input}],allowUserDynamicSource:[{type:i.Input}],onlyUserDynamicSource:[{type:i.Input}],valueType:[{type:i.Input}]})}()},qxrw:function(t,e,n){"use strict";n.d(e,"c",(function(){return b})),n.d(e,"b",(function(){return v})),n.d(e,"a",(function(){return x})),n.d(e,"d",(function(){return C})),n.d(e,"e",(function(){return S}));var i=n("mrSG"),a=n("2Vo4"),r=n("jtHE"),o=n("LRne"),s=n("Duvn"),l=n("0EQZ"),c=n("vkgz"),d=n("JIr8"),p=n("lJxs"),u=n("w1tV"),m=n("IzEk"),f=function(){function t(t,e,n){this.fetchFunction=t,this.selectionEnabledFunction=e,this.dataLoadedFunction=n,this.entitiesSubject=new a.a([]),this.pageDataSubject=new a.a(Object(s.a)()),this.pageData$=this.pageDataSubject.asObservable(),this.selection=new l.SelectionModel(!0,[]),this.currentEntity=null,this.dataLoading=!0}return t.prototype.connect=function(t){return this.entitiesSubject.asObservable()},t.prototype.disconnect=function(t){this.entitiesSubject.complete(),this.pageDataSubject.complete()},t.prototype.reset=function(){var t=Object(s.a)();this.onEntities(t.data),this.pageDataSubject.next(t),this.dataLoadedFunction()},t.prototype.loadEntities=function(t){var e=this;this.dataLoading=!0;var n=new r.a;return this.fetchFunction(t).pipe(Object(c.a)((function(){e.selection.clear()})),Object(d.a)((function(){return Object(o.a)(Object(s.a)())}))).subscribe((function(t){e.onEntities(t.data),e.pageDataSubject.next(t),n.next(t),e.dataLoadedFunction(),e.dataLoading=!1})),n},t.prototype.onEntities=function(t){this.entitiesSubject.next(t)},t.prototype.isAllSelected=function(){var t=this,e=this.selection.selected.length;return this.entitiesSubject.pipe(Object(p.a)((function(n){return e===t.selectableEntitiesCount(n)})),Object(u.a)())},t.prototype.isEmpty=function(){return this.entitiesSubject.pipe(Object(p.a)((function(t){return!t.length})),Object(u.a)())},t.prototype.total=function(){return this.pageDataSubject.pipe(Object(p.a)((function(t){return t.totalElements})),Object(u.a)())},t.prototype.toggleCurrentEntity=function(t){return this.currentEntity!==t&&(this.currentEntity=t,!0)},t.prototype.isCurrentEntity=function(t){return this.currentEntity&&t&&this.currentEntity.id&&t.id&&this.currentEntity.id.id===t.id.id},t.prototype.masterToggle=function(){var t=this;this.entitiesSubject.pipe(Object(c.a)((function(e){t.selection.selected.length===t.selectableEntitiesCount(e)?t.selection.clear():e.forEach((function(e){t.selectionEnabledFunction(e)&&t.selection.select(e)}))})),Object(m.a)(1)).subscribe()},t.prototype.selectableEntitiesCount=function(t){var e=this;return t.filter((function(t){return e.selectionEnabledFunction(t)})).length},t}(),h=n("4r/P"),g=n("aX2P"),y=function(t,e,n,i,a,r,o){void 0===i&&(i="0px"),void 0===a&&(a=!0),void 0===r&&(r=!1),void 0===o&&(o=!1),this.type=t,this.key=e,this.title=n,this.width=i,this.sortable=a,this.ignoreTranslate=r,this.mobileHide=o},b=function(t){function e(e,n,i,a,r,o,s,l,c){void 0===i&&(i="0px"),void 0===a&&(a=function(t,e){return t[e]?t[e]:""}),void 0===r&&(r=function(){return{}}),void 0===o&&(o=!0),void 0===s&&(s=function(){return{}}),void 0===l&&(l=function(){}),void 0===c&&(c=!1);var d=t.call(this,"content",e,n,i,o)||this;return d.key=e,d.title=n,d.width=i,d.cellContentFunction=a,d.cellStyleFunction=r,d.sortable=o,d.headerCellStyleFunction=s,d.cellTooltipFunction=l,d.isNumberColumn=c,d}return Object(i.d)(e,t),e}(y),v=function(t){function e(e,n,i,a){void 0===a&&(a="0px");var r=t.call(this,"action",e,n,a,!1)||this;return r.key=e,r.title=n,r.actionDescriptor=i,r.width=a,r}return Object(i.d)(e,t),e}(y),x=function(t){function e(e,n,i,a,r,o){return void 0===a&&(a="0px"),void 0===r&&(r="yyyy-MM-dd HH:mm:ss"),void 0===o&&(o=function(){return{}}),t.call(this,e,n,a,(function(t,e){return i.transform(t[e],r)}),o)||this}return Object(i.d)(e,t),e}(b),C=function(){var t=this;this.componentsData=null,this.loadDataOnInit=!0,this.onLoadAction=null,this.table=null,this.useTimePageLink=!1,this.defaultTimewindowInterval=Object(g.H)(g.b),this.entityType=null,this.tableTitle="",this.selectionEnabled=!0,this.searchEnabled=!0,this.addEnabled=!0,this.entitiesDeleteEnabled=!0,this.detailsPanelEnabled=!0,this.hideDetailsTabsOnEdit=!0,this.actionsColumnTitle=null,this.addDialogStyle={},this.defaultSortOrder={property:"createdTime",direction:h.a.DESC},this.displayPagination=!0,this.defaultPageSize=10,this.columns=[],this.cellActionDescriptors=[],this.groupActionDescriptors=[],this.headerActionDescriptors=[],this.addActionDescriptors=[],this.addEntity=null,this.dataSource=function(e){return new f(t.entitiesFetchFunction,t.entitySelectionEnabled,e)},this.detailsReadonly=function(){return!1},this.entitySelectionEnabled=function(){return!0},this.deleteEnabled=function(){return!0},this.deleteEntityTitle=function(){return""},this.deleteEntityContent=function(){return""},this.deleteEntitiesTitle=function(){return""},this.deleteEntitiesContent=function(){return""},this.loadEntity=function(){return Object(o.a)()},this.saveEntity=function(t){return Object(o.a)(t)},this.deleteEntity=function(){return Object(o.a)()},this.entitiesFetchFunction=function(){return Object(o.a)(Object(s.a)())},this.onEntityAction=function(){return!1},this.handleRowClick=function(){return!1},this.entityTitle=function(t){return null==t?void 0:t.name},this.entityAdded=function(){},this.entityUpdated=function(){},this.entitiesDeleted=function(){}};function S(t){return'<mat-icon class="material-icons mat-icon">'+(t?"check_box":"check_box_outline_blank")+"</mat-icon>"}},"t+jE":function(t,e,n){"use strict";(function(t){n.d(e,"i",(function(){return u})),n.d(e,"j",(function(){return m})),n.d(e,"k",(function(){return f})),n.d(e,"f",(function(){return h})),n.d(e,"h",(function(){return g})),n.d(e,"a",(function(){return b})),n.d(e,"p",(function(){return w})),n.d(e,"e",(function(){return E})),n.d(e,"o",(function(){return I})),n.d(e,"m",(function(){return O})),n.d(e,"l",(function(){return T})),n.d(e,"n",(function(){return M})),n.d(e,"q",(function(){return F})),n.d(e,"g",(function(){return P})),n.d(e,"b",(function(){return D})),n.d(e,"d",(function(){return k})),n.d(e,"c",(function(){return j}));var i=n("mrSG"),a=n("//Q6"),r=n("HDdC"),o=n("LRne"),s=n("lJxs"),l=n("LvDl"),c=n.n(l),d=n("3QxM"),p=n("bHFI");function u(t,e){var n,a;void 0===e&&(e=!1);var r=c.a.cloneDeep(d.c);return t&&(r.schema.properties.provider.default=t),e&&(r.form[0].items=null===(n=r.form[0])||void 0===n?void 0:n.items.filter((function(t){return"image-map"!==t.value}))),Object(p.e)(Object(i.g)([r],null===(a=Object.keys(d.h))||void 0===a?void 0:a.map((function(t){var e=d.h[t];return Object(p.a)(null==e?void 0:e.schema,"model.provider === '"+e.name+"'")}))))}function m(t,e,n){return(n-t)/(e-t)}function f(t,e,n,i,a){var r;return(r={})[n]=t[n]+(e[n]-t[n])*a,r[i]=t[i]+(e[i]-t[i])*a,r}function h(t,e,n,i){if(Object(a.z)(t)||Object(a.z)(e))return 0;var r=-Math.atan2(e[n]-t[n],e[i]-t[i]);return r=180*r/Math.PI,parseInt(r.toFixed(2),10)}function g(t){return"string"==typeof t?t.split(","):"object"==typeof t?t:[0,0]}var y={};function b(t){if(null==t?void 0:t.length){var e=Object(a.l)(t),n=y[e];return n?Object(o.a)(n):function(t){return new r.a((function(e){var n=document.createElement("img");n.style.position="absolute",n.style.left="-99999px",n.style.top="-99999px",n.onload=function(){e.next(n),document.body.removeChild(n),e.complete()},n.onerror=function(t){e.error(t),document.body.removeChild(n),e.complete()},document.body.appendChild(n),n.src=t}))}(t).pipe(Object(s.a)((function(t){return n=t.width/t.height,y[e]=n,n})))}}var v=/<link-act name=['"]([^['"]*)['"]>([^<]*)<\/link-act>/g,x=/<button-act name=['"]([^['"]*)['"]>([^<]*)<\/button-act>/g;function C(t,e){return'<a href="javascript:void(0);" class="tb-custom-action" data-action-name='+t+">"+e+"</a>"}function S(t,e){return'<button mat-button class="tb-custom-action" data-action-name='+t+">"+e+"</button>"}function w(t,e){var n=[];try{for(var i=/\${([^}]*)}/g,a=i.exec(t);null!==a;){var r={dataKeyName:"",valDec:2,variable:""},o=a[0],s=a[1],l=2,c=s.split(":");if(c.length>1&&(s=c[0],l=parseFloat(c[1])),r.variable=o,r.valDec=l,s.startsWith("#")){var d=s.substring(1),p=Math.floor(Number(d));String(p)===d&&p>=0&&(r.dataKeyName=e.$datasource.dataKeys[p].label)}else r.dataKeyName=s;n.push(r),a=i.exec(t)}}catch(u){console.log(u,t)}return n}function E(t,e,n){var i=Object(a.d)(n.$datasource,t);if(e)for(var r=0,o=e;r<o.length;r++){var s=o[r],l="";if(s.dataKeyName&&Object(a.o)(n[s.dataKeyName])){var c=n[s.dataKeyName];l=Object(a.v)(c)?Object(a.H)(c,s.valDec):c}i=i.replace(s.variable,l)}return i}var I={translateFn:null,translate:function(t,e){if(this.translateFn)return this.translateFn(t,e);throw console.error("Translate not assigned")},parseTemplate:function(t,e,n){return void 0===n&&(n=!1),function(t,e,n){var i="";try{n&&(t=n(t)),t=Object(a.d)(e.$datasource,t);for(var r=/\${([^}]*)}/g.exec(t);null!==r;){var o=r[0],s=r[1],l=2,c=s.split(":");if(c.length>1&&(s=c[0],l=parseFloat(c[1])),s.startsWith("#")){var d=s.substring(1),p=Math.floor(Number(d));String(p)===d&&p>=0&&(s=e.$datasource.dataKeys[p].label)}var u=e[s]||"",m=void 0;m=Object(a.v)(u)?Object(a.H)(u,l):u,t=t.replace(o,m),r=/\${([^}]*)}/g.exec(t)}var f=void 0,h=void 0;for(r=v.exec(t);null!==r;)f=r[0],h=C(r[1],r[2]),t=t.replace(f,h),r=v.exec(t);for(r=x.exec(t);null!==r;)f=r[0],h=S(r[1],r[2]),t=t.replace(f,h),r=x.exec(t);i=t}catch(g){console.log(g,t)}return i}(n?this.translate(t):t,e,this.translate.bind(this))},prepareProcessPattern:function(t,e){return void 0===e&&(e=!1),function(t,e){var n,i;e&&(t=e(t));for(var a=v.exec(t);null!==a;)n=a[0],i=C(a[1],a[2]),t=t.replace(n,i),a=v.exec(t);for(a=x.exec(t);null!==a;)n=a[0],i=S(a[1],a[2]),t=t.replace(n,i),a=x.exec(t);return t}(e?this.translate(t):t,this.translate.bind(this))},setTranslate:function(t){this.translateFn=t}};function O(t){return c()(t).groupBy((function(t){var e;return null===(e=null==t?void 0:t.datasource)||void 0===e?void 0:e.entityName})).values().value().map((function(t,e){var n,i,a,r,o,s,l,c={entityName:null===(i=null===(n=t[0])||void 0===n?void 0:n.datasource)||void 0===i?void 0:i.entityName,entityId:null===(r=null===(a=t[0])||void 0===a?void 0:a.datasource)||void 0===r?void 0:r.entityId,entityType:null===(s=null===(o=t[0])||void 0===o?void 0:o.datasource)||void 0===s?void 0:s.entityType,$datasource:null===(l=t[0])||void 0===l?void 0:l.datasource,dsIndex:e,deviceType:null};return t.filter((function(t){return t.data.length})).forEach((function(t){var e,n,i,a,r=(null===(e=null==t?void 0:t.data)||void 0===e?void 0:e.length)?t.data.length-1:0;c[null===(n=null==t?void 0:t.dataKey)||void 0===n?void 0:n.label]=null==t?void 0:t.data[r][1],c[(null===(i=null==t?void 0:t.dataKey)||void 0===i?void 0:i.label)+"|ts"]=null==t?void 0:t.data[r][0],"type"===(null===(a=null==t?void 0:t.dataKey)||void 0===a?void 0:a.label)&&(c.deviceType=null==t?void 0:t.data[r][1])})),c}))}function T(t){return c()(t).groupBy((function(t){var e;return null===(e=null==t?void 0:t.datasource)||void 0===e?void 0:e.entityName})).values().value().map((function(t){return t[0].data.map((function(e,n){var i,a,r,o,s,l,c,d={entityName:null===(a=null===(i=t[0])||void 0===i?void 0:i.datasource)||void 0===a?void 0:a.entityName,entityId:null===(o=null===(r=t[0])||void 0===r?void 0:r.datasource)||void 0===o?void 0:o.entityId,entityType:null===(l=null===(s=t[0])||void 0===s?void 0:s.datasource)||void 0===l?void 0:l.entityType,$datasource:null===(c=t[0])||void 0===c?void 0:c.datasource,dsIndex:n,time:e[0],deviceType:null};return t.filter((function(t){return t.data.length&&t.data[n]})).forEach((function(t){var e,i,a;d[null===(e=null==t?void 0:t.dataKey)||void 0===e?void 0:e.label]=null==t?void 0:t.data[n][1],d[(null===(i=null==t?void 0:t.dataKey)||void 0===i?void 0:i.label)+"|ts"]=null==t?void 0:t.data[0][0],"type"===(null===(a=null==t?void 0:t.dataKey)||void 0===a?void 0:a.label)&&(d.deviceType=null==t?void 0:t.data[0][1])})),d}))}))}function M(t,e){void 0===e&&(e=["def"]);var n=null;if(null==t?void 0:t.length)try{n=new(Function.bind.apply(Function,Object(i.g)([void 0],e,[t])))}catch(a){n=null}return n}function F(t,e){void 0===e&&(e=[]);var n=null;if(t&&"function"==typeof t)try{n=t.apply(void 0,e)}catch(i){console.log("error in external function:",i),n=null}return n}function P(t,e,n,i){var r;if(void 0===n&&(n=[]),t&&Object(a.n)(e)&&Object(a.s)(e))try{r=e.apply(void 0,n),Object(a.o)(r)&&""!==r||(r=i)}catch(o){r=i,console.log("error in external function:",o)}else r=i;return r}function D(t,e){var n=t/e;return n<0?n=0:n>1&&(n=1),n}function k(e){return t('\n    <div style="\n          z-index: 12;\n          position: absolute;\n          top: 0;\n          bottom: 0;\n          left: 0;\n          right: 0;\n          flex-direction: column;\n          align-content: center;\n          align-items: center;\n          justify-content: center;\n          display: flex;\n          background: rgba(255,255,255,0.7);\n          font-size: 16px;\n          font-family: Roboto;\n          font-weight: 400;\n          text-transform:  uppercase;\n        ">\n        <span>'+e+"</span>\n    </div>\n  ")}function j(t,e,n,i){void 0===i&&(i=0);var a=n.lng-i,r=e.lng+i,o=n.lat-i,s=e.lat+i;return t.lng>a?t.lng=a:t.lng<r&&(t.lng=r),t.lat>o?t.lat=o:t.lat<s&&(t.lat=s),t}}).call(this,n("xexB"))},tM37:function(t,e,n){"use strict";n.d(e,"a",(function(){return T}));var i=n("mrSG"),a=n("fXoL"),r=n("FKr1"),o=n("0IaG"),s=n("3Pt+"),l=n("DaoB"),c=n("U3y+"),d=n("cp0P"),p=n("1y+p"),u=n("j37L"),m=n("YnEf"),f=n("gmuX"),h=n("l7P3"),g=n("tyNb"),y=n("/t3+"),b=n("XiUz"),v=n("bTqV"),x=n("NFeN"),C=n("ofXK"),S=n("EdYI"),w=n("bv9b"),E=n("sYmb");function I(t,e){1&t&&a["\u0275\u0275element"](0,"mat-progress-bar",13)}function O(t,e){1&t&&a["\u0275\u0275element"](0,"div",14)}var T=function(t){function e(e,n,i,a,r,o,s,l,c,d){var p=t.call(this,e,n,c)||this;return p.store=e,p.router=n,p.data=i,p.deviceService=a,p.assetService=r,p.entityViewService=o,p.dashboardService=s,p.errorStateMatcher=l,p.dialogRef=c,p.fb=d,p.submitted=!1,p.entityType=i.entityType,p}return Object(i.d)(e,t),e.prototype.ngOnInit=function(){switch(this.addEntitiesToCustomerFormGroup=this.fb.group({entityIds:[null,[s.Validators.required]]}),this.data.entityType){case c.b.DEVICE:this.assignToCustomerTitle="device.assign-device-to-customer",this.assignToCustomerText="device.assign-device-to-customer-text";break;case c.b.ASSET:this.assignToCustomerTitle="asset.assign-asset-to-customer",this.assignToCustomerText="asset.assign-asset-to-customer-text";break;case c.b.ENTITY_VIEW:this.assignToCustomerTitle="entity-view.assign-entity-view-to-customer",this.assignToCustomerText="entity-view.assign-entity-view-to-customer-text";break;case c.b.DASHBOARD:this.assignToCustomerTitle="dashboard.assign-dashboard-to-customer",this.assignToCustomerText="dashboard.assign-dashboard-to-customer-text"}},e.prototype.isErrorState=function(t,e){var n=this.errorStateMatcher.isErrorState(t,e),i=!!(t&&t.invalid&&this.submitted);return n||i},e.prototype.cancel=function(){this.dialogRef.close(!1)},e.prototype.assign=function(){var t=this;this.submitted=!0;var e=this.addEntitiesToCustomerFormGroup.get("entityIds").value,n=[];e.forEach((function(e){n.push(t.getAssignToCustomerTask(t.data.customerId,e))})),Object(d.a)(n).subscribe((function(){t.dialogRef.close(!0)}))},e.prototype.getAssignToCustomerTask=function(t,e){switch(this.data.entityType){case c.b.DEVICE:return this.deviceService.assignDeviceToCustomer(t,e);case c.b.ASSET:return this.assetService.assignAssetToCustomer(t,e);case c.b.ENTITY_VIEW:return this.entityViewService.assignEntityViewToCustomer(t,e);case c.b.DASHBOARD:return this.dashboardService.assignDashboardToCustomer(t,e)}},e.\u0275fac=function(t){return new(t||e)(a["\u0275\u0275directiveInject"](h.Store),a["\u0275\u0275directiveInject"](g.Router),a["\u0275\u0275directiveInject"](o.MAT_DIALOG_DATA),a["\u0275\u0275directiveInject"](l.a),a["\u0275\u0275directiveInject"](p.a),a["\u0275\u0275directiveInject"](u.a),a["\u0275\u0275directiveInject"](m.a),a["\u0275\u0275directiveInject"](r.ErrorStateMatcher,4),a["\u0275\u0275directiveInject"](o.MatDialogRef),a["\u0275\u0275directiveInject"](s.FormBuilder))},e.\u0275cmp=a["\u0275\u0275defineComponent"]({type:e,selectors:[["tb-add-entities-to-customer-dialog"]],features:[a["\u0275\u0275ProvidersFeature"]([{provide:r.ErrorStateMatcher,useExisting:e}]),a["\u0275\u0275InheritDefinitionFeature"]],decls:29,vars:29,consts:[[3,"formGroup","ngSubmit"],["color","primary"],["fxFlex",""],["mat-button","","mat-icon-button","","type","button",3,"click"],[1,"material-icons"],["color","warn","mode","indeterminate",4,"ngIf"],["style","height: 4px;",4,"ngIf"],["mat-dialog-content",""],[3,"disabled"],["formControlName","entityIds","required","",3,"entityType"],["mat-dialog-actions","","fxLayoutAlign","end center"],["mat-button","","color","primary","type","button","cdkFocusInitial","",3,"disabled","click"],["mat-raised-button","","color","primary","type","submit",3,"disabled"],["color","warn","mode","indeterminate"],[2,"height","4px"]],template:function(t,e){1&t&&(a["\u0275\u0275elementStart"](0,"form",0),a["\u0275\u0275listener"]("ngSubmit",(function(){return e.assign()})),a["\u0275\u0275elementStart"](1,"mat-toolbar",1),a["\u0275\u0275elementStart"](2,"h2"),a["\u0275\u0275text"](3),a["\u0275\u0275pipe"](4,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](5,"span",2),a["\u0275\u0275elementStart"](6,"button",3),a["\u0275\u0275listener"]("click",(function(){return e.cancel()})),a["\u0275\u0275elementStart"](7,"mat-icon",4),a["\u0275\u0275text"](8,"close"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275template"](9,I,1,0,"mat-progress-bar",5),a["\u0275\u0275pipe"](10,"async"),a["\u0275\u0275template"](11,O,1,0,"div",6),a["\u0275\u0275pipe"](12,"async"),a["\u0275\u0275elementStart"](13,"div",7),a["\u0275\u0275elementStart"](14,"fieldset",8),a["\u0275\u0275pipe"](15,"async"),a["\u0275\u0275elementStart"](16,"span"),a["\u0275\u0275text"](17),a["\u0275\u0275pipe"](18,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](19,"tb-entity-list",9),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](20,"div",10),a["\u0275\u0275elementStart"](21,"button",11),a["\u0275\u0275listener"]("click",(function(){return e.cancel()})),a["\u0275\u0275pipe"](22,"async"),a["\u0275\u0275text"](23),a["\u0275\u0275pipe"](24,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](25,"button",12),a["\u0275\u0275pipe"](26,"async"),a["\u0275\u0275text"](27),a["\u0275\u0275pipe"](28,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()),2&t&&(a["\u0275\u0275property"]("formGroup",e.addEntitiesToCustomerFormGroup),a["\u0275\u0275advance"](3),a["\u0275\u0275textInterpolate"](a["\u0275\u0275pipeBind1"](4,11,e.assignToCustomerTitle)),a["\u0275\u0275advance"](6),a["\u0275\u0275property"]("ngIf",a["\u0275\u0275pipeBind1"](10,13,e.isLoading$)),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("ngIf",!a["\u0275\u0275pipeBind1"](12,15,e.isLoading$)),a["\u0275\u0275advance"](3),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](15,17,e.isLoading$)),a["\u0275\u0275advance"](3),a["\u0275\u0275textInterpolate"](a["\u0275\u0275pipeBind1"](18,19,e.assignToCustomerText)),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("entityType",e.entityType),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](22,21,e.isLoading$)),a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](24,23,"action.cancel")," "),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](26,25,e.isLoading$)||e.addEntitiesToCustomerFormGroup.invalid||!e.addEntitiesToCustomerFormGroup.dirty),a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](28,27,"action.assign")," "))},directives:[s["\u0275angular_packages_forms_forms_y"],s.NgControlStatusGroup,s.FormGroupDirective,y.MatToolbar,b.b,v.MatButton,x.MatIcon,C.NgIf,o.MatDialogContent,S.a,s.NgControlStatus,s.FormControlName,s.RequiredValidator,o.MatDialogActions,b.e,w.MatProgressBar],pipes:[E.TranslatePipe,C.AsyncPipe],encapsulation:2}),e}(f.a);!function(){a["\u0275setClassMetadata"](T,[{type:a.Component,args:[{selector:"tb-add-entities-to-customer-dialog",templateUrl:"./add-entities-to-customer-dialog.component.html",providers:[{provide:r.ErrorStateMatcher,useExisting:T}],styleUrls:[]}]}],(function(){return[{type:h.Store},{type:g.Router},{type:void 0,decorators:[{type:a.Inject,args:[o.MAT_DIALOG_DATA]}]},{type:l.a},{type:p.a},{type:u.a},{type:m.a},{type:r.ErrorStateMatcher,decorators:[{type:a.SkipSelf}]},{type:o.MatDialogRef},{type:s.FormBuilder}]}),null)}()},txsh:function(t,e,n){"use strict";n.d(e,"a",(function(){return d}));var i=n("mrSG"),a=n("0IaG"),r=n("fXoL"),o=n("gmuX"),s=n("llUh"),l=n("l7P3"),c=n("tyNb"),d=function(t){function e(e,n,o,l,c){var d=t.call(this,e,n,l)||this;d.store=e,d.router=n,d.viewContainerRef=o,d.dialogRef=l,d.data=c,d.height="0px";var p={controller:d.data.controller};d.data.data&&(p=Object(i.a)(Object(i.a)({},p),d.data.data));var u=r.Injector.create({providers:[{provide:s.a,useValue:p},{provide:a.MatDialogRef,useValue:l}]});return d.customComponentRef=d.viewContainerRef.createComponent(d.data.customComponentFactory,0,u),d}return Object(i.d)(e,t),e.prototype.ngOnDestroy=function(){t.prototype.ngOnDestroy.call(this),this.customComponentRef&&this.customComponentRef.destroy()},e.\u0275fac=function(t){return new(t||e)(r["\u0275\u0275directiveInject"](l.Store),r["\u0275\u0275directiveInject"](c.Router),r["\u0275\u0275directiveInject"](r.ViewContainerRef),r["\u0275\u0275directiveInject"](a.MatDialogRef),r["\u0275\u0275directiveInject"](a.MAT_DIALOG_DATA))},e.\u0275cmp=r["\u0275\u0275defineComponent"]({type:e,selectors:[["tb-custom-dialog-container-component"]],hostVars:2,hostBindings:function(t,e){2&t&&r["\u0275\u0275styleProp"]("height",e.height)},features:[r["\u0275\u0275InheritDefinitionFeature"]],decls:0,vars:0,template:function(t,e){},encapsulation:2}),e}(o.a);!function(){r["\u0275setClassMetadata"](d,[{type:r.Component,args:[{selector:"tb-custom-dialog-container-component",template:""}]}],(function(){return[{type:l.Store},{type:c.Router},{type:r.ViewContainerRef},{type:a.MatDialogRef},{type:void 0,decorators:[{type:r.Inject,args:[a.MAT_DIALOG_DATA]}]}]}),{height:[{type:r.HostBinding,args:["style.height"]}]})}()},uPsX:function(t,e,n){"use strict";n.d(e,"a",(function(){return O}));var i=n("mrSG"),a=n("fXoL"),r=n("FKr1"),o=n("0IaG"),s=n("3Pt+"),l=n("DaoB"),c=n("U3y+"),d=n("cp0P"),p=n("1y+p"),u=n("j37L"),m=n("gmuX"),f=n("l7P3"),h=n("tyNb"),g=n("/t3+"),y=n("XiUz"),b=n("bTqV"),v=n("NFeN"),x=n("ofXK"),C=n("TSBb"),S=n("bv9b"),w=n("sYmb");function E(t,e){1&t&&a["\u0275\u0275element"](0,"mat-progress-bar",14)}function I(t,e){1&t&&a["\u0275\u0275element"](0,"div",15)}var O=function(t){function e(e,n,i,a,r,o,s,l,d){var p=t.call(this,e,n,l)||this;return p.store=e,p.router=n,p.data=i,p.deviceService=a,p.assetService=r,p.entityViewService=o,p.errorStateMatcher=s,p.dialogRef=l,p.fb=d,p.submitted=!1,p.entityType=c.b,p}return Object(i.d)(e,t),e.prototype.ngOnInit=function(){switch(this.assignToCustomerFormGroup=this.fb.group({customerId:[null,[s.Validators.required]]}),this.data.entityType){case c.b.DEVICE:this.assignToCustomerTitle="device.assign-device-to-customer",this.assignToCustomerText="device.assign-to-customer-text";break;case c.b.ASSET:this.assignToCustomerTitle="asset.assign-asset-to-customer",this.assignToCustomerText="asset.assign-to-customer-text";break;case c.b.ENTITY_VIEW:this.assignToCustomerTitle="entity-view.assign-entity-view-to-customer",this.assignToCustomerText="entity-view.assign-to-customer-text"}},e.prototype.isErrorState=function(t,e){var n=this.errorStateMatcher.isErrorState(t,e),i=!!(t&&t.invalid&&this.submitted);return n||i},e.prototype.cancel=function(){this.dialogRef.close(!1)},e.prototype.assign=function(){var t=this;this.submitted=!0;var e=this.assignToCustomerFormGroup.get("customerId").value,n=[];this.data.entityIds.forEach((function(i){n.push(t.getAssignToCustomerTask(e,i.id))})),Object(d.a)(n).subscribe((function(){t.dialogRef.close(!0)}))},e.prototype.getAssignToCustomerTask=function(t,e){switch(this.data.entityType){case c.b.DEVICE:return this.deviceService.assignDeviceToCustomer(t,e);case c.b.ASSET:return this.assetService.assignAssetToCustomer(t,e);case c.b.ENTITY_VIEW:return this.entityViewService.assignEntityViewToCustomer(t,e)}},e.\u0275fac=function(t){return new(t||e)(a["\u0275\u0275directiveInject"](f.Store),a["\u0275\u0275directiveInject"](h.Router),a["\u0275\u0275directiveInject"](o.MAT_DIALOG_DATA),a["\u0275\u0275directiveInject"](l.a),a["\u0275\u0275directiveInject"](p.a),a["\u0275\u0275directiveInject"](u.a),a["\u0275\u0275directiveInject"](r.ErrorStateMatcher,4),a["\u0275\u0275directiveInject"](o.MatDialogRef),a["\u0275\u0275directiveInject"](s.FormBuilder))},e.\u0275cmp=a["\u0275\u0275defineComponent"]({type:e,selectors:[["tb-assign-to-customer-dialog"]],features:[a["\u0275\u0275ProvidersFeature"]([{provide:r.ErrorStateMatcher,useExisting:e}]),a["\u0275\u0275InheritDefinitionFeature"]],decls:29,vars:29,consts:[[3,"formGroup","ngSubmit"],["color","primary"],["fxFlex",""],["mat-button","","mat-icon-button","","type","button",3,"click"],[1,"material-icons"],["color","warn","mode","indeterminate",4,"ngIf"],["style","height: 4px;",4,"ngIf"],["mat-dialog-content",""],[3,"disabled"],[2,"padding-bottom","0.5em"],["formControlName","customerId","required","",3,"entityType"],["mat-dialog-actions","","fxLayout","row","fxLayoutAlign","end center"],["mat-button","","color","primary","type","button","cdkFocusInitial","",3,"disabled","click"],["mat-raised-button","","color","primary","type","submit",3,"disabled"],["color","warn","mode","indeterminate"],[2,"height","4px"]],template:function(t,e){1&t&&(a["\u0275\u0275elementStart"](0,"form",0),a["\u0275\u0275listener"]("ngSubmit",(function(){return e.assign()})),a["\u0275\u0275elementStart"](1,"mat-toolbar",1),a["\u0275\u0275elementStart"](2,"h2"),a["\u0275\u0275text"](3),a["\u0275\u0275pipe"](4,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](5,"span",2),a["\u0275\u0275elementStart"](6,"button",3),a["\u0275\u0275listener"]("click",(function(){return e.cancel()})),a["\u0275\u0275elementStart"](7,"mat-icon",4),a["\u0275\u0275text"](8,"close"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275template"](9,E,1,0,"mat-progress-bar",5),a["\u0275\u0275pipe"](10,"async"),a["\u0275\u0275template"](11,I,1,0,"div",6),a["\u0275\u0275pipe"](12,"async"),a["\u0275\u0275elementStart"](13,"div",7),a["\u0275\u0275elementStart"](14,"fieldset",8),a["\u0275\u0275pipe"](15,"async"),a["\u0275\u0275elementStart"](16,"div",9),a["\u0275\u0275text"](17),a["\u0275\u0275pipe"](18,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275element"](19,"tb-entity-autocomplete",10),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](20,"div",11),a["\u0275\u0275elementStart"](21,"button",12),a["\u0275\u0275listener"]("click",(function(){return e.cancel()})),a["\u0275\u0275pipe"](22,"async"),a["\u0275\u0275text"](23),a["\u0275\u0275pipe"](24,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](25,"button",13),a["\u0275\u0275pipe"](26,"async"),a["\u0275\u0275text"](27),a["\u0275\u0275pipe"](28,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()),2&t&&(a["\u0275\u0275property"]("formGroup",e.assignToCustomerFormGroup),a["\u0275\u0275advance"](3),a["\u0275\u0275textInterpolate"](a["\u0275\u0275pipeBind1"](4,11,e.assignToCustomerTitle)),a["\u0275\u0275advance"](6),a["\u0275\u0275property"]("ngIf",a["\u0275\u0275pipeBind1"](10,13,e.isLoading$)),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("ngIf",!a["\u0275\u0275pipeBind1"](12,15,e.isLoading$)),a["\u0275\u0275advance"](3),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](15,17,e.isLoading$)),a["\u0275\u0275advance"](3),a["\u0275\u0275textInterpolate"](a["\u0275\u0275pipeBind1"](18,19,e.assignToCustomerText)),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("entityType",e.entityType.CUSTOMER),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](22,21,e.isLoading$)),a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](24,23,"action.cancel")," "),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](26,25,e.isLoading$)||e.assignToCustomerFormGroup.invalid||!e.assignToCustomerFormGroup.dirty),a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](28,27,"action.assign")," "))},directives:[s["\u0275angular_packages_forms_forms_y"],s.NgControlStatusGroup,s.FormGroupDirective,g.MatToolbar,y.b,b.MatButton,v.MatIcon,x.NgIf,o.MatDialogContent,C.a,s.NgControlStatus,s.FormControlName,s.RequiredValidator,o.MatDialogActions,y.f,y.e,S.MatProgressBar],pipes:[w.TranslatePipe,x.AsyncPipe],encapsulation:2}),e}(m.a);!function(){a["\u0275setClassMetadata"](O,[{type:a.Component,args:[{selector:"tb-assign-to-customer-dialog",templateUrl:"./assign-to-customer-dialog.component.html",providers:[{provide:r.ErrorStateMatcher,useExisting:O}],styleUrls:[]}]}],(function(){return[{type:f.Store},{type:h.Router},{type:void 0,decorators:[{type:a.Inject,args:[o.MAT_DIALOG_DATA]}]},{type:l.a},{type:p.a},{type:u.a},{type:r.ErrorStateMatcher,decorators:[{type:a.SkipSelf}]},{type:o.MatDialogRef},{type:s.FormBuilder}]}),null)}()},"vY+p":function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var i=new(n("fXoL").InjectionToken)("EMBED_DASHBOARD_DIALOG_TOKEN")},vnPf:function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var i=n("fXoL"),a=n("Y8nr"),r=n("tk/3"),o=function(){function t(t){this.http=t}return t.prototype.getTenantProfiles=function(t,e){return this.http.get("/api/tenantProfiles"+t.toQuery(),Object(a.b)(e))},t.prototype.getTenantProfile=function(t,e){return this.http.get("/api/tenantProfile/"+t,Object(a.b)(e))},t.prototype.saveTenantProfile=function(t,e){return this.http.post("/api/tenantProfile",t,Object(a.b)(e))},t.prototype.deleteTenantProfile=function(t,e){return this.http.delete("/api/tenantProfile/"+t,Object(a.b)(e))},t.prototype.setDefaultTenantProfile=function(t,e){return this.http.post("/api/tenantProfile/"+t+"/default",Object(a.b)(e))},t.prototype.getDefaultTenantProfileInfo=function(t){return this.http.get("/api/tenantProfileInfo/default",Object(a.b)(t))},t.prototype.getTenantProfileInfo=function(t,e){return this.http.get("/api/tenantProfileInfo/"+t,Object(a.b)(e))},t.prototype.getTenantProfileInfos=function(t,e){return this.http.get("/api/tenantProfileInfos"+t.toQuery(),Object(a.b)(e))},t.\u0275fac=function(e){return new(e||t)(i["\u0275\u0275inject"](r.b))},t.\u0275prov=i["\u0275\u0275defineInjectable"]({token:t,factory:t.\u0275fac,providedIn:"root"}),t}();!function(){i["\u0275setClassMetadata"](o,[{type:i.Injectable,args:[{providedIn:"root"}]}],(function(){return[{type:r.b}]}),null)}()},wIJ8:function(t,e,n){"use strict";n.d(e,"a",(function(){return y}));var i=n("fXoL"),a=n("rDax"),r=n("+rOU"),o=n("0dMK"),s=n("//Q6"),l=n("MBk6"),c=n("sYmb"),d=n("0MNC"),p=n("XiUz"),u=n("bTqV"),m=n("Qu3c"),f=n("NFeN"),h=n("znSr"),g=["aliasEntitySelectPanelOrigin"],y=function(){function t(t,e,n,i){this.translate=t,this.overlay=e,this.breakpointObserver=n,this.viewContainerRef=i,this.tooltipPosition="above",this.entityAliasesInfo={},this.hasSelectableAliasEntities=!1,this.rxSubscriptions=new Array}return Object.defineProperty(t.prototype,"aliasController",{get:function(){return this.aliasControllerValue},set:function(t){this.aliasControllerValue=t,this.setupAliasController(this.aliasControllerValue)},enumerable:!1,configurable:!0}),t.prototype.setupAliasController=function(t){var e=this;this.rxSubscriptions.forEach((function(t){t.unsubscribe()})),this.rxSubscriptions.length=0,t&&(this.rxSubscriptions.push(t.entityAliasesChanged.subscribe((function(){setTimeout((function(){e.updateDisplayValue(),e.updateEntityAliasesInfo()}),0)}))),this.rxSubscriptions.push(t.entityAliasResolved.subscribe((function(){setTimeout((function(){e.updateDisplayValue(),e.updateEntityAliasesInfo()}),0)}))))},t.prototype.ngOnInit=function(){},t.prototype.ngOnDestroy=function(){this.rxSubscriptions.forEach((function(t){t.unsubscribe()})),this.rxSubscriptions.length=0},t.prototype.openEditMode=function(){if(!this.disabled&&this.hasSelectableAliasEntities){var t=this.overlay.position(),e=new a.OverlayConfig({panelClass:"tb-aliases-entity-select-panel",backdropClass:"cdk-overlay-transparent-backdrop",hasBackdrop:!0});e.positionStrategy=t.flexibleConnectedTo(this.aliasEntitySelectPanelOrigin.elementRef).withPositions([{originX:"start",originY:"bottom",overlayX:"start",overlayY:"top"}]);var n=this.overlay.create(e);n.backdropClick().subscribe((function(){n.dispose()}));var i=this._createAliasesEntitySelectPanelInjector(n,{aliasController:this.aliasController,entityAliasesInfo:Object(s.e)(this.entityAliasesInfo)});n.attach(new r.ComponentPortal(o.b,this.viewContainerRef,i))}},t.prototype._createAliasesEntitySelectPanelInjector=function(t,e){var n=[{provide:o.a,useValue:e},{provide:a.OverlayRef,useValue:t}];return i.Injector.create({parent:this.viewContainerRef.injector,providers:n})},t.prototype.updateDisplayValue=function(){for(var t,e,n=!0,i=this.aliasController.getEntityAliases(),a=0,r=Object.keys(i);a<r.length;a++){var o=r[a];if(!i[o].filter.resolveMultiple){var s=this.aliasController.getInstantAliasInfo(o);if(s&&s.currentEntity){if(e){n=!1;break}e=o}}}n&&e?t=this.aliasController.getInstantAliasInfo(e).currentEntity.name:t=this.translate.instant("entity.entities");this.displayValue=t},t.prototype.updateEntityAliasesInfo=function(){var t=this.aliasController.getEntityAliases();this.entityAliasesInfo={},this.hasSelectableAliasEntities=!1;for(var e=0,n=Object.keys(t);e<n.length;e++){var i=n[e],a=this.aliasController.getInstantAliasInfo(i);a&&!a.resolveMultiple&&a.currentEntity&&a.entityFilter&&a.entityFilter.type!==l.a.singleEntity&&(this.entityAliasesInfo[i]=Object(s.e)(a),this.hasSelectableAliasEntities=!0)}},t.\u0275fac=function(e){return new(e||t)(i["\u0275\u0275directiveInject"](c.TranslateService),i["\u0275\u0275directiveInject"](a.Overlay),i["\u0275\u0275directiveInject"](d.BreakpointObserver),i["\u0275\u0275directiveInject"](i.ViewContainerRef))},t.\u0275cmp=i["\u0275\u0275defineComponent"]({type:t,selectors:[["tb-aliases-entity-select"]],viewQuery:function(t,e){var n;(1&t&&i["\u0275\u0275viewQuery"](g,!0),2&t)&&(i["\u0275\u0275queryRefresh"](n=i["\u0275\u0275loadQuery"]())&&(e.aliasEntitySelectPanelOrigin=n.first))},inputs:{aliasController:"aliasController",tooltipPosition:"tooltipPosition",disabled:"disabled"},decls:9,vars:9,consts:[["fxLayout","row","fxLayoutAlign","start center",1,"tb-aliases-entity-select"],["mat-icon-button","","cdkOverlayOrigin","",3,"matTooltip","matTooltipPosition","click"],["aliasEntitySelectPanelOrigin","cdkOverlayOrigin"],[1,"material-icons"],["fxHide.lt-lg","",3,"matTooltip","matTooltipPosition","click"]],template:function(t,e){1&t&&(i["\u0275\u0275elementStart"](0,"section",0),i["\u0275\u0275elementStart"](1,"button",1,2),i["\u0275\u0275listener"]("click",(function(){return e.openEditMode()})),i["\u0275\u0275pipe"](3,"translate"),i["\u0275\u0275elementStart"](4,"mat-icon",3),i["\u0275\u0275text"](5,"devices_other"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](6,"span",4),i["\u0275\u0275listener"]("click",(function(){return e.openEditMode()})),i["\u0275\u0275pipe"](7,"translate"),i["\u0275\u0275text"](8),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()),2&t&&(i["\u0275\u0275advance"](1),i["\u0275\u0275propertyInterpolate"]("matTooltip",e.hasSelectableAliasEntities?i["\u0275\u0275pipeBind1"](3,5,"entity.select-entities"):""),i["\u0275\u0275property"]("matTooltipPosition",e.tooltipPosition),i["\u0275\u0275advance"](5),i["\u0275\u0275propertyInterpolate"]("matTooltip",e.hasSelectableAliasEntities?i["\u0275\u0275pipeBind1"](7,7,"entity.select-entities"):""),i["\u0275\u0275property"]("matTooltipPosition",e.tooltipPosition),i["\u0275\u0275advance"](2),i["\u0275\u0275textInterpolate1"](" ",e.displayValue," "))},directives:[p.f,p.e,u.MatButton,a.CdkOverlayOrigin,m.MatTooltip,f.MatIcon,h.d],pipes:[c.TranslatePipe],styles:["[_nghost-%COMP%]{min-width:52px}[_nghost-%COMP%]   section.tb-aliases-entity-select[_ngcontent-%COMP%]{min-height:32px;padding:0 6px}@media screen and (max-width:959px){[_nghost-%COMP%]   section.tb-aliases-entity-select[_ngcontent-%COMP%]{padding:0}}[_nghost-%COMP%]   section.tb-aliases-entity-select[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{max-width:200px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;pointer-events:all;cursor:pointer}"]}),t}();!function(){i["\u0275setClassMetadata"](y,[{type:i.Component,args:[{selector:"tb-aliases-entity-select",templateUrl:"./aliases-entity-select.component.html",styleUrls:["./aliases-entity-select.component.scss"]}]}],(function(){return[{type:c.TranslateService},{type:a.Overlay},{type:d.BreakpointObserver},{type:i.ViewContainerRef}]}),{aliasController:[{type:i.Input}],tooltipPosition:[{type:i.Input}],disabled:[{type:i.Input}],aliasEntitySelectPanelOrigin:[{type:i.ViewChild,args:["aliasEntitySelectPanelOrigin"]}]})}()},wSoN:function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var i=n("fXoL"),a=n("Y8nr"),r=n("tk/3"),o=function(){function t(t){this.http=t}return t.prototype.getOAuth2Settings=function(t){return this.http.get("/api/oauth2/config",Object(a.b)(t))},t.prototype.getOAuth2Template=function(t){return this.http.get("/api/oauth2/config/template",Object(a.b)(t))},t.prototype.saveOAuth2Settings=function(t,e){return this.http.post("/api/oauth2/config",t,Object(a.b)(e))},t.prototype.getLoginProcessingUrl=function(t){return this.http.get("/api/oauth2/loginProcessingUrl",Object(a.b)(t))},t.\u0275fac=function(e){return new(e||t)(i["\u0275\u0275inject"](r.b))},t.\u0275prov=i["\u0275\u0275defineInjectable"]({token:t,factory:t.\u0275fac,providedIn:"root"}),t}();!function(){i["\u0275setClassMetadata"](o,[{type:i.Injectable,args:[{providedIn:"root"}]}],(function(){return[{type:r.b}]}),null)}()},wst2:function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var i=n("fXoL"),a=n("ofXK"),r=n("PCNd"),o=n("10j8"),s=function(){function t(){}return t.\u0275mod=i["\u0275\u0275defineNgModule"]({type:t}),t.\u0275inj=i["\u0275\u0275defineInjector"]({factory:function(e){return new(e||t)},imports:[[a.CommonModule,r.a]]}),t}();void(("undefined"==typeof ngJitMode||ngJitMode)&&i["\u0275\u0275setNgModuleScope"](s,{declarations:[o.a],imports:[a.CommonModule,r.a],exports:[o.a]}))},x7Md:function(t,e,n){"use strict";n.d(e,"a",(function(){return S}));var i=n("mrSG"),a=n("fXoL"),r=n("rDax"),o=n("//Q6"),s=n("xw5a"),l=n("xze0"),c=n("+rOU"),d=n("A1kC"),p=n("sYmb"),u=n("0MNC"),m=n("0IaG"),f=n("ofXK"),h=n("XiUz"),g=n("bTqV"),y=n("Qu3c"),b=n("NFeN"),v=n("znSr"),x=["filtersEditPanelOrigin"];function C(t,e){if(1&t){var n=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementStart"](0,"section",1),a["\u0275\u0275elementStart"](1,"button",2,3),a["\u0275\u0275listener"]("click",(function(){return a["\u0275\u0275restoreView"](n),a["\u0275\u0275nextContext"]().openEditMode()})),a["\u0275\u0275pipe"](3,"translate"),a["\u0275\u0275elementStart"](4,"mat-icon"),a["\u0275\u0275text"](5,"filter_list"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](6,"span",4),a["\u0275\u0275listener"]("click",(function(){return a["\u0275\u0275restoreView"](n),a["\u0275\u0275nextContext"]().openEditMode()})),a["\u0275\u0275pipe"](7,"translate"),a["\u0275\u0275text"](8),a["\u0275\u0275pipe"](9,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()}if(2&t){var i=a["\u0275\u0275nextContext"]();a["\u0275\u0275advance"](1),a["\u0275\u0275propertyInterpolate"]("matTooltip",a["\u0275\u0275pipeBind1"](3,5,"filter.filters")),a["\u0275\u0275property"]("matTooltipPosition",i.tooltipPosition),a["\u0275\u0275advance"](5),a["\u0275\u0275propertyInterpolate"]("matTooltip",a["\u0275\u0275pipeBind1"](7,7,"filter.filters")),a["\u0275\u0275property"]("matTooltipPosition",i.tooltipPosition),a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate1"](" ",a["\u0275\u0275pipeBind1"](9,9,"filter.filters")," ")}}var S=function(){function t(t,e,n,i,a){this.translate=t,this.overlay=e,this.breakpointObserver=n,this.viewContainerRef=i,this.dialog=a,this.tooltipPosition="above",this.filtersInfo={},this.hasEditableFilters=!1,this.rxSubscriptions=new Array}return Object.defineProperty(t.prototype,"aliasController",{get:function(){return this.aliasControllerValue},set:function(t){this.aliasControllerValue=t,this.setupAliasController(this.aliasControllerValue)},enumerable:!1,configurable:!0}),t.prototype.setupAliasController=function(t){var e=this;this.rxSubscriptions.forEach((function(t){t.unsubscribe()})),this.rxSubscriptions.length=0,t&&(this.rxSubscriptions.push(t.filtersChanged.subscribe((function(){setTimeout((function(){e.updateFiltersInfo()}),0)}))),setTimeout((function(){e.updateFiltersInfo()}),0))},t.prototype.ngOnInit=function(){},t.prototype.ngOnDestroy=function(){this.rxSubscriptions.forEach((function(t){t.unsubscribe()})),this.rxSubscriptions.length=0},t.prototype.openEditMode=function(){var t=this;if(!this.disabled&&this.hasEditableFilters){var e=Object.entries(this.filtersInfo);if(1===e.length){var n=Object(i.a)({id:e[0][0]},e[0][1]);this.dialog.open(d.a,{disableClose:!0,panelClass:["tb-dialog","tb-fullscreen-dialog"],data:{filter:n}}).afterClosed().subscribe((function(e){e&&(t.filtersInfo[e.id]=e,t.aliasController.updateUserFilter(e))}))}else{var a=this.overlay.position(),s=new r.OverlayConfig({panelClass:"tb-filters-edit-panel",backdropClass:"cdk-overlay-transparent-backdrop",hasBackdrop:!0});s.positionStrategy=a.flexibleConnectedTo(this.filtersEditPanelOrigin.elementRef).withPositions([{originX:"start",originY:"bottom",overlayX:"start",overlayY:"top"}]);var p=this.overlay.create(s);p.backdropClick().subscribe((function(){p.dispose()}));var u=this._createFiltersEditPanelInjector(p,{aliasController:this.aliasController,filtersInfo:Object(o.e)(this.filtersInfo)});p.attach(new c.ComponentPortal(l.b,this.viewContainerRef,u))}}},t.prototype._createFiltersEditPanelInjector=function(t,e){var n=[{provide:l.a,useValue:e},{provide:r.OverlayRef,useValue:t}];return a.Injector.create({parent:this.viewContainerRef.injector,providers:n})},t.prototype.updateFiltersInfo=function(){var t=this.aliasController.getFilters();this.filtersInfo={},this.hasEditableFilters=!1;for(var e=0,n=Object.keys(t);e<n.length;e++){var i=n[e],a=this.aliasController.getFilterInfo(i);a&&Object(s.C)(a)&&(this.filtersInfo[i]=Object(o.e)(a),this.hasEditableFilters=!0)}},t.\u0275fac=function(e){return new(e||t)(a["\u0275\u0275directiveInject"](p.TranslateService),a["\u0275\u0275directiveInject"](r.Overlay),a["\u0275\u0275directiveInject"](u.BreakpointObserver),a["\u0275\u0275directiveInject"](a.ViewContainerRef),a["\u0275\u0275directiveInject"](m.MatDialog))},t.\u0275cmp=a["\u0275\u0275defineComponent"]({type:t,selectors:[["tb-filters-edit"]],viewQuery:function(t,e){var n;(1&t&&a["\u0275\u0275viewQuery"](x,!0),2&t)&&(a["\u0275\u0275queryRefresh"](n=a["\u0275\u0275loadQuery"]())&&(e.filtersEditPanelOrigin=n.first))},inputs:{aliasController:"aliasController",tooltipPosition:"tooltipPosition",disabled:"disabled"},decls:1,vars:1,consts:[["class","tb-filters-edit","fxLayout","row","fxLayoutAlign","start center",4,"ngIf"],["fxLayout","row","fxLayoutAlign","start center",1,"tb-filters-edit"],["mat-icon-button","","cdkOverlayOrigin","",3,"matTooltip","matTooltipPosition","click"],["filtersEditPanelOrigin","cdkOverlayOrigin"],["fxHide.lt-lg","",3,"matTooltip","matTooltipPosition","click"]],template:function(t,e){1&t&&a["\u0275\u0275template"](0,C,10,11,"section",0),2&t&&a["\u0275\u0275property"]("ngIf",e.hasEditableFilters)},directives:[f.NgIf,h.f,h.e,g.MatButton,r.CdkOverlayOrigin,y.MatTooltip,b.MatIcon,v.d],pipes:[p.TranslatePipe],styles:["[_nghost-%COMP%]   section.tb-filters-edit[_ngcontent-%COMP%]{min-height:32px;padding:0 6px}@media screen and (max-width:959px){[_nghost-%COMP%]   section.tb-filters-edit[_ngcontent-%COMP%]{padding:0}}[_nghost-%COMP%]   section.tb-filters-edit[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{max-width:200px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;pointer-events:all;cursor:pointer}"]}),t}();!function(){a["\u0275setClassMetadata"](S,[{type:a.Component,args:[{selector:"tb-filters-edit",templateUrl:"./filters-edit.component.html",styleUrls:["./filters-edit.component.scss"]}]}],(function(){return[{type:p.TranslateService},{type:r.Overlay},{type:u.BreakpointObserver},{type:a.ViewContainerRef},{type:m.MatDialog}]}),{aliasController:[{type:a.Input}],tooltipPosition:[{type:a.Input}],disabled:[{type:a.Input}],filtersEditPanelOrigin:[{type:a.ViewChild,args:["filtersEditPanelOrigin"]}]})}()},xFtW:function(t,e,n){"use strict";n.d(e,"a",(function(){return S}));var i=n("DaoB"),a=n("1y+p"),r=n("BsGH"),o=n("Bjlt"),s=n("21Fy"),l=n("S+vS"),c=n("g8Nv"),d=n("ofXK"),p=n("OiFK"),u=n("sYmb"),m=n("tk/3"),f=n("j37L"),h=n("ktVl"),g=n("YnEf"),y=n("9D3k"),b=n("7ZKe"),v=n("tyNb"),x=n("gM18"),C=n("9HAa"),S=new Map([["broadcastService",x.a],["deviceService",i.a],["alarmService",b.a],["assetService",a.a],["entityViewService",f.a],["customerService",h.a],["dashboardService",g.a],["userService",y.a],["attributeService",r.a],["entityRelationService",o.a],["entityService",s.a],["dialogs",l.a],["customDialog",c.a],["date",d.DatePipe],["utils",p.a],["translate",u.TranslateService],["http",m.b],["router",v.Router],["importExport",C.a]])},xRAe:function(t,e,n){"use strict";(function(t){n.d(e,"a",(function(){return ct}));var i=n("mrSG"),a=n("fXoL"),r=n("RxGS"),o=(n("0G7Z"),n("0lYY")),s=n("OiFK"),l=n("//Q6"),c=n("Neop"),d=n("mbhL"),p=n("4r/P"),u=n("xgIS"),m=n("VRyK"),f=n("2Vo4"),h=n("LRne"),g=n("Duvn"),y=n("Kj3r"),b=n("/uUt"),v=n("vkgz"),x=n("JIr8"),C=n("lJxs"),S=n("M9IT"),w=n("Dh3D"),E=n("fr2l"),I=n("l7P3"),O=n("rDax"),T=n("sYmb"),M=n("jhN1"),F=n("ofXK"),P=n("XiUz"),D=n("/t3+"),k=n("znSr"),j=n("bTqV"),A=n("Qu3c"),_=n("NFeN"),L=n("kmnG"),V=n("qFsG"),R=n("3Pt+"),N=n("wZkO"),G=n("+0xr"),B=n("STbY"),U=n("f0Cb"),q=["searchInput"];function W(t,e){1&t&&(a["\u0275\u0275elementStart"](0,"mat-header-cell",28),a["\u0275\u0275text"](1,"Timestamp"),a["\u0275\u0275elementEnd"]())}function z(t,e){if(1&t&&a["\u0275\u0275element"](0,"mat-cell",29),2&t){var n=e.$implicit,i=a["\u0275\u0275nextContext"](3).$implicit,r=a["\u0275\u0275nextContext"]();a["\u0275\u0275property"]("innerHTML",r.cellContent(i,0,n,n[0]),a["\u0275\u0275sanitizeHtml"])("ngStyle",r.cellStyle(i,0,n,n[0]))}}function K(t,e){1&t&&(a["\u0275\u0275elementContainerStart"](0,25),a["\u0275\u0275template"](1,W,2,0,"mat-header-cell",26),a["\u0275\u0275template"](2,z,1,2,"mat-cell",27),a["\u0275\u0275elementContainerEnd"]()),2&t&&a["\u0275\u0275property"]("matColumnDef","0")}function H(t,e){if(1&t&&(a["\u0275\u0275elementStart"](0,"mat-header-cell",28),a["\u0275\u0275text"](1),a["\u0275\u0275elementEnd"]()),2&t){var n=a["\u0275\u0275nextContext"]().$implicit;a["\u0275\u0275advance"](1),a["\u0275\u0275textInterpolate1"](" ",n.dataKey.label," ")}}function $(t,e){if(1&t&&a["\u0275\u0275element"](0,"mat-cell",29),2&t){var n=e.$implicit,i=a["\u0275\u0275nextContext"]().$implicit,r=a["\u0275\u0275nextContext"](2).$implicit,o=a["\u0275\u0275nextContext"]();a["\u0275\u0275property"]("innerHTML",o.cellContent(r,i.index,n,n[i.index]),a["\u0275\u0275sanitizeHtml"])("ngStyle",o.cellStyle(r,i.index,n,n[i.index]))}}function Q(t,e){if(1&t&&(a["\u0275\u0275elementContainerStart"](0,25),a["\u0275\u0275template"](1,H,2,1,"mat-header-cell",26),a["\u0275\u0275template"](2,$,1,2,"mat-cell",27),a["\u0275\u0275elementContainerEnd"]()),2&t){var n=e.$implicit;a["\u0275\u0275property"]("matColumnDef",n.index+"")}}var X=function(t,e,n){return{minWidth:t,maxWidth:e,width:n}};function Y(t,e){if(1&t&&a["\u0275\u0275element"](0,"mat-header-cell",30),2&t){var n=a["\u0275\u0275nextContext"](3);a["\u0275\u0275property"]("ngStyle.gt-md",a["\u0275\u0275pureFunction3"](1,X,40*n.actionCellDescriptors.length+"px",40*n.actionCellDescriptors.length+"px",40*n.actionCellDescriptors.length+"px"))}}function J(t,e){if(1&t){var n=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementStart"](0,"button",34),a["\u0275\u0275listener"]("click",(function(t){a["\u0275\u0275restoreView"](n);var i=e.$implicit,r=a["\u0275\u0275nextContext"]().$implicit;return a["\u0275\u0275nextContext"](3).onActionButtonClick(t,r,i)})),a["\u0275\u0275pipe"](1,"async"),a["\u0275\u0275elementStart"](2,"mat-icon"),a["\u0275\u0275text"](3),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()}if(2&t){var i=e.$implicit,r=a["\u0275\u0275nextContext"](4);a["\u0275\u0275propertyInterpolate"]("matTooltip",i.displayName),a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](1,3,r.isLoading$)),a["\u0275\u0275advance"](3),a["\u0275\u0275textInterpolate"](i.icon)}}function Z(t,e){if(1&t){var n=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementStart"](0,"button",41),a["\u0275\u0275listener"]("click",(function(t){a["\u0275\u0275restoreView"](n);var i=e.$implicit,r=a["\u0275\u0275nextContext"](2).$implicit;return a["\u0275\u0275nextContext"](3).onActionButtonClick(t,r,i)})),a["\u0275\u0275pipe"](1,"async"),a["\u0275\u0275elementStart"](2,"mat-icon"),a["\u0275\u0275text"](3),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](4,"span"),a["\u0275\u0275text"](5),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()}if(2&t){var i=e.$implicit,r=a["\u0275\u0275nextContext"](5);a["\u0275\u0275property"]("disabled",a["\u0275\u0275pipeBind1"](1,3,r.isLoading$)),a["\u0275\u0275advance"](3),a["\u0275\u0275textInterpolate"](i.icon),a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate"](i.displayName)}}function tt(t,e){if(1&t){var n=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementStart"](0,"div",35),a["\u0275\u0275elementStart"](1,"button",36),a["\u0275\u0275listener"]("click",(function(t){a["\u0275\u0275restoreView"](n);var e=a["\u0275\u0275nextContext"](4);return t.stopPropagation(),e.ctx.detectChanges()})),a["\u0275\u0275elementStart"](2,"mat-icon",37),a["\u0275\u0275text"](3,"more_vert"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](4,"mat-menu",38,39),a["\u0275\u0275template"](6,Z,6,5,"button",40),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()}if(2&t){var i=a["\u0275\u0275reference"](5),r=a["\u0275\u0275nextContext"](4);a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("matMenuTriggerFor",i),a["\u0275\u0275advance"](5),a["\u0275\u0275property"]("ngForOf",r.actionCellDescriptors)("ngForTrackBy",r.trackByActionCellDescriptionId)}}function et(t,e){if(1&t&&(a["\u0275\u0275elementStart"](0,"mat-cell",30),a["\u0275\u0275elementStart"](1,"div",31),a["\u0275\u0275template"](2,J,4,5,"button",32),a["\u0275\u0275elementEnd"](),a["\u0275\u0275template"](3,tt,7,3,"div",33),a["\u0275\u0275elementEnd"]()),2&t){var n=a["\u0275\u0275nextContext"](3);a["\u0275\u0275property"]("ngStyle.gt-md",a["\u0275\u0275pureFunction3"](4,X,40*n.actionCellDescriptors.length+"px",40*n.actionCellDescriptors.length+"px",40*n.actionCellDescriptors.length+"px")),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("ngForOf",n.actionCellDescriptors)("ngForTrackBy",n.trackByActionCellDescriptionId),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",n.actionCellDescriptors.length)}}function nt(t,e){1&t&&a["\u0275\u0275element"](0,"mat-header-row")}function it(t,e){if(1&t){var n=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementStart"](0,"mat-row",42),a["\u0275\u0275listener"]("click",(function(t){a["\u0275\u0275restoreView"](n);var i=e.$implicit;return a["\u0275\u0275nextContext"](3).onRowClick(t,i)})),a["\u0275\u0275elementEnd"]()}if(2&t){var i=e.$implicit,r=a["\u0275\u0275nextContext"](2).$implicit,o=a["\u0275\u0275nextContext"]();a["\u0275\u0275property"]("ngStyle",o.rowStyle(r,i))}}function at(t,e){1&t&&a["\u0275\u0275element"](0,"mat-divider")}function rt(t,e){if(1&t&&(a["\u0275\u0275element"](0,"mat-paginator",43),a["\u0275\u0275pipe"](1,"async")),2&t){var n=a["\u0275\u0275nextContext"](2).$implicit,i=a["\u0275\u0275nextContext"]();a["\u0275\u0275property"]("length",a["\u0275\u0275pipeBind1"](1,4,n.timeseriesDatasource.total()))("pageIndex",n.pageLink.page)("pageSize",n.pageLink.pageSize)("pageSizeOptions",i.pageSizeOptions)}}function ot(t,e){if(1&t&&(a["\u0275\u0275elementStart"](0,"div",13),a["\u0275\u0275elementStart"](1,"table",14),a["\u0275\u0275template"](2,K,3,1,"ng-container",15),a["\u0275\u0275template"](3,Q,3,1,"ng-container",16),a["\u0275\u0275elementContainerStart"](4,17),a["\u0275\u0275template"](5,Y,1,5,"mat-header-cell",18),a["\u0275\u0275template"](6,et,4,8,"mat-cell",19),a["\u0275\u0275elementContainerEnd"](),a["\u0275\u0275template"](7,nt,1,0,"mat-header-row",20),a["\u0275\u0275template"](8,it,1,1,"mat-row",21),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](9,"span",22),a["\u0275\u0275pipe"](10,"async"),a["\u0275\u0275text"](11,"widget.no-data-found"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275template"](12,at,1,0,"mat-divider",23),a["\u0275\u0275template"](13,rt,2,6,"mat-paginator",24)),2&t){var n=a["\u0275\u0275nextContext"]().$implicit,i=a["\u0275\u0275nextContext"]();a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("dataSource",n.timeseriesDatasource)("trackBy",i.trackByRowTimestamp)("matSortActive",n.pageLink.sortOrder.property)("matSortDirection",n.pageLink.sortDirection()),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",i.showTimestamp),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngForOf",n.header)("ngForTrackBy",i.trackByColumnIndex),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("stickyEnd",i.enableStickyAction),a["\u0275\u0275advance"](3),a["\u0275\u0275property"]("matHeaderRowDef",n.displayedColumns)("matHeaderRowDefSticky",i.enableStickyHeader),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("matRowDefColumns",n.displayedColumns),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("fxShow",a["\u0275\u0275pipeBind1"](10,14,n.timeseriesDatasource.isEmpty())),a["\u0275\u0275advance"](3),a["\u0275\u0275property"]("ngIf",i.displayPagination),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",i.displayPagination)}}function st(t,e){if(1&t&&(a["\u0275\u0275elementStart"](0,"mat-tab",11),a["\u0275\u0275template"](1,ot,14,16,"ng-template",12),a["\u0275\u0275elementEnd"]()),2&t){var n=e.$implicit,i=e.index,r=a["\u0275\u0275nextContext"]();a["\u0275\u0275propertyInterpolate"]("label",n.datasource.name),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngIf",r.isActiveTab(i))}}var lt=function(t){return{"tb-headless":t}},ct=function(e){function n(t,n,i,a,r,o,s,l,c){var d=e.call(this,t)||this;return d.store=t,d.elementRef=n,d.ngZone=i,d.overlay=a,d.viewContainerRef=r,d.utils=o,d.translate=s,d.domSanitizer=l,d.datePipe=c,d.displayPagination=!0,d.enableStickyHeader=!0,d.enableStickyAction=!0,d.textSearchMode=!1,d.textSearch=null,d.defaultPageSize=10,d.defaultSortOrder="-0",d.hideEmptyLines=!1,d.showTimestamp=!0,d.subscriptions=[],d.searchAction={name:"action.search",show:!0,icon:"search",onAction:function(){d.enterFilterMode()}},d}return Object(i.d)(n,e),n.prototype.ngOnInit=function(){this.ctx.$scope.timeseriesTableWidget=this,this.settings=this.ctx.settings,this.widgetConfig=this.ctx.widgetConfig,this.data=this.ctx.data,this.datasources=this.ctx.datasources,this.initialize(),this.ctx.updateWidgetParams()},n.prototype.ngAfterViewInit=function(){var t=this;Object(u.a)(this.searchInputField.nativeElement,"keyup").pipe(Object(y.a)(150),Object(b.a)(),Object(v.a)((function(){t.sources.forEach((function(e){e.pageLink.textSearch=t.textSearch,t.displayPagination&&(e.pageLink.page=0)})),t.loadCurrentSourceRow(),t.ctx.detectChanges()}))).subscribe(),this.sorts.changes.subscribe((function(){t.initSubscriptionsToSortAndPaginator()})),this.initSubscriptionsToSortAndPaginator()},n.prototype.onDataUpdated=function(){this.updateCurrentSourceData()},n.prototype.initialize=function(){this.ctx.widgetActions=[this.searchAction],this.actionCellDescriptors=this.ctx.actionsApi.getActionDescriptors("actionCellButton"),this.searchAction.show=!Object(l.n)(this.settings.enableSearch)||this.settings.enableSearch,this.displayPagination=!Object(l.n)(this.settings.displayPagination)||this.settings.displayPagination,this.enableStickyHeader=!Object(l.n)(this.settings.enableStickyHeader)||this.settings.enableStickyHeader,this.enableStickyAction=!Object(l.n)(this.settings.enableStickyAction)||this.settings.enableStickyAction,this.hideEmptyLines=!!Object(l.n)(this.settings.hideEmptyLines)&&this.settings.hideEmptyLines,this.showTimestamp=!1!==this.settings.showTimestamp,this.dateFormatFilter=!0!==this.settings.showMilliseconds?"yyyy-MM-dd HH:mm:ss":"yyyy-MM-dd HH:mm:ss.SSS",this.rowStylesInfo=Object(E.m)(this.settings,"rowData, ctx");var e=this.settings.defaultPageSize;Object(l.n)(e)&&Object(l.v)(e)&&e>0&&(this.defaultPageSize=e),this.pageSizeOptions=[this.defaultPageSize,2*this.defaultPageSize,3*this.defaultPageSize];var n=Object(E.a)(this.widgetConfig);n+=".tb-table-widget mat-toolbar.mat-table-toolbar:not([color=primary]) {\nbackground-color: "+(this.widgetConfig.backgroundColor||"rgb(255, 255, 255)")+" !important;\n}\n";var i=new c.a;i.testMode=!1;var a="ts-table-"+Object(l.l)(n);i.cssPreviewNamespace=a,i.createStyleElement(a,n),t(this.elementRef.nativeElement).addClass(a),this.updateDatasources()},n.prototype.updateDatasources=function(){this.sources=[],this.sourceIndex=0;var t=0,e=this.displayPagination?this.defaultPageSize:Number.POSITIVE_INFINITY;if(this.datasources)for(var n=0,i=this.datasources;n<i.length;n++){var a=i[n],r=Object(p.b)(this.defaultSortOrder),o={};o.keyStartIndex=t,t+=a.dataKeys.length,o.keyEndIndex=t,o.datasource=a,o.data=[],o.rawData=[],o.displayedColumns=[],o.pageLink=new d.b(e,0,null,r),o.header=[],o.stylesInfo=[],o.contentsInfo=[],o.rowDataTemplate={},o.rowDataTemplate.Timestamp=null,this.showTimestamp&&o.displayedColumns.push("0");for(var s=0;s<a.dataKeys.length;s++){var l=a.dataKeys[s],c=l.settings,u=s+1;o.header.push({index:u,dataKey:l}),o.displayedColumns.push(u+""),o.rowDataTemplate[l.label]=null,o.stylesInfo.push(Object(E.h)(c,"value, rowData, ctx"));var m=Object(E.g)(c,"value, rowData, ctx");m.units=l.units,m.decimals=l.decimals,o.contentsInfo.push(m)}this.actionCellDescriptors.length&&o.displayedColumns.push("actions"),new dt(o,this.hideEmptyLines,this.dateFormatFilter,this.datePipe).dataUpdated(this.data),this.sources.push(o)}this.updateActiveEntityInfo()},n.prototype.updateActiveEntityInfo=function(){var t=this.sources[this.sourceIndex],e=null;if(t){var n=t.datasource;n.type===o.a.entity&&n.entityType&&n.entityId&&(e={entityId:{entityType:n.entityType,id:n.entityId},entityName:n.entityName,entityLabel:n.entityLabel,entityDescription:n.entityDescription})}this.ctx.activeEntityInfo=e},n.prototype.initSubscriptionsToSortAndPaginator=function(){var t=this;this.subscriptions.forEach((function(t){return t.unsubscribe()})),this.sorts.forEach((function(e,n){var i=null,a=[e.sortChange];t.displayPagination&&(i=t.paginators.toArray()[n],t.subscriptions.push(e.sortChange.subscribe((function(){return i.pageIndex=0}))),a.push(i.page)),t.updateData(e,i),t.subscriptions.push(m.a.apply(void 0,a).pipe(Object(v.a)((function(){return t.updateData(e,i)}))).subscribe())}))},n.prototype.onSourceIndexChanged=function(){this.updateCurrentSourceData(),this.updateActiveEntityInfo()},n.prototype.enterFilterMode=function(){var t=this;this.textSearchMode=!0,this.textSearch="",this.sources.forEach((function(e){e.pageLink.textSearch=t.textSearch})),this.ctx.hideTitlePanel=!0,this.ctx.detectChanges(!0),setTimeout((function(){t.searchInputField.nativeElement.focus(),t.searchInputField.nativeElement.setSelectionRange(0,0)}),10)},n.prototype.exitFilterMode=function(){var t=this;this.textSearchMode=!1,this.textSearch=null,this.sources.forEach((function(e){e.pageLink.textSearch=t.textSearch,t.displayPagination&&(e.pageLink.page=0)})),this.loadCurrentSourceRow(),this.ctx.hideTitlePanel=!1,this.ctx.detectChanges(!0)},n.prototype.updateData=function(t,e){var n=this.sources[this.sourceIndex];this.displayPagination?(n.pageLink.page=e.pageIndex,n.pageLink.pageSize=e.pageSize):n.pageLink.page=0,n.pageLink.sortOrder.property=t.active,n.pageLink.sortOrder.direction=p.a[t.direction.toUpperCase()],n.timeseriesDatasource.loadRows(),this.ctx.detectChanges()},n.prototype.trackByColumnIndex=function(t,e){return e.index},n.prototype.trackByRowTimestamp=function(t){return t},n.prototype.trackByActionCellDescriptionId=function(t,e){return e.id},n.prototype.trackBySourcesIndex=function(t,e){return e.datasource.entityId},n.prototype.rowStyle=function(t,e){var n={};if(this.rowStylesInfo.useRowStyleFunction&&this.rowStylesInfo.rowStyleFunction)try{var i=t.rowDataTemplate;if(i.Timestamp=e[0],t.header.forEach((function(t){i[t.dataKey.name]=e[t.index]})),n=this.rowStylesInfo.rowStyleFunction(i,this.ctx),!Object(l.x)(n))throw new TypeError((null===n?"null":typeof n)+" instead of style object");if(Array.isArray(n))throw new TypeError("Array instead of style object")}catch(a){n={},console.warn("Row style function in widget '"+this.ctx.widgetConfig.title+"' returns '"+a+"'. Please check your row style function.")}return n},n.prototype.cellStyle=function(t,e,n,i){var a={};if(e>0){var r=t.stylesInfo[e-1];if(r.useCellStyleFunction&&r.cellStyleFunction)try{var o=t.rowDataTemplate;if(o.Timestamp=n[0],t.header.forEach((function(t){o[t.dataKey.name]=n[t.index]})),a=r.cellStyleFunction(i,o,this.ctx),!Object(l.x)(a))throw new TypeError((null===a?"null":typeof a)+" instead of style object");if(Array.isArray(a))throw new TypeError("Array instead of style object")}catch(s){a={},console.warn("Cell style function for data key '"+t.header[e-1].dataKey.label+"' in widget '"+this.ctx.widgetConfig.title+"' returns '"+s+"'. Please check your cell style function.")}}return a},n.prototype.cellContent=function(t,e,n,i){if(0===e)return n.formattedTs;var a=void 0,r=t.contentsInfo[e-1];if(r.useCellContentFunction&&r.cellContentFunction)try{var o=t.rowDataTemplate;o.Timestamp=n[0],t.header.forEach((function(t){o[t.dataKey.name]=n[t.index]})),a=r.cellContentFunction(i,o,this.ctx)}catch(d){a=""+i}else{var s=r.decimals||0===r.decimals?r.decimals:this.ctx.widgetConfig.decimals,c=r.units||this.ctx.widgetConfig.units;a=this.ctx.utils.formatValue(i,s,c,!0)}if(!Object(l.n)(a))return"";switch(typeof(a=this.utils.customTranslation(a,a))){case"string":return this.domSanitizer.bypassSecurityTrustHtml(a);default:return a}},n.prototype.onRowClick=function(t,e){var n=this.ctx.actionsApi.getActionDescriptors("rowClick");if(n.length){t&&t.stopPropagation();var i=void 0,a=void 0,r=void 0;this.ctx.activeEntityInfo&&(i=this.ctx.activeEntityInfo.entityId,a=this.ctx.activeEntityInfo.entityName,r=this.ctx.activeEntityInfo.entityLabel),this.ctx.actionsApi.handleWidgetAction(t,n[0],i,a,e,r)}},n.prototype.onActionButtonClick=function(t,e,n){var i,a,r;t&&t.stopPropagation(),this.ctx.activeEntityInfo&&(i=this.ctx.activeEntityInfo.entityId,a=this.ctx.activeEntityInfo.entityName,r=this.ctx.activeEntityInfo.entityLabel),this.ctx.actionsApi.handleWidgetAction(t,n,i,a,e,r)},n.prototype.isActiveTab=function(t){return t===this.sourceIndex},n.prototype.updateCurrentSourceData=function(){this.sources[this.sourceIndex].timeseriesDatasource.dataUpdated(this.data)},n.prototype.loadCurrentSourceRow=function(){this.sources[this.sourceIndex].timeseriesDatasource.loadRows()},n.\u0275fac=function(t){return new(t||n)(a["\u0275\u0275directiveInject"](I.Store),a["\u0275\u0275directiveInject"](a.ElementRef),a["\u0275\u0275directiveInject"](a.NgZone),a["\u0275\u0275directiveInject"](O.Overlay),a["\u0275\u0275directiveInject"](a.ViewContainerRef),a["\u0275\u0275directiveInject"](s.a),a["\u0275\u0275directiveInject"](T.TranslateService),a["\u0275\u0275directiveInject"](M.DomSanitizer),a["\u0275\u0275directiveInject"](F.DatePipe))},n.\u0275cmp=a["\u0275\u0275defineComponent"]({type:n,selectors:[["tb-timeseries-table-widget"]],viewQuery:function(t,e){var n;(1&t&&(a["\u0275\u0275viewQuery"](q,!0),a["\u0275\u0275viewQuery"](S.MatPaginator,!0),a["\u0275\u0275viewQuery"](w.MatSort,!0)),2&t)&&(a["\u0275\u0275queryRefresh"](n=a["\u0275\u0275loadQuery"]())&&(e.searchInputField=n.first),a["\u0275\u0275queryRefresh"](n=a["\u0275\u0275loadQuery"]())&&(e.paginators=n),a["\u0275\u0275queryRefresh"](n=a["\u0275\u0275loadQuery"]())&&(e.sorts=n))},inputs:{ctx:"ctx"},features:[a["\u0275\u0275InheritDefinitionFeature"]],decls:20,vars:17,consts:[[1,"tb-table-widget","tb-absolute-fill"],["fxFlex","","fxLayout","column",1,"tb-absolute-fill"],[1,"mat-table-toolbar",3,"fxShow"],[1,"mat-toolbar-tools"],["mat-button","","mat-icon-button","","matTooltipPosition","above",3,"matTooltip"],["fxFlex",""],["matInput","",3,"ngModel","placeholder","ngModelChange"],["searchInput",""],["mat-button","","mat-icon-button","","matTooltipPosition","above",3,"matTooltip","click"],["fxFlex","",3,"ngClass","selectedIndex","selectedIndexChange"],[3,"label",4,"ngFor","ngForOf","ngForTrackBy"],[3,"label"],[3,"ngIf"],["fxFlex","",1,"table-container"],["mat-table","","matSort","","matSortDisableClear","",3,"dataSource","trackBy","matSortActive","matSortDirection"],[3,"matColumnDef",4,"ngIf"],[3,"matColumnDef",4,"ngFor","ngForOf","ngForTrackBy"],["matColumnDef","actions",3,"stickyEnd"],[3,"ngStyle.gt-md",4,"matHeaderCellDef"],[3,"ngStyle.gt-md",4,"matCellDef"],[4,"matHeaderRowDef","matHeaderRowDefSticky"],[3,"ngStyle","click",4,"matRowDef","matRowDefColumns"],["fxLayoutAlign","center center","translate","",1,"no-data-found",3,"fxShow"],[4,"ngIf"],["showFirstLastButtons","",3,"length","pageIndex","pageSize","pageSizeOptions",4,"ngIf"],[3,"matColumnDef"],["mat-sort-header","",4,"matHeaderCellDef"],[3,"innerHTML","ngStyle",4,"matCellDef"],["mat-sort-header",""],[3,"innerHTML","ngStyle"],[3,"ngStyle.gt-md"],["fxHide","","fxShow.gt-md","","fxFlex","","fxLayout","row","fxLayoutAlign","end"],["mat-button","","mat-icon-button","","matTooltipPosition","above",3,"disabled","matTooltip","click",4,"ngFor","ngForOf","ngForTrackBy"],["fxHide","","fxShow.lt-lg","",4,"ngIf"],["mat-button","","mat-icon-button","","matTooltipPosition","above",3,"disabled","matTooltip","click"],["fxHide","","fxShow.lt-lg",""],["mat-button","","mat-icon-button","",3,"matMenuTriggerFor","click"],[1,"material-icons"],["xPosition","before"],["cellActionsMenu","matMenu"],["mat-menu-item","",3,"disabled","click",4,"ngFor","ngForOf","ngForTrackBy"],["mat-menu-item","",3,"disabled","click"],[3,"ngStyle","click"],["showFirstLastButtons","",3,"length","pageIndex","pageSize","pageSizeOptions"]],template:function(t,e){1&t&&(a["\u0275\u0275elementStart"](0,"div",0),a["\u0275\u0275elementStart"](1,"div",1),a["\u0275\u0275elementStart"](2,"mat-toolbar",2),a["\u0275\u0275elementStart"](3,"div",3),a["\u0275\u0275elementStart"](4,"button",4),a["\u0275\u0275pipe"](5,"translate"),a["\u0275\u0275elementStart"](6,"mat-icon"),a["\u0275\u0275text"](7,"search"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](8,"mat-form-field",5),a["\u0275\u0275elementStart"](9,"mat-label"),a["\u0275\u0275text"](10,"\xa0"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](11,"input",6,7),a["\u0275\u0275listener"]("ngModelChange",(function(t){return e.textSearch=t})),a["\u0275\u0275pipe"](13,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](14,"button",8),a["\u0275\u0275listener"]("click",(function(){return e.exitFilterMode()})),a["\u0275\u0275pipe"](15,"translate"),a["\u0275\u0275elementStart"](16,"mat-icon"),a["\u0275\u0275text"](17,"close"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](18,"mat-tab-group",9),a["\u0275\u0275listener"]("selectedIndexChange",(function(t){return e.sourceIndex=t}))("selectedIndexChange",(function(){return e.onSourceIndexChanged()})),a["\u0275\u0275template"](19,st,2,2,"mat-tab",10),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()),2&t&&(a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("fxShow",e.textSearchMode),a["\u0275\u0275advance"](2),a["\u0275\u0275propertyInterpolate"]("matTooltip",a["\u0275\u0275pipeBind1"](5,9,"action.search")),a["\u0275\u0275advance"](7),a["\u0275\u0275propertyInterpolate"]("placeholder",a["\u0275\u0275pipeBind1"](13,11,"widget.search-data")),a["\u0275\u0275property"]("ngModel",e.textSearch),a["\u0275\u0275advance"](3),a["\u0275\u0275propertyInterpolate"]("matTooltip",a["\u0275\u0275pipeBind1"](15,13,"action.close")),a["\u0275\u0275advance"](4),a["\u0275\u0275property"]("ngClass",a["\u0275\u0275pureFunction1"](15,lt,1===e.sources.length))("selectedIndex",e.sourceIndex),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngForOf",e.sources)("ngForTrackBy",e.trackBySourcesIndex))},directives:[P.b,P.f,D.MatToolbar,k.d,j.MatButton,A.MatTooltip,_.MatIcon,L.MatFormField,L.MatLabel,V.MatInput,R.DefaultValueAccessor,R.NgControlStatus,R.NgModel,N.MatTabGroup,F.NgClass,k.b,F.NgForOf,N.MatTab,F.NgIf,G.MatTable,w.MatSort,G.MatColumnDef,G.MatHeaderCellDef,G.MatCellDef,G.MatHeaderRowDef,G.MatRowDef,P.e,T.TranslateDirective,G.MatHeaderCell,w.MatSortHeader,G.MatCell,F.NgStyle,k.e,B.MatMenuTrigger,B._MatMenu,B.MatMenuItem,G.MatHeaderRow,G.MatRow,U.MatDivider,S.MatPaginator],pipes:[T.TranslatePipe,F.AsyncPipe],styles:["[_nghost-%COMP%]{width:100%;height:100%}[_nghost-%COMP%]   .tb-table-widget[_ngcontent-%COMP%]   mat-footer-row[_ngcontent-%COMP%], [_nghost-%COMP%]   .tb-table-widget[_ngcontent-%COMP%]   mat-row[_ngcontent-%COMP%]{height:38px}[_nghost-%COMP%]   .tb-table-widget[_ngcontent-%COMP%]   mat-header-row[_ngcontent-%COMP%]{height:40px}[_nghost-%COMP%]   .tb-table-widget[_ngcontent-%COMP%]   mat-toolbar[_ngcontent-%COMP%]{z-index:10}[_nghost-%COMP%]   .tb-table-widget[_ngcontent-%COMP%]   span.no-data-found[_ngcontent-%COMP%]{height:calc(100% - 44px)}[_nghost-%COMP%]     .tb-table-widget .mat-tab-group{height:100%;overflow:hidden}[_nghost-%COMP%]     .tb-table-widget .mat-tab-body-wrapper{height:100%}[_nghost-%COMP%]     .tb-table-widget .mat-tab-body-content{display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column}","[_nghost-%COMP%]   .tb-table-widget[_ngcontent-%COMP%]   .mat-paginator[_ngcontent-%COMP%], [_nghost-%COMP%]   .tb-table-widget[_ngcontent-%COMP%]   .mat-table[_ngcontent-%COMP%], [_nghost-%COMP%]   .tb-table-widget[_ngcontent-%COMP%]   mat-toolbar.mat-table-toolbar[_ngcontent-%COMP%]:not([color=primary]){background:transparent}[_nghost-%COMP%]   .tb-table-widget[_ngcontent-%COMP%]   mat-toolbar[_ngcontent-%COMP%], [_nghost-%COMP%]   .tb-table-widget[_ngcontent-%COMP%]   mat-toolbar[_ngcontent-%COMP%]   .mat-toolbar-tools[_ngcontent-%COMP%]{height:39px;max-height:39px}[_nghost-%COMP%]   .tb-table-widget[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]{overflow:auto}[_nghost-%COMP%]   .tb-table-widget[_ngcontent-%COMP%]   .mat-header-row.mat-row-select[_ngcontent-%COMP%]   mat-cell[_ngcontent-%COMP%]:nth-child(2), [_nghost-%COMP%]   .tb-table-widget[_ngcontent-%COMP%]   .mat-header-row.mat-row-select[_ngcontent-%COMP%]   mat-cell[_ngcontent-%COMP%]:nth-child(n+3):nth-last-child(n+2), [_nghost-%COMP%]   .tb-table-widget[_ngcontent-%COMP%]   .mat-header-row.mat-row-select[_ngcontent-%COMP%]   mat-footer-cell[_ngcontent-%COMP%]:nth-child(2), [_nghost-%COMP%]   .tb-table-widget[_ngcontent-%COMP%]   .mat-header-row.mat-row-select[_ngcontent-%COMP%]   mat-footer-cell[_ngcontent-%COMP%]:nth-child(n+3):nth-last-child(n+2), [_nghost-%COMP%]   .tb-table-widget[_ngcontent-%COMP%]   .mat-header-row.mat-row-select[_ngcontent-%COMP%]   mat-header-cell[_ngcontent-%COMP%]:nth-child(2), [_nghost-%COMP%]   .tb-table-widget[_ngcontent-%COMP%]   .mat-header-row.mat-row-select[_ngcontent-%COMP%]   mat-header-cell[_ngcontent-%COMP%]:nth-child(n+3):nth-last-child(n+2), [_nghost-%COMP%]   .tb-table-widget[_ngcontent-%COMP%]   .mat-header-row[_ngcontent-%COMP%]:not(.mat-row-select)   mat-cell[_ngcontent-%COMP%]:nth-child(n+2):nth-last-child(n+2), [_nghost-%COMP%]   .tb-table-widget[_ngcontent-%COMP%]   .mat-header-row[_ngcontent-%COMP%]:not(.mat-row-select)   mat-footer-cell[_ngcontent-%COMP%]:nth-child(n+2):nth-last-child(n+2), [_nghost-%COMP%]   .tb-table-widget[_ngcontent-%COMP%]   .mat-header-row[_ngcontent-%COMP%]:not(.mat-row-select)   mat-header-cell[_ngcontent-%COMP%]:nth-child(n+2):nth-last-child(n+2), [_nghost-%COMP%]   .tb-table-widget[_ngcontent-%COMP%]   .mat-row.mat-row-select[_ngcontent-%COMP%]   mat-cell[_ngcontent-%COMP%]:nth-child(2), [_nghost-%COMP%]   .tb-table-widget[_ngcontent-%COMP%]   .mat-row.mat-row-select[_ngcontent-%COMP%]   mat-cell[_ngcontent-%COMP%]:nth-child(n+3):nth-last-child(n+2), [_nghost-%COMP%]   .tb-table-widget[_ngcontent-%COMP%]   .mat-row.mat-row-select[_ngcontent-%COMP%]   mat-footer-cell[_ngcontent-%COMP%]:nth-child(2), [_nghost-%COMP%]   .tb-table-widget[_ngcontent-%COMP%]   .mat-row.mat-row-select[_ngcontent-%COMP%]   mat-footer-cell[_ngcontent-%COMP%]:nth-child(n+3):nth-last-child(n+2), [_nghost-%COMP%]   .tb-table-widget[_ngcontent-%COMP%]   .mat-row.mat-row-select[_ngcontent-%COMP%]   mat-header-cell[_ngcontent-%COMP%]:nth-child(2), [_nghost-%COMP%]   .tb-table-widget[_ngcontent-%COMP%]   .mat-row.mat-row-select[_ngcontent-%COMP%]   mat-header-cell[_ngcontent-%COMP%]:nth-child(n+3):nth-last-child(n+2), [_nghost-%COMP%]   .tb-table-widget[_ngcontent-%COMP%]   .mat-row[_ngcontent-%COMP%]:not(.mat-row-select)   mat-cell[_ngcontent-%COMP%]:nth-child(n+2):nth-last-child(n+2), [_nghost-%COMP%]   .tb-table-widget[_ngcontent-%COMP%]   .mat-row[_ngcontent-%COMP%]:not(.mat-row-select)   mat-footer-cell[_ngcontent-%COMP%]:nth-child(n+2):nth-last-child(n+2), [_nghost-%COMP%]   .tb-table-widget[_ngcontent-%COMP%]   .mat-row[_ngcontent-%COMP%]:not(.mat-row-select)   mat-header-cell[_ngcontent-%COMP%]:nth-child(n+2):nth-last-child(n+2){padding:0 5px}.tb-has-timewindow[_nghost-%COMP%]   .tb-table-widget[_ngcontent-%COMP%]   mat-toolbar[_ngcontent-%COMP%], .tb-has-timewindow   [_nghost-%COMP%]   .tb-table-widget[_ngcontent-%COMP%]   mat-toolbar[_ngcontent-%COMP%], .tb-has-timewindow[_nghost-%COMP%]   .tb-table-widget[_ngcontent-%COMP%]   mat-toolbar[_ngcontent-%COMP%]   .mat-toolbar-tools[_ngcontent-%COMP%], .tb-has-timewindow   [_nghost-%COMP%]   .tb-table-widget[_ngcontent-%COMP%]   mat-toolbar[_ngcontent-%COMP%]   .mat-toolbar-tools[_ngcontent-%COMP%]{height:65px;max-height:65px}"]}),n}(r.a);!function(){a["\u0275setClassMetadata"](ct,[{type:a.Component,args:[{selector:"tb-timeseries-table-widget",templateUrl:"./timeseries-table-widget.component.html",styleUrls:["./timeseries-table-widget.component.scss","./table-widget.scss"]}]}],(function(){return[{type:I.Store},{type:a.ElementRef},{type:a.NgZone},{type:O.Overlay},{type:a.ViewContainerRef},{type:s.a},{type:T.TranslateService},{type:M.DomSanitizer},{type:F.DatePipe}]}),{ctx:[{type:a.Input}],searchInputField:[{type:a.ViewChild,args:["searchInput"]}],paginators:[{type:a.ViewChildren,args:[S.MatPaginator]}],sorts:[{type:a.ViewChildren,args:[w.MatSort]}]})}();var dt=function(){function t(t,e,n,i){this.source=t,this.hideEmptyLines=e,this.dateFormatFilter=n,this.datePipe=i,this.rowsSubject=new f.a([]),this.pageDataSubject=new f.a(Object(g.a)()),this.allRowsSubject=new f.a([]),this.allRows$=this.allRowsSubject.asObservable(),this.source.timeseriesDatasource=this}return t.prototype.connect=function(t){return this.rowsSubject.isStopped&&(this.rowsSubject.isStopped=!1,this.pageDataSubject.isStopped=!1),this.rowsSubject.asObservable()},t.prototype.disconnect=function(t){this.rowsSubject.complete(),this.pageDataSubject.complete()},t.prototype.loadRows=function(){var t=this;this.fetchRows(this.source.pageLink).pipe(Object(x.a)((function(){return Object(h.a)(Object(g.a)())}))).subscribe((function(e){t.rowsSubject.next(e.data),t.pageDataSubject.next(e)}))},t.prototype.dataUpdated=function(t){this.source.rawData=t.slice(this.source.keyStartIndex,this.source.keyEndIndex),this.updateSourceData()},t.prototype.updateSourceData=function(){this.source.data=this.convertData(this.source.rawData),this.allRowsSubject.next(this.source.data)},t.prototype.convertData=function(t){for(var e=this,n={},i=function(i){t[i].data.forEach((function(a){var r=a[0],o=n[r];if(!o){(o={formattedTs:e.datePipe.transform(r,e.dateFormatFilter)})[0]=r;for(var s=0;s<t.length;s++)o[s+1]=void 0;n[r]=o}o[i+1]=a[1]}))},a=0;a<t.length;a++)i(a);var r=[];if(this.hideEmptyLines)for(var o=0,s=Object.keys(n);o<s.length;o++){for(var l=s[o],c=!0,d=0;d<t.length&&c;d++)n[l][d+1]&&(c=!1);c||r.push(n[l])}else r=Object.keys(n).map((function(t){return n[t]}));return r},t.prototype.isEmpty=function(){return this.rowsSubject.pipe(Object(C.a)((function(t){return!t.length})))},t.prototype.total=function(){return this.pageDataSubject.pipe(Object(C.a)((function(t){return t.totalElements})))},t.prototype.fetchRows=function(t){return this.allRows$.pipe(Object(C.a)((function(e){return t.filterData(e)})))},t}()}).call(this,n("xexB"))},xkYi:function(t,e,n){"use strict";n.d(e,"a",(function(){return O}));var i=n("fXoL"),a=n("3Pt+"),r=n("8LU1"),o=n("JIJk"),s=n("//Q6"),l=n("xKAQ"),c=n("l7P3"),d=n("sYmb"),p=n("kmnG"),u=n("d3UM"),m=n("ofXK"),f=n("FKr1"),h=n("XiUz"),g=n("qFsG"),y=n("bTqV"),b=n("Dvla"),v=n("Qu3c"),x=n("NFeN");function C(t,e){if(1&t&&(i["\u0275\u0275elementStart"](0,"mat-option",7),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&t){var n=e.$implicit,a=i["\u0275\u0275nextContext"]();i["\u0275\u0275property"]("value",n),i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,2,a.deviceProvisionTypeTranslateMap.get(n))," ")}}function S(t,e){1&t&&(i["\u0275\u0275elementStart"](0,"mat-error"),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&t&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,1,"device-profile.provision-strategy-required")," "))}function w(t,e){1&t&&(i["\u0275\u0275elementStart"](0,"mat-error"),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&t&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,1,"device-profile.provision-device-key-required")," "))}function E(t,e){1&t&&(i["\u0275\u0275elementStart"](0,"mat-error"),i["\u0275\u0275text"](1),i["\u0275\u0275pipe"](2,"translate"),i["\u0275\u0275elementEnd"]()),2&t&&(i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](2,1,"device-profile.provision-device-secret-required")," "))}function I(t,e){if(1&t){var n=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"section",8),i["\u0275\u0275elementStart"](1,"mat-form-field",9),i["\u0275\u0275elementStart"](2,"mat-label",2),i["\u0275\u0275text"](3,"device-profile.provision-device-key"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](4,"input",10),i["\u0275\u0275elementStart"](5,"button",11),i["\u0275\u0275listener"]("cbOnSuccess",(function(){return i["\u0275\u0275restoreView"](n),i["\u0275\u0275nextContext"]().onProvisionCopied(!0)})),i["\u0275\u0275pipe"](6,"translate"),i["\u0275\u0275element"](7,"mat-icon",12),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](8,w,3,3,"mat-error",5),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](9,"mat-form-field",9),i["\u0275\u0275elementStart"](10,"mat-label",2),i["\u0275\u0275text"](11,"device-profile.provision-device-secret"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](12,"input",13),i["\u0275\u0275elementStart"](13,"button",11),i["\u0275\u0275listener"]("cbOnSuccess",(function(){return i["\u0275\u0275restoreView"](n),i["\u0275\u0275nextContext"]().onProvisionCopied(!1)})),i["\u0275\u0275pipe"](14,"translate"),i["\u0275\u0275element"](15,"mat-icon",12),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](16,E,3,3,"mat-error",5),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()}if(2&t){var a=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](5),i["\u0275\u0275propertyInterpolate"]("matTooltip",i["\u0275\u0275pipeBind1"](6,6,"device-profile.copy-provision-key")),i["\u0275\u0275property"]("cbContent",a.provisionConfigurationFormGroup.get("provisionDeviceKey").value),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("ngIf",a.provisionConfigurationFormGroup.get("provisionDeviceKey").hasError("required")),i["\u0275\u0275advance"](5),i["\u0275\u0275propertyInterpolate"]("matTooltip",i["\u0275\u0275pipeBind1"](14,8,"device-profile.copy-provision-secret")),i["\u0275\u0275property"]("cbContent",a.provisionConfigurationFormGroup.get("provisionDeviceSecret").value),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("ngIf",a.provisionConfigurationFormGroup.get("provisionDeviceSecret").hasError("required"))}}var O=function(){function t(t,e,n){this.store=t,this.fb=e,this.translate=n,this.deviceProvisionType=o.i,this.deviceProvisionTypes=Object.keys(o.i),this.deviceProvisionTypeTranslateMap=o.y,this.propagateChange=function(t){}}return Object.defineProperty(t.prototype,"required",{get:function(){return this.requiredValue},set:function(t){this.requiredValue=Object(r.coerceBooleanProperty)(t)},enumerable:!1,configurable:!0}),t.prototype.ngOnInit=function(){var t=this;this.provisionConfigurationFormGroup=this.fb.group({type:[o.i.DISABLED,a.Validators.required],provisionDeviceSecret:[{value:null,disabled:!0},a.Validators.required],provisionDeviceKey:[{value:null,disabled:!0},a.Validators.required]}),this.provisionConfigurationFormGroup.get("type").valueChanges.subscribe((function(e){if(e===o.i.DISABLED)t.provisionConfigurationFormGroup.get("provisionDeviceSecret").disable({emitEvent:!1}),t.provisionConfigurationFormGroup.get("provisionDeviceSecret").patchValue(null,{emitEvent:!1}),t.provisionConfigurationFormGroup.get("provisionDeviceKey").disable({emitEvent:!1}),t.provisionConfigurationFormGroup.get("provisionDeviceKey").patchValue(null);else{var n=t.provisionConfigurationFormGroup.get("provisionDeviceSecret").value;n&&n.length||t.provisionConfigurationFormGroup.get("provisionDeviceSecret").patchValue(Object(s.i)(20),{emitEvent:!1});var i=t.provisionConfigurationFormGroup.get("provisionDeviceKey").value;i&&i.length||t.provisionConfigurationFormGroup.get("provisionDeviceKey").patchValue(Object(s.i)(20),{emitEvent:!1}),t.provisionConfigurationFormGroup.get("provisionDeviceSecret").enable({emitEvent:!1}),t.provisionConfigurationFormGroup.get("provisionDeviceKey").enable({emitEvent:!1})}})),this.provisionConfigurationFormGroup.valueChanges.subscribe((function(){t.updateModel()}))},t.prototype.registerOnChange=function(t){this.propagateChange=t},t.prototype.registerOnTouched=function(t){},t.prototype.writeValue=function(t){Object(s.o)(t)?this.provisionConfigurationFormGroup.patchValue(t,{emitEvent:!1}):this.provisionConfigurationFormGroup.patchValue({type:o.i.DISABLED})},t.prototype.setDisabledState=function(t){this.disabled=t,this.disabled?this.provisionConfigurationFormGroup.disable():this.provisionConfigurationFormGroup.get("type").value!==o.i.DISABLED?this.provisionConfigurationFormGroup.enable({emitEvent:!1}):this.provisionConfigurationFormGroup.get("type").enable({emitEvent:!1})},t.prototype.validate=function(t){return this.provisionConfigurationFormGroup.valid?null:{provisionConfiguration:{valid:!1}}},t.prototype.updateModel=function(){var t=null;this.provisionConfigurationFormGroup.valid&&(t=this.provisionConfigurationFormGroup.getRawValue()),this.propagateChange(t)},t.prototype.onProvisionCopied=function(t){this.store.dispatch(new l.b({message:this.translate.instant(t?"device-profile.provision-key-copied-message":"device-profile.provision-secret-copied-message"),type:"success",duration:1200,verticalPosition:"bottom",horizontalPosition:"right"}))},t.\u0275fac=function(e){return new(e||t)(i["\u0275\u0275directiveInject"](c.Store),i["\u0275\u0275directiveInject"](a.FormBuilder),i["\u0275\u0275directiveInject"](d.TranslateService))},t.\u0275cmp=i["\u0275\u0275defineComponent"]({type:t,selectors:[["tb-device-profile-provision-configuration"]],inputs:{required:"required",disabled:"disabled"},features:[i["\u0275\u0275ProvidersFeature"]([{provide:a.NG_VALUE_ACCESSOR,useExisting:Object(i.forwardRef)((function(){return t})),multi:!0},{provide:a.NG_VALIDATORS,useExisting:Object(i.forwardRef)((function(){return t})),multi:!0}])],decls:8,vars:4,consts:[[3,"formGroup"],[1,"mat-block"],["translate",""],["formControlName","type","required",""],[3,"value",4,"ngFor","ngForOf"],[4,"ngIf"],["fxLayoutGap.gt-xs","8px","fxLayout","row","fxLayout.xs","column",4,"ngIf"],[3,"value"],["fxLayoutGap.gt-xs","8px","fxLayout","row","fxLayout.xs","column"],["fxFlex","",1,"mat-block"],["matInput","","formControlName","provisionDeviceKey","required",""],["mat-button","","matSuffix","","mat-icon-button","","ngxClipboard","","matTooltipPosition","above",3,"cbContent","matTooltip","cbOnSuccess"],["svgIcon","mdi:clipboard-arrow-left",2,"font-size","20px"],["matInput","","formControlName","provisionDeviceSecret","required",""]],template:function(t,e){1&t&&(i["\u0275\u0275elementStart"](0,"div",0),i["\u0275\u0275elementStart"](1,"mat-form-field",1),i["\u0275\u0275elementStart"](2,"mat-label",2),i["\u0275\u0275text"](3,"device-profile.provision-strategy"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](4,"mat-select",3),i["\u0275\u0275template"](5,C,3,4,"mat-option",4),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](6,S,3,3,"mat-error",5),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](7,I,17,10,"section",6),i["\u0275\u0275elementEnd"]()),2&t&&(i["\u0275\u0275property"]("formGroup",e.provisionConfigurationFormGroup),i["\u0275\u0275advance"](5),i["\u0275\u0275property"]("ngForOf",e.deviceProvisionTypes),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",e.provisionConfigurationFormGroup.get("type").hasError("required")),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",e.provisionConfigurationFormGroup.get("type").value!==e.deviceProvisionType.DISABLED))},directives:[a.NgControlStatusGroup,a.FormGroupDirective,p.MatFormField,p.MatLabel,d.TranslateDirective,u.MatSelect,a.NgControlStatus,a.FormControlName,a.RequiredValidator,m.NgForOf,m.NgIf,f.MatOption,p.MatError,h.g,h.f,h.b,g.MatInput,a.DefaultValueAccessor,y.MatButton,p.MatSuffix,b.a,v.MatTooltip,x.MatIcon],pipes:[d.TranslatePipe],encapsulation:2}),t}();!function(){i["\u0275setClassMetadata"](O,[{type:i.Component,args:[{selector:"tb-device-profile-provision-configuration",templateUrl:"./device-profile-provision-configuration.component.html",styleUrls:[],providers:[{provide:a.NG_VALUE_ACCESSOR,useExisting:Object(i.forwardRef)((function(){return O})),multi:!0},{provide:a.NG_VALIDATORS,useExisting:Object(i.forwardRef)((function(){return O})),multi:!0}]}]}],(function(){return[{type:c.Store},{type:a.FormBuilder},{type:d.TranslateService}]}),{required:[{type:i.Input}],disabled:[{type:i.Input}]})}()},xzJA:function(t,e,n){"use strict";n.d(e,"a",(function(){return R}));var i=n("fXoL"),a=n("oKkZ"),r=n("5xOD"),o=n("w1tV"),s=n("/uUt"),l=n("eIep"),c=n("lJxs"),d=n("vkgz"),p=n("05l1"),u=n("x+ZX"),m=n("2Vo4"),f=n("itXk"),h=n("LRne"),g=n("//Q6"),y=n("jhN1"),b=n("ofXK"),v=n("XiUz"),x=n("Wp6s"),C=n("Xa2L"),S=n("sYmb");function w(t,e){if(1&t&&(i["\u0275\u0275elementStart"](0,"mat-card-content"),i["\u0275\u0275text"](1),i["\u0275\u0275elementEnd"]()),2&t){var n=i["\u0275\u0275nextContext"]().$implicit;i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",n.description," ")}}function E(t,e){if(1&t){var n=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"div",7),i["\u0275\u0275elementStart"](1,"mat-card",8),i["\u0275\u0275listener"]("click",(function(t){i["\u0275\u0275restoreView"](n);var a=e.$implicit;return i["\u0275\u0275nextContext"](3).onWidgetClicked(t,a)})),i["\u0275\u0275elementStart"](2,"div",9),i["\u0275\u0275element"](3,"img",10),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](4,"div",11),i["\u0275\u0275elementStart"](5,"mat-card-title"),i["\u0275\u0275text"](6),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](7,"mat-card-subtitle"),i["\u0275\u0275text"](8),i["\u0275\u0275pipe"](9,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](10,w,2,1,"mat-card-content",12),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()}if(2&t){var a=e.$implicit,r=i["\u0275\u0275nextContext"](3);i["\u0275\u0275advance"](3),i["\u0275\u0275propertyInterpolate"]("alt",a.title),i["\u0275\u0275property"]("src",r.getPreviewImage(a.image),i["\u0275\u0275sanitizeUrl"]),i["\u0275\u0275advance"](3),i["\u0275\u0275textInterpolate"](a.title),i["\u0275\u0275advance"](2),i["\u0275\u0275textInterpolate"](i["\u0275\u0275pipeBind1"](9,5,"widget."+a.type)),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngIf",a.description)}}function I(t,e){if(1&t&&(i["\u0275\u0275elementStart"](0,"div",5),i["\u0275\u0275template"](1,E,11,7,"div",6),i["\u0275\u0275pipe"](2,"async"),i["\u0275\u0275elementEnd"]()),2&t){var n=i["\u0275\u0275nextContext"](2);i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngForOf",i["\u0275\u0275pipeBind1"](2,1,n.widgets$))}}function O(t,e){1&t&&(i["\u0275\u0275elementStart"](0,"div",15),i["\u0275\u0275elementStart"](1,"span",16),i["\u0275\u0275text"](2),i["\u0275\u0275pipe"](3,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](4,"mat-spinner",17),i["\u0275\u0275elementEnd"]()),2&t&&(i["\u0275\u0275advance"](2),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](3,1,"widget.loading-widgets")," "))}function T(t,e){1&t&&(i["\u0275\u0275elementStart"](0,"span",18),i["\u0275\u0275text"](1,"widgets-bundle.empty"),i["\u0275\u0275elementEnd"]())}function M(t,e){if(1&t&&(i["\u0275\u0275template"](0,O,5,3,"div",13),i["\u0275\u0275pipe"](1,"async"),i["\u0275\u0275template"](2,T,2,0,"ng-template",null,14,i["\u0275\u0275templateRefExtractor"])),2&t){var n=i["\u0275\u0275reference"](3),a=i["\u0275\u0275nextContext"](2);i["\u0275\u0275property"]("ngIf",i["\u0275\u0275pipeBind1"](1,2,a.loadingWidgets$))("ngIfElse",n)}}function F(t,e){if(1&t&&(i["\u0275\u0275elementStart"](0,"div"),i["\u0275\u0275template"](1,I,3,3,"div",3),i["\u0275\u0275pipe"](2,"async"),i["\u0275\u0275template"](3,M,4,4,"ng-template",null,4,i["\u0275\u0275templateRefExtractor"]),i["\u0275\u0275elementEnd"]()),2&t){var n,a=i["\u0275\u0275reference"](4),r=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",null==(n=i["\u0275\u0275pipeBind1"](2,2,r.widgets$))?null:n.length)("ngIfElse",a)}}function P(t,e){1&t&&(i["\u0275\u0275elementStart"](0,"mat-card-subtitle",21),i["\u0275\u0275text"](1,"widgets-bundle.system"),i["\u0275\u0275elementEnd"]())}function D(t,e){if(1&t&&(i["\u0275\u0275elementStart"](0,"mat-card-content"),i["\u0275\u0275text"](1),i["\u0275\u0275elementEnd"]()),2&t){var n=i["\u0275\u0275nextContext"]().$implicit;i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",n.description," ")}}function k(t,e){if(1&t){var n=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"div",7),i["\u0275\u0275elementStart"](1,"mat-card",8),i["\u0275\u0275listener"]("click",(function(t){i["\u0275\u0275restoreView"](n);var a=e.$implicit;return i["\u0275\u0275nextContext"](3).selectBundle(t,a)})),i["\u0275\u0275elementStart"](2,"div",9),i["\u0275\u0275element"](3,"img",10),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](4,"div",11),i["\u0275\u0275elementStart"](5,"mat-card-title"),i["\u0275\u0275text"](6),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](7,P,2,0,"mat-card-subtitle",20),i["\u0275\u0275template"](8,D,2,1,"mat-card-content",12),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()}if(2&t){var a=e.$implicit,r=i["\u0275\u0275nextContext"](3);i["\u0275\u0275advance"](3),i["\u0275\u0275propertyInterpolate"]("alt",a.title),i["\u0275\u0275property"]("src",r.getPreviewImage(a.image),i["\u0275\u0275sanitizeUrl"]),i["\u0275\u0275advance"](3),i["\u0275\u0275textInterpolate"](a.title),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",r.isSystem(a)),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",a.description)}}function j(t,e){if(1&t&&(i["\u0275\u0275elementStart"](0,"div",5),i["\u0275\u0275template"](1,k,9,5,"div",6),i["\u0275\u0275pipe"](2,"async"),i["\u0275\u0275elementEnd"]()),2&t){var n=i["\u0275\u0275nextContext"](2);i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngForOf",i["\u0275\u0275pipeBind1"](2,1,n.widgetsBundles$))}}function A(t,e){1&t&&(i["\u0275\u0275elementStart"](0,"div",15),i["\u0275\u0275elementStart"](1,"span",16),i["\u0275\u0275text"](2),i["\u0275\u0275pipe"](3,"translate"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](4,"mat-spinner",23),i["\u0275\u0275elementEnd"]()),2&t&&(i["\u0275\u0275advance"](2),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](3,1,"widgets-bundle.loading-widgets-bundles")," "))}function _(t,e){1&t&&(i["\u0275\u0275elementStart"](0,"span",18),i["\u0275\u0275text"](1,"widgets-bundle.no-widgets-bundles-text"),i["\u0275\u0275elementEnd"]())}function L(t,e){if(1&t&&(i["\u0275\u0275template"](0,A,5,3,"div",13),i["\u0275\u0275pipe"](1,"async"),i["\u0275\u0275template"](2,_,2,0,"ng-template",null,22,i["\u0275\u0275templateRefExtractor"])),2&t){var n=i["\u0275\u0275reference"](3),a=i["\u0275\u0275nextContext"](2);i["\u0275\u0275property"]("ngIf",i["\u0275\u0275pipeBind1"](1,2,a.loadingWidgetBundles$))("ngIfElse",n)}}function V(t,e){if(1&t&&(i["\u0275\u0275template"](0,j,3,3,"div",3),i["\u0275\u0275pipe"](1,"async"),i["\u0275\u0275template"](2,L,4,4,"ng-template",null,19,i["\u0275\u0275templateRefExtractor"])),2&t){var n,a=i["\u0275\u0275reference"](3),r=i["\u0275\u0275nextContext"]();i["\u0275\u0275property"]("ngIf",null==(n=i["\u0275\u0275pipeBind1"](1,2,r.widgetsBundles$))?null:n.length)("ngIfElse",a)}}var R=function(){function t(t,e){var n=this;this.widgetsService=t,this.sanitizer=e,this.search$=new m.a(""),this.filterWidgetTypes$=new m.a(null),this.widgetTypes=new Set,this.loadingWidgetsSubject=new m.a(!1),this.loadingWidgets$=this.loadingWidgetsSubject.pipe(Object(o.a)()),this.loadingWidgetBundlesSubject=new m.a(!0),this.loadingWidgetBundles$=this.loadingWidgetBundlesSubject.pipe(Object(o.a)()),this.widgetSelected=new i.EventEmitter,this.widgetsBundleSelected=new i.EventEmitter,this.widgetsBundles$=this.search$.asObservable().pipe(Object(s.a)(),Object(l.a)((function(t){return n.fetchWidgetBundle(t)}))),this.widgets$=Object(f.b)([this.search$.asObservable(),this.filterWidgetTypes$.asObservable()]).pipe(Object(s.a)((function(t,e){return JSON.stringify(t)===JSON.stringify(e)})),Object(l.a)((function(t){return n.fetchWidget.apply(n,t)})))}return Object.defineProperty(t.prototype,"widgetsBundle",{get:function(){return this.widgetsBundleValue},set:function(t){this.widgetsBundleValue!==t&&(this.widgetsBundleValue=t,null===t&&this.widgetTypes.clear(),this.filterWidgetTypes$.next(null),this.widgetsInfo=null)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"searchBundle",{set:function(t){this.search$.next(t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"filterWidgetTypes",{set:function(t){this.filterWidgetTypes$.next(t)},enumerable:!1,configurable:!0}),t.prototype.ngOnInit=function(){},t.prototype.getWidgets=function(){var t=this;if(!this.widgetsInfo)if(null!==this.widgetsBundle){var e=this.widgetsBundle.alias,n=this.widgetsBundle.tenantId.id===a.a;this.loadingWidgetsSubject.next(!0),this.widgetsInfo=this.widgetsService.getBundleWidgetTypeInfos(e,n).pipe(Object(c.a)((function(i){i=i.sort((function(t,e){return e.createdTime-t.createdTime}));var a=new Set,r=i.map((function(t){return a.add(t.widgetType),{isSystemType:n,bundleAlias:e,typeAlias:t.alias,type:t.widgetType,title:t.name,image:t.image,description:t.description}}));return setTimeout((function(){t.widgetTypes=a})),r})),Object(d.a)((function(){t.loadingWidgetsSubject.next(!1)})),Object(p.a)(1),Object(u.a)())}else this.widgetsInfo=Object(h.a)([]);return this.widgetsInfo},t.prototype.onWidgetClicked=function(t,e){this.widgetSelected.emit(e)},t.prototype.isSystem=function(t){return t&&t.tenantId.id===a.a},t.prototype.selectBundle=function(t,e){t.preventDefault(),this.widgetsBundle=e,this.search$.next(""),this.widgetsBundleSelected.emit(e)},t.prototype.getPreviewImage=function(t){return Object(g.o)(t)?this.sanitizer.bypassSecurityTrustUrl(t):"/assets/widget-preview-empty.svg"},t.prototype.getWidgetsBundle=function(){var t=this;return this.widgetsService.getAllWidgetsBundles().pipe(Object(d.a)((function(){return t.loadingWidgetBundlesSubject.next(!1)})),Object(p.a)(1),Object(u.a)())},t.prototype.fetchWidgetBundle=function(t){return this.getWidgetsBundle().pipe(Object(c.a)((function(e){return t?e.filter((function(e){var n,i;return(null===(n=e.title)||void 0===n?void 0:n.toLowerCase().includes(t.toLowerCase()))||(null===(i=e.description)||void 0===i?void 0:i.toLowerCase().includes(t.toLowerCase()))})):e})))},t.prototype.fetchWidget=function(t,e){return this.getWidgets().pipe(Object(c.a)((function(t){return e?t.filter((function(t){return e.includes(t.type)})):t})),Object(c.a)((function(e){return t?e.filter((function(e){var n,i;return(null===(n=e.title)||void 0===n?void 0:n.toLowerCase().includes(t.toLowerCase()))||(null===(i=e.description)||void 0===i?void 0:i.toLowerCase().includes(t.toLowerCase()))})):e})))},t.\u0275fac=function(e){return new(e||t)(i["\u0275\u0275directiveInject"](r.a),i["\u0275\u0275directiveInject"](y.DomSanitizer))},t.\u0275cmp=i["\u0275\u0275defineComponent"]({type:t,selectors:[["tb-dashboard-widget-select"]],inputs:{aliasController:"aliasController",searchBundle:"searchBundle",filterWidgetTypes:"filterWidgetTypes"},outputs:{widgetSelected:"widgetSelected",widgetsBundleSelected:"widgetsBundleSelected"},decls:4,vars:2,consts:[[1,"widget-select"],[4,"ngIf","ngIfElse"],["bundles",""],["fxFlexFill","","fxLayoutGap","12px grid","fxLayout","row wrap",4,"ngIf","ngIfElse"],["loadingWidgets",""],["fxFlexFill","","fxLayoutGap","12px grid","fxLayout","row wrap"],["class","mat-card-container",4,"ngFor","ngForOf"],[1,"mat-card-container"],["fxFlexFill","","fxLayout","row","fxLayoutGap","16px",3,"click"],["fxFlex","45",1,"preview-container"],[1,"preview",3,"src","alt"],["fxFlex","","fxLayout","column"],[4,"ngIf"],["fxLayout","column","fxLayoutAlign","center center","class","tb-absolute-fill",4,"ngIf","ngIfElse"],["emptyBundle",""],["fxLayout","column","fxLayoutAlign","center center",1,"tb-absolute-fill"],[1,"mat-headline",2,"padding-bottom","20px"],["color","accent","strokeWidth","5"],["translate","","fxLayoutAlign","center center",1,"mat-headline","tb-absolute-fill",2,"display","flex"],["loadingWidgetBundles",""],["translate","",4,"ngIf"],["translate",""],["noWidgetBundles",""],["strokeWidth","5"]],template:function(t,e){if(1&t&&(i["\u0275\u0275elementStart"](0,"div",0),i["\u0275\u0275template"](1,F,5,4,"div",1),i["\u0275\u0275template"](2,V,4,4,"ng-template",null,2,i["\u0275\u0275templateRefExtractor"]),i["\u0275\u0275elementEnd"]()),2&t){var n=i["\u0275\u0275reference"](3);i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",e.widgetsBundle)("ngIfElse",n)}},directives:[b.NgIf,v.k,v.g,v.f,b.NgForOf,x.MatCard,v.b,x.MatCardTitle,x.MatCardSubtitle,x.MatCardContent,v.e,C.MatSpinner,S.TranslateDirective],pipes:[b.AsyncPipe,S.TranslatePipe],styles:["[_nghost-%COMP%]{min-width:100%;min-height:100%;position:absolute;background-color:#cfd8dc}[_nghost-%COMP%]   .widget-select[_ngcontent-%COMP%]{padding:12px 0 12px 12px;background-color:#cfd8dc}[_nghost-%COMP%]   .widget-select[_ngcontent-%COMP%]   .mat-card-container[_ngcontent-%COMP%]{-ms-flex:0 0 100%;flex:0 0 100%;max-width:100%}[_nghost-%COMP%]   .widget-select[_ngcontent-%COMP%]   .mat-card-container[_ngcontent-%COMP%]:hover   .mat-card[_ngcontent-%COMP%]{box-shadow:0 2px 6px 6px rgba(0,0,0,.2),0 1px 4px 2px rgba(0,0,0,.14),0 1px 6px 0 rgba(0,0,0,.12)}[_nghost-%COMP%]   .widget-select[_ngcontent-%COMP%]   .mat-card-container[_ngcontent-%COMP%]   .mat-card[_ngcontent-%COMP%]{cursor:pointer;transition:box-shadow .2s}[_nghost-%COMP%]   .widget-select[_ngcontent-%COMP%]   .mat-card-container[_ngcontent-%COMP%]   .mat-card[_ngcontent-%COMP%]   .preview-container[_ngcontent-%COMP%]{text-align:center;margin:auto 0}[_nghost-%COMP%]   .widget-select[_ngcontent-%COMP%]   .mat-card-container[_ngcontent-%COMP%]   .mat-card[_ngcontent-%COMP%]   .preview[_ngcontent-%COMP%]{max-width:100%;max-height:100%;-o-object-fit:contain;object-fit:contain}[_nghost-%COMP%]   .widget-select[_ngcontent-%COMP%]   .mat-card-container[_ngcontent-%COMP%]   .mat-card[_ngcontent-%COMP%]   .mat-card-title[_ngcontent-%COMP%]{font-size:20px}[_nghost-%COMP%]   .widget-select[_ngcontent-%COMP%]   .mat-card-container[_ngcontent-%COMP%]   .mat-card[_ngcontent-%COMP%]   .mat-card-content[_ngcontent-%COMP%]{font-size:14px;line-height:18px;color:#666}@media screen and (min-width:600px){[_nghost-%COMP%]   .widget-select[_ngcontent-%COMP%]   .mat-card-container[_ngcontent-%COMP%]{-ms-flex:0 0 50%;flex:0 0 50%;max-width:50%}}@media screen and (min-width:2000px){[_nghost-%COMP%]   .widget-select[_ngcontent-%COMP%]   .mat-card-container[_ngcontent-%COMP%]{-ms-flex:0 0 33.333333%;flex:0 0 33.333333%;max-width:33.333333%}}"]}),t}();!function(){i["\u0275setClassMetadata"](R,[{type:i.Component,args:[{selector:"tb-dashboard-widget-select",templateUrl:"./dashboard-widget-select.component.html",styleUrls:["./dashboard-widget-select.component.scss"]}]}],(function(){return[{type:r.a},{type:y.DomSanitizer}]}),{aliasController:[{type:i.Input}],searchBundle:[{type:i.Input}],filterWidgetTypes:[{type:i.Input}],widgetSelected:[{type:i.Output}],widgetsBundleSelected:[{type:i.Output}]})}()},xze0:function(t,e,n){"use strict";n.d(e,"a",(function(){return b})),n.d(e,"b",(function(){return v}));var i=n("mrSG"),a=n("fXoL"),r=n("//Q6"),o=n("A1kC"),s=n("0IaG"),l=n("XiUz"),c=n("ofXK"),d=n("kmnG"),p=n("bTqV"),u=n("Qu3c"),m=n("NFeN"),f=n("f0Cb"),h=n("sYmb");function g(t,e){1&t&&a["\u0275\u0275element"](0,"mat-divider")}function y(t,e){if(1&t){var n=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementStart"](0,"div"),a["\u0275\u0275elementStart"](1,"div",2),a["\u0275\u0275elementStart"](2,"mat-label",3),a["\u0275\u0275text"](3),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementStart"](4,"button",4),a["\u0275\u0275listener"]("click",(function(){a["\u0275\u0275restoreView"](n);var t=e.$implicit;return a["\u0275\u0275nextContext"]().editFilter(t.key,t.value)})),a["\u0275\u0275pipe"](5,"translate"),a["\u0275\u0275elementStart"](6,"mat-icon"),a["\u0275\u0275text"](7,"edit"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275template"](8,g,1,0,"mat-divider",5),a["\u0275\u0275elementEnd"]()}if(2&t){var i=e.$implicit,r=e.last;a["\u0275\u0275advance"](3),a["\u0275\u0275textInterpolate"](i.value.filter),a["\u0275\u0275advance"](1),a["\u0275\u0275propertyInterpolate"]("matTooltip",a["\u0275\u0275pipeBind1"](5,3,"filter.edit")),a["\u0275\u0275advance"](4),a["\u0275\u0275property"]("ngIf",!r)}}var b=new a.InjectionToken("FiltersEditPanelData"),v=function(){function t(t,e){this.data=t,this.dialog=e,this.filtersInfo=this.data.filtersInfo}return t.prototype.editFilter=function(t,e){var n=this,a=Object(i.a)({id:t},Object(r.e)(e));this.dialog.open(o.a,{disableClose:!0,panelClass:["tb-dialog","tb-fullscreen-dialog"],data:{filter:a}}).afterClosed().subscribe((function(t){t&&(n.filtersInfo[t.id]=t,n.data.aliasController.updateUserFilter(t))}))},t.\u0275fac=function(e){return new(e||t)(a["\u0275\u0275directiveInject"](b),a["\u0275\u0275directiveInject"](s.MatDialog))},t.\u0275cmp=a["\u0275\u0275defineComponent"]({type:t,selectors:[["tb-filters-edit-panel"]],decls:3,vars:3,consts:[["fxLayout","column",1,"mat-content","mat-padding"],[4,"ngFor","ngForOf"],["fxLayout","row","fxLayoutAlign","start center"],["fxFlex",""],["mat-icon-button","","color","primary","type","button","matTooltipPosition","above",2,"min-width","40px",3,"matTooltip","click"],[4,"ngIf"]],template:function(t,e){1&t&&(a["\u0275\u0275elementStart"](0,"div",0),a["\u0275\u0275template"](1,y,9,5,"div",1),a["\u0275\u0275pipe"](2,"keyvalue"),a["\u0275\u0275elementEnd"]()),2&t&&(a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("ngForOf",a["\u0275\u0275pipeBind1"](2,1,e.filtersInfo)))},directives:[l.f,c.NgForOf,l.e,d.MatLabel,l.b,p.MatButton,u.MatTooltip,m.MatIcon,c.NgIf,f.MatDivider],pipes:[c.KeyValuePipe,h.TranslatePipe],styles:["[_nghost-%COMP%]{min-width:300px;max-height:150px;overflow-x:hidden;overflow-y:auto;background:#fff;border-radius:4px;box-shadow:0 7px 8px -4px rgba(0,0,0,.2),0 13px 19px 2px rgba(0,0,0,.14),0 5px 24px 4px rgba(0,0,0,.12)}@media (min-height:350px){[_nghost-%COMP%]{max-height:250px}}[_nghost-%COMP%]   .mat-content[_ngcontent-%COMP%]{background-color:#fff}"]}),t}();!function(){a["\u0275setClassMetadata"](v,[{type:a.Component,args:[{selector:"tb-filters-edit-panel",templateUrl:"./filters-edit-panel.component.html",styleUrls:["./filters-edit-panel.component.scss"]}]}],(function(){return[{type:void 0,decorators:[{type:a.Inject,args:[b]}]},{type:s.MatDialog}]}),null)}()},yOwA:function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));var i=n("mrSG"),a=n("fXoL"),r=n("AUWA"),o=n("l7P3"),s=n("ofXK"),l=n("wZkO"),c=n("igfJ"),d=n("sYmb");function p(t,e){if(1&t&&(a["\u0275\u0275elementStart"](0,"mat-tab",1,2),a["\u0275\u0275pipe"](2,"translate"),a["\u0275\u0275element"](3,"tb-audit-log-table",3),a["\u0275\u0275elementEnd"]()),2&t){var n=a["\u0275\u0275reference"](1),i=a["\u0275\u0275nextContext"]();a["\u0275\u0275propertyInterpolate"]("label",a["\u0275\u0275pipeBind1"](2,4,"audit-log.audit-logs")),a["\u0275\u0275advance"](3),a["\u0275\u0275property"]("active",n.isActive)("auditLogMode",i.auditLogModes.ENTITY)("entityId",i.entity.id)}}var u=function(t){function e(e){var n=t.call(this,e)||this;return n.store=e,n}return Object(i.d)(e,t),e.prototype.ngOnInit=function(){t.prototype.ngOnInit.call(this)},e.\u0275fac=function(t){return new(t||e)(a["\u0275\u0275directiveInject"](o.Store))},e.\u0275cmp=a["\u0275\u0275defineComponent"]({type:e,selectors:[["tb-dashboard-tabs"]],features:[a["\u0275\u0275InheritDefinitionFeature"]],decls:1,vars:1,consts:[[3,"label",4,"ngIf"],[3,"label"],["auditLogsTab","matTab"],["detailsMode","true",3,"active","auditLogMode","entityId"]],template:function(t,e){1&t&&a["\u0275\u0275template"](0,p,4,6,"mat-tab",0),2&t&&a["\u0275\u0275property"]("ngIf",e.entity&&e.authUser.authority===e.authorities.TENANT_ADMIN)},directives:[s.NgIf,l.MatTab,c.a],pipes:[d.TranslatePipe],encapsulation:2}),e}(r.a);!function(){a["\u0275setClassMetadata"](u,[{type:a.Component,args:[{selector:"tb-dashboard-tabs",templateUrl:"./dashboard-tabs.component.html",styleUrls:[]}]}],(function(){return[{type:o.Store}]}),null)}()},z3OR:function(t,e,n){"use strict";var i;n.d(e,"a",(function(){return i})),n.d(e,"f",(function(){return a})),n.d(e,"e",(function(){return r})),n.d(e,"b",(function(){return o})),n.d(e,"c",(function(){return s})),n.d(e,"d",(function(){return l})),function(t){t.name="NAME",t.type="TYPE",t.label="LABEL",t.clientAttribute="CLIENT_ATTRIBUTE",t.sharedAttribute="SHARED_ATTRIBUTE",t.serverAttribute="SERVER_ATTRIBUTE",t.timeseries="TIMESERIES",t.entityField="ENTITY_FIELD",t.accessToken="ACCESS_TOKEN",t.isGateway="IS_GATEWAY",t.description="DESCRIPTION"}(i||(i={}));var a=[i.name,i.type,i.accessToken],r=new Map([[i.name,"import.column-type.name"],[i.type,"import.column-type.type"],[i.label,"import.column-type.label"],[i.clientAttribute,"import.column-type.client-attribute"],[i.sharedAttribute,"import.column-type.shared-attribute"],[i.serverAttribute,"import.column-type.server-attribute"],[i.timeseries,"import.column-type.timeseries"],[i.entityField,"import.column-type.entity-field"],[i.accessToken,"import.column-type.access-token"],[i.isGateway,"import.column-type.isgateway"],[i.description,"import.column-type.description"]]),o={mimeType:"text/json",extension:"json"},s={mimeType:"application/zip",extension:"zip"};function l(t,e,n){var i=(e=e||{}).delim||",",a=e.header||!1,r={},o=t.split(/[\r\n]+/),s=c(o[0],i);if(s.length<2)return n("import.import-csv-number-columns-error"),-1;var l=a?o.slice(1,o.length):o;r.headers=s,r.rows=[];for(var p=0,u=l;p<u.length;p++){var m=u[p];if(0===m.length)break;var f=c(m,i);if(f.length!==r.headers.length)return n("import.import-csv-invalid-format-error",{line:a?r.rows.length+2:r.rows.length+1}),-1;for(var h=0;h<f.length;h++)f[h]=d(f[h]);r.rows.push(f)}return r}function c(t,e){var n,i,a;for(i=(n=t.split(e=e||",")).length-1,a;i>=0;i--)'"'===n[i].replace(/"\s+$/,'"').charAt(n[i].length-1)?(a=n[i].replace(/^\s+"/,'"')).length>1&&'"'===a.charAt(0)?n[i]=n[i].replace(/^\s*"|"\s*$/g,"").replace(/""/g,'"'):i?n.splice(i-1,2,[n[i-1],n[i]].join(e)):n=n.shift().split(e).concat(n):n[i].replace(/""/g,'"');return n}function d(t){return function(t){return(t=t.replace(",","."))-parseFloat(t)+1>=0&&Number(t).toString()===t}(t.replace(",","."))?parseFloat(t.replace(",",".")):0===t.search(/^(true|false)$/im)?"true"===t.toLowerCase():""===t?null:t}},z5iZ:function(t,e,n){"use strict";n.d(e,"a",(function(){return x}));var i=n("mrSG"),a=n("fXoL"),r=n("3Pt+"),o=n("8LU1"),s=n("//Q6"),l=n("IVUU"),c=n("0IaG"),d=n("XiUz"),p=n("9joC"),u=n("4Nnk"),m=n("ofXK"),f=n("bTqV"),h=n("Qu3c"),g=n("NFeN"),y=n("sYmb");function b(t,e){if(1&t){var n=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementStart"](0,"span",8),a["\u0275\u0275listener"]("click",(function(t){return a["\u0275\u0275restoreView"](n),a["\u0275\u0275nextContext"](2).openEditDetailsDialog(t)})),a["\u0275\u0275elementEnd"]()}if(2&t){var i=a["\u0275\u0275nextContext"](2);a["\u0275\u0275property"]("innerHTML",i.alarmRuleFormGroup.get("alarmDetails").value,a["\u0275\u0275sanitizeHtml"])}}function v(t,e){if(1&t){var n=a["\u0275\u0275getCurrentView"]();a["\u0275\u0275elementStart"](0,"div",4),a["\u0275\u0275elementStart"](1,"span",5),a["\u0275\u0275listener"]("click",(function(t){return a["\u0275\u0275restoreView"](n),a["\u0275\u0275nextContext"]().openEditDetailsDialog(t)})),a["\u0275\u0275text"](2),a["\u0275\u0275pipe"](3,"translate"),a["\u0275\u0275pipe"](4,"translate"),a["\u0275\u0275elementEnd"](),a["\u0275\u0275template"](5,b,1,1,"span",6),a["\u0275\u0275elementStart"](6,"button",7),a["\u0275\u0275listener"]("click",(function(t){return a["\u0275\u0275restoreView"](n),a["\u0275\u0275nextContext"]().openEditDetailsDialog(t)})),a["\u0275\u0275pipe"](7,"translate"),a["\u0275\u0275elementStart"](8,"mat-icon"),a["\u0275\u0275text"](9),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"](),a["\u0275\u0275elementEnd"]()}if(2&t){var i=a["\u0275\u0275nextContext"]();a["\u0275\u0275advance"](2),a["\u0275\u0275textInterpolate1"](" ",i.alarmRuleFormGroup.get("alarmDetails").value?a["\u0275\u0275pipeBind1"](3,4,"device-profile.alarm-rule-details")+": ":a["\u0275\u0275pipeBind1"](4,6,"device-profile.add-alarm-rule-details")," "),a["\u0275\u0275advance"](3),a["\u0275\u0275property"]("ngIf",i.alarmRuleFormGroup.get("alarmDetails").value),a["\u0275\u0275advance"](1),a["\u0275\u0275propertyInterpolate"]("matTooltip",a["\u0275\u0275pipeBind1"](7,8,i.disabled?"action.view":"action.edit")),a["\u0275\u0275advance"](3),a["\u0275\u0275textInterpolate"](i.disabled?"visibility":i.alarmRuleFormGroup.get("alarmDetails").value?"edit":"add")}}var x=function(){function t(t,e){this.dialog=t,this.fb=e,this.expandAlarmDetails=!1,this.propagateChange=function(t){}}return Object.defineProperty(t.prototype,"required",{get:function(){return this.requiredValue},set:function(t){this.requiredValue=Object(o.coerceBooleanProperty)(t)},enumerable:!1,configurable:!0}),t.prototype.registerOnChange=function(t){this.propagateChange=t},t.prototype.registerOnTouched=function(t){},t.prototype.ngOnInit=function(){var t=this;this.alarmRuleFormGroup=this.fb.group({condition:[null,[r.Validators.required]],schedule:[null],alarmDetails:[null]}),this.alarmRuleFormGroup.valueChanges.subscribe((function(){t.updateModel()}))},t.prototype.setDisabledState=function(t){this.disabled=t,this.disabled?this.alarmRuleFormGroup.disable({emitEvent:!1}):this.alarmRuleFormGroup.enable({emitEvent:!1})},t.prototype.writeValue=function(t){this.modelValue=t,this.alarmRuleFormGroup.reset(this.modelValue||void 0,{emitEvent:!1})},t.prototype.openEditDetailsDialog=function(t){var e=this;t&&t.stopPropagation(),this.dialog.open(l.a,{disableClose:!0,panelClass:["tb-dialog","tb-fullscreen-dialog"],data:{alarmDetails:this.alarmRuleFormGroup.get("alarmDetails").value,readonly:this.disabled}}).afterClosed().subscribe((function(t){Object(s.o)(t)&&e.alarmRuleFormGroup.patchValue({alarmDetails:t})}))},t.prototype.validate=function(t){return!this.required&&!this.modelValue||this.alarmRuleFormGroup.valid?null:{alarmRule:{valid:!1}}},t.prototype.updateModel=function(){var t=this.alarmRuleFormGroup.value;this.modelValue&&(this.modelValue=Object(i.a)(Object(i.a)({},this.modelValue),t),this.propagateChange(this.modelValue))},t.\u0275fac=function(e){return new(e||t)(a["\u0275\u0275directiveInject"](c.MatDialog),a["\u0275\u0275directiveInject"](r.FormBuilder))},t.\u0275cmp=a["\u0275\u0275defineComponent"]({type:t,selectors:[["tb-alarm-rule"]],inputs:{disabled:"disabled",required:"required",deviceProfileId:"deviceProfileId"},features:[a["\u0275\u0275ProvidersFeature"]([{provide:r.NG_VALUE_ACCESSOR,useExisting:Object(a.forwardRef)((function(){return t})),multi:!0},{provide:r.NG_VALIDATORS,useExisting:Object(a.forwardRef)((function(){return t})),multi:!0}])],decls:4,vars:3,consts:[["fxLayout","column",3,"formGroup"],["formControlName","condition",3,"deviceProfileId"],["formControlName","schedule"],["fxLayout","row","fxLayoutAlign","start center",4,"ngIf"],["fxLayout","row","fxLayoutAlign","start center"],[1,"tb-alarm-rule-details","title",3,"click"],["class","tb-alarm-rule-details",3,"innerHTML","click",4,"ngIf"],["mat-icon-button","","color","primary","type","button","matTooltipPosition","above",3,"matTooltip","click"],[1,"tb-alarm-rule-details",3,"innerHTML","click"]],template:function(t,e){1&t&&(a["\u0275\u0275elementStart"](0,"div",0),a["\u0275\u0275element"](1,"tb-alarm-rule-condition",1),a["\u0275\u0275element"](2,"tb-alarm-schedule-info",2),a["\u0275\u0275template"](3,v,10,10,"div",3),a["\u0275\u0275elementEnd"]()),2&t&&(a["\u0275\u0275property"]("formGroup",e.alarmRuleFormGroup),a["\u0275\u0275advance"](1),a["\u0275\u0275property"]("deviceProfileId",e.deviceProfileId),a["\u0275\u0275advance"](2),a["\u0275\u0275property"]("ngIf",!e.disabled||e.alarmRuleFormGroup.get("alarmDetails").value))},directives:[d.f,r.NgControlStatusGroup,r.FormGroupDirective,p.a,r.NgControlStatus,r.FormControlName,u.a,m.NgIf,d.e,f.MatButton,h.MatTooltip,g.MatIcon],pipes:[y.TranslatePipe],styles:["[_nghost-%COMP%]{min-width:0}[_nghost-%COMP%]   .row[_ngcontent-%COMP%]{margin-top:1em}[_nghost-%COMP%]   .tb-alarm-rule-details[_ngcontent-%COMP%]{padding:4px;cursor:pointer;overflow:hidden;white-space:nowrap;text-overflow:ellipsis}[_nghost-%COMP%]   .tb-alarm-rule-details.title[_ngcontent-%COMP%]{opacity:.7;overflow:visible}"]}),t}();!function(){a["\u0275setClassMetadata"](x,[{type:a.Component,args:[{selector:"tb-alarm-rule",templateUrl:"./alarm-rule.component.html",styleUrls:["./alarm-rule.component.scss"],providers:[{provide:r.NG_VALUE_ACCESSOR,useExisting:Object(a.forwardRef)((function(){return x})),multi:!0},{provide:r.NG_VALIDATORS,useExisting:Object(a.forwardRef)((function(){return x})),multi:!0}]}]}],(function(){return[{type:c.MatDialog},{type:r.FormBuilder}]}),{disabled:[{type:a.Input}],required:[{type:a.Input}],deviceProfileId:[{type:a.Input}]})}()},zkya:function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var i=n("U3y+"),a=function(t){this.entityType=i.b.DEVICE_PROFILE,this.id=t}}}]);